import{u as e,g as a}from"./main-CsrKMSiW.js";import"./unknown-4jvSuY0O.js";import"./unknown-DE60C25c.js";import"./unknown-BbZV662f.js";import"./unknown-CF7AHsrn.js";import"./unknown-64GElSgY.js";class t{static logStore=e.getState();static logGameEvent(e,t){const{message:o,type:l,metadata:s={},importance:i="normal"}=e;a.log("critical"===i?"error":"high"===i?"warn":"info","GameEvent",o,{type:l,...s,...t}),this.logStore.addGameLogMessage(o,l,{...s,...t})}static logPlayerAction(e,a,t){this.logGameEvent({message:`${a} ${e}`,type:"player_action",importance:"normal"},t)}static logPlayerAttack(e,a,t,o=!1,l=!1,s){let i="";l&&(i+="ataque duplo "),o&&(i+="CR√çTICO ");const m=`${e} ${i}atacou ${a} causando ${t} de dano!`;this.logGameEvent({message:m,type:"player_action",importance:o?"high":"normal",metadata:{damage:t,isCritical:o,isDoubleAttack:l}},{playerName:e,enemyName:a,damage:t,...s}),this.logDamage("player","enemy",t,o?"critical":"physical",{playerName:e,enemyName:a,...s})}static logEnemyAction(e,a,t){this.logGameEvent({message:`${a} ${e}`,type:"enemy_action",importance:"normal"},t)}static logEnemyAttack(e,a,t,o=!1,l=!1,s){let i="";i=l?`${e} usou uma habilidade especial`:`${e} atacou ${a}`,i+=o?` mas o dano foi reduzido para ${t}`:` causando ${t} de dano`,i+="!",this.logGameEvent({message:i,type:"enemy_action",importance:l?"high":"normal",metadata:{damage:t,wasDefended:o,isSpecial:l}},{enemyName:e,playerName:a,damage:t,...s}),this.logDamage("enemy","player",t,l?"special":"physical",{enemyName:e,playerName:a,...s})}static logSpellCast(e,a,t,o,l,s){let i="";switch(l){case"damage":i=`causando ${o} de dano m√°gico`;break;case"heal":i=`restaurando ${o} de vida`;break;case"buff":i="aplicando efeito positivo";break;case"debuff":i="aplicando efeito negativo"}const m=`${e} lan√ßou ${a} em ${t}, ${i}!`;this.logGameEvent({message:m,type:"player_action",importance:"damage"===l&&o>100?"high":"normal",metadata:{spellName:a,effectValue:o,effectType:l}},{spellName:a,...s})}static logConsumableUse(e,a,t,o,l){let s=`${e} usou ${a}`;if(o){s+=` (${this.getKeyBinding(o)})`}s+=` - ${t}!`,this.logGameEvent({message:s,type:"player_action",importance:"normal",metadata:{consumableName:a,effect:t,slotPosition:o}},{playerName:e,consumableName:a,...l})}static logXpGain(e,a,t,o,l){let s="";s="skill"===t&&o?`${e} ganhou ${a} XP em ${o}!`:`${e} ganhou ${a} XP!`,this.logGameEvent({message:s,type:"skill"===t?"skill_xp":"system",importance:a>=100?"high":"normal",metadata:{xpAmount:a,source:t,skillName:o}},{playerName:e,xpGained:a,skillName:o,...l})}static logLevelUp(e,a,t,o){const l=`üéâ ${e} subiu para o n√≠vel ${a}!`;this.logGameEvent({message:l,type:"level_up",importance:"critical",metadata:{newLevel:a,oldLevel:t}},{playerName:e,levelBefore:t,levelAfter:a,...o})}static logDamage(e,t,o,l,s){a.logDamage(e,t,o,l,s)}static logHealing(e,a,t,o,l){const s=`${e} ${e===a?"recuperou":`curou ${a}, restaurando`} ${t} de vida!`;this.logGameEvent({message:s,type:"healing",importance:"normal",metadata:{healAmount:t,source:o}},{healing:t,...l})}static logBattleStart(e,t,o,l){const s=`Batalha iniciada: ${e} vs ${t} (Andar ${o})`;this.clearUILogs(),a.startBattle(e,o),this.logGameEvent({message:s,type:"battle",importance:"high",metadata:{playerName:e,enemyName:t,floorNumber:o}},{playerName:e,enemyName:t,floorNumber:o,...l})}static logBattleEnd(e,t,o,l,s){let i="";switch(e){case"victory":i=`‚úÖ ${t} venceu a batalha!`,l&&(i+=` (+${l.xp} XP, +${l.gold} gold)`);break;case"defeat":i=`üíÄ ${t} foi derrotado...`;break;case"flee":i=`üèÉ ${t} fugiu da batalha!`}a.endBattle(e,{rewards:l,...s}),this.logGameEvent({message:i,type:"victory"===e?"battle":"system",importance:"defeat"===e?"critical":"high",metadata:{result:e,rewards:l}},{playerName:t,enemyName:o,...l,...s}),"victory"===e&&l&&this.logBattleRewards(t,l.xp,l.gold,l.drops,s)}static logBattleRewards(e,a,t,o,l){if(a>0&&this.logXpGain(e,a,"combat",void 0,l),t>0&&this.logGameEvent({message:`${e} obteve ${t} moedas de ouro!`,type:"system",importance:"normal",metadata:{goldGained:t}},{playerName:e,goldGained:t,...l}),o.length>0)for(const s of o)this.logGameEvent({message:`${e} obteve ${s.quantity}x ${s.name}!`,type:"system",importance:"normal",metadata:{dropName:s.name,dropQuantity:s.quantity}},{playerName:e,dropsObtained:o,...l})}static logBattleError(e,t,o){a.logError("BattleSystem",e,{context:t,...o});const l=t?`‚ö†Ô∏è Erro [${t}]: ${e}`:`‚ö†Ô∏è Erro: ${e}`;this.logGameEvent({message:l,type:"system",importance:"critical",metadata:{error:e,context:t}},o)}static getKeyBinding(e){return{1:"Q",2:"W",3:"E"}[e]||`Slot ${e}`}static updateStoreReference(){this.logStore=e.getState()}static getBattleLogStats(){return a.getLogStats()}static exportCurrentBattleLogs(){return a.exportCurrentBattleLogs()}static clearOldLogs(){a.clearOldLogs()}static clearUILogs(){e.getState().clearAllLogs()}static clearAllLogs(){this.clearOldLogs(),this.clearUILogs()}}export{t as LoggingUtils};
