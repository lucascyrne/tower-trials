var K3=Object.defineProperty;var W3=(t,e,s)=>e in t?K3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ze=(t,e,s)=>W3(t,typeof e!="symbol"?e+"":e,s);function Z3(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function Vm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var q0={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bj;function J3(){if(Bj)return Ru;Bj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,n,i){var c=null;if(i!==void 0&&(c=""+i),n.key!==void 0&&(c=""+n.key),"key"in n){i={};for(var u in n)u!=="key"&&(i[u]=n[u])}else i=n;return n=i.ref,{$$typeof:t,type:r,key:c,ref:n!==void 0?n:null,props:i}}return Ru.Fragment=e,Ru.jsx=s,Ru.jsxs=s,Ru}var Vj;function eP(){return Vj||(Vj=1,q0.exports=J3()),q0.exports}var a=eP(),F0={exports:{}},lt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zj;function tP(){if(zj)return lt;zj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,j={};function N(L,X,ae){this.props=L,this.context=X,this.refs=j,this.updater=ae||b}N.prototype.isReactComponent={},N.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},N.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=N.prototype;function E(L,X,ae){this.props=L,this.context=X,this.refs=j,this.updater=ae||b}var S=E.prototype=new C;S.constructor=E,_(S,N.prototype),S.isPureReactComponent=!0;var P=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function $(L,X,ae,ee,le,ie){return ae=ie.ref,{$$typeof:t,type:L,key:X,ref:ae!==void 0?ae:null,props:ie}}function A(L,X){return $(L.type,X,void 0,void 0,void 0,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function U(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ae){return X[ae]})}var Y=/\/+/g;function V(L,X){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):X.toString(36)}function F(){}function Q(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(F,F):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function G(L,X,ae,ee,le){var ie=typeof L;(ie==="undefined"||ie==="boolean")&&(L=null);var se=!1;if(L===null)se=!0;else switch(ie){case"bigint":case"string":case"number":se=!0;break;case"object":switch(L.$$typeof){case t:case e:se=!0;break;case p:return se=L._init,G(se(L._payload),X,ae,ee,le)}}if(se)return le=le(L),se=ee===""?"."+V(L,0):ee,P(le)?(ae="",se!=null&&(ae=se.replace(Y,"$&/")+"/"),G(le,X,ae,"",function(be){return be})):le!=null&&(M(le)&&(le=A(le,ae+(le.key==null||L&&L.key===le.key?"":(""+le.key).replace(Y,"$&/")+"/")+se)),X.push(le)),1;se=0;var ue=ee===""?".":ee+":";if(P(L))for(var ce=0;ce<L.length;ce++)ee=L[ce],ie=ue+V(ee,ce),se+=G(ee,X,ae,ie,le);else if(ce=x(L),typeof ce=="function")for(L=ce.call(L),ce=0;!(ee=L.next()).done;)ee=ee.value,ie=ue+V(ee,ce++),se+=G(ee,X,ae,ie,le);else if(ie==="object"){if(typeof L.then=="function")return G(Q(L),X,ae,ee,le);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return se}function k(L,X,ae){if(L==null)return L;var ee=[],le=0;return G(L,ee,"","",function(ie){return X.call(ae,ie,le++)}),ee}function B(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=ae)},function(ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=ae)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var z=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function W(){}return lt.Children={map:k,forEach:function(L,X,ae){k(L,function(){X.apply(this,arguments)},ae)},count:function(L){var X=0;return k(L,function(){X++}),X},toArray:function(L){return k(L,function(X){return X})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},lt.Component=N,lt.Fragment=s,lt.Profiler=n,lt.PureComponent=E,lt.StrictMode=r,lt.Suspense=f,lt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,lt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},lt.cache=function(L){return function(){return L.apply(null,arguments)}},lt.cloneElement=function(L,X,ae){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ee=_({},L.props),le=L.key,ie=void 0;if(X!=null)for(se in X.ref!==void 0&&(ie=void 0),X.key!==void 0&&(le=""+X.key),X)!D.call(X,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&X.ref===void 0||(ee[se]=X[se]);var se=arguments.length-2;if(se===1)ee.children=ae;else if(1<se){for(var ue=Array(se),ce=0;ce<se;ce++)ue[ce]=arguments[ce+2];ee.children=ue}return $(L.type,le,void 0,void 0,ie,ee)},lt.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},lt.createElement=function(L,X,ae){var ee,le={},ie=null;if(X!=null)for(ee in X.key!==void 0&&(ie=""+X.key),X)D.call(X,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(le[ee]=X[ee]);var se=arguments.length-2;if(se===1)le.children=ae;else if(1<se){for(var ue=Array(se),ce=0;ce<se;ce++)ue[ce]=arguments[ce+2];le.children=ue}if(L&&L.defaultProps)for(ee in se=L.defaultProps,se)le[ee]===void 0&&(le[ee]=se[ee]);return $(L,ie,void 0,void 0,null,le)},lt.createRef=function(){return{current:null}},lt.forwardRef=function(L){return{$$typeof:u,render:L}},lt.isValidElement=M,lt.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:B}},lt.memo=function(L,X){return{$$typeof:h,type:L,compare:X===void 0?null:X}},lt.startTransition=function(L){var X=R.T,ae={};R.T=ae;try{var ee=L(),le=R.S;le!==null&&le(ae,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(W,z)}catch(ie){z(ie)}finally{R.T=X}},lt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},lt.use=function(L){return R.H.use(L)},lt.useActionState=function(L,X,ae){return R.H.useActionState(L,X,ae)},lt.useCallback=function(L,X){return R.H.useCallback(L,X)},lt.useContext=function(L){return R.H.useContext(L)},lt.useDebugValue=function(){},lt.useDeferredValue=function(L,X){return R.H.useDeferredValue(L,X)},lt.useEffect=function(L,X,ae){var ee=R.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(L,X)},lt.useId=function(){return R.H.useId()},lt.useImperativeHandle=function(L,X,ae){return R.H.useImperativeHandle(L,X,ae)},lt.useInsertionEffect=function(L,X){return R.H.useInsertionEffect(L,X)},lt.useLayoutEffect=function(L,X){return R.H.useLayoutEffect(L,X)},lt.useMemo=function(L,X){return R.H.useMemo(L,X)},lt.useOptimistic=function(L,X){return R.H.useOptimistic(L,X)},lt.useReducer=function(L,X,ae){return R.H.useReducer(L,X,ae)},lt.useRef=function(L){return R.H.useRef(L)},lt.useState=function(L){return R.H.useState(L)},lt.useSyncExternalStore=function(L,X,ae){return R.H.useSyncExternalStore(L,X,ae)},lt.useTransition=function(){return R.H.useTransition()},lt.version="19.1.0",lt}var Uj;function $d(){return Uj||(Uj=1,F0.exports=tP()),F0.exports}var y=$d();const fe=Vm(y),C2=Z3({__proto__:null,default:fe},[y]);var H0={exports:{}},Mu={},G0={exports:{}},X0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj;function sP(){return qj||(qj=1,function(t){function e(k,B){var z=k.length;k.push(B);e:for(;0<z;){var W=z-1>>>1,L=k[W];if(0<n(L,B))k[W]=B,k[z]=L,z=W;else break e}}function s(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var B=k[0],z=k.pop();if(z!==B){k[0]=z;e:for(var W=0,L=k.length,X=L>>>1;W<X;){var ae=2*(W+1)-1,ee=k[ae],le=ae+1,ie=k[le];if(0>n(ee,z))le<L&&0>n(ie,ee)?(k[W]=ie,k[le]=z,W=le):(k[W]=ee,k[ae]=z,W=ae);else if(le<L&&0>n(ie,z))k[W]=ie,k[le]=z,W=le;else break e}}return B}function n(k,B){var z=k.sortIndex-B.sortIndex;return z!==0?z:k.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,x=3,b=!1,_=!1,j=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function P(k){for(var B=s(h);B!==null;){if(B.callback===null)r(h);else if(B.startTime<=k)r(h),B.sortIndex=B.expirationTime,e(f,B);else break;B=s(h)}}function R(k){if(j=!1,P(k),!_)if(s(f)!==null)_=!0,D||(D=!0,V());else{var B=s(h);B!==null&&G(R,B.startTime-k)}}var D=!1,$=-1,A=5,M=-1;function U(){return N?!0:!(t.unstable_now()-M<A)}function Y(){if(N=!1,D){var k=t.unstable_now();M=k;var B=!0;try{e:{_=!1,j&&(j=!1,E($),$=-1),b=!0;var z=x;try{t:{for(P(k),g=s(f);g!==null&&!(g.expirationTime>k&&U());){var W=g.callback;if(typeof W=="function"){g.callback=null,x=g.priorityLevel;var L=W(g.expirationTime<=k);if(k=t.unstable_now(),typeof L=="function"){g.callback=L,P(k),B=!0;break t}g===s(f)&&r(f),P(k)}else r(f);g=s(f)}if(g!==null)B=!0;else{var X=s(h);X!==null&&G(R,X.startTime-k),B=!1}}break e}finally{g=null,x=z,b=!1}B=void 0}}finally{B?V():D=!1}}}var V;if(typeof S=="function")V=function(){S(Y)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Q=F.port2;F.port1.onmessage=Y,V=function(){Q.postMessage(null)}}else V=function(){C(Y,0)};function G(k,B){$=C(function(){k(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(k){switch(x){case 1:case 2:case 3:var B=3;break;default:B=x}var z=x;x=B;try{return k()}finally{x=z}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(k,B){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var z=x;x=k;try{return B()}finally{x=z}},t.unstable_scheduleCallback=function(k,B,z){var W=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,k){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=z+L,k={id:p++,callback:B,priorityLevel:k,startTime:z,expirationTime:L,sortIndex:-1},z>W?(k.sortIndex=z,e(h,k),s(f)===null&&k===s(h)&&(j?(E($),$=-1):j=!0,G(R,z-W))):(k.sortIndex=L,e(f,k),_||b||(_=!0,D||(D=!0,V()))),k},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(k){var B=x;return function(){var z=x;x=B;try{return k.apply(this,arguments)}finally{x=z}}}}(X0)),X0}var Fj;function rP(){return Fj||(Fj=1,G0.exports=sP()),G0.exports}var Y0={exports:{}},Xs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hj;function aP(){if(Hj)return Xs;Hj=1;var t=$d();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xs.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(f,h,null,p)},Xs.flushSync=function(f){var h=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=h,r.p=p,r.d.f()}},Xs.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Xs.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Xs.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xs.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Xs.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xs.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Xs.requestFormReset=function(f){r.d.r(f)},Xs.unstable_batchedUpdates=function(f,h){return f(h)},Xs.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},Xs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Xs.version="19.1.0",Xs}var Gj;function E2(){if(Gj)return Y0.exports;Gj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Y0.exports=aP(),Y0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj;function nP(){if(Xj)return Mu;Xj=1;var t=rP(),e=$d(),s=E2();function r(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function c(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(r(188))}function f(o){var l=o.alternate;if(!l){if(l=i(o),l===null)throw Error(r(188));return l!==o?null:o}for(var d=o,m=l;;){var v=d.return;if(v===null)break;var w=v.alternate;if(w===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===d)return u(v),o;if(w===m)return u(v),l;w=w.sibling}throw Error(r(188))}if(d.return!==m.return)d=v,m=w;else{for(var T=!1,O=v.child;O;){if(O===d){T=!0,d=v,m=w;break}if(O===m){T=!0,m=v,d=w;break}O=O.sibling}if(!T){for(O=w.child;O;){if(O===d){T=!0,d=w,m=v;break}if(O===m){T=!0,m=w,d=v;break}O=O.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),S=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function V(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var F=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===F?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case S:return(o.displayName||"Context")+".Provider";case E:return(o._context.displayName||"Context")+".Consumer";case P:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case $:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case A:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var G=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},W=[],L=-1;function X(o){return{current:o}}function ae(o){0>L||(o.current=W[L],W[L]=null,L--)}function ee(o,l){L++,W[L]=o.current,o.current=l}var le=X(null),ie=X(null),se=X(null),ue=X(null);function ce(o,l){switch(ee(se,l),ee(ie,o),ee(le,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?hj(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=hj(l),o=mj(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ae(le),ee(le,o)}function be(){ae(le),ae(ie),ae(se)}function Ne(o){o.memoizedState!==null&&ee(ue,o);var l=le.current,d=mj(l,o.type);l!==d&&(ee(ie,o),ee(le,d))}function we(o){ie.current===o&&(ae(le),ae(ie)),ue.current===o&&(ae(ue),Cu._currentValue=z)}var Ce=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,Qe=t.unstable_cancelCallback,ve=t.unstable_shouldYield,Re=t.unstable_requestPaint,ke=t.unstable_now,st=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,I=t.unstable_UserBlockingPriority,q=t.unstable_NormalPriority,K=t.unstable_LowPriority,ge=t.unstable_IdlePriority,_e=t.log,ye=t.unstable_setDisableYieldValue,Me=null,Ye=null;function it(o){if(typeof _e=="function"&&ye(o),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Me,o)}catch{}}var jt=Math.clz32?Math.clz32:zr,Fs=Math.log,Hs=Math.LN2;function zr(o){return o>>>=0,o===0?32:31-(Fs(o)/Hs|0)|0}var Nr=256,Sr=4194304;function rr(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ar(o,l,d){var m=o.pendingLanes;if(m===0)return 0;var v=0,w=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var O=m&134217727;return O!==0?(m=O&~w,m!==0?v=rr(m):(T&=O,T!==0?v=rr(T):d||(d=O&~o,d!==0&&(v=rr(d))))):(O=m&~w,O!==0?v=rr(O):T!==0?v=rr(T):d||(d=m&~o,d!==0&&(v=rr(d)))),v===0?0:l!==0&&l!==v&&(l&w)===0&&(w=v&-v,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:v}function la(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function fr(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rs(){var o=Nr;return Nr<<=1,(Nr&4194048)===0&&(Nr=256),o}function Ui(){var o=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),o}function Os(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function hr(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ca(o,l,d,m,v,w){var T=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var O=o.entanglements,H=o.expirationTimes,re=o.hiddenUpdates;for(d=T&~d;0<d;){var he=31-jt(d),xe=1<<he;O[he]=0,H[he]=-1;var ne=re[he];if(ne!==null)for(re[he]=null,he=0;he<ne.length;he++){var oe=ne[he];oe!==null&&(oe.lane&=-536870913)}d&=~xe}m!==0&&Je(o,m,0),w!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=w&~(T&~l))}function Je(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-jt(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|d&4194090}function zt(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var m=31-jt(d),v=1<<m;v&l|o[m]&l&&(o[m]|=l),d&=~v}}function ms(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function $s(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Fo(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:Pj(o.type))}function ys(o,l){var d=B.p;try{return B.p=o,l()}finally{B.p=d}}var as=Math.random().toString(36).slice(2),ns="__reactFiber$"+as,Ut="__reactProps$"+as,Ns="__reactContainer$"+as,qi="__reactEvents$"+as,sn="__reactListeners$"+as,ew="__reactHandles$"+as,tw="__reactResources$"+as,Lc="__reactMarker$"+as;function $p(o){delete o[ns],delete o[Ut],delete o[qi],delete o[sn],delete o[ew]}function Fi(o){var l=o[ns];if(l)return l;for(var d=o.parentNode;d;){if(l=d[Ns]||d[ns]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=vj(o);o!==null;){if(d=o[ns])return d;o=vj(o)}return l}o=d,d=o.parentNode}return null}function Hi(o){if(o=o[ns]||o[Ns]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Ic(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(r(33))}function Gi(o){var l=o[tw];return l||(l=o[tw]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ss(o){o[Lc]=!0}var sw=new Set,rw={};function Ho(o,l){Xi(o,l),Xi(o+"Capture",l)}function Xi(o,l){for(rw[o]=l,o=0;o<l.length;o++)sw.add(l[o])}var zM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),aw={},nw={};function UM(o){return Ce.call(nw,o)?!0:Ce.call(aw,o)?!1:zM.test(o)?nw[o]=!0:(aw[o]=!0,!1)}function Kd(o,l,d){if(UM(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Wd(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function rn(o,l,d,m){if(m===null)o.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+m)}}var Lp,ow;function Yi(o){if(Lp===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Lp=l&&l[1]||"",ow=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lp+o+ow}var Ip=!1;function Bp(o,l){if(!o||Ip)return"";Ip=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(oe){var ne=oe}Reflect.construct(o,[],xe)}else{try{xe.call()}catch(oe){ne=oe}o.call(xe.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(xe=o())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),T=w[0],O=w[1];if(T&&O){var H=T.split(`
`),re=O.split(`
`);for(v=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;v<re.length&&!re[v].includes("DetermineComponentFrameRoot");)v++;if(m===H.length||v===re.length)for(m=H.length-1,v=re.length-1;1<=m&&0<=v&&H[m]!==re[v];)v--;for(;1<=m&&0<=v;m--,v--)if(H[m]!==re[v]){if(m!==1||v!==1)do if(m--,v--,0>v||H[m]!==re[v]){var he=`
`+H[m].replace(" at new "," at ");return o.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",o.displayName)),he}while(1<=m&&0<=v);break}}}finally{Ip=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?Yi(d):""}function qM(o){switch(o.tag){case 26:case 27:case 5:return Yi(o.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 15:return Bp(o.type,!1);case 11:return Bp(o.type.render,!1);case 1:return Bp(o.type,!0);case 31:return Yi("Activity");default:return""}}function iw(o){try{var l="";do l+=qM(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Ur(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function lw(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function FM(o){var l=lw(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(T){m=""+T,w.call(this,T)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Zd(o){o._valueTracker||(o._valueTracker=FM(o))}function cw(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return o&&(m=lw(o)?o.checked?"true":"false":o.value),o=m,o!==d?(l.setValue(o),!0):!1}function Qd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var HM=/[\n"\\]/g;function qr(o){return o.replace(HM,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Vp(o,l,d,m,v,w,T,O){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),l!=null?T==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Ur(l)):o.value!==""+Ur(l)&&(o.value=""+Ur(l)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),l!=null?zp(o,T,Ur(l)):d!=null?zp(o,T,Ur(d)):m!=null&&o.removeAttribute("value"),v==null&&w!=null&&(o.defaultChecked=!!w),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+Ur(O):o.removeAttribute("name")}function uw(o,l,d,m,v,w,T,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;d=d!=null?""+Ur(d):"",l=l!=null?""+Ur(l):d,O||l===o.value||(o.value=l),o.defaultValue=l}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=O?o.checked:!!m,o.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T)}function zp(o,l,d){l==="number"&&Qd(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function Ki(o,l,d,m){if(o=o.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<o.length;d++)v=l.hasOwnProperty("$"+o[d].value),o[d].selected!==v&&(o[d].selected=v),v&&m&&(o[d].defaultSelected=!0)}else{for(d=""+Ur(d),l=null,v=0;v<o.length;v++){if(o[v].value===d){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function dw(o,l,d){if(l!=null&&(l=""+Ur(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+Ur(d):""}function fw(o,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(r(92));if(G(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Ur(l),o.defaultValue=d,m=o.textContent,m===d&&m!==""&&m!==null&&(o.value=m)}function Wi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var GM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hw(o,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,d):typeof d!="number"||d===0||GM.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function mw(o,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(o=o.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var v in l)m=l[v],l.hasOwnProperty(v)&&d[v]!==m&&hw(o,v,m)}else for(var w in l)l.hasOwnProperty(w)&&hw(o,w,l[w])}function Up(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),YM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jd(o){return YM.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var qp=null;function Fp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Zi=null,Qi=null;function pw(o){var l=Hi(o);if(l&&(o=l.stateNode)){var d=o[Ut]||null;e:switch(o=l.stateNode,l.type){case"input":if(Vp(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+qr(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==o&&m.form===o.form){var v=m[Ut]||null;if(!v)throw Error(r(90));Vp(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===o.form&&cw(m)}break e;case"textarea":dw(o,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Ki(o,!!d.multiple,l,!1)}}}var Hp=!1;function gw(o,l,d){if(Hp)return o(l,d);Hp=!0;try{var m=o(l);return m}finally{if(Hp=!1,(Zi!==null||Qi!==null)&&(Bf(),Zi&&(l=Zi,o=Qi,Qi=Zi=null,pw(l),o)))for(l=0;l<o.length;l++)pw(o[l])}}function Bc(o,l){var d=o.stateNode;if(d===null)return null;var m=d[Ut]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gp=!1;if(an)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){Gp=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{Gp=!1}var On=null,Xp=null,ef=null;function xw(){if(ef)return ef;var o,l=Xp,d=l.length,m,v="value"in On?On.value:On.textContent,w=v.length;for(o=0;o<d&&l[o]===v[o];o++);var T=d-o;for(m=1;m<=T&&l[d-m]===v[w-m];m++);return ef=v.slice(o,1<m?1-m:void 0)}function tf(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function sf(){return!0}function vw(){return!1}function mr(o){function l(d,m,v,w,T){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(d=o[O],this[O]=d?d(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?sf:vw,this.isPropagationStopped=vw,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=sf)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=sf)},persist:function(){},isPersistent:sf}),l}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=mr(Go),zc=p({},Go,{view:0,detail:0}),KM=mr(zc),Yp,Kp,Uc,af=p({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Uc&&(Uc&&o.type==="mousemove"?(Yp=o.screenX-Uc.screenX,Kp=o.screenY-Uc.screenY):Kp=Yp=0,Uc=o),Yp)},movementY:function(o){return"movementY"in o?o.movementY:Kp}}),yw=mr(af),WM=p({},af,{dataTransfer:0}),ZM=mr(WM),QM=p({},zc,{relatedTarget:0}),Wp=mr(QM),JM=p({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),e5=mr(JM),t5=p({},Go,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),s5=mr(t5),r5=p({},Go,{data:0}),bw=mr(r5),a5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i5(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=o5[o])?!!l[o]:!1}function Zp(){return i5}var l5=p({},zc,{key:function(o){if(o.key){var l=a5[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=tf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?n5[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(o){return o.type==="keypress"?tf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?tf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),c5=mr(l5),u5=p({},af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ww=mr(u5),d5=p({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),f5=mr(d5),h5=p({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),m5=mr(h5),p5=p({},af,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),g5=mr(p5),x5=p({},Go,{newState:0,oldState:0}),v5=mr(x5),y5=[9,13,27,32],Qp=an&&"CompositionEvent"in window,qc=null;an&&"documentMode"in document&&(qc=document.documentMode);var b5=an&&"TextEvent"in window&&!qc,_w=an&&(!Qp||qc&&8<qc&&11>=qc),jw=" ",Nw=!1;function Sw(o,l){switch(o){case"keyup":return y5.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ji=!1;function w5(o,l){switch(o){case"compositionend":return Cw(l);case"keypress":return l.which!==32?null:(Nw=!0,jw);case"textInput":return o=l.data,o===jw&&Nw?null:o;default:return null}}function _5(o,l){if(Ji)return o==="compositionend"||!Qp&&Sw(o,l)?(o=xw(),ef=Xp=On=null,Ji=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return _w&&l.locale!=="ko"?null:l.data;default:return null}}var j5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ew(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!j5[o.type]:l==="textarea"}function Aw(o,l,d,m){Zi?Qi?Qi.push(m):Qi=[m]:Zi=m,l=Hf(l,"onChange"),0<l.length&&(d=new rf("onChange","change",null,d,m),o.push({event:d,listeners:l}))}var Fc=null,Hc=null;function N5(o){lj(o,0)}function nf(o){var l=Ic(o);if(cw(l))return o}function kw(o,l){if(o==="change")return l}var Tw=!1;if(an){var Jp;if(an){var eg="oninput"in document;if(!eg){var Rw=document.createElement("div");Rw.setAttribute("oninput","return;"),eg=typeof Rw.oninput=="function"}Jp=eg}else Jp=!1;Tw=Jp&&(!document.documentMode||9<document.documentMode)}function Mw(){Fc&&(Fc.detachEvent("onpropertychange",Pw),Hc=Fc=null)}function Pw(o){if(o.propertyName==="value"&&nf(Hc)){var l=[];Aw(l,Hc,o,Fp(o)),gw(N5,l)}}function S5(o,l,d){o==="focusin"?(Mw(),Fc=l,Hc=d,Fc.attachEvent("onpropertychange",Pw)):o==="focusout"&&Mw()}function C5(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return nf(Hc)}function E5(o,l){if(o==="click")return nf(l)}function A5(o,l){if(o==="input"||o==="change")return nf(l)}function k5(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Cr=typeof Object.is=="function"?Object.is:k5;function Gc(o,l){if(Cr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!Ce.call(l,v)||!Cr(o[v],l[v]))return!1}return!0}function Dw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ow(o,l){var d=Dw(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=l&&m>=l)return{node:d,offset:l-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Dw(d)}}function $w(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?$w(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Lw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Qd(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Qd(o.document)}return l}function tg(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var T5=an&&"documentMode"in document&&11>=document.documentMode,el=null,sg=null,Xc=null,rg=!1;function Iw(o,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rg||el==null||el!==Qd(m)||(m=el,"selectionStart"in m&&tg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Xc&&Gc(Xc,m)||(Xc=m,m=Hf(sg,"onSelect"),0<m.length&&(l=new rf("onSelect","select",null,l,d),o.push({event:l,listeners:m}),l.target=el)))}function Xo(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var tl={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionrun:Xo("Transition","TransitionRun"),transitionstart:Xo("Transition","TransitionStart"),transitioncancel:Xo("Transition","TransitionCancel"),transitionend:Xo("Transition","TransitionEnd")},ag={},Bw={};an&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Yo(o){if(ag[o])return ag[o];if(!tl[o])return o;var l=tl[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in Bw)return ag[o]=l[d];return o}var Vw=Yo("animationend"),zw=Yo("animationiteration"),Uw=Yo("animationstart"),R5=Yo("transitionrun"),M5=Yo("transitionstart"),P5=Yo("transitioncancel"),qw=Yo("transitionend"),Fw=new Map,ng="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ng.push("scrollEnd");function ua(o,l){Fw.set(o,l),Ho(l,[o])}var Hw=new WeakMap;function Fr(o,l){if(typeof o=="object"&&o!==null){var d=Hw.get(o);return d!==void 0?d:(l={value:o,source:l,stack:iw(l)},Hw.set(o,l),l)}return{value:o,source:l,stack:iw(l)}}var Hr=[],sl=0,og=0;function of(){for(var o=sl,l=og=sl=0;l<o;){var d=Hr[l];Hr[l++]=null;var m=Hr[l];Hr[l++]=null;var v=Hr[l];Hr[l++]=null;var w=Hr[l];if(Hr[l++]=null,m!==null&&v!==null){var T=m.pending;T===null?v.next=v:(v.next=T.next,T.next=v),m.pending=v}w!==0&&Gw(d,v,w)}}function lf(o,l,d,m){Hr[sl++]=o,Hr[sl++]=l,Hr[sl++]=d,Hr[sl++]=m,og|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function ig(o,l,d,m){return lf(o,l,d,m),cf(o)}function rl(o,l){return lf(o,null,null,l),cf(o)}function Gw(o,l,d){o.lanes|=d;var m=o.alternate;m!==null&&(m.lanes|=d);for(var v=!1,w=o.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(v=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,v&&l!==null&&(v=31-jt(d),o=w.hiddenUpdates,m=o[v],m===null?o[v]=[l]:m.push(l),l.lane=d|536870912),w):null}function cf(o){if(50<vu)throw vu=0,h0=null,Error(r(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var al={};function D5(o,l,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(o,l,d,m){return new D5(o,l,d,m)}function lg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function nn(o,l){var d=o.alternate;return d===null?(d=Er(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function Xw(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function uf(o,l,d,m,v,w){var T=0;if(m=o,typeof o=="function")lg(o)&&(T=1);else if(typeof o=="string")T=$3(o,d,le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=Er(31,d,l,v),o.elementType=M,o.lanes=w,o;case _:return Ko(d.children,v,w,l);case j:T=8,v|=24;break;case N:return o=Er(12,d,l,v|2),o.elementType=N,o.lanes=w,o;case R:return o=Er(13,d,l,v),o.elementType=R,o.lanes=w,o;case D:return o=Er(19,d,l,v),o.elementType=D,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:case S:T=10;break e;case E:T=9;break e;case P:T=11;break e;case $:T=14;break e;case A:T=16,m=null;break e}T=29,d=Error(r(130,o===null?"null":typeof o,"")),m=null}return l=Er(T,d,l,v),l.elementType=o,l.type=m,l.lanes=w,l}function Ko(o,l,d,m){return o=Er(7,o,m,l),o.lanes=d,o}function cg(o,l,d){return o=Er(6,o,null,l),o.lanes=d,o}function ug(o,l,d){return l=Er(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var nl=[],ol=0,df=null,ff=0,Gr=[],Xr=0,Wo=null,on=1,ln="";function Zo(o,l){nl[ol++]=ff,nl[ol++]=df,df=o,ff=l}function Yw(o,l,d){Gr[Xr++]=on,Gr[Xr++]=ln,Gr[Xr++]=Wo,Wo=o;var m=on;o=ln;var v=32-jt(m)-1;m&=~(1<<v),d+=1;var w=32-jt(l)+v;if(30<w){var T=v-v%5;w=(m&(1<<T)-1).toString(32),m>>=T,v-=T,on=1<<32-jt(l)+v|d<<v|m,ln=w+o}else on=1<<w|d<<v|m,ln=o}function dg(o){o.return!==null&&(Zo(o,1),Yw(o,1,0))}function fg(o){for(;o===df;)df=nl[--ol],nl[ol]=null,ff=nl[--ol],nl[ol]=null;for(;o===Wo;)Wo=Gr[--Xr],Gr[Xr]=null,ln=Gr[--Xr],Gr[Xr]=null,on=Gr[--Xr],Gr[Xr]=null}var nr=null,es=null,kt=!1,Qo=null,Ra=!1,hg=Error(r(519));function Jo(o){var l=Error(r(418,""));throw Wc(Fr(l,o)),hg}function Kw(o){var l=o.stateNode,d=o.type,m=o.memoizedProps;switch(l[ns]=o,l[Ut]=m,d){case"dialog":xt("cancel",l),xt("close",l);break;case"iframe":case"object":case"embed":xt("load",l);break;case"video":case"audio":for(d=0;d<bu.length;d++)xt(bu[d],l);break;case"source":xt("error",l);break;case"img":case"image":case"link":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"input":xt("invalid",l),uw(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Zd(l);break;case"select":xt("invalid",l);break;case"textarea":xt("invalid",l),fw(l,m.value,m.defaultValue,m.children),Zd(l)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||fj(l.textContent,d)?(m.popover!=null&&(xt("beforetoggle",l),xt("toggle",l)),m.onScroll!=null&&xt("scroll",l),m.onScrollEnd!=null&&xt("scrollend",l),m.onClick!=null&&(l.onclick=Gf),l=!0):l=!1,l||Jo(o)}function Ww(o){for(nr=o.return;nr;)switch(nr.tag){case 5:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:nr=nr.return}}function Yc(o){if(o!==nr)return!1;if(!kt)return Ww(o),kt=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||k0(o.type,o.memoizedProps)),d=!d),d&&es&&Jo(o),Ww(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){es=fa(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}es=null}}else l===27?(l=es,Zn(o.type)?(o=P0,P0=null,es=o):es=l):es=nr?fa(o.stateNode.nextSibling):null;return!0}function Kc(){es=nr=null,kt=!1}function Zw(){var o=Qo;return o!==null&&(xr===null?xr=o:xr.push.apply(xr,o),Qo=null),o}function Wc(o){Qo===null?Qo=[o]:Qo.push(o)}var mg=X(null),ei=null,cn=null;function $n(o,l,d){ee(mg,l._currentValue),l._currentValue=d}function un(o){o._currentValue=mg.current,ae(mg)}function pg(o,l,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===d)break;o=o.return}}function gg(o,l,d,m){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var w=v.dependencies;if(w!==null){var T=v.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=v;for(var H=0;H<l.length;H++)if(O.context===l[H]){w.lanes|=d,O=w.alternate,O!==null&&(O.lanes|=d),pg(w.return,d,o),m||(T=null);break e}w=O.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(r(341));T.lanes|=d,w=T.alternate,w!==null&&(w.lanes|=d),pg(T,d,o),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Zc(o,l,d,m){o=null;for(var v=l,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var O=v.type;Cr(v.pendingProps.value,T.value)||(o!==null?o.push(O):o=[O])}}else if(v===ue.current){if(T=v.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Cu):o=[Cu])}v=v.return}o!==null&&gg(l,o,d,m),l.flags|=262144}function hf(o){for(o=o.firstContext;o!==null;){if(!Cr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ti(o){ei=o,cn=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Gs(o){return Qw(ei,o)}function mf(o,l){return ei===null&&ti(o),Qw(o,l)}function Qw(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},cn===null){if(o===null)throw Error(r(308));cn=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else cn=cn.next=l;return d}var O5=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},$5=t.unstable_scheduleCallback,L5=t.unstable_NormalPriority,bs={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xg(){return{controller:new O5,data:new Map,refCount:0}}function Qc(o){o.refCount--,o.refCount===0&&$5(L5,function(){o.controller.abort()})}var Jc=null,vg=0,il=0,ll=null;function I5(o,l){if(Jc===null){var d=Jc=[];vg=0,il=b0(),ll={status:"pending",value:void 0,then:function(m){d.push(m)}}}return vg++,l.then(Jw,Jw),l}function Jw(){if(--vg===0&&Jc!==null){ll!==null&&(ll.status="fulfilled");var o=Jc;Jc=null,il=0,ll=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function B5(o,l){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var e_=k.S;k.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&I5(o,l),e_!==null&&e_(o,l)};var si=X(null);function yg(){var o=si.current;return o!==null?o:qt.pooledCache}function pf(o,l){l===null?ee(si,si.current):ee(si,l.pool)}function t_(){var o=yg();return o===null?null:{parent:bs._currentValue,pool:o}}var eu=Error(r(460)),s_=Error(r(474)),gf=Error(r(542)),bg={then:function(){}};function r_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function xf(){}function a_(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(xf,xf),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o_(o),o;default:if(typeof l.status=="string")l.then(xf,xf);else{if(o=qt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=m}},function(m){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,o_(o),o}throw tu=l,eu}}var tu=null;function n_(){if(tu===null)throw Error(r(459));var o=tu;return tu=null,o}function o_(o){if(o===eu||o===gf)throw Error(r(483))}var Ln=!1;function wg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _g(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function In(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bn(o,l,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Mt&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,l=cf(o),Gw(o,null,d),l}return lf(o,m,l,d),cf(o)}function su(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,zt(o,d)}}function jg(o,l){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?v=w=T:w=w.next=T,d=d.next}while(d!==null);w===null?v=w=l:w=w.next=l}else v=w=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var Ng=!1;function ru(){if(Ng){var o=ll;if(o!==null)throw o}}function au(o,l,d,m){Ng=!1;var v=o.updateQueue;Ln=!1;var w=v.firstBaseUpdate,T=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var H=O,re=H.next;H.next=null,T===null?w=re:T.next=re,T=H;var he=o.alternate;he!==null&&(he=he.updateQueue,O=he.lastBaseUpdate,O!==T&&(O===null?he.firstBaseUpdate=re:O.next=re,he.lastBaseUpdate=H))}if(w!==null){var xe=v.baseState;T=0,he=re=H=null,O=w;do{var ne=O.lane&-536870913,oe=ne!==O.lane;if(oe?(wt&ne)===ne:(m&ne)===ne){ne!==0&&ne===il&&(Ng=!0),he!==null&&(he=he.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var et=o,Ke=O;ne=l;var It=d;switch(Ke.tag){case 1:if(et=Ke.payload,typeof et=="function"){xe=et.call(It,xe,ne);break e}xe=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=Ke.payload,ne=typeof et=="function"?et.call(It,xe,ne):et,ne==null)break e;xe=p({},xe,ne);break e;case 2:Ln=!0}}ne=O.callback,ne!==null&&(o.flags|=64,oe&&(o.flags|=8192),oe=v.callbacks,oe===null?v.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},he===null?(re=he=oe,H=xe):he=he.next=oe,T|=ne;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);he===null&&(H=xe),v.baseState=H,v.firstBaseUpdate=re,v.lastBaseUpdate=he,w===null&&(v.shared.lanes=0),Xn|=T,o.lanes=T,o.memoizedState=xe}}function i_(o,l){if(typeof o!="function")throw Error(r(191,o));o.call(l)}function l_(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)i_(d[o],l)}var cl=X(null),vf=X(0);function c_(o,l){o=xn,ee(vf,o),ee(cl,l),xn=o|l.baseLanes}function Sg(){ee(vf,xn),ee(cl,cl.current)}function Cg(){xn=vf.current,ae(cl),ae(vf)}var Vn=0,ut=null,$t=null,ps=null,yf=!1,ul=!1,ri=!1,bf=0,nu=0,dl=null,V5=0;function os(){throw Error(r(321))}function Eg(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Cr(o[d],l[d]))return!1;return!0}function Ag(o,l,d,m,v,w){return Vn=w,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,k.H=o===null||o.memoizedState===null?G_:X_,ri=!1,w=d(m,v),ri=!1,ul&&(w=d_(l,d,m,v)),u_(o),w}function u_(o){k.H=Cf;var l=$t!==null&&$t.next!==null;if(Vn=0,ps=$t=ut=null,yf=!1,nu=0,dl=null,l)throw Error(r(300));o===null||Cs||(o=o.dependencies,o!==null&&hf(o)&&(Cs=!0))}function d_(o,l,d,m){ut=o;var v=0;do{if(ul&&(dl=null),nu=0,ul=!1,25<=v)throw Error(r(301));if(v+=1,ps=$t=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}k.H=X5,w=l(d,m)}while(ul);return w}function z5(){var o=k.H,l=o.useState()[0];return l=typeof l.then=="function"?ou(l):l,o=o.useState()[0],($t!==null?$t.memoizedState:null)!==o&&(ut.flags|=1024),l}function kg(){var o=bf!==0;return bf=0,o}function Tg(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function Rg(o){if(yf){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}yf=!1}Vn=0,ps=$t=ut=null,ul=!1,nu=bf=0,dl=null}function pr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?ut.memoizedState=ps=o:ps=ps.next=o,ps}function gs(){if($t===null){var o=ut.alternate;o=o!==null?o.memoizedState:null}else o=$t.next;var l=ps===null?ut.memoizedState:ps.next;if(l!==null)ps=l,$t=o;else{if(o===null)throw ut.alternate===null?Error(r(467)):Error(r(310));$t=o,o={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},ps===null?ut.memoizedState=ps=o:ps=ps.next=o}return ps}function Mg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(o){var l=nu;return nu+=1,dl===null&&(dl=[]),o=a_(dl,o,l),l=ut,(ps===null?l.memoizedState:ps.next)===null&&(l=l.alternate,k.H=l===null||l.memoizedState===null?G_:X_),o}function wf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ou(o);if(o.$$typeof===S)return Gs(o)}throw Error(r(438,String(o)))}function Pg(o){var l=null,d=ut.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=ut.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Mg(),ut.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),m=0;m<o;m++)d[m]=U;return l.index++,d}function dn(o,l){return typeof l=="function"?l(o):l}function _f(o){var l=gs();return Dg(l,$t,o)}function Dg(o,l,d){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var v=o.baseQueue,w=m.pending;if(w!==null){if(v!==null){var T=v.next;v.next=w.next,w.next=T}l.baseQueue=v=w,m.pending=null}if(w=o.baseState,v===null)o.memoizedState=w;else{l=v.next;var O=T=null,H=null,re=l,he=!1;do{var xe=re.lane&-536870913;if(xe!==re.lane?(wt&xe)===xe:(Vn&xe)===xe){var ne=re.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),xe===il&&(he=!0);else if((Vn&ne)===ne){re=re.next,ne===il&&(he=!0);continue}else xe={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},H===null?(O=H=xe,T=w):H=H.next=xe,ut.lanes|=ne,Xn|=ne;xe=re.action,ri&&d(w,xe),w=re.hasEagerState?re.eagerState:d(w,xe)}else ne={lane:xe,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},H===null?(O=H=ne,T=w):H=H.next=ne,ut.lanes|=xe,Xn|=xe;re=re.next}while(re!==null&&re!==l);if(H===null?T=w:H.next=O,!Cr(w,o.memoizedState)&&(Cs=!0,he&&(d=ll,d!==null)))throw d;o.memoizedState=w,o.baseState=T,o.baseQueue=H,m.lastRenderedState=w}return v===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function Og(o){var l=gs(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=o;var m=d.dispatch,v=d.pending,w=l.memoizedState;if(v!==null){d.pending=null;var T=v=v.next;do w=o(w,T.action),T=T.next;while(T!==v);Cr(w,l.memoizedState)||(Cs=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function f_(o,l,d){var m=ut,v=gs(),w=kt;if(w){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!Cr(($t||v).memoizedState,d);T&&(v.memoizedState=d,Cs=!0),v=v.queue;var O=p_.bind(null,m,v,o);if(iu(2048,8,O,[o]),v.getSnapshot!==l||T||ps!==null&&ps.memoizedState.tag&1){if(m.flags|=2048,fl(9,jf(),m_.bind(null,m,v,d,l),null),qt===null)throw Error(r(349));w||(Vn&124)!==0||h_(m,l,d)}return d}function h_(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=ut.updateQueue,l===null?(l=Mg(),ut.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function m_(o,l,d,m){l.value=d,l.getSnapshot=m,g_(l)&&x_(o)}function p_(o,l,d){return d(function(){g_(l)&&x_(o)})}function g_(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Cr(o,d)}catch{return!0}}function x_(o){var l=rl(o,2);l!==null&&Mr(l,o,2)}function $g(o){var l=pr();if(typeof o=="function"){var d=o;if(o=d(),ri){it(!0);try{d()}finally{it(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:o},l}function v_(o,l,d,m){return o.baseState=d,Dg(o,$t,typeof m=="function"?m:dn)}function U5(o,l,d,m,v){if(Sf(o))throw Error(r(485));if(o=l.action,o!==null){var w={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};k.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,y_(l,w)):(w.next=d.next,l.pending=d.next=w)}}function y_(o,l){var d=l.action,m=l.payload,v=o.state;if(l.isTransition){var w=k.T,T={};k.T=T;try{var O=d(v,m),H=k.S;H!==null&&H(T,O),b_(o,l,O)}catch(re){Lg(o,l,re)}finally{k.T=w}}else try{w=d(v,m),b_(o,l,w)}catch(re){Lg(o,l,re)}}function b_(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){w_(o,l,m)},function(m){return Lg(o,l,m)}):w_(o,l,d)}function w_(o,l,d){l.status="fulfilled",l.value=d,__(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,y_(o,d)))}function Lg(o,l,d){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,__(l),l=l.next;while(l!==m)}o.action=null}function __(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function j_(o,l){return l}function N_(o,l){if(kt){var d=qt.formState;if(d!==null){e:{var m=ut;if(kt){if(es){t:{for(var v=es,w=Ra;v.nodeType!==8;){if(!w){v=null;break t}if(v=fa(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){es=fa(v.nextSibling),m=v.data==="F!";break e}}Jo(m)}m=!1}m&&(l=d[0])}}return d=pr(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j_,lastRenderedState:l},d.queue=m,d=q_.bind(null,ut,m),m.dispatch=d,m=$g(!1),w=Ug.bind(null,ut,!1,m.queue),m=pr(),v={state:l,dispatch:null,action:o,pending:null},m.queue=v,d=U5.bind(null,ut,v,w,d),v.dispatch=d,m.memoizedState=o,[l,d,!1]}function S_(o){var l=gs();return C_(l,$t,o)}function C_(o,l,d){if(l=Dg(o,l,j_)[0],o=_f(dn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=ou(l)}catch(T){throw T===eu?gf:T}else m=l;l=gs();var v=l.queue,w=v.dispatch;return d!==l.memoizedState&&(ut.flags|=2048,fl(9,jf(),q5.bind(null,v,d),null)),[m,w,o]}function q5(o,l){o.action=l}function E_(o){var l=gs(),d=$t;if(d!==null)return C_(l,d,o);gs(),l=l.memoizedState,d=gs();var m=d.queue.dispatch;return d.memoizedState=o,[l,m,!1]}function fl(o,l,d,m){return o={tag:o,create:d,deps:m,inst:l,next:null},l=ut.updateQueue,l===null&&(l=Mg(),ut.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,l.lastEffect=o),o}function jf(){return{destroy:void 0,resource:void 0}}function A_(){return gs().memoizedState}function Nf(o,l,d,m){var v=pr();m=m===void 0?null:m,ut.flags|=o,v.memoizedState=fl(1|l,jf(),d,m)}function iu(o,l,d,m){var v=gs();m=m===void 0?null:m;var w=v.memoizedState.inst;$t!==null&&m!==null&&Eg(m,$t.memoizedState.deps)?v.memoizedState=fl(l,w,d,m):(ut.flags|=o,v.memoizedState=fl(1|l,w,d,m))}function k_(o,l){Nf(8390656,8,o,l)}function T_(o,l){iu(2048,8,o,l)}function R_(o,l){return iu(4,2,o,l)}function M_(o,l){return iu(4,4,o,l)}function P_(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function D_(o,l,d){d=d!=null?d.concat([o]):null,iu(4,4,P_.bind(null,l,o),d)}function Ig(){}function O_(o,l){var d=gs();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&Eg(l,m[1])?m[0]:(d.memoizedState=[o,l],o)}function $_(o,l){var d=gs();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&Eg(l,m[1]))return m[0];if(m=o(),ri){it(!0);try{o()}finally{it(!1)}}return d.memoizedState=[m,l],m}function Bg(o,l,d){return d===void 0||(Vn&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=B1(),ut.lanes|=o,Xn|=o,d)}function L_(o,l,d,m){return Cr(d,l)?d:cl.current!==null?(o=Bg(o,d,m),Cr(o,l)||(Cs=!0),o):(Vn&42)===0?(Cs=!0,o.memoizedState=d):(o=B1(),ut.lanes|=o,Xn|=o,l)}function I_(o,l,d,m,v){var w=B.p;B.p=w!==0&&8>w?w:8;var T=k.T,O={};k.T=O,Ug(o,!1,l,d);try{var H=v(),re=k.S;if(re!==null&&re(O,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var he=B5(H,m);lu(o,l,he,Rr(o))}else lu(o,l,m,Rr(o))}catch(xe){lu(o,l,{then:function(){},status:"rejected",reason:xe},Rr())}finally{B.p=w,k.T=T}}function F5(){}function Vg(o,l,d,m){if(o.tag!==5)throw Error(r(476));var v=B_(o).queue;I_(o,v,l,z,d===null?F5:function(){return V_(o),d(m)})}function B_(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:z},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function V_(o){var l=B_(o).next.queue;lu(o,l,{},Rr())}function zg(){return Gs(Cu)}function z_(){return gs().memoizedState}function U_(){return gs().memoizedState}function H5(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=Rr();o=In(d);var m=Bn(l,o,d);m!==null&&(Mr(m,l,d),su(m,l,d)),l={cache:xg()},o.payload=l;return}l=l.return}}function G5(o,l,d){var m=Rr();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Sf(o)?F_(l,d):(d=ig(o,l,d,m),d!==null&&(Mr(d,o,m),H_(d,l,m)))}function q_(o,l,d){var m=Rr();lu(o,l,d,m)}function lu(o,l,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Sf(o))F_(l,v);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var T=l.lastRenderedState,O=w(T,d);if(v.hasEagerState=!0,v.eagerState=O,Cr(O,T))return lf(o,l,v,0),qt===null&&of(),!1}catch{}finally{}if(d=ig(o,l,v,m),d!==null)return Mr(d,o,m),H_(d,l,m),!0}return!1}function Ug(o,l,d,m){if(m={lane:2,revertLane:b0(),action:m,hasEagerState:!1,eagerState:null,next:null},Sf(o)){if(l)throw Error(r(479))}else l=ig(o,d,m,2),l!==null&&Mr(l,o,2)}function Sf(o){var l=o.alternate;return o===ut||l!==null&&l===ut}function F_(o,l){ul=yf=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function H_(o,l,d){if((d&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,zt(o,d)}}var Cf={readContext:Gs,use:wf,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useInsertionEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useSyncExternalStore:os,useId:os,useHostTransitionStatus:os,useFormState:os,useActionState:os,useOptimistic:os,useMemoCache:os,useCacheRefresh:os},G_={readContext:Gs,use:wf,useCallback:function(o,l){return pr().memoizedState=[o,l===void 0?null:l],o},useContext:Gs,useEffect:k_,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,Nf(4194308,4,P_.bind(null,l,o),d)},useLayoutEffect:function(o,l){return Nf(4194308,4,o,l)},useInsertionEffect:function(o,l){Nf(4,2,o,l)},useMemo:function(o,l){var d=pr();l=l===void 0?null:l;var m=o();if(ri){it(!0);try{o()}finally{it(!1)}}return d.memoizedState=[m,l],m},useReducer:function(o,l,d){var m=pr();if(d!==void 0){var v=d(l);if(ri){it(!0);try{d(l)}finally{it(!1)}}}else v=l;return m.memoizedState=m.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},m.queue=o,o=o.dispatch=G5.bind(null,ut,o),[m.memoizedState,o]},useRef:function(o){var l=pr();return o={current:o},l.memoizedState=o},useState:function(o){o=$g(o);var l=o.queue,d=q_.bind(null,ut,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:Ig,useDeferredValue:function(o,l){var d=pr();return Bg(d,o,l)},useTransition:function(){var o=$g(!1);return o=I_.bind(null,ut,o.queue,!0,!1),pr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var m=ut,v=pr();if(kt){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),qt===null)throw Error(r(349));(wt&124)!==0||h_(m,l,d)}v.memoizedState=d;var w={value:d,getSnapshot:l};return v.queue=w,k_(p_.bind(null,m,w,o),[o]),m.flags|=2048,fl(9,jf(),m_.bind(null,m,w,d,l),null),d},useId:function(){var o=pr(),l=qt.identifierPrefix;if(kt){var d=ln,m=on;d=(m&~(1<<32-jt(m)-1)).toString(32)+d,l="«"+l+"R"+d,d=bf++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=V5++,l="«"+l+"r"+d.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:zg,useFormState:N_,useActionState:N_,useOptimistic:function(o){var l=pr();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Ug.bind(null,ut,!0,d),d.dispatch=l,[o,l]},useMemoCache:Pg,useCacheRefresh:function(){return pr().memoizedState=H5.bind(null,ut)}},X_={readContext:Gs,use:wf,useCallback:O_,useContext:Gs,useEffect:T_,useImperativeHandle:D_,useInsertionEffect:R_,useLayoutEffect:M_,useMemo:$_,useReducer:_f,useRef:A_,useState:function(){return _f(dn)},useDebugValue:Ig,useDeferredValue:function(o,l){var d=gs();return L_(d,$t.memoizedState,o,l)},useTransition:function(){var o=_f(dn)[0],l=gs().memoizedState;return[typeof o=="boolean"?o:ou(o),l]},useSyncExternalStore:f_,useId:z_,useHostTransitionStatus:zg,useFormState:S_,useActionState:S_,useOptimistic:function(o,l){var d=gs();return v_(d,$t,o,l)},useMemoCache:Pg,useCacheRefresh:U_},X5={readContext:Gs,use:wf,useCallback:O_,useContext:Gs,useEffect:T_,useImperativeHandle:D_,useInsertionEffect:R_,useLayoutEffect:M_,useMemo:$_,useReducer:Og,useRef:A_,useState:function(){return Og(dn)},useDebugValue:Ig,useDeferredValue:function(o,l){var d=gs();return $t===null?Bg(d,o,l):L_(d,$t.memoizedState,o,l)},useTransition:function(){var o=Og(dn)[0],l=gs().memoizedState;return[typeof o=="boolean"?o:ou(o),l]},useSyncExternalStore:f_,useId:z_,useHostTransitionStatus:zg,useFormState:E_,useActionState:E_,useOptimistic:function(o,l){var d=gs();return $t!==null?v_(d,$t,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:Pg,useCacheRefresh:U_},hl=null,cu=0;function Ef(o){var l=cu;return cu+=1,hl===null&&(hl=[]),a_(hl,o,l)}function uu(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Af(o,l){throw l.$$typeof===g?Error(r(525)):(o=Object.prototype.toString.call(l),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function Y_(o){var l=o._init;return l(o._payload)}function K_(o){function l(J,Z){if(o){var te=J.deletions;te===null?(J.deletions=[Z],J.flags|=16):te.push(Z)}}function d(J,Z){if(!o)return null;for(;Z!==null;)l(J,Z),Z=Z.sibling;return null}function m(J){for(var Z=new Map;J!==null;)J.key!==null?Z.set(J.key,J):Z.set(J.index,J),J=J.sibling;return Z}function v(J,Z){return J=nn(J,Z),J.index=0,J.sibling=null,J}function w(J,Z,te){return J.index=te,o?(te=J.alternate,te!==null?(te=te.index,te<Z?(J.flags|=67108866,Z):te):(J.flags|=67108866,Z)):(J.flags|=1048576,Z)}function T(J){return o&&J.alternate===null&&(J.flags|=67108866),J}function O(J,Z,te,pe){return Z===null||Z.tag!==6?(Z=cg(te,J.mode,pe),Z.return=J,Z):(Z=v(Z,te),Z.return=J,Z)}function H(J,Z,te,pe){var $e=te.type;return $e===_?he(J,Z,te.props.children,pe,te.key):Z!==null&&(Z.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===A&&Y_($e)===Z.type)?(Z=v(Z,te.props),uu(Z,te),Z.return=J,Z):(Z=uf(te.type,te.key,te.props,null,J.mode,pe),uu(Z,te),Z.return=J,Z)}function re(J,Z,te,pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==te.containerInfo||Z.stateNode.implementation!==te.implementation?(Z=ug(te,J.mode,pe),Z.return=J,Z):(Z=v(Z,te.children||[]),Z.return=J,Z)}function he(J,Z,te,pe,$e){return Z===null||Z.tag!==7?(Z=Ko(te,J.mode,pe,$e),Z.return=J,Z):(Z=v(Z,te),Z.return=J,Z)}function xe(J,Z,te){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=cg(""+Z,J.mode,te),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return te=uf(Z.type,Z.key,Z.props,null,J.mode,te),uu(te,Z),te.return=J,te;case b:return Z=ug(Z,J.mode,te),Z.return=J,Z;case A:var pe=Z._init;return Z=pe(Z._payload),xe(J,Z,te)}if(G(Z)||V(Z))return Z=Ko(Z,J.mode,te,null),Z.return=J,Z;if(typeof Z.then=="function")return xe(J,Ef(Z),te);if(Z.$$typeof===S)return xe(J,mf(J,Z),te);Af(J,Z)}return null}function ne(J,Z,te,pe){var $e=Z!==null?Z.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $e!==null?null:O(J,Z,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case x:return te.key===$e?H(J,Z,te,pe):null;case b:return te.key===$e?re(J,Z,te,pe):null;case A:return $e=te._init,te=$e(te._payload),ne(J,Z,te,pe)}if(G(te)||V(te))return $e!==null?null:he(J,Z,te,pe,null);if(typeof te.then=="function")return ne(J,Z,Ef(te),pe);if(te.$$typeof===S)return ne(J,Z,mf(J,te),pe);Af(J,te)}return null}function oe(J,Z,te,pe,$e){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return J=J.get(te)||null,O(Z,J,""+pe,$e);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case x:return J=J.get(pe.key===null?te:pe.key)||null,H(Z,J,pe,$e);case b:return J=J.get(pe.key===null?te:pe.key)||null,re(Z,J,pe,$e);case A:var ht=pe._init;return pe=ht(pe._payload),oe(J,Z,te,pe,$e)}if(G(pe)||V(pe))return J=J.get(te)||null,he(Z,J,pe,$e,null);if(typeof pe.then=="function")return oe(J,Z,te,Ef(pe),$e);if(pe.$$typeof===S)return oe(J,Z,te,mf(Z,pe),$e);Af(Z,pe)}return null}function et(J,Z,te,pe){for(var $e=null,ht=null,Fe=Z,We=Z=0,As=null;Fe!==null&&We<te.length;We++){Fe.index>We?(As=Fe,Fe=null):As=Fe.sibling;var Ct=ne(J,Fe,te[We],pe);if(Ct===null){Fe===null&&(Fe=As);break}o&&Fe&&Ct.alternate===null&&l(J,Fe),Z=w(Ct,Z,We),ht===null?$e=Ct:ht.sibling=Ct,ht=Ct,Fe=As}if(We===te.length)return d(J,Fe),kt&&Zo(J,We),$e;if(Fe===null){for(;We<te.length;We++)Fe=xe(J,te[We],pe),Fe!==null&&(Z=w(Fe,Z,We),ht===null?$e=Fe:ht.sibling=Fe,ht=Fe);return kt&&Zo(J,We),$e}for(Fe=m(Fe);We<te.length;We++)As=oe(Fe,J,We,te[We],pe),As!==null&&(o&&As.alternate!==null&&Fe.delete(As.key===null?We:As.key),Z=w(As,Z,We),ht===null?$e=As:ht.sibling=As,ht=As);return o&&Fe.forEach(function(so){return l(J,so)}),kt&&Zo(J,We),$e}function Ke(J,Z,te,pe){if(te==null)throw Error(r(151));for(var $e=null,ht=null,Fe=Z,We=Z=0,As=null,Ct=te.next();Fe!==null&&!Ct.done;We++,Ct=te.next()){Fe.index>We?(As=Fe,Fe=null):As=Fe.sibling;var so=ne(J,Fe,Ct.value,pe);if(so===null){Fe===null&&(Fe=As);break}o&&Fe&&so.alternate===null&&l(J,Fe),Z=w(so,Z,We),ht===null?$e=so:ht.sibling=so,ht=so,Fe=As}if(Ct.done)return d(J,Fe),kt&&Zo(J,We),$e;if(Fe===null){for(;!Ct.done;We++,Ct=te.next())Ct=xe(J,Ct.value,pe),Ct!==null&&(Z=w(Ct,Z,We),ht===null?$e=Ct:ht.sibling=Ct,ht=Ct);return kt&&Zo(J,We),$e}for(Fe=m(Fe);!Ct.done;We++,Ct=te.next())Ct=oe(Fe,J,We,Ct.value,pe),Ct!==null&&(o&&Ct.alternate!==null&&Fe.delete(Ct.key===null?We:Ct.key),Z=w(Ct,Z,We),ht===null?$e=Ct:ht.sibling=Ct,ht=Ct);return o&&Fe.forEach(function(Y3){return l(J,Y3)}),kt&&Zo(J,We),$e}function It(J,Z,te,pe){if(typeof te=="object"&&te!==null&&te.type===_&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case x:e:{for(var $e=te.key;Z!==null;){if(Z.key===$e){if($e=te.type,$e===_){if(Z.tag===7){d(J,Z.sibling),pe=v(Z,te.props.children),pe.return=J,J=pe;break e}}else if(Z.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===A&&Y_($e)===Z.type){d(J,Z.sibling),pe=v(Z,te.props),uu(pe,te),pe.return=J,J=pe;break e}d(J,Z);break}else l(J,Z);Z=Z.sibling}te.type===_?(pe=Ko(te.props.children,J.mode,pe,te.key),pe.return=J,J=pe):(pe=uf(te.type,te.key,te.props,null,J.mode,pe),uu(pe,te),pe.return=J,J=pe)}return T(J);case b:e:{for($e=te.key;Z!==null;){if(Z.key===$e)if(Z.tag===4&&Z.stateNode.containerInfo===te.containerInfo&&Z.stateNode.implementation===te.implementation){d(J,Z.sibling),pe=v(Z,te.children||[]),pe.return=J,J=pe;break e}else{d(J,Z);break}else l(J,Z);Z=Z.sibling}pe=ug(te,J.mode,pe),pe.return=J,J=pe}return T(J);case A:return $e=te._init,te=$e(te._payload),It(J,Z,te,pe)}if(G(te))return et(J,Z,te,pe);if(V(te)){if($e=V(te),typeof $e!="function")throw Error(r(150));return te=$e.call(te),Ke(J,Z,te,pe)}if(typeof te.then=="function")return It(J,Z,Ef(te),pe);if(te.$$typeof===S)return It(J,Z,mf(J,te),pe);Af(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Z!==null&&Z.tag===6?(d(J,Z.sibling),pe=v(Z,te),pe.return=J,J=pe):(d(J,Z),pe=cg(te,J.mode,pe),pe.return=J,J=pe),T(J)):d(J,Z)}return function(J,Z,te,pe){try{cu=0;var $e=It(J,Z,te,pe);return hl=null,$e}catch(Fe){if(Fe===eu||Fe===gf)throw Fe;var ht=Er(29,Fe,null,J.mode);return ht.lanes=pe,ht.return=J,ht}finally{}}}var ml=K_(!0),W_=K_(!1),Yr=X(null),Ma=null;function zn(o){var l=o.alternate;ee(ws,ws.current&1),ee(Yr,o),Ma===null&&(l===null||cl.current!==null||l.memoizedState!==null)&&(Ma=o)}function Z_(o){if(o.tag===22){if(ee(ws,ws.current),ee(Yr,o),Ma===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Ma=o)}}else Un()}function Un(){ee(ws,ws.current),ee(Yr,Yr.current)}function fn(o){ae(Yr),Ma===o&&(Ma=null),ae(ws)}var ws=X(0);function kf(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||M0(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function qg(o,l,d,m){l=o.memoizedState,d=d(m,l),d=d==null?l:p({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Fg={enqueueSetState:function(o,l,d){o=o._reactInternals;var m=Rr(),v=In(m);v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Mr(l,o,m),su(l,o,m))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var m=Rr(),v=In(m);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Mr(l,o,m),su(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Rr(),m=In(d);m.tag=2,l!=null&&(m.callback=l),l=Bn(o,m,d),l!==null&&(Mr(l,o,d),su(l,o,d))}};function Q_(o,l,d,m,v,w,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,w,T):l.prototype&&l.prototype.isPureReactComponent?!Gc(d,m)||!Gc(v,w):!0}function J_(o,l,d,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==o&&Fg.enqueueReplaceState(l,l.state,null)}function ai(o,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(o=o.defaultProps){d===l&&(d=p({},d));for(var v in o)d[v]===void 0&&(d[v]=o[v])}return d}var Tf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function e1(o){Tf(o)}function t1(o){console.error(o)}function s1(o){Tf(o)}function Rf(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function r1(o,l,d){try{var m=o.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Hg(o,l,d){return d=In(d),d.tag=3,d.payload={element:null},d.callback=function(){Rf(o,l)},d}function a1(o){return o=In(o),o.tag=3,o}function n1(o,l,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var w=m.value;o.payload=function(){return v(w)},o.callback=function(){r1(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){r1(l,d,m),typeof v!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function Y5(o,l,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&Zc(l,d,v,!0),d=Yr.current,d!==null){switch(d.tag){case 13:return Ma===null?p0():d.alternate===null&&ts===0&&(ts=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===bg?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),x0(o,m,v)),!1;case 22:return d.flags|=65536,m===bg?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),x0(o,m,v)),!1}throw Error(r(435,d.tag))}return x0(o,m,v),p0(),!1}if(kt)return l=Yr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,m!==hg&&(o=Error(r(422),{cause:m}),Wc(Fr(o,d)))):(m!==hg&&(l=Error(r(423),{cause:m}),Wc(Fr(l,d))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,m=Fr(m,d),v=Hg(o.stateNode,m,v),jg(o,v),ts!==4&&(ts=2)),!1;var w=Error(r(520),{cause:m});if(w=Fr(w,d),xu===null?xu=[w]:xu.push(w),ts!==4&&(ts=2),l===null)return!0;m=Fr(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=v&-v,d.lanes|=o,o=Hg(d.stateNode,m,o),jg(d,o),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Yn===null||!Yn.has(w))))return d.flags|=65536,v&=-v,d.lanes|=v,v=a1(v),n1(v,o,d,m),jg(d,v),!1}d=d.return}while(d!==null);return!1}var o1=Error(r(461)),Cs=!1;function Ls(o,l,d,m){l.child=o===null?W_(l,null,d,m):ml(l,o.child,d,m)}function i1(o,l,d,m,v){d=d.render;var w=l.ref;if("ref"in m){var T={};for(var O in m)O!=="ref"&&(T[O]=m[O])}else T=m;return ti(l),m=Ag(o,l,d,T,w,v),O=kg(),o!==null&&!Cs?(Tg(o,l,v),hn(o,l,v)):(kt&&O&&dg(l),l.flags|=1,Ls(o,l,m,v),l.child)}function l1(o,l,d,m,v){if(o===null){var w=d.type;return typeof w=="function"&&!lg(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,c1(o,l,w,m,v)):(o=uf(d.type,null,m,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!Jg(o,v)){var T=w.memoizedProps;if(d=d.compare,d=d!==null?d:Gc,d(T,m)&&o.ref===l.ref)return hn(o,l,v)}return l.flags|=1,o=nn(w,m),o.ref=l.ref,o.return=l,l.child=o}function c1(o,l,d,m,v){if(o!==null){var w=o.memoizedProps;if(Gc(w,m)&&o.ref===l.ref)if(Cs=!1,l.pendingProps=m=w,Jg(o,v))(o.flags&131072)!==0&&(Cs=!0);else return l.lanes=o.lanes,hn(o,l,v)}return Gg(o,l,d,m,v)}function u1(o,l,d){var m=l.pendingProps,v=m.children,w=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=w!==null?w.baseLanes|d:d,o!==null){for(v=l.child=o.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;l.childLanes=w&~m}else l.childLanes=0,l.child=null;return d1(o,l,m,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&pf(l,w!==null?w.cachePool:null),w!==null?c_(l,w):Sg(),Z_(l);else return l.lanes=l.childLanes=536870912,d1(o,l,w!==null?w.baseLanes|d:d,d)}else w!==null?(pf(l,w.cachePool),c_(l,w),Un(),l.memoizedState=null):(o!==null&&pf(l,null),Sg(),Un());return Ls(o,l,v,d),l.child}function d1(o,l,d,m){var v=yg();return v=v===null?null:{parent:bs._currentValue,pool:v},l.memoizedState={baseLanes:d,cachePool:v},o!==null&&pf(l,null),Sg(),Z_(l),o!==null&&Zc(o,l,m,!0),null}function Mf(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function Gg(o,l,d,m,v){return ti(l),d=Ag(o,l,d,m,void 0,v),m=kg(),o!==null&&!Cs?(Tg(o,l,v),hn(o,l,v)):(kt&&m&&dg(l),l.flags|=1,Ls(o,l,d,v),l.child)}function f1(o,l,d,m,v,w){return ti(l),l.updateQueue=null,d=d_(l,m,d,v),u_(o),m=kg(),o!==null&&!Cs?(Tg(o,l,w),hn(o,l,w)):(kt&&m&&dg(l),l.flags|=1,Ls(o,l,d,w),l.child)}function h1(o,l,d,m,v){if(ti(l),l.stateNode===null){var w=al,T=d.contextType;typeof T=="object"&&T!==null&&(w=Gs(T)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Fg,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},wg(l),T=d.contextType,w.context=typeof T=="object"&&T!==null?Gs(T):al,w.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(qg(l,d,T,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&Fg.enqueueReplaceState(w,w.state,null),au(l,m,w,v),ru(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){w=l.stateNode;var O=l.memoizedProps,H=ai(d,O);w.props=H;var re=w.context,he=d.contextType;T=al,typeof he=="object"&&he!==null&&(T=Gs(he));var xe=d.getDerivedStateFromProps;he=typeof xe=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||re!==T)&&J_(l,w,m,T),Ln=!1;var ne=l.memoizedState;w.state=ne,au(l,m,w,v),ru(),re=l.memoizedState,O||ne!==re||Ln?(typeof xe=="function"&&(qg(l,d,xe,m),re=l.memoizedState),(H=Ln||Q_(l,d,H,m,ne,re,T))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=re),w.props=m,w.state=re,w.context=T,m=H):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,_g(o,l),T=l.memoizedProps,he=ai(d,T),w.props=he,xe=l.pendingProps,ne=w.context,re=d.contextType,H=al,typeof re=="object"&&re!==null&&(H=Gs(re)),O=d.getDerivedStateFromProps,(re=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==xe||ne!==H)&&J_(l,w,m,H),Ln=!1,ne=l.memoizedState,w.state=ne,au(l,m,w,v),ru();var oe=l.memoizedState;T!==xe||ne!==oe||Ln||o!==null&&o.dependencies!==null&&hf(o.dependencies)?(typeof O=="function"&&(qg(l,d,O,m),oe=l.memoizedState),(he=Ln||Q_(l,d,he,m,ne,oe,H)||o!==null&&o.dependencies!==null&&hf(o.dependencies))?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,oe,H),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,oe,H)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=oe),w.props=m,w.state=oe,w.context=H,m=he):(typeof w.componentDidUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),m=!1)}return w=m,Mf(o,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&m?(l.child=ml(l,o.child,null,v),l.child=ml(l,null,d,v)):Ls(o,l,d,v),l.memoizedState=w.state,o=l.child):o=hn(o,l,v),o}function m1(o,l,d,m){return Kc(),l.flags|=256,Ls(o,l,d,m),l.child}var Xg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yg(o){return{baseLanes:o,cachePool:t_()}}function Kg(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=Kr),o}function p1(o,l,d){var m=l.pendingProps,v=!1,w=(l.flags&128)!==0,T;if((T=w)||(T=o!==null&&o.memoizedState===null?!1:(ws.current&2)!==0),T&&(v=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,o===null){if(kt){if(v?zn(l):Un(),kt){var O=es,H;if(H=O){e:{for(H=O,O=Ra;H.nodeType!==8;){if(!O){O=null;break e}if(H=fa(H.nextSibling),H===null){O=null;break e}}O=H}O!==null?(l.memoizedState={dehydrated:O,treeContext:Wo!==null?{id:on,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},H=Er(18,null,null,0),H.stateNode=O,H.return=l,l.child=H,nr=l,es=null,H=!0):H=!1}H||Jo(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return M0(O)?l.lanes=32:l.lanes=536870912,null;fn(l)}return O=m.children,m=m.fallback,v?(Un(),v=l.mode,O=Pf({mode:"hidden",children:O},v),m=Ko(m,v,d,null),O.return=l,m.return=l,O.sibling=m,l.child=O,v=l.child,v.memoizedState=Yg(d),v.childLanes=Kg(o,T,d),l.memoizedState=Xg,m):(zn(l),Wg(l,O))}if(H=o.memoizedState,H!==null&&(O=H.dehydrated,O!==null)){if(w)l.flags&256?(zn(l),l.flags&=-257,l=Zg(o,l,d)):l.memoizedState!==null?(Un(),l.child=o.child,l.flags|=128,l=null):(Un(),v=m.fallback,O=l.mode,m=Pf({mode:"visible",children:m.children},O),v=Ko(v,O,d,null),v.flags|=2,m.return=l,v.return=l,m.sibling=v,l.child=m,ml(l,o.child,null,d),m=l.child,m.memoizedState=Yg(d),m.childLanes=Kg(o,T,d),l.memoizedState=Xg,l=v);else if(zn(l),M0(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var re=T.dgst;T=re,m=Error(r(419)),m.stack="",m.digest=T,Wc({value:m,source:null,stack:null}),l=Zg(o,l,d)}else if(Cs||Zc(o,l,d,!1),T=(d&o.childLanes)!==0,Cs||T){if(T=qt,T!==null&&(m=d&-d,m=(m&42)!==0?1:ms(m),m=(m&(T.suspendedLanes|d))!==0?0:m,m!==0&&m!==H.retryLane))throw H.retryLane=m,rl(o,m),Mr(T,o,m),o1;O.data==="$?"||p0(),l=Zg(o,l,d)}else O.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=H.treeContext,es=fa(O.nextSibling),nr=l,kt=!0,Qo=null,Ra=!1,o!==null&&(Gr[Xr++]=on,Gr[Xr++]=ln,Gr[Xr++]=Wo,on=o.id,ln=o.overflow,Wo=l),l=Wg(l,m.children),l.flags|=4096);return l}return v?(Un(),v=m.fallback,O=l.mode,H=o.child,re=H.sibling,m=nn(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&65011712,re!==null?v=nn(re,v):(v=Ko(v,O,d,null),v.flags|=2),v.return=l,m.return=l,m.sibling=v,l.child=m,m=v,v=l.child,O=o.child.memoizedState,O===null?O=Yg(d):(H=O.cachePool,H!==null?(re=bs._currentValue,H=H.parent!==re?{parent:re,pool:re}:H):H=t_(),O={baseLanes:O.baseLanes|d,cachePool:H}),v.memoizedState=O,v.childLanes=Kg(o,T,d),l.memoizedState=Xg,m):(zn(l),d=o.child,o=d.sibling,d=nn(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,o!==null&&(T=l.deletions,T===null?(l.deletions=[o],l.flags|=16):T.push(o)),l.child=d,l.memoizedState=null,d)}function Wg(o,l){return l=Pf({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Pf(o,l){return o=Er(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Zg(o,l,d){return ml(l,o.child,null,d),o=Wg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function g1(o,l,d){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),pg(o.return,l,d)}function Qg(o,l,d,m,v){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=d,w.tailMode=v)}function x1(o,l,d){var m=l.pendingProps,v=m.revealOrder,w=m.tail;if(Ls(o,l,m.children,d),m=ws.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&g1(o,d,l);else if(o.tag===19)g1(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(ee(ws,m),v){case"forwards":for(d=l.child,v=null;d!==null;)o=d.alternate,o!==null&&kf(o)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),Qg(l,!1,v,d,w);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&kf(o)===null){l.child=v;break}o=v.sibling,v.sibling=d,d=v,v=o}Qg(l,!0,d,null,w);break;case"together":Qg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function hn(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Xn|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Zc(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(r(153));if(l.child!==null){for(o=l.child,d=nn(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=nn(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function Jg(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&hf(o)))}function K5(o,l,d){switch(l.tag){case 3:ce(l,l.stateNode.containerInfo),$n(l,bs,o.memoizedState.cache),Kc();break;case 27:case 5:Ne(l);break;case 4:ce(l,l.stateNode.containerInfo);break;case 10:$n(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(zn(l),l.flags|=128,null):(d&l.child.childLanes)!==0?p1(o,l,d):(zn(l),o=hn(o,l,d),o!==null?o.sibling:null);zn(l);break;case 19:var v=(o.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(Zc(o,l,d,!1),m=(d&l.childLanes)!==0),v){if(m)return x1(o,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ee(ws,ws.current),m)break;return null;case 22:case 23:return l.lanes=0,u1(o,l,d);case 24:$n(l,bs,o.memoizedState.cache)}return hn(o,l,d)}function v1(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)Cs=!0;else{if(!Jg(o,d)&&(l.flags&128)===0)return Cs=!1,K5(o,l,d);Cs=(o.flags&131072)!==0}else Cs=!1,kt&&(l.flags&1048576)!==0&&Yw(l,ff,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var m=l.elementType,v=m._init;if(m=v(m._payload),l.type=m,typeof m=="function")lg(m)?(o=ai(m,o),l.tag=1,l=h1(null,l,m,o,d)):(l.tag=0,l=Gg(null,l,m,o,d));else{if(m!=null){if(v=m.$$typeof,v===P){l.tag=11,l=i1(null,l,m,o,d);break e}else if(v===$){l.tag=14,l=l1(null,l,m,o,d);break e}}throw l=Q(m)||m,Error(r(306,l,""))}}return l;case 0:return Gg(o,l,l.type,l.pendingProps,d);case 1:return m=l.type,v=ai(m,l.pendingProps),h1(o,l,m,v,d);case 3:e:{if(ce(l,l.stateNode.containerInfo),o===null)throw Error(r(387));m=l.pendingProps;var w=l.memoizedState;v=w.element,_g(o,l),au(l,m,null,d);var T=l.memoizedState;if(m=T.cache,$n(l,bs,m),m!==w.cache&&gg(l,[bs],d,!0),ru(),m=T.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=m1(o,l,m,d);break e}else if(m!==v){v=Fr(Error(r(424)),l),Wc(v),l=m1(o,l,m,d);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(es=fa(o.firstChild),nr=l,kt=!0,Qo=null,Ra=!0,d=W_(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Kc(),m===v){l=hn(o,l,d);break e}Ls(o,l,m,d)}l=l.child}return l;case 26:return Mf(o,l),o===null?(d=_j(l.type,null,l.pendingProps,null))?l.memoizedState=d:kt||(d=l.type,o=l.pendingProps,m=Xf(se.current).createElement(d),m[ns]=l,m[Ut]=o,Bs(m,d,o),Ss(m),l.stateNode=m):l.memoizedState=_j(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ne(l),o===null&&kt&&(m=l.stateNode=yj(l.type,l.pendingProps,se.current),nr=l,Ra=!0,v=es,Zn(l.type)?(P0=v,es=fa(m.firstChild)):es=v),Ls(o,l,l.pendingProps.children,d),Mf(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&kt&&((v=m=es)&&(m=j3(m,l.type,l.pendingProps,Ra),m!==null?(l.stateNode=m,nr=l,es=fa(m.firstChild),Ra=!1,v=!0):v=!1),v||Jo(l)),Ne(l),v=l.type,w=l.pendingProps,T=o!==null?o.memoizedProps:null,m=w.children,k0(v,w)?m=null:T!==null&&k0(v,T)&&(l.flags|=32),l.memoizedState!==null&&(v=Ag(o,l,z5,null,null,d),Cu._currentValue=v),Mf(o,l),Ls(o,l,m,d),l.child;case 6:return o===null&&kt&&((o=d=es)&&(d=N3(d,l.pendingProps,Ra),d!==null?(l.stateNode=d,nr=l,es=null,o=!0):o=!1),o||Jo(l)),null;case 13:return p1(o,l,d);case 4:return ce(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=ml(l,null,m,d):Ls(o,l,m,d),l.child;case 11:return i1(o,l,l.type,l.pendingProps,d);case 7:return Ls(o,l,l.pendingProps,d),l.child;case 8:return Ls(o,l,l.pendingProps.children,d),l.child;case 12:return Ls(o,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,$n(l,l.type,m.value),Ls(o,l,m.children,d),l.child;case 9:return v=l.type._context,m=l.pendingProps.children,ti(l),v=Gs(v),m=m(v),l.flags|=1,Ls(o,l,m,d),l.child;case 14:return l1(o,l,l.type,l.pendingProps,d);case 15:return c1(o,l,l.type,l.pendingProps,d);case 19:return x1(o,l,d);case 31:return m=l.pendingProps,d=l.mode,m={mode:m.mode,children:m.children},o===null?(d=Pf(m,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=nn(o.child,m),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return u1(o,l,d);case 24:return ti(l),m=Gs(bs),o===null?(v=yg(),v===null&&(v=qt,w=xg(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=d),v=w),l.memoizedState={parent:m,cache:v},wg(l),$n(l,bs,v)):((o.lanes&d)!==0&&(_g(o,l),au(l,null,null,d),ru()),v=o.memoizedState,w=l.memoizedState,v.parent!==m?(v={parent:m,cache:m},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),$n(l,bs,m)):(m=w.cache,$n(l,bs,m),m!==v.cache&&gg(l,[bs],d,!0))),Ls(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function mn(o){o.flags|=4}function y1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Ej(l)){if(l=Yr.current,l!==null&&((wt&4194048)===wt?Ma!==null:(wt&62914560)!==wt&&(wt&536870912)===0||l!==Ma))throw tu=bg,s_;o.flags|=8192}}function Df(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Ui():536870912,o.lanes|=l,vl|=l)}function du(o,l){if(!kt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Zt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(l)for(var v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=d,l}function W5(o,l,d){var m=l.pendingProps;switch(fg(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(l),null;case 1:return Zt(l),null;case 3:return d=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),un(bs),be(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Yc(l)?mn(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Zw())),Zt(l),null;case 26:return d=l.memoizedState,o===null?(mn(l),d!==null?(Zt(l),y1(l,d)):(Zt(l),l.flags&=-16777217)):d?d!==o.memoizedState?(mn(l),Zt(l),y1(l,d)):(Zt(l),l.flags&=-16777217):(o.memoizedProps!==m&&mn(l),Zt(l),l.flags&=-16777217),null;case 27:we(l),d=se.current;var v=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Zt(l),null}o=le.current,Yc(l)?Kw(l):(o=yj(v,m,d),l.stateNode=o,mn(l))}return Zt(l),null;case 5:if(we(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(!m){if(l.stateNode===null)throw Error(r(166));return Zt(l),null}if(o=le.current,Yc(l))Kw(l);else{switch(v=Xf(se.current),o){case 1:o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=v.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}o[ns]=l,o[Ut]=m;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)o.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=o;e:switch(Bs(o,d,m),d){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&mn(l)}}return Zt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(r(166));if(o=se.current,Yc(l)){if(o=l.stateNode,d=l.memoizedProps,m=null,v=nr,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}o[ns]=l,o=!!(o.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||fj(o.nodeValue,d)),o||Jo(l)}else o=Xf(o).createTextNode(m),o[ns]=l,l.stateNode=o}return Zt(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Yc(l),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(r(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[ns]=l}else Kc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Zt(l),v=!1}else v=Zw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(fn(l),l):(fn(l),null)}if(fn(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=m!==null,o=o!==null&&o.memoizedState!==null,d){m=l.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==v&&(m.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),Df(l,l.updateQueue),Zt(l),null;case 4:return be(),o===null&&N0(l.stateNode.containerInfo),Zt(l),null;case 10:return un(l.type),Zt(l),null;case 19:if(ae(ws),v=l.memoizedState,v===null)return Zt(l),null;if(m=(l.flags&128)!==0,w=v.rendering,w===null)if(m)du(v,!1);else{if(ts!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=kf(o),w!==null){for(l.flags|=128,du(v,!1),o=w.updateQueue,l.updateQueue=o,Df(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)Xw(d,o),d=d.sibling;return ee(ws,ws.current&1|2),l.child}o=o.sibling}v.tail!==null&&ke()>Lf&&(l.flags|=128,m=!0,du(v,!1),l.lanes=4194304)}else{if(!m)if(o=kf(w),o!==null){if(l.flags|=128,m=!0,o=o.updateQueue,l.updateQueue=o,Df(l,o),du(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!kt)return Zt(l),null}else 2*ke()-v.renderingStartTime>Lf&&d!==536870912&&(l.flags|=128,m=!0,du(v,!1),l.lanes=4194304);v.isBackwards?(w.sibling=l.child,l.child=w):(o=v.last,o!==null?o.sibling=w:l.child=w,v.last=w)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ke(),l.sibling=null,o=ws.current,ee(ws,m?o&1|2:o&1),l):(Zt(l),null);case 22:case 23:return fn(l),Cg(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Zt(l),l.subtreeFlags&6&&(l.flags|=8192)):Zt(l),d=l.updateQueue,d!==null&&Df(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),o!==null&&ae(si),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),un(bs),Zt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function Z5(o,l){switch(fg(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return un(bs),be(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return we(l),null;case 13:if(fn(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Kc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ae(ws),null;case 4:return be(),null;case 10:return un(l.type),null;case 22:case 23:return fn(l),Cg(),o!==null&&ae(si),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return un(bs),null;case 25:return null;default:return null}}function b1(o,l){switch(fg(l),l.tag){case 3:un(bs),be();break;case 26:case 27:case 5:we(l);break;case 4:be();break;case 13:fn(l);break;case 19:ae(ws);break;case 10:un(l.type);break;case 22:case 23:fn(l),Cg(),o!==null&&ae(si);break;case 24:un(bs)}}function fu(o,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&o)===o){m=void 0;var w=d.create,T=d.inst;m=w(),T.destroy=m}d=d.next}while(d!==v)}}catch(O){Bt(l,l.return,O)}}function qn(o,l,d){try{var m=l.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var w=v.next;m=w;do{if((m.tag&o)===o){var T=m.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,v=l;var H=d,re=O;try{re()}catch(he){Bt(v,H,he)}}}m=m.next}while(m!==w)}}catch(he){Bt(l,l.return,he)}}function w1(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{l_(l,d)}catch(m){Bt(o,o.return,m)}}}function _1(o,l,d){d.props=ai(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(m){Bt(o,l,m)}}function hu(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof d=="function"?o.refCleanup=d(m):d.current=m}}catch(v){Bt(o,l,v)}}function Pa(o,l){var d=o.ref,m=o.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){Bt(o,l,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Bt(o,l,v)}else d.current=null}function j1(o){var l=o.type,d=o.memoizedProps,m=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){Bt(o,o.return,v)}}function e0(o,l,d){try{var m=o.stateNode;v3(m,o.type,d,l),m[Ut]=l}catch(v){Bt(o,o.return,v)}}function N1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Zn(o.type)||o.tag===4}function t0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||N1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Zn(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function s0(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Gf));else if(m!==4&&(m===27&&Zn(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(s0(o,l,d),o=o.sibling;o!==null;)s0(o,l,d),o=o.sibling}function Of(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(m!==4&&(m===27&&Zn(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Of(o,l,d),o=o.sibling;o!==null;)Of(o,l,d),o=o.sibling}function S1(o){var l=o.stateNode,d=o.memoizedProps;try{for(var m=o.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Bs(l,m,d),l[ns]=o,l[Ut]=d}catch(w){Bt(o,o.return,w)}}var pn=!1,is=!1,r0=!1,C1=typeof WeakSet=="function"?WeakSet:Set,Es=null;function Q5(o,l){if(o=o.containerInfo,E0=Jf,o=Lw(o),tg(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var T=0,O=-1,H=-1,re=0,he=0,xe=o,ne=null;t:for(;;){for(var oe;xe!==d||v!==0&&xe.nodeType!==3||(O=T+v),xe!==w||m!==0&&xe.nodeType!==3||(H=T+m),xe.nodeType===3&&(T+=xe.nodeValue.length),(oe=xe.firstChild)!==null;)ne=xe,xe=oe;for(;;){if(xe===o)break t;if(ne===d&&++re===v&&(O=T),ne===w&&++he===m&&(H=T),(oe=xe.nextSibling)!==null)break;xe=ne,ne=xe.parentNode}xe=oe}d=O===-1||H===-1?null:{start:O,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(A0={focusedElem:o,selectionRange:d},Jf=!1,Es=l;Es!==null;)if(l=Es,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Es=o;else for(;Es!==null;){switch(l=Es,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,d=l,v=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var et=ai(d.type,v,d.elementType===d.type);o=m.getSnapshotBeforeUpdate(et,w),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ke){Bt(d,d.return,Ke)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)R0(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":R0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=l.sibling,o!==null){o.return=l.return,Es=o;break}Es=l.return}}function E1(o,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Fn(o,d),m&4&&fu(5,d);break;case 1:if(Fn(o,d),m&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(T){Bt(d,d.return,T)}else{var v=ai(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(v,l,o.__reactInternalSnapshotBeforeUpdate)}catch(T){Bt(d,d.return,T)}}m&64&&w1(d),m&512&&hu(d,d.return);break;case 3:if(Fn(o,d),m&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{l_(o,l)}catch(T){Bt(d,d.return,T)}}break;case 27:l===null&&m&4&&S1(d);case 26:case 5:Fn(o,d),l===null&&m&4&&j1(d),m&512&&hu(d,d.return);break;case 12:Fn(o,d);break;case 13:Fn(o,d),m&4&&T1(o,d),m&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=i3.bind(null,d),S3(o,d))));break;case 22:if(m=d.memoizedState!==null||pn,!m){l=l!==null&&l.memoizedState!==null||is,v=pn;var w=is;pn=m,(is=l)&&!w?Hn(o,d,(d.subtreeFlags&8772)!==0):Fn(o,d),pn=v,is=w}break;case 30:break;default:Fn(o,d)}}function A1(o){var l=o.alternate;l!==null&&(o.alternate=null,A1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&$p(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Kt=null,gr=!1;function gn(o,l,d){for(d=d.child;d!==null;)k1(o,l,d),d=d.sibling}function k1(o,l,d){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Me,d)}catch{}switch(d.tag){case 26:is||Pa(d,l),gn(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:is||Pa(d,l);var m=Kt,v=gr;Zn(d.type)&&(Kt=d.stateNode,gr=!1),gn(o,l,d),_u(d.stateNode),Kt=m,gr=v;break;case 5:is||Pa(d,l);case 6:if(m=Kt,v=gr,Kt=null,gn(o,l,d),Kt=m,gr=v,Kt!==null)if(gr)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(d.stateNode)}catch(w){Bt(d,l,w)}else try{Kt.removeChild(d.stateNode)}catch(w){Bt(d,l,w)}break;case 18:Kt!==null&&(gr?(o=Kt,xj(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),Tu(o)):xj(Kt,d.stateNode));break;case 4:m=Kt,v=gr,Kt=d.stateNode.containerInfo,gr=!0,gn(o,l,d),Kt=m,gr=v;break;case 0:case 11:case 14:case 15:is||qn(2,d,l),is||qn(4,d,l),gn(o,l,d);break;case 1:is||(Pa(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&_1(d,l,m)),gn(o,l,d);break;case 21:gn(o,l,d);break;case 22:is=(m=is)||d.memoizedState!==null,gn(o,l,d),is=m;break;default:gn(o,l,d)}}function T1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Tu(o)}catch(d){Bt(l,l.return,d)}}function J5(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new C1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new C1),l;default:throw Error(r(435,o.tag))}}function a0(o,l){var d=J5(o);l.forEach(function(m){var v=l3.bind(null,o,m);d.has(m)||(d.add(m),m.then(v,v))})}function Ar(o,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],w=o,T=l,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(Zn(O.type)){Kt=O.stateNode,gr=!1;break e}break;case 5:Kt=O.stateNode,gr=!1;break e;case 3:case 4:Kt=O.stateNode.containerInfo,gr=!0;break e}O=O.return}if(Kt===null)throw Error(r(160));k1(w,T,v),Kt=null,gr=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)R1(l,o),l=l.sibling}var da=null;function R1(o,l){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ar(l,o),kr(o),m&4&&(qn(3,o,o.return),fu(3,o),qn(5,o,o.return));break;case 1:Ar(l,o),kr(o),m&512&&(is||d===null||Pa(d,d.return)),m&64&&pn&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=da;if(Ar(l,o),kr(o),m&512&&(is||d===null||Pa(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=o.memoizedState,d===null)if(m===null)if(o.stateNode===null){e:{m=o.type,d=o.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Lc]||w[ns]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(m),v.head.insertBefore(w,v.querySelector("head > title"))),Bs(w,m,d),w[ns]=o,Ss(w),m=w;break e;case"link":var T=Sj("link","href",v).get(m+(d.href||""));if(T){for(var O=0;O<T.length;O++)if(w=T[O],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(O,1);break t}}w=v.createElement(m),Bs(w,m,d),v.head.appendChild(w);break;case"meta":if(T=Sj("meta","content",v).get(m+(d.content||""))){for(O=0;O<T.length;O++)if(w=T[O],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(O,1);break t}}w=v.createElement(m),Bs(w,m,d),v.head.appendChild(w);break;default:throw Error(r(468,m))}w[ns]=o,Ss(w),m=w}o.stateNode=m}else Cj(v,o.type,o.stateNode);else o.stateNode=Nj(v,m,o.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?Cj(v,o.type,o.stateNode):Nj(v,m,o.memoizedProps)):m===null&&o.stateNode!==null&&e0(o,o.memoizedProps,d.memoizedProps)}break;case 27:Ar(l,o),kr(o),m&512&&(is||d===null||Pa(d,d.return)),d!==null&&m&4&&e0(o,o.memoizedProps,d.memoizedProps);break;case 5:if(Ar(l,o),kr(o),m&512&&(is||d===null||Pa(d,d.return)),o.flags&32){v=o.stateNode;try{Wi(v,"")}catch(oe){Bt(o,o.return,oe)}}m&4&&o.stateNode!=null&&(v=o.memoizedProps,e0(o,v,d!==null?d.memoizedProps:v)),m&1024&&(r0=!0);break;case 6:if(Ar(l,o),kr(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,d=o.stateNode;try{d.nodeValue=m}catch(oe){Bt(o,o.return,oe)}}break;case 3:if(Wf=null,v=da,da=Yf(l.containerInfo),Ar(l,o),da=v,kr(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Tu(l.containerInfo)}catch(oe){Bt(o,o.return,oe)}r0&&(r0=!1,M1(o));break;case 4:m=da,da=Yf(o.stateNode.containerInfo),Ar(l,o),kr(o),da=m;break;case 12:Ar(l,o),kr(o);break;case 13:Ar(l,o),kr(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(u0=ke()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,a0(o,m)));break;case 22:v=o.memoizedState!==null;var H=d!==null&&d.memoizedState!==null,re=pn,he=is;if(pn=re||v,is=he||H,Ar(l,o),is=he,pn=re,kr(o),m&8192)e:for(l=o.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||H||pn||is||ni(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){H=d=l;try{if(w=H.stateNode,v)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=H.stateNode;var xe=H.memoizedProps.style,ne=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(oe){Bt(H,H.return,oe)}}}else if(l.tag===6){if(d===null){H=l;try{H.stateNode.nodeValue=v?"":H.memoizedProps}catch(oe){Bt(H,H.return,oe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,a0(o,d))));break;case 19:Ar(l,o),kr(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,a0(o,m)));break;case 30:break;case 21:break;default:Ar(l,o),kr(o)}}function kr(o){var l=o.flags;if(l&2){try{for(var d,m=o.return;m!==null;){if(N1(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var v=d.stateNode,w=t0(o);Of(o,w,v);break;case 5:var T=d.stateNode;d.flags&32&&(Wi(T,""),d.flags&=-33);var O=t0(o);Of(o,O,T);break;case 3:case 4:var H=d.stateNode.containerInfo,re=t0(o);s0(o,re,H);break;default:throw Error(r(161))}}catch(he){Bt(o,o.return,he)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function M1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;M1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Fn(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)E1(o,l.alternate,l),l=l.sibling}function ni(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:qn(4,l,l.return),ni(l);break;case 1:Pa(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&_1(l,l.return,d),ni(l);break;case 27:_u(l.stateNode);case 26:case 5:Pa(l,l.return),ni(l);break;case 22:l.memoizedState===null&&ni(l);break;case 30:ni(l);break;default:ni(l)}o=o.sibling}}function Hn(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,v=o,w=l,T=w.flags;switch(w.tag){case 0:case 11:case 15:Hn(v,w,d),fu(4,w);break;case 1:if(Hn(v,w,d),m=w,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(re){Bt(m,m.return,re)}if(m=w,v=m.updateQueue,v!==null){var O=m.stateNode;try{var H=v.shared.hiddenCallbacks;if(H!==null)for(v.shared.hiddenCallbacks=null,v=0;v<H.length;v++)i_(H[v],O)}catch(re){Bt(m,m.return,re)}}d&&T&64&&w1(w),hu(w,w.return);break;case 27:S1(w);case 26:case 5:Hn(v,w,d),d&&m===null&&T&4&&j1(w),hu(w,w.return);break;case 12:Hn(v,w,d);break;case 13:Hn(v,w,d),d&&T&4&&T1(v,w);break;case 22:w.memoizedState===null&&Hn(v,w,d),hu(w,w.return);break;case 30:break;default:Hn(v,w,d)}l=l.sibling}}function n0(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Qc(d))}function o0(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Qc(o))}function Da(o,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)P1(o,l,d,m),l=l.sibling}function P1(o,l,d,m){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Da(o,l,d,m),v&2048&&fu(9,l);break;case 1:Da(o,l,d,m);break;case 3:Da(o,l,d,m),v&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Qc(o)));break;case 12:if(v&2048){Da(o,l,d,m),o=l.stateNode;try{var w=l.memoizedProps,T=w.id,O=w.onPostCommit;typeof O=="function"&&O(T,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(H){Bt(l,l.return,H)}}else Da(o,l,d,m);break;case 13:Da(o,l,d,m);break;case 23:break;case 22:w=l.stateNode,T=l.alternate,l.memoizedState!==null?w._visibility&2?Da(o,l,d,m):mu(o,l):w._visibility&2?Da(o,l,d,m):(w._visibility|=2,pl(o,l,d,m,(l.subtreeFlags&10256)!==0)),v&2048&&n0(T,l);break;case 24:Da(o,l,d,m),v&2048&&o0(l.alternate,l);break;default:Da(o,l,d,m)}}function pl(o,l,d,m,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,T=l,O=d,H=m,re=T.flags;switch(T.tag){case 0:case 11:case 15:pl(w,T,O,H,v),fu(8,T);break;case 23:break;case 22:var he=T.stateNode;T.memoizedState!==null?he._visibility&2?pl(w,T,O,H,v):mu(w,T):(he._visibility|=2,pl(w,T,O,H,v)),v&&re&2048&&n0(T.alternate,T);break;case 24:pl(w,T,O,H,v),v&&re&2048&&o0(T.alternate,T);break;default:pl(w,T,O,H,v)}l=l.sibling}}function mu(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,m=l,v=m.flags;switch(m.tag){case 22:mu(d,m),v&2048&&n0(m.alternate,m);break;case 24:mu(d,m),v&2048&&o0(m.alternate,m);break;default:mu(d,m)}l=l.sibling}}var pu=8192;function gl(o){if(o.subtreeFlags&pu)for(o=o.child;o!==null;)D1(o),o=o.sibling}function D1(o){switch(o.tag){case 26:gl(o),o.flags&pu&&o.memoizedState!==null&&I3(da,o.memoizedState,o.memoizedProps);break;case 5:gl(o);break;case 3:case 4:var l=da;da=Yf(o.stateNode.containerInfo),gl(o),da=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=pu,pu=16777216,gl(o),pu=l):gl(o));break;default:gl(o)}}function O1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function gu(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Es=m,L1(m,o)}O1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)$1(o),o=o.sibling}function $1(o){switch(o.tag){case 0:case 11:case 15:gu(o),o.flags&2048&&qn(9,o,o.return);break;case 3:gu(o);break;case 12:gu(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,$f(o)):gu(o);break;default:gu(o)}}function $f(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Es=m,L1(m,o)}O1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:qn(8,l,l.return),$f(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,$f(l));break;default:$f(l)}o=o.sibling}}function L1(o,l){for(;Es!==null;){var d=Es;switch(d.tag){case 0:case 11:case 15:qn(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Qc(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Es=m;else e:for(d=o;Es!==null;){m=Es;var v=m.sibling,w=m.return;if(A1(m),m===d){Es=null;break e}if(v!==null){v.return=w,Es=v;break e}Es=w}}}var e3={getCacheForType:function(o){var l=Gs(bs),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},t3=typeof WeakMap=="function"?WeakMap:Map,Mt=0,qt=null,gt=null,wt=0,Pt=0,Tr=null,Gn=!1,xl=!1,i0=!1,xn=0,ts=0,Xn=0,oi=0,l0=0,Kr=0,vl=0,xu=null,xr=null,c0=!1,u0=0,Lf=1/0,If=null,Yn=null,Is=0,Kn=null,yl=null,bl=0,d0=0,f0=null,I1=null,vu=0,h0=null;function Rr(){if((Mt&2)!==0&&wt!==0)return wt&-wt;if(k.T!==null){var o=il;return o!==0?o:b0()}return Fo()}function B1(){Kr===0&&(Kr=(wt&536870912)===0||kt?rs():536870912);var o=Yr.current;return o!==null&&(o.flags|=32),Kr}function Mr(o,l,d){(o===qt&&(Pt===2||Pt===9)||o.cancelPendingCommit!==null)&&(wl(o,0),Wn(o,wt,Kr,!1)),hr(o,d),((Mt&2)===0||o!==qt)&&(o===qt&&((Mt&2)===0&&(oi|=d),ts===4&&Wn(o,wt,Kr,!1)),Oa(o))}function V1(o,l,d){if((Mt&6)!==0)throw Error(r(327));var m=!d&&(l&124)===0&&(l&o.expiredLanes)===0||la(o,l),v=m?a3(o,l):g0(o,l,!0),w=m;do{if(v===0){xl&&!m&&Wn(o,l,0,!1);break}else{if(d=o.current.alternate,w&&!s3(d)){v=g0(o,l,!1),w=!1;continue}if(v===2){if(w=l,o.errorRecoveryDisabledLanes&w)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var O=o;v=xu;var H=O.current.memoizedState.isDehydrated;if(H&&(wl(O,T).flags|=256),T=g0(O,T,!1),T!==2){if(i0&&!H){O.errorRecoveryDisabledLanes|=w,oi|=w,v=4;break e}w=xr,xr=v,w!==null&&(xr===null?xr=w:xr.push.apply(xr,w))}v=T}if(w=!1,v!==2)continue}}if(v===1){wl(o,0),Wn(o,l,0,!0);break}e:{switch(m=o,w=v,w){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Wn(m,l,Kr,!Gn);break e;case 2:xr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(v=u0+300-ke(),10<v)){if(Wn(m,l,Kr,!Gn),ar(m,0,!0)!==0)break e;m.timeoutHandle=pj(z1.bind(null,m,d,xr,If,c0,l,Kr,oi,vl,Gn,w,2,-0,0),v);break e}z1(m,d,xr,If,c0,l,Kr,oi,vl,Gn,w,0,-0,0)}}break}while(!0);Oa(o)}function z1(o,l,d,m,v,w,T,O,H,re,he,xe,ne,oe){if(o.timeoutHandle=-1,xe=l.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:L3},D1(l),xe=B3(),xe!==null)){o.cancelPendingCommit=xe(Y1.bind(null,o,l,w,d,m,v,T,O,H,he,1,ne,oe)),Wn(o,w,T,!re);return}Y1(o,l,w,d,m,v,T,O,H)}function s3(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],w=v.getSnapshot;v=v.value;try{if(!Cr(w(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wn(o,l,d,m){l&=~l0,l&=~oi,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var v=l;0<v;){var w=31-jt(v),T=1<<w;m[w]=-1,v&=~T}d!==0&&Je(o,d,l)}function Bf(){return(Mt&6)===0?(yu(0),!1):!0}function m0(){if(gt!==null){if(Pt===0)var o=gt.return;else o=gt,cn=ei=null,Rg(o),hl=null,cu=0,o=gt;for(;o!==null;)b1(o.alternate,o),o=o.return;gt=null}}function wl(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,b3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),m0(),qt=o,gt=d=nn(o.current,null),wt=l,Pt=0,Tr=null,Gn=!1,xl=la(o,l),i0=!1,vl=Kr=l0=oi=Xn=ts=0,xr=xu=null,c0=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var v=31-jt(m),w=1<<v;l|=o[v],m&=~w}return xn=l,of(),d}function U1(o,l){ut=null,k.H=Cf,l===eu||l===gf?(l=n_(),Pt=3):l===s_?(l=n_(),Pt=4):Pt=l===o1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Tr=l,gt===null&&(ts=1,Rf(o,Fr(l,o.current)))}function q1(){var o=k.H;return k.H=Cf,o===null?Cf:o}function F1(){var o=k.A;return k.A=e3,o}function p0(){ts=4,Gn||(wt&4194048)!==wt&&Yr.current!==null||(xl=!0),(Xn&134217727)===0&&(oi&134217727)===0||qt===null||Wn(qt,wt,Kr,!1)}function g0(o,l,d){var m=Mt;Mt|=2;var v=q1(),w=F1();(qt!==o||wt!==l)&&(If=null,wl(o,l)),l=!1;var T=ts;e:do try{if(Pt!==0&&gt!==null){var O=gt,H=Tr;switch(Pt){case 8:m0(),T=6;break e;case 3:case 2:case 9:case 6:Yr.current===null&&(l=!0);var re=Pt;if(Pt=0,Tr=null,_l(o,O,H,re),d&&xl){T=0;break e}break;default:re=Pt,Pt=0,Tr=null,_l(o,O,H,re)}}r3(),T=ts;break}catch(he){U1(o,he)}while(!0);return l&&o.shellSuspendCounter++,cn=ei=null,Mt=m,k.H=v,k.A=w,gt===null&&(qt=null,wt=0,of()),T}function r3(){for(;gt!==null;)H1(gt)}function a3(o,l){var d=Mt;Mt|=2;var m=q1(),v=F1();qt!==o||wt!==l?(If=null,Lf=ke()+500,wl(o,l)):xl=la(o,l);e:do try{if(Pt!==0&&gt!==null){l=gt;var w=Tr;t:switch(Pt){case 1:Pt=0,Tr=null,_l(o,l,w,1);break;case 2:case 9:if(r_(w)){Pt=0,Tr=null,G1(l);break}l=function(){Pt!==2&&Pt!==9||qt!==o||(Pt=7),Oa(o)},w.then(l,l);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:r_(w)?(Pt=0,Tr=null,G1(l)):(Pt=0,Tr=null,_l(o,l,w,7));break;case 5:var T=null;switch(gt.tag){case 26:T=gt.memoizedState;case 5:case 27:var O=gt;if(!T||Ej(T)){Pt=0,Tr=null;var H=O.sibling;if(H!==null)gt=H;else{var re=O.return;re!==null?(gt=re,Vf(re)):gt=null}break t}}Pt=0,Tr=null,_l(o,l,w,5);break;case 6:Pt=0,Tr=null,_l(o,l,w,6);break;case 8:m0(),ts=6;break e;default:throw Error(r(462))}}n3();break}catch(he){U1(o,he)}while(!0);return cn=ei=null,k.H=m,k.A=v,Mt=d,gt!==null?0:(qt=null,wt=0,of(),ts)}function n3(){for(;gt!==null&&!ve();)H1(gt)}function H1(o){var l=v1(o.alternate,o,xn);o.memoizedProps=o.pendingProps,l===null?Vf(o):gt=l}function G1(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=f1(d,l,l.pendingProps,l.type,void 0,wt);break;case 11:l=f1(d,l,l.pendingProps,l.type.render,l.ref,wt);break;case 5:Rg(l);default:b1(d,l),l=gt=Xw(l,xn),l=v1(d,l,xn)}o.memoizedProps=o.pendingProps,l===null?Vf(o):gt=l}function _l(o,l,d,m){cn=ei=null,Rg(l),hl=null,cu=0;var v=l.return;try{if(Y5(o,v,l,d,wt)){ts=1,Rf(o,Fr(d,o.current)),gt=null;return}}catch(w){if(v!==null)throw gt=v,w;ts=1,Rf(o,Fr(d,o.current)),gt=null;return}l.flags&32768?(kt||m===1?o=!0:xl||(wt&536870912)!==0?o=!1:(Gn=o=!0,(m===2||m===9||m===3||m===6)&&(m=Yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),X1(l,o)):Vf(l)}function Vf(o){var l=o;do{if((l.flags&32768)!==0){X1(l,Gn);return}o=l.return;var d=W5(l.alternate,l,xn);if(d!==null){gt=d;return}if(l=l.sibling,l!==null){gt=l;return}gt=l=o}while(l!==null);ts===0&&(ts=5)}function X1(o,l){do{var d=Z5(o.alternate,o);if(d!==null){d.flags&=32767,gt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){gt=o;return}gt=o=d}while(o!==null);ts=6,gt=null}function Y1(o,l,d,m,v,w,T,O,H){o.cancelPendingCommit=null;do zf();while(Is!==0);if((Mt&6)!==0)throw Error(r(327));if(l!==null){if(l===o.current)throw Error(r(177));if(w=l.lanes|l.childLanes,w|=og,ca(o,d,w,T,O,H),o===qt&&(gt=qt=null,wt=0),yl=l,Kn=o,bl=d,d0=w,f0=v,I1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,c3(q,function(){return J1(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=k.T,k.T=null,v=B.p,B.p=2,T=Mt,Mt|=4;try{Q5(o,l,d)}finally{Mt=T,B.p=v,k.T=m}}Is=1,K1(),W1(),Z1()}}function K1(){if(Is===1){Is=0;var o=Kn,l=yl,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=k.T,k.T=null;var m=B.p;B.p=2;var v=Mt;Mt|=4;try{R1(l,o);var w=A0,T=Lw(o.containerInfo),O=w.focusedElem,H=w.selectionRange;if(T!==O&&O&&O.ownerDocument&&$w(O.ownerDocument.documentElement,O)){if(H!==null&&tg(O)){var re=H.start,he=H.end;if(he===void 0&&(he=re),"selectionStart"in O)O.selectionStart=re,O.selectionEnd=Math.min(he,O.value.length);else{var xe=O.ownerDocument||document,ne=xe&&xe.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),et=O.textContent.length,Ke=Math.min(H.start,et),It=H.end===void 0?Ke:Math.min(H.end,et);!oe.extend&&Ke>It&&(T=It,It=Ke,Ke=T);var J=Ow(O,Ke),Z=Ow(O,It);if(J&&Z&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==Z.node||oe.focusOffset!==Z.offset)){var te=xe.createRange();te.setStart(J.node,J.offset),oe.removeAllRanges(),Ke>It?(oe.addRange(te),oe.extend(Z.node,Z.offset)):(te.setEnd(Z.node,Z.offset),oe.addRange(te))}}}}for(xe=[],oe=O;oe=oe.parentNode;)oe.nodeType===1&&xe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<xe.length;O++){var pe=xe[O];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Jf=!!E0,A0=E0=null}finally{Mt=v,B.p=m,k.T=d}}o.current=l,Is=2}}function W1(){if(Is===2){Is=0;var o=Kn,l=yl,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=k.T,k.T=null;var m=B.p;B.p=2;var v=Mt;Mt|=4;try{E1(o,l.alternate,l)}finally{Mt=v,B.p=m,k.T=d}}Is=3}}function Z1(){if(Is===4||Is===3){Is=0,Re();var o=Kn,l=yl,d=bl,m=I1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Is=5:(Is=0,yl=Kn=null,Q1(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Yn=null),$s(d),l=l.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Me,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=k.T,v=B.p,B.p=2,k.T=null;try{for(var w=o.onRecoverableError,T=0;T<m.length;T++){var O=m[T];w(O.value,{componentStack:O.stack})}}finally{k.T=l,B.p=v}}(bl&3)!==0&&zf(),Oa(o),v=o.pendingLanes,(d&4194090)!==0&&(v&42)!==0?o===h0?vu++:(vu=0,h0=o):vu=0,yu(0)}}function Q1(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Qc(l)))}function zf(o){return K1(),W1(),Z1(),J1()}function J1(){if(Is!==5)return!1;var o=Kn,l=d0;d0=0;var d=$s(bl),m=k.T,v=B.p;try{B.p=32>d?32:d,k.T=null,d=f0,f0=null;var w=Kn,T=bl;if(Is=0,yl=Kn=null,bl=0,(Mt&6)!==0)throw Error(r(331));var O=Mt;if(Mt|=4,$1(w.current),P1(w,w.current,T,d),Mt=O,yu(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Me,w)}catch{}return!0}finally{B.p=v,k.T=m,Q1(o,l)}}function ej(o,l,d){l=Fr(d,l),l=Hg(o.stateNode,l,2),o=Bn(o,l,2),o!==null&&(hr(o,2),Oa(o))}function Bt(o,l,d){if(o.tag===3)ej(o,o,d);else for(;l!==null;){if(l.tag===3){ej(l,o,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Yn===null||!Yn.has(m))){o=Fr(d,o),d=a1(2),m=Bn(l,d,2),m!==null&&(n1(d,m,l,o),hr(m,2),Oa(m));break}}l=l.return}}function x0(o,l,d){var m=o.pingCache;if(m===null){m=o.pingCache=new t3;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(i0=!0,v.add(d),o=o3.bind(null,o,l,d),l.then(o,o))}function o3(o,l,d){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,qt===o&&(wt&d)===d&&(ts===4||ts===3&&(wt&62914560)===wt&&300>ke()-u0?(Mt&2)===0&&wl(o,0):l0|=d,vl===wt&&(vl=0)),Oa(o)}function tj(o,l){l===0&&(l=Ui()),o=rl(o,l),o!==null&&(hr(o,l),Oa(o))}function i3(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),tj(o,d)}function l3(o,l){var d=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(l),tj(o,d)}function c3(o,l){return Oe(o,l)}var Uf=null,jl=null,v0=!1,qf=!1,y0=!1,ii=0;function Oa(o){o!==jl&&o.next===null&&(jl===null?Uf=jl=o:jl=jl.next=o),qf=!0,v0||(v0=!0,d3())}function yu(o,l){if(!y0&&qf){y0=!0;do for(var d=!1,m=Uf;m!==null;){if(o!==0){var v=m.pendingLanes;if(v===0)var w=0;else{var T=m.suspendedLanes,O=m.pingedLanes;w=(1<<31-jt(42|o)+1)-1,w&=v&~(T&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,nj(m,w))}else w=wt,w=ar(m,m===qt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||la(m,w)||(d=!0,nj(m,w));m=m.next}while(d);y0=!1}}function u3(){sj()}function sj(){qf=v0=!1;var o=0;ii!==0&&(y3()&&(o=ii),ii=0);for(var l=ke(),d=null,m=Uf;m!==null;){var v=m.next,w=rj(m,l);w===0?(m.next=null,d===null?Uf=v:d.next=v,v===null&&(jl=d)):(d=m,(o!==0||(w&3)!==0)&&(qf=!0)),m=v}yu(o)}function rj(o,l){for(var d=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var T=31-jt(w),O=1<<T,H=v[T];H===-1?((O&d)===0||(O&m)!==0)&&(v[T]=fr(O,l)):H<=l&&(o.expiredLanes|=O),w&=~O}if(l=qt,d=wt,d=ar(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,d===0||o===l&&(Pt===2||Pt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Qe(m),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||la(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(m!==null&&Qe(m),$s(d)){case 2:case 8:d=I;break;case 32:d=q;break;case 268435456:d=ge;break;default:d=q}return m=aj.bind(null,o),d=Oe(d,m),o.callbackPriority=l,o.callbackNode=d,l}return m!==null&&m!==null&&Qe(m),o.callbackPriority=2,o.callbackNode=null,2}function aj(o,l){if(Is!==0&&Is!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(zf()&&o.callbackNode!==d)return null;var m=wt;return m=ar(o,o===qt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(V1(o,m,l),rj(o,ke()),o.callbackNode!=null&&o.callbackNode===d?aj.bind(null,o):null)}function nj(o,l){if(zf())return null;V1(o,l,!0)}function d3(){w3(function(){(Mt&6)!==0?Oe(Ae,u3):sj()})}function b0(){return ii===0&&(ii=rs()),ii}function oj(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Jd(""+o)}function ij(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function f3(o,l,d,m,v){if(l==="submit"&&d&&d.stateNode===v){var w=oj((v[Ut]||null).action),T=m.submitter;T&&(l=(l=T[Ut]||null)?oj(l.formAction):T.getAttribute("formAction"),l!==null&&(w=l,T=null));var O=new rf("action","action",null,m,v);o.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ii!==0){var H=T?ij(v,T):new FormData(v);Vg(d,{pending:!0,data:H,method:v.method,action:w},null,H)}}else typeof w=="function"&&(O.preventDefault(),H=T?ij(v,T):new FormData(v),Vg(d,{pending:!0,data:H,method:v.method,action:w},w,H))},currentTarget:v}]})}}for(var w0=0;w0<ng.length;w0++){var _0=ng[w0],h3=_0.toLowerCase(),m3=_0[0].toUpperCase()+_0.slice(1);ua(h3,"on"+m3)}ua(Vw,"onAnimationEnd"),ua(zw,"onAnimationIteration"),ua(Uw,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(R5,"onTransitionRun"),ua(M5,"onTransitionStart"),ua(P5,"onTransitionCancel"),ua(qw,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),Ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ho("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bu));function lj(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],v=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var T=m.length-1;0<=T;T--){var O=m[T],H=O.instance,re=O.currentTarget;if(O=O.listener,H!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=re;try{w(v)}catch(he){Tf(he)}v.currentTarget=null,w=H}else for(T=0;T<m.length;T++){if(O=m[T],H=O.instance,re=O.currentTarget,O=O.listener,H!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=re;try{w(v)}catch(he){Tf(he)}v.currentTarget=null,w=H}}}}function xt(o,l){var d=l[qi];d===void 0&&(d=l[qi]=new Set);var m=o+"__bubble";d.has(m)||(cj(l,o,2,!1),d.add(m))}function j0(o,l,d){var m=0;l&&(m|=4),cj(d,o,m,l)}var Ff="_reactListening"+Math.random().toString(36).slice(2);function N0(o){if(!o[Ff]){o[Ff]=!0,sw.forEach(function(d){d!=="selectionchange"&&(p3.has(d)||j0(d,!1,o),j0(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Ff]||(l[Ff]=!0,j0("selectionchange",!1,l))}}function cj(o,l,d,m){switch(Pj(l)){case 2:var v=U3;break;case 8:v=q3;break;default:v=I0}d=v.bind(null,l,d,o),v=void 0,!Gp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(l,d,{capture:!0,passive:v}):o.addEventListener(l,d,!0):v!==void 0?o.addEventListener(l,d,{passive:v}):o.addEventListener(l,d,!1)}function S0(o,l,d,m,v){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var O=m.stateNode.containerInfo;if(O===v)break;if(T===4)for(T=m.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;O!==null;){if(T=Fi(O),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){m=w=T;continue e}O=O.parentNode}}m=m.return}gw(function(){var re=w,he=Fp(d),xe=[];e:{var ne=Fw.get(o);if(ne!==void 0){var oe=rf,et=o;switch(o){case"keypress":if(tf(d)===0)break e;case"keydown":case"keyup":oe=c5;break;case"focusin":et="focus",oe=Wp;break;case"focusout":et="blur",oe=Wp;break;case"beforeblur":case"afterblur":oe=Wp;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ZM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=f5;break;case Vw:case zw:case Uw:oe=e5;break;case qw:oe=m5;break;case"scroll":case"scrollend":oe=KM;break;case"wheel":oe=g5;break;case"copy":case"cut":case"paste":oe=s5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ww;break;case"toggle":case"beforetoggle":oe=v5}var Ke=(l&4)!==0,It=!Ke&&(o==="scroll"||o==="scrollend"),J=Ke?ne!==null?ne+"Capture":null:ne;Ke=[];for(var Z=re,te;Z!==null;){var pe=Z;if(te=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||te===null||J===null||(pe=Bc(Z,J),pe!=null&&Ke.push(wu(Z,pe,te))),It)break;Z=Z.return}0<Ke.length&&(ne=new oe(ne,et,null,d,he),xe.push({event:ne,listeners:Ke}))}}if((l&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",oe=o==="mouseout"||o==="pointerout",ne&&d!==qp&&(et=d.relatedTarget||d.fromElement)&&(Fi(et)||et[Ns]))break e;if((oe||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(et=d.relatedTarget||d.toElement,oe=re,et=et?Fi(et):null,et!==null&&(It=i(et),Ke=et.tag,et!==It||Ke!==5&&Ke!==27&&Ke!==6)&&(et=null)):(oe=null,et=re),oe!==et)){if(Ke=yw,pe="onMouseLeave",J="onMouseEnter",Z="mouse",(o==="pointerout"||o==="pointerover")&&(Ke=ww,pe="onPointerLeave",J="onPointerEnter",Z="pointer"),It=oe==null?ne:Ic(oe),te=et==null?ne:Ic(et),ne=new Ke(pe,Z+"leave",oe,d,he),ne.target=It,ne.relatedTarget=te,pe=null,Fi(he)===re&&(Ke=new Ke(J,Z+"enter",et,d,he),Ke.target=te,Ke.relatedTarget=It,pe=Ke),It=pe,oe&&et)t:{for(Ke=oe,J=et,Z=0,te=Ke;te;te=Nl(te))Z++;for(te=0,pe=J;pe;pe=Nl(pe))te++;for(;0<Z-te;)Ke=Nl(Ke),Z--;for(;0<te-Z;)J=Nl(J),te--;for(;Z--;){if(Ke===J||J!==null&&Ke===J.alternate)break t;Ke=Nl(Ke),J=Nl(J)}Ke=null}else Ke=null;oe!==null&&uj(xe,ne,oe,Ke,!1),et!==null&&It!==null&&uj(xe,It,et,Ke,!0)}}e:{if(ne=re?Ic(re):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var $e=kw;else if(Ew(ne))if(Tw)$e=A5;else{$e=C5;var ht=S5}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?re&&Up(re.elementType)&&($e=kw):$e=E5;if($e&&($e=$e(o,re))){Aw(xe,$e,d,he);break e}ht&&ht(o,ne,re),o==="focusout"&&re&&ne.type==="number"&&re.memoizedProps.value!=null&&zp(ne,"number",ne.value)}switch(ht=re?Ic(re):window,o){case"focusin":(Ew(ht)||ht.contentEditable==="true")&&(el=ht,sg=re,Xc=null);break;case"focusout":Xc=sg=el=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Iw(xe,d,he);break;case"selectionchange":if(T5)break;case"keydown":case"keyup":Iw(xe,d,he)}var Fe;if(Qp)e:{switch(o){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Ji?Sw(o,d)&&(We="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(We="onCompositionStart");We&&(_w&&d.locale!=="ko"&&(Ji||We!=="onCompositionStart"?We==="onCompositionEnd"&&Ji&&(Fe=xw()):(On=he,Xp="value"in On?On.value:On.textContent,Ji=!0)),ht=Hf(re,We),0<ht.length&&(We=new bw(We,o,null,d,he),xe.push({event:We,listeners:ht}),Fe?We.data=Fe:(Fe=Cw(d),Fe!==null&&(We.data=Fe)))),(Fe=b5?w5(o,d):_5(o,d))&&(We=Hf(re,"onBeforeInput"),0<We.length&&(ht=new bw("onBeforeInput","beforeinput",null,d,he),xe.push({event:ht,listeners:We}),ht.data=Fe)),f3(xe,o,re,d,he)}lj(xe,l)})}function wu(o,l,d){return{instance:o,listener:l,currentTarget:d}}function Hf(o,l){for(var d=l+"Capture",m=[];o!==null;){var v=o,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Bc(o,d),v!=null&&m.unshift(wu(o,v,w)),v=Bc(o,l),v!=null&&m.push(wu(o,v,w))),o.tag===3)return m;o=o.return}return[]}function Nl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function uj(o,l,d,m,v){for(var w=l._reactName,T=[];d!==null&&d!==m;){var O=d,H=O.alternate,re=O.stateNode;if(O=O.tag,H!==null&&H===m)break;O!==5&&O!==26&&O!==27||re===null||(H=re,v?(re=Bc(d,w),re!=null&&T.unshift(wu(d,re,H))):v||(re=Bc(d,w),re!=null&&T.push(wu(d,re,H)))),d=d.return}T.length!==0&&o.push({event:l,listeners:T})}var g3=/\r\n?/g,x3=/\u0000|\uFFFD/g;function dj(o){return(typeof o=="string"?o:""+o).replace(g3,`
`).replace(x3,"")}function fj(o,l){return l=dj(l),dj(o)===l}function Gf(){}function Lt(o,l,d,m,v,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Wi(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Wi(o,""+m);break;case"className":Wd(o,"class",m);break;case"tabIndex":Wd(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Wd(o,d,m);break;case"style":mw(o,m,w);break;case"data":if(l!=="object"){Wd(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Jd(""+m),o.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Lt(o,l,"name",v.name,v,null),Lt(o,l,"formEncType",v.formEncType,v,null),Lt(o,l,"formMethod",v.formMethod,v,null),Lt(o,l,"formTarget",v.formTarget,v,null)):(Lt(o,l,"encType",v.encType,v,null),Lt(o,l,"method",v.method,v,null),Lt(o,l,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Jd(""+m),o.setAttribute(d,m);break;case"onClick":m!=null&&(o.onclick=Gf);break;case"onScroll":m!=null&&xt("scroll",o);break;case"onScrollEnd":m!=null&&xt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=d}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}d=Jd(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""+m):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":m===!0?o.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,m):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(d,m):o.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(d):o.setAttribute(d,m);break;case"popover":xt("beforetoggle",o),xt("toggle",o),Kd(o,"popover",m);break;case"xlinkActuate":rn(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":rn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":rn(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":rn(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":rn(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":rn(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":rn(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":rn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":rn(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Kd(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=XM.get(d)||d,Kd(o,d,m))}}function C0(o,l,d,m,v,w){switch(d){case"style":mw(o,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=d}}break;case"children":typeof m=="string"?Wi(o,m):(typeof m=="number"||typeof m=="bigint")&&Wi(o,""+m);break;case"onScroll":m!=null&&xt("scroll",o);break;case"onScrollEnd":m!=null&&xt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Gf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rw.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),w=o[Ut]||null,w=w!=null?w[d]:null,typeof w=="function"&&o.removeEventListener(l,w,v),typeof m=="function")){typeof w!="function"&&w!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,m,v);break e}d in o?o[d]=m:m===!0?o.setAttribute(d,""):Kd(o,d,m)}}}function Bs(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",o),xt("load",o);var m=!1,v=!1,w;for(w in d)if(d.hasOwnProperty(w)){var T=d[w];if(T!=null)switch(w){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,w,T,d,null)}}v&&Lt(o,l,"srcSet",d.srcSet,d,null),m&&Lt(o,l,"src",d.src,d,null);return;case"input":xt("invalid",o);var O=w=T=v=null,H=null,re=null;for(m in d)if(d.hasOwnProperty(m)){var he=d[m];if(he!=null)switch(m){case"name":v=he;break;case"type":T=he;break;case"checked":H=he;break;case"defaultChecked":re=he;break;case"value":w=he;break;case"defaultValue":O=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,l));break;default:Lt(o,l,m,he,d,null)}}uw(o,w,O,H,re,T,v,!1),Zd(o);return;case"select":xt("invalid",o),m=T=w=null;for(v in d)if(d.hasOwnProperty(v)&&(O=d[v],O!=null))switch(v){case"value":w=O;break;case"defaultValue":T=O;break;case"multiple":m=O;default:Lt(o,l,v,O,d,null)}l=w,d=T,o.multiple=!!m,l!=null?Ki(o,!!m,l,!1):d!=null&&Ki(o,!!m,d,!0);return;case"textarea":xt("invalid",o),w=v=m=null;for(T in d)if(d.hasOwnProperty(T)&&(O=d[T],O!=null))switch(T){case"value":m=O;break;case"defaultValue":v=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:Lt(o,l,T,O,d,null)}fw(o,m,v,w),Zd(o);return;case"option":for(H in d)if(d.hasOwnProperty(H)&&(m=d[H],m!=null))switch(H){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Lt(o,l,H,m,d,null)}return;case"dialog":xt("beforetoggle",o),xt("toggle",o),xt("cancel",o),xt("close",o);break;case"iframe":case"object":xt("load",o);break;case"video":case"audio":for(m=0;m<bu.length;m++)xt(bu[m],o);break;case"image":xt("error",o),xt("load",o);break;case"details":xt("toggle",o);break;case"embed":case"source":case"link":xt("error",o),xt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in d)if(d.hasOwnProperty(re)&&(m=d[re],m!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Lt(o,l,re,m,d,null)}return;default:if(Up(l)){for(he in d)d.hasOwnProperty(he)&&(m=d[he],m!==void 0&&C0(o,l,he,m,d,void 0));return}}for(O in d)d.hasOwnProperty(O)&&(m=d[O],m!=null&&Lt(o,l,O,m,d,null))}function v3(o,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,T=null,O=null,H=null,re=null,he=null;for(oe in d){var xe=d[oe];if(d.hasOwnProperty(oe)&&xe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":H=xe;default:m.hasOwnProperty(oe)||Lt(o,l,oe,null,m,xe)}}for(var ne in m){var oe=m[ne];if(xe=d[ne],m.hasOwnProperty(ne)&&(oe!=null||xe!=null))switch(ne){case"type":w=oe;break;case"name":v=oe;break;case"checked":re=oe;break;case"defaultChecked":he=oe;break;case"value":T=oe;break;case"defaultValue":O=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,l));break;default:oe!==xe&&Lt(o,l,ne,oe,m,xe)}}Vp(o,T,O,H,re,he,w,v);return;case"select":oe=T=O=ne=null;for(w in d)if(H=d[w],d.hasOwnProperty(w)&&H!=null)switch(w){case"value":break;case"multiple":oe=H;default:m.hasOwnProperty(w)||Lt(o,l,w,null,m,H)}for(v in m)if(w=m[v],H=d[v],m.hasOwnProperty(v)&&(w!=null||H!=null))switch(v){case"value":ne=w;break;case"defaultValue":O=w;break;case"multiple":T=w;default:w!==H&&Lt(o,l,v,w,m,H)}l=O,d=T,m=oe,ne!=null?Ki(o,!!d,ne,!1):!!m!=!!d&&(l!=null?Ki(o,!!d,l,!0):Ki(o,!!d,d?[]:"",!1));return;case"textarea":oe=ne=null;for(O in d)if(v=d[O],d.hasOwnProperty(O)&&v!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Lt(o,l,O,null,m,v)}for(T in m)if(v=m[T],w=d[T],m.hasOwnProperty(T)&&(v!=null||w!=null))switch(T){case"value":ne=v;break;case"defaultValue":oe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==w&&Lt(o,l,T,v,m,w)}dw(o,ne,oe);return;case"option":for(var et in d)if(ne=d[et],d.hasOwnProperty(et)&&ne!=null&&!m.hasOwnProperty(et))switch(et){case"selected":o.selected=!1;break;default:Lt(o,l,et,null,m,ne)}for(H in m)if(ne=m[H],oe=d[H],m.hasOwnProperty(H)&&ne!==oe&&(ne!=null||oe!=null))switch(H){case"selected":o.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Lt(o,l,H,ne,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ke in d)ne=d[Ke],d.hasOwnProperty(Ke)&&ne!=null&&!m.hasOwnProperty(Ke)&&Lt(o,l,Ke,null,m,ne);for(re in m)if(ne=m[re],oe=d[re],m.hasOwnProperty(re)&&ne!==oe&&(ne!=null||oe!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,l));break;default:Lt(o,l,re,ne,m,oe)}return;default:if(Up(l)){for(var It in d)ne=d[It],d.hasOwnProperty(It)&&ne!==void 0&&!m.hasOwnProperty(It)&&C0(o,l,It,void 0,m,ne);for(he in m)ne=m[he],oe=d[he],!m.hasOwnProperty(he)||ne===oe||ne===void 0&&oe===void 0||C0(o,l,he,ne,m,oe);return}}for(var J in d)ne=d[J],d.hasOwnProperty(J)&&ne!=null&&!m.hasOwnProperty(J)&&Lt(o,l,J,null,m,ne);for(xe in m)ne=m[xe],oe=d[xe],!m.hasOwnProperty(xe)||ne===oe||ne==null&&oe==null||Lt(o,l,xe,ne,m,oe)}var E0=null,A0=null;function Xf(o){return o.nodeType===9?o:o.ownerDocument}function hj(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mj(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function k0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var T0=null;function y3(){var o=window.event;return o&&o.type==="popstate"?o===T0?!1:(T0=o,!0):(T0=null,!1)}var pj=typeof setTimeout=="function"?setTimeout:void 0,b3=typeof clearTimeout=="function"?clearTimeout:void 0,gj=typeof Promise=="function"?Promise:void 0,w3=typeof queueMicrotask=="function"?queueMicrotask:typeof gj<"u"?function(o){return gj.resolve(null).then(o).catch(_3)}:pj;function _3(o){setTimeout(function(){throw o})}function Zn(o){return o==="head"}function xj(o,l){var d=l,m=0,v=0;do{var w=d.nextSibling;if(o.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<m&&8>m){d=m;var T=o.ownerDocument;if(d&1&&_u(T.documentElement),d&2&&_u(T.body),d&4)for(d=T.head,_u(d),T=d.firstChild;T;){var O=T.nextSibling,H=T.nodeName;T[Lc]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=O}}if(v===0){o.removeChild(w),Tu(l);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=w}while(d);Tu(l)}function R0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":R0(d),$p(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function j3(o,l,d,m){for(;o.nodeType===1;){var v=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Lc])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=fa(o.nextSibling),o===null)break}return null}function N3(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=fa(o.nextSibling),o===null))return null;return o}function M0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function S3(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function fa(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var P0=null;function vj(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function yj(o,l,d){switch(l=Xf(d),o){case"html":if(o=l.documentElement,!o)throw Error(r(452));return o;case"head":if(o=l.head,!o)throw Error(r(453));return o;case"body":if(o=l.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function _u(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);$p(o)}var Wr=new Map,bj=new Set;function Yf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var vn=B.d;B.d={f:C3,r:E3,D:A3,C:k3,L:T3,m:R3,X:P3,S:M3,M:D3};function C3(){var o=vn.f(),l=Bf();return o||l}function E3(o){var l=Hi(o);l!==null&&l.tag===5&&l.type==="form"?V_(l):vn.r(o)}var Sl=typeof document>"u"?null:document;function wj(o,l,d){var m=Sl;if(m&&typeof l=="string"&&l){var v=qr(l);v='link[rel="'+o+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),bj.has(v)||(bj.add(v),o={rel:o,crossOrigin:d,href:l},m.querySelector(v)===null&&(l=m.createElement("link"),Bs(l,"link",o),Ss(l),m.head.appendChild(l)))}}function A3(o){vn.D(o),wj("dns-prefetch",o,null)}function k3(o,l){vn.C(o,l),wj("preconnect",o,l)}function T3(o,l,d){vn.L(o,l,d);var m=Sl;if(m&&o&&l){var v='link[rel="preload"][as="'+qr(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+qr(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+qr(d.imageSizes)+'"]')):v+='[href="'+qr(o)+'"]';var w=v;switch(l){case"style":w=Cl(o);break;case"script":w=El(o)}Wr.has(w)||(o=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),Wr.set(w,o),m.querySelector(v)!==null||l==="style"&&m.querySelector(ju(w))||l==="script"&&m.querySelector(Nu(w))||(l=m.createElement("link"),Bs(l,"link",o),Ss(l),m.head.appendChild(l)))}}function R3(o,l){vn.m(o,l);var d=Sl;if(d&&o){var m=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+qr(m)+'"][href="'+qr(o)+'"]',w=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=El(o)}if(!Wr.has(w)&&(o=p({rel:"modulepreload",href:o},l),Wr.set(w,o),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Nu(w)))return}m=d.createElement("link"),Bs(m,"link",o),Ss(m),d.head.appendChild(m)}}}function M3(o,l,d){vn.S(o,l,d);var m=Sl;if(m&&o){var v=Gi(m).hoistableStyles,w=Cl(o);l=l||"default";var T=v.get(w);if(!T){var O={loading:0,preload:null};if(T=m.querySelector(ju(w)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},d),(d=Wr.get(w))&&D0(o,d);var H=T=m.createElement("link");Ss(H),Bs(H,"link",o),H._p=new Promise(function(re,he){H.onload=re,H.onerror=he}),H.addEventListener("load",function(){O.loading|=1}),H.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Kf(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:O},v.set(w,T)}}}function P3(o,l){vn.X(o,l);var d=Sl;if(d&&o){var m=Gi(d).hoistableScripts,v=El(o),w=m.get(v);w||(w=d.querySelector(Nu(v)),w||(o=p({src:o,async:!0},l),(l=Wr.get(v))&&O0(o,l),w=d.createElement("script"),Ss(w),Bs(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function D3(o,l){vn.M(o,l);var d=Sl;if(d&&o){var m=Gi(d).hoistableScripts,v=El(o),w=m.get(v);w||(w=d.querySelector(Nu(v)),w||(o=p({src:o,async:!0,type:"module"},l),(l=Wr.get(v))&&O0(o,l),w=d.createElement("script"),Ss(w),Bs(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function _j(o,l,d,m){var v=(v=se.current)?Yf(v):null;if(!v)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Cl(d.href),d=Gi(v).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=Cl(d.href);var w=Gi(v).hoistableStyles,T=w.get(o);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,T),(w=v.querySelector(ju(o)))&&!w._p&&(T.instance=w,T.state.loading=5),Wr.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Wr.set(o,d),w||O3(v,o,d,T.state))),l&&m===null)throw Error(r(528,""));return T}if(l&&m!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=El(d),d=Gi(v).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Cl(o){return'href="'+qr(o)+'"'}function ju(o){return'link[rel="stylesheet"]['+o+"]"}function jj(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function O3(o,l,d,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Bs(l,"link",d),Ss(l),o.head.appendChild(l))}function El(o){return'[src="'+qr(o)+'"]'}function Nu(o){return"script[async]"+o}function Nj(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+qr(d.href)+'"]');if(m)return l.instance=m,Ss(m),m;var v=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Ss(m),Bs(m,"style",v),Kf(m,d.precedence,o),l.instance=m;case"stylesheet":v=Cl(d.href);var w=o.querySelector(ju(v));if(w)return l.state.loading|=4,l.instance=w,Ss(w),w;m=jj(d),(v=Wr.get(v))&&D0(m,v),w=(o.ownerDocument||o).createElement("link"),Ss(w);var T=w;return T._p=new Promise(function(O,H){T.onload=O,T.onerror=H}),Bs(w,"link",m),l.state.loading|=4,Kf(w,d.precedence,o),l.instance=w;case"script":return w=El(d.src),(v=o.querySelector(Nu(w)))?(l.instance=v,Ss(v),v):(m=d,(v=Wr.get(w))&&(m=p({},d),O0(m,v)),o=o.ownerDocument||o,v=o.createElement("script"),Ss(v),Bs(v,"link",m),o.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Kf(m,d.precedence,o));return l.instance}function Kf(o,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,w=v,T=0;T<m.length;T++){var O=m[T];if(O.dataset.precedence===l)w=O;else if(w!==v)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function D0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function O0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Wf=null;function Sj(o,l,d){if(Wf===null){var m=new Map,v=Wf=new Map;v.set(d,m)}else v=Wf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(o))return m;for(m.set(o,null),d=d.getElementsByTagName(o),v=0;v<d.length;v++){var w=d[v];if(!(w[Lc]||w[ns]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(l)||"";T=o+T;var O=m.get(T);O?O.push(w):m.set(T,[w])}}return m}function Cj(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function $3(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Ej(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var Su=null;function L3(){}function I3(o,l,d){if(Su===null)throw Error(r(475));var m=Su;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Cl(d.href),w=o.querySelector(ju(v));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=Zf.bind(m),o.then(m,m)),l.state.loading|=4,l.instance=w,Ss(w);return}w=o.ownerDocument||o,d=jj(d),(v=Wr.get(v))&&D0(d,v),w=w.createElement("link"),Ss(w);var T=w;T._p=new Promise(function(O,H){T.onload=O,T.onerror=H}),Bs(w,"link",d),l.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Zf.bind(m),o.addEventListener("load",l),o.addEventListener("error",l))}}function B3(){if(Su===null)throw Error(r(475));var o=Su;return o.stylesheets&&o.count===0&&$0(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&$0(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function Zf(){if(this.count--,this.count===0){if(this.stylesheets)$0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Qf=null;function $0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Qf=new Map,l.forEach(V3,o),Qf=null,Zf.call(o))}function V3(o,l){if(!(l.state.loading&4)){var d=Qf.get(o);if(d)var m=d.get(null);else{d=new Map,Qf.set(o,d);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var T=v[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}v=l.instance,T=v.getAttribute("data-precedence"),w=d.get(T)||m,w===m&&d.set(null,v),d.set(T,v),this.count++,m=Zf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),w?w.parentNode.insertBefore(v,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),l.state.loading|=4}}var Cu={$$typeof:S,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function z3(o,l,d,m,v,w,T,O){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Aj(o,l,d,m,v,w,T,O,H,re,he,xe){return o=new z3(o,l,d,T,O,H,re,xe),l=1,w===!0&&(l|=24),w=Er(3,null,null,l),o.current=w,w.stateNode=o,l=xg(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},wg(w),o}function kj(o){return o?(o=al,o):al}function Tj(o,l,d,m,v,w){v=kj(v),m.context===null?m.context=v:m.pendingContext=v,m=In(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=Bn(o,m,l),d!==null&&(Mr(d,o,l),su(d,o,l))}function Rj(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function L0(o,l){Rj(o,l),(o=o.alternate)&&Rj(o,l)}function Mj(o){if(o.tag===13){var l=rl(o,67108864);l!==null&&Mr(l,o,67108864),L0(o,67108864)}}var Jf=!0;function U3(o,l,d,m){var v=k.T;k.T=null;var w=B.p;try{B.p=2,I0(o,l,d,m)}finally{B.p=w,k.T=v}}function q3(o,l,d,m){var v=k.T;k.T=null;var w=B.p;try{B.p=8,I0(o,l,d,m)}finally{B.p=w,k.T=v}}function I0(o,l,d,m){if(Jf){var v=B0(m);if(v===null)S0(o,l,m,eh,d),Dj(o,m);else if(H3(v,o,l,d,m))m.stopPropagation();else if(Dj(o,m),l&4&&-1<F3.indexOf(o)){for(;v!==null;){var w=Hi(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=rr(w.pendingLanes);if(T!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var H=1<<31-jt(T);O.entanglements[1]|=H,T&=~H}Oa(w),(Mt&6)===0&&(Lf=ke()+500,yu(0))}}break;case 13:O=rl(w,2),O!==null&&Mr(O,w,2),Bf(),L0(w,2)}if(w=B0(m),w===null&&S0(o,l,m,eh,d),w===v)break;v=w}v!==null&&m.stopPropagation()}else S0(o,l,m,null,d)}}function B0(o){return o=Fp(o),V0(o)}var eh=null;function V0(o){if(eh=null,o=Fi(o),o!==null){var l=i(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=c(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return eh=o,null}function Pj(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Ae:return 2;case I:return 8;case q:case K:return 32;case ge:return 268435456;default:return 32}default:return 32}}var z0=!1,Qn=null,Jn=null,eo=null,Eu=new Map,Au=new Map,to=[],F3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dj(o,l){switch(o){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Eu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(l.pointerId)}}function ku(o,l,d,m,v,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[v]},l!==null&&(l=Hi(l),l!==null&&Mj(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function H3(o,l,d,m,v){switch(l){case"focusin":return Qn=ku(Qn,o,l,d,m,v),!0;case"dragenter":return Jn=ku(Jn,o,l,d,m,v),!0;case"mouseover":return eo=ku(eo,o,l,d,m,v),!0;case"pointerover":var w=v.pointerId;return Eu.set(w,ku(Eu.get(w)||null,o,l,d,m,v)),!0;case"gotpointercapture":return w=v.pointerId,Au.set(w,ku(Au.get(w)||null,o,l,d,m,v)),!0}return!1}function Oj(o){var l=Fi(o.target);if(l!==null){var d=i(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){o.blockedOn=l,ys(o.priority,function(){if(d.tag===13){var m=Rr();m=ms(m);var v=rl(d,m);v!==null&&Mr(v,d,m),L0(d,m)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function th(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=B0(o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);qp=m,d.target.dispatchEvent(m),qp=null}else return l=Hi(d),l!==null&&Mj(l),o.blockedOn=d,!1;l.shift()}return!0}function $j(o,l,d){th(o)&&d.delete(l)}function G3(){z0=!1,Qn!==null&&th(Qn)&&(Qn=null),Jn!==null&&th(Jn)&&(Jn=null),eo!==null&&th(eo)&&(eo=null),Eu.forEach($j),Au.forEach($j)}function sh(o,l){o.blockedOn===l&&(o.blockedOn=null,z0||(z0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,G3)))}var rh=null;function Lj(o){rh!==o&&(rh=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){rh===o&&(rh=null);for(var l=0;l<o.length;l+=3){var d=o[l],m=o[l+1],v=o[l+2];if(typeof m!="function"){if(V0(m||d)===null)continue;break}var w=Hi(d);w!==null&&(o.splice(l,3),l-=3,Vg(w,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Tu(o){function l(H){return sh(H,o)}Qn!==null&&sh(Qn,o),Jn!==null&&sh(Jn,o),eo!==null&&sh(eo,o),Eu.forEach(l),Au.forEach(l);for(var d=0;d<to.length;d++){var m=to[d];m.blockedOn===o&&(m.blockedOn=null)}for(;0<to.length&&(d=to[0],d.blockedOn===null);)Oj(d),d.blockedOn===null&&to.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],w=d[m+1],T=v[Ut]||null;if(typeof w=="function")T||Lj(d);else if(T){var O=null;if(w&&w.hasAttribute("formAction")){if(v=w,T=w[Ut]||null)O=T.formAction;else if(V0(v)!==null)continue}else O=T.action;typeof O=="function"?d[m+1]=O:(d.splice(m,3),m-=3),Lj(d)}}}function U0(o){this._internalRoot=o}ah.prototype.render=U0.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,m=Rr();Tj(d,m,o,l,null,null)},ah.prototype.unmount=U0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Tj(o.current,2,null,o,null,null),Bf(),l[Ns]=null}};function ah(o){this._internalRoot=o}ah.prototype.unstable_scheduleHydration=function(o){if(o){var l=Fo();o={blockedOn:null,target:o,priority:l};for(var d=0;d<to.length&&l!==0&&l<to[d].priority;d++);to.splice(d,0,o),d===0&&Oj(o)}};var Ij=e.version;if(Ij!=="19.1.0")throw Error(r(527,Ij,"19.1.0"));B.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var X3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Me=nh.inject(X3),Ye=nh}catch{}}return Mu.createRoot=function(o,l){if(!n(o))throw Error(r(299));var d=!1,m="",v=e1,w=t1,T=s1,O=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=Aj(o,1,!1,null,null,d,m,v,w,T,O,null),o[Ns]=l.current,N0(o),new U0(l)},Mu.hydrateRoot=function(o,l,d){if(!n(o))throw Error(r(299));var m=!1,v="",w=e1,T=t1,O=s1,H=null,re=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(H=d.unstable_transitionCallbacks),d.formState!==void 0&&(re=d.formState)),l=Aj(o,1,!0,l,d??null,m,v,w,T,O,H,re),l.context=kj(null),d=l.current,m=Rr(),m=ms(m),v=In(m),v.callback=null,Bn(d,v,m),d=m,l.current.lanes=d,hr(l,d),Oa(l),o[Ns]=l.current,N0(o),new ah(l)},Mu.version="19.1.0",Mu}var Yj;function oP(){if(Yj)return H0.exports;Yj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),H0.exports=nP(),H0.exports}var iP=oP();const lP=Vm(iP);var cP="Invariant failed";function Nn(t,e){if(!t)throw new Error(cP)}const ac=new WeakMap,Mh=new WeakMap,Yh={current:[]};let K0=!1,ad=0;const zu=new Set,oh=new Map;function A2(t){const e=Array.from(t).sort((s,r)=>s instanceof nc&&s.options.deps.includes(r)?1:r instanceof nc&&r.options.deps.includes(s)?-1:0);for(const s of e){if(Yh.current.includes(s))continue;Yh.current.push(s),s.recompute();const r=Mh.get(s);if(r)for(const n of r){const i=ac.get(n);i&&A2(i)}}}function uP(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function dP(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function k2(t){if(ad>0&&!oh.has(t)&&oh.set(t,t.prevState),zu.add(t),!(ad>0)&&!K0)try{for(K0=!0;zu.size>0;){const e=Array.from(zu);zu.clear();for(const s of e){const r=oh.get(s)??s.prevState;s.prevState=r,uP(s)}for(const s of e){const r=ac.get(s);r&&(Yh.current.push(s),A2(r))}for(const s of e){const r=ac.get(s);if(r)for(const n of r)dP(n)}}}finally{K0=!1,Yh.current=[],oh.clear()}}function Al(t){ad++;try{t()}finally{if(ad--,ad===0){const e=Array.from(zu)[0];e&&k2(e)}}}function fP(t){return typeof t=="function"}class Hx{constructor(e,s){this.listeners=new Set,this.subscribe=r=>{var n,i;this.listeners.add(r);const c=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,r,this);return()=>{this.listeners.delete(r),c==null||c()}},this.prevState=e,this.state=e,this.options=s}setState(e){var s,r,n;this.prevState=this.state,(s=this.options)!=null&&s.updateFn?this.state=this.options.updateFn(this.prevState)(e):fP(e)?this.state=e(this.prevState):this.state=e,(n=(r=this.options)==null?void 0:r.onUpdate)==null||n.call(r),k2(this)}}class nc{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const s=[],r=[];for(const n of this.options.deps)s.push(n.prevState),r.push(n.state);return this.lastSeenDepValues=r,{prevDepVals:s,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var s,r;this.prevState=this.state;const{prevDepVals:n,currDepVals:i,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:n,currDepVals:i,prevVal:c}),(r=(s=this.options).onUpdate)==null||r.call(s)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof nc&&i.checkIfRecalculationNeededDeeply();let s=!1;const r=this.lastSeenDepValues,{currDepVals:n}=this.getDepVals();for(let i=0;i<n.length;i++)if(n[i]!==r[i]){s=!0;break}s&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const s of this._subscriptions)s()}),this.subscribe=s=>{var r,n;this.listeners.add(s);const i=(n=(r=this.options).onSubscribe)==null?void 0:n.call(r,s,this);return()=>{this.listeners.delete(s),i==null||i()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const s of e)if(s instanceof nc)s.registerOnGraph(),this.registerOnGraph(s.options.deps);else if(s instanceof Hx){let r=ac.get(s);r||(r=new Set,ac.set(s,r)),r.add(this);let n=Mh.get(this);n||(n=new Set,Mh.set(this,n)),n.add(s)}}unregisterFromGraph(e=this.options.deps){for(const s of e)if(s instanceof nc)this.unregisterFromGraph(s.options.deps);else if(s instanceof Hx){const r=ac.get(s);r&&r.delete(this);const n=Mh.get(this);n&&n.delete(s)}}}const wo="__TSR_index",Kj="popstate",Wj="beforeunload";function T2(t){let e=t.getLocation();const s=new Set,r=c=>{e=t.getLocation(),s.forEach(u=>u({location:e,action:c}))},n=c=>{t.notifyOnIndexChange??!0?r(c):e=t.getLocation()},i=async({task:c,navigateOpts:u,...f})=>{var h,p;if((u==null?void 0:u.ignoreBlocker)??!1){c();return}const x=((h=t.getBlockers)==null?void 0:h.call(t))??[],b=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&x.length&&b)for(const _ of x){const j=xd(f.path,f.state);if(await _.blockerFn({currentLocation:e,nextLocation:j,action:f.type})){(p=t.onBlocked)==null||p.call(t);return}}c()};return{get location(){return e},get length(){return t.getLength()},subscribers:s,subscribe:c=>(s.add(c),()=>{s.delete(c)}),push:(c,u,f)=>{const h=e.state[wo];u=Gx(h+1,u),i({task:()=>{t.pushState(c,u),r({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:c,state:u})},replace:(c,u,f)=>{const h=e.state[wo];u=Gx(h,u),i({task:()=>{t.replaceState(c,u),r({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:c,state:u})},go:(c,u)=>{i({task:()=>{t.go(c),n({type:"GO",index:c})},navigateOpts:u,type:"GO"})},back:c=>{i({task:()=>{t.back((c==null?void 0:c.ignoreBlocker)??!1),n({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{i({task:()=>{t.forward((c==null?void 0:c.ignoreBlocker)??!1),n({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[wo]!==0,createHref:c=>t.createHref(c),block:c=>{var u;if(!t.setBlockers)return()=>{};const f=((u=t.getBlockers)==null?void 0:u.call(t))??[];return t.setBlockers([...f,c]),()=>{var h,p;const g=((h=t.getBlockers)==null?void 0:h.call(t))??[];(p=t.setBlockers)==null||p.call(t,g.filter(x=>x!==c))}},flush:()=>{var c;return(c=t.flush)==null?void 0:c.call(t)},destroy:()=>{var c;return(c=t.destroy)==null?void 0:c.call(t)},notify:r}}function Gx(t,e){return e||(e={}),{...e,key:fy(),[wo]:t}}function hP(t){var e;const s=typeof document<"u"?window:void 0,r=s.history.pushState,n=s.history.replaceState;let i=[];const c=()=>i,u=M=>i=M,f=M=>M,h=()=>xd(`${s.location.pathname}${s.location.search}${s.location.hash}`,s.history.state);(e=s.history.state)!=null&&e.key||s.history.replaceState({[wo]:0,key:fy()},"");let p=h(),g,x=!1,b=!1,_=!1,j=!1;const N=()=>p;let C,E;const S=()=>{C&&(A._ignoreSubscribers=!0,(C.isPush?s.history.pushState:s.history.replaceState)(C.state,"",C.href),A._ignoreSubscribers=!1,C=void 0,E=void 0,g=void 0)},P=(M,U,Y)=>{const V=f(U);E||(g=p),p=xd(U,Y),C={href:V,state:Y,isPush:(C==null?void 0:C.isPush)||M==="push"},E||(E=Promise.resolve().then(()=>S()))},R=M=>{p=h(),A.notify({type:M})},D=async()=>{if(b){b=!1;return}const M=h(),U=M.state[wo]-p.state[wo],Y=U===1,V=U===-1,F=!Y&&!V||x;x=!1;const Q=F?"GO":V?"BACK":"FORWARD",G=F?{type:"GO",index:U}:{type:V?"BACK":"FORWARD"};if(_)_=!1;else{const k=c();if(typeof document<"u"&&k.length){for(const B of k)if(await B.blockerFn({currentLocation:p,nextLocation:M,action:Q})){b=!0,s.history.go(1),A.notify(G);return}}}p=h(),A.notify(G)},$=M=>{if(j){j=!1;return}let U=!1;const Y=c();if(typeof document<"u"&&Y.length)for(const V of Y){const F=V.enableBeforeUnload??!0;if(F===!0){U=!0;break}if(typeof F=="function"&&F()===!0){U=!0;break}}if(U)return M.preventDefault(),M.returnValue=""},A=T2({getLocation:N,getLength:()=>s.history.length,pushState:(M,U)=>P("push",M,U),replaceState:(M,U)=>P("replace",M,U),back:M=>(M&&(_=!0),j=!0,s.history.back()),forward:M=>{M&&(_=!0),j=!0,s.history.forward()},go:M=>{x=!0,s.history.go(M)},createHref:M=>f(M),flush:S,destroy:()=>{s.history.pushState=r,s.history.replaceState=n,s.removeEventListener(Wj,$,{capture:!0}),s.removeEventListener(Kj,D)},onBlocked:()=>{g&&p!==g&&(p=g)},getBlockers:c,setBlockers:u,notifyOnIndexChange:!1});return s.addEventListener(Wj,$,{capture:!0}),s.addEventListener(Kj,D),s.history.pushState=function(...M){const U=r.apply(s.history,M);return A._ignoreSubscribers||R("PUSH"),U},s.history.replaceState=function(...M){const U=n.apply(s.history,M);return A._ignoreSubscribers||R("REPLACE"),U},A}function mP(t={initialEntries:["/"]}){const e=t.initialEntries;let s=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const r=e.map((i,c)=>Gx(c,void 0));return T2({getLocation:()=>xd(e[s],r[s]),getLength:()=>e.length,pushState:(i,c)=>{s<e.length-1&&(e.splice(s+1),r.splice(s+1)),r.push(c),e.push(i),s=Math.max(e.length-1,0)},replaceState:(i,c)=>{r[s]=c,e[s]=i},back:()=>{s=Math.max(s-1,0)},forward:()=>{s=Math.min(s+1,e.length-1)},go:i=>{s=Math.min(Math.max(s+i,0),e.length-1)},createHref:i=>i})}function xd(t,e){const s=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:t.length),hash:s>-1?t.substring(s):"",search:r>-1?t.slice(r,s===-1?void 0:s):"",state:e||{[wo]:0,key:fy()}}}function fy(){return(Math.random()+1).toString(36).substring(7)}function Kl(t){return t[t.length-1]}function pP(t){return typeof t=="function"}function yi(t,e){return pP(t)?t(e):t}function Xx(t,e){return e.reduce((s,r)=>(s[r]=t[r],s),{})}function Jr(t,e){if(t===e)return t;const s=e,r=Jj(t)&&Jj(s);if(r||Zj(t)&&Zj(s)){const n=r?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),i=n.length,c=r?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),u=c.length,f=r?[]:{};let h=0;for(let p=0;p<u;p++){const g=r?p:c[p];(!r&&n.includes(g)||r)&&t[g]===void 0&&s[g]===void 0?(f[g]=void 0,h++):(f[g]=Jr(t[g],s[g]),f[g]===t[g]&&t[g]!==void 0&&h++)}return i===u&&h===i?t:f}return s}function Zj(t){return Yx(t)&&Object.getOwnPropertyNames(t).length===Object.keys(t).length}function Yx(t){if(!Qj(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const s=e.prototype;return!(!Qj(s)||!s.hasOwnProperty("isPrototypeOf"))}function Qj(t){return Object.prototype.toString.call(t)==="[object Object]"}function Jj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function eN(t,e){let s=Object.keys(t);return e&&(s=s.filter(r=>t[r]!==void 0)),s}function oc(t,e,s){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Yx(t)&&Yx(e)){const r=(s==null?void 0:s.ignoreUndefined)??!0,n=eN(t,r),i=eN(e,r);return!(s!=null&&s.partial)&&n.length!==i.length?!1:i.every(c=>oc(t[c],e[c],s))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((r,n)=>!oc(r,e[n],s)):!1}function Hl(t){let e,s;const r=new Promise((n,i)=>{e=n,s=i});return r.status="pending",r.resolve=n=>{r.status="resolved",r.value=n,e(n),t==null||t(n)},r.reject=n=>{r.status="rejected",s(n)},r}function Sn(t){return zm(t.filter(e=>e!==void 0).join("/"))}function zm(t){return t.replace(/\/{2,}/g,"/")}function hy(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function bi(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function gP(t){return bi(hy(t))}function Kh(t,e){return t!=null&&t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function xP(t,e,s){return Kh(t,s)===Kh(e,s)}function vP({basepath:t,base:e,to:s,trailingSlash:r="never",caseSensitive:n}){var i,c;e=Wh(t,e,n),s=Wh(t,s,n);let u=dc(e);const f=dc(s);u.length>1&&((i=Kl(u))==null?void 0:i.value)==="/"&&u.pop(),f.forEach((p,g)=>{p.value==="/"?g?g===f.length-1&&u.push(p):u=[p]:p.value===".."?u.pop():p.value==="."||u.push(p)}),u.length>1&&(((c=Kl(u))==null?void 0:c.value)==="/"?r==="never"&&u.pop():r==="always"&&u.push({type:"pathname",value:"/"}));const h=Sn([t,...u.map(p=>p.value)]);return zm(h)}function dc(t){if(!t)return[];t=zm(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const s=t.split("/").filter(Boolean);return e.push(...s.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:r.includes("%25")?r.split("%25").map(n=>decodeURI(n)).join("%25"):decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function ih({path:t,params:e,leaveWildcards:s,leaveParams:r,decodeCharMap:n}){const i=dc(t);function c(p){const g=e[p],x=typeof g=="string";return["*","_splat"].includes(p)?x?encodeURI(g):g:x?yP(g,n):g}let u=!1;const f={},h=Sn(i.map(p=>{if(p.type==="wildcard"){f._splat=e._splat;const g=c("_splat");return s?`${p.value}${g??""}`:g}if(p.type==="param"){const g=p.value.substring(1);if(!u&&!(g in e)&&(u=!0),f[g]=e[g],r){const x=c(p.value);return`${p.value}${x??""}`}return c(g)??"undefined"}return p.value}));return{usedParams:f,interpolatedPath:h,isMissingParams:u}}function yP(t,e){let s=encodeURIComponent(t);if(e)for(const[r,n]of e)s=s.replaceAll(r,n);return s}function lh(t,e,s){const r=bP(t,e,s);if(!(s.to&&!r))return r??{}}function Wh(t,e,s=!1){const r=s?t:t.toLowerCase(),n=s?e:e.toLowerCase();switch(!0){case r==="/":return e;case n===r:return"";case e.length<t.length:return e;case n[r.length]!=="/":return e;case n.startsWith(r):return e.slice(t.length);default:return e}}function bP(t,e,s){if(t!=="/"&&!e.startsWith(t))return;e=Wh(t,e,s.caseSensitive);const r=Wh(t,`${s.to??"$"}`,s.caseSensitive),n=dc(e),i=dc(r);e.startsWith("/")||n.unshift({type:"pathname",value:"/"}),r.startsWith("/")||i.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let f=0;f<Math.max(n.length,i.length);f++){const h=n[f],p=i[f],g=f>=n.length-1,x=f>=i.length-1;if(p){if(p.type==="wildcard"){const b=decodeURI(Sn(n.slice(f).map(_=>_.value)));return c["*"]=b,c._splat=b,!0}if(p.type==="pathname"){if(p.value==="/"&&!(h!=null&&h.value))return!0;if(h){if(s.caseSensitive){if(p.value!==h.value)return!1}else if(p.value.toLowerCase()!==h.value.toLowerCase())return!1}}if(!h)return!1;if(p.type==="param"){if(h.value==="/")return!1;h.value.charAt(0)!=="$"&&(c[p.value.substring(1)]=decodeURIComponent(h.value))}}if(!g&&x)return c["**"]=Sn(n.slice(f+1).map(b=>b.value)),!!s.fuzzy&&(p==null?void 0:p.value)!=="/"}return!0})()?c:void 0}function ta(t){return!!(t!=null&&t.isNotFound)}function wP(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Zh="tsr-scroll-restoration-v1_3",_P=(t,e)=>{let s;return(...r)=>{s||(s=setTimeout(()=>{t(...r),s=null},e))}};function jP(){const t=wP();if(!t)return;const e=t.getItem(Zh);let s=e?JSON.parse(e):{};return{state:s,set:r=>(s=yi(r,s)||s,t.setItem(Zh,JSON.stringify(s)))}}const W0=jP(),Kx=t=>t.state.key||t.href;function NP(t){const e=[];let s;for(;s=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(s.children,t)+1})`),t=s;return`${e.join(" > ")}`.toLowerCase()}let Qh=!1;function R2(t,e,s,r,n){var i;let c;try{c=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const u=e||((i=window.history.state)==null?void 0:i.key),f=c[u];Qh=!0,(()=>{if(r&&f){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:s});else if(p){const x=document.querySelector(p);x&&(x.scrollLeft=g.scrollX,x.scrollTop=g.scrollY)}}return}const h=window.location.hash.split("#")[1];if(h){const p=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(h);g&&g.scrollIntoView(p)}return}["window",...(n==null?void 0:n.filter(p=>p!=="window"))??[]].forEach(p=>{const g=p==="window"?window:typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo({top:0,left:0,behavior:s})})})(),Qh=!1}function SP(t,e){if(W0===void 0||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),typeof document>"u"||t.isScrollRestorationSetup))return;t.isScrollRestorationSetup=!0,Qh=!1;const r=t.options.getScrollRestorationKey||Kx;window.history.scrollRestoration="manual";const n=i=>{if(Qh||!t.isScrollRestoring)return;let c="";if(i.target===document||i.target===window)c="window";else{const f=i.target.getAttribute("data-scroll-restoration-id");f?c=`[data-scroll-restoration-id="${f}"]`:c=NP(i.target)}const u=r(t.state.location);W0.set(f=>{const h=f[u]=f[u]||{},p=h[c]=h[c]||{};if(c==="window")p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(c){const g=document.querySelector(c);g&&(p.scrollX=g.scrollLeft||0,p.scrollY=g.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",_P(n,100),!0),t.subscribe("onRendered",i=>{const c=r(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}R2(Zh,c,t.options.scrollRestorationBehavior||void 0,t.isScrollRestoring||void 0,t.options.scrollToTopSelectors||void 0),t.isScrollRestoring&&W0.set(u=>(u[c]=u[c]||{},u))})}function CP(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const s=document.getElementById(t.state.location.hash);s&&s.scrollIntoView(e)}}}function EP(t,e){const s=Object.entries(t).flatMap(([n,i])=>Array.isArray(i)?i.map(c=>[n,String(c)]):[[n,String(i)]]);return""+new URLSearchParams(s).toString()}function Z0(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function AP(t,e){const s=t;return[...new URLSearchParams(s).entries()].reduce((i,[c,u])=>{const f=i[c];return f==null?i[c]=Z0(u):i[c]=Array.isArray(f)?[...f,Z0(u)]:[f,Z0(u)],i},{})}const kP=RP(JSON.parse),TP=MP(JSON.stringify,JSON.parse);function RP(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const s=AP(e);for(const r in s){const n=s[r];if(typeof n=="string")try{s[r]=t(n)}catch{}}return s}}function MP(t,e){function s(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof e=="function")try{return e(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(i=>{const c=r[i];typeof c>"u"||c===void 0?delete r[i]:r[i]=s(c)});const n=EP(r).toString();return n?`?${n}`:""}}const ga="__root__";function PP(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function hi(t){return!!(t!=null&&t.isRedirect)}function Q0(t){return!!(t!=null&&t.isRedirect)&&t.href}function Ni(t){const e=t.resolvedLocation,s=t.location,r=(e==null?void 0:e.pathname)!==s.pathname,n=(e==null?void 0:e.href)!==s.href,i=(e==null?void 0:e.hash)!==s.hash;return{fromLocation:e,toLocation:s,pathChanged:r,hrefChanged:n,hashChanged:i}}class DP{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=s=>s(),this.update=s=>{var r;s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||s.basepath&&s.basepath!==n.basepath)&&(s.basepath===void 0||s.basepath===""||s.basepath==="/"?this.basepath="/":this.basepath=`/${gP(s.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?mP({initialEntries:[this.basepath||"/"]}):hP()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Hx($P(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}}),SP(this)),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[s.id]=s);const r=c=>{c.forEach((u,f)=>{u.init({originalIndex:f,defaultSsr:this.options.defaultSsr});const h=this.routesById[u.id];if(Nn(!h,`Duplicate routes found with id: ${String(u.id)}`),this.routesById[u.id]=u,!u.isRoot&&u.path){const g=bi(u.fullPath);(!this.routesByPath[g]||u.fullPath.endsWith("/"))&&(this.routesByPath[g]=u)}const p=u.children;p!=null&&p.length&&r(p)})};r([this.routeTree]);const n=[];Object.values(this.routesById).forEach((c,u)=>{var f;if(c.isRoot||!c.path)return;const h=hy(c.fullPath),p=dc(h);for(;p.length>1&&((f=p[0])==null?void 0:f.value)==="/";)p.shift();const g=p.map(x=>x.value==="/"?.75:x.type==="param"?.5:x.type==="wildcard"?.25:1);n.push({child:c,trimmed:h,parsed:p,index:u,scores:g})}),this.flatRoutes=n.sort((c,u)=>{const f=Math.min(c.scores.length,u.scores.length);for(let h=0;h<f;h++)if(c.scores[h]!==u.scores[h])return u.scores[h]-c.scores[h];if(c.scores.length!==u.scores.length)return u.scores.length-c.scores.length;for(let h=0;h<f;h++)if(c.parsed[h].value!==u.parsed[h].value)return c.parsed[h].value>u.parsed[h].value?1:-1;return c.index-u.index}).map((c,u)=>(c.child.rank=u,c.child))},this.subscribe=(s,r)=>{const n={eventType:s,fn:r};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=s=>{this.subscribers.forEach(r=>{r.eventType===s.type&&r.fn(s)})},this.parseLocation=(s,r)=>{const n=({pathname:f,search:h,hash:p,state:g})=>{const x=this.options.parseSearch(h),b=this.options.stringifySearch(x);return{pathname:f,searchStr:b,search:Jr(s==null?void 0:s.search,x),hash:p.split("#").reverse()[0]??"",href:`${f}${b}${p}`,state:Jr(s==null?void 0:s.state,g)}},i=n(r??this.history.location),{__tempLocation:c,__tempKey:u}=i.state;if(c&&(!u||u===this.tempLocationKey)){const f=n(c);return f.state.key=i.state.key,delete f.state.__tempLocation,{...f,maskedLocation:i}}return i},this.resolvePathWithBase=(s,r)=>vP({basepath:this.basepath,base:s,to:zm(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(s,r,n)=>typeof s=="string"?this.matchRoutesInternal({pathname:s,search:r},n):this.matchRoutesInternal(s,r),this.getMatchedRoutes=(s,r)=>{let n={};const i=bi(s.pathname),c=p=>lh(this.basepath,i,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let u=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;u?n=c(u):u=this.flatRoutes.find(p=>{const g=c(p);return g?(n=g,!0):!1});let f=u||this.routesById[ga];const h=[f];for(;f.parentRoute;)f=f.parentRoute,h.unshift(f);return{matchedRoutes:h,routeParams:n,foundRoute:u}},this.cancelMatch=s=>{const r=this.getMatch(s);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var s;(s=this.state.pendingMatches)==null||s.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=s=>{const r=(i={},c)=>{var u,f,h,p,g,x,b;const _=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,j=i.from!=null?_.find(V=>lh(this.basepath,bi(V.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,N=(j==null?void 0:j.pathname)||this.latestLocation.pathname;Nn(i.from==null||j!=null,"Could not find match for from: "+i.from);const C=(u=this.state.pendingMatches)!=null&&u.length?(f=Kl(this.state.pendingMatches))==null?void 0:f.search:((h=Kl(_))==null?void 0:h.search)||this.latestLocation.search,E=c==null?void 0:c.matchedRoutes.filter(V=>_.find(F=>F.routeId===V.id));let S;if(i.to){const V=(j==null?void 0:j.fullPath)||((p=Kl(_))==null?void 0:p.fullPath)||this.latestLocation.pathname;S=this.resolvePathWithBase(V,`${i.to}`)}else{const V=this.routesById[(g=E==null?void 0:E.find(F=>{const Q=ih({path:F.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return Sn([this.basepath,Q])===N}))==null?void 0:g.id];S=this.resolvePathWithBase(N,(V==null?void 0:V.to)??N)}const P={...(x=Kl(_))==null?void 0:x.params};let R=(i.params??!0)===!0?P:{...P,...yi(i.params,P)};Object.keys(R).length>0&&(c==null||c.matchedRoutes.map(V=>{var F;return((F=V.options.params)==null?void 0:F.stringify)??V.options.stringifyParams}).filter(Boolean).forEach(V=>{R={...R,...V(R)}})),S=ih({path:S,params:R??{},leaveWildcards:!1,leaveParams:s.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let D=C;if(s._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let V={};c==null||c.matchedRoutes.forEach(F=>{try{F.options.validateSearch&&(V={...V,...J0(F.options.validateSearch,{...V,...D})??{}})}catch{}}),D=V}D=(V=>{const F=(c==null?void 0:c.matchedRoutes.reduce((k,B)=>{var z;const W=[];if("search"in B.options)(z=B.options.search)!=null&&z.middlewares&&W.push(...B.options.search.middlewares);else if(B.options.preSearchFilters||B.options.postSearchFilters){const L=({search:X,next:ae})=>{let ee=X;"preSearchFilters"in B.options&&B.options.preSearchFilters&&(ee=B.options.preSearchFilters.reduce((ie,se)=>se(ie),X));const le=ae(ee);return"postSearchFilters"in B.options&&B.options.postSearchFilters?B.options.postSearchFilters.reduce((ie,se)=>se(ie),le):le};W.push(L)}if(s._includeValidateSearch&&B.options.validateSearch){const L=({search:X,next:ae})=>{const ee=ae(X);try{return{...ee,...J0(B.options.validateSearch,ee)??{}}}catch{return ee}};W.push(L)}return k.concat(W)},[]))??[],Q=({search:k})=>i.search?i.search===!0?k:yi(i.search,k):{};F.push(Q);const G=(k,B)=>{if(k>=F.length)return B;const z=F[k];return z({search:B,next:L=>G(k+1,L)})};return G(0,V)})(D),D=Jr(C,D);const A=this.options.stringifySearch(D),M=i.hash===!0?this.latestLocation.hash:i.hash?yi(i.hash,this.latestLocation.hash):void 0,U=M?`#${M}`:"";let Y=i.state===!0?this.latestLocation.state:i.state?yi(i.state,this.latestLocation.state):{};return Y=Jr(this.latestLocation.state,Y),{pathname:S,search:D,searchStr:A,state:Y,hash:M??"",href:`${S}${A}${U}`,unmaskOnReload:i.unmaskOnReload}},n=(i={},c)=>{var u;const f=r(i);let h=c?r(c):void 0;if(!h){let x={};const b=(u=this.options.routeMasks)==null?void 0:u.find(_=>{const j=lh(this.basepath,f.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return j?(x=j,!0):!1});if(b){const{from:_,...j}=b;c={...Xx(s,["from"]),...j,params:x},h=r(c)}}const p=this.getMatchedRoutes(f,i),g=r(i,p);if(h){const x=this.getMatchedRoutes(h,c),b=r(c,x);g.maskedLocation=b}return g};return s.mask?n(s,{...Xx(s,["from"]),...s.mask}):n(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:r,...n})=>{const i=()=>{const f=["key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(p=>{n.state[p]=this.latestLocation.state[p]});const h=oc(n.state,this.latestLocation.state);return f.forEach(p=>{delete n.state[p]}),h},c=this.latestLocation.href===n.href,u=this.commitLocationPromise;if(this.commitLocationPromise=Hl(()=>{u==null||u.resolve()}),c&&i())this.load();else{let{maskedLocation:f,hashScrollIntoView:h,...p}=n;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=s,this.history[n.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:r})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:r,hashScrollIntoView:n,viewTransition:i,ignoreBlocker:c,href:u,...f}={})=>{if(u){const p=this.history.location.state.__TSR_index,g=xd(u,{__TSR_index:s?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const h=this.buildLocation({...f,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:i,replace:s,resetScroll:r,hashScrollIntoView:n,ignoreBlocker:c})},this.navigate=({to:s,reloadDocument:r,href:n,...i})=>{if(r){if(!n){const c=this.buildLocation({to:s,...i});n=this.history.createHref(c.href)}i.replace?window.location.replace(n):window.location.href=n;return}return this.buildAndCommitLocation({...i,href:n,to:s})},this.load=async s=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,n,i;for(i=new Promise(c=>{this.startTransition(async()=>{var u;try{const f=this.latestLocation,h=this.state.resolvedLocation;this.cancelMatches();let p;Al(()=>{p=this.matchRoutes(f),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:f,pendingMatches:p,cachedMatches:g.cachedMatches.filter(x=>!p.find(b=>b.id===x.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...Ni({resolvedLocation:h,location:f})}),this.emit({type:"onBeforeLoad",...Ni({resolvedLocation:h,location:f})}),await this.loadMatches({sync:s==null?void 0:s.sync,matches:p,location:f,onReady:async()=>{this.startViewTransition(async()=>{let g,x,b;Al(()=>{this.__store.setState(_=>{const j=_.matches,N=_.pendingMatches||_.matches;return g=j.filter(C=>!N.find(E=>E.id===C.id)),x=N.filter(C=>!j.find(E=>E.id===C.id)),b=j.filter(C=>N.find(E=>E.id===C.id)),{..._,isLoading:!1,loadedAt:Date.now(),matches:N,pendingMatches:void 0,cachedMatches:[..._.cachedMatches,...g.filter(C=>C.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[x,"onEnter"],[b,"onStay"]].forEach(([_,j])=>{_.forEach(N=>{var C,E;(E=(C=this.looseRoutesById[N.routeId].options)[j])==null||E.call(C,N)})})})}})}catch(f){Q0(f)?(r=f,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):ta(f)&&(n=f),this.__store.setState(h=>({...h,statusCode:r?r.statusCode:n?404:h.matches.some(p=>p.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===i&&((u=this.commitLocationPromise)==null||u.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=s=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let n;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,c=this.state.resolvedLocation,u=typeof r.types=="function"?r.types(Ni({resolvedLocation:c,location:i})):r.types;n={update:s,types:u}}else n=s;document.startViewTransition(n)}else s()},this.updateMatch=(s,r)=>{var n;let i;const c=(n=this.state.pendingMatches)==null?void 0:n.find(p=>p.id===s),u=this.state.matches.find(p=>p.id===s),f=this.state.cachedMatches.find(p=>p.id===s),h=c?"pendingMatches":u?"matches":f?"cachedMatches":"";return h&&this.__store.setState(p=>{var g;return{...p,[h]:(g=p[h])==null?void 0:g.map(x=>x.id===s?i=r(x):x)}}),i},this.getMatch=s=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===s),this.loadMatches=async({location:s,matches:r,preload:n,onReady:i,updateMatch:c=this.updateMatch,sync:u})=>{let f,h=!1;const p=async()=>{h||(h=!0,await(i==null?void 0:i()))},g=b=>!!(n&&!this.state.matches.find(_=>_.id===b)),x=(b,_)=>{var j,N,C,E;if(Q0(_)&&!_.reloadDocument)throw _;if(hi(_)||ta(_)){if(c(b.id,S=>({...S,status:hi(_)?"redirected":ta(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=b.routeId),(j=b.beforeLoadPromise)==null||j.resolve(),(N=b.loaderPromise)==null||N.resolve(),(C=b.loadPromise)==null||C.resolve(),hi(_))throw h=!0,_=this.resolveRedirect({..._,_fromLocation:s}),_;if(ta(_))throw this._handleNotFound(r,_,{updateMatch:c}),(E=this.serverSsr)==null||E.onMatchSettled({router:this,match:this.getMatch(b.id)}),_}};try{await new Promise((b,_)=>{(async()=>{var j,N,C,E;try{const S=(D,$,A)=>{var M,U;const{id:Y,routeId:V}=r[D],F=this.looseRoutesById[V];if($ instanceof Promise)throw $;$.routerCode=A,f=f??D,x(this.getMatch(Y),$);try{(U=(M=F.options).onError)==null||U.call(M,$)}catch(Q){$=Q,x(this.getMatch(Y),$)}c(Y,Q=>{var G,k;return(G=Q.beforeLoadPromise)==null||G.resolve(),(k=Q.loadPromise)==null||k.resolve(),{...Q,error:$,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:$,routeId:A}]of r.entries()){const M=this.getMatch($),U=(j=r[D-1])==null?void 0:j.id,Y=this.looseRoutesById[A],V=Y.options.pendingMs??this.options.defaultPendingMs,F=!!(i&&!this.isServer&&!g($)&&(Y.options.loader||Y.options.beforeLoad||tN(Y))&&typeof V=="number"&&V!==1/0&&(Y.options.pendingComponent??((N=this.options)==null?void 0:N.defaultPendingComponent)));let Q=!0;if((M.beforeLoadPromise||M.loaderPromise)&&(F&&setTimeout(()=>{try{p()}catch{}},V),await M.beforeLoadPromise,Q=this.getMatch($).status!=="success"),Q){try{c($,ue=>{const ce=ue.loadPromise;return{...ue,loadPromise:Hl(()=>{ce==null||ce.resolve()}),beforeLoadPromise:Hl()}});const G=new AbortController;let k;F&&(k=setTimeout(()=>{try{p()}catch{}},V));const{paramsError:B,searchError:z}=this.getMatch($);B&&S(D,B,"PARSE_PARAMS"),z&&S(D,z,"VALIDATE_SEARCH");const W=()=>U?this.getMatch(U).context:this.options.context??{};c($,ue=>({...ue,isFetching:"beforeLoad",fetchCount:ue.fetchCount+1,abortController:G,pendingTimeout:k,context:{...W(),...ue.__routeContext}}));const{search:L,params:X,context:ae,cause:ee}=this.getMatch($),le=g($),ie={search:L,abortController:G,params:X,preload:le,context:ae,location:s,navigate:ue=>this.navigate({...ue,_fromLocation:s}),buildLocation:this.buildLocation,cause:le?"preload":ee,matches:r},se=await((E=(C=Y.options).beforeLoad)==null?void 0:E.call(C,ie))??{};(hi(se)||ta(se))&&S(D,se,"BEFORE_LOAD"),c($,ue=>({...ue,__beforeLoadContext:se,context:{...W(),...ue.__routeContext,...se},abortController:G}))}catch(G){S(D,G,"BEFORE_LOAD")}c($,G=>{var k;return(k=G.beforeLoadPromise)==null||k.resolve(),{...G,beforeLoadPromise:void 0,isFetching:!1}})}}const P=r.slice(0,f),R=[];P.forEach(({id:D,routeId:$},A)=>{R.push((async()=>{const{loaderPromise:M}=this.getMatch(D);let U=!1,Y=!1;if(M){await M;const V=this.getMatch(D);V.error&&x(V,V.error)}else{const V=R[A-1],F=this.looseRoutesById[$],Q=()=>{const{params:le,loaderDeps:ie,abortController:se,context:ue,cause:ce}=this.getMatch(D),be=g(D);return{params:le,deps:ie,preload:!!be,parentMatchPromise:V,abortController:se,context:ue,location:s,navigate:Ne=>this.navigate({...Ne,_fromLocation:s}),cause:be?"preload":ce,route:F}},G=Date.now()-this.getMatch(D).updatedAt,k=g(D),B=k?F.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:F.options.staleTime??this.options.defaultStaleTime??0,z=F.options.shouldReload,W=typeof z=="function"?z(Q()):z;c(D,le=>({...le,loaderPromise:Hl(),preload:!!k&&!this.state.matches.find(ie=>ie.id===D)}));const L=()=>{var le,ie,se,ue,ce,be;const Ne=this.getMatch(D);if(!Ne)return;const we={matches:r,match:Ne,params:Ne.params,loaderData:Ne.loaderData},Ce=(ie=(le=F.options).head)==null?void 0:ie.call(le,we),Oe=Ce==null?void 0:Ce.meta,Qe=Ce==null?void 0:Ce.links,ve=Ce==null?void 0:Ce.scripts,Re=(ue=(se=F.options).scripts)==null?void 0:ue.call(se,we),ke=(be=(ce=F.options).headers)==null?void 0:be.call(ce,we);c(D,st=>({...st,meta:Oe,links:Qe,headScripts:ve,headers:ke,scripts:Re}))},X=async()=>{var le,ie,se,ue,ce;try{const be=async()=>{const Ne=this.getMatch(D);Ne.minPendingPromise&&await Ne.minPendingPromise};try{this.loadRouteChunk(F),c(D,we=>({...we,isFetching:"loader"}));const Ne=await((ie=(le=F.options).loader)==null?void 0:ie.call(le,Q()));x(this.getMatch(D),Ne),await F._lazyPromise,await be(),await F._componentsPromise,Al(()=>{c(D,we=>({...we,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Ne})),L()})}catch(Ne){let we=Ne;await be(),x(this.getMatch(D),Ne);try{(ue=(se=F.options).onError)==null||ue.call(se,Ne)}catch(Ce){we=Ce,x(this.getMatch(D),Ce)}Al(()=>{c(D,Ce=>({...Ce,error:we,status:"error",isFetching:!1})),L()})}(ce=this.serverSsr)==null||ce.onMatchSettled({router:this,match:this.getMatch(D)})}catch(be){Al(()=>{c(D,Ne=>({...Ne,loaderPromise:void 0})),L()}),x(this.getMatch(D),be)}},{status:ae,invalid:ee}=this.getMatch(D);U=ae==="success"&&(ee||(W??G>B)),k&&F.options.preload===!1||(U&&!u?(Y=!0,(async()=>{try{await X();const{loaderPromise:le,loadPromise:ie}=this.getMatch(D);le==null||le.resolve(),ie==null||ie.resolve(),c(D,se=>({...se,loaderPromise:void 0}))}catch(le){Q0(le)&&await this.navigate(le)}})()):ae!=="success"||U&&u?await X():L())}if(!Y){const{loaderPromise:V,loadPromise:F}=this.getMatch(D);V==null||V.resolve(),F==null||F.resolve()}return c(D,V=>({...V,isFetching:Y?V.isFetching:!1,loaderPromise:Y?V.loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(R),b()}catch(S){_(S)}})()}),await p()}catch(b){if(hi(b)||ta(b))throw ta(b)&&!n&&await p(),b}return r},this.invalidate=s=>{const r=n=>{var i;return((i=s==null?void 0:s.filter)==null?void 0:i.call(s,n))??!0?{...n,invalid:!0,...n.status==="error"?{status:"pending",error:void 0}:{}}:n};return this.__store.setState(n=>{var i;return{...n,matches:n.matches.map(r),cachedMatches:n.cachedMatches.map(r),pendingMatches:(i=n.pendingMatches)==null?void 0:i.map(r)}}),this.load({sync:s==null?void 0:s.sync})},this.resolveRedirect=s=>{const r=s;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=s=>{const r=s==null?void 0:s.filter;r!==void 0?this.__store.setState(n=>({...n,cachedMatches:n.cachedMatches.filter(i=>!r(i))})):this.__store.setState(n=>({...n,cachedMatches:[]}))},this.clearExpiredCache=()=>{const s=r=>{const n=this.looseRoutesById[r.routeId];if(!n.options.loader)return!0;const i=(r.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<i)};this.clearCache({filter:s})},this.loadRouteChunk=s=>(s._lazyPromise===void 0&&(s.lazyFn?s._lazyPromise=s.lazyFn().then(r=>{const{id:n,...i}=r.options;Object.assign(s.options,i)}):s._lazyPromise=Promise.resolve()),s._componentsPromise===void 0&&(s._componentsPromise=s._lazyPromise.then(()=>Promise.all(M2.map(async r=>{const n=s.options[r];n!=null&&n.preload&&await n.preload()})))),s._componentsPromise),this.preloadRoute=async s=>{const r=this.buildLocation(s);let n=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:s});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),c=new Set([...i,...this.state.cachedMatches.map(u=>u.id)]);Al(()=>{n.forEach(u=>{c.has(u.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,u]}))})});try{return n=await this.loadMatches({matches:n,location:r,preload:!0,updateMatch:(u,f)=>{i.has(u)?n=n.map(h=>h.id===u?f(h):h):this.updateMatch(u,f)}}),n}catch(u){if(hi(u))return u.reloadDocument?void 0:await this.preloadRoute({...u,_fromLocation:r});ta(u)||console.error(u);return}},this.matchRoute=(s,r)=>{const n={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},i=this.buildLocation(n);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const u=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=lh(this.basepath,u.pathname,{...r,to:i.pathname});return!f||s.params&&!oc(f,s.params,{partial:!0})?!1:f&&((r==null?void 0:r.includeSearch)??!0)?oc(u.search,i.search,{partial:!0})?f:!1:f},this._handleNotFound=(s,r,{updateMatch:n=this.updateMatch}={})=>{var i;const c=this.routesById[r.routeId??""]??this.routeTree,u={};for(const h of s)u[h.routeId]=h;!c.options.notFoundComponent&&((i=this.options)!=null&&i.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),Nn(c.options.notFoundComponent);const f=u[c.id];Nn(f,"Could not find match for route: "+c.id),n(f.id,h=>({...h,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(r.routeId=c.parentRoute.id,this._handleNotFound(s,r,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??TP,parseSearch:e.parseSearch??kP}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,s){const{foundRoute:r,matchedRoutes:n,routeParams:i}=this.getMatchedRoutes(e,s==null?void 0:s.dest);let c=!1;(r?r.path!=="/"&&i["**"]:bi(e.pathname))&&(this.options.notFoundRoute?n.push(this.options.notFoundRoute):c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let g=n.length-1;g>=0;g--){const x=n[g];if(x.children)return x.id}return ga}})(),f=n.map(g=>{var x;let b;const _=((x=g.options.params)==null?void 0:x.parse)??g.options.parseParams;if(_)try{const j=_(i);Object.assign(i,j)}catch(j){if(b=new OP(j.message,{cause:j}),s!=null&&s.throwOnError)throw b;return b}}),h=[],p=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return n.forEach((g,x)=>{var b,_;const j=h[x-1],[N,C,E]=(()=>{const F=(j==null?void 0:j.search)??e.search,Q=(j==null?void 0:j._strictSearch)??{};try{const G=J0(g.options.validateSearch,{...F})??{};return[{...F,...G},{...Q,...G},void 0]}catch(G){let k=G;if(G instanceof Jh||(k=new Jh(G.message,{cause:G})),s!=null&&s.throwOnError)throw k;return[F,{},k]}})(),S=((_=(b=g.options).loaderDeps)==null?void 0:_.call(b,{search:N}))??"",P=S?JSON.stringify(S):"",{usedParams:R,interpolatedPath:D}=ih({path:g.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),$=ih({path:g.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+P,A=this.getMatch($),M=this.state.matches.find(F=>F.routeId===g.id),U=M?"stay":"enter";let Y;if(A)Y={...A,cause:U,params:M?Jr(M.params,i):i,_strictParams:R,search:Jr(M?M.search:A.search,N),_strictSearch:C};else{const F=g.options.loader||g.options.beforeLoad||g.lazyFn||tN(g)?"pending":"success";Y={id:$,index:x,routeId:g.id,params:M?Jr(M.params,i):i,_strictParams:R,pathname:Sn([this.basepath,D]),updatedAt:Date.now(),search:M?Jr(M.search,N):N,_strictSearch:C,searchError:void 0,status:F,isFetching:!1,error:void 0,paramsError:f[x],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:U,loaderDeps:M?Jr(M.loaderDeps,S):S,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:Hl(),fullPath:g.fullPath}}s!=null&&s.preload||(Y.globalNotFound=u===g.id),Y.searchError=E;const V=p(j);Y.context={...V,...Y.__routeContext,...Y.__beforeLoadContext},h.push(Y)}),h.forEach((g,x)=>{var b,_;const j=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(s==null?void 0:s._buildLocation)!==!0){const C=h[x-1],E=p(C),S={deps:g.loaderDeps,params:g.params,context:E,location:e,navigate:P=>this.navigate({...P,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:h};g.__routeContext=((_=(b=j.options).context)==null?void 0:_.call(b,S))??{},g.context={...E,...g.__routeContext,...g.__beforeLoadContext}}}),h}}class Jh extends Error{}class OP extends Error{}function $P(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function J0(t,e){if(t==null)return{};if("~standard"in t){const s=t["~standard"].validate(e);if(s instanceof Promise)throw new Jh("Async validation not supported");if(s.issues)throw new Jh(JSON.stringify(s.issues,void 0,2),{cause:s});return s.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}const M2=["component","errorComponent","pendingComponent","notFoundComponent"];function tN(t){var e;for(const s of M2)if((e=t.options[s])!=null&&e.preload)return!0;return!1}const LP="Error preloading route! ☝️";class P2{constructor(e){if(this.init=s=>{var r,n;this.originalIndex=s.originalIndex;const i=this.options,c=!(i!=null&&i.path)&&!(i!=null&&i.id);if(this.parentRoute=(n=(r=this.options).getParentRoute)==null?void 0:n.call(r),c)this._path=ga;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let u=c?ga:i==null?void 0:i.path;u&&u!=="/"&&(u=hy(u));const f=(i==null?void 0:i.id)||u;let h=c?ga:Sn([this.parentRoute.id===ga?"":this.parentRoute.id,f]);u===ga&&(u="/"),h!==ga&&(h=Sn(["/",h]));const p=h===ga?"/":Sn([this.parentRoute.fullPath,u]);this._path=u,this._id=h,this._fullPath=p,this._to=p,this._ssr=(i==null?void 0:i.ssr)??s.defaultSsr??!0},this.clone=s=>{this._path=s._path,this._id=s._id,this._fullPath=s._fullPath,this._to=s._to,this._ssr=s._ssr,this.options.getParentRoute=s.options.getParentRoute,this.children=s.children},this.addChildren=s=>this._addFileChildren(s),this._addFileChildren=s=>(Array.isArray(s)&&(this.children=s),typeof s=="object"&&s!==null&&(this.children=Object.values(s)),this),this._addFileTypes=()=>this,this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class IP extends P2{constructor(e){super(e)}}function my(t){const e=t.errorComponent??Um;return a.jsx(BP,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:s,reset:r})=>s?y.createElement(e,{error:s,reset:r}):t.children})}class BP extends y.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,s){this.props.onCatch&&this.props.onCatch(e,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Um({error:t}){const[e,s]=y.useState(!1);return a.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[a.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),a.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(r=>!r),children:e?"Hide Error":"Show Error"})]}),a.jsx("div",{style:{height:".25rem"}}),e?a.jsx("div",{children:a.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?a.jsx("code",{children:t.message}):null})}):null]})}var ex={exports:{}},tx={},sx={exports:{}},rx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN;function VP(){if(sN)return rx;sN=1;var t=$d();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var s=typeof Object.is=="function"?Object.is:e,r=t.useState,n=t.useEffect,i=t.useLayoutEffect,c=t.useDebugValue;function u(g,x){var b=x(),_=r({inst:{value:b,getSnapshot:x}}),j=_[0].inst,N=_[1];return i(function(){j.value=b,j.getSnapshot=x,f(j)&&N({inst:j})},[g,b,x]),n(function(){return f(j)&&N({inst:j}),g(function(){f(j)&&N({inst:j})})},[g]),c(b),b}function f(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!s(g,b)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return rx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,rx}var rN;function D2(){return rN||(rN=1,sx.exports=VP()),sx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function zP(){if(aN)return tx;aN=1;var t=$d(),e=D2();function s(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:s,n=e.useSyncExternalStore,i=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return tx.useSyncExternalStoreWithSelector=function(h,p,g,x,b){var _=i(null);if(_.current===null){var j={hasValue:!1,value:null};_.current=j}else j=_.current;_=u(function(){function C(D){if(!E){if(E=!0,S=D,D=x(D),b!==void 0&&j.hasValue){var $=j.value;if(b($,D))return P=$}return P=D}if($=P,r(S,D))return $;var A=x(D);return b!==void 0&&b($,A)?(S=D,$):(S=D,P=A)}var E=!1,S,P,R=g===void 0?null:g;return[function(){return C(p())},R===null?void 0:function(){return C(R())}]},[p,g,x,b]);var N=n(h,_[0],_[1]);return c(function(){j.hasValue=!0,j.value=N},[N]),f(N),N},tx}var nN;function UP(){return nN||(nN=1,ex.exports=zP()),ex.exports}var qP=UP();function FP(t,e=s=>s){return qP.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,HP)}function HP(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,n]of t)if(!e.has(r)||!Object.is(n,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!1;for(let r=0;r<s.length;r++)if(!Object.prototype.hasOwnProperty.call(e,s[r])||!Object.is(t[s[r]],e[s[r]]))return!1;return!0}const ax=y.createContext(null);function O2(){return typeof document>"u"?ax:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=ax,ax)}function ka(t){const e=y.useContext(O2());return t==null||t.warn,e}function Ds(t){const e=ka({warn:(t==null?void 0:t.router)===void 0}),s=(t==null?void 0:t.router)||e,r=y.useRef(void 0);return FP(s.__store,n=>{if(t!=null&&t.select){if(t.structuralSharing??s.options.defaultStructuralSharing){const i=Jr(r.current,t.select(n));return r.current=i,i}return t.select(n)}return n})}const qm=y.createContext(void 0),GP=y.createContext(void 0);function Eo(t){const e=y.useContext(t.from?GP:qm);return Ds({select:r=>{const n=r.matches.find(i=>t.from?t.from===i.routeId:i.id===e);if(Nn(!((t.shouldThrow??!0)&&!n),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),n!==void 0)return t.select?t.select(n):n},structuralSharing:t.structuralSharing})}function $2(t){return Eo({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function L2(t){const{select:e,...s}=t;return Eo({...s,select:r=>e?e(r.loaderDeps):r.loaderDeps})}function py(t){return Eo({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function gy(t){return Eo({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function Ot(t){const{navigate:e}=ka();return y.useCallback(s=>e({from:t==null?void 0:t.from,...s}),[t==null?void 0:t.from,e])}var Li=E2();const I2=Vm(Li),Uu=typeof window<"u"?y.useLayoutEffect:y.useEffect;function nx(t){const e=y.useRef({value:t,prev:null}),s=e.current.value;return t!==s&&(e.current={value:t,prev:s}),e.current.prev}function XP(t,e,s={},r={}){const n=y.useRef(typeof IntersectionObserver=="function"),i=y.useRef(null);return y.useEffect(()=>{if(!(!t.current||!n.current||r.disabled))return i.current=new IntersectionObserver(([c])=>{e(c)},s),i.current.observe(t.current),()=>{var c;(c=i.current)==null||c.disconnect()}},[e,s,r.disabled,t]),i.current}function YP(t){const e=y.useRef(null);return y.useImperativeHandle(t,()=>e.current,[]),e}function KP(){const t=ka(),e=y.useRef({router:t,mounted:!1}),s=Ds({select:({isLoading:g})=>g}),[r,n]=y.useState(!1),i=Ds({select:g=>g.matches.some(x=>x.status==="pending"),structuralSharing:!0}),c=nx(s),u=s||r||i,f=nx(u),h=s||i,p=nx(h);return t.isServer||(t.startTransition=g=>{n(!0),y.startTransition(()=>{g(),n(!1)})}),y.useEffect(()=>{const g=t.history.subscribe(t.load),x=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return bi(t.latestLocation.href)!==bi(x.href)&&t.commitLocation({...x,replace:!0}),()=>{g()}},[t,t.history]),Uu(()=>{if(typeof window<"u"&&t.clientSsr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Uu(()=>{c&&!s&&t.emit({type:"onLoad",...Ni(t.state)})},[c,t,s]),Uu(()=>{p&&!h&&t.emit({type:"onBeforeRouteMount",...Ni(t.state)})},[h,p,t]),Uu(()=>{f&&!u&&(t.emit({type:"onResolved",...Ni(t.state)}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),CP(t))},[u,f,t]),null}function WP(t){const e=Ds({select:s=>`not-found-${s.location.pathname}-${s.status}`});return a.jsx(my,{getResetKey:()=>e,onCatch:(s,r)=>{var n;if(ta(s))(n=t.onCatch)==null||n.call(t,s,r);else throw s},errorComponent:({error:s})=>{var r;if(ta(s))return(r=t.fallback)==null?void 0:r.call(t,s);throw s},children:t.children})}function ZP(){return a.jsx("p",{children:"Not Found"})}function Ph(t){return a.jsx(a.Fragment,{children:t.children})}function B2(t,e,s){return e.options.notFoundComponent?a.jsx(e.options.notFoundComponent,{data:s}):t.options.defaultNotFoundComponent?a.jsx(t.options.defaultNotFoundComponent,{data:s}):a.jsx(ZP,{})}var ox,oN;function QP(){if(oN)return ox;oN=1;const t={},e=t.hasOwnProperty,s=(A,M)=>{for(const U in A)e.call(A,U)&&M(U,A[U])},r=(A,M)=>(M&&s(M,(U,Y)=>{A[U]=Y}),A),n=(A,M)=>{const U=A.length;let Y=-1;for(;++Y<U;)M(A[Y])},i=A=>"\\u"+("0000"+A).slice(-4),c=(A,M)=>{let U=A.toString(16);return M?U:U.toUpperCase()},u=t.toString,f=Array.isArray,h=A=>typeof Buffer=="function"&&Buffer.isBuffer(A),p=A=>u.call(A)=="[object Object]",g=A=>typeof A=="string"||u.call(A)=="[object String]",x=A=>typeof A=="number"||u.call(A)=="[object Number]",b=A=>typeof A=="bigint",_=A=>typeof A=="function",j=A=>u.call(A)=="[object Map]",N=A=>u.call(A)=="[object Set]",C={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},E=/[\\\b\f\n\r\t]/,S=/[0-9]/,P=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,R=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,D=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,$=(A,M)=>{const U=()=>{B=k,++M.indentLevel,k=M.indent.repeat(M.indentLevel)},Y={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},V=M&&M.json;V&&(Y.quotes="double",Y.wrap=!0),M=r(Y,M),M.quotes!="single"&&M.quotes!="double"&&M.quotes!="backtick"&&(M.quotes="single");const F=M.quotes=="double"?'"':M.quotes=="backtick"?"`":"'",Q=M.compact,G=M.lowercaseHex;let k=M.indent.repeat(M.indentLevel),B="";const z=M.__inline1__,W=M.__inline2__,L=Q?"":`
`;let X,ae=!0;const ee=M.numbers=="binary",le=M.numbers=="octal",ie=M.numbers=="decimal",se=M.numbers=="hexadecimal";if(V&&A&&_(A.toJSON)&&(A=A.toJSON()),!g(A)){if(j(A))return A.size==0?"new Map()":(Q||(M.__inline1__=!0,M.__inline2__=!1),"new Map("+$(Array.from(A),M)+")");if(N(A))return A.size==0?"new Set()":"new Set("+$(Array.from(A),M)+")";if(h(A))return A.length==0?"Buffer.from([])":"Buffer.from("+$(Array.from(A),M)+")";if(f(A))return X=[],M.wrap=!0,z&&(M.__inline1__=!1,M.__inline2__=!0),W||U(),n(A,ce=>{ae=!1,W&&(M.__inline2__=!1),X.push((Q||W?"":k)+$(ce,M))}),ae?"[]":W?"["+X.join(", ")+"]":"["+L+X.join(","+L)+L+(Q?"":B)+"]";if(x(A)||b(A)){if(V)return JSON.stringify(Number(A));let ce;if(ie)ce=String(A);else if(se){let be=A.toString(16);G||(be=be.toUpperCase()),ce="0x"+be}else ee?ce="0b"+A.toString(2):le&&(ce="0o"+A.toString(8));return b(A)?ce+"n":ce}else return b(A)?V?JSON.stringify(Number(A)):A+"n":p(A)?(X=[],M.wrap=!0,U(),s(A,(ce,be)=>{ae=!1,X.push((Q?"":k)+$(ce,M)+":"+(Q?"":" ")+$(be,M))}),ae?"{}":"{"+L+X.join(","+L)+L+(Q?"":B)+"}"):V?JSON.stringify(A)||"null":String(A)}const ue=M.escapeEverything?R:D;return X=A.replace(ue,(ce,be,Ne,we,Ce,Oe)=>{if(be){if(M.minimal)return be;const ve=be.charCodeAt(0),Re=be.charCodeAt(1);if(M.es6){const ke=(ve-55296)*1024+Re-56320+65536;return"\\u{"+c(ke,G)+"}"}return i(c(ve,G))+i(c(Re,G))}if(Ne)return i(c(Ne.charCodeAt(0),G));if(ce=="\0"&&!V&&!S.test(Oe.charAt(Ce+1)))return"\\0";if(we)return we==F||M.escapeEverything?"\\"+we:we;if(E.test(ce))return C[ce];if(M.minimal&&!P.test(ce))return ce;const Qe=c(ce.charCodeAt(0),G);return V||Qe.length>2?i(Qe):"\\x"+("00"+Qe).slice(-2)}),F=="`"&&(X=X.replace(/\$\{/g,"\\${")),M.isScriptContext&&(X=X.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,V?"\\u003C!--":"\\x3C!--")),M.wrap&&(X=F+X+F),X};return $.version="3.0.2",ox=$,ox}QP();function JP({children:t,log:e}){return typeof document<"u"?null:a.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[t,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function eD(){const t=ka(),s=(t.options.getScrollRestorationKey||Kx)(t.latestLocation),r=s!==Kx(t.latestLocation)?s:null;return!t.isScrollRestoring||!t.isServer?null:a.jsx(JP,{children:`(${R2.toString()})(${JSON.stringify(Zh)},${JSON.stringify(r)}, undefined, true)`,log:!1})}const V2=y.memo(function({matchId:e}){var s,r;const n=ka(),i=Ds({select:C=>{var E;return(E=C.matches.find(S=>S.id===e))==null?void 0:E.routeId}});Nn(i);const c=n.routesById[i],u=c.options.pendingComponent??n.options.defaultPendingComponent,f=u?a.jsx(u,{}):null,h=c.options.errorComponent??n.options.defaultErrorComponent,p=c.options.onCatch??n.options.defaultOnCatch,g=c.isRoot?c.options.notFoundComponent??((s=n.options.notFoundRoute)==null?void 0:s.options.component):c.options.notFoundComponent,x=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??u??((r=c.options.errorComponent)==null?void 0:r.preload))?y.Suspense:Ph,b=h?my:Ph,_=g?WP:Ph,j=Ds({select:C=>C.loadedAt}),N=Ds({select:C=>{var E;const S=C.matches.findIndex(P=>P.id===e);return(E=C.matches[S-1])==null?void 0:E.routeId}});return a.jsxs(a.Fragment,{children:[a.jsx(qm.Provider,{value:e,children:a.jsx(x,{fallback:f,children:a.jsx(b,{getResetKey:()=>j,errorComponent:h||Um,onCatch:(C,E)=>{if(ta(C))throw C;p==null||p(C,E)},children:a.jsx(_,{fallback:C=>{if(!g||C.routeId&&C.routeId!==i||!C.routeId&&!c.isRoot)throw C;return y.createElement(g,C)},children:a.jsx(sD,{matchId:e})})})})}),N===ga&&n.options.scrollRestoration?a.jsxs(a.Fragment,{children:[a.jsx(tD,{}),a.jsx(eD,{})]}):null]})});function tD(){const t=ka(),e=y.useRef(void 0);return a.jsx("script",{suppressHydrationWarning:!0,ref:s=>{s&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...Ni(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.key)}const sD=y.memo(function({matchId:e}){var s,r,n;const i=ka(),{match:c,key:u,routeId:f}=Ds({select:x=>{const b=x.matches.findIndex(S=>S.id===e),_=x.matches[b],j=_.routeId,N=i.routesById[j].options.remountDeps??i.options.defaultRemountDeps,C=N==null?void 0:N({routeId:j,loaderDeps:_.loaderDeps,params:_._strictParams,search:_._strictSearch});return{key:C?JSON.stringify(C):void 0,routeId:j,match:Xx(_,["id","status","error"])}},structuralSharing:!0}),h=i.routesById[f],p=y.useMemo(()=>{const x=h.options.component??i.options.defaultComponent;return x?a.jsx(x,{},u):a.jsx(Lo,{})},[u,h.options.component,i.options.defaultComponent]),g=(h.options.errorComponent??i.options.defaultErrorComponent)||Um;if(c.status==="notFound")return Nn(ta(c.error)),B2(i,h,c.error);if(c.status==="redirected")throw Nn(hi(c.error)),(s=i.getMatch(c.id))==null?void 0:s.loadPromise;if(c.status==="error"){if(i.isServer)return a.jsx(g,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const x=h.options.pendingMinMs??i.options.defaultPendingMinMs;if(x&&!((r=i.getMatch(c.id))!=null&&r.minPendingPromise)&&!i.isServer){const b=Hl();Promise.resolve().then(()=>{i.updateMatch(c.id,_=>({..._,minPendingPromise:b}))}),setTimeout(()=>{b.resolve(),i.updateMatch(c.id,_=>({..._,minPendingPromise:void 0}))},x)}throw(n=i.getMatch(c.id))==null?void 0:n.loadPromise}return p}),Lo=y.memo(function(){const e=ka(),s=y.useContext(qm),r=Ds({select:h=>{var p;return(p=h.matches.find(g=>g.id===s))==null?void 0:p.routeId}}),n=e.routesById[r],i=Ds({select:h=>{const g=h.matches.find(x=>x.id===s);return Nn(g),g.globalNotFound}}),c=Ds({select:h=>{var p;const g=h.matches,x=g.findIndex(b=>b.id===s);return(p=g[x+1])==null?void 0:p.id}});if(i)return B2(e,n,void 0);if(!c)return null;const u=a.jsx(V2,{matchId:c}),f=e.options.defaultPendingComponent?a.jsx(e.options.defaultPendingComponent,{}):null;return s===ga?a.jsx(y.Suspense,{fallback:f,children:u}):u});function rD(){const t=ka(),e=t.options.defaultPendingComponent?a.jsx(t.options.defaultPendingComponent,{}):null,s=t.isServer||typeof document<"u"&&t.clientSsr?Ph:y.Suspense,r=a.jsxs(s,{fallback:e,children:[a.jsx(KP,{}),a.jsx(aD,{})]});return t.options.InnerWrap?a.jsx(t.options.InnerWrap,{children:r}):r}function aD(){const t=Ds({select:s=>{var r;return(r=s.matches[0])==null?void 0:r.id}}),e=Ds({select:s=>s.loadedAt});return a.jsx(qm.Provider,{value:t,children:a.jsx(my,{getResetKey:()=>e,errorComponent:Um,onCatch:s=>{s.message||s.toString()},children:t?a.jsx(V2,{matchId:t}):null})})}function nD(t){return Ds({select:e=>{const s=e.matches;return t!=null&&t.select?t.select(s):s},structuralSharing:t==null?void 0:t.structuralSharing})}function oD(t,e){const s=ka(),[r,n]=y.useState(!1),i=y.useRef(!1),c=YP(e),{activeProps:u=()=>({className:"active"}),inactiveProps:f=()=>({}),activeOptions:h,to:p,preload:g,preloadDelay:x,hashScrollIntoView:b,replace:_,startTransition:j,resetScroll:N,viewTransition:C,children:E,target:S,disabled:P,style:R,className:D,onClick:$,onFocus:A,onMouseEnter:M,onMouseLeave:U,onTouchStart:Y,ignoreBlocker:V,...F}=t,{params:Q,search:G,hash:k,state:B,mask:z,reloadDocument:W,...L}=F,X=y.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ae=Ds({select:q=>q.location.search,structuralSharing:!0}),ee=nD({select:q=>{var K;return t.from??((K=q[q.length-1])==null?void 0:K.fullPath)}}),le=y.useMemo(()=>({...t,from:ee}),[t,ee]),ie=y.useMemo(()=>s.buildLocation(le),[s,le,ae]),se=y.useMemo(()=>le.reloadDocument?!1:g??s.options.defaultPreload,[s.options.defaultPreload,g,le.reloadDocument]),ue=x??s.options.defaultPreloadDelay??0,ce=Ds({select:q=>{if(h!=null&&h.exact){if(!xP(q.location.pathname,ie.pathname,s.basepath))return!1}else{const K=Kh(q.location.pathname,s.basepath).split("/");if(!Kh(ie.pathname,s.basepath).split("/").every((ye,Me)=>ye===K[Me]))return!1}return((h==null?void 0:h.includeSearch)??!0)&&!oc(q.location.search,ie.search,{partial:!(h!=null&&h.exact),ignoreUndefined:!(h!=null&&h.explicitUndefined)})?!1:h!=null&&h.includeHash?q.location.hash===ie.hash:!0}}),be=y.useCallback(()=>{s.preloadRoute(le).catch(q=>{console.warn(q),console.warn(LP)})},[le,s]),Ne=y.useCallback(q=>{q!=null&&q.isIntersecting&&be()},[be]);if(XP(c,Ne,{rootMargin:"100px"},{disabled:!!P||se!=="viewport"}),Uu(()=>{i.current||!P&&se==="render"&&(be(),i.current=!0)},[P,be,se]),X==="external")return{...L,ref:c,type:X,href:p,...E&&{children:E},...S&&{target:S},...P&&{disabled:P},...R&&{style:R},...D&&{className:D},...$&&{onClick:$},...A&&{onFocus:A},...M&&{onMouseEnter:M},...U&&{onMouseLeave:U},...Y&&{onTouchStart:Y}};const we=q=>{if(!P&&!iD(q)&&!q.defaultPrevented&&(!S||S==="_self")&&q.button===0){q.preventDefault(),Li.flushSync(()=>{n(!0)});const K=s.subscribe("onResolved",()=>{K(),n(!1)});return s.navigate({...le,replace:_,resetScroll:N,hashScrollIntoView:b,startTransition:j,viewTransition:C,ignoreBlocker:V})}},Ce=q=>{P||se&&be()},Oe=Ce,Qe=q=>{if(P)return;const K=q.target||{};if(se){if(K.preloadTimeout)return;K.preloadTimeout=setTimeout(()=>{K.preloadTimeout=null,be()},ue)}},ve=q=>{if(P)return;const K=q.target||{};K.preloadTimeout&&(clearTimeout(K.preloadTimeout),K.preloadTimeout=null)},Re=q=>K=>{var ge;(ge=K.persist)==null||ge.call(K),q.filter(Boolean).forEach(_e=>{K.defaultPrevented||_e(K)})},ke=ce?yi(u,{})??{}:{},st=ce?{}:yi(f,{}),Ae=[D,ke.className,st.className].filter(Boolean).join(" "),I={...R,...ke.style,...st.style};return{...L,...ke,...st,href:P?void 0:ie.maskedLocation?s.history.createHref(ie.maskedLocation.href):s.history.createHref(ie.href),ref:c,onClick:Re([$,we]),onFocus:Re([A,Ce]),onMouseEnter:Re([M,Qe]),onMouseLeave:Re([U,ve]),onTouchStart:Re([Y,Oe]),disabled:!!P,target:S,...Object.keys(I).length&&{style:I},...Ae&&{className:Ae},...P&&{role:"link","aria-disabled":!0},...ce&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const _o=y.forwardRef((t,e)=>{const{_asChild:s,...r}=t,{type:n,ref:i,...c}=oD(r,e),u=typeof r.children=="function"?r.children({isActive:c["data-status"]==="active"}):r.children;return typeof s>"u"&&delete c.disabled,y.createElement(s||"a",{...c,ref:i},u)});function iD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}let lD=class extends P2{constructor(e){super(e),this.useMatch=s=>Eo({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Eo({...s,from:this.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>gy({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>py({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>L2({...s,from:this.id}),this.useLoaderData=s=>$2({...s,from:this.id}),this.useNavigate=()=>Ot({from:this.fullPath}),this.Link=fe.forwardRef((s,r)=>a.jsx(_o,{ref:r,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}};function cD(t){return new lD(t)}class uD extends IP{constructor(e){super(e),this.useMatch=s=>Eo({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Eo({...s,from:this.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>gy({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>py({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>L2({...s,from:this.id}),this.useLoaderData=s=>$2({...s,from:this.id}),this.useNavigate=()=>Ot({from:this.fullPath}),this.Link=fe.forwardRef((s,r)=>a.jsx(_o,{ref:r,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}}function dD(t){return new uD(t)}function Wt(t){return new fD(t,{silent:!0}).createRoute}class fD{constructor(e,s){this.path=e,this.createRoute=r=>{this.silent;const n=cD(r);return n.isRoot=!1,n},this.silent=s==null?void 0:s.silent}}const hD=t=>new mD(t);class mD extends DP{constructor(e){super(e)}}function pD({router:t,children:e,...s}){t.update({...t.options,...s,context:{...t.options.context,...s.context}});const r=O2(),n=a.jsx(r.Provider,{value:t,children:e});return t.options.Wrap?a.jsx(t.options.Wrap,{children:n}):n}function gD({router:t,...e}){return a.jsx(pD,{router:t,...e,children:a.jsx(rD,{})})}function Ii(t){return Ds({select:e=>e.location})}const xD="modulepreload",vD=function(t){return"/"+t},iN={},Dt=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=c(s.map(h=>{if(h=vD(h),h in iN)return;iN[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":xD,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((b,_)=>{x.addEventListener("load",b),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return n.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},ot={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return lN(this.context.count)},getNextContextId(){return lN(this.context.count++)}};function lN(t){const e=String(t),s=e.length-1;return ot.context.id+(s?String.fromCharCode(96+s):"")+e}function qu(t){ot.context=t}const z2=!1,yD=(t,e)=>t===e,em=Symbol("solid-proxy"),U2=typeof Proxy=="function",tm={equals:yD};let q2=Y2;const Pn=1,sm=2,F2={owned:null,cleanups:null,context:null,owner:null},ix={};var Yt=null;let lx=null,bD=null,Xt=null,sr=null,Cn=null,Fm=0;function wD(t,e){const s=Xt,r=Yt,n=t.length===0,i=e===void 0?r:e,c=n?F2:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=n?t:()=>t(()=>Ca(()=>vd(c)));Yt=c,Xt=null;try{return Ao(u,!0)}finally{Xt=s,Yt=r}}function xo(t,e){e=e?Object.assign({},tm,e):tm;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=n=>(typeof n=="function"&&(n=n(s.value)),X2(s,n));return[G2.bind(s),r]}function _D(t,e,s){const r=Hm(t,e,!0,Pn);Sc(r)}function Si(t,e,s){const r=Hm(t,e,!1,Pn);Sc(r)}function BW(t,e,s){q2=RD;const r=Hm(t,e,!1,Pn);(!s||!s.render)&&(r.user=!0),Cn?Cn.push(r):Sc(r)}function Na(t,e,s){s=s?Object.assign({},tm,s):tm;const r=Hm(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=s.equals||void 0,Sc(r),G2.bind(r)}function jD(t){return t&&typeof t=="object"&&"then"in t}function ND(t,e,s){let r,n,i;r=!0,n=t,i={};let c=null,u=ix,f=null,h=!1,p="initialValue"in i,g=typeof r=="function"&&Na(r);const x=new Set,[b,_]=(i.storage||xo)(i.initialValue),[j,N]=xo(void 0),[C,E]=xo(void 0,{equals:!1}),[S,P]=xo(p?"ready":"unresolved");ot.context&&(f=ot.getNextContextId(),i.ssrLoadFrom==="initial"?u=i.initialValue:ot.load&&ot.has(f)&&(u=ot.load(f)));function R(U,Y,V,F){return c===U&&(c=null,F!==void 0&&(p=!0),(U===u||Y===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(F,{value:Y})),u=ix,D(Y,V)),Y}function D(U,Y){Ao(()=>{Y===void 0&&_(()=>U),P(Y!==void 0?"errored":p?"ready":"unresolved"),N(Y);for(const V of x.keys())V.decrement();x.clear()},!1)}function $(){const U=AD,Y=b(),V=j();if(V!==void 0&&!c)throw V;return Xt&&Xt.user,Y}function A(U=!0){if(U!==!1&&h)return;h=!1;const Y=g?g():r;if(Y==null||Y===!1){R(c,Ca(b));return}let V;const F=u!==ix?u:Ca(()=>{try{return n(Y,{value:b(),refetching:U})}catch(Q){V=Q}});if(V!==void 0){R(c,void 0,Dh(V),Y);return}else if(!jD(F))return R(c,F,void 0,Y),F;return c=F,"v"in F?(F.s===1?R(c,F.v,void 0,Y):R(c,void 0,Dh(F.v),Y),F):(h=!0,queueMicrotask(()=>h=!1),Ao(()=>{P(p?"refreshing":"pending"),E()},!1),F.then(Q=>R(F,Q,void 0,Y),Q=>R(F,void 0,Dh(Q),Y)))}Object.defineProperties($,{state:{get:()=>S()},error:{get:()=>j()},loading:{get(){const U=S();return U==="pending"||U==="refreshing"}},latest:{get(){if(!p)return $();const U=j();if(U&&!c)throw U;return b()}}});let M=Yt;return g?_D(()=>(M=Yt,A(!1))):A(!1),[$,{refetch:U=>SD(M,()=>A(U)),mutate:_}]}function Ca(t){if(Xt===null)return t();const e=Xt;Xt=null;try{return t()}finally{Xt=e}}function SD(t,e){const s=Yt,r=Xt;Yt=t,Xt=null;try{return Ao(e,!0)}catch(n){xy(n)}finally{Yt=s,Xt=r}}const[VW,zW]=xo(!1);function H2(t,e){const s=Symbol("context");return{id:s,Provider:MD(s),defaultValue:t}}function CD(t){let e;return Yt&&Yt.context&&(e=Yt.context[t.id])!==void 0?e:t.defaultValue}function ED(t){const e=Na(t),s=Na(()=>Wx(e()));return s.toArray=()=>{const r=s();return Array.isArray(r)?r:r!=null?[r]:[]},s}let AD;function G2(){if(this.sources&&this.state)if(this.state===Pn)Sc(this);else{const t=sr;sr=null,Ao(()=>am(this),!1),sr=t}if(Xt){const t=this.observers?this.observers.length:0;Xt.sources?(Xt.sources.push(this),Xt.sourceSlots.push(t)):(Xt.sources=[this],Xt.sourceSlots=[t]),this.observers?(this.observers.push(Xt),this.observerSlots.push(Xt.sources.length-1)):(this.observers=[Xt],this.observerSlots=[Xt.sources.length-1])}return this.value}function X2(t,e,s){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&Ao(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],c=lx&&lx.running;c&&lx.disposed.has(i),(c?!i.tState:!i.state)&&(i.pure?sr.push(i):Cn.push(i),i.observers&&K2(i)),c||(i.state=Pn)}if(sr.length>1e6)throw sr=[],new Error},!1)),e}function Sc(t){if(!t.fn)return;vd(t);const e=Fm;kD(t,t.value,e)}function kD(t,e,s){let r;const n=Yt,i=Xt;Xt=Yt=t;try{r=t.fn(e)}catch(c){return t.pure&&(t.state=Pn,t.owned&&t.owned.forEach(vd),t.owned=null),t.updatedAt=s+1,xy(c)}finally{Xt=i,Yt=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?X2(t,r):t.value=r,t.updatedAt=s)}function Hm(t,e,s,r=Pn,n){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Yt,context:Yt?Yt.context:null,pure:s};return Yt===null||Yt!==F2&&(Yt.owned?Yt.owned.push(i):Yt.owned=[i]),i}function rm(t){if(t.state===0)return;if(t.state===sm)return am(t);if(t.suspense&&Ca(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Fm);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===Pn)Sc(t);else if(t.state===sm){const r=sr;sr=null,Ao(()=>am(t,e[0]),!1),sr=r}}function Ao(t,e){if(sr)return t();let s=!1;e||(sr=[]),Cn?s=!0:Cn=[],Fm++;try{const r=t();return TD(s),r}catch(r){s||(Cn=null),sr=null,xy(r)}}function TD(t){if(sr&&(Y2(sr),sr=null),t)return;const e=Cn;Cn=null,e.length&&Ao(()=>q2(e),!1)}function Y2(t){for(let e=0;e<t.length;e++)rm(t[e])}function RD(t){let e,s=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[s++]=r:rm(r)}if(ot.context){if(ot.count){ot.effects||(ot.effects=[]),ot.effects.push(...t.slice(0,s));return}qu()}for(ot.effects&&(ot.done||!ot.count)&&(t=[...ot.effects,...t],s+=ot.effects.length,delete ot.effects),e=0;e<s;e++)rm(t[e])}function am(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const r=t.sources[s];if(r.sources){const n=r.state;n===Pn?r!==e&&(!r.updatedAt||r.updatedAt<Fm)&&rm(r):n===sm&&am(r,e)}}}function K2(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=sm,s.pure?sr.push(s):Cn.push(s),s.observers&&K2(s))}}function vd(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),r=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const i=n.pop(),c=s.observerSlots.pop();r<n.length&&(i.sourceSlots[c]=r,n[r]=i,s.observerSlots[r]=c)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)vd(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)vd(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Dh(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function xy(t,e=Yt){throw Dh(t)}function Wx(t){if(typeof t=="function"&&!t.length)return Wx(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const r=Wx(t[s]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function MD(t,e){return function(r){let n;return Si(()=>n=Ca(()=>(Yt.context={...Yt.context,[t]:r.value},ED(()=>r.children))),void 0),n}}function cN(t,e){return Ca(()=>t(e||{}))}function ch(){return!0}const Zx={get(t,e,s){return e===em?s:t.get(e)},has(t,e){return e===em?!0:t.has(e)},set:ch,deleteProperty:ch,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:ch,deleteProperty:ch}},ownKeys(t){return t.keys()}};function cx(t){return(t=typeof t=="function"?t():t)?t:{}}function PD(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function UW(...t){let e=!1;for(let c=0;c<t.length;c++){const u=t[c];e=e||!!u&&em in u,t[c]=typeof u=="function"?(e=!0,Na(u)):u}if(U2&&e)return new Proxy({get(c){for(let u=t.length-1;u>=0;u--){const f=cx(t[u])[c];if(f!==void 0)return f}},has(c){for(let u=t.length-1;u>=0;u--)if(c in cx(t[u]))return!0;return!1},keys(){const c=[];for(let u=0;u<t.length;u++)c.push(...Object.keys(cx(t[u])));return[...new Set(c)]}},Zx);const s={},r=Object.create(null);for(let c=t.length-1;c>=0;c--){const u=t[c];if(!u)continue;const f=Object.getOwnPropertyNames(u);for(let h=f.length-1;h>=0;h--){const p=f[h];if(p==="__proto__"||p==="constructor")continue;const g=Object.getOwnPropertyDescriptor(u,p);if(!r[p])r[p]=g.get?{enumerable:!0,configurable:!0,get:PD.bind(s[p]=[g.get.bind(u)])}:g.value!==void 0?g:void 0;else{const x=s[p];x&&(g.get?x.push(g.get.bind(u)):g.value!==void 0&&x.push(()=>g.value))}}}const n={},i=Object.keys(r);for(let c=i.length-1;c>=0;c--){const u=i[c],f=r[u];f&&f.get?Object.defineProperty(n,u,f):n[u]=f?f.value:void 0}return n}function DD(t,...e){if(U2&&em in t){const n=new Set(e.length>1?e.flat():e[0]),i=e.map(c=>new Proxy({get(u){return c.includes(u)?t[u]:void 0},has(u){return c.includes(u)&&u in t},keys(){return c.filter(u=>u in t)}},Zx));return i.push(new Proxy({get(c){return n.has(c)?void 0:t[c]},has(c){return n.has(c)?!1:c in t},keys(){return Object.keys(t).filter(c=>!n.has(c))}},Zx)),i}const s={},r=e.map(()=>({}));for(const n of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,n),c=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let u=!1,f=0;for(const h of e)h.includes(n)&&(u=!0,c?r[f][n]=i.value:Object.defineProperty(r[f],n,i)),++f;u||(c?s[n]=i.value:Object.defineProperty(s,n,i))}return[...r,s]}function OD(t){let e,s;const r=n=>{const i=ot.context;if(i){const[u,f]=xo();ot.count||(ot.count=0),ot.count++,(s||(s=t())).then(h=>{!ot.done&&qu(i),ot.count--,f(()=>h.default),qu()}),e=u}else if(!e){const[u]=ND(()=>(s||(s=t())).then(f=>f.default));e=u}let c;return Na(()=>(c=e())?Ca(()=>{if(!i||ot.done)return c(n);const u=ot.context;qu(i);const f=c(n);return qu(u),f}):"")};return r.preload=()=>s||((s=t()).then(n=>e=()=>n.default),s),r}let $D=0;function qW(){return ot.context?ot.getNextContextId():`cl-${$D++}`}const LD=t=>`Stale read from <${t}>.`;function FW(t){const e=t.keyed,s=Na(()=>t.when,void 0,void 0),r=e?s:Na(s,void 0,{equals:(n,i)=>!n==!i});return Na(()=>{const n=r();if(n){const i=t.children;return typeof i=="function"&&i.length>0?Ca(()=>i(e?n:()=>{if(!Ca(r))throw LD("Show");return s()})):i}return t.fallback},void 0,void 0)}const ID=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],BD=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...ID]),VD=new Set(["innerHTML","textContent","innerText","children"]),zD=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),UD=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function qD(t,e){const s=UD[t];return typeof s=="object"?s[e]?s.$:void 0:s}const FD=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),HD=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),GD={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},HW=t=>Na(()=>t());function XD(t,e,s){let r=s.length,n=e.length,i=r,c=0,u=0,f=e[n-1].nextSibling,h=null;for(;c<n||u<i;){if(e[c]===s[u]){c++,u++;continue}for(;e[n-1]===s[i-1];)n--,i--;if(n===c){const p=i<r?u?s[u-1].nextSibling:s[i-u]:f;for(;u<i;)t.insertBefore(s[u++],p)}else if(i===u)for(;c<n;)(!h||!h.has(e[c]))&&e[c].remove(),c++;else if(e[c]===s[i-1]&&s[u]===e[n-1]){const p=e[--n].nextSibling;t.insertBefore(s[u++],e[c++].nextSibling),t.insertBefore(s[--i],p),e[n]=s[i]}else{if(!h){h=new Map;let g=u;for(;g<i;)h.set(s[g],g++)}const p=h.get(e[c]);if(p!=null)if(u<p&&p<i){let g=c,x=1,b;for(;++g<n&&g<i&&!((b=h.get(e[g]))==null||b!==p+x);)x++;if(x>p-u){const _=e[c];for(;u<p;)t.insertBefore(s[u++],_)}else t.replaceChild(s[u++],e[c++])}else c++;else e[c++].remove()}}}const uN="_$DX_DELEGATE";function YD(t,e,s,r={}){let n;return wD(i=>{n=i,e===document?t():aO(e,t(),e.firstChild?null:void 0,s)},r.owner),()=>{n(),e.textContent=""}}function GW(t,e,s,r){let n;const i=()=>{const u=document.createElement("template");return u.innerHTML=t,u.content.firstChild},c=()=>(n||(n=i())).cloneNode(!0);return c.cloneNode=c,c}function KD(t,e=window.document){const s=e[uN]||(e[uN]=new Set);for(let r=0,n=t.length;r<n;r++){const i=t[r];s.has(i)||(s.add(i),e.addEventListener(i,lO))}}function Qx(t,e,s){Bi(t)||(s==null?t.removeAttribute(e):t.setAttribute(e,s))}function WD(t,e,s,r){Bi(t)||(r==null?t.removeAttributeNS(e,s):t.setAttributeNS(e,s,r))}function ZD(t,e,s){Bi(t)||(s?t.setAttribute(e,""):t.removeAttribute(e))}function QD(t,e){Bi(t)||(e==null?t.removeAttribute("class"):t.className=e)}function JD(t,e,s,r){if(r)Array.isArray(s)?(t[`$$${e}`]=s[0],t[`$$${e}Data`]=s[1]):t[`$$${e}`]=s;else if(Array.isArray(s)){const n=s[0];t.addEventListener(e,s[0]=i=>n.call(t,s[1],i))}else t.addEventListener(e,s,typeof s!="function"&&s)}function eO(t,e,s={}){const r=Object.keys(e||{}),n=Object.keys(s);let i,c;for(i=0,c=n.length;i<c;i++){const u=n[i];!u||u==="undefined"||e[u]||(dN(t,u,!1),delete s[u])}for(i=0,c=r.length;i<c;i++){const u=r[i],f=!!e[u];!u||u==="undefined"||s[u]===f||!f||(dN(t,u,!0),s[u]=f)}return s}function tO(t,e,s){if(!e)return s?Qx(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof s=="string"&&(r.cssText=s=void 0),s||(s={}),e||(e={});let n,i;for(i in s)e[i]==null&&r.removeProperty(i),delete s[i];for(i in e)n=e[i],n!==s[i]&&(r.setProperty(i,n),s[i]=n);return s}function sO(t,e={},s,r){const n={};return r||Si(()=>n.children=yd(t,e.children,n.children)),Si(()=>typeof e.ref=="function"&&rO(e.ref,t)),Si(()=>nO(t,e,s,!0,n,!0)),n}function rO(t,e,s){return Ca(()=>t(e,s))}function aO(t,e,s,r){if(s!==void 0&&!r&&(r=[]),typeof e!="function")return yd(t,e,r,s);Si(n=>yd(t,e(),n,s),r)}function nO(t,e,s,r,n={},i=!1){e||(e={});for(const c in n)if(!(c in e)){if(c==="children")continue;n[c]=fN(t,c,null,n[c],s,i,e)}for(const c in e){if(c==="children")continue;const u=e[c];n[c]=fN(t,c,u,n[c],s,i,e)}}function oO(t){let e,s;return!Bi()||!(e=ot.registry.get(s=cO()))?t():(ot.completed&&ot.completed.add(e),ot.registry.delete(s),e)}function Bi(t){return!!ot.context&&!ot.done&&(!t||t.isConnected)}function iO(t){return t.toLowerCase().replace(/-([a-z])/g,(e,s)=>s.toUpperCase())}function dN(t,e,s){const r=e.trim().split(/\s+/);for(let n=0,i=r.length;n<i;n++)t.classList.toggle(r[n],s)}function fN(t,e,s,r,n,i,c){let u,f,h,p,g;if(e==="style")return tO(t,s,r);if(e==="classList")return eO(t,s,r);if(s===r)return r;if(e==="ref")i||s(t);else if(e.slice(0,3)==="on:"){const x=e.slice(3);r&&t.removeEventListener(x,r,typeof r!="function"&&r),s&&t.addEventListener(x,s,typeof s!="function"&&s)}else if(e.slice(0,10)==="oncapture:"){const x=e.slice(10);r&&t.removeEventListener(x,r,!0),s&&t.addEventListener(x,s,!0)}else if(e.slice(0,2)==="on"){const x=e.slice(2).toLowerCase(),b=FD.has(x);if(!b&&r){const _=Array.isArray(r)?r[0]:r;t.removeEventListener(x,_)}(b||s)&&(JD(t,x,s,b),b&&KD([x]))}else if(e.slice(0,5)==="attr:")Qx(t,e.slice(5),s);else if(e.slice(0,5)==="bool:")ZD(t,e.slice(5),s);else if((g=e.slice(0,5)==="prop:")||(h=VD.has(e))||!n&&((p=qD(e,t.tagName))||(f=BD.has(e)))||(u=t.nodeName.includes("-")||"is"in c)){if(g)e=e.slice(5),f=!0;else if(Bi(t))return s;e==="class"||e==="className"?QD(t,s):u&&!f&&!h?t[iO(e)]=s:t[p||e]=s}else{const x=n&&e.indexOf(":")>-1&&GD[e.split(":")[0]];x?WD(t,x,e,s):Qx(t,zD[e]||e,s)}return s}function lO(t){if(ot.registry&&ot.events&&ot.events.find(([f,h])=>h===t))return;let e=t.target;const s=`$$${t.type}`,r=t.target,n=t.currentTarget,i=f=>Object.defineProperty(t,"target",{configurable:!0,value:f}),c=()=>{const f=e[s];if(f&&!e.disabled){const h=e[`${s}Data`];if(h!==void 0?f.call(e,h,t):f.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},u=()=>{for(;c()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),ot.registry&&!ot.done&&(ot.done=_$HY.done=!0),t.composedPath){const f=t.composedPath();i(f[0]);for(let h=0;h<f.length-2&&(e=f[h],!!c());h++){if(e._$host){e=e._$host,u();break}if(e.parentNode===n)break}}else u();i(r)}function yd(t,e,s,r,n){const i=Bi(t);if(i){!s&&(s=[...t.childNodes]);let f=[];for(let h=0;h<s.length;h++){const p=s[h];p.nodeType===8&&p.data.slice(0,2)==="!$"?p.remove():f.push(p)}s=f}for(;typeof s=="function";)s=s();if(e===s)return s;const c=typeof e,u=r!==void 0;if(t=u&&s[0]&&s[0].parentNode||t,c==="string"||c==="number"){if(i||c==="number"&&(e=e.toString(),e===s))return s;if(u){let f=s[0];f&&f.nodeType===3?f.data!==e&&(f.data=e):f=document.createTextNode(e),s=kl(t,s,r,f)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||c==="boolean"){if(i)return s;s=kl(t,s,r)}else{if(c==="function")return Si(()=>{let f=e();for(;typeof f=="function";)f=f();s=yd(t,f,s,r)}),()=>s;if(Array.isArray(e)){const f=[],h=s&&Array.isArray(s);if(Jx(f,e,s,n))return Si(()=>s=yd(t,f,s,r,!0)),()=>s;if(i){if(!f.length)return s;if(r===void 0)return s=[...t.childNodes];let p=f[0];if(p.parentNode!==t)return s;const g=[p];for(;(p=p.nextSibling)!==r;)g.push(p);return s=g}if(f.length===0){if(s=kl(t,s,r),u)return s}else h?s.length===0?hN(t,f,r):XD(t,s,f):(s&&kl(t),hN(t,f));s=f}else if(e.nodeType){if(i&&e.parentNode)return s=u?[e]:e;if(Array.isArray(s)){if(u)return s=kl(t,s,r,e);kl(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function Jx(t,e,s,r){let n=!1;for(let i=0,c=e.length;i<c;i++){let u=e[i],f=s&&s[t.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)t.push(u);else if(Array.isArray(u))n=Jx(t,u,f)||n;else if(h==="function")if(r){for(;typeof u=="function";)u=u();n=Jx(t,Array.isArray(u)?u:[u],Array.isArray(f)?f:[f])||n}else t.push(u),n=!0;else{const p=String(u);f&&f.nodeType===3&&f.data===p?t.push(f):t.push(document.createTextNode(p))}}return n}function hN(t,e,s=null){for(let r=0,n=e.length;r<n;r++)t.insertBefore(e[r],s)}function kl(t,e,s,r){if(s===void 0)return t.textContent="";const n=r||document.createTextNode("");if(e.length){let i=!1;for(let c=e.length-1;c>=0;c--){const u=e[c];if(n!==u){const f=u.parentNode===t;!i&&!c?f?t.replaceChild(n,u):t.insertBefore(n,s):f&&u.remove()}else i=!0}}else t.insertBefore(n,s);return[n]}function cO(){return ot.getNextContextId()}const uO="http://www.w3.org/2000/svg";function dO(t,e=!1){return e?document.createElementNS(uO,t):document.createElement(t)}function fO(t,e){const s=Na(t);return Na(()=>{const r=s();switch(typeof r){case"function":return Ca(()=>r(e));case"string":const n=HD.has(r),i=ot.context?oO():dO(r,n);return sO(i,e,n),i}})}function XW(t){const[,e]=DD(t,["component"]);return fO(()=>t.component,e)}const hO=H2(void 0),mO=H2(void 0),YW=()=>{const t=CD(mO);if(!t)throw new Error("useDevtoolsOnClose must be used within a TanStackRouterDevtools component");return t};var W2=t=>{throw TypeError(t)},Z2=(t,e,s)=>e.has(t)||W2("Cannot "+s),Ys=(t,e,s)=>(Z2(t,e,"read from private field"),e.get(t)),Zr=(t,e,s)=>e.has(t)?W2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Vs=(t,e,s,r)=>(Z2(t,e,"write to private field"),e.set(t,s),s),Fu,Hu,Gu,Xu,Yu,Oh,$h,Lh,Ku,Gl,Wu,Ih;class pO{constructor(e){Zr(this,Fu),Zr(this,Hu),Zr(this,Gu),Zr(this,Xu),Zr(this,Yu),Zr(this,Oh),Zr(this,$h),Zr(this,Lh),Zr(this,Ku),Zr(this,Gl,!1),Zr(this,Wu),Zr(this,Ih),Vs(this,Fu,xo(e.router)),Vs(this,Hu,xo(e.routerState)),Vs(this,Gu,e.position??"bottom-left"),Vs(this,Xu,e.initialIsOpen??!1),Vs(this,Yu,e.shadowDOMTarget),Vs(this,Oh,e.panelProps),Vs(this,$h,e.closeButtonProps),Vs(this,Lh,e.toggleButtonProps),Vs(this,Ku,e.containerElement)}mount(e){if(Ys(this,Gl))throw new Error("Devtools is already mounted");const s=YD(()=>{const[r]=Ys(this,Fu),[n]=Ys(this,Hu),i=Ys(this,Gu),c=Ys(this,Xu),u=Ys(this,Yu),f=Ys(this,Oh),h=Ys(this,$h),p=Ys(this,Lh),g=Ys(this,Ku);let x;return Ys(this,Wu)?x=Ys(this,Wu):(x=OD(()=>Dt(()=>import("./FloatingTanStackRouterDevtools-DhhPSNit.js"),[])),Vs(this,Wu,x)),cN(hO.Provider,{value:u,get children(){return cN(x,{position:i,initialIsOpen:c,router:r,routerState:n,shadowDOMTarget:u,panelProps:f,closeButtonProps:h,toggleButtonProps:p,containerElement:g})}})},e);Vs(this,Gl,!0),Vs(this,Ih,s)}unmount(){var e;if(!Ys(this,Gl))throw new Error("Devtools is not mounted");(e=Ys(this,Ih))==null||e.call(this),Vs(this,Gl,!1)}setRouter(e){Ys(this,Fu)[1](e)}setRouterState(e){Ys(this,Hu)[1](e)}setOptions(e){e.position!==void 0&&Vs(this,Gu,e.position),e.initialIsOpen!==void 0&&Vs(this,Xu,e.initialIsOpen),e.shadowDOMTarget!==void 0&&Vs(this,Yu,e.shadowDOMTarget),e.containerElement!==void 0&&Vs(this,Ku,e.containerElement)}}Fu=new WeakMap;Hu=new WeakMap;Gu=new WeakMap;Xu=new WeakMap;Yu=new WeakMap;Oh=new WeakMap;$h=new WeakMap;Lh=new WeakMap;Ku=new WeakMap;Gl=new WeakMap;Wu=new WeakMap;Ih=new WeakMap;function gO(t){const{initialIsOpen:e,panelProps:s,closeButtonProps:r,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:f}=t,h=ka({warn:!1}),p=f??h,g=Ds({router:p}),x=y.useRef(null),[b]=y.useState(()=>new pO({initialIsOpen:e,panelProps:s,closeButtonProps:r,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:p,routerState:g}));return y.useEffect(()=>{b.setRouter(p)},[b,p]),y.useEffect(()=>{b.setRouterState(g)},[b,g]),y.useEffect(()=>{b.setOptions({initialIsOpen:e,panelProps:s,closeButtonProps:r,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u})},[b,e,s,r,n,i,c,u]),y.useEffect(()=>(x.current&&b.mount(x.current),()=>{b.unmount()}),[b]),a.jsx(y.Fragment,{children:a.jsx("div",{ref:x})})}const xO=gO;console.warn("[@tanstack/router-devtools] This package has moved to @tanstack/react-router-devtools. Please switch to the new package at your earliest convenience, as this package will be dropped in the next major version release.");var Et;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function s(n){throw new Error}t.assertNever=s,t.arrayToEnum=n=>{const i={};for(const c of n)i[c]=c;return i},t.getValidEnumValues=n=>{const i=t.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),c={};for(const u of i)c[u]=n[u];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(const c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function r(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Et||(Et={}));var mN;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(mN||(mN={}));const Ve=Et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),co=t=>{switch(typeof t){case"undefined":return Ve.undefined;case"string":return Ve.string;case"number":return Number.isNaN(t)?Ve.nan:Ve.number;case"boolean":return Ve.boolean;case"function":return Ve.function;case"bigint":return Ve.bigint;case"symbol":return Ve.symbol;case"object":return Array.isArray(t)?Ve.array:t===null?Ve.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ve.promise:typeof Map<"u"&&t instanceof Map?Ve.map:typeof Set<"u"&&t instanceof Set?Ve.set:typeof Date<"u"&&t instanceof Date?Ve.date:Ve.object;default:return Ve.unknown}},Se=Et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Wa extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(i){return i.message},r={_errors:[]},n=i=>{for(const c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)r._errors.push(s(c));else{let u=r,f=0;for(;f<c.path.length;){const h=c.path[f];f===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(s(c))):u[h]=u[h]||{_errors:[]},u=u[h],f++}}};return n(this),r}static assert(e){if(!(e instanceof Wa))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},r=[];for(const n of this.issues)n.path.length>0?(s[n.path[0]]=s[n.path[0]]||[],s[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:s}}get formErrors(){return this.flatten()}}Wa.create=t=>new Wa(t);const ev=(t,e)=>{let s;switch(t.code){case Se.invalid_type:t.received===Ve.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case Se.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,Et.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:s=`Unrecognized key(s) in object: ${Et.joinValues(t.keys,", ")}`;break;case Se.invalid_union:s="Invalid input";break;case Se.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Et.joinValues(t.options)}`;break;case Se.invalid_enum_value:s=`Invalid enum value. Expected ${Et.joinValues(t.options)}, received '${t.received}'`;break;case Se.invalid_arguments:s="Invalid function arguments";break;case Se.invalid_return_type:s="Invalid function return type";break;case Se.invalid_date:s="Invalid date";break;case Se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:Et.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case Se.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case Se.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case Se.custom:s="Invalid input";break;case Se.invalid_intersection_types:s="Intersection results could not be merged";break;case Se.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case Se.not_finite:s="Number must be finite";break;default:s=e.defaultError,Et.assertNever(t)}return{message:s}};let vO=ev;function yO(){return vO}const bO=t=>{const{data:e,path:s,errorMaps:r,issueData:n}=t,i=[...s,...n.path||[]],c={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let u="";const f=r.filter(h=>!!h).slice().reverse();for(const h of f)u=h(c,{data:e,defaultError:u}).message;return{...n,path:i,message:u}};function Pe(t,e){const s=yO(),r=bO({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===ev?void 0:ev].filter(n=>!!n)});t.common.issues.push(r)}class Ir{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const r=[];for(const n of s){if(n.status==="aborted")return rt;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,s){const r=[];for(const n of s){const i=await n.key,c=await n.value;r.push({key:i,value:c})}return Ir.mergeObjectSync(e,r)}static mergeObjectSync(e,s){const r={};for(const n of s){const{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return rt;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(r[i.value]=c.value)}return{status:e.value,value:r}}}const rt=Object.freeze({status:"aborted"}),Zu=t=>({status:"dirty",value:t}),na=t=>({status:"valid",value:t}),pN=t=>t.status==="aborted",gN=t=>t.status==="dirty",fc=t=>t.status==="valid",nm=t=>typeof Promise<"u"&&t instanceof Promise;var Ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ue||(Ue={}));class ko{constructor(e,s,r,n){this._cachedPath=[],this.parent=e,this.data=s,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xN=(t,e)=>{if(fc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Wa(t.common.issues);return this._error=s,this._error}}};function mt(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:r,description:n}=t;if(e&&(s||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,u)=>{const{message:f}=t;return c.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??r??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:f??s??u.defaultError}},description:n}}class St{get description(){return this._def.description}_getType(e){return co(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ir,ctx:{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(nm(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const r=this.safeParse(e,s);if(r.success)return r.data;throw r.error}safeParse(e,s){const r={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},n=this._parseSync({data:e,path:r.path,parent:r});return xN(r,n)}"~validate"(e){var r,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return fc(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(n=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>fc(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,s){const r=await this.safeParseAsync(e,s);if(r.success)return r.data;throw r.error}async safeParseAsync(e,s){const r={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(nm(n)?n:Promise.resolve(n));return xN(r,i)}refine(e,s){const r=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,i)=>{const c=e(n),u=()=>i.addIssue({code:Se.custom,...r(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(e,s){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof s=="function"?s(r,n):s),!1))}_refinement(e){return new mc({schema:this,typeName:at.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return jo.create(this,this._def)}nullable(){return pc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fa.create(this)}promise(){return cm.create(this,this._def)}or(e){return im.create([this,e],this._def)}and(e){return lm.create(this,e,this._def)}transform(e){return new mc({...mt(this._def),schema:this,typeName:at.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new rv({...mt(this._def),innerType:this,defaultValue:s,typeName:at.ZodDefault})}brand(){return new qO({typeName:at.ZodBranded,type:this,...mt(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new av({...mt(this._def),innerType:this,catchValue:s,typeName:at.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return vy.create(this,e)}readonly(){return nv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wO=/^c[^\s-]{8,}$/i,_O=/^[0-9a-z]+$/,jO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,SO=/^[a-z0-9_-]{21}$/i,CO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,EO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ux;const TO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,RO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,MO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,PO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DO=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,OO=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$O=new RegExp(`^${Q2}$`);function J2(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function LO(t){return new RegExp(`^${J2(t)}$`)}function IO(t){let e=`${Q2}T${J2(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function BO(t,e){return!!((e==="v4"||!e)&&TO.test(t)||(e==="v6"||!e)&&MO.test(t))}function VO(t,e){if(!CO.test(t))return!1;try{const[s]=t.split("."),r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function zO(t,e){return!!((e==="v4"||!e)&&RO.test(t)||(e==="v6"||!e)&&PO.test(t))}class vo extends St{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ve.string){const i=this._getOrReturnCtx(e);return Pe(i,{code:Se.invalid_type,expected:Ve.string,received:i.parsedType}),rt}const r=new Ir;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const c=e.data.length>i.value,u=e.data.length<i.value;(c||u)&&(n=this._getOrReturnCtx(e,n),c?Pe(n,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Pe(n,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")AO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"email",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")ux||(ux=new RegExp(kO,"u")),ux.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"emoji",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")NO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"uuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")SO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"nanoid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")wO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"cuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")_O.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"cuid2",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")jO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"ulid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),Pe(n,{validation:"url",code:Se.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"regex",code:Se.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?IO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?$O.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?LO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?EO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"duration",code:Se.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?BO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"ip",code:Se.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?VO(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"jwt",code:Se.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?zO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"cidr",code:Se.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?DO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"base64",code:Se.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?OO.test(e.data)||(n=this._getOrReturnCtx(e,n),Pe(n,{validation:"base64url",code:Se.invalid_string,message:i.message}),r.dirty()):Et.assertNever(i);return{status:r.value,value:e.data}}_regex(e,s,r){return this.refinement(n=>e.test(n),{validation:s,code:Se.invalid_string,...Ue.errToObj(r)})}_addCheck(e){return new vo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ue.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ue.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ue.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ue.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...Ue.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...Ue.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...Ue.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...Ue.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...Ue.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...Ue.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...Ue.errToObj(s)})}nonempty(e){return this.min(1,Ue.errToObj(e))}trim(){return new vo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new vo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new vo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}vo.create=t=>new vo({checks:[],typeName:at.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...mt(t)});function UO(t,e){const s=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=s>r?s:r,i=Number.parseInt(t.toFixed(n).replace(".","")),c=Number.parseInt(e.toFixed(n).replace(".",""));return i%c/10**n}class bd extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ve.number){const i=this._getOrReturnCtx(e);return Pe(i,{code:Se.invalid_type,expected:Ve.number,received:i.parsedType}),rt}let r;const n=new Ir;for(const i of this._def.checks)i.kind==="int"?Et.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?UO(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.not_finite,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,r,n){return new bd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:Ue.toString(n)}]})}_addCheck(e){return new bd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:Ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ue.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Et.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(s===null||r.value>s)&&(s=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(s)&&Number.isFinite(e)}}bd.create=t=>new bd({checks:[],typeName:at.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...mt(t)});class wd extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ve.bigint)return this._getInvalidInput(e);let r;const n=new Ir;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Pe(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return Pe(s,{code:Se.invalid_type,expected:Ve.bigint,received:s.parsedType}),rt}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,r,n){return new wd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:r,message:Ue.toString(n)}]})}_addCheck(e){return new wd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}wd.create=t=>new wd({checks:[],typeName:at.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...mt(t)});class vN extends St{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ve.boolean){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.boolean,received:r.parsedType}),rt}return na(e.data)}}vN.create=t=>new vN({typeName:at.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...mt(t)});class om extends St{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ve.date){const i=this._getOrReturnCtx(e);return Pe(i,{code:Se.invalid_type,expected:Ve.date,received:i.parsedType}),rt}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Pe(i,{code:Se.invalid_date}),rt}const r=new Ir;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),Pe(n,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Et.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new om({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:Ue.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:Ue.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}om.create=t=>new om({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:at.ZodDate,...mt(t)});class yN extends St{_parse(e){if(this._getType(e)!==Ve.symbol){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.symbol,received:r.parsedType}),rt}return na(e.data)}}yN.create=t=>new yN({typeName:at.ZodSymbol,...mt(t)});class bN extends St{_parse(e){if(this._getType(e)!==Ve.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.undefined,received:r.parsedType}),rt}return na(e.data)}}bN.create=t=>new bN({typeName:at.ZodUndefined,...mt(t)});class wN extends St{_parse(e){if(this._getType(e)!==Ve.null){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.null,received:r.parsedType}),rt}return na(e.data)}}wN.create=t=>new wN({typeName:at.ZodNull,...mt(t)});class _N extends St{constructor(){super(...arguments),this._any=!0}_parse(e){return na(e.data)}}_N.create=t=>new _N({typeName:at.ZodAny,...mt(t)});class jN extends St{constructor(){super(...arguments),this._unknown=!0}_parse(e){return na(e.data)}}jN.create=t=>new jN({typeName:at.ZodUnknown,...mt(t)});class To extends St{_parse(e){const s=this._getOrReturnCtx(e);return Pe(s,{code:Se.invalid_type,expected:Ve.never,received:s.parsedType}),rt}}To.create=t=>new To({typeName:at.ZodNever,...mt(t)});class NN extends St{_parse(e){if(this._getType(e)!==Ve.undefined){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.void,received:r.parsedType}),rt}return na(e.data)}}NN.create=t=>new NN({typeName:at.ZodVoid,...mt(t)});class Fa extends St{_parse(e){const{ctx:s,status:r}=this._processInputParams(e),n=this._def;if(s.parsedType!==Ve.array)return Pe(s,{code:Se.invalid_type,expected:Ve.array,received:s.parsedType}),rt;if(n.exactLength!==null){const c=s.data.length>n.exactLength.value,u=s.data.length<n.exactLength.value;(c||u)&&(Pe(s,{code:c?Se.too_big:Se.too_small,minimum:u?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(Pe(s,{code:Se.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(Pe(s,{code:Se.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),s.common.async)return Promise.all([...s.data].map((c,u)=>n.type._parseAsync(new ko(s,c,s.path,u)))).then(c=>Ir.mergeArray(r,c));const i=[...s.data].map((c,u)=>n.type._parseSync(new ko(s,c,s.path,u)));return Ir.mergeArray(r,i)}get element(){return this._def.type}min(e,s){return new Fa({...this._def,minLength:{value:e,message:Ue.toString(s)}})}max(e,s){return new Fa({...this._def,maxLength:{value:e,message:Ue.toString(s)}})}length(e,s){return new Fa({...this._def,exactLength:{value:e,message:Ue.toString(s)}})}nonempty(e){return this.min(1,e)}}Fa.create=(t,e)=>new Fa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:at.ZodArray,...mt(e)});function Xl(t){if(t instanceof xs){const e={};for(const s in t.shape){const r=t.shape[s];e[s]=jo.create(Xl(r))}return new xs({...t._def,shape:()=>e})}else return t instanceof Fa?new Fa({...t._def,type:Xl(t.element)}):t instanceof jo?jo.create(Xl(t.unwrap())):t instanceof pc?pc.create(Xl(t.unwrap())):t instanceof ki?ki.create(t.items.map(e=>Xl(e))):t}class xs extends St{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=Et.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==Ve.object){const h=this._getOrReturnCtx(e);return Pe(h,{code:Se.invalid_type,expected:Ve.object,received:h.parsedType}),rt}const{status:r,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof To&&this._def.unknownKeys==="strip"))for(const h in n.data)c.includes(h)||u.push(h);const f=[];for(const h of c){const p=i[h],g=n.data[h];f.push({key:{status:"valid",value:h},value:p._parse(new ko(n,g,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof To){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of u)f.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(h==="strict")u.length>0&&(Pe(n,{code:Se.unrecognized_keys,keys:u}),r.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of u){const g=n.data[p];f.push({key:{status:"valid",value:p},value:h._parse(new ko(n,g,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of f){const g=await p.key,x=await p.value;h.push({key:g,value:x,alwaysSet:p.alwaysSet})}return h}).then(h=>Ir.mergeObjectSync(r,h)):Ir.mergeObjectSync(r,f)}get shape(){return this._def.shape()}strict(e){return Ue.errToObj,new xs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,r)=>{var i,c;const n=((c=(i=this._def).errorMap)==null?void 0:c.call(i,s,r).message)??r.defaultError;return s.code==="unrecognized_keys"?{message:Ue.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new xs({...this._def,unknownKeys:"strip"})}passthrough(){return new xs({...this._def,unknownKeys:"passthrough"})}extend(e){return new xs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:at.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new xs({...this._def,catchall:e})}pick(e){const s={};for(const r of Et.objectKeys(e))e[r]&&this.shape[r]&&(s[r]=this.shape[r]);return new xs({...this._def,shape:()=>s})}omit(e){const s={};for(const r of Et.objectKeys(this.shape))e[r]||(s[r]=this.shape[r]);return new xs({...this._def,shape:()=>s})}deepPartial(){return Xl(this)}partial(e){const s={};for(const r of Et.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?s[r]=n:s[r]=n.optional()}return new xs({...this._def,shape:()=>s})}required(e){const s={};for(const r of Et.objectKeys(this.shape))if(e&&!e[r])s[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof jo;)i=i._def.innerType;s[r]=i}return new xs({...this._def,shape:()=>s})}keyof(){return eE(Et.objectKeys(this.shape))}}xs.create=(t,e)=>new xs({shape:()=>t,unknownKeys:"strip",catchall:To.create(),typeName:at.ZodObject,...mt(e)});xs.strictCreate=(t,e)=>new xs({shape:()=>t,unknownKeys:"strict",catchall:To.create(),typeName:at.ZodObject,...mt(e)});xs.lazycreate=(t,e)=>new xs({shape:t,unknownKeys:"strip",catchall:To.create(),typeName:at.ZodObject,...mt(e)});class im extends St{_parse(e){const{ctx:s}=this._processInputParams(e),r=this._def.options;function n(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return s.common.issues.push(...u.ctx.common.issues),u.result;const c=i.map(u=>new Wa(u.ctx.common.issues));return Pe(s,{code:Se.invalid_union,unionErrors:c}),rt}if(s.common.async)return Promise.all(r.map(async i=>{const c={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:c}),ctx:c}})).then(n);{let i;const c=[];for(const f of r){const h={...s,common:{...s.common,issues:[]},parent:null},p=f._parseSync({data:s.data,path:s.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const u=c.map(f=>new Wa(f));return Pe(s,{code:Se.invalid_union,unionErrors:u}),rt}}get options(){return this._def.options}}im.create=(t,e)=>new im({options:t,typeName:at.ZodUnion,...mt(e)});function tv(t,e){const s=co(t),r=co(e);if(t===e)return{valid:!0,data:t};if(s===Ve.object&&r===Ve.object){const n=Et.objectKeys(e),i=Et.objectKeys(t).filter(u=>n.indexOf(u)!==-1),c={...t,...e};for(const u of i){const f=tv(t[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(s===Ve.array&&r===Ve.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<t.length;i++){const c=t[i],u=e[i],f=tv(c,u);if(!f.valid)return{valid:!1};n.push(f.data)}return{valid:!0,data:n}}else return s===Ve.date&&r===Ve.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class lm extends St{_parse(e){const{status:s,ctx:r}=this._processInputParams(e),n=(i,c)=>{if(pN(i)||pN(c))return rt;const u=tv(i.value,c.value);return u.valid?((gN(i)||gN(c))&&s.dirty(),{status:s.value,value:u.data}):(Pe(r,{code:Se.invalid_intersection_types}),rt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}lm.create=(t,e,s)=>new lm({left:t,right:e,typeName:at.ZodIntersection,...mt(s)});class ki extends St{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ve.array)return Pe(r,{code:Se.invalid_type,expected:Ve.array,received:r.parsedType}),rt;if(r.data.length<this._def.items.length)return Pe(r,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),rt;!this._def.rest&&r.data.length>this._def.items.length&&(Pe(r,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...r.data].map((c,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new ko(r,c,r.path,u)):null}).filter(c=>!!c);return r.common.async?Promise.all(i).then(c=>Ir.mergeArray(s,c)):Ir.mergeArray(s,i)}get items(){return this._def.items}rest(e){return new ki({...this._def,rest:e})}}ki.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ki({items:t,typeName:at.ZodTuple,rest:null,...mt(e)})};class SN extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ve.map)return Pe(r,{code:Se.invalid_type,expected:Ve.map,received:r.parsedType}),rt;const n=this._def.keyType,i=this._def.valueType,c=[...r.data.entries()].map(([u,f],h)=>({key:n._parse(new ko(r,u,r.path,[h,"key"])),value:i._parse(new ko(r,f,r.path,[h,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of c){const h=await f.key,p=await f.value;if(h.status==="aborted"||p.status==="aborted")return rt;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}})}else{const u=new Map;for(const f of c){const h=f.key,p=f.value;if(h.status==="aborted"||p.status==="aborted")return rt;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}}}}SN.create=(t,e,s)=>new SN({valueType:e,keyType:t,typeName:at.ZodMap,...mt(s)});class _d extends St{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ve.set)return Pe(r,{code:Se.invalid_type,expected:Ve.set,received:r.parsedType}),rt;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(Pe(r,{code:Se.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(Pe(r,{code:Se.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const i=this._def.valueType;function c(f){const h=new Set;for(const p of f){if(p.status==="aborted")return rt;p.status==="dirty"&&s.dirty(),h.add(p.value)}return{status:s.value,value:h}}const u=[...r.data.values()].map((f,h)=>i._parse(new ko(r,f,r.path,h)));return r.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,s){return new _d({...this._def,minSize:{value:e,message:Ue.toString(s)}})}max(e,s){return new _d({...this._def,maxSize:{value:e,message:Ue.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}_d.create=(t,e)=>new _d({valueType:t,minSize:null,maxSize:null,typeName:at.ZodSet,...mt(e)});class CN extends St{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}CN.create=(t,e)=>new CN({getter:t,typeName:at.ZodLazy,...mt(e)});class EN extends St{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Pe(s,{received:s.data,code:Se.invalid_literal,expected:this._def.value}),rt}return{status:"valid",value:e.data}}get value(){return this._def.value}}EN.create=(t,e)=>new EN({value:t,typeName:at.ZodLiteral,...mt(e)});function eE(t,e){return new hc({values:t,typeName:at.ZodEnum,...mt(e)})}class hc extends St{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),r=this._def.values;return Pe(s,{expected:Et.joinValues(r),received:s.parsedType,code:Se.invalid_type}),rt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),r=this._def.values;return Pe(s,{received:s.data,code:Se.invalid_enum_value,options:r}),rt}return na(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return hc.create(e,{...this._def,...s})}exclude(e,s=this._def){return hc.create(this.options.filter(r=>!e.includes(r)),{...this._def,...s})}}hc.create=eE;class sv extends St{_parse(e){const s=Et.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ve.string&&r.parsedType!==Ve.number){const n=Et.objectValues(s);return Pe(r,{expected:Et.joinValues(n),received:r.parsedType,code:Se.invalid_type}),rt}if(this._cache||(this._cache=new Set(Et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=Et.objectValues(s);return Pe(r,{received:r.data,code:Se.invalid_enum_value,options:n}),rt}return na(e.data)}get enum(){return this._def.values}}sv.create=(t,e)=>new sv({values:t,typeName:at.ZodNativeEnum,...mt(e)});class cm extends St{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==Ve.promise&&s.common.async===!1)return Pe(s,{code:Se.invalid_type,expected:Ve.promise,received:s.parsedType}),rt;const r=s.parsedType===Ve.promise?s.data:Promise.resolve(s.data);return na(r.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}cm.create=(t,e)=>new cm({type:t,typeName:at.ZodPromise,...mt(e)});class mc extends St{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===at.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{Pe(r,c),c.fatal?s.abort():s.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const c=n.transform(r.data,i);if(r.common.async)return Promise.resolve(c).then(async u=>{if(s.value==="aborted")return rt;const f=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return f.status==="aborted"?rt:f.status==="dirty"||s.value==="dirty"?Zu(f.value):f});{if(s.value==="aborted")return rt;const u=this._def.schema._parseSync({data:c,path:r.path,parent:r});return u.status==="aborted"?rt:u.status==="dirty"||s.value==="dirty"?Zu(u.value):u}}if(n.type==="refinement"){const c=u=>{const f=n.refinement(u,i);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?rt:(u.status==="dirty"&&s.dirty(),c(u.value),{status:s.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?rt:(u.status==="dirty"&&s.dirty(),c(u.value).then(()=>({status:s.value,value:u.value}))))}if(n.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!fc(c))return rt;const u=n.transform(c.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>fc(c)?Promise.resolve(n.transform(c.value,i)).then(u=>({status:s.value,value:u})):rt);Et.assertNever(n)}}mc.create=(t,e,s)=>new mc({schema:t,typeName:at.ZodEffects,effect:e,...mt(s)});mc.createWithPreprocess=(t,e,s)=>new mc({schema:e,effect:{type:"preprocess",transform:t},typeName:at.ZodEffects,...mt(s)});class jo extends St{_parse(e){return this._getType(e)===Ve.undefined?na(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jo.create=(t,e)=>new jo({innerType:t,typeName:at.ZodOptional,...mt(e)});class pc extends St{_parse(e){return this._getType(e)===Ve.null?na(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}pc.create=(t,e)=>new pc({innerType:t,typeName:at.ZodNullable,...mt(e)});class rv extends St{_parse(e){const{ctx:s}=this._processInputParams(e);let r=s.data;return s.parsedType===Ve.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}rv.create=(t,e)=>new rv({innerType:t,typeName:at.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...mt(e)});class av extends St{_parse(e){const{ctx:s}=this._processInputParams(e),r={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return nm(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wa(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Wa(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}av.create=(t,e)=>new av({innerType:t,typeName:at.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...mt(e)});class AN extends St{_parse(e){if(this._getType(e)!==Ve.nan){const r=this._getOrReturnCtx(e);return Pe(r,{code:Se.invalid_type,expected:Ve.nan,received:r.parsedType}),rt}return{status:"valid",value:e.data}}}AN.create=t=>new AN({typeName:at.ZodNaN,...mt(t)});class qO extends St{_parse(e){const{ctx:s}=this._processInputParams(e),r=s.data;return this._def.type._parse({data:r,path:s.path,parent:s})}unwrap(){return this._def.type}}class vy extends St{_parse(e){const{status:s,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?rt:i.status==="dirty"?(s.dirty(),Zu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?rt:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,s){return new vy({in:e,out:s,typeName:at.ZodPipeline})}}class nv extends St{_parse(e){const s=this._def.innerType._parse(e),r=n=>(fc(n)&&(n.value=Object.freeze(n.value)),n);return nm(s)?s.then(n=>r(n)):r(s)}unwrap(){return this._def.innerType}}nv.create=(t,e)=>new nv({innerType:t,typeName:at.ZodReadonly,...mt(e)});var at;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(at||(at={}));const Ws=vo.create;To.create;Fa.create;const Gm=xs.create;im.create;lm.create;ki.create;const FO=hc.create,HO=sv.create;cm.create;jo.create;pc.create;const GO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Dt(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class yy extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class XO extends yy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class YO extends yy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class KO extends yy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ov;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ov||(ov={}));var WO=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};class ZO{constructor(e,{headers:s={},customFetch:r,region:n=ov.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=GO(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return WO(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:c}=s;let u={},{region:f}=s;f||(f=this.region),f&&f!=="any"&&(u["x-region"]=f);let h;c&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=c):typeof c=="string"?(u["Content-Type"]="text/plain",h=c):typeof FormData<"u"&&c instanceof FormData?h=c:(u["Content-Type"]="application/json",h=JSON.stringify(c)));const p=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),n),body:h}).catch(_=>{throw new XO(_)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new YO(p);if(!p.ok)throw new KO(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield p.json():x==="application/octet-stream"?b=yield p.blob():x==="text/event-stream"?b=p:x==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null}}catch(n){return{data:null,error:n}}})}}var ks={},Tl={},Rl={},Ml={},Pl={},Dl={},QO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gc=QO();const JO=gc.fetch,tE=gc.fetch.bind(gc),sE=gc.Headers,e$=gc.Request,t$=gc.Response,Cc=Object.freeze(Object.defineProperty({__proto__:null,Headers:sE,Request:e$,Response:t$,default:tE,fetch:JO},Symbol.toStringTag,{value:"Module"})),s$=Q3(Cc);var uh={},kN;function rE(){if(kN)return uh;kN=1,Object.defineProperty(uh,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return uh.default=t,uh}var TN;function aE(){if(TN)return Dl;TN=1;var t=Dl&&Dl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Dl,"__esModule",{value:!0});const e=t(s$),s=t(rE());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,c){return this.headers=Object.assign({},this.headers),this.headers[i]=c,this}then(i,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,x;let b=null,_=null,j=null,N=h.status,C=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=R:_=JSON.parse(R))}const S=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&P&&P.length>1&&(j=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,j=null,N=406,C="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const S=await h.text();try{b=JSON.parse(S),Array.isArray(b)&&h.status===404&&(_=[],b=null,N=200,C="OK")}catch{h.status===404&&S===""?(N=204,C="No Content"):b={message:S}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,N=200,C="OK"),b&&this.shouldThrowOnError)throw new s.default(b)}return{error:b,data:_,count:j,status:N,statusText:C}});return this.shouldThrowOnError||(f=f.catch(h=>{var p,g,x;return{error:{message:`${(p=h==null?void 0:h.name)!==null&&p!==void 0?p:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),f.then(i,c)}returns(){return this}overrideTypes(){return this}}return Dl.default=r,Dl}var RN;function nE(){if(RN)return Pl;RN=1;var t=Pl&&Pl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pl,"__esModule",{value:!0});const e=t(aE());class s extends e.default{select(n){let i=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:c,foreignTable:u,referencedTable:f=u}={}){const h=f?`${f}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${n}.${i?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:c=i}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${n}`),this}range(n,i,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${n}`),this.url.searchParams.set(h,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:c=!1,buffers:u=!1,wal:f=!1,format:h="text"}={}){var p;const g=[n?"analyze":null,i?"verbose":null,c?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${g};`,h==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Pl.default=s,Pl}var MN;function by(){if(MN)return Ml;MN=1;var t=Ml&&Ml.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ml,"__esModule",{value:!0});const e=t(nE());class s extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const c=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(n,`in.(${c})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:c,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const h=c===void 0?"":`(${c})`;return this.url.searchParams.append(n,`${f}fts${h}.${i}`),this}match(n){return Object.entries(n).forEach(([i,c])=>{this.url.searchParams.append(i,`eq.${c}`)}),this}not(n,i,c){return this.url.searchParams.append(n,`not.${i}.${c}`),this}or(n,{foreignTable:i,referencedTable:c=i}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${n})`),this}filter(n,i,c){return this.url.searchParams.append(n,`${i}.${c}`),this}}return Ml.default=s,Ml}var PN;function oE(){if(PN)return Rl;PN=1;var t=Rl&&Rl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rl,"__esModule",{value:!0});const e=t(by());class s{constructor(n,{headers:i={},schema:c,fetch:u}){this.url=n,this.headers=i,this.schema=c,this.fetch=u}select(n,{head:i=!1,count:c}={}){const u=i?"HEAD":"GET";let f=!1;const h=(n??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:c=!0}={}){const u="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),i&&f.push(`count=${i}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(n)){const h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:c=!1,count:u,defaultToNull:f=!0}={}){const h="POST",p=[`resolution=${c?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),f||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(n)){const g=n.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const c="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),this.headers.Prefer=u.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",c=[];return n&&c.push(`count=${n}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Rl.default=s,Rl}var Pu={},Du={},DN;function r$(){return DN||(DN=1,Object.defineProperty(Du,"__esModule",{value:!0}),Du.version=void 0,Du.version="0.0.0-automated"),Du}var ON;function a$(){if(ON)return Pu;ON=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.DEFAULT_HEADERS=void 0;const t=r$();return Pu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Pu}var $N;function n$(){if($N)return Tl;$N=1;var t=Tl&&Tl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Tl,"__esModule",{value:!0});const e=t(oE()),s=t(by()),r=a$();class n{constructor(c,{headers:u={},schema:f,fetch:h}={}){this.url=c,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=f,this.fetch=h}from(c){const u=new URL(`${this.url}/${c}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new n(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:f=!1,get:h=!1,count:p}={}){let g;const x=new URL(`${this.url}/rpc/${c}`);let b;f||h?(g=f?"HEAD":"GET",Object.entries(u).filter(([j,N])=>N!==void 0).map(([j,N])=>[j,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([j,N])=>{x.searchParams.append(j,N)})):(g="POST",b=u);const _=Object.assign({},this.headers);return p&&(_.Prefer=`count=${p}`),new s.default({method:g,url:x,headers:_,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Tl.default=n,Tl}var LN;function o$(){if(LN)return ks;LN=1;var t=ks&&ks.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ks,"__esModule",{value:!0}),ks.PostgrestError=ks.PostgrestBuilder=ks.PostgrestTransformBuilder=ks.PostgrestFilterBuilder=ks.PostgrestQueryBuilder=ks.PostgrestClient=void 0;const e=t(n$());ks.PostgrestClient=e.default;const s=t(oE());ks.PostgrestQueryBuilder=s.default;const r=t(by());ks.PostgrestFilterBuilder=r.default;const n=t(nE());ks.PostgrestTransformBuilder=n.default;const i=t(aE());ks.PostgrestBuilder=i.default;const c=t(rE());return ks.PostgrestError=c.default,ks.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:c.default},ks}var i$=o$();const l$=Vm(i$),{PostgrestClient:c$,PostgrestQueryBuilder:KW,PostgrestFilterBuilder:WW,PostgrestTransformBuilder:ZW,PostgrestBuilder:QW,PostgrestError:JW}=l$;let iv;typeof window>"u"?iv=require("ws"):iv=window.WebSocket;const u$="2.11.10",d$={"X-Client-Info":`realtime-js/${u$}`},f$="1.0.0",iE=1e4,h$=1e3;var ic;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ic||(ic={}));var or;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(or||(or={}));var xa;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xa||(xa={}));var lv;(function(t){t.websocket="websocket"})(lv||(lv={}));var gi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(gi||(gi={}));class m${constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let c=this.HEADER_LENGTH+2;const u=r.decode(e.slice(c,c+n));c=c+n;const f=r.decode(e.slice(c,c+i));c=c+i;const h=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{ref:null,topic:u,event:f,payload:h}}}let lE=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ft;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ft||(Ft={}));const IN=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,c)=>(i[c]=p$(c,t,e,n),i),{})},p$=(t,e,s,r)=>{const n=e.find(u=>u.name===t),i=n==null?void 0:n.type,c=s[t];return i&&!r.includes(i)?cE(i,c):cv(c)},cE=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return y$(e,s)}switch(t){case Ft.bool:return g$(e);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return x$(e);case Ft.json:case Ft.jsonb:return v$(e);case Ft.timestamp:return b$(e);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return cv(e);default:return cv(e)}},cv=t=>t,g$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},x$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},v$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},y$=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const c=t.slice(1,s);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(u=>cE(e,u))}return t},b$=t=>typeof t=="string"?t.replace(" ","T"):t,uE=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class dx{constructor(e,s,r={},n=iE){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var BN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(BN||(BN={}));class nd{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nd.syncState(this.state,n,i,c),this.pendingDiffs.forEach(f=>{this.state=nd.syncDiff(this.state,f,i,c)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=nd.syncDiff(this.state,n,i,c),u())}),this.onJoin((n,i,c)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:c})}),this.onLeave((n,i,c)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(i,(h,p)=>{c[h]||(f[h]=p)}),this.map(c,(h,p)=>{const g=i[h];if(g){const x=p.map(N=>N.presence_ref),b=g.map(N=>N.presence_ref),_=p.filter(N=>b.indexOf(N.presence_ref)<0),j=g.filter(N=>x.indexOf(N.presence_ref)<0);_.length>0&&(u[h]=_),j.length>0&&(f[h]=j)}else u[h]=p}),this.syncDiff(i,{joins:u,leaves:f},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const g=e[u].map(b=>b.presence_ref),x=p.filter(b=>g.indexOf(b.presence_ref)<0);e[u].unshift(...x)}r(u,p,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,n(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var VN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(VN||(VN={}));var zN;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zN||(zN={}));var _n;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(_n||(_n={}));class wy{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=or.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new dx(this,xa.join,this.params,this.timeout),this.rejoinTimer=new lE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=or.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=or.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=or.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=or.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xa.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new nd(this),this.broadcastEndpointURL=uE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:c,private:u}}=this.params;this._onError(p=>e==null?void 0:e(_n.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(_n.CLOSED));const f={},h={broadcast:i,presence:c,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(_n.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,_=[];for(let j=0;j<b;j++){const N=x[j],{filter:{event:C,schema:E,table:S,filter:P}}=N,R=p&&p[j];if(R&&R.event===C&&R.schema===E&&R.table===S&&R.filter===P)_.push(Object.assign(Object.assign({},N),{id:R.id}));else{this.unsubscribe(),this.state=or.errored,e==null||e(_n.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(_n.SUBSCRIBED);return}}).receive("error",p=>{this.state=or.errored,e==null||e(_n.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_n.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=or.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xa.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const n=new dx(this,xa.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),c}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new dx(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=xa;if(r&&[u,f,h,p].indexOf(c)>=0&&r!==this._joinRef())return;let x=this._onMessage(c,s,r);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var _,j,N;return((_=b.filter)===null||_===void 0?void 0:_.event)==="*"||((N=(j=b.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===c}).map(b=>b.callback(x,r)):(i=this.bindings[c])===null||i===void 0||i.filter(b=>{var _,j,N,C,E,S;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const P=b.id,R=(_=b.filter)===null||_===void 0?void 0:_.event;return P&&((j=s.ids)===null||j===void 0?void 0:j.includes(P))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(E=(C=b==null?void 0:b.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return P==="*"||P===((S=s==null?void 0:s.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof x=="object"&&"ids"in x){const _=x.data,{schema:j,table:N,commit_timestamp:C,type:E,errors:S}=_;x=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:C,eventType:E,new:{},old:{},errors:S}),this._getPayloadRecords(_))}b.callback(x,r)})}_isClosed(){return this.state===or.closed}_isJoined(){return this.state===or.joined}_isJoining(){return this.state===or.joining}_isLeaving(){return this.state===or.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&wy.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xa.close,{},e)}_onError(e){this._on(xa.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=or.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=IN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=IN(e.columns,e.old_record)),s}}const UN=()=>{},w$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _${constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=d$,this.params={},this.timeout=iE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=UN,this.ref=0,this.logger=UN,this.conn=null,this.sendBuffer=[],this.serializer=new m$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let c;return i?c=i:typeof fetch>"u"?c=(...u)=>Dt(async()=>{const{default:f}=await Promise.resolve().then(()=>Cc);return{default:f}},void 0).then(({default:f})=>f(...u)):c=fetch,(...u)=>c(...u)},this.endPoint=`${e}/${lv.websocket}`,this.httpEndpoint=uE(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,c)=>c(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=iv),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new j$(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:f$}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ic.connecting:return gi.Connecting;case ic.open:return gi.Open;case ic.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new wy(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(xa.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(h$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:c}=s;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${c&&"("+c+")"||""}`,i),Array.from(this.channels).filter(u=>u._isMember(r)).forEach(u=>u._trigger(n,i,c)),this.stateChangeCallbacks.message.forEach(u=>u(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(xa.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([w$],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class j${constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ic.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class _y extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ts(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class N$ extends _y{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class uv extends _y{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var S$=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};const dE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Dt(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},C$=()=>S$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Dt(()=>Promise.resolve().then(()=>Cc),void 0)).Response:Response}),dv=t=>{if(Array.isArray(t))return t.map(s=>dv(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=dv(r)}),e};var Vi=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};const fx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),E$=(t,e,s)=>Vi(void 0,void 0,void 0,function*(){const r=yield C$();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new N$(fx(n),t.status||500))}).catch(n=>{e(new uv(fx(n),n))}):e(new uv(fx(t),t))}),A$=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function Ld(t,e,s,r,n,i){return Vi(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(s,A$(e,r,n,i)).then(f=>{if(!f.ok)throw f;return r!=null&&r.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>E$(f,u,r))})})}function um(t,e,s,r){return Vi(this,void 0,void 0,function*(){return Ld(t,"GET",e,s,r)})}function uo(t,e,s,r,n){return Vi(this,void 0,void 0,function*(){return Ld(t,"POST",e,r,n,s)})}function k$(t,e,s,r,n){return Vi(this,void 0,void 0,function*(){return Ld(t,"PUT",e,r,n,s)})}function T$(t,e,s,r){return Vi(this,void 0,void 0,function*(){return Ld(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function fE(t,e,s,r,n){return Vi(this,void 0,void 0,function*(){return Ld(t,"DELETE",e,r,n,s)})}var vr=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};const R$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M${constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=dE(n)}uploadOrUpdate(e,s,r,n){return vr(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},qN),n);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f))):(i=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),n!=null&&n.headers&&(u=Object.assign(Object.assign({},u),n.headers));const h=this._removeEmptyFolders(s),p=this._getFinalPath(h),g=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:i,headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{})),x=yield g.json();return g.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(Ts(i))return{data:null,error:i};throw i}})}upload(e,s,r){return vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return vr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),c=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",s);try{let f;const h=Object.assign({upsert:qN.upsert},n),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",r)):typeof FormData<"u"&&r instanceof FormData?(f=r,f.append("cacheControl",h.cacheControl)):(f=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield this.fetch(u.toString(),{method:"PUT",body:f,headers:p}),x=yield g.json();return g.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(f){if(Ts(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,s){return vr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield uo(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),c=new URL(this.url+i.url),u=c.searchParams.get("token");if(!u)throw new _y("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(r){if(Ts(r))return{data:null,error:r};throw r}})}update(e,s,r){return vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return vr(this,void 0,void 0,function*(){try{return{data:yield uo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Ts(n))return{data:null,error:n};throw n}})}copy(e,s,r){return vr(this,void 0,void 0,function*(){try{return{data:{path:(yield uo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Ts(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return vr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield uo(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(n){if(Ts(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return vr(this,void 0,void 0,function*(){try{const n=yield uo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(n){if(Ts(n))return{data:null,error:n};throw n}})}download(e,s){return vr(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),c=i?`?${i}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield um(this.fetch,`${this.url}/${n}/${u}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Ts(u))return{data:null,error:u};throw u}})}info(e){return vr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield um(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:dv(r),error:null}}catch(r){if(Ts(r))return{data:null,error:r};throw r}})}exists(e){return vr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield T$(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ts(r)&&r instanceof uv){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const u=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});f!==""&&n.push(f);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return vr(this,void 0,void 0,function*(){try{return{data:yield fE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}list(e,s,r){return vr(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},R$),s),{prefix:e||""});return{data:yield uo(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ts(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const P$="2.7.1",D$={"X-Client-Info":`storage-js/${P$}`};var Ol=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};class O${constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},D$),s),this.fetch=dE(r)}listBuckets(){return Ol(this,void 0,void 0,function*(){try{return{data:yield um(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ts(e))return{data:null,error:e};throw e}})}getBucket(e){return Ol(this,void 0,void 0,function*(){try{return{data:yield um(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Ol(this,void 0,void 0,function*(){try{return{data:yield uo(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ts(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Ol(this,void 0,void 0,function*(){try{return{data:yield k$(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ts(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ol(this,void 0,void 0,function*(){try{return{data:yield uo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Ol(this,void 0,void 0,function*(){try{return{data:yield fE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ts(s))return{data:null,error:s};throw s}})}}class $$ extends O${constructor(e,s={},r){super(e,s,r)}from(e){return new M$(this.url,this.headers,e,this.fetch)}}const L$="2.50.0";let Qu="";typeof Deno<"u"?Qu="deno":typeof document<"u"?Qu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qu="react-native":Qu="node";const I$={"X-Client-Info":`supabase-js-${Qu}/${L$}`},B$={headers:I$},V$={schema:"public"},z$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U$={};var q$=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};const F$=t=>{let e;return t?e=t:typeof fetch>"u"?e=tE:e=fetch,(...s)=>e(...s)},H$=()=>typeof Headers>"u"?sE:Headers,G$=(t,e,s)=>{const r=F$(s),n=H$();return(i,c)=>q$(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:t;let h=new n(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),r(i,Object.assign(Object.assign({},c),{headers:h}))})};var X$=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};function Y$(t){return t.endsWith("/")?t:t+"/"}function K$(t,e){var s,r;const{db:n,auth:i,realtime:c,global:u}=t,{db:f,auth:h,realtime:p,global:g}=e,x={db:Object.assign(Object.assign({},f),n),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},p),c),global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(s=g==null?void 0:g.headers)!==null&&s!==void 0?s:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>X$(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const hE="2.70.0",Yl=30*1e3,fv=3,hx=fv*Yl,W$="http://localhost:9999",Z$="supabase.auth.token",Q$={"X-Client-Info":`gotrue-js/${hE}`},hv="X-Supabase-Api-Version",mE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},J$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,eL=6e5;class Xm extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class tL extends Xm{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function sL(t){return nt(t)&&t.name==="AuthApiError"}class pE extends Xm{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Io extends Xm{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class oo extends Io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rL(t){return nt(t)&&t.name==="AuthSessionMissingError"}class dh extends Io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fh extends Io{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hh extends Io{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aL(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class FN extends Io{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mv extends Io{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function mx(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class HN extends Io{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class od extends Io{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const dm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),GN=` 	
\r=`.split(""),nL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<GN.length;e+=1)t[GN[e].charCodeAt(0)]=-2;for(let e=0;e<dm.length;e+=1)t[dm[e].charCodeAt(0)]=e;return t})();function XN(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(dm[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(dm[r]),e.queuedBits-=6}}function gE(t,e,s){const r=nL[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function YN(t){const e=[],s=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=c=>{lL(c,r,s)};for(let c=0;c<t.length;c+=1)gE(t.charCodeAt(c),n,i);return e.join("")}function oL(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function iL(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}oL(r,e)}}function lL(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function cL(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)gE(t.charCodeAt(n),s,r);return new Uint8Array(e)}function uL(t){const e=[];return iL(t,s=>e.push(s)),new Uint8Array(e)}function dL(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>XN(n,s,r)),XN(null,s,r),e.join("")}function fL(t){return Math.round(Date.now()/1e3)+t}function hL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ha=()=>typeof window<"u"&&typeof document<"u",li={tested:!1,writable:!1},id=()=>{if(!ha())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(li.tested)return li.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),li.tested=!0,li.writable=!0}catch{li.tested=!0,li.writable=!1}return li.writable};function mL(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const xE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Dt(async()=>{const{default:r}=await Promise.resolve().then(()=>Cc);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},pL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vE=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},mh=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ph=async(t,e)=>{await t.removeItem(e)};class Ym{constructor(){this.promise=new Ym.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Ym.promiseConstructor=Promise;function px(t){const e=t.split(".");if(e.length!==3)throw new od("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!J$.test(e[r]))throw new od("JWT not in base64url format");return{header:JSON.parse(YN(e[0])),payload:JSON.parse(YN(e[1])),signature:cL(e[2]),raw:{header:e[0],payload:e[1]}}}async function gL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xL(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const c=await t(i);if(!e(i,null,c)){r(c);return}}catch(c){if(!e(i,c)){n(c);return}}})()})}function vL(t){return("0"+t.toString(16)).substr(-2)}function yL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,vL).join("")}async function bL(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function wL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await bL(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $l(t,e,s=!1){const r=yL();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await vE(t,`${e}-code-verifier`,n);const i=await wL(r);return[i,r===i?"plain":"s256"]}const _L=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jL(t){const e=t.headers.get(hv);if(!e||!e.match(_L))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function NL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function SL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ll(t){if(!CL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var EL=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const mi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AL=[502,503,504];async function KN(t){var e;if(!pL(t))throw new mv(mi(t),0);if(AL.includes(t.status))throw new mv(mi(t),t.status);let s;try{s=await t.json()}catch(i){throw new pE(mi(i),i)}let r;const n=jL(t);if(n&&n.getTime()>=mE["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new HN(mi(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new oo}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,c)=>i&&typeof c=="string",!0))throw new HN(mi(s),t.status,s.weak_password.reasons);throw new tL(mi(s),t.status||500,r)}const kL=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function vt(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[hv]||(i[hv]=mE["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const c=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await TL(t,e,s+u,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(f):{data:Object.assign({},f),error:null}}async function TL(t,e,s,r,n,i){const c=kL(e,r,n,i);let u;try{u=await t(s,Object.assign({},c))}catch(f){throw console.error(f),new mv(mi(f),0)}if(u.ok||await KN(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(f){await KN(f)}}function wn(t){var e;let s=null;DL(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=fL(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function WN(t){const e=wn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ho(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function RL(t){return{data:t,error:null}}function ML(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,c=EL(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function PL(t){return t}function DL(t){return t.access_token&&t.refresh_token&&t.expires_in}const gx=["global","local","others"];var OL=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class $L{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=xE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=gx[0]){if(gx.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gx.join(", ")}`);try{return await vt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ho})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=OL(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ML,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(nt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await vt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ho})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:PL});if(p.error)throw p.error;const g=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(_.split(";")[1].split("=")[1]);h[`${N}Page`]=j}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(nt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ll(e);try{return await vt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ho})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ll(e);try{return await vt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ho})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Ll(e);try{return await vt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ho})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ll(e.userId);try{const{data:s,error:r}=await vt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ll(e.userId),Ll(e.id);try{return{data:await vt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}const LL={getItem:t=>id()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{id()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{id()&&globalThis.localStorage.removeItem(t)}};function ZN(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function IL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Il={debug:!!(globalThis&&id()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class BL extends yE{}async function VL(t,e,s){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new BL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Il.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}IL();const zL={url:W$,storageKey:Z$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Q$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function QN(t,e,s){return await s()}class jd{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jd.nextInstanceID,jd.nextInstanceID+=1,this.instanceID>0&&ha()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},zL),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new $L({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=xE(n.fetch),this.lock=n.lock||QN,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ha()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=VL:this.lock=QN,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:id()?this.storage=LL:(this.memoryStorage={},this.storage=ZN(this.memoryStorage)):(this.memoryStorage={},this.storage=ZN(this.memoryStorage)),ha()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=mL(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),ha()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),aL(i)){const f=(e=i.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:c,redirectType:u}=n;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return nt(s)?{error:s}:{error:new pE("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:wn}),{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:p,password:g,options:x}=e;let b=null,_=null;this.flowType==="pkce"&&([b,_]=await $l(this.storage,this.storageKey)),i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:g,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:_},xform:wn})}else if("phone"in e){const{phone:p,password:g,options:x}=e;i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:wn})}else throw new fh("You must provide either an email or phone number and a password");const{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:c,options:u}=e;s=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:WN})}else if("phone"in e){const{phone:i,password:c,options:u}=e;s=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:WN})}else throw new fh("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new dh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,n,i,c,u,f,h,p,g,x,b;let _,j;if("message"in e)_=e.message,j=e.signature;else{const{chain:N,wallet:C,statement:E,options:S}=e;let P;if(ha())if(typeof C=="object")P=C;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))P=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=C}const R=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in P&&P.signIn){const D=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),E?{statement:E}:null));let $;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")$=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)$=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)_=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),j=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${R.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((g=(p=S==null?void 0:S.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...S.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const D=await P.signMessage(new TextEncoder().encode(_),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=D}}try{const{data:N,error:C}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:dL(j)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:wn});if(C)throw C;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new dh}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:C})}catch(N){if(nt(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await mh(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:c}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:wn});if(await ph(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new dh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:c})}catch(i){if(nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:c}=e,u=await vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:wn}),{data:f,error:h}=u;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new dh}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await $l(this.storage,this.storageKey));const{error:g}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(r=f==null?void 0:f.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new fh("You must provide either an email or phone number.")}catch(u){if(nt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:u}=await vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:wn});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,c=null;return this.flowType==="pkce"&&([i,c]=await $l(this.storage,this.storageKey)),await vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:c}),headers:this.headers,xform:RL})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new oo;const{error:n}=await vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:c}=await vt(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:c,error:u}=await vt(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new fh("You must provide either an email or phone number and a type")}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await mh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<hx:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,h,p)=>(!c&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,p))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ho}):await this._useSession(async s=>{var r,n,i;const{data:c,error:u}=s;if(u)throw u;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oo}:await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=c.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:ho})})}catch(s){if(nt(s))return rL(s)&&(await this._removeSession(),await ph(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new oo;const c=n.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await $l(this.storage,this.storageKey));const{data:h,error:p}=await vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:ho});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oo;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:c}=px(e.access_token);if(c.exp&&(r=c.exp,n=r<=s),n){const{session:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(nt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new oo;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!ha())throw new hh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new FN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hh("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new FN("No code detected.");const{data:E,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!i||!u||!c||!h)throw new hh("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let x=p+g;f&&(x=parseInt(f));const b=x-p;b*1e3<=Yl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const _=x-g;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,x,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,x,p);const{data:j,error:N}=await this._getUser(i);if(N)throw N;const C={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:g,expires_at:x,refresh_token:c,token_type:h,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(r){if(nt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await mh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const c=(r=n.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(sL(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await ph(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=hL(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:c}=s;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await $l(this.storage,this.storageKey,!0));try{return await vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var c,u,f,h,p;const{data:g,error:x}=i;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await vt(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(n)throw n;return ha()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(nt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:c}=s;if(c)throw c;return await vt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await xL(async n=>(n>0&&await gL(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:wn})),(n,i)=>{const c=200*Math.pow(2,n);return i&&mx(i)&&Date.now()+c-r<Yl})}catch(r){if(this._debug(s,"error",r),nt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),ha()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await mh(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<hx;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${hx}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),mx(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new oo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ym;const{data:i,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!i.session)throw new oo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(n,"error",i),nt(i)){const c={session:null,error:i};return mx(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){i.push(f)}});if(await Promise.all(c),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vE(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ph(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ha()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Yl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Yl}ms, refresh threshold is ${fv} ticks`),n<=fv&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof yE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ha()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,c]=await $l(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(c)}`});n.push(u.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await vt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:c}=s;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:h}=await vt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((n=f==null?void 0:f.totp)===null||n===void 0)&&n.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(s){if(nt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:c,error:u}=await vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(nt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(c=>c.factor_type==="totp"&&c.status==="verified"),i=r.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=px(n.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(f="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(c=>c.kid===e);if(r||(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+eL>Date.now()))return r;const{data:n,error:i}=await vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new od("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(c=>c.kid===e),!r)throw new od("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:b,error:_}=await this.getSession();if(_||!b.session)return{data:null,error:_};r=b.session.access_token}const{header:n,payload:i,signature:c,raw:{header:u,payload:f}}=px(r);if(NL(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:i,header:n,signature:c},error:null}}const h=SL(n.alg),p=await this.fetchJwk(n.kid,s),g=await crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,c,uL(`${u}.${f}`)))throw new od("Invalid JWT signature");return{data:{claims:i,header:n,signature:c},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}jd.nextInstanceID=0;const UL=jd;class qL extends UL{constructor(e){super(e)}}var FL=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(r.next(p))}catch(g){c(g)}}function f(p){try{h(r.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((r=r.apply(t,e||[])).next())})};class HL{constructor(e,s,r){var n,i,c;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const u=Y$(e),f=new URL(u);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:V$,realtime:U$,auth:Object.assign(Object.assign({},z$),{storageKey:h}),global:B$},g=K$(r??{},p);this.storageKey=(n=g.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=G$(s,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new c$(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new ZO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return FL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:c,lock:u,debug:f},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qL({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:c,lock:u,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _$(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bE=(t,e,s)=>new HL(t,e,s),GL=Gm({email:Ws().email("Email inválido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}),XL=Gm({email:Ws().email("Email inválido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres"),confirmPassword:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}).refine(t=>t.password===t.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]}),YL={onAuthUserChanged:!1,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},KL={user:null,session:null,isLoading:!1,isAuthenticated:!1,error:null,loading:YL},wE=y.createContext({...KL,signInWithEmail:async()=>({success:!1}),signUpWithEmail:async()=>({success:!1}),signOut:async()=>{},updateProfile:async()=>({success:!1})});var ld=(t=>(t.LOCAL="LOCAL",t.DEV="DEV",t.PROD="PROD",t))(ld||{});const WL=Gm({VITE_ENV:HO(ld),VITE_BASE_URL:Ws().url().optional(),VITE_SUPABASE_URL:Ws().url(),VITE_SUPABASE_ANON_KEY:Ws(),VITE_SERVICE_ROLE:Ws().optional(),VITE_LOGIN_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_ANON_KEY:Ws().optional()});function ZL(){const t={VITE_ENV:"DEV",VITE_BASE_URL:"http://tower-trials.vercel.app",VITE_SUPABASE_URL:"https://rpagdztnwtyjatslrjay.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyODUxNjEsImV4cCI6MjA2Mjg2MTE2MX0.DIB6tYhoJ_Rb5pGr8Vu236MFhFUaMIq0x7PrUTR0ztI",VITE_SERVICE_ROLE:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzI4NTE2MSwiZXhwIjoyMDYyODYxMTYxfQ.kylyn4vQcXVEMJuZ_baF9Mt4Ka5d1RFraocaIx3lrB4",VITE_LOGIN_URL:"http://tower-trials.vercel.app/login",VITE_SUPABASE_LOCAL_URL:void 0,VITE_SUPABASE_LOCAL_ANON_KEY:void 0};try{return WL.parse(t)}catch(e){throw console.error("❌ Erro de configuração de ambiente:"),e instanceof Wa&&e.errors.forEach(s=>{console.error(`- ${s.path.join(".")}: ${s.message}`)}),console.error(`
📋 Variáveis necessárias:`),console.error("- VITE_ENV (LOCAL, DEV, ou PROD)"),console.error("- VITE_SUPABASE_URL"),console.error("- VITE_SUPABASE_ANON_KEY"),console.error(`
💡 Crie um arquivo .env.local com essas variáveis`),new Error("Configuração de ambiente inválida")}}const ci=ZL(),QL=()=>{switch(ci.VITE_ENV){case ld.LOCAL:return{url:ci.VITE_SUPABASE_LOCAL_URL||"http://127.0.0.1:54321",anonKey:ci.VITE_SUPABASE_LOCAL_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",serviceRoleKey:ci.VITE_SERVICE_ROLE||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU"};case ld.DEV:case ld.PROD:default:return{url:ci.VITE_SUPABASE_URL,anonKey:ci.VITE_SUPABASE_ANON_KEY,serviceRoleKey:ci.VITE_SERVICE_ROLE}}},fm=QL(),je=bE(fm.url,fm.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),JL=bE(fm.url,fm.serviceRoleKey||"",{auth:{autoRefreshToken:!1,persistSession:!1}}),Nd=Object.freeze(Object.defineProperty({__proto__:null,supabase:je,supabaseAdmin:JL},Symbol.toStringTag,{value:"Module"})),fo={getSession:async()=>{try{const{data:{session:t},error:e}=await je.auth.getSession();if(e)throw e;return t}catch(t){return console.error("Erro ao obter sessão:",t instanceof Error?t.message:t),null}},getCurrentUser:async()=>{try{const{data:{user:t},error:e}=await je.auth.getUser();if((e==null?void 0:e.status)===403||!t)return null;if(e)throw e;const{data:s,error:r}=await je.from("users").select("*").eq("uid",t.id).maybeSingle();return r?(console.error("Erro ao buscar perfil:",r.message),null):s?{...t,username:s.username,display_name:s.display_name,avatar_url:s.avatar_url,role:s.role,highest_floor:s.highest_floor,total_games:s.total_games,total_victories:s.total_victories,total_character_level:s.total_character_level,max_character_slots:s.max_character_slots,is_active:s.is_active,last_login:s.last_login}:null}catch(t){return t instanceof Error&&!t.message.includes("JWT")&&console.error("Erro ao obter usuário atual:",t.message),null}},signOut:async()=>{try{const{error:t}=await je.auth.signOut();if(t)throw t}catch(t){throw console.error("Erro ao fazer logout:",t instanceof Error?t.message:t),t}},signInWithEmail:async({email:t,password:e})=>{try{const{data:s,error:r}=await je.auth.signInWithPassword({email:t,password:e});if(r)throw r;if(!s.user)return{user:null,session:null,error:"Usuário não encontrado"};const{data:n,error:i}=await je.from("users").select("*").eq("uid",s.user.id).maybeSingle();return i?(console.error("Erro ao buscar perfil:",i.message),{user:null,session:s.session,error:"Erro ao buscar perfil do usuário"}):n?(await je.from("users").update({last_login:new Date().toISOString()}).eq("uid",s.user.id),{user:{...s.user,username:n.username,display_name:n.display_name,avatar_url:n.avatar_url,role:n.role,highest_floor:n.highest_floor,total_games:n.total_games,total_victories:n.total_victories,total_character_level:n.total_character_level,max_character_slots:n.max_character_slots,is_active:n.is_active,last_login:n.last_login},session:s.session}):{user:null,session:s.session,error:"Perfil não encontrado"}}catch(s){return{user:null,session:null,error:String(s)}}},signUpWithEmail:async t=>{try{const{email:e,password:s,username:r=e.split("@")[0]}=t,{data:n,error:i}=await je.auth.signUp({email:e,password:s,options:{data:{username:r},emailRedirectTo:`${window.location.origin}/auth`}});if(i)throw i;if(!n.user)throw new Error("Falha ao criar usuário");await new Promise(c=>setTimeout(c,1e3));try{await je.rpc("create_user_profile",{p_uid:n.user.id,p_username:r,p_email:e})}catch(c){console.error("Erro ao chamar RPC:",c);try{const{error:u}=await je.from("users").insert({uid:n.user.id,username:r,email:e,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(u){if(console.error("Erro no fallback de inserção:",u),u.code==="23505")return{user:{...n.user,username:r,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session};throw u}}catch(u){console.error("Erro total no processo de criação de perfil:",u)}}return{user:{...n.user,username:r,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session}}catch(e){return console.error("Erro no registro:",e instanceof Error?e.message:e),{user:null,session:null,error:String(e)}}},updateProfile:async t=>{try{const e=await fo.getSession();if(!(e!=null&&e.user))throw new Error("Usuário não autenticado");const{error:s}=await je.from("users").update({display_name:t.display_name,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("uid",e.user.id).select().single();if(s)throw s;return{user:await fo.getCurrentUser(),session:e}}catch(e){return{user:null,session:null,error:String(e)}}},handleAuthError:t=>{if(t instanceof Xm)switch(t.status){case 400:if(t.message.includes("Email not confirmed"))return new Error("Por favor, confirme seu e-mail antes de fazer login");if(t.message.includes("Invalid login credentials"))return new Error("E-mail ou senha incorretos");if(t.message.includes("Password should be at least 6 characters"))return new Error("A senha deve ter pelo menos 6 caracteres");if(t.message.includes("User already registered"))return new Error("Este e-mail já está cadastrado");break;case 401:return new Error("Sessão expirada. Por favor, faça login novamente");case 422:return new Error("Dados inválidos. Verifique as informações e tente novamente");case 429:return new Error("Muitas tentativas. Por favor, aguarde alguns minutos")}return t instanceof Error?t:new Error("Ocorreu um erro inesperado. Tente novamente mais tarde")}},Ju={onAuthUserChanged:!0,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},Ou={user:null,session:null,isLoading:!0,isAuthenticated:!1,error:null,loading:Ju};function e6({children:t}){const e=Ot(),[s,r]=y.useState(Ou),n=y.useCallback(async()=>{r(p=>p.isLoading?{...p,loading:{...p.loading,onAuthUserChanged:!0}}:p);try{const p=await fo.getSession();if(!p){r({...Ou,isLoading:!1,loading:{...Ju,onAuthUserChanged:!1}});return}const g=await fo.getCurrentUser();r({...Ou,user:g,session:p,isAuthenticated:!!g,isLoading:!1,loading:{...Ju,onAuthUserChanged:!1}})}catch(p){console.error("Erro ao carregar usuário:",p instanceof Error?p.message:p),r({...Ou,error:p instanceof Error?p.message:String(p),isLoading:!1,loading:{...Ju,onAuthUserChanged:!1}})}},[]);y.useEffect(()=>{const{data:{subscription:p}}=je.auth.onAuthStateChange((g,x)=>{r(b=>JSON.stringify(x)===JSON.stringify(b.session)?b:{...b,session:x,isLoading:!0,loading:{...b.loading,onAuthUserChanged:!0}})});return()=>{p.unsubscribe()}},[]),y.useEffect(()=>{s.isLoading&&n()},[s.isLoading,n]);const i=y.useCallback(async p=>{r(g=>({...g,loading:{...g.loading,signIn:!0}}));try{const g=await fo.signInWithEmail(p);return g.error?(r(x=>({...x,error:g.error,loading:{...x.loading,signIn:!1}})),{success:!1,error:g.error}):(r(x=>({...x,isLoading:!0,loading:{...x.loading,signIn:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao fazer login";return r(b=>({...b,error:x,loading:{...b.loading,signIn:!1}})),{success:!1,error:x}}},[]),c=y.useCallback(async p=>{r(g=>({...g,loading:{...g.loading,signUp:!0}}));try{const g=await fo.signUpWithEmail(p);return g.error?(r(x=>({...x,error:g.error,loading:{...x.loading,signUp:!1}})),{success:!1,error:g.error}):(r(x=>({...x,isLoading:!0,loading:{...x.loading,signUp:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao criar conta";return r(b=>({...b,error:x,loading:{...b.loading,signUp:!1}})),{success:!1,error:x}}},[]),u=y.useCallback(async()=>{r(p=>({...p,loading:{...p.loading,signOut:!0}}));try{await fo.signOut(),r({...Ou,isLoading:!1,loading:{...Ju,onAuthUserChanged:!1}}),e({to:"/auth",search:{auth:"logout"}})}catch(p){console.error("Erro ao fazer logout:",p instanceof Error?p.message:p),r(g=>({...g,error:p instanceof Error?p.message:String(p),loading:{...g.loading,signOut:!1}}))}},[e]),f=y.useCallback(async p=>{r(g=>({...g,loading:{...g.loading,updateProfile:!0}}));try{const g=await fo.updateProfile(p);return g.error?(r(x=>({...x,error:g.error,loading:{...x.loading,updateProfile:!1}})),{success:!1,error:g.error}):(r(x=>({...x,isLoading:!0,loading:{...x.loading,updateProfile:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao atualizar perfil";return r(b=>({...b,error:x,loading:{...b.loading,updateProfile:!1}})),{success:!1,error:x}}},[]),h=y.useMemo(()=>({...s,signInWithEmail:i,signUpWithEmail:c,signOut:u,updateProfile:f}),[s]);return a.jsx(wE.Provider,{value:h,children:t})}function t6(t){var e,s;return((e=t.main_hand)==null?void 0:e.type)==="weapon"&&((s=t.off_hand)==null?void 0:s.type)==="weapon"}function s6(t){var e,s;return((e=t.off_hand)==null?void 0:e.type)==="armor"&&!((s=t.off_hand)!=null&&s.weapon_subtype)}function r6(t){var e;return((e=t.main_hand)==null?void 0:e.type)==="weapon"?t.main_hand:void 0}const a6=(t,e)=>{const s=[];return[{name:"Ataque",current:(t==null?void 0:t.atk_bonus)||0,new:e.atk_bonus},{name:"Defesa",current:(t==null?void 0:t.def_bonus)||0,new:e.def_bonus},{name:"Mana",current:(t==null?void 0:t.mana_bonus)||0,new:e.mana_bonus},{name:"Velocidade",current:(t==null?void 0:t.speed_bonus)||0,new:e.speed_bonus},{name:"HP",current:(t==null?void 0:t.hp_bonus)||0,new:e.hp_bonus},{name:"Chance Crítica",current:(t==null?void 0:t.critical_chance_bonus)||0,new:e.critical_chance_bonus},{name:"Dano Crítico",current:(t==null?void 0:t.critical_damage_bonus)||0,new:e.critical_damage_bonus},{name:"Duplo Ataque",current:(t==null?void 0:t.double_attack_chance_bonus)||0,new:e.double_attack_chance_bonus},{name:"Dano Mágico",current:(t==null?void 0:t.magic_damage_bonus)||0,new:e.magic_damage_bonus}].forEach(n=>{const i=n.new-n.current;i!==0&&s.push({stat_name:n.name,current_value:n.current,new_value:n.new,difference:i,is_improvement:i>0})}),s},ro={BASE_XP_NEXT_LEVEL:100,BASE_STATS:{hp:100,mana:50,atk:20,def:10,speed:10}};var cs=(t=>(t.SWORD_MASTERY="sword",t.AXE_MASTERY="axe",t.BLUNT_MASTERY="blunt",t.DEFENSE_MASTERY="defense",t.MAGIC_MASTERY="magic",t))(cs||{});function n6(t){return Math.floor(50*Math.pow(1.4,t-1))}function o6(t){return{sword:"Maestria com espadas. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",axe:"Maestria com machados. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",blunt:"Maestria com armas de concussão. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",defense:"Maestria defensiva. Aumenta defesa (+2) por nível e reduz dano recebido.",magic:"Maestria mágica. Aumenta mana (+3), dano mágico (+15%) e cura (+10%) por nível."}[t]}const i6={buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},l6={id:"",user_id:"",name:"",level:1,xp:0,xp_next_level:ro.BASE_XP_NEXT_LEVEL,gold:0,hp:ro.BASE_STATS.hp,max_hp:ro.BASE_STATS.hp,mana:ro.BASE_STATS.mana,max_mana:ro.BASE_STATS.mana,atk:ro.BASE_STATS.atk,def:ro.BASE_STATS.def,speed:ro.BASE_STATS.speed,created_at:"",updated_at:"",isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:1,spells:[],consumables:[],potionUsedThisTurn:!1,active_effects:i6,strength:10,dexterity:10,intelligence:10,wisdom:10,vitality:10,luck:10,critical_chance:0,critical_damage:110,double_attack_chance:0,magic_attack:0,magic_mastery:1,magic_damage_bonus:0},_E={mode:"menu",player:l6,currentEnemy:null,currentFloor:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:0,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1},c6=y.createContext({gameState:_E,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"",gameLog:[],characters:[],selectedCharacter:null,startGame:async()=>{},selectCharacter:async()=>{},loadCharacterForHub:async()=>{},clearGameState:()=>{},performAction:()=>{},returnToMenu:()=>{},resetError:()=>{},addGameLogMessage:()=>{},saveProgress:async()=>{},updatePlayerStats:()=>{},updatePlayerConsumables:()=>{}});function u6(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const d6=t=>{switch(t){case"success":return m6;case"info":return g6;case"warning":return p6;case"error":return x6;default:return null}},f6=Array(12).fill(0),h6=({visible:t,className:e})=>fe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},fe.createElement("div",{className:"sonner-spinner"},f6.map((s,r)=>fe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),m6=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),p6=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),g6=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),x6=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},fe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),v6=fe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},fe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),fe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),y6=()=>{const[t,e]=fe.useState(document.hidden);return fe.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let pv=1;class b6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:r,...n}=e,i=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:pv++,c=this.toasts.find(f=>f.id===i),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(f=>f.id===i?(this.publish({...f,...e,id:i,title:r}),{...f,...e,id:i,dismissible:u,title:r}):f):this.addToast({title:r,...n,dismissible:u,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,c;const u=n.then(async h=>{if(c=["resolve",h],fe.isValidElement(h))i=!1,this.create({id:r,type:"default",message:h});else if(_6(h)&&!h.ok){i=!1;const g=typeof s.error=="function"?await s.error(`HTTP error! status: ${h.status}`):s.error,x=typeof s.description=="function"?await s.description(`HTTP error! status: ${h.status}`):s.description,_=typeof g=="object"&&!fe.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:x,..._})}else if(h instanceof Error){i=!1;const g=typeof s.error=="function"?await s.error(h):s.error,x=typeof s.description=="function"?await s.description(h):s.description,_=typeof g=="object"&&!fe.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:x,..._})}else if(s.success!==void 0){i=!1;const g=typeof s.success=="function"?await s.success(h):s.success,x=typeof s.description=="function"?await s.description(h):s.description,_=typeof g=="object"&&!fe.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:x,..._})}}).catch(async h=>{if(c=["reject",h],s.error!==void 0){i=!1;const p=typeof s.error=="function"?await s.error(h):s.error,g=typeof s.description=="function"?await s.description(h):s.description,b=typeof p=="object"&&!fe.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:g,...b})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),s.finally==null||s.finally.call(s)}),f=()=>new Promise((h,p)=>u.then(()=>c[0]==="reject"?p(c[1]):h(c[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:f}:Object.assign(r,{unwrap:f})},this.custom=(e,s)=>{const r=(s==null?void 0:s.id)||pv++;return this.create({jsx:e(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wr=new b6,w6=(t,e)=>{const s=(e==null?void 0:e.id)||pv++;return wr.addToast({title:t,...e,id:s}),s},_6=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",j6=w6,N6=()=>wr.toasts,S6=()=>wr.getActiveToasts(),me=Object.assign(j6,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:N6,getToasts:S6});u6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gh(t){return t.label!==void 0}const C6=3,E6="24px",A6="16px",JN=4e3,k6=356,T6=14,R6=45,M6=200;function $a(...t){return t.filter(Boolean).join(" ")}function P6(t){const[e,s]=t.split("-"),r=[];return e&&r.push(e),s&&r.push(s),r}const D6=t=>{var e,s,r,n,i,c,u,f,h;const{invert:p,toast:g,unstyled:x,interacting:b,setHeights:_,visibleToasts:j,heights:N,index:C,toasts:E,expanded:S,removeToast:P,defaultRichColors:R,closeButton:D,style:$,cancelButtonStyle:A,actionButtonStyle:M,className:U="",descriptionClassName:Y="",duration:V,position:F,gap:Q,expandByDefault:G,classNames:k,icons:B,closeButtonAriaLabel:z="Close toast"}=t,[W,L]=fe.useState(null),[X,ae]=fe.useState(null),[ee,le]=fe.useState(!1),[ie,se]=fe.useState(!1),[ue,ce]=fe.useState(!1),[be,Ne]=fe.useState(!1),[we,Ce]=fe.useState(!1),[Oe,Qe]=fe.useState(0),[ve,Re]=fe.useState(0),ke=fe.useRef(g.duration||V||JN),st=fe.useRef(null),Ae=fe.useRef(null),I=C===0,q=C+1<=j,K=g.type,ge=g.dismissible!==!1,_e=g.className||"",ye=g.descriptionClassName||"",Me=fe.useMemo(()=>N.findIndex(Je=>Je.toastId===g.id)||0,[N,g.id]),Ye=fe.useMemo(()=>{var Je;return(Je=g.closeButton)!=null?Je:D},[g.closeButton,D]),it=fe.useMemo(()=>g.duration||V||JN,[g.duration,V]),jt=fe.useRef(0),Fs=fe.useRef(0),Hs=fe.useRef(0),zr=fe.useRef(null),[Nr,Sr]=F.split("-"),rr=fe.useMemo(()=>N.reduce((Je,zt,ms)=>ms>=Me?Je:Je+zt.height,0),[N,Me]),ar=y6(),la=g.invert||p,fr=K==="loading";Fs.current=fe.useMemo(()=>Me*Q+rr,[Me,rr]),fe.useEffect(()=>{ke.current=it},[it]),fe.useEffect(()=>{le(!0)},[]),fe.useEffect(()=>{const Je=Ae.current;if(Je){const zt=Je.getBoundingClientRect().height;return Re(zt),_(ms=>[{toastId:g.id,height:zt,position:g.position},...ms]),()=>_(ms=>ms.filter($s=>$s.toastId!==g.id))}},[_,g.id]),fe.useLayoutEffect(()=>{if(!ee)return;const Je=Ae.current,zt=Je.style.height;Je.style.height="auto";const ms=Je.getBoundingClientRect().height;Je.style.height=zt,Re(ms),_($s=>$s.find(ys=>ys.toastId===g.id)?$s.map(ys=>ys.toastId===g.id?{...ys,height:ms}:ys):[{toastId:g.id,height:ms,position:g.position},...$s])},[ee,g.title,g.description,_,g.id,g.jsx,g.action,g.cancel]);const rs=fe.useCallback(()=>{se(!0),Qe(Fs.current),_(Je=>Je.filter(zt=>zt.toastId!==g.id)),setTimeout(()=>{P(g)},M6)},[g,P,_,Fs]);fe.useEffect(()=>{if(g.promise&&K==="loading"||g.duration===1/0||g.type==="loading")return;let Je;return S||b||ar?(()=>{if(Hs.current<jt.current){const $s=new Date().getTime()-jt.current;ke.current=ke.current-$s}Hs.current=new Date().getTime()})():(()=>{ke.current!==1/0&&(jt.current=new Date().getTime(),Je=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),rs()},ke.current))})(),()=>clearTimeout(Je)},[S,b,g,K,ar,rs]),fe.useEffect(()=>{g.delete&&(rs(),g.onDismiss==null||g.onDismiss.call(g,g))},[rs,g.delete]);function Ui(){var Je;if(B!=null&&B.loading){var zt;return fe.createElement("div",{className:$a(k==null?void 0:k.loader,g==null||(zt=g.classNames)==null?void 0:zt.loader,"sonner-loader"),"data-visible":K==="loading"},B.loading)}return fe.createElement(h6,{className:$a(k==null?void 0:k.loader,g==null||(Je=g.classNames)==null?void 0:Je.loader),visible:K==="loading"})}const Os=g.icon||(B==null?void 0:B[K])||d6(K);var hr,ca;return fe.createElement("li",{tabIndex:0,ref:Ae,className:$a(U,_e,k==null?void 0:k.toast,g==null||(e=g.classNames)==null?void 0:e.toast,k==null?void 0:k.default,k==null?void 0:k[K],g==null||(s=g.classNames)==null?void 0:s[K]),"data-sonner-toast":"","data-rich-colors":(hr=g.richColors)!=null?hr:R,"data-styled":!(g.jsx||g.unstyled||x),"data-mounted":ee,"data-promise":!!g.promise,"data-swiped":we,"data-removed":ie,"data-visible":q,"data-y-position":Nr,"data-x-position":Sr,"data-index":C,"data-front":I,"data-swiping":ue,"data-dismissible":ge,"data-type":K,"data-invert":la,"data-swipe-out":be,"data-swipe-direction":X,"data-expanded":!!(S||G&&ee),style:{"--index":C,"--toasts-before":C,"--z-index":E.length-C,"--offset":`${ie?Oe:Fs.current}px`,"--initial-height":G?"auto":`${ve}px`,...$,...g.style},onDragEnd:()=>{ce(!1),L(null),zr.current=null},onPointerDown:Je=>{fr||!ge||(st.current=new Date,Qe(Fs.current),Je.target.setPointerCapture(Je.pointerId),Je.target.tagName!=="BUTTON"&&(ce(!0),zr.current={x:Je.clientX,y:Je.clientY}))},onPointerUp:()=>{var Je,zt,ms;if(be||!ge)return;zr.current=null;const $s=Number(((Je=Ae.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Fo=Number(((zt=Ae.current)==null?void 0:zt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ys=new Date().getTime()-((ms=st.current)==null?void 0:ms.getTime()),as=W==="x"?$s:Fo,ns=Math.abs(as)/ys;if(Math.abs(as)>=R6||ns>.11){Qe(Fs.current),g.onDismiss==null||g.onDismiss.call(g,g),ae(W==="x"?$s>0?"right":"left":Fo>0?"down":"up"),rs(),Ne(!0);return}else{var Ut,Ns;(Ut=Ae.current)==null||Ut.style.setProperty("--swipe-amount-x","0px"),(Ns=Ae.current)==null||Ns.style.setProperty("--swipe-amount-y","0px")}Ce(!1),ce(!1),L(null)},onPointerMove:Je=>{var zt,ms,$s;if(!zr.current||!ge||((zt=window.getSelection())==null?void 0:zt.toString().length)>0)return;const ys=Je.clientY-zr.current.y,as=Je.clientX-zr.current.x;var ns;const Ut=(ns=t.swipeDirections)!=null?ns:P6(F);!W&&(Math.abs(as)>1||Math.abs(ys)>1)&&L(Math.abs(as)>Math.abs(ys)?"x":"y");let Ns={x:0,y:0};const qi=sn=>1/(1.5+Math.abs(sn)/20);if(W==="y"){if(Ut.includes("top")||Ut.includes("bottom"))if(Ut.includes("top")&&ys<0||Ut.includes("bottom")&&ys>0)Ns.y=ys;else{const sn=ys*qi(ys);Ns.y=Math.abs(sn)<Math.abs(ys)?sn:ys}}else if(W==="x"&&(Ut.includes("left")||Ut.includes("right")))if(Ut.includes("left")&&as<0||Ut.includes("right")&&as>0)Ns.x=as;else{const sn=as*qi(as);Ns.x=Math.abs(sn)<Math.abs(as)?sn:as}(Math.abs(Ns.x)>0||Math.abs(Ns.y)>0)&&Ce(!0),(ms=Ae.current)==null||ms.style.setProperty("--swipe-amount-x",`${Ns.x}px`),($s=Ae.current)==null||$s.style.setProperty("--swipe-amount-y",`${Ns.y}px`)}},Ye&&!g.jsx&&K!=="loading"?fe.createElement("button",{"aria-label":z,"data-disabled":fr,"data-close-button":!0,onClick:fr||!ge?()=>{}:()=>{rs(),g.onDismiss==null||g.onDismiss.call(g,g)},className:$a(k==null?void 0:k.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(ca=B==null?void 0:B.close)!=null?ca:v6):null,(K||g.icon||g.promise)&&g.icon!==null&&((B==null?void 0:B[K])!==null||g.icon)?fe.createElement("div",{"data-icon":"",className:$a(k==null?void 0:k.icon,g==null||(n=g.classNames)==null?void 0:n.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Ui():null,g.type!=="loading"?Os:null):null,fe.createElement("div",{"data-content":"",className:$a(k==null?void 0:k.content,g==null||(i=g.classNames)==null?void 0:i.content)},fe.createElement("div",{"data-title":"",className:$a(k==null?void 0:k.title,g==null||(c=g.classNames)==null?void 0:c.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?fe.createElement("div",{"data-description":"",className:$a(Y,ye,k==null?void 0:k.description,g==null||(u=g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),fe.isValidElement(g.cancel)?g.cancel:g.cancel&&gh(g.cancel)?fe.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||A,onClick:Je=>{gh(g.cancel)&&ge&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Je),rs())},className:$a(k==null?void 0:k.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,fe.isValidElement(g.action)?g.action:g.action&&gh(g.action)?fe.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||M,onClick:Je=>{gh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Je),!Je.defaultPrevented&&rs())},className:$a(k==null?void 0:k.actionButton,g==null||(h=g.classNames)==null?void 0:h.actionButton)},g.action.label):null)};function eS(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function O6(t,e){const s={};return[t,e].forEach((r,n)=>{const i=n===1,c=i?"--mobile-offset":"--offset",u=i?A6:E6;function f(h){["top","right","bottom","left"].forEach(p=>{s[`${c}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?f(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?s[`${c}-${h}`]=u:s[`${c}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):f(u)}),s}const $6=fe.forwardRef(function(e,s){const{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:c,closeButton:u,className:f,offset:h,mobileOffset:p,theme:g="light",richColors:x,duration:b,style:_,visibleToasts:j=C6,toastOptions:N,dir:C=eS(),gap:E=T6,icons:S,containerAriaLabel:P="Notifications"}=e,[R,D]=fe.useState([]),$=fe.useMemo(()=>Array.from(new Set([n].concat(R.filter(X=>X.position).map(X=>X.position)))),[R,n]),[A,M]=fe.useState([]),[U,Y]=fe.useState(!1),[V,F]=fe.useState(!1),[Q,G]=fe.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),k=fe.useRef(null),B=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=fe.useRef(null),W=fe.useRef(!1),L=fe.useCallback(X=>{D(ae=>{var ee;return(ee=ae.find(le=>le.id===X.id))!=null&&ee.delete||wr.dismiss(X.id),ae.filter(({id:le})=>le!==X.id)})},[]);return fe.useEffect(()=>wr.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{D(ae=>ae.map(ee=>ee.id===X.id?{...ee,delete:!0}:ee))});return}setTimeout(()=>{I2.flushSync(()=>{D(ae=>{const ee=ae.findIndex(le=>le.id===X.id);return ee!==-1?[...ae.slice(0,ee),{...ae[ee],...X},...ae.slice(ee+1)]:[X,...ae]})})})}),[R]),fe.useEffect(()=>{if(g!=="system"){G(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:ae})=>{G(ae?"dark":"light")})}catch{X.addListener(({matches:ee})=>{try{G(ee?"dark":"light")}catch(le){console.error(le)}})}},[g]),fe.useEffect(()=>{R.length<=1&&Y(!1)},[R]),fe.useEffect(()=>{const X=ae=>{var ee;if(i.every(se=>ae[se]||ae.code===se)){var ie;Y(!0),(ie=k.current)==null||ie.focus()}ae.code==="Escape"&&(document.activeElement===k.current||(ee=k.current)!=null&&ee.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),fe.useEffect(()=>{if(k.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,W.current=!1)}},[k.current]),fe.createElement("section",{ref:s,"aria-label":`${P} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},$.map((X,ae)=>{var ee;const[le,ie]=X.split("-");return R.length?fe.createElement("ol",{key:X,dir:C==="auto"?eS():C,tabIndex:-1,ref:k,className:f,"data-sonner-toaster":!0,"data-sonner-theme":Q,"data-y-position":le,"data-x-position":ie,style:{"--front-toast-height":`${((ee=A[0])==null?void 0:ee.height)||0}px`,"--width":`${k6}px`,"--gap":`${E}px`,..._,...O6(h,p)},onBlur:se=>{W.current&&!se.currentTarget.contains(se.relatedTarget)&&(W.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||W.current||(W.current=!0,z.current=se.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{V||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:se=>{se.target instanceof HTMLElement&&se.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},R.filter(se=>!se.position&&ae===0||se.position===X).map((se,ue)=>{var ce,be;return fe.createElement(D6,{key:se.id,icons:S,index:ue,toast:se,defaultRichColors:x,duration:(ce=N==null?void 0:N.duration)!=null?ce:b,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:r,visibleToasts:j,closeButton:(be=N==null?void 0:N.closeButton)!=null?be:u,interacting:V,position:X,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:L,toasts:R.filter(Ne=>Ne.position==se.position),heights:A.filter(Ne=>Ne.position==se.position),setHeights:M,expandByDefault:c,gap:E,expanded:U,swipeDirections:e.swipeDirections})})):null}))}),jE=y.createContext(null);function L6({children:t}){const[e,s]=y.useState({gameState:_E,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"Bem-vindo ao Tower Trials! Crie um personagem para iniciar sua aventura.",gameLog:[{text:"Bem-vindo ao Tower Trials!",type:"system"}]}),r=(f,h)=>{s(p=>({...p,loading:{...p.loading,[f]:h}}))},n=f=>{s(h=>({...h,gameState:f}))},i=f=>{s(h=>({...h,error:f})),f&&me.error("Erro",{description:f})},c=()=>{s(f=>({...f,error:null}))},u=y.useMemo(()=>({gameState:e.gameState,loading:e.loading,error:e.error,setGameState:n,updateLoading:r,setError:i,resetError:c}),[e]);return a.jsx(jE.Provider,{value:u,children:t})}function Km(){const t=y.useContext(jE);if(!t)throw new Error("useGameState deve ser usado dentro de um GameStateProvider");return t}const NE=y.createContext(null);function I6({children:t}){const[e,s]=y.useState(""),[r,n]=y.useState([]),i=y.useCallback((u,f="system")=>{n(h=>h.slice(-5).some(x=>x.text===u&&x.type===f)?h:[...h,{text:u,type:f}])},[]),c=y.useMemo(()=>({gameMessage:e,gameLog:r,addGameLogMessage:i,setGameMessage:s}),[e,r,i,s]);return a.jsx(NE.Provider,{value:c,children:t})}function Wm(){const t=y.useContext(NE);if(!t)throw new Error("useGameLog deve ser usado dentro de um LogProvider");return t}class yt{static getCachedCharacter(e){const s=this.characterCache.get(e);return s?Date.now()-s.timestamp>this.CACHE_DURATION||!s.isValid?(this.characterCache.delete(e),null):(console.log(`[CharacterCacheService] Cache hit para personagem ${e}`),s.character):null}static setCachedCharacter(e,s){this.characterCache.size>=this.MAX_CACHE_SIZE&&this.cleanOldEntries(),this.characterCache.set(e,{character:s,timestamp:Date.now(),isValid:!0}),console.log(`[CharacterCacheService] Personagem ${e} adicionado ao cache`)}static getCachedUserCharacters(e){const s=this.userCharactersCache.get(e);return s?Date.now()-s.timestamp>this.USER_CACHE_DURATION||!s.isValid?(this.userCharactersCache.delete(e),{characters:[],isValid:!1}):(console.log(`[CharacterCacheService] Cache hit para usuário ${e} (${s.characters.length} personagens)`),{characters:s.characters,isValid:!0}):{characters:[],isValid:!1}}static setCachedUserCharacters(e,s){this.userCharactersCache.set(e,{characters:s,timestamp:Date.now(),isValid:!0}),s.forEach(r=>{this.setCachedCharacter(r.id,r)}),console.log(`[CharacterCacheService] Personagens do usuário ${e} adicionados ao cache (${s.length} personagens)`)}static getPendingRequest(e){return this.pendingRequests.get(e)||null}static setPendingRequest(e,s){this.pendingRequests.set(e,s),s.finally(()=>{this.pendingRequests.delete(e)})}static getPendingUserRequest(e){return this.pendingUserRequests.get(e)||null}static setPendingUserRequest(e,s){this.pendingUserRequests.set(e,s),s.finally(()=>{this.pendingUserRequests.delete(e)})}static invalidateCharacterCache(e){this.invalidationQueue.add(e),this.invalidationTimer&&clearTimeout(this.invalidationTimer),this.invalidationTimer=setTimeout(()=>{const s=Array.from(this.invalidationQueue);this.invalidationQueue.clear(),this.invalidationTimer=null,s.forEach(r=>{const n=this.characterCache.get(r);n&&(n.isValid=!1)}),s.length>0&&console.log(`[CharacterCacheService] Cache invalidado para ${s.length} personagens: ${s.join(", ")}`)},this.INVALIDATION_DELAY)}static invalidateUserCache(e){const s=this.userCharactersCache.get(e);s&&(s.isValid=!1);const r=[];this.characterCache.forEach((n,i)=>{n.character.user_id===e&&r.push(i)}),r.forEach(n=>this.invalidateCharacterCache(n)),console.log(`[CharacterCacheService] Cache de usuário ${e} invalidado (${r.length} personagens)`)}static cleanOldEntries(){const e=Date.now();let s=0;for(const[r,n]of this.characterCache.entries())(e-n.timestamp>this.CACHE_DURATION||!n.isValid)&&(this.characterCache.delete(r),s++);for(const[r,n]of this.userCharactersCache.entries())(e-n.timestamp>this.USER_CACHE_DURATION||!n.isValid)&&this.userCharactersCache.delete(r);s>0&&console.log(`[CharacterCacheService] Limpeza de cache: ${s} entradas removidas`)}static clearAllCache(){this.characterCache.clear(),this.userCharactersCache.clear(),this.pendingRequests.clear(),this.pendingUserRequests.clear(),this.invalidationTimer&&(clearTimeout(this.invalidationTimer),this.invalidationTimer=null),this.invalidationQueue.clear(),console.log("[CharacterCacheService] Todo o cache foi limpo")}static getCacheStats(){return{charactersCount:this.characterCache.size,userCachesCount:this.userCharactersCache.size,pendingRequestsCount:this.pendingRequests.size,pendingUserRequestsCount:this.pendingUserRequests.size,invalidationQueueSize:this.invalidationQueue.size}}static async preloadCharacter(e,s){const r=this.getCachedCharacter(e);if(r)return r;const n=this.getPendingRequest(e);if(n)try{return(await n).data||null}catch(i){return console.error("[CharacterCacheService] Erro na requisição pendente:",i),null}try{const i=await s();return this.setCachedCharacter(e,i),i}catch(i){return console.error("[CharacterCacheService] Erro ao pré-carregar personagem:",i),null}}static validateCacheIntegrity(){const e=[],s=Date.now();for(const[r,n]of this.characterCache.entries())(!n.character||!n.character.id)&&e.push(`Personagem ${r} tem dados inválidos`),n.character.id!==r&&e.push(`Personagem ${r} tem ID inconsistente: ${n.character.id}`),s-n.timestamp>this.CACHE_DURATION*2&&e.push(`Personagem ${r} está muito desatualizado`);for(const[r,n]of this.userCharactersCache.entries())Array.isArray(n.characters)||e.push(`Lista de personagens do usuário ${r} não é um array`),s-n.timestamp>this.USER_CACHE_DURATION*2&&e.push(`Lista de personagens do usuário ${r} está muito desatualizada`);return{isValid:e.length===0,issues:e}}}ze(yt,"characterCache",new Map),ze(yt,"userCharactersCache",new Map),ze(yt,"pendingRequests",new Map),ze(yt,"pendingUserRequests",new Map),ze(yt,"CACHE_DURATION",3e4),ze(yt,"USER_CACHE_DURATION",15e3),ze(yt,"MAX_CACHE_SIZE",100),ze(yt,"invalidationQueue",new Set),ze(yt,"invalidationTimer",null),ze(yt,"INVALIDATION_DELAY",500);const xh=Object.freeze(Object.defineProperty({__proto__:null,CharacterCacheService:yt},Symbol.toStringTag,{value:"Module"}));class Wl{static async updateCharacterHpMana(e,s,r){try{if(!e)return{success:!1,error:"ID do personagem é obrigatório",data:null};const n=s!==void 0?Math.floor(Number(s)):void 0,i=r!==void 0?Math.floor(Number(r)):void 0;if(n!==void 0&&(n<0||n>9999))return{success:!1,error:"Valor de HP inválido",data:null};if(i!==void 0&&(i<0||i>9999))return{success:!1,error:"Valor de Mana inválido",data:null};const c=yt.getCachedCharacter(e);if(c){const f=n!==void 0&&n!==c.hp,h=i!==void 0&&i!==c.mana;if(!f&&!h)return console.log(`[CharacterHealingService] Stats inalterados para ${c.name} - skip update`),{success:!0,error:null,data:null}}const{error:u}=await je.rpc("internal_update_character_hp_mana",{p_character_id:e,p_hp:n,p_mana:i});if(u)return console.error("Erro ao atualizar HP/Mana:",u),{success:!1,error:`Erro ao atualizar stats: ${u.message}`,data:null};if(c&&(n!==void 0||i!==void 0)){const f={...c};n!==void 0&&(f.hp=n),i!==void 0&&(f.mana=i),yt.setCachedCharacter(e,f)}else yt.invalidateCharacterCache(e);return{success:!0,error:null,data:null}}catch(n){return console.error("Erro ao atualizar HP/Mana do personagem:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido ao atualizar HP/Mana",data:null}}}static calculateAutoHeal(e,s){if(!e.last_activity)return{hp:e.hp,mana:e.mana};if(e.hp>=e.max_hp&&e.mana>=e.max_mana)return{hp:e.hp,mana:e.mana};const r=new Date(e.last_activity),n=s.getTime()-r.getTime(),i=Math.floor(n/1e3);if(i<1)return{hp:e.hp,mana:e.mana};const u=2*3600,f=.1,h=100;let p=e.hp;if(e.hp<e.max_hp){const x=Math.max(e.hp,Math.ceil(e.max_hp*(f/100))),b=x/e.max_hp*100,_=(h-f)/u,j=Math.min(_*i,h-b),N=Math.floor(j/100*e.max_hp);p=Math.min(e.max_hp,x+N)}let g=e.mana;if(e.mana<e.max_mana){const x=Math.max(e.mana,Math.ceil(e.max_mana*(f/100))),b=x/e.max_mana*100,_=(h-f)/u,j=Math.min(_*i,h-b),N=Math.floor(j/100*e.max_mana);g=Math.min(e.max_mana,x+N)}return(p>e.hp||g>e.mana)&&console.log(`[AutoHeal] ${e.name}: HP ${e.hp} -> ${p} (+${p-e.hp}), Mana ${e.mana} -> ${g} (+${g-e.mana}) após ${Math.floor(i/60)}min`),{hp:p,mana:g}}static async applyAutoHeal(e){try{let s=yt.getCachedCharacter(e);if(!s){const{data:f,error:h}=await je.from("characters").select("*").eq("id",e).single();if(h)throw h;s=f}if(!s)return{data:null,error:"Personagem não encontrado",success:!1};const r=new Date,{hp:n,mana:i}=this.calculateAutoHeal(s,r);if(n===s.hp&&i===s.mana)return{data:{healed:!1,oldHp:s.hp,newHp:s.hp,character:s},error:null,success:!0};const c=await this.updateCharacterHpMana(e,n,i);if(!c.success)throw new Error(c.error||"Erro ao atualizar HP/Mana");await this.updateLastActivity(e),yt.invalidateCharacterCache(e);const u={...s,hp:n,mana:i,last_activity:r.toISOString()};return{data:{healed:!0,oldHp:s.hp,newHp:n,character:u},error:null,success:!0}}catch(s){return console.error("Erro ao aplicar cura automática:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao aplicar cura automática",success:!1}}}static async updateLastActivity(e){try{const{error:s}=await je.rpc("update_character_activity",{p_character_id:e});if(s)throw s;return yt.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao atualizar última atividade:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao atualizar última atividade",success:!1}}}}class vh{static async updateCharacterFloor(e,s){try{console.log(`[CharacterCheckpointService] Atualizando andar seguramente - ID: ${e}, Andar: ${s}`);const{supabaseAdmin:r}=await Dt(async()=>{const{supabaseAdmin:i}=await Promise.resolve().then(()=>Nd);return{supabaseAdmin:i}},void 0),{error:n}=await r.rpc("secure_advance_floor",{p_character_id:e,p_new_floor:s});if(n)throw console.error("[CharacterCheckpointService] Erro na função secure_advance_floor:",n.message),n;return yt.invalidateCharacterCache(e),console.log(`[CharacterCheckpointService] Andar atualizado com segurança para ${s}`),{data:null,error:null,success:!0}}catch(r){const n=r instanceof Error?r.message:"Erro desconhecido";return console.error("[CharacterCheckpointService] Erro ao atualizar andar:",n),{data:null,error:n,success:!1}}}static async getUnlockedCheckpoints(e){try{console.log(`[CharacterCheckpointService] Obtendo checkpoints para personagem ${e}`);try{const{data:i,error:c}=await je.rpc("get_character_unlocked_checkpoints",{p_character_id:e});if(!c&&i){const u=i.map(f=>({floor:f.floor_number,description:f.description}));return console.log("[CharacterCheckpointService] Checkpoints obtidos via RPC:",u),{data:u,error:null,success:!0}}else c&&console.warn("[CharacterCheckpointService] Erro na RPC get_character_unlocked_checkpoints:",c)}catch(i){console.warn("[CharacterCheckpointService] Função RPC não disponível, usando fallback:",i)}console.log("[CharacterCheckpointService] Usando fallback para calcular checkpoints");let s=yt.getCachedCharacter(e);if(!s){const{data:i,error:c}=await je.from("characters").select("*").eq("id",e).single();if(c)throw c;s=i}if(!s)return{data:null,error:"Personagem não encontrado",success:!1};const r=Math.max(s.floor,("highest_floor"in s?s.highest_floor:s.floor)||s.floor);console.log(`[CharacterCheckpointService] Andar atual: ${s.floor}, Highest floor: ${r}`);const n=[];n.push({floor:1,description:"Andar 1 - Início da Torre"});for(let i=1;i<=100;i++){const c=i*10,u=c+1;if(r>=u)n.push({floor:u,description:`Andar ${u} - Checkpoint Pós-Boss`}),console.log(`[CharacterCheckpointService] Checkpoint ${u} desbloqueado (passou do boss ${c})`);else break}return console.log("[CharacterCheckpointService] Checkpoints finais calculados:",n),{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao obter checkpoints:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao obter checkpoints",success:!1}}}static async startFromCheckpoint(e,s){try{if(!(s===1||s>10&&(s-1)%10===0))return{data:null,error:"Checkpoint inválido",success:!1};const n=await this.getUnlockedCheckpoints(e);if(!n.success||!n.data)return{data:null,error:"Erro ao verificar checkpoints",success:!1};if(!n.data.some(f=>f.floor===s))return{data:null,error:"Checkpoint não desbloqueado",success:!1};const c=await this.updateCharacterFloor(e,s);if(!c.success)return c;const u=yt.getCachedCharacter(e);return u&&await Wl.updateCharacterHpMana(e,u.max_hp,u.max_mana),{data:null,error:null,success:!0}}catch(r){return console.error("Erro ao iniciar do checkpoint:",r instanceof Error?r.message:r),{data:null,error:r instanceof Error?r.message:"Erro ao iniciar do checkpoint",success:!1}}}static async resetCharacterProgress(e){try{const s=await this.updateCharacterFloor(e,1);if(!s.success)return s;const r=yt.getCachedCharacter(e);return r&&await Wl.updateCharacterHpMana(e,r.max_hp,r.max_mana),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao resetar progresso do personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao resetar progresso",success:!1}}}}class ui{static async getUserCharacterProgression(e){try{const{data:s,error:r}=await je.rpc("get_user_character_progression",{p_user_id:e}).single();if(r)throw r;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar progressão de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar progressão",success:!1}}}static async checkCharacterLimit(e){try{const{data:s,error:r}=await je.rpc("check_character_limit",{p_user_id:e}).single();if(r)throw r;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao verificar limite de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao verificar limite",success:!1}}}static async grantSecureXP(e,s,r="combat"){try{const{supabaseAdmin:n}=await Dt(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>Nd);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_grant_xp",{p_character_id:e,p_xp_amount:s,p_source:r}).single();if(c)throw c;yt.invalidateCharacterCache(e);const u=i;if(u.leveled_up||u.slots_unlocked){const f=await this.getCharacterById(e);f.success&&f.data&&yt.invalidateUserCache(f.data.user_id)}return{data:u,error:null,success:!0}}catch(n){return console.error("Erro ao conceder XP:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder XP",success:!1}}}static async grantSecureGold(e,s,r="combat"){try{const{supabaseAdmin:n}=await Dt(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>Nd);return{supabaseAdmin:u}},void 0),{data:i,error:c}=await n.rpc("secure_grant_gold",{p_character_id:e,p_gold_amount:s,p_source:r}).single();if(c)throw c;return yt.invalidateCharacterCache(e),{data:i,error:null,success:!0}}catch(n){return console.error("Erro ao conceder gold:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder gold",success:!1}}}static async addSkillXp(e,s,r){try{const{data:n,error:i}=await je.rpc("add_skill_xp",{p_character_id:e,p_skill_type:s,p_xp_amount:r}).single();if(i)throw i;return n&&n.skill_leveled_up&&yt.invalidateCharacterCache(e),{data:n,error:null,success:!0}}catch(n){return console.error("Erro ao adicionar XP de habilidade:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao adicionar XP",success:!1}}}static async updateGold(e,s){try{const{error:r}=await je.from("characters").update({gold:s}).eq("id",e);if(r)throw r;return yt.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(r){return console.error("Erro ao atualizar gold:",r instanceof Error?r.message:r),{data:null,error:r instanceof Error?r.message:"Erro ao atualizar gold",success:!1}}}static async getCharacterById(e){try{const{data:s,error:r}=await je.from("characters").select("*").eq("id",e).single();if(r)throw r;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}}function ao(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class Gt{static async getAvailableEquipment(e){try{const s=`level_${e}`,r=Date.now();if(r-this.lastFetchTimestamp<this.CACHE_DURATION&&this.equipmentCache.has(s))return this.equipmentCache.get(s)||[];const{data:n,error:i}=await je.from("equipment").select("*").lte("level_requirement",e).eq("is_unlocked",!0).eq("craftable",!1).order("level_requirement",{ascending:!0});if(i)throw i;const c=n;return this.equipmentCache.set(s,c),this.lastFetchTimestamp=r,c}catch(s){return console.error("Erro ao buscar equipamentos:",s instanceof Error?s.message:s),[]}}static async getEquipmentCraftingRecipes(){try{const{data:e,error:s}=await je.from("equipment_crafting_recipes").select(`
                    *,
                    equipment:result_equipment_id (*),
                    ingredients:equipment_crafting_ingredients (*)
                `).order("name");if(s)throw s;return{data:e,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas de equipamentos:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas de equipamentos",success:!1}}}static async canCraftEquipment(e,s){try{const{data:r,error:n}=await je.rpc("check_can_craft_equipment",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:r,error:null,success:!0}}catch(r){return console.error("Erro ao verificar crafting de equipamento:",r),{data:null,error:ao(r,"Erro ao verificar crafting de equipamento"),success:!1}}}static async craftEquipment(e,s){try{const{error:r}=await je.rpc("craft_equipment",{p_character_id:e,p_recipe_id:s});if(r)throw r;return{data:{message:"Equipamento criado com sucesso!"},error:null,success:!0}}catch(r){return console.error("Erro ao craftar equipamento:",r),{data:null,error:ao(r,"Erro ao craftar equipamento"),success:!1}}}static async getCharacterEquipment(e){try{const{data:s,error:r}=await je.from("character_equipment").select(`
                    *,
                    equipment:equipment_id (*)
                `).eq("character_id",e).order("created_at",{ascending:!1});if(r)throw r;return s}catch(s){return console.error("Erro ao buscar equipamentos do personagem:",s instanceof Error?s.message:s),[]}}static async getEquippedItems(e){try{const{data:s,error:r}=await je.rpc("get_equipped_slots",{p_character_id:e});if(r)throw r;const n={};return s&&Array.isArray(s)&&s.forEach(i=>{const c={id:i.equipment_id,name:i.equipment_name,description:"",type:i.equipment_type,weapon_subtype:i.weapon_subtype,rarity:i.rarity,level_requirement:0,atk_bonus:i.atk_bonus,def_bonus:i.def_bonus,mana_bonus:i.mana_bonus,speed_bonus:i.speed_bonus,hp_bonus:i.hp_bonus,critical_chance_bonus:i.critical_chance_bonus,critical_damage_bonus:i.critical_damage_bonus,double_attack_chance_bonus:i.double_attack_chance_bonus,magic_damage_bonus:i.magic_damage_bonus,price:0,is_unlocked:!0,created_at:"",updated_at:""};n[i.slot_type]=c}),n}catch(s){return console.error("Erro ao buscar equipamentos equipados:",s instanceof Error?s.message:s),{}}}static async toggleEquipment(e,s,r,n){try{const{error:i}=await je.rpc("toggle_equipment",{p_character_id:e,p_equipment_id:s,p_equip:r,p_slot_type:n});if(i)throw i;return{data:r?"Item equipado com sucesso!":"Item desequipado com sucesso!",error:null,success:!0}}catch(i){return console.error("Erro ao equipar/desequipar item:",i),{data:null,error:ao(i,"Erro ao equipar/desequipar item"),success:!1}}}static async buyEquipment(e,s){try{const{data:r,error:n}=await je.from("equipment").select("price").eq("id",s).single();if(n)throw new Error(`Erro ao buscar equipamento: ${n.message}`);if(!r)throw new Error("Equipamento não encontrado");const{data:i,error:c}=await je.rpc("buy_equipment",{p_character_id:e,p_equipment_id:s,p_price:r.price});if(c)throw c;return{data:{newGold:i},error:null,success:!0}}catch(r){return console.error("Erro ao comprar equipamento:",r),{data:null,error:ao(r,"Erro ao comprar equipamento"),success:!1}}}static async sellEquipment(e,s){try{const{data:r,error:n}=await je.rpc("sell_equipment",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:{newGold:r},error:null,success:!0}}catch(r){return console.error("Erro ao vender equipamento:",r),{data:null,error:ao(r,"Erro ao vender equipamento"),success:!1}}}static async canEquipItem(e,s){try{const{data:r,error:n}=await je.rpc("can_equip_item",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:r,error:null,success:!0}}catch(r){return console.error("Erro ao verificar se pode equipar item:",r),{data:null,error:ao(r,"Erro ao verificar se pode equipar item"),success:!1}}}static async getAllEquipments(){try{const{data:e,error:s}=await je.from("equipment").select("*").order("name");if(s)throw s;return e}catch(e){return console.error("Erro ao buscar todos os equipamentos:",e instanceof Error?e.message:e),[]}}static clearCache(){this.equipmentCache.clear(),this.lastFetchTimestamp=0}static async compareEquipmentStats(e,s,r){try{const{data:n,error:i}=await je.rpc("compare_equipment_stats",{p_character_id:e,p_new_equipment_id:s,p_slot_type:r});return i?(console.error("[EquipmentService] Erro ao comparar equipamentos:",i),{success:!1,error:i.message,data:null}):{success:!0,error:null,data:n||[]}}catch(n){return console.error("[EquipmentService] Erro na comparação de equipamentos:",n),{success:!1,error:ao(n,"Erro ao comparar equipamentos"),data:null}}}static async getEquipmentBonuses(e){try{const{data:s,error:r}=await je.rpc("calculate_equipment_bonuses_enhanced",{p_character_id:e});return r?(console.error("[EquipmentService] Erro ao calcular bônus:",r),{success:!1,error:r.message,data:null}):{success:!0,error:null,data:(s==null?void 0:s[0])||{total_atk_bonus:0,total_def_bonus:0,total_mana_bonus:0,total_speed_bonus:0,total_hp_bonus:0,total_critical_chance_bonus:0,total_critical_damage_bonus:0,total_double_attack_chance_bonus:0,total_magic_damage_bonus:0}}}catch(s){return console.error("[EquipmentService] Erro ao obter bônus:",s),{success:!1,error:ao(s,"Erro ao obter bônus de equipamentos"),data:null}}}}ze(Gt,"equipmentCache",new Map),ze(Gt,"lastFetchTimestamp",0),ze(Gt,"CACHE_DURATION",3e5);const B6=t=>{const e={hp:0,max_hp:0,mana:0,max_mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,double_attack_chance:0,magic_damage:0},s=(r,n=!1)=>{if(!r)return;const i=n&&r.type==="weapon"?.8:1,c=n&&r.type==="armor"?1:i;e.hp+=Math.floor(r.hp_bonus*c),e.max_hp+=Math.floor(r.hp_bonus*c),e.mana+=Math.floor(r.mana_bonus*c),e.max_mana+=Math.floor(r.mana_bonus*c),e.atk+=Math.floor(r.atk_bonus*c),e.def+=Math.floor(r.def_bonus*c),e.speed+=Math.floor(r.speed_bonus*c),e.critical_chance+=r.critical_chance_bonus*c,e.critical_damage+=r.critical_damage_bonus*c,e.double_attack_chance+=r.double_attack_chance_bonus*c,e.magic_damage+=r.magic_damage_bonus*c};return s(t.main_hand??null,!1),s(t.off_hand??null,!0),s(t.armor??null,!1),s(t.accessory??null,!1),s(t.accessory_2??null,!1),e},V6=Object.freeze(Object.defineProperty({__proto__:null,EquipmentService:Gt,calculateEquipmentBonus:B6},Symbol.toStringTag,{value:"Module"}));class xx{static async calculateDerivedStats(e){try{return console.log("[CharacterStatsService] Calculando stats derivados para:",{id:e.id,level:e.level,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,sword_mastery:e.sword_mastery,axe_mastery:e.axe_mastery,blunt_mastery:e.blunt_mastery,defense_mastery:e.defense_mastery,magic_mastery:e.magic_mastery}),await this.calculateDerivedStatsFallback(e)}catch(s){return console.error("[CharacterStatsService] Erro no cálculo de stats derivados:",s),await this.calculateDerivedStatsFallback(e)}}static async calculateDerivedStatsFallback(e){const s=e.level,r=e.strength||10,n=e.dexterity||10,i=e.intelligence||10,c=e.wisdom||10,u=e.vitality||10,f=e.luck||10,h=r+n+i+c+u+f,p=1-(Math.abs(r/h-1/6)+Math.abs(n/h-1/6)+Math.abs(i/h-1/6)+Math.abs(c/h-1/6)+Math.abs(u/h-1/6)+Math.abs(f/h-1/6))/2,g=1+p*.2;let x=1;Math.max(r/h,n/h,i/h,c/h,u/h,f/h)>.8&&(x=.7),console.log(`[CharacterStatsService] Build analysis - Diversidade: ${(p*100).toFixed(1)}%, Mono-penalty: ${x}`);const _=Math.pow(r,1.2)*g*x,j=Math.pow(n,1.15)*g*x,N=Math.pow(i,1.25)*g*x,C=Math.pow(c,1.1)*g*x,E=Math.pow(u,1.3)*g*x,S=f*g*x,P=e.sword_mastery||1,R=e.axe_mastery||1,D=e.blunt_mastery||1,$=e.defense_mastery||1,A=e.magic_mastery||1,M=Math.pow(Math.max(P,R,D),1.1)*g,U=Math.pow($,1.2)*g,Y=Math.pow(A,1.15)*g,V=50+s*2,F=20+s*1,Q=2+s,G=1+s,k=3+s;let B={hp:0,mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,magic_damage:0,double_attack_chance:0};try{const we=await Gt.getEquippedItems(e.id);if(we){const{calculateEquipmentBonus:Ce}=await Dt(async()=>{const{calculateEquipmentBonus:Oe}=await Promise.resolve().then(()=>V6);return{calculateEquipmentBonus:Oe}},void 0);B=Ce(we),console.log("[CharacterStatsService] Bônus de equipamentos calculado:",{atk:B.atk,def:B.def,speed:B.speed,critical_chance:B.critical_chance,magic_damage:B.magic_damage})}}catch(we){console.error("[CharacterStatsService] Erro ao calcular bônus de equipamentos:",we)}const z=Math.floor(V+E*3.5+B.hp),W=z,L=Math.floor(F+(N+C)*1.5+B.mana),X=L,ae=Math.floor(Q+_*2.2+M+B.atk),ee=Math.floor(N*1.8+Y+B.magic_damage),le=Math.floor(G+j*1.5+U+B.def),ie=Math.floor(k+j*1.8+B.speed),se=Math.min(95,Math.floor(5+j*.3+S*.5+M*.2+B.critical_chance)),ue=Math.floor(150+_*.8+M*1.2+B.critical_damage),ce=Math.floor(N*1.2+Y*1.5+B.magic_damage),be=Math.min(25,Math.floor(j*.2+S*.3+B.double_attack_chance)),Ne={hp:z,max_hp:W,mana:L,max_mana:X,atk:ae,magic_attack:ee,def:le,speed:ie,critical_chance:se,critical_damage:ue,magic_damage_bonus:ce,double_attack_chance:be};return console.log("[CharacterStatsService] Stats derivados calculados:",{level:s,diversityBonus:(g*100-100).toFixed(1)+"%",monoPenalty:(x*100).toFixed(1)+"%",final_stats:Ne}),Ne}static analyzeBuildDiversity(e){const s=e.strength||10,r=e.dexterity||10,n=e.intelligence||10,i=e.wisdom||10,c=e.vitality||10,u=e.luck||10,f=s+r+n+i+c+u,h=[{name:"Força",value:s,percentage:s/f},{name:"Destreza",value:r,percentage:r/f},{name:"Inteligência",value:n,percentage:n/f},{name:"Sabedoria",value:i,percentage:i/f},{name:"Vitalidade",value:c,percentage:c/f},{name:"Sorte",value:u,percentage:u/f}],p=h.reduce((N,C)=>C.percentage>N.percentage?C:N),g=p.percentage>.8,x=1-h.reduce((N,C)=>N+Math.abs(C.percentage-1/6),0)/2,b=1+x*.2,_=g?.7:1;let j="";return g?j=`Build muito especializada em ${p.name}. Considere investir em outros atributos para melhor eficiência geral.`:x>.7?j="Build bem balanceada! Você está aproveitando as sinergias entre atributos.":j="Build moderadamente especializada. Há espaço para melhorar o equilíbrio.",{diversityScore:x,diversityPercentage:x*100,diversityBonus:b,monoBuildPenalty:_,dominantAttribute:p.name,dominantPercentage:p.percentage*100,isMonoBuild:g,recommendation:j}}}class tS{static async distributeAttributePoints(e,s){try{const{data:r,error:n}=await je.rpc("distribute_attribute_points",{p_character_id:e,p_strength:s.strength,p_dexterity:s.dexterity,p_intelligence:s.intelligence,p_wisdom:s.wisdom,p_vitality:s.vitality,p_luck:s.luck}).single();if(n)throw n;return yt.invalidateCharacterCache(e),{data:r,error:null,success:!0}}catch(r){return console.error("Erro ao distribuir pontos de atributo:",r instanceof Error?r.message:r),{data:null,error:r instanceof Error?r.message:"Erro ao distribuir pontos",success:!1}}}static async recalculateCharacterStats(e){try{const{error:s}=await je.rpc("recalculate_character_stats",{p_character_id:e});if(s)throw s;return yt.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao recalcular stats:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao recalcular stats",success:!1}}}}class sa{static validateCharacterName(e){if(!e||typeof e!="string")return{isValid:!1,error:"Nome é obrigatório"};const s=e.trim();if(s.length<3)return{isValid:!1,error:"Nome deve ter pelo menos 3 caracteres"};if(s.length>20)return{isValid:!1,error:"Nome deve ter no máximo 20 caracteres"};for(const u of this.INVALID_PATTERNS)if(u.test(s))return{isValid:!1,error:this.getPatternError(u)};const r=s.toLowerCase().split(/[\s\-']+/);for(const u of r)if(this.BLACKLIST_WORDS.includes(u))return{isValid:!1,error:"Nome contém palavras inadequadas"};const n=s.toLowerCase().replace(/[\s\-']/g,"");for(const u of this.BLACKLIST_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contém termos inadequados"};for(const u of this.RESERVED_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contém termos reservados do sistema"};if(!/[a-zA-ZÀ-ÿ]/.test(s))return{isValid:!1,error:"Nome deve conter pelo menos uma letra"};const i=(s.match(/[a-zA-ZÀ-ÿ]/g)||[]).length;return(s.match(/[0-9]/g)||[]).length>i?{isValid:!1,error:"Nome não pode ter mais números que letras"}:{isValid:!0}}static getPatternError(e){const s=e.toString();return s.includes("^[0-9]+$")?"Nome não pode ser apenas números":s.includes("^[^a-zA-ZÀ-ÿ]")?"Nome deve começar com uma letra":s.includes("[^a-zA-ZÀ-ÿ0-9\\s'\\-]")?"Nome contém caracteres especiais não permitidos":s.includes("\\d{3,}")?"Nome não pode ter mais de 2 números consecutivos":s.includes("(.)\\1{3,}")?"Nome não pode ter mais de 3 caracteres iguais seguidos":s.includes("^\\s|\\s$")?"Nome não pode começar ou terminar com espaços":s.includes("\\s{2,}")?"Nome não pode ter espaços múltiplos":"Nome contém formato inválido"}static formatCharacterName(e){if(!e)return"";let s=e.trim().replace(/\s+/g," ");return s=s.replace(/\b\w/g,r=>r.toUpperCase()),s}static generateNameSuggestions(e){const s=[],r=e.replace(/[^a-zA-ZÀ-ÿ]/g,"");if(r.length>=3){for(let i=1;i<=3;i++){const c=Math.floor(Math.random()*100);s.push(this.formatCharacterName(r+c))}const n=["Jr","II","III","X","Prime","Neo"];for(const i of n.slice(0,2))s.push(this.formatCharacterName(r+i))}if(s.length===0){const n=["Aventureiro","Guerreiro","Explorador","Heroi","Campeao","Bravo","Valente","Nobre","Lenda","Mestre"];for(let i=0;i<3;i++){const c=n[Math.floor(Math.random()*n.length)],u=Math.floor(Math.random()*1e3);s.push(`${c}${u}`)}}return s.slice(0,3)}static isTooSimilar(e,s){const r=e.toLowerCase().replace(/[^a-zA-ZÀ-ÿ0-9]/g,"");for(const n of s){const i=n.toLowerCase().replace(/[^a-zA-ZÀ-ÿ0-9]/g,"");if(r===i||this.calculateSimilarity(r,i)>.8)return!0}return!1}static calculateSimilarity(e,s){const r=e.length>s.length?e:s,n=e.length>s.length?s:e;if(r.length===0)return 1;const i=this.levenshteinDistance(r,n);return(r.length-i)/r.length}static levenshteinDistance(e,s){const r=Array(s.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let n=0;n<=e.length;n+=1)r[0][n]=n;for(let n=0;n<=s.length;n+=1)r[n][0]=n;for(let n=1;n<=s.length;n+=1)for(let i=1;i<=e.length;i+=1){const c=e[i-1]===s[n-1]?0:1;r[n][i]=Math.min(r[n][i-1]+1,r[n-1][i]+1,r[n-1][i-1]+c)}return r[s.length][e.length]}}ze(sa,"BLACKLIST_WORDS",["porra","merda","caralho","puta","putaria","viado","bicha","cu","buceta","piroca","pinto","rola","foda","foder","fodido","cuzao","cuzão","babaca","otario","otário","idiota","imbecil","retardado","mongoloide","burro","desgraça","desgraçado","filho da puta","fdp","vagabundo","safado","cachorro","cadela","prostituta","vagabunda","piranha","galinha","fuck","shit","bitch","damn","hell","ass","asshole","bastard","crap","piss","dick","cock","pussy","cunt","whore","slut","fag","faggot","nigger","retard","moron","idiot","stupid","gay","lesbian","homo","nazi","hitler","rape","kill","murder","mierda","joder","puta","puto","cabron","cabrón","pendejo","idiota","estupido","estúpido","culo","coño","verga","chingar","pinche","mamada","putada","hijo de puta","hdp","marica","maricon","maricón","droga","cocaina","heroina","crack","cocaine","heroin","drug","dealer","traficante","sexo","sex","porn","porno","nude","naked","xxx","fetish","admin","moderador","mod","gm","gamemaster","suporte","support","oficial","staff","dev","developer","bot","sistema","system"]),ze(sa,"RESERVED_WORDS",["admin","administrator","moderador","moderator","mod","gm","gamemaster","suporte","support","help","ajuda","oficial","official","staff","dev","developer","sistema","system","bot","null","undefined","test","teste","demo","sample","example","exemplo","guest","visitante","player","jogador","user","usuario","usuário","npc","monster","monstro"]),ze(sa,"INVALID_PATTERNS",[/^[0-9]+$/,/^[^a-zA-ZÀ-ÿ]/,/[^a-zA-ZÀ-ÿ0-9\s'-]/,/\d{3,}/,/(.)\1{3,}/,/^\s|\s$/,/\s{2,}/]);class Ge{static async getUserCharacters(e){try{const s=yt.getCachedUserCharacters(e);if(s.isValid)return{data:s.characters,error:null,success:!0};const{data:r,error:n}=await je.rpc("get_user_characters",{p_user_id:e});if(n)throw n;return yt.setCachedUserCharacters(e,r),{data:r,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagens",success:!1}}}static async getCharacter(e){try{const s=yt.getCachedCharacter(e);if(s)return{data:s,error:null,success:!0};const r=yt.getPendingRequest(e);if(r)return console.log(`[CharacterService] Reutilizando requisição pendente para personagem ${e}`),r;const n=this.fetchCharacterFromServer(e);yt.setPendingRequest(e,n);const i=await n;if(i.success&&i.data){console.log(`[CharacterService] Aplicando cura automática para ${i.data.name}`);const c=await Wl.applyAutoHeal(e);if(c.success&&c.data&&c.data.healed)return console.log(`[CharacterService] ${i.data.name} curado: ${c.data.oldHp} -> ${c.data.newHp} HP`),{data:c.data.character,error:null,success:!0}}return i}catch(s){return console.error("Erro ao buscar personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async fetchCharacterFromServer(e){try{console.log(`[CharacterService] Buscando personagem ${e} do servidor`);const{data:s,error:r}=await je.rpc("get_character_full_stats",{p_character_id:e}).single();if(r)throw r;if(!s)return{data:null,error:"Personagem não encontrado",success:!1};const n=s,i={id:n.character_id,user_id:"",name:n.name,level:n.level,xp:n.xp,xp_next_level:n.xp_next_level,gold:n.gold,hp:n.hp,max_hp:n.max_hp,mana:n.mana,max_mana:n.max_mana,atk:n.atk,def:n.def,speed:n.speed,floor:1,strength:n.strength,dexterity:n.dexterity,intelligence:n.intelligence,wisdom:n.wisdom,vitality:n.vitality,luck:n.luck,attribute_points:n.attribute_points||0,critical_chance:n.critical_chance,critical_damage:n.critical_damage,sword_mastery:n.sword_mastery,axe_mastery:n.axe_mastery,blunt_mastery:n.blunt_mastery,defense_mastery:n.defense_mastery,magic_mastery:n.magic_mastery,sword_mastery_xp:n.sword_mastery_xp,axe_mastery_xp:n.axe_mastery_xp,blunt_mastery_xp:n.blunt_mastery_xp,defense_mastery_xp:n.defense_mastery_xp,magic_mastery_xp:n.magic_mastery_xp,is_alive:!0,created_at:"",updated_at:"",last_activity:void 0},{data:c,error:u}=await je.rpc("get_character",{p_character_id:i.id}).single();if(!u&&c){const f=c;i.user_id=f.user_id,i.floor=f.floor,i.created_at=f.created_at,i.updated_at=f.updated_at,i.last_activity=f.last_activity}return console.log(`[CharacterService] Personagem carregado do servidor: ${i.name} (andar: ${i.floor})`),yt.setCachedCharacter(e,i),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagem do servidor:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async createCharacter(e){var s,r,n;try{const i=sa.validateCharacterName(e.name);if(!i.isValid)return{data:null,error:i.error||"Nome inválido",success:!1};const c=await ui.checkCharacterLimit(e.user_id);if(!c.success||!((s=c.data)!=null&&s.can_create)){const g=((r=c.data)==null?void 0:r.next_slot_required_level)||0;return{data:null,error:`Limite de personagens atingido. Para criar o ${(((n=c.data)==null?void 0:n.available_slots)||3)+1}º personagem, você precisa de ${g} níveis totais entre todos os seus personagens.`,success:!1}}const u=sa.formatCharacterName(e.name),f=await this.getUserCharacters(e.user_id);if(f.success&&f.data&&f.data.length>0){const g=f.data.map(x=>x.name);if(sa.isTooSimilar(u,g))return{data:null,error:`Nome muito similar a um personagem existente. Sugestões: ${sa.generateNameSuggestions(u).join(", ")}`,success:!1}}const{data:h,error:p}=await je.rpc("create_character",{p_user_id:e.user_id,p_name:u});if(p){if(p.message.includes("Nome"))return{data:null,error:p.message,success:!1};if(p.message.includes("Limite")||p.message.includes("personagem"))return{data:null,error:p.message,success:!1};throw p}return yt.invalidateUserCache(e.user_id),{data:{id:h},error:null,success:!0}}catch(i){return console.error("Erro ao criar personagem:",i instanceof Error?i.message:i),{data:null,error:i instanceof Error?i.message:"Erro ao criar personagem",success:!1}}}static async deleteCharacter(e){try{const s=await this.getCharacter(e);if(s.success&&s.data&&s.data.floor>0){console.log(`[CharacterService] Salvando personagem ${s.data.name} no ranking histórico antes de deletar`);try{const{error:n}=await je.rpc("save_ranking_entry_on_death",{p_character_id:e});n?console.error("Erro ao salvar no ranking histórico:",n):console.log(`[CharacterService] Personagem ${s.data.name} salvo no ranking histórico com sucesso`)}catch(n){console.error("Erro ao salvar no ranking histórico:",n)}}const{error:r}=await je.rpc("delete_character",{p_character_id:e});if(r)throw r;return yt.invalidateCharacterCache(e),s.success&&s.data&&yt.invalidateUserCache(s.data.user_id),console.log(`[CharacterService] Personagem deletado com sucesso: ${e}`),{error:null}}catch(s){return console.error("Erro ao deletar personagem:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Erro ao deletar personagem"}}}static async getCharacterStats(e){try{const s=await this.getCharacterForGame(e);if(!s.success||!s.data)return{success:!1,error:s.error||"Erro ao carregar dados do personagem",data:null};const r=s.data;return{success:!0,error:null,data:{level:r.level,xp:r.xp,xp_next_level:r.xp_next_level,gold:r.gold,hp:r.hp,max_hp:r.max_hp,mana:r.mana,max_mana:r.max_mana,atk:r.atk,def:r.def,speed:r.speed,strength:r.strength||10,dexterity:r.dexterity||10,intelligence:r.intelligence||10,wisdom:r.wisdom||10,vitality:r.vitality||10,luck:r.luck||10,attribute_points:r.attribute_points||0,critical_chance:r.critical_chance||0,critical_damage:r.critical_damage||0,magic_damage_bonus:r.magic_damage_bonus||0,magic_attack:r.magic_attack||0,sword_mastery:r.sword_mastery||1,axe_mastery:r.axe_mastery||1,blunt_mastery:r.blunt_mastery||1,defense_mastery:r.defense_mastery||1,magic_mastery:r.magic_mastery||1,sword_mastery_xp:r.sword_mastery_xp||0,axe_mastery_xp:r.axe_mastery_xp||0,blunt_mastery_xp:r.blunt_mastery_xp||0,defense_mastery_xp:r.defense_mastery_xp||0,magic_mastery_xp:r.magic_mastery_xp||0,base_hp:r.base_hp||r.base_max_hp,base_max_hp:r.base_max_hp,base_mana:r.base_mana||r.base_max_mana,base_max_mana:r.base_max_mana,base_atk:r.base_atk,base_def:r.base_def,base_speed:r.base_speed,equipment_hp_bonus:r.equipment_hp_bonus||0,equipment_mana_bonus:r.equipment_mana_bonus||0,equipment_atk_bonus:r.equipment_atk_bonus||0,equipment_def_bonus:r.equipment_def_bonus||0,equipment_speed_bonus:r.equipment_speed_bonus||0}}}catch(s){return console.error("Erro ao buscar stats do personagem:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async getCharacterForGame(e){try{const{data:s,error:r}=await je.from("characters").select("*").eq("id",e).single();if(r)throw r;if(!s)return{success:!1,error:"Personagem não encontrado",data:null};const n=await xx.calculateDerivedStats(s),i=await Dt(()=>Promise.resolve().then(()=>z6),void 0).then(f=>f.SpellService.getCharacterEquippedSpells(e)),c=i.success&&i.data?i.data:[];return{success:!0,error:null,data:{id:s.id,user_id:s.user_id,name:s.name,level:s.level,xp:s.xp,xp_next_level:s.xp_next_level,gold:s.gold,hp:n.hp,max_hp:n.max_hp,mana:n.mana,max_mana:n.max_mana,atk:n.atk,def:n.def,speed:n.speed,created_at:s.created_at,updated_at:s.updated_at,isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:s.floor,spells:c,consumables:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},strength:s.strength||10,dexterity:s.dexterity||10,intelligence:s.intelligence||10,wisdom:s.wisdom||10,vitality:s.vitality||10,luck:s.luck||10,attribute_points:s.attribute_points||0,sword_mastery:s.sword_mastery||1,axe_mastery:s.axe_mastery||1,blunt_mastery:s.blunt_mastery||1,defense_mastery:s.defense_mastery||1,magic_mastery:s.magic_mastery||1,sword_mastery_xp:s.sword_mastery_xp||0,axe_mastery_xp:s.axe_mastery_xp||0,blunt_mastery_xp:s.blunt_mastery_xp||0,defense_mastery_xp:s.defense_mastery_xp||0,magic_mastery_xp:s.magic_mastery_xp||0,critical_chance:n.critical_chance,critical_damage:n.critical_damage,magic_damage_bonus:n.magic_damage_bonus,magic_attack:n.magic_attack,double_attack_chance:n.double_attack_chance,base_hp:n.hp,base_max_hp:n.max_hp,base_mana:n.mana,base_max_mana:n.max_mana,base_atk:n.atk,base_def:n.def,base_speed:n.speed,equipment_hp_bonus:0,equipment_mana_bonus:0,equipment_atk_bonus:0,equipment_def_bonus:0,equipment_speed_bonus:0}}}catch(s){return console.error("Erro ao buscar personagem para o jogo:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}}ze(Ge,"getUnlockedCheckpoints",vh.getUnlockedCheckpoints),ze(Ge,"startFromCheckpoint",vh.startFromCheckpoint),ze(Ge,"resetCharacterProgress",vh.resetCharacterProgress),ze(Ge,"updateCharacterFloor",vh.updateCharacterFloor),ze(Ge,"updateCharacterHpMana",Wl.updateCharacterHpMana),ze(Ge,"applyAutoHeal",Wl.applyAutoHeal),ze(Ge,"updateLastActivity",Wl.updateLastActivity),ze(Ge,"getUserCharacterProgression",ui.getUserCharacterProgression),ze(Ge,"checkCharacterLimit",ui.checkCharacterLimit),ze(Ge,"grantSecureXP",ui.grantSecureXP),ze(Ge,"grantSecureGold",ui.grantSecureGold),ze(Ge,"addSkillXp",ui.addSkillXp),ze(Ge,"updateGold",ui.updateGold),ze(Ge,"calculateDerivedStats",xx.calculateDerivedStats),ze(Ge,"analyzeBuildDiversity",xx.analyzeBuildDiversity),ze(Ge,"distributeAttributePoints",tS.distributeAttributePoints),ze(Ge,"recalculateCharacterStats",tS.recalculateCharacterStats);const sS=Object.freeze(Object.defineProperty({__proto__:null,CharacterService:Ge},Symbol.toStringTag,{value:"Module"}));class La{static async getMonsterForFloor(e){try{if(e<=0)return console.warn(`[MonsterService] Tentativa de gerar monstro para andar inválido: ${e}`),{data:null,error:`Andar inválido: ${e}`,success:!1};const s=this.monsterCache.get(e),r=this.cacheExpiry.get(e),n=Date.now();if(s&&r&&n<r)return console.log(`[MonsterService] Retornando monstro do cache para andar ${e}: ${s.name}`),{data:s,error:null,success:!0};if(this.pendingRequests.has(e))return console.log(`[MonsterService] Reutilizando requisição pendente para andar ${e}`),this.pendingRequests.get(e);console.log(`[MonsterService] === INÍCIO BUSCA MONSTRO ANDAR ${e} ===`);const i=this.fetchMonsterFromServer(e);this.pendingRequests.set(e,i),i.finally(()=>{this.pendingRequests.delete(e)});const c=await i;if(!c.success||!c.data){console.warn(`[MonsterService] Falha na busca, usando fallback para andar ${e}`);const u=this.generateBasicMonster(e);return this.monsterCache.set(e,u),this.cacheExpiry.set(e,n+3e4),{data:u,error:null,success:!0}}return c}catch(s){console.error(`[MonsterService] EXCEÇÃO ao obter monstro para andar ${e}:`,s),console.log(`[MonsterService] Gerando monstro de fallback para andar ${e} devido à exceção`);const r=this.generateBasicMonster(e),n=Date.now();return this.monsterCache.set(e,r),this.cacheExpiry.set(e,n+3e4),{data:r,error:null,success:!0}}}static async fetchMonsterFromServer(e){var s,r,n;try{console.log(`[MonsterService] Buscando monstro DIRETAMENTE do servidor para andar ${e}`);let{data:i,error:c}=await je.rpc("get_monster_for_floor",{p_floor:e});if(c&&((s=c.message)!=null&&s.includes("function"))&&((r=c.message)!=null&&r.includes("does not exist"))){console.log("[MonsterService] Função get_monster_for_floor não existe, tentando get_monster_for_floor_with_initiative...");const{data:b,error:_}=await je.rpc("get_monster_for_floor_with_initiative",{p_floor:e});if(_){console.log("[MonsterService] Função com iniciativa também falhou, usando fallback...");const{data:j,error:N}=await je.from("monsters").select("*").lte("min_floor",e).order("min_floor",{ascending:!1}).limit(1);N?(i=null,c=N):(i=j&&j.length>0?j[0]:null,c=null,console.log(`[MonsterService] Usando fallback da tabela: ${(i==null?void 0:i.name)||"N/A"}`))}else i=b,c=_,console.log(`[MonsterService] Usando função com iniciativa: ${(i==null?void 0:i.name)||"N/A"}`)}else c||console.log(`[MonsterService] Usando função padrão: ${(i==null?void 0:i.name)||"N/A"}`);if(console.log("[MonsterService] Resposta da RPC get_monster_for_floor:",{hasData:!!i,hasError:!!c,dataType:typeof i,isArray:Array.isArray(i),dataLength:Array.isArray(i)?i.length:"not-array",errorMessage:c==null?void 0:c.message,errorCode:c==null?void 0:c.code}),c){console.error(`[MonsterService] Erro na API ao buscar monstro para andar ${e}:`,c),console.log("[MonsterService] Usando fallback devido a erro na API");const b=this.generateBasicMonster(e),_=Date.now();return this.monsterCache.set(e,b),this.cacheExpiry.set(e,_+3e4),{data:b,error:null,success:!0}}if(!i||Array.isArray(i)&&i.length===0){console.error(`[MonsterService] Nenhum monstro retornado para andar ${e}`),console.log("[MonsterService] Gerando monstro de fallback - nenhum dado retornado");const b=this.generateBasicMonster(e),_=Date.now();return this.monsterCache.set(e,b),this.cacheExpiry.set(e,_+3e4),{data:b,error:null,success:!0}}const u=Array.isArray(i)?i[0]:i;if(!u||!u.id||!u.name)return console.error(`[MonsterService] Dados de monstro inválidos para andar ${e}:`,u),{data:null,error:"Dados do monstro inválidos",success:!1};if(!u.hp||!u.atk||!u.def){console.log(`[MonsterService] Calculando stats básicos para ${u.name} (andar ${e})`);const b=u.level||Math.max(1,Math.floor(e/5)+1),_=u.tier||Math.max(1,Math.floor(e/20)+1);u.hp=u.hp||Math.floor(50+b*15+_*25),u.atk=u.atk||Math.floor(10+b*3+_*5),u.def=u.def||Math.floor(5+b*2+_*3),u.reward_xp=u.reward_xp||Math.floor(5+b*2+_*2),u.reward_gold=u.reward_gold||Math.floor(3+b*1+_*1)}console.log("[MonsterService] === MONSTRO ENCONTRADO ==="),console.log(`[MonsterService] ID: ${u.id}`),console.log(`[MonsterService] Nome: ${u.name}`),console.log(`[MonsterService] HP: ${u.hp}, ATK: ${u.atk}, DEF: ${u.def}`),console.log(`[MonsterService] Tier: ${u.tier||1}, Ciclo: ${u.cycle_position||"N/A"}, Boss: ${u.is_boss||!1}`),console.log(`[MonsterService] Level: ${u.level}, XP: ${u.reward_xp}, Gold: ${u.reward_gold}`),console.log(`[MonsterService] Buscando possible_drops para monstro ${u.id}...`);const{data:f,error:h}=await je.from("monster_possible_drops").select(`
          drop_id,
          drop_chance,
          min_quantity,
          max_quantity,
          monster_drops:drop_id (
            id,
            name,
            description,
            rarity,
            value
          )
        `).eq("monster_id",u.id);h&&console.warn(`[MonsterService] Erro ao buscar drops do monstro ${u.id}:`,h);const p=(f||[]).map(b=>({drop_id:b.drop_id,drop_chance:b.drop_chance,min_quantity:b.min_quantity,max_quantity:b.max_quantity,drop_info:Array.isArray(b.monster_drops)?b.monster_drops[0]:b.monster_drops}));console.log(`[MonsterService] Encontrados ${p.length} possible_drops para ${u.name}`),p.forEach(b=>{var _;console.log(`[MonsterService] - ${((_=b.drop_info)==null?void 0:_.name)||"Drop desconhecido"} (chance: ${(b.drop_chance*100).toFixed(1)}%, qtd: ${b.min_quantity}-${b.max_quantity})`)});const g={id:u.id,name:u.name,hp:u.hp,atk:u.atk,def:u.def,mana:u.mana||0,speed:u.speed||10,behavior:u.behavior,min_floor:u.min_floor,reward_xp:u.reward_xp,reward_gold:u.reward_gold,level:u.level||Math.max(1,Math.floor(e/5)+1),possible_drops:p,tier:u.tier||1,base_tier:u.base_tier||1,cycle_position:u.cycle_position||(e-1)%20+1,is_boss:u.is_boss||!1,strength:u.strength,dexterity:u.dexterity,intelligence:u.intelligence,wisdom:u.wisdom,vitality:u.vitality,luck:u.luck,critical_chance:u.critical_chance,critical_damage:u.critical_damage,critical_resistance:u.critical_resistance,physical_resistance:u.physical_resistance,magical_resistance:u.magical_resistance,debuff_resistance:u.debuff_resistance,physical_vulnerability:u.physical_vulnerability,magical_vulnerability:u.magical_vulnerability,primary_trait:u.primary_trait,secondary_trait:u.secondary_trait,special_abilities:u.special_abilities||[]};console.log("[MonsterService] === MONSTRO PROCESSADO COM SUCESSO ==="),console.log(`[MonsterService] Retornando: ${g.name} (HP: ${g.hp}, ATK: ${g.atk}, DEF: ${g.def})`),console.log(`[MonsterService] Possible drops: ${((n=g.possible_drops)==null?void 0:n.length)||0} tipos`);const x=Date.now();return this.monsterCache.set(e,g),this.cacheExpiry.set(e,x+3e4),{data:g,error:null,success:!0}}catch(i){return console.error(`[MonsterService] EXCEÇÃO ao buscar monstro do servidor para andar ${e}:`,i),{data:null,error:i instanceof Error?i.message:"Erro ao buscar monstro do servidor",success:!1}}}static clearCache(){const e=Date.now();if(e-this.lastClearTime<this.MIN_CLEAR_INTERVAL){console.log(`[MonsterService] Cache clear throttled - última limpeza há ${e-this.lastClearTime}ms`);return}this.monsterCache.clear(),this.cacheExpiry.clear(),this.pendingRequests.clear(),this.lastClearTime=e,console.log("[MonsterService] Cache de monstros limpo")}static generateBasicMonster(e){const s=Math.max(1,Math.floor(e/5)+1),r=Math.max(1,Math.floor(e/20)+1),n=e%10===0,i=["Slime","Goblin","Orc","Skeleton","Wolf","Spider","Troll","Dragon","Demon","Lich"],c=Math.floor(e/2)%i.length,u=i[c],f=r>1?` Tier ${r}`:"",p=`${n?"Boss ":""}${u}${f}`,g=n?80:50,x=n?15:10,b=n?8:5,_=Math.floor(g+s*15+r*25),j=Math.floor(x+s*3+r*5),N=Math.floor(b+s*2+r*3),C=Math.floor(10+s*1+r*2),E=Math.floor((5+s*2+r*2)*(n?2.5:1)),S=Math.floor((3+s*1+r*1)*(n?2.5:1));return{id:`generated_${e}_${Date.now()}`,name:p,level:s,hp:_,atk:j,def:N,mana:Math.floor(20+s*5),speed:C,behavior:"balanced",min_floor:e,reward_xp:E,reward_gold:S,image:n?"👑":"👾",possible_drops:[],tier:r,base_tier:1,cycle_position:(e-1)%20+1,is_boss:n,strength:Math.floor(10+s*2),dexterity:Math.floor(10+s*1),intelligence:Math.floor(8+s*1),wisdom:Math.floor(8+s*1),vitality:Math.floor(12+s*2),luck:Math.floor(5+s),critical_chance:.05+s*.005,critical_damage:1.5+s*.05,critical_resistance:.1,physical_resistance:0,magical_resistance:0,debuff_resistance:0,physical_vulnerability:1,magical_vulnerability:1,primary_trait:n?"boss":"common",secondary_trait:"basic",special_abilities:n?["Boss Fury"]:[]}}static calculateDamage(e,s,r){let n=1,i=1;switch(e.behavior){case"aggressive":n=1.2,i=.8;break;case"defensive":n=.8,i=1.2;break;case"balanced":n=1,i=1;break}const c=s*n,u=r*i;return Math.max(1,Math.floor(c-u/2))}}ze(La,"monsterCache",new Map),ze(La,"cacheExpiry",new Map),ze(La,"pendingRequests",new Map),ze(La,"lastClearTime",0),ze(La,"MIN_CLEAR_INTERVAL",1e3);const rS=Object.freeze(Object.defineProperty({__proto__:null,MonsterService:La},Symbol.toStringTag,{value:"Module"}));class cr{static clearCache(){const e=Date.now();if(e-this.lastClearTime<this.MIN_CLEAR_INTERVAL){console.log(`[FloorService] Cache clear throttled - última limpeza há ${e-this.lastClearTime}ms`);return}console.log("[FloorService] Limpando cache de andares"),this.floorCache.clear(),this.floorCacheExpiry.clear(),La.clearCache(),this.lastClearTime=e,console.log("[FloorService] Cache limpo")}static generateBasicFloorData(e){let s="common";e%10===0?s="boss":e%5===0&&(s="elite");const r=e===1||e>10&&(e-1)%10===0,n=Math.max(1,Math.floor(e/2));let i="";switch(s){case"boss":i=`Covil do Chefe - Andar ${e}`;break;case"elite":i=`Domínio de Elite - Andar ${e}`;break;default:r?i=`Santuário Seguro - Andar ${e}`:i=`Corredor Sombrio - Andar ${e}`;break}return{floorNumber:e,type:s,isCheckpoint:r,minLevel:n,description:i}}static async getFloorData(e){var i,c;console.log(`[FloorService] Solicitando dados do andar ${e}`);const s=Date.now(),r=this.floorCache.get(e),n=this.floorCacheExpiry.get(e);if(r&&n&&s<n)return console.log(`[FloorService] Dados do andar ${e} obtidos do cache: ${r.description}`),r;try{console.log(`[FloorService] Buscando dados do andar ${e} do servidor`);const{data:u,error:f}=await je.rpc("get_floor_data",{p_floor_number:e});if(f){if(console.error(`[FloorService] Erro na RPC get_floor_data para andar ${e}:`,f),(i=f.message)!=null&&i.includes("function")&&((c=f.message)!=null&&c.includes("does not exist"))){console.log("[FloorService] Função get_floor_data não existe, usando fallback");const x=this.generateBasicFloorData(e);return this.floorCache.set(e,x),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),x}console.log("[FloorService] Erro geral na RPC, usando fallback");const g=this.generateBasicFloorData(e);return this.floorCache.set(e,g),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),g}if(!u||Array.isArray(u)&&u.length===0)return console.error(`[FloorService] Nenhum dado encontrado para andar ${e}`),null;const h=Array.isArray(u)?u[0]:u;if(!h)return console.error(`[FloorService] Dados de andar vazios para andar ${e}`),null;const p={floorNumber:h.floor_number||e,type:h.type||"common",isCheckpoint:h.is_checkpoint||!1,minLevel:h.min_level||1,description:h.description||`Andar ${e}`};return console.log(`[FloorService] Dados do andar ${e} carregados: ${p.description} (tipo: ${p.type}, checkpoint: ${p.isCheckpoint})`),this.floorCache.set(e,p),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),p}catch(u){return console.error(`[FloorService] Exceção na função getFloorData para andar ${e}:`,u),null}}static calculateFloorRewards(e,s,r){let n=1;switch(r){case"boss":n=2.5;break;case"elite":n=1.8;break;case"event":n=1.2;break;case"common":default:n=1;break}return{xp:Math.floor(e*n),gold:Math.floor(s*n)}}static async processSpecialEventInteraction(e){var f;const{currentSpecialEvent:s,player:r}=e;if(!s)return console.warn("[FloorService] Tentativa de processar evento especial inexistente"),e;console.log(`[FloorService] Processando evento especial: ${s.name}`);let n=r.hp,i=r.mana,c=r.gold,u="";switch(s.type){case"magic_fountain":n=r.max_hp,i=r.max_mana,u="Você encontrou uma fonte mágica! HP e Mana foram restaurados completamente.";break;case"treasure_chest":{const h=Math.floor(Math.random()*50)+25;c+=h,u=`Você encontrou um baú do tesouro! Ganhou ${h} de ouro.`;break}case"bonfire":{const h=Math.floor(r.max_hp*.5);n=Math.min(r.max_hp,r.hp+h),u=`Você descansou numa fogueira acolhedora! Recuperou ${h} HP.`;break}default:u=`Você explorou o evento ${s.name}.`}console.log("[FloorService] === GERANDO INIMIGO APÓS EVENTO ESPECIAL ===");try{const{GameService:h}=await Dt(async()=>{const{GameService:b}=await Promise.resolve().then(()=>mm);return{GameService:b}},void 0),p=r.floor;console.log(`[FloorService] Forçando geração de inimigo para andar ${p}...`);const g=await h.generateEnemy(p);if(!g)throw console.error(`[FloorService] FALHA CRÍTICA: Não foi possível gerar inimigo após evento especial no andar ${p}`),new Error("Não foi possível gerar inimigo para continuar a aventura");if(console.log(`[FloorService] ✅ SUCESSO: Inimigo gerado após evento: ${g.name} (HP: ${g.hp}/${g.maxHp})`),n!==r.hp||i!==r.mana){console.log(`[FloorService] Atualizando HP/Mana no banco: ${n}/${i}`);try{const{CharacterService:b}=await Dt(async()=>{const{CharacterService:_}=await Promise.resolve().then(()=>sS);return{CharacterService:_}},void 0);await b.updateCharacterHpMana(r.id,n,i)}catch(b){console.error("[FloorService] Erro ao atualizar HP/Mana após evento:",b)}}if(c!==r.gold){console.log(`[FloorService] Atualizando gold no banco: ${c}`);try{const{CharacterService:b}=await Dt(async()=>{const{CharacterService:_}=await Promise.resolve().then(()=>sS);return{CharacterService:_}},void 0);await b.grantSecureGold(r.id,c-r.gold,"event")}catch(b){console.error("[FloorService] Erro ao atualizar gold após evento:",b)}}const x={...e,player:{...r,hp:n,mana:i,gold:c,isPlayerTurn:!0,isDefending:!1},currentEnemy:g,gameMessage:`${u} Um ${g.name} apareceu para enfrentá-lo!`,currentSpecialEvent:null,mode:"battle",isPlayerTurn:!0};return console.log(`[FloorService] ✅ ESTADO FINAL APÓS EVENTO: Modo=${x.mode}, Inimigo=${(f=x.currentEnemy)==null?void 0:f.name}, HP=${x.player.hp}`),x}catch(h){return console.error("[FloorService] ❌ ERRO CRÍTICO ao gerar inimigo após evento especial:",h),console.log("[FloorService] Retornando estado de fallback - verificação de estado inconsistente deve capturar isto"),{...e,player:{...r,hp:n,mana:i,gold:c,isPlayerTurn:!0,isDefending:!1},gameMessage:`${u} Preparando próximo desafio...`,currentSpecialEvent:null,currentEnemy:null,mode:"battle",isPlayerTurn:!0}}}static async checkForSpecialEvent(e){var s,r;try{console.log(`[FloorService] Verificando eventos especiais para andar ${e}...`);const{data:n,error:i}=await je.rpc("get_special_event_for_floor",{p_floor:e});return i?(s=i.message)!=null&&s.includes("function")&&((r=i.message)!=null&&r.includes("does not exist"))?(console.log("[FloorService] Função get_special_event_for_floor não existe - sem eventos especiais"),null):(console.warn("[FloorService] Erro ao buscar evento especial:",i),null):n?(console.log(`[FloorService] Evento especial encontrado: ${n.name}`),n):null}catch(n){return console.error("[FloorService] Erro ao verificar eventos especiais:",n),null}}}ze(cr,"floorCache",new Map),ze(cr,"floorCacheExpiry",new Map),ze(cr,"FLOOR_CACHE_DURATION",1e4),ze(cr,"lastClearTime",0),ze(cr,"MIN_CLEAR_INTERVAL",1e3);const aS=Object.freeze(Object.defineProperty({__proto__:null,FloorService:cr},Symbol.toStringTag,{value:"Module"}));class yr{static calculateAttackSkillXp(e,s){const r=[];if(!e)return r;const n=r6(e),i=t6(e),c=Math.max(1,Math.floor(s/10));if(n){const u=this.getWeaponSkill(n);if(u){let f=c;i?(f=Math.floor(f*1.25),r.push({skill:u,xp:f,reason:`Ataque com ${n.name} (Dual-wield)`,isOffHand:!1})):r.push({skill:u,xp:f,reason:`Ataque com ${n.name}`,isOffHand:!1})}}if(i&&e.off_hand){const u=this.getWeaponSkill(e.off_hand);if(u){const f=Math.floor(c*.75);r.push({skill:u,xp:f,reason:`Ataque com ${e.off_hand.name} (Mão secundária)`,isOffHand:!0})}}return r}static calculateDefenseSkillXp(e,s=0){const r=[];let n=Math.max(2,Math.floor(s/5));s<=0&&(n=3);let i="Ação de defesa";e&&s6(e)&&(n=Math.floor(n*2.5),i="Defesa com escudo equipado");const c=Math.max(1,Math.floor(n));return r.push({skill:cs.DEFENSE_MASTERY,xp:c,reason:i,isOffHand:!1}),console.log(`[SkillXpService] XP de defesa calculado: ${c} (dano bloqueado: ${s})`),r}static calculateMagicSkillXp(e,s=0,r=0,n=null){var h;const i=[],c=Math.floor(e/2);let u=0;r>0?u=Math.floor(r/8):s>0&&(u=Math.floor(s/8));const f=Math.max(2,c+u);if(i.push({skill:cs.MAGIC_MASTERY,xp:f,reason:`Uso de magia (${e} mana, ${r||s} efeito)`,isOffHand:!1}),((h=n==null?void 0:n.off_hand)==null?void 0:h.weapon_subtype)==="staff"){const p=Math.max(1,Math.floor(f*.2));i.push({skill:cs.MAGIC_MASTERY,xp:p,reason:`Bônus por ${n.off_hand.name} (off-hand)`,isOffHand:!0})}return i}static getWeaponSkill(e){const s=e.name.toLowerCase();return s.includes("espada")||s.includes("sword")||s.includes("rapier")||s.includes("lâmina")?cs.SWORD_MASTERY:s.includes("machado")||s.includes("axe")||s.includes("machadinha")?cs.AXE_MASTERY:s.includes("martelo")||s.includes("mace")||s.includes("clava")||s.includes("maça")||s.includes("porrete")||s.includes("hammer")?cs.BLUNT_MASTERY:s.includes("cajado")||s.includes("staff")||s.includes("varinha")||s.includes("orbe")||s.includes("bastão")||s.includes("cetro")?cs.MAGIC_MASTERY:(s.includes("adaga")||s.includes("dagger")||s.includes("punhal")||s.includes("fang"),cs.SWORD_MASTERY)}static async applySkillXp(e,s){const r=[],n=[];if(s.length===0)return{messages:r,skillLevelUps:n};console.log(`[SkillXpService] Aplicando ${s.length} ganhos de XP de habilidade para ${e}`);for(const i of s)try{const c=await Ge.addSkillXp(e,i.skill,i.xp);if(c.success&&c.data){const u=this.getSkillDisplayName(i.skill),f=i.isOffHand?" (off-hand)":"";if(c.data.skill_leveled_up){const h=`🎉 ${u} subiu para nível ${c.data.new_skill_level}!${f}`;r.push(h),n.push({skill:i.skill,newLevel:c.data.new_skill_level}),console.log(`[SkillXpService] ${h}`)}else{const h=`+${i.xp} XP em ${u}${f}`;r.push(h),console.log(`[SkillXpService] ${h} (${i.reason})`)}}else console.error(`[SkillXpService] Erro ao aplicar XP de ${i.skill}:`,c.error)}catch(c){console.error(`[SkillXpService] Exceção ao aplicar XP de ${i.skill}:`,c)}return{messages:r,skillLevelUps:n}}static getSkillDisplayName(e){switch(e){case cs.SWORD_MASTERY:return"Maestria em Espadas";case cs.AXE_MASTERY:return"Maestria em Machados";case cs.BLUNT_MASTERY:return"Maestria em Armas de Concussão";case cs.DEFENSE_MASTERY:return"Maestria em Defesa";case cs.MAGIC_MASTERY:return"Maestria em Magia";default:return e}}static calculateSkillDamageBonus(e){return Math.min(100,e*2)}static calculateSkillDefenseBonus(e){return Math.min(50,e*1)}static calculateManaEfficiency(e){return Math.min(40,e*1)}}class Zs{static clearCache(){this.spellCache.clear(),this.lastFetchTimestamp=0}static async getCharacterAvailableSpells(e){try{const{data:s,error:r}=await je.rpc("get_character_available_spells",{p_character_id:e});return r?(console.error("Erro ao buscar magias disponíveis:",r),{data:null,error:r.message,success:!1}):{data:s.map(i=>({id:i.spell_id,name:i.name,description:i.description,effect_type:i.effect_type,mana_cost:i.mana_cost,cooldown:i.cooldown,effect_value:i.effect_value,duration:i.duration,unlocked_at_level:i.unlocked_at_level,is_equipped:i.is_equipped,slot_position:i.slot_position})),error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias disponíveis:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async setCharacterSpells(e,s){try{const r=s[0]||null,n=s[1]||null,i=s[2]||null,{error:c}=await je.rpc("set_character_spells",{p_character_id:e,p_spell_1_id:r,p_spell_2_id:n,p_spell_3_id:i});return c?(console.error("Erro ao equipar magias:",c),{data:null,error:c.message,success:!1}):{data:null,error:null,success:!0}}catch(r){return console.error("Erro ao equipar magias:",r),{data:null,error:r instanceof Error?r.message:"Erro desconhecido",success:!1}}}static async getCharacterSpellStats(e){try{const{data:s,error:r}=await je.rpc("get_character_spell_stats",{p_character_id:e});return r?(console.error("Erro ao buscar estatísticas de magias:",r),{data:null,error:r.message,success:!1}):{data:s[0]||{total_available:0,total_equipped:0,highest_level_unlocked:1,spells_by_type:{}},error:null,success:!0}}catch(s){return console.error("Erro ao buscar estatísticas de magias:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async getAvailableSpells(e){const s=Date.now();if(this.spellCache.has(e)&&s-this.lastFetchTimestamp<this.CACHE_DURATION)return{data:this.spellCache.get(e),error:null,success:!0};try{const{data:r,error:n}=await je.rpc("get_available_spells",{p_level:e});return n?(console.error("Erro ao buscar magias:",n),{data:null,error:n.message,success:!1}):(this.spellCache.set(e,r||[]),this.lastFetchTimestamp=s,{data:r||[],error:null,success:!0})}catch(r){return console.error("Erro ao buscar magias:",r),{data:null,error:r instanceof Error?r.message:"Erro desconhecido",success:!1}}}static calculateScaledSpellDamage(e,s){if(!("intelligence"in s)||!("wisdom"in s)||!("magic_mastery"in s))return e;const r=s.intelligence||10,n=s.wisdom||10,i=s.magic_mastery||1,c=Math.pow(r,1.35)*1.8,u=Math.pow(n,1.2)*1.2,f=Math.pow(i,1.2)*2.5;let h=c+u+f;h>150&&(h=150+(h-150)*.6),h=Math.min(300,h);const p=Math.round(e*(1+h/100));return console.log("[SpellService] Cálculo de dano mágico ESPECIALIZADO:",{baseDamage:e,intelligence:r,wisdom:n,magicMastery:i,intScaling:`${c.toFixed(1)}%`,wisScaling:`${u.toFixed(1)}%`,masteryScaling:`${f.toFixed(1)}%`,totalBonus:`${h.toFixed(1)}%`,scaledDamage:p}),p}static calculateScaledSpellHealing(e,s){if(!("wisdom"in s)||!("magic_mastery"in s))return e;const r=s.wisdom||10,n=s.magic_mastery||1,i=Math.pow(r,1.3)*2.2,c=Math.pow(n,1.15)*1.8;let u=i+c;u>120&&(u=120+(u-120)*.5),u=Math.min(220,u);const f=Math.round(e*(1+u/100));return console.log("[SpellService] Cálculo de cura mágica ESPECIALIZADA:",{baseHealing:e,wisdom:r,magicMastery:n,wisScaling:`${i.toFixed(1)}%`,masteryScaling:`${c.toFixed(1)}%`,totalBonus:`${u.toFixed(1)}%`,scaledHealing:f}),f}static applySpellEffect(e,s,r){let n="",i=!0;switch(e.effect_type){case"damage":const c=this.calculateScaledSpellDamage(e.effect_value,s);r.hp=Math.max(0,r.hp-c),n=`${e.name} causou ${c} de dano mágico!`;break;case"heal":const u=this.calculateScaledSpellHealing(e.effect_value,s),f="max_hp"in r?r.max_hp:r.maxHp,h=r.hp;r.hp=Math.min(f,r.hp+u);const p=r.hp-h;n=`${e.name} restaurou ${p} HP!`;break;case"buff":if(r.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);r.active_effects.buffs.push({type:"buff",value:g,duration:e.duration,source_spell:e.name});const x=this.getAttributeModificationsForSpell(e);if(x.length>0){r.active_effects.attribute_modifications||(r.active_effects.attribute_modifications=[]),r.active_effects.attribute_modifications.push(...x);const b=x.map(_=>`+${_.value}${_.type==="percentage"?"%":""} ${this.translateAttributeName(_.attribute)}`).join(", ");n=`${e.name} aumentou: ${b}!`}else n=`${e.name} aplicou um efeito benéfico (+${g})!`}else n=`${e.name} aplicou um efeito benéfico!`;break;case"debuff":if(r.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);r.active_effects.debuffs.push({type:"debuff",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou um efeito prejudicial (-${g})!`}else n=`${e.name} aplicou um efeito prejudicial!`;break;case"dot":if(r.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);r.active_effects.dots.push({type:"dot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou dano contínuo (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou dano contínuo!`;break;case"hot":if(r.active_effects){const g=this.calculateScaledSpellHealing(e.effect_value,s);r.active_effects.hots.push({type:"hot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou cura contínua (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou cura contínua!`;break;default:n=`${e.name} foi usado, mas não teve efeito!`,i=!1}return{message:n,success:i}}static processOverTimeEffects(e){const s=[];return"active_effects"in e&&e.active_effects&&(e.active_effects.dots.forEach((r,n)=>{e.hp=Math.max(0,e.hp-r.value),r.duration--,s.push(`${r.source_spell} causou ${r.value} de dano contínuo.`),r.duration<=0&&e.active_effects.dots.splice(n,1)}),e.active_effects.hots.forEach((r,n)=>{const i="max_hp"in e?e.max_hp:e.maxHp,c=e.hp;e.hp=Math.min(i,e.hp+r.value);const u=e.hp-c;r.duration--,u>0&&s.push(`${r.source_spell} restaurou ${u} HP.`),r.duration<=0&&e.active_effects.hots.splice(n,1)}),e.active_effects.attribute_modifications&&(e.active_effects.attribute_modifications=e.active_effects.attribute_modifications.filter(r=>(r.duration--,r.duration<=0?(s.push(`O efeito de ${r.source_spell} em ${this.translateAttributeName(r.attribute)} expirou.`),!1):!0)))),s}static updateSpellCooldowns(e){return e.player.spells.forEach(s=>{s.current_cooldown>0&&s.current_cooldown--}),e}static getSpellTypeIcon(e){return{damage:"⚔️",heal:"❤️",buff:"🛡️",debuff:"💀",dot:"🔥",hot:"✨"}[e]||"🔮"}static getSpellTypeColor(e){return{damage:"text-red-500",heal:"text-green-500",buff:"text-blue-500",debuff:"text-purple-500",dot:"text-orange-500",hot:"text-emerald-500"}[e]||"text-gray-500"}static translateEffectType(e){return{damage:"Dano",heal:"Cura",buff:"Benefício",debuff:"Maldição",dot:"Dano Contínuo",hot:"Cura Contínua"}[e]||e}static getAttributeModificationsForSpell(e){const s=[],r=Date.now(),n=e.name.toLowerCase();return(n.includes("força")||n.includes("strength")||n.includes("fortalecer"))&&s.push({attribute:"atk",value:Math.floor(e.effect_value*.5),type:"flat",duration:e.duration,source_spell:e.name,applied_at:r}),(n.includes("velocidade")||n.includes("speed")||n.includes("agilidade"))&&s.push({attribute:"speed",value:Math.floor(e.effect_value*.3),type:"flat",duration:e.duration,source_spell:e.name,applied_at:r}),(n.includes("defesa")||n.includes("defense")||n.includes("proteção"))&&s.push({attribute:"def",value:Math.floor(e.effect_value*.4),type:"flat",duration:e.duration,source_spell:e.name,applied_at:r}),(n.includes("crítico")||n.includes("critical")||n.includes("precisão"))&&s.push({attribute:"critical_chance",value:Math.floor(e.effect_value*.2),type:"percentage",duration:e.duration,source_spell:e.name,applied_at:r}),(n.includes("magia")||n.includes("magic")||n.includes("mystic"))&&s.push({attribute:"magic_attack",value:Math.floor(e.effect_value*.6),type:"flat",duration:e.duration,source_spell:e.name,applied_at:r}),s}static translateAttributeName(e){return{atk:"Ataque",def:"Defesa",speed:"Velocidade",magic_attack:"Ataque Mágico",critical_chance:"Chance Crítica",critical_damage:"Dano Crítico"}[e]||e}static async getCharacterEquippedSpells(e){try{console.log(`[SpellService] Buscando magias equipadas para personagem: ${e}`);const{data:s,error:r}=await je.from("character_spell_slots").select(`
          slot_position,
          spell_id,
          spell:spells(
            id,
            name,
            description,
            mana_cost,
            cooldown,
            effect_type,
            effect_value,
            duration,
            unlocked_at_level
          )
        `).eq("character_id",e).not("spell_id","is",null).order("slot_position");if(r)return console.error("Erro ao buscar magias equipadas:",r),{data:null,error:r.message,success:!1};console.log(`[SpellService] ${(s==null?void 0:s.length)||0} magias equipadas encontradas`);const n=(s||[]).map(i=>{const c=Array.isArray(i.spell)?i.spell[0]:i.spell;return{id:c.id,name:c.name,description:c.description,mana_cost:c.mana_cost,cooldown:c.cooldown,current_cooldown:0,effect_type:c.effect_type,effect_value:c.effect_value,duration:c.duration||0,unlocked_at_level:c.unlocked_at_level}});return console.log("[SpellService] Magias equipadas processadas:",n.map(i=>i.name)),{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias equipadas:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}}ze(Zs,"spellCache",new Map),ze(Zs,"lastFetchTimestamp",0),ze(Zs,"CACHE_DURATION",3e5);const z6=Object.freeze(Object.defineProperty({__proto__:null,SpellService:Zs},Symbol.toStringTag,{value:"Module"}));class Bh{static async killCharacter(e,s="Battle defeat",r){try{console.log(`[CemeteryService] Matando personagem ${e}:`,{deathCause:s,killedByMonster:r});const{data:n,error:i}=await je.rpc("kill_character",{p_character_id:e,p_death_cause:s,p_killed_by_monster:r||null});if(i)throw console.error("[CemeteryService] Erro ao matar personagem:",i),i;return console.log(`[CemeteryService] Personagem ${e} morto com sucesso, ID no cemitério: ${n}`),{success:!0,data:n,error:null}}catch(n){return console.error("[CemeteryService] Erro crítico ao matar personagem:",n),{success:!1,data:null,error:n instanceof Error?n.message:"Erro desconhecido ao matar personagem"}}}static async getUserCemetery(e,s={}){try{const{page:r=1,limit:n=10}=s,i=(r-1)*n,{data:c,error:u}=await je.rpc("get_user_cemetery",{p_user_id:e,p_limit:n,p_offset:i});if(u)throw u;const{data:f,error:h}=await je.rpc("count_user_cemetery",{p_user_id:e});if(h)throw h;const{data:p,error:g}=await je.rpc("get_cemetery_stats",{p_user_id:e});if(g)throw g;const x=c,b=f,_=(p==null?void 0:p[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},j=i+x.length<b;return{success:!0,data:{characters:x,total:b,stats:_,hasMore:j},error:null}}catch(r){return console.error("[CemeteryService] Erro ao buscar cemitério:",r),{success:!1,data:null,error:r instanceof Error?r.message:"Erro ao buscar cemitério"}}}static async getCemeteryStats(e){try{const{data:s,error:r}=await je.rpc("get_cemetery_stats",{p_user_id:e});if(r)throw r;return{success:!0,data:(s==null?void 0:s[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},error:null}}catch(s){return console.error("[CemeteryService] Erro ao buscar estatísticas do cemitério:",s),{success:!1,data:null,error:s instanceof Error?s.message:"Erro ao buscar estatísticas"}}}static async hasCemetery(e){try{const{data:s,error:r}=await je.rpc("count_user_cemetery",{p_user_id:e});if(r)throw r;return{success:!0,data:s>0,error:null}}catch(s){return console.error("[CemeteryService] Erro ao verificar cemitério:",s),{success:!1,data:!1,error:s instanceof Error?s.message:"Erro ao verificar cemitério"}}}static formatSurvivalTime(e){if(e<60)return`${e} min`;if(e<1440){const s=Math.floor(e/60),r=e%60;return r>0?`${s}h ${r}min`:`${s}h`}else{const s=Math.floor(e/1440),r=Math.floor(e%1440/60);return r>0?`${s}d ${r}h`:`${s}d`}}static formatDeathCause(e,s){switch(e){case"Battle defeat":return s?`Morto por ${s}`:"Morto em batalha";case"Player quit":return"Abandonou a jornada";case"System error":return"Erro do sistema";default:return e}}}class Bl{static calculateInitiative(e,s){const r=e,n=Math.floor(s*.5),i=.9+Math.random()*.2,c=Math.floor((r+n)*i);return Math.max(1,c)}static calculateExtraTurns(e,s){if(s<=0)return 2;const r=e/s;let n=0;return r>=3.5?n=3:r>=2.5?n=2:r>=1.8&&(n=1),n<3&&Math.random()<.2&&(n+=1),Math.min(n,3)}static calculateDamage(e,s,r=0,n=110,i=0,c=10,u=10){const f=Number(e)||0,h=Number(s)||0;if(f<=0)return{damage:1,isCritical:!1,isDoubleAttack:!1,totalAttacks:1,damageBreakdown:"Dano mínimo: 1"};const p=Math.max(1,Math.floor(f-h*.5)),x=Math.random()*100<r,b=i+Math.floor((c-10)*.5)+Math.floor((u-10)*.3),j=Math.random()*100<Math.min(35,b);let N=p,C=`Base: ${p}`;if(x){const S=n/100;N=Math.floor(N*S),C+=` → Crítico (${n}%): ${N}`}let E=1;return j&&(N=N*2,E=2,C+=` → Duplo Ataque (DEX: ${c}, SPD: ${u}): ${N}`),{damage:N,isCritical:x,isDoubleAttack:j,totalAttacks:E,damageBreakdown:C}}static async processPlayerAction(e,s,r,n){console.log(`[BattleService] Processando ação do jogador: ${e}`);const i={...s},c=[],u=[],f=[];let h=!1,p="",g=0;switch(e){case"attack":if(i.currentEnemy&&i.currentEnemy.hp>0){const x=await this.getPlayerEquipmentSlots(i.player.id),b=this.calculateDamage(i.player.atk,i.currentEnemy.defense,i.player.critical_chance||0,i.player.critical_damage||110,i.player.double_attack_chance||0,i.player.dexterity||10,i.player.speed||10);g=b.damage;const _=b.isCritical,j=b.isDoubleAttack;i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-g),i.player.isDefending&&(i.player.isDefending=!1);let N=`${i.player.name} atacou ${i.currentEnemy.name}`;if(j&&(N+=" com ataque duplo"),_&&(N+=" CRITICAMENTE"),N+=` causando ${g} de dano!`,c.push({message:N,type:"player_action"}),x){console.log(`[BattleService] Calculando skill XP para ataque com dano ${g}`);const C=yr.calculateAttackSkillXp(x,g);if(C.length>0){u.push(...C);try{const{messages:E,skillLevelUps:S}=await yr.applySkillXp(i.player.id,C);for(const P of E)c.push({message:P,type:"skill_xp"});f.push(...E);for(const P of S)console.log(`[BattleService] Skill level up: ${P.skill} -> ${P.newLevel}`)}catch(E){console.error("[BattleService] Erro ao aplicar skill XP de ataque:",E)}}}i.currentEnemy.hp<=0?(c.push({message:`${i.currentEnemy.name} foi derrotado!`,type:"system"}),p=`Você derrotou ${i.currentEnemy.name}!`):p=N}break;case"defend":if(i.player.defenseCooldown===0){i.player.isDefending=!0,i.player.defenseCooldown=3;const x=`${i.player.name} assumiu postura defensiva.`;c.push({message:x,type:"player_action"});const b=await this.getPlayerEquipmentSlots(i.player.id);if(b){const _=yr.calculateDefenseSkillXp(b,0);if(_.length>0){u.push(..._);try{const{messages:j}=await yr.applySkillXp(i.player.id,_);for(const N of j)c.push({message:N,type:"skill_xp"});f.push(...j)}catch(j){console.error("[BattleService] Erro ao aplicar skill XP de defesa:",j)}}}p=x}else p=`Defesa está em cooldown por mais ${i.player.defenseCooldown} turnos.`,h=!0;break;case"spell":if(r){const x=i.player.spells.find(b=>b.id===r);if(x&&i.player.mana>=x.mana_cost&&x.current_cooldown===0){i.player.mana=Math.max(0,i.player.mana-x.mana_cost),x.current_cooldown=x.cooldown;let b="",_=0;if(x.effect_type==="damage"&&i.currentEnemy){let E=x.effect_value;if(i.player.magic_attack&&(E+=Math.floor(i.player.magic_attack*.5)),i.player.magic_mastery&&i.player.magic_mastery>1){const S=Math.floor(E*(i.player.magic_mastery-1)*.1);E+=S}_=E,i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-E),b=`causando ${E} de dano mágico`,i.currentEnemy.hp<=0&&(b+=` e derrotando ${i.currentEnemy.name}`)}else if(x.effect_type==="heal"){let E=x.effect_value;if(i.player.magic_attack&&(E+=Math.floor(i.player.magic_attack*.3)),i.player.magic_mastery&&i.player.magic_mastery>1){const S=Math.floor(E*(i.player.magic_mastery-1)*.1);E+=S}_=E,i.player.hp=Math.min(i.player.max_hp,i.player.hp+E),b=`restaurando ${E} de vida`}const j=`${i.player.name} lançou ${x.name} ${b}!`;c.push({message:j,type:"player_action"});const N=await this.getPlayerEquipmentSlots(i.player.id),C=yr.calculateMagicSkillXp(x.mana_cost,x.effect_type==="damage"?_:0,_,N);if(C.length>0){u.push(...C);try{const{messages:E}=await yr.applySkillXp(i.player.id,C);for(const S of E)c.push({message:S,type:"skill_xp"});f.push(...E)}catch(E){console.error("[BattleService] Erro ao aplicar skill XP de magia:",E)}}p=j}else p="Não é possível usar esta magia agora.",h=!0}break;case"flee":return this.processFleeResult(s);case"consumable":if(n)try{const{ConsumableService:x}=await Dt(async()=>{const{ConsumableService:_}=await Promise.resolve().then(()=>U6);return{ConsumableService:_}},void 0),b=await x.consumeItem(i.player.id,n,i.player);b.success&&b.data?(p=b.data.message,c.push({message:b.data.message,type:"player_action"}),h=!1,console.log("[BattleService] Poção usada com sucesso - turno NÃO consumido")):(p=b.error||"Erro ao usar item consumível.",h=!0)}catch(x){console.error("[BattleService] Erro ao usar consumível:",x),p="Erro ao usar item consumível.",h=!0}else p="Item consumível não especificado.",h=!0;break;case"special":p="Habilidade especial ainda não implementada.",h=!0;break;case"continue":try{console.log("[BattleService] Processando ação de continuar para próximo andar");const{GameService:x}=await Dt(async()=>{const{GameService:_}=await Promise.resolve().then(()=>mm);return{GameService:_}},void 0),b=await x.advanceToNextFloor(i);Object.assign(i,b),p=b.gameMessage||"Avançando para o próximo andar...",console.log(`[BattleService] Avanço processado - novo andar: ${b.player.floor}`),h=!1}catch(x){console.error("[BattleService] Erro ao avançar para próximo andar:",x),p="Erro ao avançar para o próximo andar",h=!0}break;case"interact_event":try{console.log("[BattleService] Processando interação com evento especial");const{GameService:x}=await Dt(async()=>{const{GameService:_}=await Promise.resolve().then(()=>mm);return{GameService:_}},void 0),b=await x.processSpecialEventInteraction(i);Object.assign(i,b),p=b.gameMessage||"Evento especial processado com sucesso!",console.log(`[BattleService] Evento especial processado - novo modo: ${b.mode}`),h=!1}catch(x){console.error("[BattleService] Erro ao processar evento especial:",x),p="Erro ao processar evento especial",h=!0}break;default:p="Ação não reconhecida.",h=!0;break}return i.player.defenseCooldown>0&&i.player.defenseCooldown--,e!=="consumable"&&(i.player.potionUsedThisTurn=!1),console.log(`[BattleService] Ação processada: ${e}, mensagem: ${p}`),console.log(`[BattleService] skipTurn FINAL: ${h} (poções nunca consomem turno)`),console.log("[BattleService] Skill XP gains:",u.length),{newState:i,skipTurn:h,message:p,skillXpGains:u,skillMessages:f,gameLogMessages:c}}static async processFleeResult(e){const s=await this.processFleeAttempt(e);return{newState:s,skipTurn:s.fleeSuccessful||!1,message:s.gameMessage||"Tentativa de fuga processada",skillXpGains:[],skillMessages:[],gameLogMessages:[]}}static async getPlayerEquipmentSlots(e){try{return await Gt.getEquippedItems(e)}catch(s){return console.error("[BattleService] Erro ao obter equipamentos do jogador:",s),null}}static async processPlayerDeath(e,s,r,n){try{return(await Bh.killCharacter(s.id,"Battle defeat",r.name)).success?{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado! Seu personagem foi perdido permanentemente.`,characterDeleted:!0}:{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado!`}}catch(i){return console.error("[BattleService] Erro crítico ao processar morte:",i),{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado!`}}}static async processFleeAttempt(e){const{player:s,currentEnemy:r}=e;if(!r)return e;const n=s.speed||10,i=r.speed||10,c=n-i;let f=70+Math.floor(c*2);if(f=Math.max(15,Math.min(95,f)),Math.random()*100<f)return{...e,fleeSuccessful:!0,currentEnemy:null,mode:"fled",battleRewards:null,isPlayerTurn:!0,gameMessage:`${s.name} fugiu da batalha com sucesso!`};{const g=Math.floor((r.attack||10)*.3),x=Math.max(0,s.hp-g);return x<=0?this.processPlayerDeath(e,s,r,`${s.name} tentou fugir mas falhou!`):{...e,player:{...s,hp:x},fleeSuccessful:!1,gameMessage:`${s.name} tentou fugir mas falhou! Sofreu ${g} de dano.`}}}static async processEnemyAction(e,s){if(!e.currentEnemy||e.currentEnemy.hp<=0)return{newState:{...e,isPlayerTurn:!0}};const r=e.currentEnemy,n=e.player,i=[];if(console.log("[BattleService] === PROCESSANDO AÇÃO DO INIMIGO ==="),console.log(`[BattleService] Inimigo: ${r.name} (HP: ${r.hp}/${r.maxHp})`),Zs.processOverTimeEffects(r),r.hp<=0)return console.log("[BattleService] Inimigo morreu por efeitos ao longo do tempo"),{newState:{...e,isPlayerTurn:!0,gameMessage:`${r.name} foi derrotado por efeitos ao longo do tempo!`}};let c="attack";const u=r.special_abilities&&r.special_abilities.length>0,f=(r.intelligence||10)>(r.strength||10);let h=.15,p=.2;switch(r.behavior){case"aggressive":h=.25,p=.1;break;case"defensive":h=.3,p=.15;break;case"balanced":f?(p=.35,h=.2):(p=.2,h=.2);break}u&&(h+=.1),u&&Math.random()<h?c="special":r.mana>=10&&Math.random()<p&&(c="spell"),console.log(`[BattleService] Ação escolhida: ${c} (special: ${h}, spell: ${p})`);let g="",x=0,b=0;switch(c){case"attack":{console.log("[BattleService] Executando ataque físico");const _=this.calculateDamage(r.attack,n.def,r.critical_chance||0,r.critical_damage||110,0,r.dexterity||10,r.speed||10);if(x=_.damage,n.isDefending||s){b=Math.floor(x*.15);let S=`${r.name} atacou`;_.isCritical&&(S+=" com golpe crítico"),_.isDoubleAttack&&(S+=` ${_.totalAttacks}x`),S+=`, mas você reduziu o dano de ${x} para ${b} com sua defesa!`,g=S;try{const P=x-b,R=yr.calculateDefenseSkillXp(null,P);i.push(...R),console.log("[BattleService] XP de defesa por bloqueio:",R)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa:",P)}}else{b=x;let S=`${r.name} atacou`;_.isCritical&&(S+=" com golpe crítico"),_.isDoubleAttack&&(S+=` ${_.totalAttacks}x`),S+=` e causou ${b} de dano!`,g=S;try{const P=yr.calculateDefenseSkillXp(null,Math.floor(b*.3));i.push(...P),console.log("[BattleService] XP de defesa passiva:",P)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa passiva:",P)}}const j=Math.max(0,n.hp-b);if(j<=0)return console.log(`[BattleService] Jogador ${n.name} morreu - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,r,g)};const N={...e,player:{...n,hp:j,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},C=i.length>0?i.map(S=>`+${S.xp} XP em ${yr.getSkillDisplayName(S.skill)}`):void 0,E=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Ataque processado com sucesso. Mensagem: ${g}`),{newState:E,skillXpGains:i,skillMessages:C}}case"spell":{console.log("[BattleService] Executando magia");const _=Math.floor(r.attack*1.2),j=10;if(n.isDefending||s){b=Math.floor(_*.15),g=`${r.name} lançou uma magia, mas você reduziu o dano de ${_} para ${b} com sua defesa!`;try{const R=await Gt.getEquippedItems(n.id)||null,D=Math.floor((_-b)*.5),$=yr.calculateDefenseSkillXp(R,D);i.push(...$)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa mágica:",P)}}else b=_,g=`${r.name} lançou uma magia e causou ${b} de dano mágico!`;const N=Math.max(0,n.hp-b);if(N<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por magia - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,r,g)};const C={...e,player:{...n,hp:N,isDefending:!1,potionUsedThisTurn:!1},currentEnemy:{...r,mana:Math.max(0,r.mana-j)},isPlayerTurn:!0,gameMessage:g},E=i.length>0?i.map(P=>`+${P.xp} XP em ${yr.getSkillDisplayName(P.skill)}`):void 0,S=Zs.updateSpellCooldowns(C);return console.log(`[BattleService] Magia processada com sucesso. Mensagem: ${g}`),{newState:S,skillXpGains:i,skillMessages:E}}case"special":{const _=r.special_abilities||[];if(_.length>0){const S=_[Math.floor(Math.random()*_.length)],P=S.split(":")[0].trim();if(S.includes("Regenera")||S.includes("Recupera")||S.includes("cura")){const R=Math.floor(r.maxHp*(.1+Math.random()*.15)),D=Math.min(r.maxHp,r.hp+R),$={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...r,hp:D},isPlayerTurn:!0,gameMessage:`${r.name} usou ${P} e recuperou ${R} HP!`};return{newState:Zs.updateSpellCooldowns($)}}else S.includes("dano")||S.includes("ATK")||S.includes("Ataque")?(x=Math.floor(r.attack*(1.3+Math.random()*.7)),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou ${P} e causou ${b} de dano!`):S.includes("crítico")||S.includes("Crítico")?(x=Math.floor(r.attack*2),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou ${P} com um golpe crítico devastador! ${b} de dano!`):S.includes("área")||S.includes("todos")?(x=Math.floor(r.attack*1.2),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou ${P} em área! ${b} de dano!`):(x=Math.floor(r.attack*(1.2+Math.random()*.5)),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou ${P}! ${b} de dano!`)}else switch(r.behavior){case"aggressive":{x=Math.floor(r.attack*1.5),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou Ataque Furioso e causou ${b} de dano!`;break}case"defensive":{const S=Math.floor(r.maxHp*.15),P=Math.min(r.maxHp,r.hp+S),R={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...r,hp:P},isPlayerTurn:!0,gameMessage:`${r.name} se concentrou e recuperou ${S} HP!`};return{newState:Zs.updateSpellCooldowns(R)}}default:x=Math.floor(r.attack*1.3),b=n.isDefending||s?Math.floor(x*.15):x,g=`${r.name} usou uma habilidade especial e causou ${b} de dano!`}if(b>0)try{const P=await Gt.getEquippedItems(n.id)||null;if(n.isDefending||s){const R=x-b,D=yr.calculateDefenseSkillXp(P,R);i.push(...D)}else{const R=yr.calculateDefenseSkillXp(P,Math.floor(b*.2));i.push(...R)}}catch(S){console.warn("[BattleService] Erro ao calcular XP de defesa especial:",S)}const j=Math.max(0,n.hp-b);if(j<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por habilidade especial - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,r,g)};const N={...e,player:{...n,hp:j,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},C=i.length>0?i.map(S=>`+${S.xp} XP em ${yr.getSkillDisplayName(S.skill)}`):void 0,E=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Habilidade especial processada com sucesso. Mensagem: ${g}`),{newState:E,skillXpGains:i,skillMessages:C}}default:{console.log(`[BattleService] ERRO: Ação desconhecida: ${c}`);const _={...e,player:{...e.player,potionUsedThisTurn:!1},isPlayerTurn:!0};return{newState:Zs.updateSpellCooldowns(_)}}}}}function $u(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class Ht{static async getAvailableConsumables(){try{const e=Date.now();if(e-this.lastFetchTimestamp<this.CACHE_DURATION&&this.consumableCache.size>0)return{data:Array.from(this.consumableCache.values()),error:null,success:!0};const{data:s,error:r}=await je.from("consumables").select("*").order("price");if(r)throw r;return this.consumableCache.clear(),s.forEach(n=>{this.consumableCache.set(n.id,n)}),this.lastFetchTimestamp=e,{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar consumíveis:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar consumíveis",success:!1}}}static async getCharacterConsumables(e){try{const{data:s,error:r}=await je.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e);if(r)throw r;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar consumíveis do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar consumíveis do personagem",success:!1}}}static async buyConsumable(e,s,r=1){try{const{data:n,error:i}=await je.rpc("buy_consumable",{p_character_id:e,p_consumable_id:s,p_quantity:r}).single();if(i)throw i;return{data:{newGold:n},error:null,success:!0}}catch(n){return console.error("Erro ao comprar consumível:",n),{data:null,error:$u(n,"Erro ao comprar consumível"),success:!1}}}static async consumeItem(e,s,r){try{const{data:n,error:i}=await je.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e).eq("consumable_id",s).single();if(i)throw i;const c=n;if(!c||c.quantity<=0)return{data:null,error:"Você não possui este item",success:!1};const u=c.consumable;let f="";const h={};switch(u.type){case"potion":if(u.description.includes("HP")||u.description.includes("Vida")){const g=r.hp,x=Math.min(r.max_hp,r.hp+u.effect_value),b=x-g;r.hp=x,h.hp=x,f=b>0?`Recuperou ${b} HP!`:"HP já estava no máximo!"}else if(u.description.includes("Mana")){const g=r.mana,x=Math.min(r.max_mana,r.mana+u.effect_value),b=x-g;r.mana=x,h.mana=x,f=b>0?`Recuperou ${b} Mana!`:"Mana já estava no máximo!"}break;case"antidote":"active_effects"in r?(r.active_effects.debuffs=[],r.active_effects.dots=[],f="Todos os efeitos negativos foram removidos!"):f="Antídoto só pode ser usado durante batalhas!";break;case"buff":"active_effects"in r?u.description.includes("Força")||u.description.includes("ataque")?(r.atk+=u.effect_value,r.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_strength"}),f=`Ataque aumentado em ${u.effect_value} por 3 turnos!`):(u.description.includes("Defesa")||u.description.includes("defesa"))&&(r.def+=u.effect_value,r.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_defense"}),f=`Defesa aumentada em ${u.effect_value} por 3 turnos!`):f="Elixires só podem ser usados durante batalhas!";break}const{error:p}=await je.rpc("use_consumable",{p_character_id:e,p_consumable_id:s});if(p)throw p;if(Object.keys(h).length>0){const{error:g}=await je.from("characters").update(h).eq("id",e);if(g)throw g}return{data:{message:f},error:null,success:!0}}catch(n){return console.error("Erro ao usar consumível:",n),{data:null,error:$u(n,"Erro ao usar consumível"),success:!1}}}static async getMonsterDrops(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.dropCache.size>0)return{data:Array.from(this.dropCache.values()),error:null,success:!0};const{data:s,error:r}=await je.from("monster_drops").select("*").order("rarity");if(r)throw r;return this.dropCache.clear(),s.forEach(n=>{this.dropCache.set(n.id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar drops:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar drops",success:!1}}}static processMonsterDrops(e,s,r=1){const n=[];return s.forEach(i=>{const c=i.drop_chance*(1+e*.02)*r;if(Math.random()<=Math.min(.95,c)){const u=Math.floor(Math.random()*(i.max_quantity-i.min_quantity+1)+i.min_quantity);u>0&&n.push({drop_id:i.drop_id,quantity:u})}}),n}static async addDropsToInventory(e,s){try{if(s.length===0)return{data:0,error:null,success:!0};const r=s.map(f=>({drop_id:f.drop_id,quantity:f.quantity}));console.log(`[ConsumableService] Processando ${s.length} drops via função segura`);const{supabaseAdmin:n}=await Dt(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>Nd);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_process_combat_drops",{p_character_id:e,p_drops:r}).single();if(c)throw console.error("Erro na função secure_process_combat_drops:",c),c;const u=i;return console.log(`[ConsumableService] ${u} drops processados com sucesso`),{data:u,error:null,success:!0}}catch(r){return console.error("Erro ao processar drops:",r),{data:null,error:$u(r,"Erro ao processar drops"),success:!1}}}static async getCraftingRecipes(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.recipeCache.size>0)return{data:Array.from(this.recipeCache.values()),error:null,success:!0};const{data:s,error:r}=await je.from("crafting_recipes").select(`
          *,
          ingredients:crafting_ingredients (*)
        `);if(r)throw r;return this.recipeCache.clear(),s.forEach(n=>{this.recipeCache.set(n.result_id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas",success:!1}}}static async canCraftItem(e,s){try{const{data:r,error:n}=await je.rpc("check_can_craft",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:r,error:null,success:!0}}catch(r){return console.error("Erro ao verificar crafting:",r),{data:null,error:$u(r,"Erro ao verificar crafting"),success:!1}}}static async craftItem(e,s){try{const{error:r}=await je.rpc("craft_item",{p_character_id:e,p_recipe_id:s});if(r)throw r;return{data:{message:"Item criado com sucesso!"},error:null,success:!0}}catch(r){return console.error("Erro ao criar item:",r),{data:null,error:$u(r,"Erro ao criar item"),success:!1}}}static async getCharacterDrops(e){try{const{data:s,error:r}=await je.from("character_drops").select(`
          *,
          drop:drop_id (*)
        `).eq("character_id",e);if(r)throw r;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar drops do personagem",success:!1}}}static async checkIngredients(e,s){var r,n;try{const i=[];let c=!0;const[u,f]=await Promise.all([this.getCharacterConsumables(e),this.getCharacterDrops(e)]),h=u.success?u.data:[],p=f.success?f.data:[];for(const g of s)if(g.item_type==="monster_drop"){const x=p==null?void 0:p.find(b=>b.drop_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const b=((r=x==null?void 0:x.drop)==null?void 0:r.name)||"Item desconhecido";i.push(b)}}else if(g.item_type==="consumable"){const x=h==null?void 0:h.find(b=>b.consumable_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const b=((n=x==null?void 0:x.consumable)==null?void 0:n.name)||"Item desconhecido";i.push(b)}}return{data:{hasAll:c,missing:i},error:null,success:!0}}catch(i){return console.error("Erro ao verificar ingredientes:",i instanceof Error?i.message:i),{data:null,error:"Erro ao verificar ingredientes",success:!1}}}static async getDropInfoByIds(e){try{if(e.length===0)return{data:[],error:null,success:!0};const{data:s,error:r}=await je.from("monster_drops").select("id, name, description, rarity, value").in("id",e);return r?(console.error("Erro ao buscar informações dos drops:",r),{data:null,error:r.message,success:!1}):{data:s||[],error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar informações dos drops",success:!1}}}}ze(Ht,"consumableCache",new Map),ze(Ht,"dropCache",new Map),ze(Ht,"recipeCache",new Map),ze(Ht,"lastFetchTimestamp",0),ze(Ht,"CACHE_DURATION",3e5);const U6=Object.freeze(Object.defineProperty({__proto__:null,ConsumableService:Ht},Symbol.toStringTag,{value:"Module"}));class hm{static clearAllGameCaches(){const e=Date.now();if(e-this.lastGlobalClearTime<this.MIN_GLOBAL_CLEAR_INTERVAL){console.log(`[CacheService] Cache clear global throttled - última limpeza há ${e-this.lastGlobalClearTime}ms`);return}console.log("[CacheService] === LIMPEZA GLOBAL DE CACHES ==="),Promise.all([Dt(()=>Promise.resolve().then(()=>aS),void 0).then(s=>s.FloorService.clearCache()),Dt(()=>Promise.resolve().then(()=>rS),void 0).then(s=>s.MonsterService.clearCache()),Dt(()=>Promise.resolve().then(()=>xh),void 0).then(s=>s.CharacterCacheService.clearAllCache())]).then(()=>{console.log("[CacheService] Todos os caches foram limpos com sucesso")}).catch(s=>{console.error("[CacheService] Erro ao limpar alguns caches:",s)}),this.lastGlobalClearTime=e}static clearFloorRelatedCaches(e){console.log(`[CacheService] Limpando caches relacionados ao andar ${e}`),Dt(()=>Promise.resolve().then(()=>aS),void 0).then(s=>{s.FloorService.clearCache()}),Dt(()=>Promise.resolve().then(()=>rS),void 0).then(s=>{s.MonsterService.clearCache()})}static clearCharacterRelatedCaches(e){console.log(`[CacheService] Limpando caches relacionados ao personagem ${e}`),Dt(()=>Promise.resolve().then(()=>xh),void 0).then(s=>{s.CharacterCacheService.invalidateCharacterCache(e)})}static clearUserRelatedCaches(e){console.log(`[CacheService] Limpando caches relacionados ao usuário ${e}`),Dt(()=>Promise.resolve().then(()=>xh),void 0).then(s=>{s.CharacterCacheService.invalidateUserCache(e)})}static async getAllCacheStats(){try{const[e,s,r]=await Promise.all([Dt(()=>Promise.resolve().then(()=>xh),void 0).then(n=>n.CharacterCacheService.getCacheStats()),Promise.resolve({message:"Stats não implementados ainda"}),Promise.resolve({message:"Stats não implementados ainda"})]);return{characters:e,floors:s,monsters:r}}catch(e){return console.error("[CacheService] Erro ao obter estatísticas de cache:",e),{characters:{error:"Falha ao obter stats"},floors:{error:"Falha ao obter stats"},monsters:{error:"Falha ao obter stats"}}}}}ze(hm,"lastGlobalClearTime",0),ze(hm,"MIN_GLOBAL_CLEAR_INTERVAL",1e3);class q6{static async loadPlayerForGame(e){try{const s=await Ge.getCharacterForGame(e);if(!s.success||!s.data)throw new Error(s.error||"Personagem não encontrado");const r=s.data,n=await Zs.getCharacterEquippedSpells(e),i=n.success&&n.data?n.data:[];console.log("[GameStateService] Carregando consumíveis para personagem:",e);const c=await Ht.getCharacterConsumables(e);console.log("[GameStateService] Resposta dos consumíveis:",c);const u=c.success&&c.data?c.data.map(f=>({...f,consumable:f.consumable||null})).filter(f=>f.quantity>0):[];return console.log("[GameStateService] Consumíveis carregados:",u.length),{...r,spells:i,consumables:u,active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}}}catch(s){throw console.error("[GameStateService] Erro ao carregar personagem para o jogo:",s),s}}static async saveGameProgress(e,s){const{player:r,currentFloor:n}=e,i={user_id:s,player_name:r.name,current_floor:r.floor,hp:r.hp,max_hp:r.max_hp,atk:r.atk,def:r.def,highest_floor:Math.max(r.floor,(n==null?void 0:n.floorNumber)||1)};try{const{error:c}=await je.from("game_progress").upsert(i).select();return c?(console.error("[GameStateService] Erro ao salvar progresso:",c),{success:!1,error:c.message}):{success:!0}}catch(c){return console.error("[GameStateService] Erro geral ao salvar:",c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido"}}}static async loadGameProgress(e){try{const{data:s,error:r}=await je.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return r?(console.error("[GameStateService] Erro ao carregar progresso:",r),{success:!1,error:r.message}):{success:!0,data:s[0]||void 0}}catch(s){return console.error("[GameStateService] Erro geral ao carregar:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}static convertMonsterToEnemy(e,s){return{id:e.id,name:e.name,level:e.level||Math.max(1,Math.floor(s/5)+1),hp:e.hp,maxHp:e.hp,attack:e.atk,defense:e.def,speed:e.speed||10,image:e.image||"👾",behavior:e.behavior||"balanced",mana:e.mana||0,reward_xp:e.reward_xp,reward_gold:e.reward_gold,possible_drops:e.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:e.tier,base_tier:e.base_tier,cycle_position:e.cycle_position,is_boss:e.is_boss,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,critical_chance:e.critical_chance,critical_damage:e.critical_damage,critical_resistance:e.critical_resistance,physical_resistance:e.physical_resistance,magical_resistance:e.magical_resistance,debuff_resistance:e.debuff_resistance,physical_vulnerability:e.physical_vulnerability,magical_vulnerability:e.magical_vulnerability,primary_trait:e.primary_trait,secondary_trait:e.secondary_trait,special_abilities:e.special_abilities||[]}}static async advanceToNextFloor(e){const{player:s}=e,r=s.floor+1;console.log(`[GameStateService] Avançando do andar ${s.floor} para ${r}`);try{hm.clearAllGameCaches(),console.log("[GameStateService] === ATUALIZANDO ANDAR NO BANCO ===");const n=await Ge.updateCharacterFloor(s.id,r);if(!n.success)throw new Error(n.error||"Erro ao atualizar andar do personagem");const i=await cr.getFloorData(r);if(!i)throw new Error(`Erro ao gerar dados do andar ${r}`);const c=await La.getMonsterForFloor(r);if(!c.success||!c.data)throw new Error(`Falha ao gerar inimigo para o andar ${r}: ${c.error}`);const u=this.convertMonsterToEnemy(c.data,r),f=await cr.checkForSpecialEvent(r);return{...e,mode:f?"special_event":"battle",player:{...s,floor:r,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:i,currentEnemy:f?null:u,currentSpecialEvent:f,gameMessage:f?`Evento especial encontrado: ${f.name}!`:`Andar ${r}: ${i.description}. Um ${u.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,r)}}catch(n){console.error(`[GameStateService] Erro crítico ao avançar para andar ${r}:`,n);try{const i=await La.getMonsterForFloor(r);if(!i.success||!i.data)throw new Error(`Não foi possível gerar inimigo para o andar ${r}`);const c=this.convertMonsterToEnemy(i.data,r),u={floorNumber:r,type:"common",isCheckpoint:r%10===0,minLevel:Math.max(1,Math.floor(r/5)),description:`Andar ${r} - Área Desconhecida`};return{...e,player:{...s,floor:r,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:u,currentEnemy:c,currentSpecialEvent:null,gameMessage:`Andar ${r}: ${u.description}. Um ${c.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(i){return console.error("[GameStateService] Falha ao criar estado de fallback:",i),{...e,gameMessage:`Erro crítico ao avançar para o andar ${r}: ${n instanceof Error?n.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}}class Dr{static clearAllCaches(){console.log("[GameService] Delegando limpeza de cache para CacheService"),hm.clearAllGameCaches()}static async generateEnemy(e){try{console.log(`[GameService] Iniciando geração de inimigo para andar ${e}`);const{data:s,error:r,success:n}=await La.getMonsterForFloor(e);if(!n||r||!s)return console.error(`[GameService] Erro inesperado - MonsterService falhou para andar ${e}:`,r),null;(!s.name||!s.hp||!s.atk||!s.def)&&(console.error(`[GameService] Dados de monstro incompletos para andar ${e}:`,s),console.log("[GameService] Tentando corrigir dados incompletos..."),s.name=s.name||`Monstro Andar ${e}`,s.hp=s.hp||50+e*10,s.atk=s.atk||10+e*2,s.def=s.def||5+e*1);const i={id:s.id,name:s.name,level:s.level||Math.max(1,Math.floor(e/5)+1),hp:s.hp,maxHp:s.hp,attack:s.atk,defense:s.def,speed:s.speed||10,image:s.image||"👾",behavior:s.behavior||"balanced",mana:s.mana||0,reward_xp:s.reward_xp||Math.floor(5+e*2),reward_gold:s.reward_gold||Math.floor(3+e*1),possible_drops:s.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:s.tier||1,base_tier:s.base_tier||1,cycle_position:s.cycle_position||(e-1)%20+1,is_boss:s.is_boss||!1,strength:s.strength||10,dexterity:s.dexterity||10,intelligence:s.intelligence||10,wisdom:s.wisdom||10,vitality:s.vitality||10,luck:s.luck||10,critical_chance:s.critical_chance||.05,critical_damage:s.critical_damage||1.5,critical_resistance:s.critical_resistance||.1,physical_resistance:s.physical_resistance||0,magical_resistance:s.magical_resistance||0,debuff_resistance:s.debuff_resistance||0,physical_vulnerability:s.physical_vulnerability||1,magical_vulnerability:s.magical_vulnerability||1,primary_trait:s.primary_trait||"common",secondary_trait:s.secondary_trait||"basic",special_abilities:s.special_abilities||[]};return console.log(`[GameService] ✅ MONSTRO GERADO COM SUCESSO: ${i.name} (Andar ${e})`),console.log(`[GameService] Stats: HP: ${i.hp}/${i.maxHp}, ATK: ${i.attack}, DEF: ${i.defense}, XP: ${i.reward_xp}, Gold: ${i.reward_gold}`),i}catch(s){return console.error(`[GameService] Erro CRÍTICO ao gerar inimigo para andar ${e}:`,s),null}}static async saveGameProgress(e,s){const{player:r,currentFloor:n}=e,i={user_id:s,player_name:r.name,current_floor:r.floor,hp:r.hp,max_hp:r.max_hp,attack:r.atk,defense:r.def,highest_floor:Math.max(r.floor,(n==null?void 0:n.floorNumber)||1)};try{const{data:c,error:u}=await je.from("game_progress").upsert(i).select();return u?(console.error("Erro ao salvar progresso:",u),{success:!1,error:u.message,data:null}):{success:!0,error:void 0,data:c[0]}}catch(c){return console.error("Erro geral ao salvar:",c instanceof Error?c.message:c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido",data:null}}}static async loadGameProgress(e){try{const{data:s,error:r}=await je.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return r?(console.error("Erro ao carregar progresso:",r),{success:!1,error:r.message,data:null}):{success:!0,error:void 0,data:s[0]||null}}catch(s){return console.error("Erro geral ao carregar:",s instanceof Error?s.message:s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async processPlayerAction(e,s,r,n){return console.log(`[GameService] Delegando ação do jogador para BattleService: ${e}`),Bl.processPlayerAction(e,s,r,n)}static async processEnemyDefeat(e){console.log("[GameService] Delegando processamento de derrota do inimigo para RewardService");const{RewardService:s}=await Dt(async()=>{const{RewardService:r}=await import("./reward.service-A4fADclP.js");return{RewardService:r}},[]);return s.processEnemyDefeat(e)}static async processEnemyActionWithDelay(e,s,r){var c;if(console.log("[GameService] === PROCESSANDO TURNO DO INIMIGO ==="),!e.currentEnemy||e.currentEnemy.hp<=0)return console.log("[GameService] Inimigo morto antes do delay - cancelando ação"),{newState:e};const n=r??1500+Math.random()*1e3,i=((c=e.currentEnemy)==null?void 0:c.name)||"Inimigo";return console.log(`[GameService] ${i} está pensando... (${Math.round(n)}ms)`),await new Promise(u=>setTimeout(u,n)),!e.currentEnemy||e.currentEnemy.hp<=0?(console.log("[GameService] Inimigo morto após delay - cancelando ação"),{newState:e}):(console.log(`[GameService] ${i} decidiu sua ação!`),Bl.processEnemyAction(e,s))}static async advanceToNextFloor(e){var n,i,c;const{player:s}=e,r=s.floor+1;console.log(`[GameService] Avançando do andar ${s.floor} para ${r}`);try{console.log("[GameService] === ATUALIZANDO ANDAR NO BANCO ==="),console.log(`[GameService] Personagem: ${s.id}`),console.log(`[GameService] Andar atual: ${s.floor} -> Próximo andar: ${r}`);const u=await Ge.updateCharacterFloor(s.id,r);if(!u.success)throw console.error("[GameService] ERRO ao atualizar andar:",u.error),new Error(u.error||"Erro ao atualizar andar do personagem");console.log(`[GameService] === ANDAR ATUALIZADO NO BANCO: ${r} ===`),console.log(`[GameService] Carregando dados do andar ${r}...`);const f=await cr.getFloorData(r);if(!f)throw new Error(`Erro ao gerar dados do andar ${r}`);console.log(`[GameService] Dados do andar ${r} carregados:`,f.description),console.log(`[GameService] === GERANDO INIMIGO PARA ANDAR ${r} ===`);const h=await this.generateEnemy(r);if(!h)throw console.error(`[GameService] Falha ao gerar inimigo para andar ${r}`),new Error(`Falha ao gerar inimigo para o andar ${r}`);console.log(`[GameService] Inimigo gerado: ${h.name} (HP: ${h.hp}/${h.maxHp})`);let p=null;const g=r%10===0,x=r%5===0&&!g,b=!g&&!x;b&&Math.random()<.01?(p=await cr.checkForSpecialEvent(r),p&&(console.log(`[GameService] ✨ Evento especial raro ativado no andar ${r}: ${p.name} (1% chance)`),console.log(`[GameService] ⚠️ AVISO: Inimigo ${h.name} foi gerado mas será usado após evento especial`))):console.log(`[GameService] Andar ${r}: Evento especial ${b?"não sorteado":"bloqueado"} - FOCO EM MONSTROS`);const _={...e,mode:p?"special_event":"battle",player:{...s,floor:r,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:f,currentEnemy:p?null:h,currentSpecialEvent:p,gameMessage:p?`Evento especial encontrado: ${p.name}!`:`Andar ${r}: ${f.description}. Um ${h.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,r)};return console.log(`[GameService] Estado do jogo atualizado para andar ${r} com sucesso`),console.log(`[GameService] - Modo: ${_.mode}`),console.log(`[GameService] - Andar: ${(n=_.currentFloor)==null?void 0:n.description}`),console.log(`[GameService] - Inimigo: ${((i=_.currentEnemy)==null?void 0:i.name)||"N/A"}`),console.log(`[GameService] - Evento: ${((c=_.currentSpecialEvent)==null?void 0:c.name)||"N/A"}`),console.log(`[GameService] - BattleRewards limpo: ${_.battleRewards===null}`),_}catch(u){console.error(`[GameService] Erro crítico ao avançar para andar ${r}:`,u),console.log(`[GameService] Tentando criar estado de fallback para andar ${r}...`);try{const f=await this.generateEnemy(r);if(!f)throw new Error(`Não foi possível gerar inimigo para o andar ${r}`);const h={floorNumber:r,type:"common",isCheckpoint:r%10===0,minLevel:Math.max(1,Math.floor(r/5)),description:`Andar ${r} - Área Desconhecida`};return console.log(`[GameService] Estado de fallback criado para andar ${r}`),{...e,player:{...s,floor:r,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:h,currentEnemy:f,currentSpecialEvent:null,gameMessage:`Andar ${r}: ${h.description}. Um ${f.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(f){return console.error("[GameService] Falha ao criar estado de fallback:",f),{...e,gameMessage:`Erro crítico ao avançar para o andar ${r}: ${u instanceof Error?u.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}static async processSpecialEventInteraction(e){return cr.processSpecialEventInteraction(e)}static async loadPlayerForGame(e){return q6.loadPlayerForGame(e)}}ze(Dr,"calculateInitiative",Bl.calculateInitiative),ze(Dr,"calculateExtraTurns",Bl.calculateExtraTurns),ze(Dr,"calculateDamage",Bl.calculateDamage),ze(Dr,"processEnemyAction",Bl.processEnemyAction),ze(Dr,"getFloorData",cr.getFloorData),ze(Dr,"calculateFloorRewards",cr.calculateFloorRewards);const mm=Object.freeze(Object.defineProperty({__proto__:null,GameService:Dr},Symbol.toStringTag,{value:"Module"})),qs=()=>y.useContext(wE);class gv{static async getSpecialEventForFloor(e){try{console.log(`[SpecialEventService] Buscando evento especial para o andar ${e}`);const{data:s,error:r}=await je.rpc("get_special_event_for_floor",{p_floor:e}).single();if(r)throw console.error(`[SpecialEventService] Erro ao buscar evento para andar ${e}:`,r.message),r;if(!s)throw console.error(`[SpecialEventService] Nenhum evento retornado para andar ${e}`),new Error("Nenhum evento encontrado para este andar");const n=s;return console.log(`[SpecialEventService] Evento obtido para andar ${e}: ${n.name}`),{data:n,error:null,success:!0}}catch(s){return console.error(`[SpecialEventService] Falha ao buscar evento para andar ${e}:`,s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar evento especial",success:!1}}}static async processSpecialEvent(e,s){try{console.log(`[SpecialEventService] Processando evento ${s} para personagem ${e}`);const{data:r,error:n}=await je.rpc("process_special_event",{p_character_id:e,p_event_id:s}).single();if(n)throw console.error("[SpecialEventService] Erro ao processar evento:",n.message),n;if(!r)throw new Error("Resposta inválida do servidor");const i=r;return console.log("[SpecialEventService] Evento processado com sucesso:",i),{data:i,error:null,success:!0}}catch(r){return console.error("[SpecialEventService] Falha ao processar evento:",r instanceof Error?r.message:r),{data:null,error:r instanceof Error?r.message:"Erro ao processar evento especial",success:!1}}}static shouldGenerateSpecialEvent(e){return e==="event"?Math.random()<.7:!1}static getEventIcon(e){switch(e){case"bonfire":return"🔥";case"treasure_chest":return"📦";case"magic_fountain":return"⛲";default:return"✨"}}static getEventColor(e){switch(e){case"bonfire":return"text-orange-500";case"treasure_chest":return"text-yellow-500";case"magic_fountain":return"text-blue-500";default:return"text-purple-500"}}}const SE=y.createContext(null);function F6({children:t}){const[e,s]=y.useState([]),[r,n]=y.useState(null),[i,c]=y.useState(!1),{user:u}=qs(),{gameState:f,setGameState:h,updateLoading:p}=Km(),{addGameLogMessage:g,setGameMessage:x}=Wm(),b=y.useRef(!1),_=y.useRef(null),j=y.useRef(!1),N=y.useRef(null);y.useEffect(()=>{if(_.current!==(u==null?void 0:u.id)&&(_.current=(u==null?void 0:u.id)||null,s([]),n(null),c(!1),b.current=!1),!(u!=null&&u.id)||i||b.current)return;(async()=>{try{console.log("[CharacterProvider] Carregando personagens pela primeira vez para:",u.id),b.current=!0,p("loadProgress",!0);const M=await Ge.getUserCharacters(u.id);M.success&&M.data?(s(M.data),c(!0),M.data.length>0?x("Selecione um personagem para jogar!"):x("Você ainda não tem personagens. Crie um para começar!")):M.error&&(console.error("[CharacterProvider] Erro ao carregar personagens:",M.error),me.error("Erro",{description:M.error}))}catch(M){console.error("[CharacterProvider] Erro ao carregar personagens:",M instanceof Error?M.message:"Erro desconhecido"),me.error("Erro",{description:M instanceof Error?M.message:"Erro ao carregar personagens"})}finally{p("loadProgress",!1),b.current=!1}})()},[u==null?void 0:u.id,i]);const C=y.useCallback(async A=>{if(!(u!=null&&u.id)){me.error("Erro",{description:"Você precisa estar logado para criar um personagem."});return}p("startGame",!0);try{const M=await Ge.createCharacter({user_id:u.id,name:A});if(M.success&&M.data){const U=await Ge.getCharacter(M.data.id);U.success&&U.data&&(s(Y=>[...Y,U.data]),n(U.data),me.success("Sucesso",{description:"Personagem criado com sucesso!"}),g(`${U.data.name} foi criado!`))}else if(M.error)throw new Error(M.error)}catch(M){console.error("[CharacterProvider] Erro ao criar personagem:",M instanceof Error?M.message:"Erro desconhecido"),me.error("Erro",{description:M instanceof Error?M.message:"Erro ao criar personagem"})}finally{p("startGame",!1)}},[u==null?void 0:u.id]),E=y.useCallback(async A=>{try{n(A),console.log(`[CharacterProvider] Carregando stats derivados para ${A.name}...`);const M=await Ge.getCharacterForGame(A.id);if(!M.success||!M.data)throw new Error(M.error||"Erro ao carregar dados do personagem");const U=M.data;h({mode:"menu",player:U,currentFloor:null,currentEnemy:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:U.floor,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1}),g(`${A.name} selecionado!`)}catch(M){console.error("[CharacterProvider] Erro ao selecionar personagem:",M instanceof Error?M.message:"Erro desconhecido"),me.error("Erro",{description:M instanceof Error?M.message:"Erro ao selecionar personagem"})}},[]),S=y.useCallback(async A=>{try{console.log(`[CharacterProvider] Carregando personagem para o hub: ${A.name} (ID: ${A.id})`),n(A),console.log("[CharacterProvider] Carregando stats derivados via getCharacterForGame...");const M=await Ge.getCharacterForGame(A.id);if(!M.success||!M.data)throw new Error(M.error||"Erro ao carregar dados do personagem");const U=M.data;console.log("[CharacterProvider] Dados do gamePlayer:",{name:U.name,level:U.level,gold:U.gold,floor:U.floor,hp:U.hp,max_hp:U.max_hp,atk:U.atk,def:U.def});const Y={mode:"hub",player:U,currentFloor:null,currentEnemy:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:Math.max(1,U.floor),selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1};console.log("[CharacterProvider] Configurando novo estado do jogo:",Y),h(Y),x(`Bem-vindo ao hub, ${U.name}!`),console.log(`[CharacterProvider] Hub carregado com sucesso para ${U.name}`)}catch(M){console.error("[CharacterProvider] Erro ao carregar personagem para o hub:",M instanceof Error?M.message:"Erro desconhecido"),me.error("Erro",{description:M instanceof Error?M.message:"Erro ao carregar personagem"})}},[h,x]),P=y.useCallback((A,M)=>{console.log(`[CharacterProvider] Atualizando stats do jogador: HP ${A}, Mana ${M}`);const U=f;h({...U,player:{...U.player,hp:Math.floor(A),mana:Math.floor(M)}})},[h]),R=y.useCallback(()=>{c(!1),b.current=!1},[]),D=y.useCallback(async(A,M)=>{if(j.current){console.warn("[CharacterProvider] Inicialização de batalha já em progresso - ignorando nova tentativa");return}if(N.current===M){console.warn(`[CharacterProvider] Batalha já foi inicializada para ${M} - ignorando`);return}j.current=!0,N.current=M;try{console.log(`[CharacterProvider] === INICIALIZANDO BATALHA PARA ${A.name} (${M}) ===`),p("loadProgress",!0),n(A),console.log("[CharacterProvider] Carregando dados do personagem...");const U=await Ge.getCharacterForGame(A.id);if(!U.success||!U.data)throw new Error(U.error||"Erro ao carregar dados do personagem");const Y=U.data,V=Y.floor;console.log(`[CharacterProvider] Personagem carregado - Andar atual: ${V}`),console.log(`[CharacterProvider] Carregando dados do andar ${V}...`);const F=await cr.getFloorData(V);if(!F)throw new Error(`Erro ao carregar dados do andar ${V}`);console.log(`[CharacterProvider] Dados do andar carregados: ${F.description}`);let Q=null;F.type==="event"&&gv.shouldGenerateSpecialEvent("event")&&(Q=await cr.checkForSpecialEvent(V));let G=null;if(!Q){if(console.log(`[CharacterProvider] Gerando inimigo para andar ${V}...`),G=await Dr.generateEnemy(V),!G)throw new Error(`Erro ao gerar inimigo para o andar ${V}`);console.log(`[CharacterProvider] Inimigo gerado: ${G.name} (HP: ${G.hp}/${G.maxHp})`)}const k={mode:Q?"special_event":"battle",player:Y,currentFloor:F,currentEnemy:G,currentSpecialEvent:Q,isPlayerTurn:!0,gameMessage:Q?`Evento especial encontrado: ${Q.name}!`:`Andar ${V}: ${F.description}. Um ${G.name} apareceu!`,highestFloor:Math.max(1,Y.floor),selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1};console.log("[CharacterProvider] Configurando estado de batalha:",{mode:k.mode,floor:F.description,enemy:(G==null?void 0:G.name)||"N/A",event:(Q==null?void 0:Q.name)||"N/A"}),h(k);const B=Q?`Evento especial encontrado no andar ${V}: ${Q.name}`:`Andar ${V} - ${G.name} apareceu!`;g(B,"system"),console.log("[CharacterProvider] === BATALHA INICIALIZADA COM SUCESSO ===")}catch(U){throw console.error("[CharacterProvider] Erro ao inicializar batalha:",U instanceof Error?U.message:"Erro desconhecido"),me.error("Erro ao iniciar batalha",{description:U instanceof Error?U.message:"Erro ao inicializar batalha"}),N.current=null,U}finally{p("loadProgress",!1),j.current=!1}},[h,g,p]),$=y.useMemo(()=>({characters:e,selectedCharacter:r,createCharacter:C,selectCharacter:E,loadCharacterForHub:S,initializeBattle:D,updatePlayerStats:P,reloadCharacters:R}),[e,r]);return a.jsx(SE.Provider,{value:$,children:t})}function jy(){const t=y.useContext(SE);if(!t)throw new Error("useCharacter deve ser usado dentro de um CharacterProvider");return t}const CE=y.createContext(null);function H6({children:t}){const{gameState:e,setGameState:s,updateLoading:r}=Km(),{addGameLogMessage:n}=Wm(),{selectedCharacter:i}=jy(),c=y.useRef({timestamp:0,action:"",processing:!1}),u=y.useCallback(()=>{console.log("[BattleProvider] Limpando estado de loading"),c.current.processing=!1,r("performAction",!1)},[r]),f=y.useCallback(async(h,p,g)=>{const x=Date.now(),b=x-c.current.timestamp,_=c.current.action===h;if(console.log(`[BattleProvider] === AÇÃO SOLICITADA: ${h} ===`),console.log(`[BattleProvider] Debounce: última ação ${c.current.action} há ${b}ms`),!i){console.warn("[BattleProvider] Ação bloqueada - sem personagem selecionado");return}if(c.current.processing){console.warn(`[BattleProvider] Ação bloqueada - já processando ação: ${c.current.action}`);return}if(e.mode==="gameover"){console.warn("[BattleProvider] Ação bloqueada - personagem morto");return}if(_&&b<2e3){console.warn(`[BattleProvider] Ação bloqueada - mesma ação muito rápida (${b}ms < 2000ms)`);return}if(b<500){console.warn(`[BattleProvider] Ação bloqueada - muito rápida (${b}ms < 500ms)`);return}c.current={timestamp:x,action:h,processing:!0},r("performAction",!0);try{console.log(`[BattleProvider] Processando ação do jogador: ${h}`);const j=await Dr.processPlayerAction(h,e,p,g),{newState:N,skipTurn:C,message:E,skillXpGains:S,gameLogMessages:P}=j;if(P!=null&&P.length&&P.forEach(R=>{n(R.message,R.type)}),S!=null&&S.length&&i)try{for(const R of S)await Ge.addSkillXp(i.id,R.skill,R.xp)}catch(R){console.error("[BattleProvider] Erro ao aplicar skill XP:",R)}if(s(N),h==="flee"&&(N.fleeSuccessful===!0||N.mode==="fled")){console.log("[BattleProvider] === FUGA BEM-SUCEDIDA ==="),n(E,"system"),u();return}if(C){n(E,"system"),u();return}if(N.currentEnemy&&N.currentEnemy.hp<=0){console.log("[BattleProvider] === INIMIGO DERROTADO ===");const R=await Dr.processEnemyDefeat(N);s(R),n(`${N.currentEnemy.name} foi derrotado!`,"system"),u();return}if(h==="continue"&&N.battleRewards===null&&N.currentEnemy){console.log("[BattleProvider] === CONTINUE PROCESSADO - ESTADO ATUALIZADO ==="),n(E,"system"),u();return}if(h==="interact_event"&&N.mode==="battle"&&N.currentEnemy){console.log("[BattleProvider] === EVENTO ESPECIAL PROCESSADO - VOLTANDO À BATALHA ==="),n(E,"system"),u();return}N.currentEnemy&&!N.fleeSuccessful?(console.log("[BattleProvider] === INICIANDO TURNO DO INIMIGO ==="),s({...N,isPlayerTurn:!1,gameMessage:E}),n(E,"player_action"),setTimeout(async()=>{var R;try{console.log("[BattleProvider] Processando ação do inimigo...");const D=await Dr.processEnemyActionWithDelay({...N,isPlayerTurn:!1},h==="defend",1500),{newState:$,skillXpGains:A}=D;if(A!=null&&A.length&&i)try{for(const M of A)await Ge.addSkillXp(i.id,M.skill,M.xp)}catch(M){console.error("[BattleProvider] Erro ao aplicar skill XP de defesa:",M)}if($.mode==="gameover"){s($),u();return}if(i&&await Ge.updateCharacterHpMana(i.id,$.player.hp,$.player.mana),(R=$.gameMessage)!=null&&R.trim()){const M=$.gameMessage.includes("causou")&&$.gameMessage.includes("dano")?"damage":"enemy_action";n($.gameMessage,M)}s({...$,isPlayerTurn:!0}),u()}catch(D){console.error("[BattleProvider] Erro no turno do inimigo:",D),u()}},1e3)):u()}catch(j){console.error("[BattleProvider] Erro ao processar ação:",j),u()}},[e,i,s,n,r,u]);return a.jsx(CE.Provider,{value:{performAction:f},children:t})}function G6(){const t=y.useContext(CE);if(!t)throw new Error("useBattle deve ser usado dentro de um BattleProvider");return t}const EE=y.createContext(null);function X6({children:t}){const{gameState:e,setGameState:s}=Km(),{addGameLogMessage:r}=Wm(),{selectedCharacter:n}=jy(),i=y.useCallback(async()=>{var c;if(e.mode==="special_event")try{const u=await Dr.processSpecialEventInteraction(e);if(n&&u.player){(u.player.hp!==e.player.hp||u.player.mana!==e.player.mana)&&await Ge.updateCharacterHpMana(n.id,u.player.hp,u.player.mana);const p=u.player.gold-e.player.gold;p>0&&await Ge.grantSecureGold(n.id,p,"special_event")}const f=await Dr.generateEnemy(u.player.floor);if(!f)throw new Error("Erro ao gerar inimigo após evento especial");const h={...u,mode:"battle",currentSpecialEvent:null,currentEnemy:f,gameMessage:`Andar ${u.player.floor}: ${((c=u.currentFloor)==null?void 0:c.description)||"Área Desconhecida"}. Um ${f.name} apareceu!`};s(h),r(u.gameMessage||"Evento especial concluído!","system"),r(`Um ${f.name} apareceu!`,"system")}catch(u){console.error("[EventProvider] Erro no evento especial:",u),r("Erro ao processar evento especial","system")}},[e,n,s,r]);return a.jsx(EE.Provider,{value:{interactWithEvent:i},children:t})}function Y6(){const t=y.useContext(EE);if(!t)throw new Error("useEvent deve ser usado dentro de um EventProvider");return t}function K6({children:t}){return a.jsx(L6,{children:a.jsx(I6,{children:a.jsx(F6,{children:a.jsx(H6,{children:a.jsx(X6,{children:t})})})})})}function W6(){return y.useEffect(()=>{const e=localStorage.getItem("tower-trials-theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="light"||(e==="dark"||e==="system")&&e==="system"&&!s?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")},[]),{setTheme:e=>{localStorage.setItem("tower-trials-theme",e),e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}}function Z6({children:t}){return W6(),a.jsxs("div",{className:"font-inter",children:[a.jsx($6,{richColors:!0,position:"top-right"}),a.jsx(e6,{children:a.jsx(K6,{children:t})})]})}const Zm=dD({component:()=>a.jsxs(Z6,{children:[a.jsx(Lo,{}),a.jsx(xO,{})]})});/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),nS=t=>{const e=J6(t);return e.charAt(0).toUpperCase()+e.slice(1)},AE=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),eI=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:n="",children:i,iconNode:c,...u},f)=>y.createElement("svg",{ref:f,...tI,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:AE("lucide",n),...!i&&!eI(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>y.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(t,e)=>{const s=y.forwardRef(({className:r,...n},i)=>y.createElement(sI,{ref:i,iconNode:e,className:AE(`lucide-${Q6(nS(t))}`,`lucide-${t}`,r),...n}));return s.displayName=nS(t),s};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xv=Ee("activity",rI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hs=Ee("arrow-left",aI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],kE=Ee("arrow-right",nI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],iI=Ee("arrow-up",oI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],cI=Ee("award",lI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"m14 12-8.381 8.38a1 1 0 0 1-3.001-3L11 9",key:"5z9253"}],["path",{d:"M15 15.5a.5.5 0 0 0 .5.5A6.5 6.5 0 0 0 22 9.5a.5.5 0 0 0-.5-.5h-1.672a2 2 0 0 1-1.414-.586l-5.062-5.062a1.205 1.205 0 0 0-1.704 0L9.352 5.648a1.205 1.205 0 0 0 0 1.704l5.062 5.062A2 2 0 0 1 15 13.828z",key:"19zklq"}]],dI=Ee("axe",uI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]],hI=Ee("backpack",fI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],vx=Ee("beaker",mI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],gI=Ee("brain",pI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],vI=Ee("building",xI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],TE=Ee("calendar",yI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],wI=Ee("castle",bI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ny=Ee("check",_I);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ro=Ee("chevron-down",jI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],vv=Ee("chevron-left",NI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],RE=Ee("chevron-right",SI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xc=Ee("chevron-up",CI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ME=Ee("circle-alert",EI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yv=Ee("circle-check-big",AI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],PE=Ee("circle-check",kI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],RI=Ee("circle-help",TI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pm=Ee("circle-x",MI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],gm=Ee("clock",PI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],_r=Ee("coins",DI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],oS=Ee("crosshair",OI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ti=Ee("crown",$I);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],DE=Ee("download",LI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],bv=Ee("droplet",II);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],VI=Ee("droplets",BI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],UI=Ee("eye-off",zI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],No=Ee("eye",qI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Qm=Ee("flame",FI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Sd=Ee("funnel",HI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],ra=Ee("gem",GI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],YI=Ee("github",XI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Ci=Ee("hammer",KI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ds=Ee("heart",WI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],QI=Ee("hexagon",ZI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],eB=Ee("house",JI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],sB=Ee("info",tB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],iS=Ee("keyboard",rB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],nB=Ee("loader-circle",aB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],iB=Ee("lock",oB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],cB=Ee("log-out",lB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dB=Ee("mail",uB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],wv=Ee("map",fB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],mB=Ee("menu",hB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],lS=Ee("message-circle",pB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M5 12h14",key:"1ays0h"}]],OE=Ee("minus",gB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],cS=Ee("moon",xB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ur=Ee("package",vB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],_v=Ee("play",yB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bo=Ee("plus",bB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jv=Ee("refresh-cw",wB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],$E=Ee("rotate-ccw",_B);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Sy=Ee("save",jB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],SB=Ee("scroll",NB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Jm=Ee("search",CB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Nv=Ee("shield-check",EB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bt=Ee("shield",AB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],cd=Ee("shirt",kB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],xm=Ee("shopping-bag",TB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],MB=Ee("shopping-cart",RB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Qs=Ee("skull",PB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uS=Ee("smartphone",DB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],LE=Ee("snowflake",OB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ct=Ee("sparkles",$B);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Nt=Ee("star",LB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dS=Ee("sun",IB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Tt=Ee("sword",BB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Cy=Ee("swords",VB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],er=Ee("target",zB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],qB=Ee("timer",UB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Sv=Ee("trending-down",FB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Br=Ee("trending-up",HB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],IE=Ee("triangle-alert",GB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Sa=Ee("trophy",XB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],KB=Ee("twitter",YB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vm=Ee("user",WB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BE=Ee("users",ZB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JB=Ee("wifi-off",QB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],t8=Ee("wifi",e8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zi=Ee("x",s8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],At=Ee("zap",r8),Ri=()=>a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(nB,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})});function VE({children:t}){const{loading:e}=qs(),[s,r]=y.useState(!1),n=y.useRef(!1),i=y.useRef(null);return y.useEffect(()=>{if(!(typeof window>"u")&&!n.current)return n.current=!0,s||(e.onAuthUserChanged?i.current=setTimeout(()=>{r(!0)},5e3):r(!0)),()=>{i.current&&clearTimeout(i.current)}},[e.onAuthUserChanged,s]),y.useEffect(()=>{!e.onAuthUserChanged&&!s&&(r(!0),i.current&&(clearTimeout(i.current),i.current=null))},[e.onAuthUserChanged,s]),s?t:a.jsx(Ri,{})}function a8({children:t}){const{user:e,signOut:s,loading:r}=qs(),n=Ot(),i=Ii(),u=gy({strict:!1}).auth,f=y.useRef(!1),h=y.useRef(!1),p=y.useRef(null);return y.useLayoutEffect(()=>{const g=e!==null;p.current!==g&&(p.current=g,g||(h.current=!1,f.current=!1))},[e]),y.useEffect(()=>{if(!(typeof window>"u")&&!(r.onAuthUserChanged||e===void 0)){if(i.pathname==="/logout"){if(e&&!f.current){me.error("Sessão expirada, faça o login novamente."),s(),f.current=!0;return}else if(!e&&f.current){const g=`${i.pathname}${i.search||""}`;try{const x=typeof g=="string"?g:"",b=x?encodeURIComponent(x):"";n({to:"/auth",search:{auth:b},replace:!0})}catch(x){console.warn("Erro ao codificar path:",x),n({to:"/auth",search:{auth:""},replace:!0})}return}}if(i.pathname!=="/auth/verify-email"&&e&&!h.current&&!f.current){h.current=!0;try{if(u&&typeof u=="string"&&u.trim()!==""&&u!=="true"){const g=decodeURIComponent(u);if(g&&g.startsWith("/")&&!g.includes("[object")&&!g.startsWith("/auth")){n({to:g,replace:!0});return}}n({to:"/game",replace:!0})}catch(g){console.warn("Erro ao processar redirecionamento:",g),n({to:"/game",replace:!0})}}}},[e,u,i.pathname,i.search,r.onAuthUserChanged,s,n]),r.onAuthUserChanged||e===void 0?a.jsx(Ri,{}):e&&!f.current&&i.pathname!=="/auth/verify-email"&&i.pathname!=="/logout"?a.jsx(Ri,{}):t}function n8({children:t}){return a.jsx(VE,{children:a.jsx(a8,{children:t})})}function fS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function zE(...t){return e=>{let s=!1;const r=t.map(n=>{const i=fS(n,e);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():fS(t[n],null)}}}}function _t(...t){return y.useCallback(zE(...t),t)}function Mi(t){const e=o8(t),s=y.forwardRef((r,n)=>{const{children:i,...c}=r,u=y.Children.toArray(i),f=u.find(l8);if(f){const h=f.props.children,p=u.map(g=>g===f?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:g);return a.jsx(e,{...c,ref:n,children:y.isValidElement(h)?y.cloneElement(h,void 0,p):null})}return a.jsx(e,{...c,ref:n,children:i})});return s.displayName=`${t}.Slot`,s}var UE=Mi("Slot");function o8(t){const e=y.forwardRef((s,r)=>{const{children:n,...i}=s;if(y.isValidElement(n)){const c=u8(n),u=c8(i,n.props);return n.type!==y.Fragment&&(u.ref=r?zE(r,c):c),y.cloneElement(n,u)}return y.Children.count(n)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var qE=Symbol("radix.slottable");function i8(t){const e=({children:s})=>a.jsx(a.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=qE,e}function l8(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===qE}function c8(t,e){const s={...e};for(const r in e){const n=t[r],i=e[r];/^on[A-Z]/.test(r)?n&&i?s[r]=(...u)=>{const f=i(...u);return n(...u),f}:n&&(s[r]=n):r==="style"?s[r]={...n,...i}:r==="className"&&(s[r]=[n,i].filter(Boolean).join(" "))}return{...t,...s}}function u8(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function FE(t){var e,s,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(s=FE(t[e]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function Ey(){for(var t,e,s=0,r="",n=arguments.length;s<n;s++)(t=arguments[s])&&(e=FE(t))&&(r&&(r+=" "),r+=e);return r}const hS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,mS=Ey,Id=(t,e)=>s=>{var r;if((e==null?void 0:e.variants)==null)return mS(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:i}=e,c=Object.keys(n).map(h=>{const p=s==null?void 0:s[h],g=i==null?void 0:i[h];if(p===null)return null;const x=hS(p)||hS(g);return n[h][x]}),u=s&&Object.entries(s).reduce((h,p)=>{let[g,x]=p;return x===void 0||(h[g]=x),h},{}),f=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,p)=>{let{class:g,className:x,...b}=p;return Object.entries(b).every(_=>{let[j,N]=_;return Array.isArray(N)?N.includes({...i,...u}[j]):{...i,...u}[j]===N})?[...h,g,x]:h},[]);return mS(t,c,f,s==null?void 0:s.class,s==null?void 0:s.className)},Ay="-",d8=t=>{const e=h8(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:c=>{const u=c.split(Ay);return u[0]===""&&u.length!==1&&u.shift(),HE(u,e)||f8(c)},getConflictingClassGroupIds:(c,u)=>{const f=s[c]||[];return u&&r[c]?[...f,...r[c]]:f}}},HE=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const s=t[0],r=e.nextPart.get(s),n=r?HE(t.slice(1),r):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(Ay);return(c=e.validators.find(({validator:u})=>u(i)))==null?void 0:c.classGroupId},pS=/^\[(.+)\]$/,f8=t=>{if(pS.test(t)){const e=pS.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},h8=t=>{const{theme:e,classGroups:s}=t,r={nextPart:new Map,validators:[]};for(const n in s)Cv(s[n],r,n,e);return r},Cv=(t,e,s,r)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:gS(e,n);i.classGroupId=s;return}if(typeof n=="function"){if(m8(n)){Cv(n(r),e,s,r);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([i,c])=>{Cv(c,gS(e,i),s,r)})})},gS=(t,e)=>{let s=t;return e.split(Ay).forEach(r=>{s.nextPart.has(r)||s.nextPart.set(r,{nextPart:new Map,validators:[]}),s=s.nextPart.get(r)}),s},m8=t=>t.isThemeGetter,p8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,r=new Map;const n=(i,c)=>{s.set(i,c),e++,e>t&&(e=0,r=s,s=new Map)};return{get(i){let c=s.get(i);if(c!==void 0)return c;if((c=r.get(i))!==void 0)return n(i,c),c},set(i,c){s.has(i)?s.set(i,c):n(i,c)}}},Ev="!",Av=":",g8=Av.length,x8=t=>{const{prefix:e,experimentalParseClassName:s}=t;let r=n=>{const i=[];let c=0,u=0,f=0,h;for(let _=0;_<n.length;_++){let j=n[_];if(c===0&&u===0){if(j===Av){i.push(n.slice(f,_)),f=_+g8;continue}if(j==="/"){h=_;continue}}j==="["?c++:j==="]"?c--:j==="("?u++:j===")"&&u--}const p=i.length===0?n:n.substring(f),g=v8(p),x=g!==p,b=h&&h>f?h-f:void 0;return{modifiers:i,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:b}};if(e){const n=e+Av,i=r;r=c=>c.startsWith(n)?i(c.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(s){const n=r;r=i=>s({className:i,parseClassName:n})}return r},v8=t=>t.endsWith(Ev)?t.substring(0,t.length-1):t.startsWith(Ev)?t.substring(1):t,y8=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const n=[];let i=[];return r.forEach(c=>{c[0]==="["||e[c]?(n.push(...i.sort(),c),i=[]):i.push(c)}),n.push(...i.sort()),n}},b8=t=>({cache:p8(t.cacheSize),parseClassName:x8(t),sortModifiers:y8(t),...d8(t)}),w8=/\s+/,_8=(t,e)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:i}=e,c=[],u=t.trim().split(w8);let f="";for(let h=u.length-1;h>=0;h-=1){const p=u[h],{isExternal:g,modifiers:x,hasImportantModifier:b,baseClassName:_,maybePostfixModifierPosition:j}=s(p);if(g){f=p+(f.length>0?" "+f:f);continue}let N=!!j,C=r(N?_.substring(0,j):_);if(!C){if(!N){f=p+(f.length>0?" "+f:f);continue}if(C=r(_),!C){f=p+(f.length>0?" "+f:f);continue}N=!1}const E=i(x).join(":"),S=b?E+Ev:E,P=S+C;if(c.includes(P))continue;c.push(P);const R=n(C,N);for(let D=0;D<R.length;++D){const $=R[D];c.push(S+$)}f=p+(f.length>0?" "+f:f)}return f};function j8(){let t=0,e,s,r="";for(;t<arguments.length;)(e=arguments[t++])&&(s=GE(e))&&(r&&(r+=" "),r+=s);return r}const GE=t=>{if(typeof t=="string")return t;let e,s="";for(let r=0;r<t.length;r++)t[r]&&(e=GE(t[r]))&&(s&&(s+=" "),s+=e);return s};function N8(t,...e){let s,r,n,i=c;function c(f){const h=e.reduce((p,g)=>g(p),t());return s=b8(h),r=s.cache.get,n=s.cache.set,i=u,u(f)}function u(f){const h=r(f);if(h)return h;const p=_8(f,s);return n(f,p),p}return function(){return i(j8.apply(null,arguments))}}const _s=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},XE=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,YE=/^\((?:(\w[\w-]*):)?(.+)\)$/i,S8=/^\d+\/\d+$/,C8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,k8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vl=t=>S8.test(t),dt=t=>!!t&&!Number.isNaN(Number(t)),no=t=>!!t&&Number.isInteger(Number(t)),yx=t=>t.endsWith("%")&&dt(t.slice(0,-1)),yn=t=>C8.test(t),R8=()=>!0,M8=t=>E8.test(t)&&!A8.test(t),KE=()=>!1,P8=t=>k8.test(t),D8=t=>T8.test(t),O8=t=>!Le(t)&&!Ie(t),$8=t=>Ec(t,QE,KE),Le=t=>XE.test(t),di=t=>Ec(t,JE,M8),bx=t=>Ec(t,z8,dt),xS=t=>Ec(t,WE,KE),L8=t=>Ec(t,ZE,D8),yh=t=>Ec(t,eA,P8),Ie=t=>YE.test(t),Lu=t=>Ac(t,JE),I8=t=>Ac(t,U8),vS=t=>Ac(t,WE),B8=t=>Ac(t,QE),V8=t=>Ac(t,ZE),bh=t=>Ac(t,eA,!0),Ec=(t,e,s)=>{const r=XE.exec(t);return r?r[1]?e(r[1]):s(r[2]):!1},Ac=(t,e,s=!1)=>{const r=YE.exec(t);return r?r[1]?e(r[1]):s:!1},WE=t=>t==="position"||t==="percentage",ZE=t=>t==="image"||t==="url",QE=t=>t==="length"||t==="size"||t==="bg-size",JE=t=>t==="length",z8=t=>t==="number",U8=t=>t==="family-name",eA=t=>t==="shadow",q8=()=>{const t=_s("color"),e=_s("font"),s=_s("text"),r=_s("font-weight"),n=_s("tracking"),i=_s("leading"),c=_s("breakpoint"),u=_s("container"),f=_s("spacing"),h=_s("radius"),p=_s("shadow"),g=_s("inset-shadow"),x=_s("text-shadow"),b=_s("drop-shadow"),_=_s("blur"),j=_s("perspective"),N=_s("aspect"),C=_s("ease"),E=_s("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...P(),Ie,Le],D=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],A=()=>[Ie,Le,f],M=()=>[Vl,"full","auto",...A()],U=()=>[no,"none","subgrid",Ie,Le],Y=()=>["auto",{span:["full",no,Ie,Le]},no,Ie,Le],V=()=>[no,"auto",Ie,Le],F=()=>["auto","min","max","fr",Ie,Le],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],k=()=>["auto",...A()],B=()=>[Vl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],z=()=>[t,Ie,Le],W=()=>[...P(),vS,xS,{position:[Ie,Le]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",B8,$8,{size:[Ie,Le]}],ae=()=>[yx,Lu,di],ee=()=>["","none","full",h,Ie,Le],le=()=>["",dt,Lu,di],ie=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[dt,yx,vS,xS],ce=()=>["","none",_,Ie,Le],be=()=>["none",dt,Ie,Le],Ne=()=>["none",dt,Ie,Le],we=()=>[dt,Ie,Le],Ce=()=>[Vl,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yn],breakpoint:[yn],color:[R8],container:[yn],"drop-shadow":[yn],ease:["in","out","in-out"],font:[O8],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yn],shadow:[yn],spacing:["px",dt],text:[yn],"text-shadow":[yn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vl,Le,Ie,N]}],container:["container"],columns:[{columns:[dt,Le,Ie,u]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[no,"auto",Ie,Le]}],basis:[{basis:[Vl,"full","auto",u,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[dt,Vl,"auto","initial","none",Le]}],grow:[{grow:["",dt,Ie,Le]}],shrink:[{shrink:["",dt,Ie,Le]}],order:[{order:[no,"first","last","none",Ie,Le]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:k()}],mx:[{mx:k()}],my:[{my:k()}],ms:[{ms:k()}],me:[{me:k()}],mt:[{mt:k()}],mr:[{mr:k()}],mb:[{mb:k()}],ml:[{ml:k()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[u,"screen",...B()]}],"min-w":[{"min-w":[u,"screen","none",...B()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",s,Lu,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ie,bx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",yx,Le]}],"font-family":[{font:[I8,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Ie,Le]}],"line-clamp":[{"line-clamp":[dt,"none",Ie,bx]}],leading:[{leading:[i,...A()]}],"list-image":[{"list-image":["none",Ie,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ie,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:[dt,"from-font","auto",Ie,di]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[dt,"auto",Ie,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},no,Ie,Le],radial:["",Ie,Le],conic:[no,Ie,Le]},V8,L8]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:ae()}],"gradient-via-pos":[{via:ae()}],"gradient-to-pos":[{to:ae()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ie(),"hidden","none"]}],"divide-style":[{divide:[...ie(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...ie(),"none","hidden"]}],"outline-offset":[{"outline-offset":[dt,Ie,Le]}],"outline-w":[{outline:["",dt,Lu,di]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",p,bh,yh]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",g,bh,yh]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[dt,di]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",x,bh,yh]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[dt,Ie,Le]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[dt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[Ie,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[dt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ie,Le]}],filter:[{filter:["","none",Ie,Le]}],blur:[{blur:ce()}],brightness:[{brightness:[dt,Ie,Le]}],contrast:[{contrast:[dt,Ie,Le]}],"drop-shadow":[{"drop-shadow":["","none",b,bh,yh]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",dt,Ie,Le]}],"hue-rotate":[{"hue-rotate":[dt,Ie,Le]}],invert:[{invert:["",dt,Ie,Le]}],saturate:[{saturate:[dt,Ie,Le]}],sepia:[{sepia:["",dt,Ie,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ie,Le]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[dt,Ie,Le]}],"backdrop-contrast":[{"backdrop-contrast":[dt,Ie,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",dt,Ie,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[dt,Ie,Le]}],"backdrop-invert":[{"backdrop-invert":["",dt,Ie,Le]}],"backdrop-opacity":[{"backdrop-opacity":[dt,Ie,Le]}],"backdrop-saturate":[{"backdrop-saturate":[dt,Ie,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",dt,Ie,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ie,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[dt,"initial",Ie,Le]}],ease:[{ease:["linear","initial",C,Ie,Le]}],delay:[{delay:[dt,Ie,Le]}],animate:[{animate:["none",E,Ie,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Ie,Le]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[Ie,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ce()}],"translate-x":[{"translate-x":Ce()}],"translate-y":[{"translate-y":Ce()}],"translate-z":[{"translate-z":Ce()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie,Le]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[dt,Lu,di,bx]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},tA=N8(q8);function Be(...t){return tA(Ey(t))}const F8=Id("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),de=y.forwardRef(({className:t,variant:e,size:s,asChild:r=!1,...n},i)=>{const c=r?UE:"button";return a.jsx(c,{className:Be(F8({variant:e,size:s,className:t})),ref:i,...n})});de.displayName="Button";function sA(...t){return tA(Ey(t))}const rA={layout:{container:"max-w-5xl mx-auto p-6 sm:p-8",section:"py-8 md:py-12"}},H8=({children:t,className:e,id:s,style:r})=>a.jsx("section",{className:sA(rA.layout.section,e),id:s,style:r,children:t}),yS=({children:t,className:e,id:s,style:r})=>a.jsx("div",{className:sA(rA.layout.container,e),id:s,style:r,children:t});function aA(){return a.jsx("footer",{className:"bg-gradient-to-t from-background/90 to-background/70 border-t border-border",children:a.jsxs(H8,{children:[a.jsxs(yS,{className:"grid gap-12 md:grid-cols-[1.5fr_0.5fr_0.5fr]",children:[a.jsxs("div",{className:"not-prose flex flex-col gap-6",children:[a.jsxs(_o,{to:"/",className:"group",children:[a.jsx("h3",{className:"sr-only",children:"Tower Trials"}),a.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})]}),a.jsx("p",{className:"text-muted-foreground",children:"Enfrente desafios, suba a torre e torne-se uma lenda neste RPG roguelike épico."})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("h5",{className:"font-bold text-primary",children:"Links"}),a.jsx(_o,{to:"/game/ranking",className:"text-muted-foreground hover:text-primary transition-colors",children:"Ranking Global"}),a.jsx(_o,{to:"/game/guide",className:"text-muted-foreground hover:text-primary transition-colors",children:"Guia do Jogo"})]}),a.jsx("div",{className:"flex flex-col gap-3",children:a.jsx("h5",{className:"font-bold text-primary",children:"Legal"})})]}),a.jsxs(yS,{className:"not-prose mt-8 flex flex-col justify-between gap-6 border-t border-border pt-8 md:flex-row md:items-center md:gap-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:a.jsx(YI,{className:"h-5 w-5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:a.jsx(KB,{className:"h-5 w-5"})})]}),a.jsx("p",{className:"text-muted-foreground",children:"© 2024 Tower Trials. Todos os direitos reservados."})]})]})})}const G8=Wt("/_public")({component:X8});function X8(){return a.jsx(n8,{children:a.jsxs("main",{className:"flex min-h-screen flex-col",children:[a.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:a.jsx(Lo,{})}),a.jsx(aA,{})]})})}function Y8({children:t}){const{user:e,loading:s}=qs(),r=Ot(),n=Ii(),i=y.useRef(!1),c=y.useRef(null);return y.useLayoutEffect(()=>{const u=e!==null;c.current!==u&&(c.current=u,i.current=!1)},[e]),y.useEffect(()=>{if(!(typeof window>"u")&&!s.onAuthUserChanged&&e===null&&!i.current){if(i.current=!0,n.pathname.startsWith("/auth"))return;const u=`${n.pathname}${n.search||""}`;if(u&&u!=="/auth")try{const h=encodeURIComponent(typeof u=="string"?u:"/game");r({to:"/auth",search:{auth:h},replace:!0})}catch(f){console.warn("Erro ao codificar path:",f),r({to:"/auth",search:{auth:encodeURIComponent("/game")},replace:!0})}else r({to:"/auth",search:{auth:""},replace:!0})}},[e,s.onAuthUserChanged,n.pathname,n.search]),s.onAuthUserChanged||e===void 0?a.jsx(Ri,{}):e===null?a.jsx(Ri,{}):t}function K8({children:t}){return a.jsx(VE,{children:a.jsx(Y8,{children:t})})}function W8({children:t}){const{user:e}=qs(),s=Ot(),r=y.useRef(!1),n=y.useRef(null);return y.useLayoutEffect(()=>{if(!e){n.current=null,r.current=!1;return}const i=!!e.email_confirmed_at;n.current!==i&&(n.current=i,r.current=!1)},[e==null?void 0:e.email_confirmed_at]),y.useEffect(()=>{typeof window>"u"||e&&!e.email_confirmed_at&&!r.current&&(r.current=!0,s({to:"/auth/verify-email",search:{auth:"true"},replace:!0}))},[e,s]),!e||!e.email_confirmed_at?null:a.jsx(a.Fragment,{children:t})}function nA(){const[t,e]=y.useState(null),[s,r]=y.useState(!1),[n,i]=y.useState(!1);return y.useEffect(()=>{const u=p=>{p.preventDefault(),e(p),r(!0)},f=()=>{i(!0),r(!1),e(null),console.log("PWA foi instalado com sucesso!")},h=()=>{const p=window.matchMedia("(display-mode: standalone)").matches,g=window.matchMedia("(display-mode: fullscreen)").matches,x=window.matchMedia("(display-mode: minimal-ui)").matches;(p||g||x)&&i(!0)};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",f),h(),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",f)}},[]),{installPWA:async()=>{if(!t)return!1;try{t.prompt();const{outcome:u}=await t.userChoice;return u==="accepted"?(e(null),r(!1),!0):!1}catch(u){return console.error("Erro ao instalar PWA:",u),!1}},isInstallable:s,isInstalled:n,canInstall:s&&!n}}function Z8(){const{installPWA:t,canInstall:e,isInstalled:s}=nA(),r=async()=>{await t()&&console.log("App instalado com sucesso!")};return s?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"App Instalado"]}):e?a.jsxs(de,{onClick:r,variant:"outline",size:"sm",className:"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-950 dark:hover:bg-blue-900 border-blue-200 dark:border-blue-800",children:[a.jsx(DE,{className:"w-4 h-4"}),"Instalar App"]}):null}function Xe(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function Q8(t,e){const s=y.createContext(e),r=i=>{const{children:c,...u}=i,f=y.useMemo(()=>u,Object.values(u));return a.jsx(s.Provider,{value:f,children:c})};r.displayName=t+"Provider";function n(i){const c=y.useContext(s);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,n]}function oa(t,e=[]){let s=[];function r(i,c){const u=y.createContext(c),f=s.length;s=[...s,c];const h=g=>{var C;const{scope:x,children:b,..._}=g,j=((C=x==null?void 0:x[t])==null?void 0:C[f])||u,N=y.useMemo(()=>_,Object.values(_));return a.jsx(j.Provider,{value:N,children:b})};h.displayName=i+"Provider";function p(g,x){var j;const b=((j=x==null?void 0:x[t])==null?void 0:j[f])||u,_=y.useContext(b);if(_)return _;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,p]}const n=()=>{const i=s.map(c=>y.createContext(c));return function(u){const f=(u==null?void 0:u[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return n.scopeName=t,[r,J8(n,...e)]}function J8(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const c=r.reduce((u,{useScope:f,scopeName:h})=>{const g=f(i)[`__scope${h}`];return{...u,...g}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return s.scopeName=e.scopeName,s}var vs=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},eV=C2[" useId ".trim().toString()]||(()=>{}),tV=0;function Ha(t){const[e,s]=y.useState(eV());return vs(()=>{s(r=>r??String(tV++))},[t]),t||(e?`radix-${e}`:"")}var sV=C2[" useInsertionEffect ".trim().toString()]||vs;function Mo({prop:t,defaultProp:e,onChange:s=()=>{},caller:r}){const[n,i,c]=rV({defaultProp:e,onChange:s}),u=t!==void 0,f=u?t:n;{const p=y.useRef(t!==void 0);y.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${r} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,r])}const h=y.useCallback(p=>{var g;if(u){const x=aV(p)?p(t):p;x!==t&&((g=c.current)==null||g.call(c,x))}else i(p)},[u,t,i,c]);return[f,h]}function rV({defaultProp:t,onChange:e}){const[s,r]=y.useState(t),n=y.useRef(s),i=y.useRef(e);return sV(()=>{i.current=e},[e]),y.useEffect(()=>{var c;n.current!==s&&((c=i.current)==null||c.call(i,s),n.current=s)},[s,n]),[s,r,i]}function aV(t){return typeof t=="function"}var nV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ze=nV.reduce((t,e)=>{const s=Mi(`Primitive.${e}`),r=y.forwardRef((n,i)=>{const{asChild:c,...u}=n,f=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(f,{...u,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function oV(t,e){t&&Li.flushSync(()=>t.dispatchEvent(e))}function Js(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...s)=>{var r;return(r=e.current)==null?void 0:r.call(e,...s)},[])}function iV(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t);y.useEffect(()=>{const r=n=>{n.key==="Escape"&&s(n)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var lV="DismissableLayer",kv="dismissableLayer.update",cV="dismissableLayer.pointerDownOutside",uV="dismissableLayer.focusOutside",bS,oA=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bd=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...f}=t,h=y.useContext(oA),[p,g]=y.useState(null),x=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=y.useState({}),_=_t(e,$=>g($)),j=Array.from(h.layers),[N]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=j.indexOf(N),E=p?j.indexOf(p):-1,S=h.layersWithOutsidePointerEventsDisabled.size>0,P=E>=C,R=hV($=>{const A=$.target,M=[...h.branches].some(U=>U.contains(A));!P||M||(n==null||n($),c==null||c($),$.defaultPrevented||u==null||u())},x),D=mV($=>{const A=$.target;[...h.branches].some(U=>U.contains(A))||(i==null||i($),c==null||c($),$.defaultPrevented||u==null||u())},x);return iV($=>{E===h.layers.size-1&&(r==null||r($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},x),y.useEffect(()=>{if(p)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(bS=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),wS(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=bS)}},[p,x,s,h]),y.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),wS())},[p,h]),y.useEffect(()=>{const $=()=>b({});return document.addEventListener(kv,$),()=>document.removeEventListener(kv,$)},[]),a.jsx(Ze.div,{...f,ref:_,style:{pointerEvents:S?P?"auto":"none":void 0,...t.style},onFocusCapture:Xe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Xe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Xe(t.onPointerDownCapture,R.onPointerDownCapture)})});Bd.displayName=lV;var dV="DismissableLayerBranch",fV=y.forwardRef((t,e)=>{const s=y.useContext(oA),r=y.useRef(null),n=_t(e,r);return y.useEffect(()=>{const i=r.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),a.jsx(Ze.div,{...t,ref:n})});fV.displayName=dV;function hV(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t),r=y.useRef(!1),n=y.useRef(()=>{});return y.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let f=function(){iA(cV,s,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=f,e.addEventListener("click",n.current,{once:!0})):f()}else e.removeEventListener("click",n.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",i),e.removeEventListener("click",n.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function mV(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t),r=y.useRef(!1);return y.useEffect(()=>{const n=i=>{i.target&&!r.current&&iA(uV,s,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wS(){const t=new CustomEvent(kv);document.dispatchEvent(t)}function iA(t,e,s,{discrete:r}){const n=s.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),r?oV(n,i):n.dispatchEvent(i)}var wx="focusScope.autoFocusOnMount",_x="focusScope.autoFocusOnUnmount",_S={bubbles:!1,cancelable:!0},pV="FocusScope",ep=y.forwardRef((t,e)=>{const{loop:s=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...c}=t,[u,f]=y.useState(null),h=Js(n),p=Js(i),g=y.useRef(null),x=_t(e,j=>f(j)),b=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let j=function(S){if(b.paused||!u)return;const P=S.target;u.contains(P)?g.current=P:io(g.current,{select:!0})},N=function(S){if(b.paused||!u)return;const P=S.relatedTarget;P!==null&&(u.contains(P)||io(g.current,{select:!0}))},C=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&io(u)};document.addEventListener("focusin",j),document.addEventListener("focusout",N);const E=new MutationObserver(C);return u&&E.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",N),E.disconnect()}}},[r,u,b.paused]),y.useEffect(()=>{if(u){NS.add(b);const j=document.activeElement;if(!u.contains(j)){const C=new CustomEvent(wx,_S);u.addEventListener(wx,h),u.dispatchEvent(C),C.defaultPrevented||(gV(wV(lA(u)),{select:!0}),document.activeElement===j&&io(u))}return()=>{u.removeEventListener(wx,h),setTimeout(()=>{const C=new CustomEvent(_x,_S);u.addEventListener(_x,p),u.dispatchEvent(C),C.defaultPrevented||io(j??document.body,{select:!0}),u.removeEventListener(_x,p),NS.remove(b)},0)}}},[u,h,p,b]);const _=y.useCallback(j=>{if(!s&&!r||b.paused)return;const N=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,C=document.activeElement;if(N&&C){const E=j.currentTarget,[S,P]=xV(E);S&&P?!j.shiftKey&&C===P?(j.preventDefault(),s&&io(S,{select:!0})):j.shiftKey&&C===S&&(j.preventDefault(),s&&io(P,{select:!0})):C===E&&j.preventDefault()}},[s,r,b.paused]);return a.jsx(Ze.div,{tabIndex:-1,...c,ref:x,onKeyDown:_})});ep.displayName=pV;function gV(t,{select:e=!1}={}){const s=document.activeElement;for(const r of t)if(io(r,{select:e}),document.activeElement!==s)return}function xV(t){const e=lA(t),s=jS(e,t),r=jS(e.reverse(),t);return[s,r]}function lA(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function jS(t,e){for(const s of t)if(!vV(s,{upTo:e}))return s}function vV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yV(t){return t instanceof HTMLInputElement&&"select"in t}function io(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&yV(t)&&e&&t.select()}}var NS=bV();function bV(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=SS(t,e),t.unshift(e)},remove(e){var s;t=SS(t,e),(s=t[0])==null||s.resume()}}}function SS(t,e){const s=[...t],r=s.indexOf(e);return r!==-1&&s.splice(r,1),s}function wV(t){return t.filter(e=>e.tagName!=="A")}var _V="Portal",tp=y.forwardRef((t,e)=>{var u;const{container:s,...r}=t,[n,i]=y.useState(!1);vs(()=>i(!0),[]);const c=s||n&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?I2.createPortal(a.jsx(Ze.div,{...r,ref:e}),c):null});tp.displayName=_V;function jV(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var Vr=t=>{const{present:e,children:s}=t,r=NV(e),n=typeof s=="function"?s({present:r.isPresent}):y.Children.only(s),i=_t(r.ref,SV(n));return typeof s=="function"||r.isPresent?y.cloneElement(n,{ref:i}):null};Vr.displayName="Presence";function NV(t){const[e,s]=y.useState(),r=y.useRef(null),n=y.useRef(t),i=y.useRef("none"),c=t?"mounted":"unmounted",[u,f]=jV(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=wh(r.current);i.current=u==="mounted"?h:"none"},[u]),vs(()=>{const h=r.current,p=n.current;if(p!==t){const x=i.current,b=wh(h);t?f("MOUNT"):b==="none"||(h==null?void 0:h.display)==="none"?f("UNMOUNT"):f(p&&x!==b?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,f]),vs(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=b=>{const j=wh(r.current).includes(b.animationName);if(b.target===e&&j&&(f("ANIMATION_END"),!n.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},x=b=>{b.target===e&&(i.current=wh(r.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:y.useCallback(h=>{r.current=h?getComputedStyle(h):null,s(h)},[])}}function wh(t){return(t==null?void 0:t.animationName)||"none"}function SV(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var jx=0;function ky(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??CS()),document.body.insertAdjacentElement("beforeend",t[1]??CS()),jx++,()=>{jx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),jx--}},[])}function CS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ia=function(){return Ia=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Ia.apply(this,arguments)};function cA(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function CV(t,e,s){if(s||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Vh="right-scroll-bar-position",zh="width-before-scroll-bar",EV="with-scroll-bars-hidden",AV="--removed-body-scroll-bar-size";function Nx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function kV(t,e){var s=y.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(r){var n=s.value;n!==r&&(s.value=r,s.callback(r,n))}}}})[0];return s.callback=e,s.facade}var TV=typeof window<"u"?y.useLayoutEffect:y.useEffect,ES=new WeakMap;function RV(t,e){var s=kV(null,function(r){return t.forEach(function(n){return Nx(n,r)})});return TV(function(){var r=ES.get(s);if(r){var n=new Set(r),i=new Set(t),c=s.current;n.forEach(function(u){i.has(u)||Nx(u,null)}),i.forEach(function(u){n.has(u)||Nx(u,c)})}ES.set(s,t)},[t]),s}function MV(t){return t}function PV(t,e){e===void 0&&(e=MV);var s=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(i){var c=e(i,r);return s.push(c),function(){s=s.filter(function(u){return u!==c})}},assignSyncMedium:function(i){for(r=!0;s.length;){var c=s;s=[],c.forEach(i)}s={push:function(u){return i(u)},filter:function(){return s}}},assignMedium:function(i){r=!0;var c=[];if(s.length){var u=s;s=[],u.forEach(i),c=s}var f=function(){var p=c;c=[],p.forEach(i)},h=function(){return Promise.resolve().then(f)};h(),s={push:function(p){c.push(p),h()},filter:function(p){return c=c.filter(p),s}}}};return n}function DV(t){t===void 0&&(t={});var e=PV(null);return e.options=Ia({async:!0,ssr:!1},t),e}var uA=function(t){var e=t.sideCar,s=cA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Ia({},s))};uA.isSideCarExport=!0;function OV(t,e){return t.useMedium(e),uA}var dA=DV(),Sx=function(){},sp=y.forwardRef(function(t,e){var s=y.useRef(null),r=y.useState({onScrollCapture:Sx,onWheelCapture:Sx,onTouchMoveCapture:Sx}),n=r[0],i=r[1],c=t.forwardProps,u=t.children,f=t.className,h=t.removeScrollBar,p=t.enabled,g=t.shards,x=t.sideCar,b=t.noRelative,_=t.noIsolation,j=t.inert,N=t.allowPinchZoom,C=t.as,E=C===void 0?"div":C,S=t.gapMode,P=cA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,D=RV([s,e]),$=Ia(Ia({},P),n);return y.createElement(y.Fragment,null,p&&y.createElement(R,{sideCar:dA,removeScrollBar:h,shards:g,noRelative:b,noIsolation:_,inert:j,setCallbacks:i,allowPinchZoom:!!N,lockRef:s,gapMode:S}),c?y.cloneElement(y.Children.only(u),Ia(Ia({},$),{ref:D})):y.createElement(E,Ia({},$,{className:f,ref:D}),u))});sp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sp.classNames={fullWidth:zh,zeroRight:Vh};var $V=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=$V();return e&&t.setAttribute("nonce",e),t}function IV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function BV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var VV=function(){var t=0,e=null;return{add:function(s){t==0&&(e=LV())&&(IV(e,s),BV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},zV=function(){var t=VV();return function(e,s){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},fA=function(){var t=zV(),e=function(s){var r=s.styles,n=s.dynamic;return t(r,n),null};return e},UV={left:0,top:0,right:0,gap:0},Cx=function(t){return parseInt(t||"",10)||0},qV=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],n=e[t==="padding"?"paddingRight":"marginRight"];return[Cx(s),Cx(r),Cx(n)]},FV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return UV;var e=qV(t),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-s+e[2]-e[0])}},HV=fA(),lc="data-scroll-locked",GV=function(t,e,s,r){var n=t.left,i=t.top,c=t.right,u=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(EV,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(lc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),s==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),s==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vh,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(zh,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Vh," .").concat(Vh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zh," .").concat(zh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lc,`] {
    `).concat(AV,": ").concat(u,`px;
  }
`)},AS=function(){var t=parseInt(document.body.getAttribute(lc)||"0",10);return isFinite(t)?t:0},XV=function(){y.useEffect(function(){return document.body.setAttribute(lc,(AS()+1).toString()),function(){var t=AS()-1;t<=0?document.body.removeAttribute(lc):document.body.setAttribute(lc,t.toString())}},[])},YV=function(t){var e=t.noRelative,s=t.noImportant,r=t.gapMode,n=r===void 0?"margin":r;XV();var i=y.useMemo(function(){return FV(n)},[n]);return y.createElement(HV,{styles:GV(i,!e,n,s?"":"!important")})},Tv=!1;if(typeof window<"u")try{var _h=Object.defineProperty({},"passive",{get:function(){return Tv=!0,!0}});window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{Tv=!1}var zl=Tv?{passive:!1}:!1,KV=function(t){return t.tagName==="TEXTAREA"},hA=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!KV(t)&&s[e]==="visible")},WV=function(t){return hA(t,"overflowY")},ZV=function(t){return hA(t,"overflowX")},kS=function(t,e){var s=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=mA(t,r);if(n){var i=pA(t,r),c=i[1],u=i[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==s.body);return!1},QV=function(t){var e=t.scrollTop,s=t.scrollHeight,r=t.clientHeight;return[e,s,r]},JV=function(t){var e=t.scrollLeft,s=t.scrollWidth,r=t.clientWidth;return[e,s,r]},mA=function(t,e){return t==="v"?WV(e):ZV(e)},pA=function(t,e){return t==="v"?QV(e):JV(e)},ez=function(t,e){return t==="h"&&e==="rtl"?-1:1},tz=function(t,e,s,r,n){var i=ez(t,window.getComputedStyle(e).direction),c=i*r,u=s.target,f=e.contains(u),h=!1,p=c>0,g=0,x=0;do{if(!u)break;var b=pA(t,u),_=b[0],j=b[1],N=b[2],C=j-N-i*_;(_||C)&&mA(t,u)&&(g+=C,x+=_);var E=u.parentNode;u=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(p&&Math.abs(g)<1||!p&&Math.abs(x)<1)&&(h=!0),h},jh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},TS=function(t){return[t.deltaX,t.deltaY]},RS=function(t){return t&&"current"in t?t.current:t},sz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},rz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},az=0,Ul=[];function nz(t){var e=y.useRef([]),s=y.useRef([0,0]),r=y.useRef(),n=y.useState(az++)[0],i=y.useState(fA)[0],c=y.useRef(t);y.useEffect(function(){c.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var j=CV([t.lockRef.current],(t.shards||[]).map(RS),!0).filter(Boolean);return j.forEach(function(N){return N.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),j.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var u=y.useCallback(function(j,N){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!c.current.allowPinchZoom;var C=jh(j),E=s.current,S="deltaX"in j?j.deltaX:E[0]-C[0],P="deltaY"in j?j.deltaY:E[1]-C[1],R,D=j.target,$=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in j&&$==="h"&&D.type==="range")return!1;var A=kS($,D);if(!A)return!0;if(A?R=$:(R=$==="v"?"h":"v",A=kS($,D)),!A)return!1;if(!r.current&&"changedTouches"in j&&(S||P)&&(r.current=R),!R)return!0;var M=r.current||R;return tz(M,N,j,M==="h"?S:P)},[]),f=y.useCallback(function(j){var N=j;if(!(!Ul.length||Ul[Ul.length-1]!==i)){var C="deltaY"in N?TS(N):jh(N),E=e.current.filter(function(R){return R.name===N.type&&(R.target===N.target||N.target===R.shadowParent)&&sz(R.delta,C)})[0];if(E&&E.should){N.cancelable&&N.preventDefault();return}if(!E){var S=(c.current.shards||[]).map(RS).filter(Boolean).filter(function(R){return R.contains(N.target)}),P=S.length>0?u(N,S[0]):!c.current.noIsolation;P&&N.cancelable&&N.preventDefault()}}},[]),h=y.useCallback(function(j,N,C,E){var S={name:j,delta:N,target:C,should:E,shadowParent:oz(C)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),p=y.useCallback(function(j){s.current=jh(j),r.current=void 0},[]),g=y.useCallback(function(j){h(j.type,TS(j),j.target,u(j,t.lockRef.current))},[]),x=y.useCallback(function(j){h(j.type,jh(j),j.target,u(j,t.lockRef.current))},[]);y.useEffect(function(){return Ul.push(i),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:x}),document.addEventListener("wheel",f,zl),document.addEventListener("touchmove",f,zl),document.addEventListener("touchstart",p,zl),function(){Ul=Ul.filter(function(j){return j!==i}),document.removeEventListener("wheel",f,zl),document.removeEventListener("touchmove",f,zl),document.removeEventListener("touchstart",p,zl)}},[]);var b=t.removeScrollBar,_=t.inert;return y.createElement(y.Fragment,null,_?y.createElement(i,{styles:rz(n)}):null,b?y.createElement(YV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function oz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const iz=OV(dA,nz);var rp=y.forwardRef(function(t,e){return y.createElement(sp,Ia({},t,{ref:e,sideCar:iz}))});rp.classNames=sp.classNames;var lz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ql=new WeakMap,Nh=new WeakMap,Sh={},Ex=0,gA=function(t){return t&&(t.host||gA(t.parentNode))},cz=function(t,e){return e.map(function(s){if(t.contains(s))return s;var r=gA(s);return r&&t.contains(r)?r:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},uz=function(t,e,s,r){var n=cz(e,Array.isArray(t)?t:[t]);Sh[s]||(Sh[s]=new WeakMap);var i=Sh[s],c=[],u=new Set,f=new Set(n),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};n.forEach(h);var p=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(x){if(u.has(x))p(x);else try{var b=x.getAttribute(r),_=b!==null&&b!=="false",j=(ql.get(x)||0)+1,N=(i.get(x)||0)+1;ql.set(x,j),i.set(x,N),c.push(x),j===1&&_&&Nh.set(x,!0),N===1&&x.setAttribute(s,"true"),_||x.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return p(e),u.clear(),Ex++,function(){c.forEach(function(g){var x=ql.get(g)-1,b=i.get(g)-1;ql.set(g,x),i.set(g,b),x||(Nh.has(g)||g.removeAttribute(r),Nh.delete(g)),b||g.removeAttribute(s)}),Ex--,Ex||(ql=new WeakMap,ql=new WeakMap,Nh=new WeakMap,Sh={})}},Ty=function(t,e,s){s===void 0&&(s="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),n=lz(t);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live], script"))),uz(r,n,s,"aria-hidden")):function(){return null}},ap="Dialog",[xA,tZ]=oa(ap),[dz,Ta]=xA(ap),vA=t=>{const{__scopeDialog:e,children:s,open:r,defaultOpen:n,onOpenChange:i,modal:c=!0}=t,u=y.useRef(null),f=y.useRef(null),[h,p]=Mo({prop:r,defaultProp:n??!1,onChange:i,caller:ap});return a.jsx(dz,{scope:e,triggerRef:u,contentRef:f,contentId:Ha(),titleId:Ha(),descriptionId:Ha(),open:h,onOpenChange:p,onOpenToggle:y.useCallback(()=>p(g=>!g),[p]),modal:c,children:s})};vA.displayName=ap;var yA="DialogTrigger",bA=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=Ta(yA,s),i=_t(e,n.triggerRef);return a.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Py(n.open),...r,ref:i,onClick:Xe(t.onClick,n.onOpenToggle)})});bA.displayName=yA;var Ry="DialogPortal",[fz,wA]=xA(Ry,{forceMount:void 0}),_A=t=>{const{__scopeDialog:e,forceMount:s,children:r,container:n}=t,i=Ta(Ry,e);return a.jsx(fz,{scope:e,forceMount:s,children:y.Children.map(r,c=>a.jsx(Vr,{present:s||i.open,children:a.jsx(tp,{asChild:!0,container:n,children:c})}))})};_A.displayName=Ry;var ym="DialogOverlay",jA=y.forwardRef((t,e)=>{const s=wA(ym,t.__scopeDialog),{forceMount:r=s.forceMount,...n}=t,i=Ta(ym,t.__scopeDialog);return i.modal?a.jsx(Vr,{present:r||i.open,children:a.jsx(mz,{...n,ref:e})}):null});jA.displayName=ym;var hz=Mi("DialogOverlay.RemoveScroll"),mz=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=Ta(ym,s);return a.jsx(rp,{as:hz,allowPinchZoom:!0,shards:[n.contentRef],children:a.jsx(Ze.div,{"data-state":Py(n.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Pi="DialogContent",NA=y.forwardRef((t,e)=>{const s=wA(Pi,t.__scopeDialog),{forceMount:r=s.forceMount,...n}=t,i=Ta(Pi,t.__scopeDialog);return a.jsx(Vr,{present:r||i.open,children:i.modal?a.jsx(pz,{...n,ref:e}):a.jsx(gz,{...n,ref:e})})});NA.displayName=Pi;var pz=y.forwardRef((t,e)=>{const s=Ta(Pi,t.__scopeDialog),r=y.useRef(null),n=_t(e,s.contentRef,r);return y.useEffect(()=>{const i=r.current;if(i)return Ty(i)},[]),a.jsx(SA,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xe(t.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Xe(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&i.preventDefault()}),onFocusOutside:Xe(t.onFocusOutside,i=>i.preventDefault())})}),gz=y.forwardRef((t,e)=>{const s=Ta(Pi,t.__scopeDialog),r=y.useRef(!1),n=y.useRef(!1);return a.jsx(SA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(r.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),SA=y.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:i,...c}=t,u=Ta(Pi,s),f=y.useRef(null),h=_t(e,f);return ky(),a.jsxs(a.Fragment,{children:[a.jsx(ep,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:i,children:a.jsx(Bd,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Py(u.open),...c,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(xz,{titleId:u.titleId}),a.jsx(yz,{contentRef:f,descriptionId:u.descriptionId})]})]})}),My="DialogTitle",CA=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=Ta(My,s);return a.jsx(Ze.h2,{id:n.titleId,...r,ref:e})});CA.displayName=My;var EA="DialogDescription",AA=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=Ta(EA,s);return a.jsx(Ze.p,{id:n.descriptionId,...r,ref:e})});AA.displayName=EA;var kA="DialogClose",TA=y.forwardRef((t,e)=>{const{__scopeDialog:s,...r}=t,n=Ta(kA,s);return a.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Xe(t.onClick,()=>n.onOpenChange(!1))})});TA.displayName=kA;function Py(t){return t?"open":"closed"}var RA="DialogTitleWarning",[sZ,MA]=Q8(RA,{contentName:Pi,titleName:My,docsSlug:"dialog"}),xz=({titleId:t})=>{const e=MA(RA),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},vz="DialogDescriptionWarning",yz=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${MA(vz).contentName}}.`;return y.useEffect(()=>{var i;const n=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&n&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},PA=vA,bz=bA,DA=_A,np=jA,op=NA,ip=CA,OA=AA,$A=TA;const wz=PA,_z=bz,jz=DA,LA=y.forwardRef(({className:t,...e},s)=>a.jsx(np,{className:Be("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));LA.displayName=np.displayName;const Nz=Id("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),IA=y.forwardRef(({side:t="right",className:e,children:s,...r},n)=>a.jsxs(jz,{children:[a.jsx(LA,{}),a.jsxs(op,{ref:n,className:Be(Nz({side:t}),e),...r,children:[s,a.jsxs($A,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(zi,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));IA.displayName=op.displayName;const BA=({className:t,...e})=>a.jsx("div",{className:Be("flex flex-col space-y-2 text-center sm:text-left",t),...e});BA.displayName="SheetHeader";const VA=y.forwardRef(({className:t,...e},s)=>a.jsx(ip,{ref:s,className:Be("text-lg font-semibold text-foreground",t),...e}));VA.displayName=ip.displayName;function Sz(){const[t,e]=y.useState(()=>typeof window>"u"?"system":localStorage.getItem("theme")||"system"),[s,r]=y.useState("dark");return y.useEffect(()=>{const i=window.document.documentElement,c=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",u=f=>{const h=f==="system"?c():f;r(h),i.classList.remove("light","dark"),i.classList.add(h)};if(u(t),t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>u(t);return f.addEventListener("change",h),()=>f.removeEventListener("change",h)}},[t]),{theme:t,setTheme:i=>{e(i),localStorage.setItem("theme",i)},resolvedTheme:s}}const Cz=(t,e)=>{const s=[...e?[]:[{href:"/game",icon:Cy,label:"Jogar"}],{href:"/game/ranking",icon:Sa,label:"Ranking"},{href:"/game/guide",icon:SB,label:"Guia"}];switch(t){case"ADMIN":return[...s,{href:"/users",icon:vm,label:"Admin"}];default:return s}};function Ez({userName:t}){const e=Ii(),s=Ot(),r=e.pathname,{user:n}=qs(),{resolvedTheme:i,setTheme:c}=Sz(),u=r.startsWith("/game/play/"),f=Cz(n==null?void 0:n.role,u),h=p=>{s({to:p})};return a.jsxs("header",{className:"flex w-full flex-col bg-gradient-to-b from-background/90 to-background/70 border-b border-border",children:[a.jsxs("div",{className:"flex w-full items-center justify-between px-4 py-3",children:[a.jsx("button",{onClick:()=>h("/game"),className:"group cursor-pointer",children:a.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Z8,{}),a.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-muted-foreground",children:[a.jsx(vm,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:t})]}),a.jsx(de,{variant:"ghost",size:"icon",onClick:()=>c(i==="dark"?"light":"dark"),className:"text-muted-foreground hover:text-primary transition-colors",title:i==="dark"?"Modo claro":"Modo escuro",children:i==="dark"?a.jsx(dS,{className:"h-5 w-5"}):a.jsx(cS,{className:"h-5 w-5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/profile"),children:a.jsx(vm,{className:"h-5 w-5"})}),a.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/logout"),children:a.jsx(cB,{className:"h-5 w-5"})}),a.jsxs(wz,{children:[a.jsx(_z,{asChild:!0,children:a.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors lg:hidden",children:a.jsx(mB,{className:"h-5 w-5"})})}),a.jsxs(IA,{side:"left",className:"w-[300px] bg-background border-r border-border p-0",children:[a.jsx(BA,{className:"border-b border-border p-4",children:a.jsx(VA,{children:"Menu Principal"})}),a.jsxs("div",{className:"flex flex-col py-2",children:[f.map(p=>{const g=p.icon,x=r===p.href;return a.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-left cursor-pointer ${x?"bg-accent text-primary":"text-muted-foreground"}`,children:[a.jsx(g,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)}),a.jsx("button",{onClick:()=>c(i==="dark"?"light":"dark"),className:"flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-muted-foreground text-left cursor-pointer",children:i==="dark"?a.jsxs(a.Fragment,{children:[a.jsx(dS,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Modo Claro"})]}):a.jsxs(a.Fragment,{children:[a.jsx(cS,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Modo Escuro"})]})})]})]})]})]})]}),a.jsx("nav",{className:"hidden border-t border-border lg:block",children:a.jsx("div",{className:"flex items-center justify-center gap-1 px-2",children:f.map(p=>{const g=p.icon,x=r===p.href;return a.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-2 rounded-md px-4 py-3 transition-colors hover:bg-accent cursor-pointer ${x?"text-primary":"text-muted-foreground"}`,children:[a.jsx(g,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)})})})]})}const Az=Wt("/_authenticated")({component:Tz});function kz(){const{user:t}=qs();return a.jsxs("div",{className:"flex min-h-screen flex-col",children:[a.jsx(Ez,{userName:(t==null?void 0:t.username)||"Usuário"}),a.jsx("main",{className:"flex-1",children:a.jsx(Lo,{})}),a.jsx(aA,{})]})}function Tz(){return a.jsx(K8,{children:a.jsx(W8,{children:a.jsx(kz,{})})})}const Rz=Wt("/")({beforeLoad:()=>{throw PP({to:"/game"})}}),Mz=Wt("/_public/logout")({component:Pz});function Pz(){const{signOut:t,user:e}=qs(),s=Ot();return y.useEffect(()=>{(async()=>{e&&(me.info("Encerrando sessão..."),await t()),setTimeout(()=>{s({to:"/auth",search:{auth:"true"}})},1e3)})()},[t,s,e]),a.jsx("div",{className:"flex min-h-screen items-center justify-center",children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx(Ri,{}),a.jsx("p",{className:"text-muted-foreground",children:"Encerrando sessão..."})]})})}var Vd=t=>t.type==="checkbox",wi=t=>t instanceof Date,ir=t=>t==null;const zA=t=>typeof t=="object";var fs=t=>!ir(t)&&!Array.isArray(t)&&zA(t)&&!wi(t),UA=t=>fs(t)&&t.target?Vd(t.target)?t.target.checked:t.target.value:t,Dz=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,qA=(t,e)=>t.has(Dz(e)),Oz=t=>{const e=t.constructor&&t.constructor.prototype;return fs(e)&&e.hasOwnProperty("isPrototypeOf")},Dy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zs(t){let e;const s=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Dy&&(t instanceof Blob||r))&&(s||fs(t)))if(e=s?[]:{},!s&&!Oz(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=zs(t[n]));else return t;return e}var lp=t=>Array.isArray(t)?t.filter(Boolean):[],us=t=>t===void 0,Te=(t,e,s)=>{if(!e||!fs(t))return s;const r=lp(e.split(/[,[\].]+?/)).reduce((n,i)=>ir(n)?n:n[i],t);return us(r)||r===t?us(t[e])?s:t[e]:r},Pr=t=>typeof t=="boolean",Oy=t=>/^\w*$/.test(t),FA=t=>lp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Rt=(t,e,s)=>{let r=-1;const n=Oy(e)?[e]:FA(e),i=n.length,c=i-1;for(;++r<i;){const u=n[r];let f=s;if(r!==c){const h=t[u];f=fs(h)||Array.isArray(h)?h:isNaN(+n[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=f,t=t[u]}};const bm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},va={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HA=fe.createContext(null),cp=()=>fe.useContext(HA),$z=t=>{const{children:e,...s}=t;return fe.createElement(HA.Provider,{value:s},e)};var GA=(t,e,s,r=!0)=>{const n={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const c=i;return e._proxyFormState[c]!==va.all&&(e._proxyFormState[c]=!r||va.all),s&&(s[c]=!0),t[c]}});return n};const $y=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Lz(t){const e=cp(),{control:s=e.control,disabled:r,name:n,exact:i}=t||{},[c,u]=fe.useState(s._formState),f=fe.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return $y(()=>s._subscribe({name:n,formState:f.current,exact:i,callback:h=>{!r&&u({...s._formState,...h})}}),[n,r,i]),fe.useEffect(()=>{f.current.isValid&&s._setValid(!0)},[s]),fe.useMemo(()=>GA(c,s,f.current,!1),[c,s])}var Va=t=>typeof t=="string",XA=(t,e,s,r,n)=>Va(t)?(r&&e.watch.add(t),Te(s,t,n)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Te(s,i))):(r&&(e.watchAll=!0),s);function Iz(t){const e=cp(),{control:s=e.control,name:r,defaultValue:n,disabled:i,exact:c}=t||{},u=fe.useRef(n),[f,h]=fe.useState(s._getWatch(r,u.current));return $y(()=>s._subscribe({name:r,formState:{values:!0},exact:c,callback:p=>!i&&h(XA(r,s._names,p.values||s._formValues,!1,u.current))}),[r,s,i,c]),fe.useEffect(()=>s._removeUnmounted()),f}function Bz(t){const e=cp(),{name:s,disabled:r,control:n=e.control,shouldUnregister:i}=t,c=qA(n._names.array,s),u=Iz({control:n,name:s,defaultValue:Te(n._formValues,s,Te(n._defaultValues,s,t.defaultValue)),exact:!0}),f=Lz({control:n,name:s,exact:!0}),h=fe.useRef(t),p=fe.useRef(n.register(s,{...t.rules,value:u,...Pr(t.disabled)?{disabled:t.disabled}:{}})),g=fe.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Te(f.errors,s)},isDirty:{enumerable:!0,get:()=>!!Te(f.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Te(f.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Te(f.validatingFields,s)},error:{enumerable:!0,get:()=>Te(f.errors,s)}}),[f,s]),x=fe.useCallback(N=>p.current.onChange({target:{value:UA(N),name:s},type:bm.CHANGE}),[s]),b=fe.useCallback(()=>p.current.onBlur({target:{value:Te(n._formValues,s),name:s},type:bm.BLUR}),[s,n._formValues]),_=fe.useCallback(N=>{const C=Te(n._fields,s);C&&N&&(C._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:E=>N.setCustomValidity(E),reportValidity:()=>N.reportValidity()})},[n._fields,s]),j=fe.useMemo(()=>({name:s,value:u,...Pr(r)||f.disabled?{disabled:f.disabled||r}:{},onChange:x,onBlur:b,ref:_}),[s,r,f.disabled,x,b,_,u]);return fe.useEffect(()=>{const N=n._options.shouldUnregister||i;n.register(s,{...h.current.rules,...Pr(h.current.disabled)?{disabled:h.current.disabled}:{}});const C=(E,S)=>{const P=Te(n._fields,E);P&&P._f&&(P._f.mount=S)};if(C(s,!0),N){const E=zs(Te(n._options.defaultValues,s));Rt(n._defaultValues,s,E),us(Te(n._formValues,s))&&Rt(n._formValues,s,E)}return!c&&n.register(s),()=>{(c?N&&!n._state.action:N)?n.unregister(s):C(s,!1)}},[s,n,c,i]),fe.useEffect(()=>{n._setDisabledField({disabled:r,name:s})},[r,s,n]),fe.useMemo(()=>({field:j,formState:f,fieldState:g}),[j,f,g])}const Vz=t=>t.render(Bz(t));var Ly=(t,e,s,r,n)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[r]:n||!0}}:{},ud=t=>Array.isArray(t)?t:[t],MS=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}},Rv=t=>ir(t)||!zA(t);function mo(t,e){if(Rv(t)||Rv(e))return t===e;if(wi(t)&&wi(e))return t.getTime()===e.getTime();const s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(const n of s){const i=t[n];if(!r.includes(n))return!1;if(n!=="ref"){const c=e[n];if(wi(i)&&wi(c)||fs(i)&&fs(c)||Array.isArray(i)&&Array.isArray(c)?!mo(i,c):i!==c)return!1}}return!0}var br=t=>fs(t)&&!Object.keys(t).length,Iy=t=>t.type==="file",ya=t=>typeof t=="function",wm=t=>{if(!Dy)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},YA=t=>t.type==="select-multiple",By=t=>t.type==="radio",zz=t=>By(t)||Vd(t),Ax=t=>wm(t)&&t.isConnected;function Uz(t,e){const s=e.slice(0,-1).length;let r=0;for(;r<s;)t=us(t)?r++:t[e[r++]];return t}function qz(t){for(const e in t)if(t.hasOwnProperty(e)&&!us(t[e]))return!1;return!0}function js(t,e){const s=Array.isArray(e)?e:Oy(e)?[e]:FA(e),r=s.length===1?t:Uz(t,s),n=s.length-1,i=s[n];return r&&delete r[i],n!==0&&(fs(r)&&br(r)||Array.isArray(r)&&qz(r))&&js(t,s.slice(0,-1)),t}var KA=t=>{for(const e in t)if(ya(t[e]))return!0;return!1};function _m(t,e={}){const s=Array.isArray(t);if(fs(t)||s)for(const r in t)Array.isArray(t[r])||fs(t[r])&&!KA(t[r])?(e[r]=Array.isArray(t[r])?[]:{},_m(t[r],e[r])):ir(t[r])||(e[r]=!0);return e}function WA(t,e,s){const r=Array.isArray(t);if(fs(t)||r)for(const n in t)Array.isArray(t[n])||fs(t[n])&&!KA(t[n])?us(e)||Rv(s[n])?s[n]=Array.isArray(t[n])?_m(t[n],[]):{..._m(t[n])}:WA(t[n],ir(e)?{}:e[n],s[n]):s[n]=!mo(t[n],e[n]);return s}var Iu=(t,e)=>WA(t,e,_m(e));const PS={value:!1,isValid:!1},DS={value:!0,isValid:!0};var ZA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!us(t[0].attributes.value)?us(t[0].value)||t[0].value===""?DS:{value:t[0].value,isValid:!0}:DS:PS}return PS},QA=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:r})=>us(t)?t:e?t===""?NaN:t&&+t:s&&Va(t)?new Date(t):r?r(t):t;const OS={isValid:!1,value:null};var JA=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,OS):OS;function $S(t){const e=t.ref;return Iy(e)?e.files:By(e)?JA(t.refs).value:YA(e)?[...e.selectedOptions].map(({value:s})=>s):Vd(e)?ZA(t.refs).value:QA(us(e.value)?t.ref.value:e.value,t)}var Fz=(t,e,s,r)=>{const n={};for(const i of t){const c=Te(e,i);c&&Rt(n,i,c._f)}return{criteriaMode:s,names:[...t],fields:n,shouldUseNativeValidation:r}},jm=t=>t instanceof RegExp,Bu=t=>us(t)?t:jm(t)?t.source:fs(t)?jm(t.value)?t.value.source:t.value:t,LS=t=>({isOnSubmit:!t||t===va.onSubmit,isOnBlur:t===va.onBlur,isOnChange:t===va.onChange,isOnAll:t===va.all,isOnTouch:t===va.onTouched});const IS="AsyncFunction";var Hz=t=>!!t&&!!t.validate&&!!(ya(t.validate)&&t.validate.constructor.name===IS||fs(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===IS)),Gz=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),BS=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const dd=(t,e,s,r)=>{for(const n of s||Object.keys(t)){const i=Te(t,n);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],n)&&!r)return!0;if(c.ref&&e(c.ref,c.name)&&!r)return!0;if(dd(u,e))break}else if(fs(u)&&dd(u,e))break}}};function VS(t,e,s){const r=Te(t,s);if(r||Oy(s))return{error:r,name:s};const n=s.split(".");for(;n.length;){const i=n.join("."),c=Te(e,i),u=Te(t,i);if(c&&!Array.isArray(c)&&s!==i)return{name:s};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};n.pop()}return{name:s}}var Xz=(t,e,s,r)=>{s(t);const{name:n,...i}=t;return br(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!r||va.all))},Yz=(t,e,s)=>!t||!e||t===e||ud(t).some(r=>r&&(s?r===e:r.startsWith(e)||e.startsWith(r))),Kz=(t,e,s,r,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(e||t):(s?r.isOnBlur:n.isOnBlur)?!t:(s?r.isOnChange:n.isOnChange)?t:!0,Wz=(t,e)=>!lp(Te(t,e)).length&&js(t,e),Zz=(t,e,s)=>{const r=ud(Te(t,s));return Rt(r,"root",e[s]),Rt(t,s,r),t},Uh=t=>Va(t);function zS(t,e,s="validate"){if(Uh(t)||Array.isArray(t)&&t.every(Uh)||Pr(t)&&!t)return{type:s,message:Uh(t)?t:"",ref:e}}var Fl=t=>fs(t)&&!jm(t)?t:{value:t,message:""},US=async(t,e,s,r,n,i)=>{const{ref:c,refs:u,required:f,maxLength:h,minLength:p,min:g,max:x,pattern:b,validate:_,name:j,valueAsNumber:N,mount:C}=t._f,E=Te(s,j);if(!C||e.has(j))return{};const S=u?u[0]:c,P=V=>{n&&S.reportValidity&&(S.setCustomValidity(Pr(V)?"":V||""),S.reportValidity())},R={},D=By(c),$=Vd(c),A=D||$,M=(N||Iy(c))&&us(c.value)&&us(E)||wm(c)&&c.value===""||E===""||Array.isArray(E)&&!E.length,U=Ly.bind(null,j,r,R),Y=(V,F,Q,G=bn.maxLength,k=bn.minLength)=>{const B=V?F:Q;R[j]={type:V?G:k,message:B,ref:c,...U(V?G:k,B)}};if(i?!Array.isArray(E)||!E.length:f&&(!A&&(M||ir(E))||Pr(E)&&!E||$&&!ZA(u).isValid||D&&!JA(u).isValid)){const{value:V,message:F}=Uh(f)?{value:!!f,message:f}:Fl(f);if(V&&(R[j]={type:bn.required,message:F,ref:S,...U(bn.required,F)},!r))return P(F),R}if(!M&&(!ir(g)||!ir(x))){let V,F;const Q=Fl(x),G=Fl(g);if(!ir(E)&&!isNaN(E)){const k=c.valueAsNumber||E&&+E;ir(Q.value)||(V=k>Q.value),ir(G.value)||(F=k<G.value)}else{const k=c.valueAsDate||new Date(E),B=L=>new Date(new Date().toDateString()+" "+L),z=c.type=="time",W=c.type=="week";Va(Q.value)&&E&&(V=z?B(E)>B(Q.value):W?E>Q.value:k>new Date(Q.value)),Va(G.value)&&E&&(F=z?B(E)<B(G.value):W?E<G.value:k<new Date(G.value))}if((V||F)&&(Y(!!V,Q.message,G.message,bn.max,bn.min),!r))return P(R[j].message),R}if((h||p)&&!M&&(Va(E)||i&&Array.isArray(E))){const V=Fl(h),F=Fl(p),Q=!ir(V.value)&&E.length>+V.value,G=!ir(F.value)&&E.length<+F.value;if((Q||G)&&(Y(Q,V.message,F.message),!r))return P(R[j].message),R}if(b&&!M&&Va(E)){const{value:V,message:F}=Fl(b);if(jm(V)&&!E.match(V)&&(R[j]={type:bn.pattern,message:F,ref:c,...U(bn.pattern,F)},!r))return P(F),R}if(_){if(ya(_)){const V=await _(E,s),F=zS(V,S);if(F&&(R[j]={...F,...U(bn.validate,F.message)},!r))return P(F.message),R}else if(fs(_)){let V={};for(const F in _){if(!br(V)&&!r)break;const Q=zS(await _[F](E,s),S,F);Q&&(V={...Q,...U(F,Q.message)},P(Q.message),r&&(R[j]=V))}if(!br(V)&&(R[j]={ref:S,...V},!r))return R}}return P(!0),R};const Qz={mode:va.onSubmit,reValidateMode:va.onChange,shouldFocusError:!0};function Jz(t={}){let e={...Qz,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:ya(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let n=fs(e.defaultValues)||fs(e.values)?zs(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:zs(n),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...p};const x={array:MS(),state:MS()},b=e.criteriaMode===va.all,_=I=>q=>{clearTimeout(h),h=setTimeout(I,q)},j=async I=>{if(!e.disabled&&(p.isValid||g.isValid||I)){const q=e.resolver?br((await $()).errors):await M(r,!0);q!==s.isValid&&x.state.next({isValid:q})}},N=(I,q)=>{!e.disabled&&(p.isValidating||p.validatingFields||g.isValidating||g.validatingFields)&&((I||Array.from(u.mount)).forEach(K=>{K&&(q?Rt(s.validatingFields,K,q):js(s.validatingFields,K))}),x.state.next({validatingFields:s.validatingFields,isValidating:!br(s.validatingFields)}))},C=(I,q=[],K,ge,_e=!0,ye=!0)=>{if(ge&&K&&!e.disabled){if(c.action=!0,ye&&Array.isArray(Te(r,I))){const Me=K(Te(r,I),ge.argA,ge.argB);_e&&Rt(r,I,Me)}if(ye&&Array.isArray(Te(s.errors,I))){const Me=K(Te(s.errors,I),ge.argA,ge.argB);_e&&Rt(s.errors,I,Me),Wz(s.errors,I)}if((p.touchedFields||g.touchedFields)&&ye&&Array.isArray(Te(s.touchedFields,I))){const Me=K(Te(s.touchedFields,I),ge.argA,ge.argB);_e&&Rt(s.touchedFields,I,Me)}(p.dirtyFields||g.dirtyFields)&&(s.dirtyFields=Iu(n,i)),x.state.next({name:I,isDirty:Y(I,q),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Rt(i,I,q)},E=(I,q)=>{Rt(s.errors,I,q),x.state.next({errors:s.errors})},S=I=>{s.errors=I,x.state.next({errors:s.errors,isValid:!1})},P=(I,q,K,ge)=>{const _e=Te(r,I);if(_e){const ye=Te(i,I,us(K)?Te(n,I):K);us(ye)||ge&&ge.defaultChecked||q?Rt(i,I,q?ye:$S(_e._f)):Q(I,ye),c.mount&&j()}},R=(I,q,K,ge,_e)=>{let ye=!1,Me=!1;const Ye={name:I};if(!e.disabled){if(!K||ge){(p.isDirty||g.isDirty)&&(Me=s.isDirty,s.isDirty=Ye.isDirty=Y(),ye=Me!==Ye.isDirty);const it=mo(Te(n,I),q);Me=!!Te(s.dirtyFields,I),it?js(s.dirtyFields,I):Rt(s.dirtyFields,I,!0),Ye.dirtyFields=s.dirtyFields,ye=ye||(p.dirtyFields||g.dirtyFields)&&Me!==!it}if(K){const it=Te(s.touchedFields,I);it||(Rt(s.touchedFields,I,K),Ye.touchedFields=s.touchedFields,ye=ye||(p.touchedFields||g.touchedFields)&&it!==K)}ye&&_e&&x.state.next(Ye)}return ye?Ye:{}},D=(I,q,K,ge)=>{const _e=Te(s.errors,I),ye=(p.isValid||g.isValid)&&Pr(q)&&s.isValid!==q;if(e.delayError&&K?(f=_(()=>E(I,K)),f(e.delayError)):(clearTimeout(h),f=null,K?Rt(s.errors,I,K):js(s.errors,I)),(K?!mo(_e,K):_e)||!br(ge)||ye){const Me={...ge,...ye&&Pr(q)?{isValid:q}:{},errors:s.errors,name:I};s={...s,...Me},x.state.next(Me)}},$=async I=>{N(I,!0);const q=await e.resolver(i,e.context,Fz(I||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return N(I),q},A=async I=>{const{errors:q}=await $(I);if(I)for(const K of I){const ge=Te(q,K);ge?Rt(s.errors,K,ge):js(s.errors,K)}else s.errors=q;return q},M=async(I,q,K={valid:!0})=>{for(const ge in I){const _e=I[ge];if(_e){const{_f:ye,...Me}=_e;if(ye){const Ye=u.array.has(ye.name),it=_e._f&&Hz(_e._f);it&&p.validatingFields&&N([ge],!0);const jt=await US(_e,u.disabled,i,b,e.shouldUseNativeValidation&&!q,Ye);if(it&&p.validatingFields&&N([ge]),jt[ye.name]&&(K.valid=!1,q))break;!q&&(Te(jt,ye.name)?Ye?Zz(s.errors,jt,ye.name):Rt(s.errors,ye.name,jt[ye.name]):js(s.errors,ye.name))}!br(Me)&&await M(Me,q,K)}}return K.valid},U=()=>{for(const I of u.unMount){const q=Te(r,I);q&&(q._f.refs?q._f.refs.every(K=>!Ax(K)):!Ax(q._f.ref))&&ue(I)}u.unMount=new Set},Y=(I,q)=>!e.disabled&&(I&&q&&Rt(i,I,q),!mo(L(),n)),V=(I,q,K)=>XA(I,u,{...c.mount?i:us(q)?n:Va(I)?{[I]:q}:q},K,q),F=I=>lp(Te(c.mount?i:n,I,e.shouldUnregister?Te(n,I,[]):[])),Q=(I,q,K={})=>{const ge=Te(r,I);let _e=q;if(ge){const ye=ge._f;ye&&(!ye.disabled&&Rt(i,I,QA(q,ye)),_e=wm(ye.ref)&&ir(q)?"":q,YA(ye.ref)?[...ye.ref.options].forEach(Me=>Me.selected=_e.includes(Me.value)):ye.refs?Vd(ye.ref)?ye.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(_e)?Me.checked=!!_e.find(Ye=>Ye===Me.value):Me.checked=_e===Me.value||!!_e)}):ye.refs.forEach(Me=>Me.checked=Me.value===_e):Iy(ye.ref)?ye.ref.value="":(ye.ref.value=_e,ye.ref.type||x.state.next({name:I,values:zs(i)})))}(K.shouldDirty||K.shouldTouch)&&R(I,_e,K.shouldTouch,K.shouldDirty,!0),K.shouldValidate&&W(I)},G=(I,q,K)=>{for(const ge in q){if(!q.hasOwnProperty(ge))return;const _e=q[ge],ye=I+"."+ge,Me=Te(r,ye);(u.array.has(I)||fs(_e)||Me&&!Me._f)&&!wi(_e)?G(ye,_e,K):Q(ye,_e,K)}},k=(I,q,K={})=>{const ge=Te(r,I),_e=u.array.has(I),ye=zs(q);Rt(i,I,ye),_e?(x.array.next({name:I,values:zs(i)}),(p.isDirty||p.dirtyFields||g.isDirty||g.dirtyFields)&&K.shouldDirty&&x.state.next({name:I,dirtyFields:Iu(n,i),isDirty:Y(I,ye)})):ge&&!ge._f&&!ir(ye)?G(I,ye,K):Q(I,ye,K),BS(I,u)&&x.state.next({...s}),x.state.next({name:c.mount?I:void 0,values:zs(i)})},B=async I=>{c.mount=!0;const q=I.target;let K=q.name,ge=!0;const _e=Te(r,K),ye=it=>{ge=Number.isNaN(it)||wi(it)&&isNaN(it.getTime())||mo(it,Te(i,K,it))},Me=LS(e.mode),Ye=LS(e.reValidateMode);if(_e){let it,jt;const Fs=q.type?$S(_e._f):UA(I),Hs=I.type===bm.BLUR||I.type===bm.FOCUS_OUT,zr=!Gz(_e._f)&&!e.resolver&&!Te(s.errors,K)&&!_e._f.deps||Kz(Hs,Te(s.touchedFields,K),s.isSubmitted,Ye,Me),Nr=BS(K,u,Hs);Rt(i,K,Fs),Hs?(_e._f.onBlur&&_e._f.onBlur(I),f&&f(0)):_e._f.onChange&&_e._f.onChange(I);const Sr=R(K,Fs,Hs),rr=!br(Sr)||Nr;if(!Hs&&x.state.next({name:K,type:I.type,values:zs(i)}),zr)return(p.isValid||g.isValid)&&(e.mode==="onBlur"?Hs&&j():Hs||j()),rr&&x.state.next({name:K,...Nr?{}:Sr});if(!Hs&&Nr&&x.state.next({...s}),e.resolver){const{errors:ar}=await $([K]);if(ye(Fs),ge){const la=VS(s.errors,r,K),fr=VS(ar,r,la.name||K);it=fr.error,K=fr.name,jt=br(ar)}}else N([K],!0),it=(await US(_e,u.disabled,i,b,e.shouldUseNativeValidation))[K],N([K]),ye(Fs),ge&&(it?jt=!1:(p.isValid||g.isValid)&&(jt=await M(r,!0)));ge&&(_e._f.deps&&W(_e._f.deps),D(K,jt,it,Sr))}},z=(I,q)=>{if(Te(s.errors,q)&&I.focus)return I.focus(),1},W=async(I,q={})=>{let K,ge;const _e=ud(I);if(e.resolver){const ye=await A(us(I)?I:_e);K=br(ye),ge=I?!_e.some(Me=>Te(ye,Me)):K}else I?(ge=(await Promise.all(_e.map(async ye=>{const Me=Te(r,ye);return await M(Me&&Me._f?{[ye]:Me}:Me)}))).every(Boolean),!(!ge&&!s.isValid)&&j()):ge=K=await M(r);return x.state.next({...!Va(I)||(p.isValid||g.isValid)&&K!==s.isValid?{}:{name:I},...e.resolver||!I?{isValid:K}:{},errors:s.errors}),q.shouldFocus&&!ge&&dd(r,z,I?_e:u.mount),ge},L=I=>{const q={...c.mount?i:n};return us(I)?q:Va(I)?Te(q,I):I.map(K=>Te(q,K))},X=(I,q)=>({invalid:!!Te((q||s).errors,I),isDirty:!!Te((q||s).dirtyFields,I),error:Te((q||s).errors,I),isValidating:!!Te(s.validatingFields,I),isTouched:!!Te((q||s).touchedFields,I)}),ae=I=>{I&&ud(I).forEach(q=>js(s.errors,q)),x.state.next({errors:I?s.errors:{}})},ee=(I,q,K)=>{const ge=(Te(r,I,{_f:{}})._f||{}).ref,_e=Te(s.errors,I)||{},{ref:ye,message:Me,type:Ye,...it}=_e;Rt(s.errors,I,{...it,...q,ref:ge}),x.state.next({name:I,errors:s.errors,isValid:!1}),K&&K.shouldFocus&&ge&&ge.focus&&ge.focus()},le=(I,q)=>ya(I)?x.state.subscribe({next:K=>I(V(void 0,q),K)}):V(I,q,!0),ie=I=>x.state.subscribe({next:q=>{Yz(I.name,q.name,I.exact)&&Xz(q,I.formState||p,ke,I.reRenderRoot)&&I.callback({values:{...i},...s,...q})}}).unsubscribe,se=I=>(c.mount=!0,g={...g,...I.formState},ie({...I,formState:g})),ue=(I,q={})=>{for(const K of I?ud(I):u.mount)u.mount.delete(K),u.array.delete(K),q.keepValue||(js(r,K),js(i,K)),!q.keepError&&js(s.errors,K),!q.keepDirty&&js(s.dirtyFields,K),!q.keepTouched&&js(s.touchedFields,K),!q.keepIsValidating&&js(s.validatingFields,K),!e.shouldUnregister&&!q.keepDefaultValue&&js(n,K);x.state.next({values:zs(i)}),x.state.next({...s,...q.keepDirty?{isDirty:Y()}:{}}),!q.keepIsValid&&j()},ce=({disabled:I,name:q})=>{(Pr(I)&&c.mount||I||u.disabled.has(q))&&(I?u.disabled.add(q):u.disabled.delete(q))},be=(I,q={})=>{let K=Te(r,I);const ge=Pr(q.disabled)||Pr(e.disabled);return Rt(r,I,{...K||{},_f:{...K&&K._f?K._f:{ref:{name:I}},name:I,mount:!0,...q}}),u.mount.add(I),K?ce({disabled:Pr(q.disabled)?q.disabled:e.disabled,name:I}):P(I,!0,q.value),{...ge?{disabled:q.disabled||e.disabled}:{},...e.progressive?{required:!!q.required,min:Bu(q.min),max:Bu(q.max),minLength:Bu(q.minLength),maxLength:Bu(q.maxLength),pattern:Bu(q.pattern)}:{},name:I,onChange:B,onBlur:B,ref:_e=>{if(_e){be(I,q),K=Te(r,I);const ye=us(_e.value)&&_e.querySelectorAll&&_e.querySelectorAll("input,select,textarea")[0]||_e,Me=zz(ye),Ye=K._f.refs||[];if(Me?Ye.find(it=>it===ye):ye===K._f.ref)return;Rt(r,I,{_f:{...K._f,...Me?{refs:[...Ye.filter(Ax),ye,...Array.isArray(Te(n,I))?[{}]:[]],ref:{type:ye.type,name:I}}:{ref:ye}}}),P(I,!1,void 0,ye)}else K=Te(r,I,{}),K._f&&(K._f.mount=!1),(e.shouldUnregister||q.shouldUnregister)&&!(qA(u.array,I)&&c.action)&&u.unMount.add(I)}}},Ne=()=>e.shouldFocusError&&dd(r,z,u.mount),we=I=>{Pr(I)&&(x.state.next({disabled:I}),dd(r,(q,K)=>{const ge=Te(r,K);ge&&(q.disabled=ge._f.disabled||I,Array.isArray(ge._f.refs)&&ge._f.refs.forEach(_e=>{_e.disabled=ge._f.disabled||I}))},0,!1))},Ce=(I,q)=>async K=>{let ge;K&&(K.preventDefault&&K.preventDefault(),K.persist&&K.persist());let _e=zs(i);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:ye,values:Me}=await $();s.errors=ye,_e=Me}else await M(r);if(u.disabled.size)for(const ye of u.disabled)Rt(_e,ye,void 0);if(js(s.errors,"root"),br(s.errors)){x.state.next({errors:{}});try{await I(_e,K)}catch(ye){ge=ye}}else q&&await q({...s.errors},K),Ne(),setTimeout(Ne);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:br(s.errors)&&!ge,submitCount:s.submitCount+1,errors:s.errors}),ge)throw ge},Oe=(I,q={})=>{Te(r,I)&&(us(q.defaultValue)?k(I,zs(Te(n,I))):(k(I,q.defaultValue),Rt(n,I,zs(q.defaultValue))),q.keepTouched||js(s.touchedFields,I),q.keepDirty||(js(s.dirtyFields,I),s.isDirty=q.defaultValue?Y(I,zs(Te(n,I))):Y()),q.keepError||(js(s.errors,I),p.isValid&&j()),x.state.next({...s}))},Qe=(I,q={})=>{const K=I?zs(I):n,ge=zs(K),_e=br(I),ye=_e?n:ge;if(q.keepDefaultValues||(n=K),!q.keepValues){if(q.keepDirtyValues){const Me=new Set([...u.mount,...Object.keys(Iu(n,i))]);for(const Ye of Array.from(Me))Te(s.dirtyFields,Ye)?Rt(ye,Ye,Te(i,Ye)):k(Ye,Te(ye,Ye))}else{if(Dy&&us(I))for(const Me of u.mount){const Ye=Te(r,Me);if(Ye&&Ye._f){const it=Array.isArray(Ye._f.refs)?Ye._f.refs[0]:Ye._f.ref;if(wm(it)){const jt=it.closest("form");if(jt){jt.reset();break}}}}for(const Me of u.mount)k(Me,Te(ye,Me))}i=zs(ye),x.array.next({values:{...ye}}),x.state.next({values:{...ye}})}u={mount:q.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!p.isValid||!!q.keepIsValid||!!q.keepDirtyValues,c.watch=!!e.shouldUnregister,x.state.next({submitCount:q.keepSubmitCount?s.submitCount:0,isDirty:_e?!1:q.keepDirty?s.isDirty:!!(q.keepDefaultValues&&!mo(I,n)),isSubmitted:q.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:_e?{}:q.keepDirtyValues?q.keepDefaultValues&&i?Iu(n,i):s.dirtyFields:q.keepDefaultValues&&I?Iu(n,I):q.keepDirty?s.dirtyFields:{},touchedFields:q.keepTouched?s.touchedFields:{},errors:q.keepErrors?s.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},ve=(I,q)=>Qe(ya(I)?I(i):I,q),Re=(I,q={})=>{const K=Te(r,I),ge=K&&K._f;if(ge){const _e=ge.refs?ge.refs[0]:ge.ref;_e.focus&&(_e.focus(),q.shouldSelect&&ya(_e.select)&&_e.select())}},ke=I=>{s={...s,...I}},Ae={control:{register:be,unregister:ue,getFieldState:X,handleSubmit:Ce,setError:ee,_subscribe:ie,_runSchema:$,_focusError:Ne,_getWatch:V,_getDirty:Y,_setValid:j,_setFieldArray:C,_setDisabledField:ce,_setErrors:S,_getFieldArray:F,_reset:Qe,_resetDefaultValues:()=>ya(e.defaultValues)&&e.defaultValues().then(I=>{ve(I,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:we,_subjects:x,_proxyFormState:p,get _fields(){return r},get _formValues(){return i},get _state(){return c},set _state(I){c=I},get _defaultValues(){return n},get _names(){return u},set _names(I){u=I},get _formState(){return s},get _options(){return e},set _options(I){e={...e,...I}}},subscribe:se,trigger:W,register:be,handleSubmit:Ce,watch:le,setValue:k,getValues:L,reset:ve,resetField:Oe,clearErrors:ae,unregister:ue,setError:ee,setFocus:Re,getFieldState:X};return{...Ae,formControl:Ae}}function Vy(t={}){const e=fe.useRef(void 0),s=fe.useRef(void 0),[r,n]=fe.useState({isDirty:!1,isValidating:!1,isLoading:ya(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ya(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Jz(t),formState:r},t.formControl&&t.defaultValues&&!ya(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,$y(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),fe.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),fe.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),fe.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),fe.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),fe.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==r.isDirty&&i._subjects.state.next({isDirty:c})}},[i,r.isDirty]),fe.useEffect(()=>{t.values&&!mo(t.values,s.current)?(i._reset(t.values,i._options.resetOptions),s.current=t.values,n(c=>({...c}))):i._resetDefaultValues()},[i,t.values]),fe.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=GA(r,i),e.current}const qS=(t,e,s)=>{if(t&&"reportValidity"in t){const r=Te(s,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},Mv=(t,e)=>{for(const s in e.fields){const r=e.fields[s];r&&r.ref&&"reportValidity"in r.ref?qS(r.ref,s,t):r&&r.refs&&r.refs.forEach(n=>qS(n,s,t))}},FS=(t,e)=>{e.shouldUseNativeValidation&&Mv(t,e);const s={};for(const r in t){const n=Te(e.fields,r),i=Object.assign(t[r]||{},{ref:n&&n.ref});if(eU(e.names||Object.keys(t),r)){const c=Object.assign({},Te(s,r));Rt(c,"root",i),Rt(s,r,c)}else Rt(s,r,i)}return s},eU=(t,e)=>{const s=HS(e);return t.some(r=>HS(r).match(`^${s}\\.\\d+`))};function HS(t){return t.replace(/\]|\[/g,"")}function ek(t,e,s){function r(u,f){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(t),e(u,f);for(const p in c.prototype)p in u||Object.defineProperty(u,p,{value:c.prototype[p].bind(u)});u._zod.constr=c,u._zod.def=f}const n=(s==null?void 0:s.Parent)??Object;class i extends n{}function c(u){var f;const h=s!=null&&s.Parent?new i:this;r(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(i,"name",{value:t}),Object.defineProperty(c,"init",{value:r}),Object.defineProperty(c,Symbol.hasInstance,{value:u=>{var f,h;return!!(s!=null&&s.Parent&&u instanceof s.Parent)||((h=(f=u==null?void 0:u._zod)==null?void 0:f.traits)==null?void 0:h.has(t))}}),Object.defineProperty(c,"name",{value:t}),c}class tU extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const sU={};function tk(t){return sU}function rU(t,e){return typeof e=="bigint"?e.toString():e}function Ch(t){return typeof t=="string"?t:t==null?void 0:t.message}function sk(t,e,s){var n,i,c,u,f,h;const r={...t,path:t.path??[]};if(!t.message){const p=Ch((c=(i=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:c.call(i,t))??Ch((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??Ch((f=s.customError)==null?void 0:f.call(s,t))??Ch((h=s.localeError)==null?void 0:h.call(s,t))??"Invalid input";r.message=p}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}const rk=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get:()=>JSON.stringify(e,rU,2),enumerable:!0})},aU=ek("$ZodError",rk),ak=ek("$ZodError",rk,{Parent:Error}),nU=(t=>(e,s,r,n)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise)throw new tU;if(c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>sk(f,i,tk())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(ak),oU=(t=>async(e,s,r,n)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>sk(f,i,tk())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(ak);function GS(t,e){try{var s=t()}catch(r){return e(r)}return s&&s.then?s.then(void 0,e):s}function iU(t,e){for(var s={};t.length;){var r=t[0],n=r.code,i=r.message,c=r.path.join(".");if(!s[c])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(p){return p.errors.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[r.code];s[c]=Ly(c,e,s,n,h?[].concat(h,r.message):r.message)}t.shift()}return s}function lU(t,e){for(var s={};t.length;){var r=t[0],n=r.code,i=r.message,c=r.path.join(".");if(!s[c])if(r.code==="invalid_union"){var u=r.errors[0][0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if(r.code==="invalid_union"&&r.errors.forEach(function(p){return p.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[r.code];s[c]=Ly(c,e,s,n,h?[].concat(h,r.message):r.message)}t.shift()}return s}function zy(t,e,s){if(s===void 0&&(s={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(t))return function(r,n,i){try{return Promise.resolve(GS(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return i.shouldUseNativeValidation&&Mv({},i),{errors:{},values:s.raw?Object.assign({},r):c}})},function(c){if(function(u){return Array.isArray(u==null?void 0:u.issues)}(c))return{values:{},errors:FS(iU(c.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(t))return function(r,n,i){try{return Promise.resolve(GS(function(){return Promise.resolve((s.mode==="sync"?nU:oU)(t,r,e)).then(function(c){return i.shouldUseNativeValidation&&Mv({},i),{errors:{},values:s.raw?Object.assign({},r):c}})},function(c){if(function(u){return u instanceof aU}(c))return{values:{},errors:FS(lU(c.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};throw new Error("Invalid input: not a Zod schema")}const Ps=y.forwardRef(({className:t,type:e,...s},r)=>a.jsx("input",{type:e,className:Be("flex h-9 w-full rounded-md border border-neutral-200 bg-white px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-neutral-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",t),ref:r,...s}));Ps.displayName="Input";var cU="Label",nk=y.forwardRef((t,e)=>a.jsx(Ze.label,{...t,ref:e,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));nk.displayName=cU;var ok=nk;const uU=Id("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ik=y.forwardRef(({className:t,...e},s)=>a.jsx(ok,{ref:s,className:Be(uU(),t),...e}));ik.displayName=ok.displayName;const Uy=$z,lk=y.createContext({}),Ba=({...t})=>a.jsx(lk.Provider,{value:{name:t.name},children:a.jsx(Vz,{...t})}),up=()=>{const t=y.useContext(lk),e=y.useContext(ck),{getFieldState:s,formState:r}=cp(),n=s(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},ck=y.createContext({}),ba=y.forwardRef(({className:t,...e},s)=>{const r=y.useId();return a.jsx(ck.Provider,{value:{id:r},children:a.jsx("div",{ref:s,className:Be("space-y-2",t),...e})})});ba.displayName="FormItem";const wa=y.forwardRef(({className:t,...e},s)=>{const{error:r,formItemId:n}=up();return a.jsx(ik,{ref:s,className:Be(r&&"text-destructive",t),htmlFor:n,...e})});wa.displayName="FormLabel";const _a=y.forwardRef(({...t},e)=>{const{error:s,formItemId:r,formDescriptionId:n,formMessageId:i}=up();return a.jsx(UE,{ref:e,id:r,"aria-describedby":s?`${n} ${i}`:`${n}`,"aria-invalid":!!s,...t})});_a.displayName="FormControl";const dU=y.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:r}=up();return a.jsx("p",{ref:s,id:r,className:Be("text-[0.8rem] text-muted-foreground",t),...e})});dU.displayName="FormDescription";const ja=y.forwardRef(({className:t,children:e,...s},r)=>{const{error:n,formMessageId:i}=up(),c=n?String((n==null?void 0:n.message)??""):e;return c?a.jsx("p",{ref:r,id:i,className:Be("text-[0.8rem] font-medium text-destructive",t),...s,children:c}):null});ja.displayName="FormMessage";function fU({onSubmit:t,isLoading:e}){const s=Vy({resolver:zy(GL),defaultValues:{email:"",password:""}});return a.jsx(Uy,{...s,children:a.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[a.jsx(Ba,{control:s.control,name:"email",render:({field:r})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Email"}),a.jsx(_a,{children:a.jsx(Ps,{type:"email",placeholder:"seu@email.com",...r})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:s.control,name:"password",render:({field:r})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Senha"}),a.jsx(_a,{children:a.jsx(Ps,{type:"password",placeholder:"••••••",...r})}),a.jsx(ja,{})]})}),a.jsx(de,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Entrar"})]})})}function hU({onSubmit:t,isLoading:e}){const s=Vy({resolver:zy(XL),defaultValues:{email:"",password:"",confirmPassword:""}});return a.jsx(Uy,{...s,children:a.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[a.jsx(Ba,{control:s.control,name:"email",render:({field:r})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Email"}),a.jsx(_a,{children:a.jsx(Ps,{type:"email",placeholder:"seu@email.com",...r})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:s.control,name:"password",render:({field:r})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Senha"}),a.jsx(_a,{children:a.jsx(Ps,{type:"password",placeholder:"••••••",...r})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:s.control,name:"confirmPassword",render:({field:r})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Confirmar Senha"}),a.jsx(_a,{children:a.jsx(Ps,{type:"password",placeholder:"••••••",...r})}),a.jsx(ja,{})]})}),a.jsx(de,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Criar Conta"})]})})}const qy=y.createContext({});function Fy(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hy=typeof window<"u",uk=Hy?y.useLayoutEffect:y.useEffect,dp=y.createContext(null);function Gy(t,e){t.indexOf(e)===-1&&t.push(e)}function Xy(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const En=(t,e,s)=>s>e?e:s<t?t:s;let Yy=()=>{};const An={},dk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function fk(t){return typeof t=="object"&&t!==null}const hk=t=>/^0[^.\s]+$/u.test(t);function Ky(t){let e;return()=>(e===void 0&&(e=t()),e)}const aa=t=>t,mU=(t,e)=>s=>e(t(s)),zd=(...t)=>t.reduce(mU),Cd=(t,e,s)=>{const r=e-t;return r===0?1:(s-t)/r};class Wy{constructor(){this.subscriptions=[]}add(e){return Gy(this.subscriptions,e),()=>Xy(this.subscriptions,e)}notify(e,s,r){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,s,r);else for(let i=0;i<n;i++){const c=this.subscriptions[i];c&&c(e,s,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ga=t=>t*1e3,Xa=t=>t/1e3;function mk(t,e){return e?t*(1e3/e):0}const pk=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,pU=1e-7,gU=12;function xU(t,e,s,r,n){let i,c,u=0;do c=e+(s-e)/2,i=pk(c,r,n)-t,i>0?s=c:e=c;while(Math.abs(i)>pU&&++u<gU);return c}function Ud(t,e,s,r){if(t===e&&s===r)return aa;const n=i=>xU(i,0,1,t,s);return i=>i===0||i===1?i:pk(n(i),e,r)}const gk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xk=t=>e=>1-t(1-e),vk=Ud(.33,1.53,.69,.99),Zy=xk(vk),yk=gk(Zy),bk=t=>(t*=2)<1?.5*Zy(t):.5*(2-Math.pow(2,-10*(t-1))),Qy=t=>1-Math.sin(Math.acos(t)),wk=xk(Qy),_k=gk(Qy),vU=Ud(.42,0,1,1),yU=Ud(0,0,.58,1),jk=Ud(.42,0,.58,1),bU=t=>Array.isArray(t)&&typeof t[0]!="number",Nk=t=>Array.isArray(t)&&typeof t[0]=="number",wU={linear:aa,easeIn:vU,easeInOut:jk,easeOut:yU,circIn:Qy,circInOut:_k,circOut:wk,backIn:Zy,backInOut:yk,backOut:vk,anticipate:bk},_U=t=>typeof t=="string",XS=t=>{if(Nk(t)){Yy(t.length===4);const[e,s,r,n]=t;return Ud(e,s,r,n)}else if(_U(t))return wU[t];return t},Eh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],YS={value:null};function jU(t,e){let s=new Set,r=new Set,n=!1,i=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},f=0;function h(g){c.has(g)&&(p.schedule(g),t()),f++,g(u)}const p={schedule:(g,x=!1,b=!1)=>{const j=b&&n?s:r;return x&&c.add(g),j.has(g)||j.add(g),g},cancel:g=>{r.delete(g),c.delete(g)},process:g=>{if(u=g,n){i=!0;return}n=!0,[s,r]=[r,s],s.forEach(h),e&&YS.value&&YS.value.frameloop[e].push(f),f=0,s.clear(),n=!1,i&&(i=!1,p.process(g))}};return p}const NU=40;function Sk(t,e){let s=!1,r=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,c=Eh.reduce((S,P)=>(S[P]=jU(i,e?P:void 0),S),{}),{setup:u,read:f,resolveKeyframes:h,preUpdate:p,update:g,preRender:x,render:b,postRender:_}=c,j=()=>{const S=An.useManualTiming?n.timestamp:performance.now();s=!1,An.useManualTiming||(n.delta=r?1e3/60:Math.max(Math.min(S-n.timestamp,NU),1)),n.timestamp=S,n.isProcessing=!0,u.process(n),f.process(n),h.process(n),p.process(n),g.process(n),x.process(n),b.process(n),_.process(n),n.isProcessing=!1,s&&e&&(r=!1,t(j))},N=()=>{s=!0,r=!0,n.isProcessing||t(j)};return{schedule:Eh.reduce((S,P)=>{const R=c[P];return S[P]=(D,$=!1,A=!1)=>(s||N(),R.schedule(D,$,A)),S},{}),cancel:S=>{for(let P=0;P<Eh.length;P++)c[Eh[P]].cancel(S)},state:n,steps:c}}const{schedule:Jt,cancel:Po,state:Us,steps:kx}=Sk(typeof requestAnimationFrame<"u"?requestAnimationFrame:aa,!0);let qh;function SU(){qh=void 0}const jr={now:()=>(qh===void 0&&jr.set(Us.isProcessing||An.useManualTiming?Us.timestamp:performance.now()),qh),set:t=>{qh=t,queueMicrotask(SU)}},Ck=t=>e=>typeof e=="string"&&e.startsWith(t),Jy=Ck("--"),CU=Ck("var(--"),eb=t=>CU(t)?EU.test(t.split("/*")[0].trim()):!1,EU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,kc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ed={...kc,transform:t=>En(0,1,t)},Ah={...kc,default:1},fd=t=>Math.round(t*1e5)/1e5,tb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AU(t){return t==null}const kU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sb=(t,e)=>s=>!!(typeof s=="string"&&kU.test(s)&&s.startsWith(t)||e&&!AU(s)&&Object.prototype.hasOwnProperty.call(s,e)),Ek=(t,e,s)=>r=>{if(typeof r!="string")return r;const[n,i,c,u]=r.match(tb);return{[t]:parseFloat(n),[e]:parseFloat(i),[s]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},TU=t=>En(0,255,t),Tx={...kc,transform:t=>Math.round(TU(t))},_i={test:sb("rgb","red"),parse:Ek("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:r=1})=>"rgba("+Tx.transform(t)+", "+Tx.transform(e)+", "+Tx.transform(s)+", "+fd(Ed.transform(r))+")"};function RU(t){let e="",s="",r="",n="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),r=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),r=t.substring(3,4),n=t.substring(4,5),e+=e,s+=s,r+=r,n+=n),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(r,16),alpha:n?parseInt(n,16)/255:1}}const Pv={test:sb("#"),parse:RU,transform:_i.transform},qd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),lo=qd("deg"),Ya=qd("%"),tt=qd("px"),MU=qd("vh"),PU=qd("vw"),KS={...Ya,parse:t=>Ya.parse(t)/100,transform:t=>Ya.transform(t*100)},Zl={test:sb("hsl","hue"),parse:Ek("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ya.transform(fd(e))+", "+Ya.transform(fd(s))+", "+fd(Ed.transform(r))+")"},Ks={test:t=>_i.test(t)||Pv.test(t)||Zl.test(t),parse:t=>_i.test(t)?_i.parse(t):Zl.test(t)?Zl.parse(t):Pv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_i.transform(t):Zl.transform(t)},DU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OU(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(tb))==null?void 0:e.length)||0)+(((s=t.match(DU))==null?void 0:s.length)||0)>0}const Ak="number",kk="color",$U="var",LU="var(",WS="${}",IU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ad(t){const e=t.toString(),s=[],r={color:[],number:[],var:[]},n=[];let i=0;const u=e.replace(IU,f=>(Ks.test(f)?(r.color.push(i),n.push(kk),s.push(Ks.parse(f))):f.startsWith(LU)?(r.var.push(i),n.push($U),s.push(f)):(r.number.push(i),n.push(Ak),s.push(parseFloat(f))),++i,WS)).split(WS);return{values:s,split:u,indexes:r,types:n}}function Tk(t){return Ad(t).values}function Rk(t){const{split:e,types:s}=Ad(t),r=e.length;return n=>{let i="";for(let c=0;c<r;c++)if(i+=e[c],n[c]!==void 0){const u=s[c];u===Ak?i+=fd(n[c]):u===kk?i+=Ks.transform(n[c]):i+=n[c]}return i}}const BU=t=>typeof t=="number"?0:t;function VU(t){const e=Tk(t);return Rk(t)(e.map(BU))}const Do={test:OU,parse:Tk,createTransformer:Rk,getAnimatableNone:VU};function Rx(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function zU({hue:t,saturation:e,lightness:s,alpha:r}){t/=360,e/=100,s/=100;let n=0,i=0,c=0;if(!e)n=i=c=s;else{const u=s<.5?s*(1+e):s+e-s*e,f=2*s-u;n=Rx(f,u,t+1/3),i=Rx(f,u,t),c=Rx(f,u,t-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:r}}function Nm(t,e){return s=>s>0?e:t}const Qt=(t,e,s)=>t+(e-t)*s,Mx=(t,e,s)=>{const r=t*t,n=s*(e*e-r)+r;return n<0?0:Math.sqrt(n)},UU=[Pv,_i,Zl],qU=t=>UU.find(e=>e.test(t));function ZS(t){const e=qU(t);if(!e)return!1;let s=e.parse(t);return e===Zl&&(s=zU(s)),s}const QS=(t,e)=>{const s=ZS(t),r=ZS(e);if(!s||!r)return Nm(t,e);const n={...s};return i=>(n.red=Mx(s.red,r.red,i),n.green=Mx(s.green,r.green,i),n.blue=Mx(s.blue,r.blue,i),n.alpha=Qt(s.alpha,r.alpha,i),_i.transform(n))},Dv=new Set(["none","hidden"]);function FU(t,e){return Dv.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function HU(t,e){return s=>Qt(t,e,s)}function rb(t){return typeof t=="number"?HU:typeof t=="string"?eb(t)?Nm:Ks.test(t)?QS:YU:Array.isArray(t)?Mk:typeof t=="object"?Ks.test(t)?QS:GU:Nm}function Mk(t,e){const s=[...t],r=s.length,n=t.map((i,c)=>rb(i)(i,e[c]));return i=>{for(let c=0;c<r;c++)s[c]=n[c](i);return s}}function GU(t,e){const s={...t,...e},r={};for(const n in s)t[n]!==void 0&&e[n]!==void 0&&(r[n]=rb(t[n])(t[n],e[n]));return n=>{for(const i in r)s[i]=r[i](n);return s}}function XU(t,e){const s=[],r={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const i=e.types[n],c=t.indexes[i][r[i]],u=t.values[c]??0;s[n]=u,r[i]++}return s}const YU=(t,e)=>{const s=Do.createTransformer(e),r=Ad(t),n=Ad(e);return r.indexes.var.length===n.indexes.var.length&&r.indexes.color.length===n.indexes.color.length&&r.indexes.number.length>=n.indexes.number.length?Dv.has(t)&&!n.values.length||Dv.has(e)&&!r.values.length?FU(t,e):zd(Mk(XU(r,n),n.values),s):Nm(t,e)};function Pk(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Qt(t,e,s):rb(t)(t,e)}const KU=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Jt.update(e,s),stop:()=>Po(e),now:()=>Us.isProcessing?Us.timestamp:jr.now()}},Dk=(t,e,s=10)=>{let r="";const n=Math.max(Math.round(e/s),2);for(let i=0;i<n;i++)r+=t(i/(n-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Sm=2e4;function ab(t){let e=0;const s=50;let r=t.next(e);for(;!r.done&&e<Sm;)e+=s,r=t.next(e);return e>=Sm?1/0:e}function WU(t,e=100,s){const r=s({...t,keyframes:[0,e]}),n=Math.min(ab(r),Sm);return{type:"keyframes",ease:i=>r.next(n*i).value/e,duration:Xa(n)}}const ZU=5;function Ok(t,e,s){const r=Math.max(e-ZU,0);return mk(s-t(r),e-r)}const ss={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Px=.001;function QU({duration:t=ss.duration,bounce:e=ss.bounce,velocity:s=ss.velocity,mass:r=ss.mass}){let n,i,c=1-e;c=En(ss.minDamping,ss.maxDamping,c),t=En(ss.minDuration,ss.maxDuration,Xa(t)),c<1?(n=h=>{const p=h*c,g=p*t,x=p-s,b=Ov(h,c),_=Math.exp(-g);return Px-x/b*_},i=h=>{const g=h*c*t,x=g*s+s,b=Math.pow(c,2)*Math.pow(h,2)*t,_=Math.exp(-g),j=Ov(Math.pow(h,2),c);return(-n(h)+Px>0?-1:1)*((x-b)*_)/j}):(n=h=>{const p=Math.exp(-h*t),g=(h-s)*t+1;return-Px+p*g},i=h=>{const p=Math.exp(-h*t),g=(s-h)*(t*t);return p*g});const u=5/t,f=eq(n,i,u);if(t=Ga(t),isNaN(f))return{stiffness:ss.stiffness,damping:ss.damping,duration:t};{const h=Math.pow(f,2)*r;return{stiffness:h,damping:c*2*Math.sqrt(r*h),duration:t}}}const JU=12;function eq(t,e,s){let r=s;for(let n=1;n<JU;n++)r=r-t(r)/e(r);return r}function Ov(t,e){return t*Math.sqrt(1-e*e)}const tq=["duration","bounce"],sq=["stiffness","damping","mass"];function JS(t,e){return e.some(s=>t[s]!==void 0)}function rq(t){let e={velocity:ss.velocity,stiffness:ss.stiffness,damping:ss.damping,mass:ss.mass,isResolvedFromDuration:!1,...t};if(!JS(t,sq)&&JS(t,tq))if(t.visualDuration){const s=t.visualDuration,r=2*Math.PI/(s*1.2),n=r*r,i=2*En(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:ss.mass,stiffness:n,damping:i}}else{const s=QU(t);e={...e,...s,mass:ss.mass},e.isResolvedFromDuration=!0}return e}function Cm(t=ss.visualDuration,e=ss.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:n}=s;const i=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],u={done:!1,value:i},{stiffness:f,damping:h,mass:p,duration:g,velocity:x,isResolvedFromDuration:b}=rq({...s,velocity:-Xa(s.velocity||0)}),_=x||0,j=h/(2*Math.sqrt(f*p)),N=c-i,C=Xa(Math.sqrt(f/p)),E=Math.abs(N)<5;r||(r=E?ss.restSpeed.granular:ss.restSpeed.default),n||(n=E?ss.restDelta.granular:ss.restDelta.default);let S;if(j<1){const R=Ov(C,j);S=D=>{const $=Math.exp(-j*C*D);return c-$*((_+j*C*N)/R*Math.sin(R*D)+N*Math.cos(R*D))}}else if(j===1)S=R=>c-Math.exp(-C*R)*(N+(_+C*N)*R);else{const R=C*Math.sqrt(j*j-1);S=D=>{const $=Math.exp(-j*C*D),A=Math.min(R*D,300);return c-$*((_+j*C*N)*Math.sinh(A)+R*N*Math.cosh(A))/R}}const P={calculatedDuration:b&&g||null,next:R=>{const D=S(R);if(b)u.done=R>=g;else{let $=R===0?_:0;j<1&&($=R===0?Ga(_):Ok(S,R,D));const A=Math.abs($)<=r,M=Math.abs(c-D)<=n;u.done=A&&M}return u.value=u.done?c:D,u},toString:()=>{const R=Math.min(ab(P),Sm),D=Dk($=>P.next(R*$).value,R,30);return R+"ms "+D},toTransition:()=>{}};return P}Cm.applyToOptions=t=>{const e=WU(t,100,Cm);return t.ease=e.ease,t.duration=Ga(e.duration),t.type="keyframes",t};function $v({keyframes:t,velocity:e=0,power:s=.8,timeConstant:r=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:c,min:u,max:f,restDelta:h=.5,restSpeed:p}){const g=t[0],x={done:!1,value:g},b=A=>u!==void 0&&A<u||f!==void 0&&A>f,_=A=>u===void 0?f:f===void 0||Math.abs(u-A)<Math.abs(f-A)?u:f;let j=s*e;const N=g+j,C=c===void 0?N:c(N);C!==N&&(j=C-g);const E=A=>-j*Math.exp(-A/r),S=A=>C+E(A),P=A=>{const M=E(A),U=S(A);x.done=Math.abs(M)<=h,x.value=x.done?C:U};let R,D;const $=A=>{b(x.value)&&(R=A,D=Cm({keyframes:[x.value,_(x.value)],velocity:Ok(S,A,x.value),damping:n,stiffness:i,restDelta:h,restSpeed:p}))};return $(0),{calculatedDuration:null,next:A=>{let M=!1;return!D&&R===void 0&&(M=!0,P(A),$(A)),R!==void 0&&A>=R?D.next(A-R):(!M&&P(A),x)}}}function aq(t,e,s){const r=[],n=s||An.mix||Pk,i=t.length-1;for(let c=0;c<i;c++){let u=n(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||aa:e;u=zd(f,u)}r.push(u)}return r}function nq(t,e,{clamp:s=!0,ease:r,mixer:n}={}){const i=t.length;if(Yy(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=aq(e,r,n),f=u.length,h=p=>{if(c&&p<t[0])return e[0];let g=0;if(f>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const x=Cd(t[g],t[g+1],p);return u[g](x)};return s?p=>h(En(t[0],t[i-1],p)):h}function oq(t,e){const s=t[t.length-1];for(let r=1;r<=e;r++){const n=Cd(0,e,r);t.push(Qt(s,1,n))}}function iq(t){const e=[0];return oq(e,t.length-1),e}function lq(t,e){return t.map(s=>s*e)}function cq(t,e){return t.map(()=>e||jk).splice(0,t.length-1)}function hd({duration:t=300,keyframes:e,times:s,ease:r="easeInOut"}){const n=bU(r)?r.map(XS):XS(r),i={done:!1,value:e[0]},c=lq(s&&s.length===e.length?s:iq(e),t),u=nq(c,e,{ease:Array.isArray(n)?n:cq(e,n)});return{calculatedDuration:t,next:f=>(i.value=u(f),i.done=f>=t,i)}}const uq=t=>t!==null;function nb(t,{repeat:e,repeatType:s="loop"},r,n=1){const i=t.filter(uq),u=n<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!u||r===void 0?i[u]:r}const dq={decay:$v,inertia:$v,tween:hd,keyframes:hd,spring:Cm};function $k(t){typeof t.type=="string"&&(t.type=dq[t.type])}class ob{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const fq=t=>t/100;class ib extends ob{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,n;const{motionValue:s}=this.options;s&&s.updatedAt!==jr.now()&&this.tick(jr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(r=this.options).onStop)==null||n.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;$k(e);const{type:s=hd,repeat:r=0,repeatDelay:n=0,repeatType:i,velocity:c=0}=e;let{keyframes:u}=e;const f=s||hd;f!==hd&&typeof u[0]!="number"&&(this.mixKeyframes=zd(fq,Pk(u[0],u[1])),u=[0,100]);const h=f({...e,keyframes:u});i==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-c})),h.calculatedDuration===null&&(h.calculatedDuration=ab(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+n,this.totalDuration=this.resolvedDuration*(r+1)-n,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:r,totalDuration:n,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:g,repeatType:x,repeatDelay:b,type:_,onUpdate:j,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?C<0:C>n;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let S=this.currentTime,P=r;if(g){const A=Math.min(this.currentTime,n)/u;let M=Math.floor(A),U=A%1;!U&&A>=1&&(U=1),U===1&&M--,M=Math.min(M,g+1),!!(M%2)&&(x==="reverse"?(U=1-U,b&&(U-=b/u)):x==="mirror"&&(P=c)),S=En(0,1,U)*u}const R=E?{done:!1,value:p[0]}:P.next(S);i&&(R.value=i(R.value));let{done:D}=R;!E&&f!==null&&(D=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return $&&_!==$v&&(R.value=nb(p,this.options,N,this.speed)),j&&j(R.value),$&&this.finish(),R}then(e,s){return this.finished.then(e,s)}get duration(){return Xa(this.calculatedDuration)}get time(){return Xa(this.currentTime)}set time(e){var s;e=Ga(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(jr.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Xa(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:e=KU,startTime:s}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(i=(n=this.options).onPlay)==null||i.call(n);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=s??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function hq(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ji=t=>t*180/Math.PI,Lv=t=>{const e=ji(Math.atan2(t[1],t[0]));return Iv(e)},mq={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Lv,rotateZ:Lv,skewX:t=>ji(Math.atan(t[1])),skewY:t=>ji(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Iv=t=>(t=t%360,t<0&&(t+=360),t),eC=Lv,tC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),sC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),pq={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tC,scaleY:sC,scale:t=>(tC(t)+sC(t))/2,rotateX:t=>Iv(ji(Math.atan2(t[6],t[5]))),rotateY:t=>Iv(ji(Math.atan2(-t[2],t[0]))),rotateZ:eC,rotate:eC,skewX:t=>ji(Math.atan(t[4])),skewY:t=>ji(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bv(t){return t.includes("scale")?1:0}function Vv(t,e){if(!t||t==="none")return Bv(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,n;if(s)r=pq,n=s;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=mq,n=u}if(!n)return Bv(e);const i=r[e],c=n[1].split(",").map(xq);return typeof i=="function"?i(c):c[i]}const gq=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Vv(s,e)};function xq(t){return parseFloat(t.trim())}const Tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rc=new Set(Tc),rC=t=>t===kc||t===tt,vq=new Set(["x","y","z"]),yq=Tc.filter(t=>!vq.has(t));function bq(t){const e=[];return yq.forEach(s=>{const r=t.getValue(s);r!==void 0&&(e.push([s,r.get()]),r.set(s.startsWith("scale")?1:0))}),e}const Ei={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Vv(e,"x"),y:(t,{transform:e})=>Vv(e,"y")};Ei.translateX=Ei.x;Ei.translateY=Ei.y;const Ai=new Set;let zv=!1,Uv=!1,qv=!1;function Lk(){if(Uv){const t=Array.from(Ai).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),s=new Map;e.forEach(r=>{const n=bq(r);n.length&&(s.set(r,n),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const n=s.get(r);n&&n.forEach(([i,c])=>{var u;(u=r.getValue(i))==null||u.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Uv=!1,zv=!1,Ai.forEach(t=>t.complete(qv)),Ai.clear()}function Ik(){Ai.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Uv=!0)})}function wq(){qv=!0,Ik(),Lk(),qv=!1}class lb{constructor(e,s,r,n,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=r,this.motionValue=n,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ai.add(this),zv||(zv=!0,Jt.read(Ik),Jt.resolveKeyframes(Lk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:r,motionValue:n}=this;if(e[0]===null){const i=n==null?void 0:n.get(),c=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&s){const u=r.readValue(s,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),n&&i===void 0&&n.set(e[0])}hq(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ai.delete(this)}cancel(){this.state==="scheduled"&&(Ai.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const _q=t=>t.startsWith("--");function jq(t,e,s){_q(e)?t.style.setProperty(e,s):t.style[e]=s}const Nq=Ky(()=>window.ScrollTimeline!==void 0),Sq={};function Cq(t,e){const s=Ky(t);return()=>Sq[e]??s()}const Bk=Cq(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ed=([t,e,s,r])=>`cubic-bezier(${t}, ${e}, ${s}, ${r})`,aC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ed([0,.65,.55,1]),circOut:ed([.55,0,1,.45]),backIn:ed([.31,.01,.66,-.59]),backOut:ed([.33,1.53,.69,.99])};function Vk(t,e){if(t)return typeof t=="function"?Bk()?Dk(t,e):"ease-out":Nk(t)?ed(t):Array.isArray(t)?t.map(s=>Vk(s,e)||aC.easeOut):aC[t]}function Eq(t,e,s,{delay:r=0,duration:n=300,repeat:i=0,repeatType:c="loop",ease:u="easeOut",times:f}={},h=void 0){const p={[e]:s};f&&(p.offset=f);const g=Vk(u,n);Array.isArray(g)&&(p.easing=g);const x={delay:r,duration:n,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(p,x)}function zk(t){return typeof t=="function"&&"applyToOptions"in t}function Aq({type:t,...e}){return zk(t)&&Bk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kq extends ob{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:r,keyframes:n,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=e,Yy(typeof e.type!="string");const h=Aq(e);this.animation=Eq(s,r,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=nb(n,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):jq(s,r,p),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,r;const e=((r=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:r.call(s).duration)||0;return Xa(Number(e))}get time(){return Xa(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ga(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Nq()?(this.animation.timeline=e,aa):s(this)}}const Uk={anticipate:bk,backInOut:yk,circInOut:_k};function Tq(t){return t in Uk}function Rq(t){typeof t.ease=="string"&&Tq(t.ease)&&(t.ease=Uk[t.ease])}const nC=10;class Mq extends kq{constructor(e){Rq(e),$k(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:r,onComplete:n,element:i,...c}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const u=new ib({...c,autoplay:!1}),f=Ga(this.finishedTime??this.time);s.setWithVelocity(u.sample(f-nC).value,u.sample(f).value,nC),u.stop()}}const oC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Do.test(t)||t==="0")&&!t.startsWith("url("));function Pq(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function Dq(t,e,s,r){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],c=oC(n,e),u=oC(i,e);return!c||!u?!1:Pq(t)||(s==="spring"||zk(s))&&r}function cb(t){return fk(t)&&"offsetHeight"in t}const Oq=new Set(["opacity","clipPath","filter","transform"]),$q=Ky(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Lq(t){var h;const{motionValue:e,name:s,repeatDelay:r,repeatType:n,damping:i,type:c}=t;if(!cb((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return $q()&&s&&Oq.has(s)&&(s!=="transform"||!f)&&!u&&!r&&n!=="mirror"&&i!==0&&c!=="inertia"}const Iq=40;class Bq extends ob{constructor({autoplay:e=!0,delay:s=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:c="loop",keyframes:u,name:f,motionValue:h,element:p,...g}){var _;super(),this.stop=()=>{var j,N;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=jr.now();const x={autoplay:e,delay:s,type:r,repeat:n,repeatDelay:i,repeatType:c,name:f,motionValue:h,element:p,...g},b=(p==null?void 0:p.KeyframeResolver)||lb;this.keyframeResolver=new b(u,(j,N,C)=>this.onKeyframesResolved(j,N,x,!C),f,h,p),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,s,r,n){this.keyframeResolver=void 0;const{name:i,type:c,velocity:u,delay:f,isHandoff:h,onUpdate:p}=r;this.resolvedAt=jr.now(),Dq(e,i,c,u)||((An.instantAnimations||!f)&&(p==null||p(nb(e,r,s))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>Iq?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...r,keyframes:e},b=!h&&Lq(x)?new Mq({...x,element:x.motionValue.owner.current}):new ib(x);b.finished.then(()=>this.notifyFinished()).catch(aa),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),wq()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Vq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zq(t){const e=Vq.exec(t);if(!e)return[,];const[,s,r,n]=e;return[`--${s??r}`,n]}function qk(t,e,s=1){const[r,n]=zq(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const c=i.trim();return dk(c)?parseFloat(c):c}return eb(n)?qk(n,e,s+1):n}function ub(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Fk=new Set(["width","height","top","left","right","bottom",...Tc]),Uq={test:t=>t==="auto",parse:t=>t},Hk=t=>e=>e.test(t),Gk=[kc,tt,Ya,lo,PU,MU,Uq],iC=t=>Gk.find(Hk(t));function qq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hk(t):!0}const Fq=new Set(["brightness","contrast","saturate","opacity"]);function Hq(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=s.match(tb)||[];if(!r)return t;const n=s.replace(r,"");let i=Fq.has(e)?1:0;return r!==s&&(i*=100),e+"("+i+n+")"}const Gq=/\b([a-z-]*)\(.*?\)/gu,Fv={...Do,getAnimatableNone:t=>{const e=t.match(Gq);return e?e.map(Hq).join(" "):t}},lC={...kc,transform:Math.round},Xq={rotate:lo,rotateX:lo,rotateY:lo,rotateZ:lo,scale:Ah,scaleX:Ah,scaleY:Ah,scaleZ:Ah,skew:lo,skewX:lo,skewY:lo,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:Ed,originX:KS,originY:KS,originZ:tt},db={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...Xq,zIndex:lC,fillOpacity:Ed,strokeOpacity:Ed,numOctaves:lC},Yq={...db,color:Ks,backgroundColor:Ks,outlineColor:Ks,fill:Ks,stroke:Ks,borderColor:Ks,borderTopColor:Ks,borderRightColor:Ks,borderBottomColor:Ks,borderLeftColor:Ks,filter:Fv,WebkitFilter:Fv},Xk=t=>Yq[t];function Yk(t,e){let s=Xk(t);return s!==Fv&&(s=Do),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Kq=new Set(["auto","none","0"]);function Wq(t,e,s){let r=0,n;for(;r<t.length&&!n;){const i=t[r];typeof i=="string"&&!Kq.has(i)&&Ad(i).values.length&&(n=t[r]),r++}if(n&&s)for(const i of e)t[i]=Yk(s,n)}class Zq extends lb{constructor(e,s,r,n,i){super(e,s,r,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:r}=this;if(!s||!s.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),eb(h))){const p=qk(h,s.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Fk.has(r)||e.length!==2)return;const[n,i]=e,c=iC(n),u=iC(i);if(c!==u)if(rC(c)&&rC(u))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Ei[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,r=[];for(let n=0;n<e.length;n++)(e[n]===null||qq(e[n]))&&r.push(n);r.length&&Wq(e,r,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ei[r](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&e.getValue(r,n).jump(n,!1)}measureEndState(){var u;const{element:e,name:s,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const n=e.getValue(s);n&&n.jump(this.measuredOrigin,!1);const i=r.length-1,c=r[i];r[i]=Ei[s](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([f,h])=>{e.getValue(f).set(h)}),this.resolveNoneKeyframes()}}function Qq(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const n=(s==null?void 0:s[t])??r.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}const Kk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,cC=30,Jq=t=>!isNaN(parseFloat(t));class e9{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,n=!0)=>{var c,u;const i=jr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty();n&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=jr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Jq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Wy);const r=this.events[e].add(s);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,r){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cC)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,cC);return mk(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vc(t,e){return new e9(t,e)}const{schedule:fb}=Sk(queueMicrotask,!1),ma={x:!1,y:!1};function Wk(){return ma.x||ma.y}function t9(t){return t==="x"||t==="y"?ma[t]?null:(ma[t]=!0,()=>{ma[t]=!1}):ma.x||ma.y?null:(ma.x=ma.y=!0,()=>{ma.x=ma.y=!1})}function Zk(t,e){const s=Qq(t),r=new AbortController,n={passive:!0,...e,signal:r.signal};return[s,n,()=>r.abort()]}function uC(t){return!(t.pointerType==="touch"||Wk())}function s9(t,e,s={}){const[r,n,i]=Zk(t,s),c=u=>{if(!uC(u))return;const{target:f}=u,h=e(f,u);if(typeof h!="function"||!f)return;const p=g=>{uC(g)&&(h(g),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,n)};return r.forEach(u=>{u.addEventListener("pointerenter",c,n)}),i}const Qk=(t,e)=>e?t===e?!0:Qk(t,e.parentElement):!1,hb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,r9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function a9(t){return r9.has(t.tagName)||t.tabIndex!==-1}const Fh=new WeakSet;function dC(t){return e=>{e.key==="Enter"&&t(e)}}function Dx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const n9=(t,e)=>{const s=t.currentTarget;if(!s)return;const r=dC(()=>{if(Fh.has(s))return;Dx(s,"down");const n=dC(()=>{Dx(s,"up")}),i=()=>Dx(s,"cancel");s.addEventListener("keyup",n,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",r,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",r),e)};function fC(t){return hb(t)&&!Wk()}function o9(t,e,s={}){const[r,n,i]=Zk(t,s),c=u=>{const f=u.currentTarget;if(!fC(u))return;Fh.add(f);const h=e(f,u),p=(b,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),Fh.has(f)&&Fh.delete(f),fC(b)&&typeof h=="function"&&h(b,{success:_})},g=b=>{p(b,f===window||f===document||s.useGlobalTarget||Qk(f,b.target))},x=b=>{p(b,!1)};window.addEventListener("pointerup",g,n),window.addEventListener("pointercancel",x,n)};return r.forEach(u=>{(s.useGlobalTarget?window:u).addEventListener("pointerdown",c,n),cb(u)&&(u.addEventListener("focus",h=>n9(h,n)),!a9(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),i}function Jk(t){return fk(t)&&"ownerSVGElement"in t}function i9(t){return Jk(t)&&t.tagName==="svg"}const tr=t=>!!(t&&t.getVelocity),l9=[...Gk,Ks,Do],c9=t=>l9.find(Hk(t)),mb=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class u9 extends y.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const r=s.offsetParent,n=cb(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function d9({children:t,isPresent:e,anchorX:s}){const r=y.useId(),n=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=y.useContext(mb);return y.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:p,right:g}=i.current;if(e||!n.current||!u||!f)return;const x=s==="left"?`left: ${p}`:`right: ${g}`;n.current.dataset.motionPopId=r;const b=document.createElement("style");return c&&(b.nonce=c),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[e]),a.jsx(u9,{isPresent:e,childRef:n,sizeRef:i,children:y.cloneElement(t,{ref:n})})}const f9=({children:t,initial:e,isPresent:s,onExitComplete:r,custom:n,presenceAffectsLayout:i,mode:c,anchorX:u})=>{const f=Fy(h9),h=y.useId();let p=!0,g=y.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:s,custom:n,onExitComplete:x=>{f.set(x,!0);for(const b of f.values())if(!b)return;r&&r()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[s,f,r]);return i&&p&&(g={...g}),y.useMemo(()=>{f.forEach((x,b)=>f.set(b,!1))},[s]),y.useEffect(()=>{!s&&!f.size&&r&&r()},[s]),c==="popLayout"&&(t=a.jsx(d9,{isPresent:s,anchorX:u,children:t})),a.jsx(dp.Provider,{value:g,children:t})};function h9(){return new Map}function eT(t=!0){const e=y.useContext(dp);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:r,register:n}=e,i=y.useId();y.useEffect(()=>{if(t)return n(i)},[t]);const c=y.useCallback(()=>t&&r&&r(i),[i,r,t]);return!s&&r?[!1,c]:[!0]}const kh=t=>t.key||"";function hC(t){const e=[];return y.Children.forEach(t,s=>{y.isValidElement(s)&&e.push(s)}),e}const tT=({children:t,custom:e,initial:s=!0,onExitComplete:r,presenceAffectsLayout:n=!0,mode:i="sync",propagate:c=!1,anchorX:u="left"})=>{const[f,h]=eT(c),p=y.useMemo(()=>hC(t),[t]),g=c&&!f?[]:p.map(kh),x=y.useRef(!0),b=y.useRef(p),_=Fy(()=>new Map),[j,N]=y.useState(p),[C,E]=y.useState(p);uk(()=>{x.current=!1,b.current=p;for(let R=0;R<C.length;R++){const D=kh(C[R]);g.includes(D)?_.delete(D):_.get(D)!==!0&&_.set(D,!1)}},[C,g.length,g.join("-")]);const S=[];if(p!==j){let R=[...p];for(let D=0;D<C.length;D++){const $=C[D],A=kh($);g.includes(A)||(R.splice(D,0,$),S.push($))}return i==="wait"&&S.length&&(R=S),E(hC(R)),N(p),null}const{forceRender:P}=y.useContext(qy);return a.jsx(a.Fragment,{children:C.map(R=>{const D=kh(R),$=c&&!f?!1:p===C||g.includes(D),A=()=>{if(_.has(D))_.set(D,!0);else return;let M=!0;_.forEach(U=>{U||(M=!1)}),M&&(P==null||P(),E(b.current),c&&(h==null||h()),r&&r())};return a.jsx(f9,{isPresent:$,initial:!x.current||s?void 0:!1,custom:e,presenceAffectsLayout:n,mode:i,onExitComplete:$?void 0:A,anchorX:u,children:R},D)})})},sT=y.createContext({strict:!1}),mC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yc={};for(const t in mC)yc[t]={isEnabled:e=>mC[t].some(s=>!!e[s])};function m9(t){for(const e in t)yc[e]={...yc[e],...t[e]}}const p9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Em(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||p9.has(t)}let rT=t=>!Em(t);function g9(t){t&&(rT=e=>e.startsWith("on")?!Em(e):t(e))}try{g9(require("@emotion/is-prop-valid").default)}catch{}function x9(t,e,s){const r={};for(const n in t)n==="values"&&typeof t.values=="object"||(rT(n)||s===!0&&Em(n)||!e&&!Em(n)||t.draggable&&n.startsWith("onDrag"))&&(r[n]=t[n]);return r}function v9(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...r)=>t(...r);return new Proxy(s,{get:(r,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}const fp=y.createContext({});function hp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function kd(t){return typeof t=="string"||Array.isArray(t)}const pb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gb=["initial",...pb];function mp(t){return hp(t.animate)||gb.some(e=>kd(t[e]))}function aT(t){return!!(mp(t)||t.variants)}function y9(t,e){if(mp(t)){const{initial:s,animate:r}=t;return{initial:s===!1||kd(s)?s:void 0,animate:kd(r)?r:void 0}}return t.inherit!==!1?e:{}}function b9(t){const{initial:e,animate:s}=y9(t,y.useContext(fp));return y.useMemo(()=>({initial:e,animate:s}),[pC(e),pC(s)])}function pC(t){return Array.isArray(t)?t.join(" "):t}const w9=Symbol.for("motionComponentSymbol");function Ql(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _9(t,e,s){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),s&&(typeof s=="function"?s(r):Ql(s)&&(s.current=r))},[e])}const xb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),j9="framerAppearId",nT="data-"+xb(j9),oT=y.createContext({});function N9(t,e,s,r,n){var j,N;const{visualElement:i}=y.useContext(fp),c=y.useContext(sT),u=y.useContext(dp),f=y.useContext(mb).reducedMotion,h=y.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:i,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,g=y.useContext(oT);p&&!p.projection&&n&&(p.type==="html"||p.type==="svg")&&S9(h.current,s,n,g);const x=y.useRef(!1);y.useInsertionEffect(()=>{p&&x.current&&p.update(s,u)});const b=s[nT],_=y.useRef(!!b&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,b))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,b)));return uk(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),fb.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),y.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,b)}),_.current=!1))}),p}function S9(t,e,s,r){const{layoutId:n,layout:i,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:iT(t.parent)),t.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!c||u&&Ql(u),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:h})}function iT(t){if(t)return t.options.allowProjection!==!1?t.projection:iT(t.parent)}function C9({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:r,Component:n}){t&&m9(t);function i(u,f){let h;const p={...y.useContext(mb),...u,layoutId:E9(u)},{isStatic:g}=p,x=b9(u),b=r(u,g);if(!g&&Hy){A9();const _=k9(p);h=_.MeasureLayout,x.visualElement=N9(n,b,p,e,_.ProjectionNode)}return a.jsxs(fp.Provider,{value:x,children:[h&&x.visualElement?a.jsx(h,{visualElement:x.visualElement,...p}):null,s(n,u,_9(b,x.visualElement,f),b,g,x.visualElement)]})}i.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=y.forwardRef(i);return c[w9]=n,c}function E9({layoutId:t}){const e=y.useContext(qy).id;return e&&t!==void 0?e+"-"+t:t}function A9(t,e){y.useContext(sT).strict}function k9(t){const{drag:e,layout:s}=yc;if(!e&&!s)return{};const r={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Td={};function T9(t){for(const e in t)Td[e]=t[e],Jy(e)&&(Td[e].isCSSVariable=!0)}function lT(t,{layout:e,layoutId:s}){return Rc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Td[t]||t==="opacity")}const R9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M9=Tc.length;function P9(t,e,s){let r="",n=!0;for(let i=0;i<M9;i++){const c=Tc[i],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(c.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||s){const h=Kk(u,db[c]);if(!f){n=!1;const p=R9[c]||c;r+=`${p}(${h}) `}s&&(e[c]=h)}}return r=r.trim(),s?r=s(e,n?"":r):n&&(r="none"),r}function vb(t,e,s){const{style:r,vars:n,transformOrigin:i}=t;let c=!1,u=!1;for(const f in e){const h=e[f];if(Rc.has(f)){c=!0;continue}else if(Jy(f)){n[f]=h;continue}else{const p=Kk(h,db[f]);f.startsWith("origin")?(u=!0,i[f]=p):r[f]=p}}if(e.transform||(c||s?r.transform=P9(e,t.transform,s):r.transform&&(r.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=i;r.transformOrigin=`${f} ${h} ${p}`}}const yb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cT(t,e,s){for(const r in e)!tr(e[r])&&!lT(r,s)&&(t[r]=e[r])}function D9({transformTemplate:t},e){return y.useMemo(()=>{const s=yb();return vb(s,e,t),Object.assign({},s.vars,s.style)},[e])}function O9(t,e){const s=t.style||{},r={};return cT(r,s,t),Object.assign(r,D9(t,e)),r}function $9(t,e){const s={},r=O9(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const L9={offset:"stroke-dashoffset",array:"stroke-dasharray"},I9={offset:"strokeDashoffset",array:"strokeDasharray"};function B9(t,e,s=1,r=0,n=!0){t.pathLength=1;const i=n?L9:I9;t[i.offset]=tt.transform(-r);const c=tt.transform(e),u=tt.transform(s);t[i.array]=`${c} ${u}`}function uT(t,{attrX:e,attrY:s,attrScale:r,pathLength:n,pathSpacing:i=1,pathOffset:c=0,...u},f,h,p){if(vb(t,u,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x}=t;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),s!==void 0&&(g.y=s),r!==void 0&&(g.scale=r),n!==void 0&&B9(g,n,i,c,!1)}const dT=()=>({...yb(),attrs:{}}),fT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function V9(t,e,s,r){const n=y.useMemo(()=>{const i=dT();return uT(i,e,fT(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};cT(i,t.style,t),n.style={...i,...n.style}}return n}const z9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bb(t){return typeof t!="string"||t.includes("-")?!1:!!(z9.indexOf(t)>-1||/[A-Z]/u.test(t))}function U9(t=!1){return(s,r,n,{latestValues:i},c)=>{const f=(bb(s)?V9:$9)(r,i,c,s),h=x9(r,typeof s=="string",t),p=s!==y.Fragment?{...h,...f,ref:n}:{},{children:g}=r,x=y.useMemo(()=>tr(g)?g.get():g,[g]);return y.createElement(s,{...p,children:x})}}function gC(t){const e=[{},{}];return t==null||t.values.forEach((s,r)=>{e[0][r]=s.get(),e[1][r]=s.getVelocity()}),e}function wb(t,e,s,r){if(typeof e=="function"){const[n,i]=gC(r);e=e(s!==void 0?s:t.custom,n,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,i]=gC(r);e=e(s!==void 0?s:t.custom,n,i)}return e}function Hh(t){return tr(t)?t.get():t}function q9({scrapeMotionValuesFromProps:t,createRenderState:e},s,r,n){return{latestValues:F9(s,r,n,t),renderState:e()}}const hT=t=>(e,s)=>{const r=y.useContext(fp),n=y.useContext(dp),i=()=>q9(t,e,r,n);return s?i():Fy(i)};function F9(t,e,s,r){const n={},i=r(t,{});for(const x in i)n[x]=Hh(i[x]);let{initial:c,animate:u}=t;const f=mp(t),h=aT(t);e&&h&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const g=p?u:c;if(g&&typeof g!="boolean"&&!hp(g)){const x=Array.isArray(g)?g:[g];for(let b=0;b<x.length;b++){const _=wb(t,x[b]);if(_){const{transitionEnd:j,transition:N,...C}=_;for(const E in C){let S=C[E];if(Array.isArray(S)){const P=p?S.length-1:0;S=S[P]}S!==null&&(n[E]=S)}for(const E in j)n[E]=j[E]}}}return n}function _b(t,e,s){var i;const{style:r}=t,n={};for(const c in r)(tr(r[c])||e.style&&tr(e.style[c])||lT(c,t)||((i=s==null?void 0:s.getValue(c))==null?void 0:i.liveStyle)!==void 0)&&(n[c]=r[c]);return n}const H9={useVisualState:hT({scrapeMotionValuesFromProps:_b,createRenderState:yb})};function mT(t,e,s){const r=_b(t,e,s);for(const n in t)if(tr(t[n])||tr(e[n])){const i=Tc.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=t[n]}return r}const G9={useVisualState:hT({scrapeMotionValuesFromProps:mT,createRenderState:dT})};function X9(t,e){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){const c={...bb(r)?G9:H9,preloadedFeatures:t,useRender:U9(n),createVisualElement:e,Component:r};return C9(c)}}function Rd(t,e,s){const r=t.getProps();return wb(r,e,s!==void 0?s:r.custom,t)}const Hv=t=>Array.isArray(t);function Y9(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,vc(s))}function K9(t){return Hv(t)?t[t.length-1]||0:t}function W9(t,e){const s=Rd(t,e);let{transitionEnd:r={},transition:n={},...i}=s||{};i={...i,...r};for(const c in i){const u=K9(i[c]);Y9(t,c,u)}}function Z9(t){return!!(tr(t)&&t.add)}function Gv(t,e){const s=t.getValue("willChange");if(Z9(s))return s.add(e);if(!s&&An.WillChange){const r=new An.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function pT(t){return t.props[nT]}const Q9=t=>t!==null;function J9(t,{repeat:e,repeatType:s="loop"},r){const n=t.filter(Q9),i=e&&s!=="loop"&&e%2===1?0:n.length-1;return n[i]}const eF={type:"spring",stiffness:500,damping:25,restSpeed:10},tF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),sF={type:"keyframes",duration:.8},rF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aF=(t,{keyframes:e})=>e.length>2?sF:Rc.has(t)?t.startsWith("scale")?tF(e[1]):eF:rF;function nF({when:t,delay:e,delayChildren:s,staggerChildren:r,staggerDirection:n,repeat:i,repeatType:c,repeatDelay:u,from:f,elapsed:h,...p}){return!!Object.keys(p).length}const jb=(t,e,s,r={},n,i)=>c=>{const u=ub(r,t)||{},f=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Ga(f);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:i?void 0:n};nF(u)||Object.assign(p,aF(t,p)),p.duration&&(p.duration=Ga(p.duration)),p.repeatDelay&&(p.repeatDelay=Ga(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),(An.instantAnimations||An.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!i&&e.get()!==void 0){const x=J9(p.keyframes,u);if(x!==void 0){Jt.update(()=>{p.onUpdate(x),p.onComplete()});return}}return u.isSync?new ib(p):new Bq(p)};function oF({protectedKeys:t,needsAnimating:e},s){const r=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,r}function gT(t,e,{delay:s=0,transitionOverride:r,type:n}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(i=r);const f=[],h=n&&t.animationState&&t.animationState.getState()[n];for(const p in u){const g=t.getValue(p,t.latestValues[p]??null),x=u[p];if(x===void 0||h&&oF(h,p))continue;const b={delay:s,...ub(i||{},p)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===_&&!b.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const C=pT(t);if(C){const E=window.MotionHandoffAnimation(C,p,Jt);E!==null&&(b.startTime=E,j=!0)}}Gv(t,p),g.start(jb(p,g,x,t.shouldReduceMotion&&Fk.has(p)?{type:!1}:b,t,j));const N=g.animation;N&&f.push(N)}return c&&Promise.all(f).then(()=>{Jt.update(()=>{c&&W9(t,c)})}),f}function Xv(t,e,s={}){var f;const r=Rd(t,e,s.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:n=t.getDefaultTransition()||{}}=r||{};s.transitionOverride&&(n=s.transitionOverride);const i=r?()=>Promise.all(gT(t,r,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:x}=n;return iF(t,e,p+h,g,x,s)}:()=>Promise.resolve(),{when:u}=n;if(u){const[h,p]=u==="beforeChildren"?[i,c]:[c,i];return h().then(()=>p())}else return Promise.all([i(),c(s.delay)])}function iF(t,e,s=0,r=0,n=1,i){const c=[],u=(t.variantChildren.size-1)*r,f=n===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(t.variantChildren).sort(lF).forEach((h,p)=>{h.notify("AnimationStart",e),c.push(Xv(h,e,{...i,delay:s+f(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(c)}function lF(t,e){return t.sortNodePosition(e)}function cF(t,e,s={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const n=e.map(i=>Xv(t,i,s));r=Promise.all(n)}else if(typeof e=="string")r=Xv(t,e,s);else{const n=typeof e=="function"?Rd(t,e,s.custom):e;r=Promise.all(gT(t,n,s))}return r.then(()=>{t.notify("AnimationComplete",e)})}function xT(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let r=0;r<s;r++)if(e[r]!==t[r])return!1;return!0}const uF=gb.length;function vT(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?vT(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<uF;s++){const r=gb[s],n=t.props[r];(kd(n)||n===!1)&&(e[r]=n)}return e}const dF=[...pb].reverse(),fF=pb.length;function hF(t){return e=>Promise.all(e.map(({animation:s,options:r})=>cF(t,s,r)))}function mF(t){let e=hF(t),s=xC(),r=!0;const n=f=>(h,p)=>{var x;const g=Rd(t,p,f==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(g){const{transition:b,transitionEnd:_,...j}=g;h={...h,...j,..._}}return h};function i(f){e=f(t)}function c(f){const{props:h}=t,p=vT(t.parent)||{},g=[],x=new Set;let b={},_=1/0;for(let N=0;N<fF;N++){const C=dF[N],E=s[C],S=h[C]!==void 0?h[C]:p[C],P=kd(S),R=C===f?E.isActive:null;R===!1&&(_=N);let D=S===p[C]&&S!==h[C]&&P;if(D&&r&&t.manuallyAnimateOnMount&&(D=!1),E.protectedKeys={...b},!E.isActive&&R===null||!S&&!E.prevProp||hp(S)||typeof S=="boolean")continue;const $=pF(E.prevProp,S);let A=$||C===f&&E.isActive&&!D&&P||N>_&&P,M=!1;const U=Array.isArray(S)?S:[S];let Y=U.reduce(n(C),{});R===!1&&(Y={});const{prevResolvedValues:V={}}=E,F={...V,...Y},Q=B=>{A=!0,x.has(B)&&(M=!0,x.delete(B)),E.needsAnimating[B]=!0;const z=t.getValue(B);z&&(z.liveStyle=!1)};for(const B in F){const z=Y[B],W=V[B];if(b.hasOwnProperty(B))continue;let L=!1;Hv(z)&&Hv(W)?L=!xT(z,W):L=z!==W,L?z!=null?Q(B):x.add(B):z!==void 0&&x.has(B)?Q(B):E.protectedKeys[B]=!0}E.prevProp=S,E.prevResolvedValues=Y,E.isActive&&(b={...b,...Y}),r&&t.blockInitialAnimation&&(A=!1),A&&(!(D&&$)||M)&&g.push(...U.map(B=>({animation:B,options:{type:C}})))}if(x.size){const N={};if(typeof h.initial!="boolean"){const C=Rd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(N.transition=C.transition)}x.forEach(C=>{const E=t.getBaseTarget(C),S=t.getValue(C);S&&(S.liveStyle=!0),N[C]=E??null}),g.push({animation:N})}let j=!!g.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(g):Promise.resolve()}function u(f,h){var g;if(s[f].isActive===h)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(x=>{var b;return(b=x.animationState)==null?void 0:b.setActive(f,h)}),s[f].isActive=h;const p=c(f);for(const x in s)s[x].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:i,getState:()=>s,reset:()=>{s=xC(),r=!0}}}function pF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xT(e,t):!1}function fi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xC(){return{animate:fi(!0),whileInView:fi(),whileHover:fi(),whileTap:fi(),whileDrag:fi(),whileFocus:fi(),exit:fi()}}class Vo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class gF extends Vo{constructor(e){super(e),e.animationState||(e.animationState=mF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();hp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let xF=0;class vF extends Vo{constructor(){super(...arguments),this.id=xF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const n=this.node.animationState.setActive("exit",!e);s&&!e&&n.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yF={animation:{Feature:gF},exit:{Feature:vF}};function Md(t,e,s,r={passive:!0}){return t.addEventListener(e,s,r),()=>t.removeEventListener(e,s)}function Fd(t){return{point:{x:t.pageX,y:t.pageY}}}const bF=t=>e=>hb(e)&&t(e,Fd(e));function md(t,e,s,r){return Md(t,e,bF(s),r)}function yT({top:t,left:e,right:s,bottom:r}){return{x:{min:e,max:s},y:{min:t,max:r}}}function wF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _F(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:r.y,right:r.x}}const bT=1e-4,jF=1-bT,NF=1+bT,wT=.01,SF=0-wT,CF=0+wT;function dr(t){return t.max-t.min}function EF(t,e,s){return Math.abs(t-e)<=s}function vC(t,e,s,r=.5){t.origin=r,t.originPoint=Qt(e.min,e.max,t.origin),t.scale=dr(s)/dr(e),t.translate=Qt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=jF&&t.scale<=NF||isNaN(t.scale))&&(t.scale=1),(t.translate>=SF&&t.translate<=CF||isNaN(t.translate))&&(t.translate=0)}function pd(t,e,s,r){vC(t.x,e.x,s.x,r?r.originX:void 0),vC(t.y,e.y,s.y,r?r.originY:void 0)}function yC(t,e,s){t.min=s.min+e.min,t.max=t.min+dr(e)}function AF(t,e,s){yC(t.x,e.x,s.x),yC(t.y,e.y,s.y)}function bC(t,e,s){t.min=e.min-s.min,t.max=t.min+dr(e)}function gd(t,e,s){bC(t.x,e.x,s.x),bC(t.y,e.y,s.y)}const wC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jl=()=>({x:wC(),y:wC()}),_C=()=>({min:0,max:0}),ls=()=>({x:_C(),y:_C()});function ea(t){return[t("x"),t("y")]}function Ox(t){return t===void 0||t===1}function Yv({scale:t,scaleX:e,scaleY:s}){return!Ox(t)||!Ox(e)||!Ox(s)}function pi(t){return Yv(t)||_T(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _T(t){return jC(t.x)||jC(t.y)}function jC(t){return t&&t!=="0%"}function Am(t,e,s){const r=t-s,n=e*r;return s+n}function NC(t,e,s,r,n){return n!==void 0&&(t=Am(t,n,r)),Am(t,s,r)+e}function Kv(t,e=0,s=1,r,n){t.min=NC(t.min,e,s,r,n),t.max=NC(t.max,e,s,r,n)}function jT(t,{x:e,y:s}){Kv(t.x,e.translate,e.scale,e.originPoint),Kv(t.y,s.translate,s.scale,s.originPoint)}const SC=.999999999999,CC=1.0000000000001;function kF(t,e,s,r=!1){const n=s.length;if(!n)return;e.x=e.y=1;let i,c;for(let u=0;u<n;u++){i=s[u],c=i.projectionDelta;const{visualElement:f}=i.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&tc(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,jT(t,c)),r&&pi(i.latestValues)&&tc(t,i.latestValues))}e.x<CC&&e.x>SC&&(e.x=1),e.y<CC&&e.y>SC&&(e.y=1)}function ec(t,e){t.min=t.min+e,t.max=t.max+e}function EC(t,e,s,r,n=.5){const i=Qt(t.min,t.max,n);Kv(t,e,s,i,r)}function tc(t,e){EC(t.x,e.x,e.scaleX,e.scale,e.originX),EC(t.y,e.y,e.scaleY,e.scale,e.originY)}function NT(t,e){return yT(_F(t.getBoundingClientRect(),e))}function TF(t,e,s){const r=NT(t,s),{scroll:n}=e;return n&&(ec(r.x,n.offset.x),ec(r.y,n.offset.y)),r}const ST=({current:t})=>t?t.ownerDocument.defaultView:null,AC=(t,e)=>Math.abs(t-e);function RF(t,e){const s=AC(t.x,e.x),r=AC(t.y,e.y);return Math.sqrt(s**2+r**2)}class CT{constructor(e,s,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Lx(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=RF(g.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:_}=g,{timestamp:j}=Us;this.history.push({..._,timestamp:j});const{onStart:N,onMove:C}=this.handlers;x||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=$x(x,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:b,onSessionEnd:_,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Lx(g.type==="pointercancel"?this.lastMoveEventInfo:$x(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,N),_&&_(g,N)},!hb(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=r,this.contextWindow=n||window;const c=Fd(e),u=$x(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Us;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=s;p&&p(e,Lx(u,this.history)),this.removeListeners=zd(md(this.contextWindow,"pointermove",this.handlePointerMove),md(this.contextWindow,"pointerup",this.handlePointerUp),md(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Po(this.updatePoint)}}function $x(t,e){return e?{point:e(t.point)}:t}function kC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Lx({point:t},e){return{point:t,delta:kC(t,ET(e)),offset:kC(t,MF(e)),velocity:PF(e,.1)}}function MF(t){return t[0]}function ET(t){return t[t.length-1]}function PF(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,r=null;const n=ET(t);for(;s>=0&&(r=t[s],!(n.timestamp-r.timestamp>Ga(e)));)s--;if(!r)return{x:0,y:0};const i=Xa(n.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const c={x:(n.x-r.x)/i,y:(n.y-r.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function DF(t,{min:e,max:s},r){return e!==void 0&&t<e?t=r?Qt(e,t,r.min):Math.max(t,e):s!==void 0&&t>s&&(t=r?Qt(s,t,r.max):Math.min(t,s)),t}function TC(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function OF(t,{top:e,left:s,bottom:r,right:n}){return{x:TC(t.x,s,n),y:TC(t.y,e,r)}}function RC(t,e){let s=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,r]=[r,s]),{min:s,max:r}}function $F(t,e){return{x:RC(t.x,e.x),y:RC(t.y,e.y)}}function LF(t,e){let s=.5;const r=dr(t),n=dr(e);return n>r?s=Cd(e.min,e.max-r,t.min):r>n&&(s=Cd(t.min,t.max-n,e.min)),En(0,1,s)}function IF(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Wv=.35;function BF(t=Wv){return t===!1?t=0:t===!0&&(t=Wv),{x:MC(t,"left","right"),y:MC(t,"top","bottom")}}function MC(t,e,s){return{min:PC(t,e),max:PC(t,s)}}function PC(t,e){return typeof t=="number"?t:t[e]||0}const VF=new WeakMap;class zF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const n=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Fd(p).point)},i=(p,g)=>{const{drag:x,dragPropagation:b,onDragStart:_}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=t9(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ea(N=>{let C=this.getAxisMotionValue(N).get()||0;if(Ya.test(C)){const{projection:E}=this.visualElement;if(E&&E.layout){const S=E.layout.layoutBox[N];S&&(C=dr(S)*(parseFloat(C)/100))}}this.originPoint[N]=C}),_&&Jt.postRender(()=>_(p,g)),Gv(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(p,g)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:_,onDrag:j}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=g;if(b&&this.currentDirection===null){this.currentDirection=UF(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),j&&j(p,g)},u=(p,g)=>this.stop(p,g),f=()=>ea(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new CT(e,{onSessionStart:n,onStart:i,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:ST(this.visualElement)})}stop(e,s){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Jt.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,r){const{drag:n}=this.getProps();if(!r||!Th(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=DF(c,this.constraints[e],this.elastic[e])),i.set(c)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;e&&Ql(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=OF(r.layoutBox,e):this.constraints=!1,this.elastic=BF(s),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ea(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=IF(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Ql(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=TF(r,n.root,this.visualElement.getTransformPagePoint());let c=$F(n.layout.layoutBox,i);if(s){const u=s(wF(c));this.hasMutatedConstraints=!!u,u&&(c=yT(u))}return c}startAnimation(e){const{drag:s,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},h=ea(p=>{if(!Th(p,s,this.currentDirection))return;let g=f&&f[p]||{};c&&(g={min:0,max:0});const x=n?200:1e6,b=n?40:1e7,_={type:"inertia",velocity:r?e[p]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...i,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(h).then(u)}startAxisValueAnimation(e,s){const r=this.getAxisMotionValue(e);return Gv(this.visualElement,e),r.start(jb(e,r,0,s,this.visualElement,!1))}stopAnimation(){ea(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ea(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),n=r[s];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ea(s=>{const{drag:r}=this.getProps();if(!Th(s,r,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:c,max:u}=n.layout.layoutBox[s];i.set(e[s]-Qt(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:r}=this.visualElement;if(!Ql(s)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};ea(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();n[c]=LF({min:f,max:f},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ea(c=>{if(!Th(c,e,null))return;const u=this.getAxisMotionValue(c),{min:f,max:h}=this.constraints[c];u.set(Qt(f,h,n[c]))})}addListeners(){if(!this.visualElement.current)return;VF.set(this.visualElement,this);const e=this.visualElement.current,s=md(e,"pointerdown",f=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Ql(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Jt.read(r);const c=Md(window,"resize",()=>this.scalePositionWithinConstraints()),u=n.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(ea(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=f[p].translate,g.set(g.get()+f[p].translate))}),this.visualElement.render())});return()=>{c(),s(),i(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:c=Wv,dragMomentum:u=!0}=e;return{...e,drag:s,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:c,dragMomentum:u}}}function Th(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function UF(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class qF extends Vo{constructor(e){super(e),this.removeGroupControls=aa,this.removeListeners=aa,this.controls=new zF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||aa}unmount(){this.removeGroupControls(),this.removeListeners()}}const DC=t=>(e,s)=>{t&&Jt.postRender(()=>t(e,s))};class FF extends Vo{constructor(){super(...arguments),this.removePointerDownListener=aa}onPointerDown(e){this.session=new CT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ST(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:DC(e),onStart:DC(s),onMove:r,onEnd:(i,c)=>{delete this.session,n&&Jt.postRender(()=>n(i,c))}}}mount(){this.removePointerDownListener=md(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tt.test(t))t=parseFloat(t);else return t;const s=OC(t,e.target.x),r=OC(t,e.target.y);return`${s}% ${r}%`}},HF={correct:(t,{treeScale:e,projectionDelta:s})=>{const r=t,n=Do.parse(t);if(n.length>5)return r;const i=Do.createTransformer(t),c=typeof n[0]!="number"?1:0,u=s.x.scale*e.x,f=s.y.scale*e.y;n[0+c]/=u,n[1+c]/=f;const h=Qt(u,f,.5);return typeof n[2+c]=="number"&&(n[2+c]/=h),typeof n[3+c]=="number"&&(n[3+c]/=h),i(n)}};class GF extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;T9(XF),i&&(s.group&&s.group.add(i),r&&r.register&&n&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:r,drag:n,isPresent:i}=this.props,{projection:c}=r;return c&&(c.isPresent=i,n||e.layoutDependency!==s||s===void 0||e.isPresent!==i?c.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?c.promote():c.relegate()||Jt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function AT(t){const[e,s]=eT(),r=y.useContext(qy);return a.jsx(GF,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(oT),isPresent:e,safeToRemove:s})}const XF={borderRadius:{...Vu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vu,borderTopRightRadius:Vu,borderBottomLeftRadius:Vu,borderBottomRightRadius:Vu,boxShadow:HF};function YF(t,e,s){const r=tr(t)?t:vc(t);return r.start(jb("",r,e,s)),r.animation}const KF=(t,e)=>t.depth-e.depth;class WF{constructor(){this.children=[],this.isDirty=!1}add(e){Gy(this.children,e),this.isDirty=!0}remove(e){Xy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KF),this.isDirty=!1,this.children.forEach(e)}}function ZF(t,e){const s=jr.now(),r=({timestamp:n})=>{const i=n-s;i>=e&&(Po(r),t(i-e))};return Jt.setup(r,!0),()=>Po(r)}const kT=["TopLeft","TopRight","BottomLeft","BottomRight"],QF=kT.length,$C=t=>typeof t=="string"?parseFloat(t):t,LC=t=>typeof t=="number"||tt.test(t);function JF(t,e,s,r,n,i){n?(t.opacity=Qt(0,s.opacity??1,e7(r)),t.opacityExit=Qt(e.opacity??1,0,t7(r))):i&&(t.opacity=Qt(e.opacity??1,s.opacity??1,r));for(let c=0;c<QF;c++){const u=`border${kT[c]}Radius`;let f=IC(e,u),h=IC(s,u);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||LC(f)===LC(h)?(t[u]=Math.max(Qt($C(f),$C(h),r),0),(Ya.test(h)||Ya.test(f))&&(t[u]+="%")):t[u]=h}(e.rotate||s.rotate)&&(t.rotate=Qt(e.rotate||0,s.rotate||0,r))}function IC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const e7=TT(0,.5,wk),t7=TT(.5,.95,aa);function TT(t,e,s){return r=>r<t?0:r>e?1:s(Cd(t,e,r))}function BC(t,e){t.min=e.min,t.max=e.max}function Qr(t,e){BC(t.x,e.x),BC(t.y,e.y)}function VC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function zC(t,e,s,r,n){return t-=e,t=Am(t,1/s,r),n!==void 0&&(t=Am(t,1/n,r)),t}function s7(t,e=0,s=1,r=.5,n,i=t,c=t){if(Ya.test(e)&&(e=parseFloat(e),e=Qt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=Qt(i.min,i.max,r);t===i&&(u-=e),t.min=zC(t.min,e,s,u,n),t.max=zC(t.max,e,s,u,n)}function UC(t,e,[s,r,n],i,c){s7(t,e[s],e[r],e[n],e.scale,i,c)}const r7=["x","scaleX","originX"],a7=["y","scaleY","originY"];function qC(t,e,s,r){UC(t.x,e,r7,s?s.x:void 0,r?r.x:void 0),UC(t.y,e,a7,s?s.y:void 0,r?r.y:void 0)}function FC(t){return t.translate===0&&t.scale===1}function RT(t){return FC(t.x)&&FC(t.y)}function HC(t,e){return t.min===e.min&&t.max===e.max}function n7(t,e){return HC(t.x,e.x)&&HC(t.y,e.y)}function GC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function MT(t,e){return GC(t.x,e.x)&&GC(t.y,e.y)}function XC(t){return dr(t.x)/dr(t.y)}function YC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class o7{constructor(){this.members=[]}add(e){Gy(this.members,e),e.scheduleRender()}remove(e){if(Xy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(n=>e===n);if(s===0)return!1;let r;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,s){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,s&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:r}=e;s.onExitComplete&&s.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function i7(t,e,s){let r="";const n=t.x.translate/e.x,i=t.y.translate/e.y,c=(s==null?void 0:s.z)||0;if((n||i||c)&&(r=`translate3d(${n}px, ${i}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:x,skewX:b,skewY:_}=s;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),_&&(r+=`skewY(${_}deg) `)}const u=t.x.scale*e.x,f=t.y.scale*e.y;return(u!==1||f!==1)&&(r+=`scale(${u}, ${f})`),r||"none"}const Ix=["","X","Y","Z"],l7={visibility:"hidden"},c7=1e3;let u7=0;function Bx(t,e,s,r){const{latestValues:n}=e;n[t]&&(s[t]=n[t],e.setStaticValue(t,0),r&&(r[t]=0))}function PT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=pT(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Jt,!(n||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&PT(r)}function DT({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:r,resetTransform:n}){return class{constructor(c={},u=e==null?void 0:e()){this.id=u7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(h7),this.nodes.forEach(v7),this.nodes.forEach(y7),this.nodes.forEach(m7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new WF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Wy),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=Jk(c)&&!i9(c),this.instance=c;const{layoutId:u,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=ZF(g,250),Gh.hasAnimatedSinceResize&&(Gh.hasAnimatedSinceResize=!1,this.nodes.forEach(WC))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||N7,{onLayoutAnimationStart:j,onLayoutAnimationComplete:N}=h.getProps(),C=!this.targetLayout||!MT(this.targetLayout,b),E=!g&&x;if(this.options.layoutRoot||this.resumeFrom||E||g&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...ub(_,"layout"),onPlay:j,onComplete:N};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(p,E)}else g||WC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(b7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KC);return}this.isUpdating||this.nodes.forEach(g7),this.isUpdating=!1,this.nodes.forEach(x7),this.nodes.forEach(d7),this.nodes.forEach(f7),this.clearAllSnapshots();const u=jr.now();Us.delta=En(0,1e3/60,u-Us.timestamp),Us.timestamp=u,Us.isProcessing=!0,kx.update.process(Us),kx.preRender.process(Us),kx.render.process(Us),Us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(p7),this.sharedNodes.forEach(w7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!dr(this.snapshot.measuredBox.x)&&!dr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!n)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!RT(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;c&&this.instance&&(u||pi(this.latestValues)||p)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),S7(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:c}=this.options;if(!c)return ls();const u=c.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(C7))){const{scroll:p}=this.root;p&&(ec(u.x,p.offset.x),ec(u.y,p.offset.y))}return u}removeElementScroll(c){var f;const u=ls();if(Qr(u,c),(f=this.scroll)!=null&&f.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:x}=p;p!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&Qr(u,c),ec(u.x,g.offset.x),ec(u.y,g.offset.y))}return u}applyTransform(c,u=!1){const f=ls();Qr(f,c);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&tc(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),pi(p.latestValues)&&tc(f,p.latestValues)}return pi(this.latestValues)&&tc(f,this.latestValues),f}removeTransform(c){const u=ls();Qr(u,c);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!pi(h.latestValues))continue;Yv(h.latestValues)&&h.updateSnapshot();const p=ls(),g=h.measurePageBox();Qr(p,g),qC(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return pi(this.latestValues)&&qC(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Us.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),gd(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qr(this.target,this.layout.layoutBox),jT(this.target,this.targetDelta)):Qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),gd(this.relativeTargetOrigin,this.target,b.target),Qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yv(this.parent.latestValues)||_T(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Us.timestamp&&(f=!1),f)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Qr(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;kF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=ls());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VC(this.prevProjectionDelta.x,this.projectionDelta.x),VC(this.prevProjectionDelta.y,this.projectionDelta.y)),pd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!YC(this.projectionDelta.x,this.prevProjectionDelta.x)||!YC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jl(),this.projectionDelta=Jl(),this.projectionDeltaWithTransform=Jl()}setAnimationOrigin(c,u=!1){const f=this.snapshot,h=f?f.latestValues:{},p={...this.latestValues},g=Jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=ls(),b=f?f.source:void 0,_=this.layout?this.layout.source:void 0,j=b!==_,N=this.getStack(),C=!N||N.members.length<=1,E=!!(j&&!C&&this.options.crossfade===!0&&!this.path.some(j7));this.animationProgress=0;let S;this.mixTargetDelta=P=>{const R=P/1e3;ZC(g.x,c.x,R),ZC(g.y,c.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_7(this.relativeTarget,this.relativeTargetOrigin,x,R),S&&n7(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=ls()),Qr(S,this.relativeTarget)),j&&(this.animationValues=p,JF(p,h,this.latestValues,R,E,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,f,h;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(h=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{Gh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=vc(0)),this.currentAnimation=YF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(c7),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:h,latestValues:p}=c;if(!(!u||!f||!h)){if(this!==c&&this.layout&&h&&OT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||ls();const g=dr(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+g;const x=dr(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+x}Qr(u,f),tc(u,p),pd(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new o7),this.sharedNodes.get(c).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const h={};f.z&&Bx("z",c,h,this.animationValues);for(let p=0;p<Ix.length;p++)Bx(`rotate${Ix[p]}`,c,h,this.animationValues),Bx(`skew${Ix[p]}`,c,h,this.animationValues);c.render();for(const p in h)c.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return l7;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Hh(c==null?void 0:c.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Hh(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!pi(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=i7(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Td){if(p[b]===void 0)continue;const{correct:_,applyTo:j,isCSSVariable:N}=Td[b],C=u.transform==="none"?p[b]:_(p[b],h);if(j){const E=j.length;for(let S=0;S<E;S++)u[j[S]]=C}else N?this.options.visualElement.renderState.vars[b]=C:u[b]=C}return this.options.layoutId&&(u.pointerEvents=h===this?Hh(c==null?void 0:c.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(KC),this.root.sharedNodes.clear()}}}function d7(t){t.updateLayout()}function f7(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:i}=t.options,c=e.source!==t.layout.source;i==="size"?ea(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],b=dr(x);x.min=r[g].min,x.max=x.min+b}):OT(i,e.layoutBox,r)&&ea(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],b=dr(r[g]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const u=Jl();pd(u,r,e.layoutBox);const f=Jl();c?pd(f,t.applyTransform(n,!0),e.measuredBox):pd(f,r,e.layoutBox);const h=!RT(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:b}=g;if(x&&b){const _=ls();gd(_,e.layoutBox,x.layoutBox);const j=ls();gd(j,r,b.layoutBox),MT(_,j)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:f,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function h7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function m7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function p7(t){t.clearSnapshot()}function KC(t){t.clearMeasurements()}function g7(t){t.isLayoutDirty=!1}function x7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function WC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function v7(t){t.resolveTargetDelta()}function y7(t){t.calcProjection()}function b7(t){t.resetSkewAndRotation()}function w7(t){t.removeLeadSnapshot()}function ZC(t,e,s){t.translate=Qt(e.translate,0,s),t.scale=Qt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function QC(t,e,s,r){t.min=Qt(e.min,s.min,r),t.max=Qt(e.max,s.max,r)}function _7(t,e,s,r){QC(t.x,e.x,s.x,r),QC(t.y,e.y,s.y,r)}function j7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const N7={duration:.45,ease:[.4,0,.1,1]},JC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),e2=JC("applewebkit/")&&!JC("chrome/")?Math.round:aa;function t2(t){t.min=e2(t.min),t.max=e2(t.max)}function S7(t){t2(t.x),t2(t.y)}function OT(t,e,s){return t==="position"||t==="preserve-aspect"&&!EF(XC(e),XC(s),.2)}function C7(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const E7=DT({attachResizeListener:(t,e)=>Md(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vx={current:void 0},$T=DT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vx.current){const t=new E7({});t.mount(window),t.setOptions({layoutScroll:!0}),Vx.current=t}return Vx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),A7={pan:{Feature:FF},drag:{Feature:qF,ProjectionNode:$T,MeasureLayout:AT}};function s2(t,e,s){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,i=r[n];i&&Jt.postRender(()=>i(e,Fd(e)))}class k7 extends Vo{mount(){const{current:e}=this.node;e&&(this.unmount=s9(e,(s,r)=>(s2(this.node,r,"Start"),n=>s2(this.node,n,"End"))))}unmount(){}}class T7 extends Vo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zd(Md(this.node.current,"focus",()=>this.onFocus()),Md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function r2(t,e,s){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),i=r[n];i&&Jt.postRender(()=>i(e,Fd(e)))}class R7 extends Vo{mount(){const{current:e}=this.node;e&&(this.unmount=o9(e,(s,r)=>(r2(this.node,r,"Start"),(n,{success:i})=>r2(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zv=new WeakMap,zx=new WeakMap,M7=t=>{const e=Zv.get(t.target);e&&e(t)},P7=t=>{t.forEach(M7)};function D7({root:t,...e}){const s=t||document;zx.has(s)||zx.set(s,{});const r=zx.get(s),n=JSON.stringify(e);return r[n]||(r[n]=new IntersectionObserver(P7,{root:t,...e})),r[n]}function O7(t,e,s){const r=D7(e);return Zv.set(t,s),r.observe(t),()=>{Zv.delete(t),r.unobserve(t)}}const $7={some:0,all:1};class L7 extends Vo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:r,amount:n="some",once:i}=e,c={root:s?s.current:void 0,rootMargin:r,threshold:typeof n=="number"?n:$7[n]},u=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),x=h?p:g;x&&x(f)};return O7(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(I7(e,s))&&this.startObserver()}unmount(){}}function I7({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const B7={inView:{Feature:L7},tap:{Feature:R7},focus:{Feature:T7},hover:{Feature:k7}},V7={layout:{ProjectionNode:$T,MeasureLayout:AT}},Qv={current:null},LT={current:!1};function z7(){if(LT.current=!0,!!Hy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Qv.current=t.matches;t.addListener(e),e()}else Qv.current=!1}const U7=new WeakMap;function q7(t,e,s){for(const r in e){const n=e[r],i=s[r];if(tr(n))t.addValue(r,n);else if(tr(i))t.addValue(r,vc(n,{owner:t}));else if(i!==n)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(n):c.hasAnimated||c.set(n)}else{const c=t.getStaticValue(r);t.addValue(r,vc(c!==void 0?c:n,{owner:t}))}}for(const r in s)e[r]===void 0&&t.removeValue(r);return e}const a2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class F7{scrapeMotionValuesFromProps(e,s,r){return{}}constructor({parent:e,props:s,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=jr.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Jt.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=u,this.blockInitialAnimation=!!i,this.isControllingVariants=mp(s),this.isVariantNode=aT(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in g){const b=g[x];f[x]!==void 0&&tr(b)&&b.set(f[x],!1)}}mount(e){this.current=e,U7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,r)=>this.bindToMotionValue(r,s)),LT.current||z7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Po(this.notifyUpdate),Po(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Rc.has(e);r&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{n(),i(),c&&c(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yc){const s=yc[e];if(!s)continue;const{isEnabled:r,Feature:n}=s;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let r=0;r<a2.length;r++){const n=a2[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,c=e[i];c&&(this.propEventSubscriptions[n]=this.on(n,c))}this.prevMotionValues=q7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const r=this.values.get(e);s!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&s!==void 0&&(r=vc(s===null?void 0:s,{owner:this}),this.addValue(e,r)),r}readValue(e,s){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(dk(r)||hk(r))?r=parseFloat(r):!c9(r)&&Do.test(s)&&(r=Yk(e,s)),this.setBaseTarget(e,tr(r)?r.get():r)),tr(r)?r.get():r}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const c=wb(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);c&&(r=c[e])}if(s&&r!==void 0)return r;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!tr(n)?n:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Wy),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class IT extends F7{constructor(){super(...arguments),this.KeyframeResolver=Zq}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:r}){delete s[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tr(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function BT(t,{style:e,vars:s},r,n){Object.assign(t.style,e,n&&n.getProjectionStyles(r));for(const i in s)t.style.setProperty(i,s[i])}function H7(t){return window.getComputedStyle(t)}class G7 extends IT{constructor(){super(...arguments),this.type="html",this.renderInstance=BT}readValueFromInstance(e,s){var r;if(Rc.has(s))return(r=this.projection)!=null&&r.isProjecting?Bv(s):gq(e,s);{const n=H7(e),i=(Jy(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return NT(e,s)}build(e,s,r){vb(e,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,s,r){return _b(e,s,r)}}const VT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X7(t,e,s,r){BT(t,e,void 0,r);for(const n in e.attrs)t.setAttribute(VT.has(n)?n:xb(n),e.attrs[n])}class Y7 extends IT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ls}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Rc.has(s)){const r=Xk(s);return r&&r.default||0}return s=VT.has(s)?s:xb(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,r){return mT(e,s,r)}build(e,s,r){uT(e,s,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,s,r,n){X7(e,s,r,n)}mount(e){this.isSVGTag=fT(e.tagName),super.mount(e)}}const K7=(t,e)=>bb(t)?new Y7(e):new G7(e,{allowProjection:t!==y.Fragment}),W7=X9({...yF,...B7,...A7,...V7},K7),Rs=v9(W7);function Z7({children:t,className:e,...s}){return a.jsx(Rs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:Be("relative overflow-hidden rounded-2xl border bg-card p-8 shadow-xl",'before:absolute before:-left-80 before:-top-80 before:h-[500px] before:w-[500px] before:rounded-full before:bg-primary/20 before:blur-3xl before:content-[""]','after:absolute after:-right-80 after:-top-80 after:h-[500px] after:w-[500px] after:rounded-full after:bg-secondary/20 after:blur-3xl after:content-[""]',e),...s,children:t})}const zT=Wt("/_public/auth")({component:Q7,validateSearch:t=>({auth:t.auth||""})});function Q7(){const[t,e]=y.useState(!0),{signInWithEmail:s,signUpWithEmail:r,loading:n,isAuthenticated:i}=qs(),c=Ot(),{auth:u}=zT.useSearch();y.useEffect(()=>{if(i){let p="/game";if(u&&typeof u=="string"&&u.trim()!==""&&u!=="true")try{const g=decodeURIComponent(u);g&&g.startsWith("/")&&!g.includes("[object")&&!g.startsWith("/auth")&&(p=g)}catch(g){console.warn("Erro ao decodificar parâmetro auth:",g),p="/game"}c({to:p})}},[i,u,c]);const f=async p=>{try{const g=await s(p);g.success||me.error("Erro ao fazer login",{description:g.error||"Ocorreu um erro inesperado"})}catch(g){me.error("Erro ao fazer login",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}},h=async p=>{try{const g={email:p.email,password:p.password,username:p.email.split("@")[0]},x=await r(g);x.success?(me.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):x.error&&x.error.includes("Email rate limit")?(me.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):me.error("Erro ao criar conta",{description:x.error||"Ocorreu um erro inesperado"})}catch(g){me.error("Erro ao criar conta",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-background via-background/95 to-background/90 transition-colors duration-300",children:a.jsx(Z7,{className:"w-full max-w-md",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t?"Login":"Criar Conta"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Entre com suas credenciais para acessar o sistema":"Preencha os dados abaixo para criar sua conta"})]}),t?a.jsx(fU,{onSubmit:f,isLoading:n.signIn}):a.jsx(hU,{onSubmit:h,isLoading:n.signUp}),a.jsx(de,{type:"button",variant:"ghost",className:"w-full",onClick:()=>e(!t),disabled:n.signIn||n.signUp,children:t?"Não tem uma conta? Criar conta":"Já tem uma conta? Fazer login"})]})})})}class J7{async getUserProfile(){try{const{data:{user:e},error:s}=await je.auth.getUser();if(s)throw s;if(!e)return{data:null,error:"Usuário não autenticado"};const{data:r,error:n}=await je.from("users").select("*").eq("uid",e.id).maybeSingle();if(n)throw n;return{data:r,error:null}}catch(e){return console.error("Erro ao buscar perfil:",e),{data:null,error:e instanceof Error?e.message:"Erro ao buscar perfil"}}}async searchUsers(e){try{let s=je.from("users").select("id",{count:"exact"});e.nome&&(s=s.ilike("nome",`%${e.nome}%`)),e.email&&(s=s.ilike("email",`%${e.email}%`)),e.role&&(s=s.eq("role",e.role)),e.ativo!==void 0&&(s=s.eq("ativo",e.ativo));const{count:r,error:n}=await s;if(n)throw n;let i=je.from("users").select("*").order("created_at",{ascending:!1});e.nome&&(i=i.ilike("nome",`%${e.nome}%`)),e.email&&(i=i.ilike("email",`%${e.email}%`)),e.role&&(i=i.eq("role",e.role)),e.ativo!==void 0&&(i=i.eq("ativo",e.ativo));const{data:c,error:u}=await i.range((e.page-1)*e.limit,e.page*e.limit-1);if(u)throw u;return{data:c,count:r||0,error:null}}catch(s){return console.error("Erro ao buscar usuários:",s),{data:null,count:0,error:s instanceof Error?s.message:"Erro ao buscar usuários"}}}async updateUser(e,s){try{let r;if(s.imagemPerfil){const i=s.imagemPerfil.name.split(".").pop(),c=`${e}-${Date.now()}.${i}`,{error:u}=await je.storage.from("profile-images").upload(c,s.imagemPerfil,{cacheControl:"3600",upsert:!0});if(u)throw u;const{data:{publicUrl:f}}=je.storage.from("profile-images").getPublicUrl(c);r=f,delete s.imagemPerfil}const{error:n}=await je.from("users").update({...s,...r&&{imagem_perfil_url:r},updated_at:new Date().toISOString()}).eq("uid",e);if(n)throw n;return{error:null}}catch(r){return console.error("Erro ao atualizar usuário:",r),{error:r instanceof Error?r.message:"Erro ao atualizar usuário"}}}}const cc=new J7;function eH(){const[t,e]=y.useState(!1),[s,r]=y.useState(null),[n,i]=y.useState(null),[c,u]=y.useState([]),f=y.useCallback(async()=>{try{e(!0),r(null);const{data:p,error:g}=await cc.getUserProfile();if(g)throw new Error(g);return p&&i(p),p}catch(p){const g=p instanceof Error?p.message:"Erro ao buscar perfil";return r(g),null}finally{e(!1)}},[]),h=y.useCallback(async p=>{try{e(!0),r(null);const{data:g,error:x}=await cc.searchUsers(p);if(x)throw new Error(x);g&&u(g)}catch(g){const x=g instanceof Error?g.message:"Erro ao buscar usuários";r(x)}finally{e(!1)}},[]);return{user:n,users:c,loading:t,error:s,getUserProfile:f,searchUsers:h}}const pp=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:s,className:Be("w-full caption-bottom text-sm",t),...e})}));pp.displayName="Table";const gp=y.forwardRef(({className:t,...e},s)=>a.jsx("thead",{ref:s,className:Be("[&_tr]:border-b",t),...e}));gp.displayName="TableHeader";const xp=y.forwardRef(({className:t,...e},s)=>a.jsx("tbody",{ref:s,className:Be("[&_tr:last-child]:border-0",t),...e}));xp.displayName="TableBody";const tH=y.forwardRef(({className:t,...e},s)=>a.jsx("tfoot",{ref:s,className:Be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));tH.displayName="TableFooter";const za=y.forwardRef(({className:t,...e},s)=>a.jsx("tr",{ref:s,className:Be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));za.displayName="TableRow";const lr=y.forwardRef(({className:t,...e},s)=>a.jsx("th",{ref:s,className:Be("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));lr.displayName="TableHead";const Ms=y.forwardRef(({className:t,...e},s)=>a.jsx("td",{ref:s,className:Be("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));Ms.displayName="TableCell";const sH=y.forwardRef(({className:t,...e},s)=>a.jsx("caption",{ref:s,className:Be("mt-4 text-sm text-muted-foreground",t),...e}));sH.displayName="TableCaption";function Jv(t,[e,s]){return Math.min(s,Math.max(e,t))}function UT(t){const e=t+"CollectionProvider",[s,r]=oa(e),[n,i]=s(e,{collectionRef:{current:null},itemMap:new Map}),c=j=>{const{scope:N,children:C}=j,E=fe.useRef(null),S=fe.useRef(new Map).current;return a.jsx(n,{scope:N,itemMap:S,collectionRef:E,children:C})};c.displayName=e;const u=t+"CollectionSlot",f=Mi(u),h=fe.forwardRef((j,N)=>{const{scope:C,children:E}=j,S=i(u,C),P=_t(N,S.collectionRef);return a.jsx(f,{ref:P,children:E})});h.displayName=u;const p=t+"CollectionItemSlot",g="data-radix-collection-item",x=Mi(p),b=fe.forwardRef((j,N)=>{const{scope:C,children:E,...S}=j,P=fe.useRef(null),R=_t(N,P),D=i(p,C);return fe.useEffect(()=>(D.itemMap.set(P,{ref:P,...S}),()=>void D.itemMap.delete(P))),a.jsx(x,{[g]:"",ref:R,children:E})});b.displayName=p;function _(j){const N=i(t+"CollectionConsumer",j);return fe.useCallback(()=>{const E=N.collectionRef.current;if(!E)return[];const S=Array.from(E.querySelectorAll(`[${g}]`));return Array.from(N.itemMap.values()).sort((D,$)=>S.indexOf(D.ref.current)-S.indexOf($.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:h,ItemSlot:b},_,r]}var rH=y.createContext(void 0);function vp(t){const e=y.useContext(rH);return t||e||"ltr"}const aH=["top","right","bottom","left"],Oo=Math.min,Or=Math.max,km=Math.round,Rh=Math.floor,Ka=t=>({x:t,y:t}),nH={left:"right",right:"left",bottom:"top",top:"bottom"},oH={start:"end",end:"start"};function ey(t,e,s){return Or(t,Oo(e,s))}function kn(t,e){return typeof t=="function"?t(e):t}function Tn(t){return t.split("-")[0]}function Mc(t){return t.split("-")[1]}function Nb(t){return t==="x"?"y":"x"}function Sb(t){return t==="y"?"height":"width"}function Ua(t){return["top","bottom"].includes(Tn(t))?"y":"x"}function Cb(t){return Nb(Ua(t))}function iH(t,e,s){s===void 0&&(s=!1);const r=Mc(t),n=Cb(t),i=Sb(n);let c=n==="x"?r===(s?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(c=Tm(c)),[c,Tm(c)]}function lH(t){const e=Tm(t);return[ty(t),e,ty(e)]}function ty(t){return t.replace(/start|end/g,e=>oH[e])}function cH(t,e,s){const r=["left","right"],n=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return s?e?n:r:e?r:n;case"left":case"right":return e?i:c;default:return[]}}function uH(t,e,s,r){const n=Mc(t);let i=cH(Tn(t),s==="start",r);return n&&(i=i.map(c=>c+"-"+n),e&&(i=i.concat(i.map(ty)))),i}function Tm(t){return t.replace(/left|right|bottom|top/g,e=>nH[e])}function dH(t){return{top:0,right:0,bottom:0,left:0,...t}}function qT(t){return typeof t!="number"?dH(t):{top:t,right:t,bottom:t,left:t}}function Rm(t){const{x:e,y:s,width:r,height:n}=t;return{width:r,height:n,top:s,left:e,right:e+r,bottom:s+n,x:e,y:s}}function n2(t,e,s){let{reference:r,floating:n}=t;const i=Ua(e),c=Cb(e),u=Sb(c),f=Tn(e),h=i==="y",p=r.x+r.width/2-n.width/2,g=r.y+r.height/2-n.height/2,x=r[u]/2-n[u]/2;let b;switch(f){case"top":b={x:p,y:r.y-n.height};break;case"bottom":b={x:p,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:g};break;case"left":b={x:r.x-n.width,y:g};break;default:b={x:r.x,y:r.y}}switch(Mc(e)){case"start":b[c]-=x*(s&&h?-1:1);break;case"end":b[c]+=x*(s&&h?-1:1);break}return b}const fH=async(t,e,s)=>{const{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:c}=s,u=i.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:g}=n2(h,r,f),x=r,b={},_=0;for(let j=0;j<u.length;j++){const{name:N,fn:C}=u[j],{x:E,y:S,data:P,reset:R}=await C({x:p,y:g,initialPlacement:r,placement:x,strategy:n,middlewareData:b,rects:h,platform:c,elements:{reference:t,floating:e}});p=E??p,g=S??g,b={...b,[N]:{...b[N],...P}},R&&_<=50&&(_++,typeof R=="object"&&(R.placement&&(x=R.placement),R.rects&&(h=R.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:n}):R.rects),{x:p,y:g}=n2(h,x,f)),j=-1)}return{x:p,y:g,placement:x,strategy:n,middlewareData:b}};async function Pd(t,e){var s;e===void 0&&(e={});const{x:r,y:n,platform:i,rects:c,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:x=!1,padding:b=0}=kn(e,t),_=qT(b),N=u[x?g==="floating"?"reference":"floating":g],C=Rm(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(N)))==null||s?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:f})),E=g==="floating"?{x:r,y:n,width:c.floating.width,height:c.floating.height}:c.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),P=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Rm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:E,offsetParent:S,strategy:f}):E);return{top:(C.top-R.top+_.top)/P.y,bottom:(R.bottom-C.bottom+_.bottom)/P.y,left:(C.left-R.left+_.left)/P.x,right:(R.right-C.right+_.right)/P.x}}const hH=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:r,placement:n,rects:i,platform:c,elements:u,middlewareData:f}=e,{element:h,padding:p=0}=kn(t,e)||{};if(h==null)return{};const g=qT(p),x={x:s,y:r},b=Cb(n),_=Sb(b),j=await c.getDimensions(h),N=b==="y",C=N?"top":"left",E=N?"bottom":"right",S=N?"clientHeight":"clientWidth",P=i.reference[_]+i.reference[b]-x[b]-i.floating[_],R=x[b]-i.reference[b],D=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let $=D?D[S]:0;(!$||!await(c.isElement==null?void 0:c.isElement(D)))&&($=u.floating[S]||i.floating[_]);const A=P/2-R/2,M=$/2-j[_]/2-1,U=Oo(g[C],M),Y=Oo(g[E],M),V=U,F=$-j[_]-Y,Q=$/2-j[_]/2+A,G=ey(V,Q,F),k=!f.arrow&&Mc(n)!=null&&Q!==G&&i.reference[_]/2-(Q<V?U:Y)-j[_]/2<0,B=k?Q<V?Q-V:Q-F:0;return{[b]:x[b]+B,data:{[b]:G,centerOffset:Q-G-B,...k&&{alignmentOffset:B}},reset:k}}}),mH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,r;const{placement:n,middlewareData:i,rects:c,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:j=!0,...N}=kn(t,e);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const C=Tn(n),E=Ua(u),S=Tn(u)===u,P=await(f.isRTL==null?void 0:f.isRTL(h.floating)),R=x||(S||!j?[Tm(u)]:lH(u)),D=_!=="none";!x&&D&&R.push(...uH(u,j,_,P));const $=[u,...R],A=await Pd(e,N),M=[];let U=((r=i.flip)==null?void 0:r.overflows)||[];if(p&&M.push(A[C]),g){const Q=iH(n,c,P);M.push(A[Q[0]],A[Q[1]])}if(U=[...U,{placement:n,overflows:M}],!M.every(Q=>Q<=0)){var Y,V;const Q=(((Y=i.flip)==null?void 0:Y.index)||0)+1,G=$[Q];if(G&&(!(g==="alignment"?E!==Ua(G):!1)||U.every(z=>z.overflows[0]>0&&Ua(z.placement)===E)))return{data:{index:Q,overflows:U},reset:{placement:G}};let k=(V=U.filter(B=>B.overflows[0]<=0).sort((B,z)=>B.overflows[1]-z.overflows[1])[0])==null?void 0:V.placement;if(!k)switch(b){case"bestFit":{var F;const B=(F=U.filter(z=>{if(D){const W=Ua(z.placement);return W===E||W==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(W=>W>0).reduce((W,L)=>W+L,0)]).sort((z,W)=>z[1]-W[1])[0])==null?void 0:F[0];B&&(k=B);break}case"initialPlacement":k=u;break}if(n!==k)return{reset:{placement:k}}}return{}}}};function o2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function i2(t){return aH.some(e=>t[e]>=0)}const pH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:r="referenceHidden",...n}=kn(t,e);switch(r){case"referenceHidden":{const i=await Pd(e,{...n,elementContext:"reference"}),c=o2(i,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:i2(c)}}}case"escaped":{const i=await Pd(e,{...n,altBoundary:!0}),c=o2(i,s.floating);return{data:{escapedOffsets:c,escaped:i2(c)}}}default:return{}}}}};async function gH(t,e){const{placement:s,platform:r,elements:n}=t,i=await(r.isRTL==null?void 0:r.isRTL(n.floating)),c=Tn(s),u=Mc(s),f=Ua(s)==="y",h=["left","top"].includes(c)?-1:1,p=i&&f?-1:1,g=kn(e,t);let{mainAxis:x,crossAxis:b,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof _=="number"&&(b=u==="end"?_*-1:_),f?{x:b*p,y:x*h}:{x:x*h,y:b*p}}const xH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,r;const{x:n,y:i,placement:c,middlewareData:u}=e,f=await gH(e,t);return c===((s=u.offset)==null?void 0:s.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:n+f.x,y:i+f.y,data:{...f,placement:c}}}}},vH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:N=>{let{x:C,y:E}=N;return{x:C,y:E}}},...f}=kn(t,e),h={x:s,y:r},p=await Pd(e,f),g=Ua(Tn(n)),x=Nb(g);let b=h[x],_=h[g];if(i){const N=x==="y"?"top":"left",C=x==="y"?"bottom":"right",E=b+p[N],S=b-p[C];b=ey(E,b,S)}if(c){const N=g==="y"?"top":"left",C=g==="y"?"bottom":"right",E=_+p[N],S=_-p[C];_=ey(E,_,S)}const j=u.fn({...e,[x]:b,[g]:_});return{...j,data:{x:j.x-s,y:j.y-r,enabled:{[x]:i,[g]:c}}}}}},yH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:r,placement:n,rects:i,middlewareData:c}=e,{offset:u=0,mainAxis:f=!0,crossAxis:h=!0}=kn(t,e),p={x:s,y:r},g=Ua(n),x=Nb(g);let b=p[x],_=p[g];const j=kn(u,e),N=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(f){const S=x==="y"?"height":"width",P=i.reference[x]-i.floating[S]+N.mainAxis,R=i.reference[x]+i.reference[S]-N.mainAxis;b<P?b=P:b>R&&(b=R)}if(h){var C,E;const S=x==="y"?"width":"height",P=["top","left"].includes(Tn(n)),R=i.reference[g]-i.floating[S]+(P&&((C=c.offset)==null?void 0:C[g])||0)+(P?0:N.crossAxis),D=i.reference[g]+i.reference[S]+(P?0:((E=c.offset)==null?void 0:E[g])||0)-(P?N.crossAxis:0);_<R?_=R:_>D&&(_=D)}return{[x]:b,[g]:_}}}},bH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,r;const{placement:n,rects:i,platform:c,elements:u}=e,{apply:f=()=>{},...h}=kn(t,e),p=await Pd(e,h),g=Tn(n),x=Mc(n),b=Ua(n)==="y",{width:_,height:j}=i.floating;let N,C;g==="top"||g==="bottom"?(N=g,C=x===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(C=g,N=x==="end"?"top":"bottom");const E=j-p.top-p.bottom,S=_-p.left-p.right,P=Oo(j-p[N],E),R=Oo(_-p[C],S),D=!e.middlewareData.shift;let $=P,A=R;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(A=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&($=E),D&&!x){const U=Or(p.left,0),Y=Or(p.right,0),V=Or(p.top,0),F=Or(p.bottom,0);b?A=_-2*(U!==0||Y!==0?U+Y:Or(p.left,p.right)):$=j-2*(V!==0||F!==0?V+F:Or(p.top,p.bottom))}await f({...e,availableWidth:A,availableHeight:$});const M=await c.getDimensions(u.floating);return _!==M.width||j!==M.height?{reset:{rects:!0}}:{}}}};function yp(){return typeof window<"u"}function Pc(t){return FT(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function en(t){var e;return(e=(FT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FT(t){return yp()?t instanceof Node||t instanceof $r(t).Node:!1}function Ea(t){return yp()?t instanceof Element||t instanceof $r(t).Element:!1}function Za(t){return yp()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function l2(t){return!yp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}function Hd(t){const{overflow:e,overflowX:s,overflowY:r,display:n}=Aa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+s)&&!["inline","contents"].includes(n)}function wH(t){return["table","td","th"].includes(Pc(t))}function bp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Eb(t){const e=Ab(),s=Ea(t)?Aa(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>s[r]?s[r]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(s.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(s.contain||"").includes(r))}function _H(t){let e=$o(t);for(;Za(e)&&!bc(e);){if(Eb(e))return e;if(bp(e))return null;e=$o(e)}return null}function Ab(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function bc(t){return["html","body","#document"].includes(Pc(t))}function Aa(t){return $r(t).getComputedStyle(t)}function wp(t){return Ea(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function $o(t){if(Pc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||l2(t)&&t.host||en(t);return l2(e)?e.host:e}function HT(t){const e=$o(t);return bc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Za(e)&&Hd(e)?e:HT(e)}function Dd(t,e,s){var r;e===void 0&&(e=[]),s===void 0&&(s=!0);const n=HT(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),c=$r(n);if(i){const u=sy(c);return e.concat(c,c.visualViewport||[],Hd(n)?n:[],u&&s?Dd(u):[])}return e.concat(n,Dd(n,[],s))}function sy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function GT(t){const e=Aa(t);let s=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const n=Za(t),i=n?t.offsetWidth:s,c=n?t.offsetHeight:r,u=km(s)!==i||km(r)!==c;return u&&(s=i,r=c),{width:s,height:r,$:u}}function kb(t){return Ea(t)?t:t.contextElement}function uc(t){const e=kb(t);if(!Za(e))return Ka(1);const s=e.getBoundingClientRect(),{width:r,height:n,$:i}=GT(e);let c=(i?km(s.width):s.width)/r,u=(i?km(s.height):s.height)/n;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const jH=Ka(0);function XT(t){const e=$r(t);return!Ab()||!e.visualViewport?jH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NH(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==$r(t)?!1:e}function Di(t,e,s,r){e===void 0&&(e=!1),s===void 0&&(s=!1);const n=t.getBoundingClientRect(),i=kb(t);let c=Ka(1);e&&(r?Ea(r)&&(c=uc(r)):c=uc(t));const u=NH(i,s,r)?XT(i):Ka(0);let f=(n.left+u.x)/c.x,h=(n.top+u.y)/c.y,p=n.width/c.x,g=n.height/c.y;if(i){const x=$r(i),b=r&&Ea(r)?$r(r):r;let _=x,j=sy(_);for(;j&&r&&b!==_;){const N=uc(j),C=j.getBoundingClientRect(),E=Aa(j),S=C.left+(j.clientLeft+parseFloat(E.paddingLeft))*N.x,P=C.top+(j.clientTop+parseFloat(E.paddingTop))*N.y;f*=N.x,h*=N.y,p*=N.x,g*=N.y,f+=S,h+=P,_=$r(j),j=sy(_)}}return Rm({width:p,height:g,x:f,y:h})}function Tb(t,e){const s=wp(t).scrollLeft;return e?e.left+s:Di(en(t)).left+s}function YT(t,e,s){s===void 0&&(s=!1);const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-(s?0:Tb(t,r)),i=r.top+e.scrollTop;return{x:n,y:i}}function SH(t){let{elements:e,rect:s,offsetParent:r,strategy:n}=t;const i=n==="fixed",c=en(r),u=e?bp(e.floating):!1;if(r===c||u&&i)return s;let f={scrollLeft:0,scrollTop:0},h=Ka(1);const p=Ka(0),g=Za(r);if((g||!g&&!i)&&((Pc(r)!=="body"||Hd(c))&&(f=wp(r)),Za(r))){const b=Di(r);h=uc(r),p.x=b.x+r.clientLeft,p.y=b.y+r.clientTop}const x=c&&!g&&!i?YT(c,f,!0):Ka(0);return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-f.scrollLeft*h.x+p.x+x.x,y:s.y*h.y-f.scrollTop*h.y+p.y+x.y}}function CH(t){return Array.from(t.getClientRects())}function EH(t){const e=en(t),s=wp(t),r=t.ownerDocument.body,n=Or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-s.scrollLeft+Tb(t);const u=-s.scrollTop;return Aa(r).direction==="rtl"&&(c+=Or(e.clientWidth,r.clientWidth)-n),{width:n,height:i,x:c,y:u}}function AH(t,e){const s=$r(t),r=en(t),n=s.visualViewport;let i=r.clientWidth,c=r.clientHeight,u=0,f=0;if(n){i=n.width,c=n.height;const h=Ab();(!h||h&&e==="fixed")&&(u=n.offsetLeft,f=n.offsetTop)}return{width:i,height:c,x:u,y:f}}function kH(t,e){const s=Di(t,!0,e==="fixed"),r=s.top+t.clientTop,n=s.left+t.clientLeft,i=Za(t)?uc(t):Ka(1),c=t.clientWidth*i.x,u=t.clientHeight*i.y,f=n*i.x,h=r*i.y;return{width:c,height:u,x:f,y:h}}function c2(t,e,s){let r;if(e==="viewport")r=AH(t,s);else if(e==="document")r=EH(en(t));else if(Ea(e))r=kH(e,s);else{const n=XT(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Rm(r)}function KT(t,e){const s=$o(t);return s===e||!Ea(s)||bc(s)?!1:Aa(s).position==="fixed"||KT(s,e)}function TH(t,e){const s=e.get(t);if(s)return s;let r=Dd(t,[],!1).filter(u=>Ea(u)&&Pc(u)!=="body"),n=null;const i=Aa(t).position==="fixed";let c=i?$o(t):t;for(;Ea(c)&&!bc(c);){const u=Aa(c),f=Eb(c);!f&&u.position==="fixed"&&(n=null),(i?!f&&!n:!f&&u.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Hd(c)&&!f&&KT(t,c))?r=r.filter(p=>p!==c):n=u,c=$o(c)}return e.set(t,r),r}function RH(t){let{element:e,boundary:s,rootBoundary:r,strategy:n}=t;const c=[...s==="clippingAncestors"?bp(e)?[]:TH(e,this._c):[].concat(s),r],u=c[0],f=c.reduce((h,p)=>{const g=c2(e,p,n);return h.top=Or(g.top,h.top),h.right=Oo(g.right,h.right),h.bottom=Oo(g.bottom,h.bottom),h.left=Or(g.left,h.left),h},c2(e,u,n));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function MH(t){const{width:e,height:s}=GT(t);return{width:e,height:s}}function PH(t,e,s){const r=Za(e),n=en(e),i=s==="fixed",c=Di(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const f=Ka(0);function h(){f.x=Tb(n)}if(r||!r&&!i)if((Pc(e)!=="body"||Hd(n))&&(u=wp(e)),r){const b=Di(e,!0,i,e);f.x=b.x+e.clientLeft,f.y=b.y+e.clientTop}else n&&h();i&&!r&&n&&h();const p=n&&!r&&!i?YT(n,u):Ka(0),g=c.left+u.scrollLeft-f.x-p.x,x=c.top+u.scrollTop-f.y-p.y;return{x:g,y:x,width:c.width,height:c.height}}function Ux(t){return Aa(t).position==="static"}function u2(t,e){if(!Za(t)||Aa(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return en(t)===s&&(s=s.ownerDocument.body),s}function WT(t,e){const s=$r(t);if(bp(t))return s;if(!Za(t)){let n=$o(t);for(;n&&!bc(n);){if(Ea(n)&&!Ux(n))return n;n=$o(n)}return s}let r=u2(t,e);for(;r&&wH(r)&&Ux(r);)r=u2(r,e);return r&&bc(r)&&Ux(r)&&!Eb(r)?s:r||_H(t)||s}const DH=async function(t){const e=this.getOffsetParent||WT,s=this.getDimensions,r=await s(t.floating);return{reference:PH(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function OH(t){return Aa(t).direction==="rtl"}const $H={convertOffsetParentRelativeRectToViewportRelativeRect:SH,getDocumentElement:en,getClippingRect:RH,getOffsetParent:WT,getElementRects:DH,getClientRects:CH,getDimensions:MH,getScale:uc,isElement:Ea,isRTL:OH};function ZT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function LH(t,e){let s=null,r;const n=en(t);function i(){var u;clearTimeout(r),(u=s)==null||u.disconnect(),s=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),i();const h=t.getBoundingClientRect(),{left:p,top:g,width:x,height:b}=h;if(u||e(),!x||!b)return;const _=Rh(g),j=Rh(n.clientWidth-(p+x)),N=Rh(n.clientHeight-(g+b)),C=Rh(p),S={rootMargin:-_+"px "+-j+"px "+-N+"px "+-C+"px",threshold:Or(0,Oo(1,f))||1};let P=!0;function R(D){const $=D[0].intersectionRatio;if($!==f){if(!P)return c();$?c(!1,$):r=setTimeout(()=>{c(!1,1e-7)},1e3)}$===1&&!ZT(h,t.getBoundingClientRect())&&c(),P=!1}try{s=new IntersectionObserver(R,{...S,root:n.ownerDocument})}catch{s=new IntersectionObserver(R,S)}s.observe(t)}return c(!0),i}function IH(t,e,s,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,h=kb(t),p=n||i?[...h?Dd(h):[],...Dd(e)]:[];p.forEach(C=>{n&&C.addEventListener("scroll",s,{passive:!0}),i&&C.addEventListener("resize",s)});const g=h&&u?LH(h,s):null;let x=-1,b=null;c&&(b=new ResizeObserver(C=>{let[E]=C;E&&E.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var S;(S=b)==null||S.observe(e)})),s()}),h&&!f&&b.observe(h),b.observe(e));let _,j=f?Di(t):null;f&&N();function N(){const C=Di(t);j&&!ZT(j,C)&&s(),j=C,_=requestAnimationFrame(N)}return s(),()=>{var C;p.forEach(E=>{n&&E.removeEventListener("scroll",s),i&&E.removeEventListener("resize",s)}),g==null||g(),(C=b)==null||C.disconnect(),b=null,f&&cancelAnimationFrame(_)}}const BH=xH,VH=vH,zH=mH,UH=bH,qH=pH,d2=hH,FH=yH,HH=(t,e,s)=>{const r=new Map,n={platform:$H,...s},i={...n.platform,_c:r};return fH(t,e,{...n,platform:i})};var GH=typeof document<"u",XH=function(){},Xh=GH?y.useLayoutEffect:XH;function Mm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,r,n;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(r=s;r--!==0;)if(!Mm(t[r],e[r]))return!1;return!0}if(n=Object.keys(t),s=n.length,s!==Object.keys(e).length)return!1;for(r=s;r--!==0;)if(!{}.hasOwnProperty.call(e,n[r]))return!1;for(r=s;r--!==0;){const i=n[r];if(!(i==="_owner"&&t.$$typeof)&&!Mm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function QT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function f2(t,e){const s=QT(t);return Math.round(e*s)/s}function qx(t){const e=y.useRef(t);return Xh(()=>{e.current=t}),e}function YH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:r=[],platform:n,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:f,open:h}=t,[p,g]=y.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[x,b]=y.useState(r);Mm(x,r)||b(r);const[_,j]=y.useState(null),[N,C]=y.useState(null),E=y.useCallback(z=>{z!==D.current&&(D.current=z,j(z))},[]),S=y.useCallback(z=>{z!==$.current&&($.current=z,C(z))},[]),P=i||_,R=c||N,D=y.useRef(null),$=y.useRef(null),A=y.useRef(p),M=f!=null,U=qx(f),Y=qx(n),V=qx(h),F=y.useCallback(()=>{if(!D.current||!$.current)return;const z={placement:e,strategy:s,middleware:x};Y.current&&(z.platform=Y.current),HH(D.current,$.current,z).then(W=>{const L={...W,isPositioned:V.current!==!1};Q.current&&!Mm(A.current,L)&&(A.current=L,Li.flushSync(()=>{g(L)}))})},[x,e,s,Y,V]);Xh(()=>{h===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,g(z=>({...z,isPositioned:!1})))},[h]);const Q=y.useRef(!1);Xh(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Xh(()=>{if(P&&(D.current=P),R&&($.current=R),P&&R){if(U.current)return U.current(P,R,F);F()}},[P,R,F,U,M]);const G=y.useMemo(()=>({reference:D,floating:$,setReference:E,setFloating:S}),[E,S]),k=y.useMemo(()=>({reference:P,floating:R}),[P,R]),B=y.useMemo(()=>{const z={position:s,left:0,top:0};if(!k.floating)return z;const W=f2(k.floating,p.x),L=f2(k.floating,p.y);return u?{...z,transform:"translate("+W+"px, "+L+"px)",...QT(k.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:W,top:L}},[s,u,k.floating,p.x,p.y]);return y.useMemo(()=>({...p,update:F,refs:G,elements:k,floatingStyles:B}),[p,F,G,k,B])}const KH=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:r,padding:n}=typeof t=="function"?t(s):t;return r&&e(r)?r.current!=null?d2({element:r.current,padding:n}).fn(s):{}:r?d2({element:r,padding:n}).fn(s):{}}}},WH=(t,e)=>({...BH(t),options:[t,e]}),ZH=(t,e)=>({...VH(t),options:[t,e]}),QH=(t,e)=>({...FH(t),options:[t,e]}),JH=(t,e)=>({...zH(t),options:[t,e]}),eG=(t,e)=>({...UH(t),options:[t,e]}),tG=(t,e)=>({...qH(t),options:[t,e]}),sG=(t,e)=>({...KH(t),options:[t,e]});var rG="Arrow",JT=y.forwardRef((t,e)=>{const{children:s,width:r=10,height:n=5,...i}=t;return a.jsx(Ze.svg,{...i,ref:e,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});JT.displayName=rG;var aG=JT;function e4(t){const[e,s]=y.useState(void 0);return vs(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let c,u;if("borderBoxSize"in i){const f=i.borderBoxSize,h=Array.isArray(f)?f[0]:f;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;s({width:c,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var Rb="Popper",[t4,Dc]=oa(Rb),[nG,s4]=t4(Rb),r4=t=>{const{__scopePopper:e,children:s}=t,[r,n]=y.useState(null);return a.jsx(nG,{scope:e,anchor:r,onAnchorChange:n,children:s})};r4.displayName=Rb;var a4="PopperAnchor",n4=y.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:r,...n}=t,i=s4(a4,s),c=y.useRef(null),u=_t(e,c);return y.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:a.jsx(Ze.div,{...n,ref:u})});n4.displayName=a4;var Mb="PopperContent",[oG,iG]=t4(Mb),o4=y.forwardRef((t,e)=>{var ue,ce,be,Ne,we,Ce;const{__scopePopper:s,side:r="bottom",sideOffset:n=0,align:i="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:x=!1,updatePositionStrategy:b="optimized",onPlaced:_,...j}=t,N=s4(Mb,s),[C,E]=y.useState(null),S=_t(e,Oe=>E(Oe)),[P,R]=y.useState(null),D=e4(P),$=(D==null?void 0:D.width)??0,A=(D==null?void 0:D.height)??0,M=r+(i!=="center"?"-"+i:""),U=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},Y=Array.isArray(h)?h:[h],V=Y.length>0,F={padding:U,boundary:Y.filter(cG),altBoundary:V},{refs:Q,floatingStyles:G,placement:k,isPositioned:B,middlewareData:z}=YH({strategy:"fixed",placement:M,whileElementsMounted:(...Oe)=>IH(...Oe,{animationFrame:b==="always"}),elements:{reference:N.anchor},middleware:[WH({mainAxis:n+A,alignmentAxis:c}),f&&ZH({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?QH():void 0,...F}),f&&JH({...F}),eG({...F,apply:({elements:Oe,rects:Qe,availableWidth:ve,availableHeight:Re})=>{const{width:ke,height:st}=Qe.reference,Ae=Oe.floating.style;Ae.setProperty("--radix-popper-available-width",`${ve}px`),Ae.setProperty("--radix-popper-available-height",`${Re}px`),Ae.setProperty("--radix-popper-anchor-width",`${ke}px`),Ae.setProperty("--radix-popper-anchor-height",`${st}px`)}}),P&&sG({element:P,padding:u}),uG({arrowWidth:$,arrowHeight:A}),x&&tG({strategy:"referenceHidden",...F})]}),[W,L]=c4(k),X=Js(_);vs(()=>{B&&(X==null||X())},[B,X]);const ae=(ue=z.arrow)==null?void 0:ue.x,ee=(ce=z.arrow)==null?void 0:ce.y,le=((be=z.arrow)==null?void 0:be.centerOffset)!==0,[ie,se]=y.useState();return vs(()=>{C&&se(window.getComputedStyle(C).zIndex)},[C]),a.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:B?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(Ne=z.transformOrigin)==null?void 0:Ne.x,(we=z.transformOrigin)==null?void 0:we.y].join(" "),...((Ce=z.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(oG,{scope:s,placedSide:W,onArrowChange:R,arrowX:ae,arrowY:ee,shouldHideArrow:le,children:a.jsx(Ze.div,{"data-side":W,"data-align":L,...j,ref:S,style:{...j.style,animation:B?void 0:"none"}})})})});o4.displayName=Mb;var i4="PopperArrow",lG={top:"bottom",right:"left",bottom:"top",left:"right"},l4=y.forwardRef(function(e,s){const{__scopePopper:r,...n}=e,i=iG(i4,r),c=lG[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(aG,{...n,ref:s,style:{...n.style,display:"block"}})})});l4.displayName=i4;function cG(t){return t!==null}var uG=t=>({name:"transformOrigin",options:t,fn(e){var N,C,E;const{placement:s,rects:r,middlewareData:n}=e,c=((N=n.arrow)==null?void 0:N.centerOffset)!==0,u=c?0:t.arrowWidth,f=c?0:t.arrowHeight,[h,p]=c4(s),g={start:"0%",center:"50%",end:"100%"}[p],x=(((C=n.arrow)==null?void 0:C.x)??0)+u/2,b=(((E=n.arrow)==null?void 0:E.y)??0)+f/2;let _="",j="";return h==="bottom"?(_=c?g:`${x}px`,j=`${-f}px`):h==="top"?(_=c?g:`${x}px`,j=`${r.floating.height+f}px`):h==="right"?(_=`${-f}px`,j=c?g:`${b}px`):h==="left"&&(_=`${r.floating.width+f}px`,j=c?g:`${b}px`),{data:{x:_,y:j}}}});function c4(t){const[e,s="center"]=t.split("-");return[e,s]}var Pb=r4,_p=n4,Db=o4,Ob=l4;function u4(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var d4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dG="VisuallyHidden",$b=y.forwardRef((t,e)=>a.jsx(Ze.span,{...t,ref:e,style:{...d4,...t.style}}));$b.displayName=dG;var fG=$b,hG=[" ","Enter","ArrowUp","ArrowDown"],mG=[" ","Enter"],Oi="Select",[jp,Np,pG]=UT(Oi),[Oc,aZ]=oa(Oi,[pG,Dc]),Sp=Dc(),[gG,zo]=Oc(Oi),[xG,vG]=Oc(Oi),f4=t=>{const{__scopeSelect:e,children:s,open:r,defaultOpen:n,onOpenChange:i,value:c,defaultValue:u,onValueChange:f,dir:h,name:p,autoComplete:g,disabled:x,required:b,form:_}=t,j=Sp(e),[N,C]=y.useState(null),[E,S]=y.useState(null),[P,R]=y.useState(!1),D=vp(h),[$,A]=Mo({prop:r,defaultProp:n??!1,onChange:i,caller:Oi}),[M,U]=Mo({prop:c,defaultProp:u,onChange:f,caller:Oi}),Y=y.useRef(null),V=N?_||!!N.closest("form"):!0,[F,Q]=y.useState(new Set),G=Array.from(F).map(k=>k.props.value).join(";");return a.jsx(Pb,{...j,children:a.jsxs(gG,{required:b,scope:e,trigger:N,onTriggerChange:C,valueNode:E,onValueNodeChange:S,valueNodeHasChildren:P,onValueNodeHasChildrenChange:R,contentId:Ha(),value:M,onValueChange:U,open:$,onOpenChange:A,dir:D,triggerPointerDownPosRef:Y,disabled:x,children:[a.jsx(jp.Provider,{scope:e,children:a.jsx(xG,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(k=>{Q(B=>new Set(B).add(k))},[]),onNativeOptionRemove:y.useCallback(k=>{Q(B=>{const z=new Set(B);return z.delete(k),z})},[]),children:s})}),V?a.jsxs($4,{"aria-hidden":!0,required:b,tabIndex:-1,name:p,autoComplete:g,value:M,onChange:k=>U(k.target.value),disabled:x,form:_,children:[M===void 0?a.jsx("option",{value:""}):null,Array.from(F)]},G):null]})})};f4.displayName=Oi;var h4="SelectTrigger",m4=y.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:r=!1,...n}=t,i=Sp(s),c=zo(h4,s),u=c.disabled||r,f=_t(e,c.onTriggerChange),h=Np(s),p=y.useRef("touch"),[g,x,b]=I4(j=>{const N=h().filter(S=>!S.disabled),C=N.find(S=>S.value===c.value),E=B4(N,j,C);E!==void 0&&c.onValueChange(E.value)}),_=j=>{u||(c.onOpenChange(!0),b()),j&&(c.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return a.jsx(_p,{asChild:!0,...i,children:a.jsx(Ze.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":L4(c.value)?"":void 0,...n,ref:f,onClick:Xe(n.onClick,j=>{j.currentTarget.focus(),p.current!=="mouse"&&_(j)}),onPointerDown:Xe(n.onPointerDown,j=>{p.current=j.pointerType;const N=j.target;N.hasPointerCapture(j.pointerId)&&N.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(_(j),j.preventDefault())}),onKeyDown:Xe(n.onKeyDown,j=>{const N=g.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&x(j.key),!(N&&j.key===" ")&&hG.includes(j.key)&&(_(),j.preventDefault())})})})});m4.displayName=h4;var p4="SelectValue",g4=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:n,children:i,placeholder:c="",...u}=t,f=zo(p4,s),{onValueNodeHasChildrenChange:h}=f,p=i!==void 0,g=_t(e,f.onValueNodeChange);return vs(()=>{h(p)},[h,p]),a.jsx(Ze.span,{...u,ref:g,style:{pointerEvents:"none"},children:L4(f.value)?a.jsx(a.Fragment,{children:c}):i})});g4.displayName=p4;var yG="SelectIcon",x4=y.forwardRef((t,e)=>{const{__scopeSelect:s,children:r,...n}=t;return a.jsx(Ze.span,{"aria-hidden":!0,...n,ref:e,children:r||"▼"})});x4.displayName=yG;var bG="SelectPortal",v4=t=>a.jsx(tp,{asChild:!0,...t});v4.displayName=bG;var $i="SelectContent",y4=y.forwardRef((t,e)=>{const s=zo($i,t.__scopeSelect),[r,n]=y.useState();if(vs(()=>{n(new DocumentFragment)},[]),!s.open){const i=r;return i?Li.createPortal(a.jsx(b4,{scope:t.__scopeSelect,children:a.jsx(jp.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(w4,{...t,ref:e})});y4.displayName=$i;var pa=10,[b4,Uo]=Oc($i),wG="SelectContentImpl",_G=Mi("SelectContent.RemoveScroll"),w4=y.forwardRef((t,e)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:c,side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:_,hideWhenDetached:j,avoidCollisions:N,...C}=t,E=zo($i,s),[S,P]=y.useState(null),[R,D]=y.useState(null),$=_t(e,ue=>P(ue)),[A,M]=y.useState(null),[U,Y]=y.useState(null),V=Np(s),[F,Q]=y.useState(!1),G=y.useRef(!1);y.useEffect(()=>{if(S)return Ty(S)},[S]),ky();const k=y.useCallback(ue=>{const[ce,...be]=V().map(Ce=>Ce.ref.current),[Ne]=be.slice(-1),we=document.activeElement;for(const Ce of ue)if(Ce===we||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ce&&R&&(R.scrollTop=0),Ce===Ne&&R&&(R.scrollTop=R.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==we))return},[V,R]),B=y.useCallback(()=>k([A,S]),[k,A,S]);y.useEffect(()=>{F&&B()},[F,B]);const{onOpenChange:z,triggerPointerDownPosRef:W}=E;y.useEffect(()=>{if(S){let ue={x:0,y:0};const ce=Ne=>{var we,Ce;ue={x:Math.abs(Math.round(Ne.pageX)-(((we=W.current)==null?void 0:we.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((Ce=W.current)==null?void 0:Ce.y)??0))}},be=Ne=>{ue.x<=10&&ue.y<=10?Ne.preventDefault():S.contains(Ne.target)||z(!1),document.removeEventListener("pointermove",ce),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",be,{capture:!0})}}},[S,z,W]),y.useEffect(()=>{const ue=()=>z(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[z]);const[L,X]=I4(ue=>{const ce=V().filter(we=>!we.disabled),be=ce.find(we=>we.ref.current===document.activeElement),Ne=B4(ce,ue,be);Ne&&setTimeout(()=>Ne.ref.current.focus())}),ae=y.useCallback((ue,ce,be)=>{const Ne=!G.current&&!be;(E.value!==void 0&&E.value===ce||Ne)&&(M(ue),Ne&&(G.current=!0))},[E.value]),ee=y.useCallback(()=>S==null?void 0:S.focus(),[S]),le=y.useCallback((ue,ce,be)=>{const Ne=!G.current&&!be;(E.value!==void 0&&E.value===ce||Ne)&&Y(ue)},[E.value]),ie=r==="popper"?ry:_4,se=ie===ry?{side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:_,hideWhenDetached:j,avoidCollisions:N}:{};return a.jsx(b4,{scope:s,content:S,viewport:R,onViewportChange:D,itemRefCallback:ae,selectedItem:A,onItemLeave:ee,itemTextRefCallback:le,focusSelectedItem:B,selectedItemText:U,position:r,isPositioned:F,searchRef:L,children:a.jsx(rp,{as:_G,allowPinchZoom:!0,children:a.jsx(ep,{asChild:!0,trapped:E.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:Xe(n,ue=>{var ce;(ce=E.trigger)==null||ce.focus({preventScroll:!0}),ue.preventDefault()}),children:a.jsx(Bd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:a.jsx(ie,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:ue=>ue.preventDefault(),...C,...se,onPlaced:()=>Q(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Xe(C.onKeyDown,ue=>{const ce=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ce&&ue.key.length===1&&X(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let Ne=V().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const we=ue.target,Ce=Ne.indexOf(we);Ne=Ne.slice(Ce+1)}setTimeout(()=>k(Ne)),ue.preventDefault()}})})})})})})});w4.displayName=wG;var jG="SelectItemAlignedPosition",_4=y.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:r,...n}=t,i=zo($i,s),c=Uo($i,s),[u,f]=y.useState(null),[h,p]=y.useState(null),g=_t(e,$=>p($)),x=Np(s),b=y.useRef(!1),_=y.useRef(!0),{viewport:j,selectedItem:N,selectedItemText:C,focusSelectedItem:E}=c,S=y.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&j&&N&&C){const $=i.trigger.getBoundingClientRect(),A=h.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),U=C.getBoundingClientRect();if(i.dir!=="rtl"){const we=U.left-A.left,Ce=M.left-we,Oe=$.left-Ce,Qe=$.width+Oe,ve=Math.max(Qe,A.width),Re=window.innerWidth-pa,ke=Jv(Ce,[pa,Math.max(pa,Re-ve)]);u.style.minWidth=Qe+"px",u.style.left=ke+"px"}else{const we=A.right-U.right,Ce=window.innerWidth-M.right-we,Oe=window.innerWidth-$.right-Ce,Qe=$.width+Oe,ve=Math.max(Qe,A.width),Re=window.innerWidth-pa,ke=Jv(Ce,[pa,Math.max(pa,Re-ve)]);u.style.minWidth=Qe+"px",u.style.right=ke+"px"}const Y=x(),V=window.innerHeight-pa*2,F=j.scrollHeight,Q=window.getComputedStyle(h),G=parseInt(Q.borderTopWidth,10),k=parseInt(Q.paddingTop,10),B=parseInt(Q.borderBottomWidth,10),z=parseInt(Q.paddingBottom,10),W=G+k+F+z+B,L=Math.min(N.offsetHeight*5,W),X=window.getComputedStyle(j),ae=parseInt(X.paddingTop,10),ee=parseInt(X.paddingBottom,10),le=$.top+$.height/2-pa,ie=V-le,se=N.offsetHeight/2,ue=N.offsetTop+se,ce=G+k+ue,be=W-ce;if(ce<=le){const we=Y.length>0&&N===Y[Y.length-1].ref.current;u.style.bottom="0px";const Ce=h.clientHeight-j.offsetTop-j.offsetHeight,Oe=Math.max(ie,se+(we?ee:0)+Ce+B),Qe=ce+Oe;u.style.height=Qe+"px"}else{const we=Y.length>0&&N===Y[0].ref.current;u.style.top="0px";const Oe=Math.max(le,G+j.offsetTop+(we?ae:0)+se)+be;u.style.height=Oe+"px",j.scrollTop=ce-le+j.offsetTop}u.style.margin=`${pa}px 0`,u.style.minHeight=L+"px",u.style.maxHeight=V+"px",r==null||r(),requestAnimationFrame(()=>b.current=!0)}},[x,i.trigger,i.valueNode,u,h,j,N,C,i.dir,r]);vs(()=>S(),[S]);const[P,R]=y.useState();vs(()=>{h&&R(window.getComputedStyle(h).zIndex)},[h]);const D=y.useCallback($=>{$&&_.current===!0&&(S(),E==null||E(),_.current=!1)},[S,E]);return a.jsx(SG,{scope:s,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:D,children:a.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:a.jsx(Ze.div,{...n,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});_4.displayName=jG;var NG="SelectPopperPosition",ry=y.forwardRef((t,e)=>{const{__scopeSelect:s,align:r="start",collisionPadding:n=pa,...i}=t,c=Sp(s);return a.jsx(Db,{...c,...i,ref:e,align:r,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ry.displayName=NG;var[SG,Lb]=Oc($i,{}),ay="SelectViewport",j4=y.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:r,...n}=t,i=Uo(ay,s),c=Lb(ay,s),u=_t(e,i.onViewportChange),f=y.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(jp.Slot,{scope:s,children:a.jsx(Ze.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Xe(n.onScroll,h=>{const p=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:x}=c;if(x!=null&&x.current&&g){const b=Math.abs(f.current-p.scrollTop);if(b>0){const _=window.innerHeight-pa*2,j=parseFloat(g.style.minHeight),N=parseFloat(g.style.height),C=Math.max(j,N);if(C<_){const E=C+b,S=Math.min(_,E),P=E-S;g.style.height=S+"px",g.style.bottom==="0px"&&(p.scrollTop=P>0?P:0,g.style.justifyContent="flex-end")}}}f.current=p.scrollTop})})})]})});j4.displayName=ay;var N4="SelectGroup",[CG,EG]=Oc(N4),AG=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=Ha();return a.jsx(CG,{scope:s,id:n,children:a.jsx(Ze.div,{role:"group","aria-labelledby":n,...r,ref:e})})});AG.displayName=N4;var S4="SelectLabel",C4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=EG(S4,s);return a.jsx(Ze.div,{id:n.id,...r,ref:e})});C4.displayName=S4;var Pm="SelectItem",[kG,E4]=Oc(Pm),A4=y.forwardRef((t,e)=>{const{__scopeSelect:s,value:r,disabled:n=!1,textValue:i,...c}=t,u=zo(Pm,s),f=Uo(Pm,s),h=u.value===r,[p,g]=y.useState(i??""),[x,b]=y.useState(!1),_=_t(e,E=>{var S;return(S=f.itemRefCallback)==null?void 0:S.call(f,E,r,n)}),j=Ha(),N=y.useRef("touch"),C=()=>{n||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(kG,{scope:s,value:r,disabled:n,textId:j,isSelected:h,onItemTextChange:y.useCallback(E=>{g(S=>S||((E==null?void 0:E.textContent)??"").trim())},[]),children:a.jsx(jp.ItemSlot,{scope:s,value:r,disabled:n,textValue:p,children:a.jsx(Ze.div,{role:"option","aria-labelledby":j,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...c,ref:_,onFocus:Xe(c.onFocus,()=>b(!0)),onBlur:Xe(c.onBlur,()=>b(!1)),onClick:Xe(c.onClick,()=>{N.current!=="mouse"&&C()}),onPointerUp:Xe(c.onPointerUp,()=>{N.current==="mouse"&&C()}),onPointerDown:Xe(c.onPointerDown,E=>{N.current=E.pointerType}),onPointerMove:Xe(c.onPointerMove,E=>{var S;N.current=E.pointerType,n?(S=f.onItemLeave)==null||S.call(f):N.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Xe(c.onPointerLeave,E=>{var S;E.currentTarget===document.activeElement&&((S=f.onItemLeave)==null||S.call(f))}),onKeyDown:Xe(c.onKeyDown,E=>{var P;((P=f.searchRef)==null?void 0:P.current)!==""&&E.key===" "||(mG.includes(E.key)&&C(),E.key===" "&&E.preventDefault())})})})})});A4.displayName=Pm;var td="SelectItemText",k4=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:r,style:n,...i}=t,c=zo(td,s),u=Uo(td,s),f=E4(td,s),h=vG(td,s),[p,g]=y.useState(null),x=_t(e,C=>g(C),f.onItemTextChange,C=>{var E;return(E=u.itemTextRefCallback)==null?void 0:E.call(u,C,f.value,f.disabled)}),b=p==null?void 0:p.textContent,_=y.useMemo(()=>a.jsx("option",{value:f.value,disabled:f.disabled,children:b},f.value),[f.disabled,f.value,b]),{onNativeOptionAdd:j,onNativeOptionRemove:N}=h;return vs(()=>(j(_),()=>N(_)),[j,N,_]),a.jsxs(a.Fragment,{children:[a.jsx(Ze.span,{id:f.textId,...i,ref:x}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Li.createPortal(i.children,c.valueNode):null]})});k4.displayName=td;var T4="SelectItemIndicator",R4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return E4(T4,s).isSelected?a.jsx(Ze.span,{"aria-hidden":!0,...r,ref:e}):null});R4.displayName=T4;var ny="SelectScrollUpButton",M4=y.forwardRef((t,e)=>{const s=Uo(ny,t.__scopeSelect),r=Lb(ny,t.__scopeSelect),[n,i]=y.useState(!1),c=_t(e,r.onScrollButtonChange);return vs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollTop>0;i(h)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?a.jsx(D4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});M4.displayName=ny;var oy="SelectScrollDownButton",P4=y.forwardRef((t,e)=>{const s=Uo(oy,t.__scopeSelect),r=Lb(oy,t.__scopeSelect),[n,i]=y.useState(!1),c=_t(e,r.onScrollButtonChange);return vs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollHeight-f.clientHeight,p=Math.ceil(f.scrollTop)<h;i(p)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?a.jsx(D4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});P4.displayName=oy;var D4=y.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:r,...n}=t,i=Uo("SelectScrollButton",s),c=y.useRef(null),u=Np(s),f=y.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return y.useEffect(()=>()=>f(),[f]),vs(()=>{var p;const h=u().find(g=>g.ref.current===document.activeElement);(p=h==null?void 0:h.ref.current)==null||p.scrollIntoView({block:"nearest"})},[u]),a.jsx(Ze.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:Xe(n.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:Xe(n.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:Xe(n.onPointerLeave,()=>{f()})})}),TG="SelectSeparator",O4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t;return a.jsx(Ze.div,{"aria-hidden":!0,...r,ref:e})});O4.displayName=TG;var iy="SelectArrow",RG=y.forwardRef((t,e)=>{const{__scopeSelect:s,...r}=t,n=Sp(s),i=zo(iy,s),c=Uo(iy,s);return i.open&&c.position==="popper"?a.jsx(Ob,{...n,...r,ref:e}):null});RG.displayName=iy;var MG="SelectBubbleInput",$4=y.forwardRef(({__scopeSelect:t,value:e,...s},r)=>{const n=y.useRef(null),i=_t(r,n),c=u4(e);return y.useEffect(()=>{const u=n.current;if(!u)return;const f=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==e&&p){const g=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(g)}},[c,e]),a.jsx(Ze.select,{...s,style:{...d4,...s.style},ref:i,defaultValue:e})});$4.displayName=MG;function L4(t){return t===""||t===void 0}function I4(t){const e=Js(t),s=y.useRef(""),r=y.useRef(0),n=y.useCallback(c=>{const u=s.current+c;e(u),function f(h){s.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>f(""),1e3))}(u)},[e]),i=y.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,i]}function B4(t,e,s){const n=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=s?t.indexOf(s):-1;let c=PG(t,Math.max(i,0));n.length===1&&(c=c.filter(h=>h!==s));const f=c.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return f!==s?f:void 0}function PG(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var DG=f4,V4=m4,OG=g4,$G=x4,LG=v4,z4=y4,IG=j4,U4=C4,q4=A4,BG=k4,VG=R4,F4=M4,H4=P4,G4=O4;const xi=DG,vi=OG,po=y.forwardRef(({className:t,children:e,...s},r)=>a.jsxs(V4,{ref:r,className:Be("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,a.jsx($G,{asChild:!0,children:a.jsx(Ro,{className:"h-4 w-4 opacity-50"})})]}));po.displayName=V4.displayName;const X4=y.forwardRef(({className:t,...e},s)=>a.jsx(F4,{ref:s,className:Be("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(xc,{className:"h-4 w-4"})}));X4.displayName=F4.displayName;const Y4=y.forwardRef(({className:t,...e},s)=>a.jsx(H4,{ref:s,className:Be("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(Ro,{className:"h-4 w-4"})}));Y4.displayName=H4.displayName;const go=y.forwardRef(({className:t,children:e,position:s="popper",...r},n)=>a.jsx(LG,{children:a.jsxs(z4,{ref:n,className:Be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[a.jsx(X4,{}),a.jsx(IG,{className:Be("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(Y4,{})]})}));go.displayName=z4.displayName;const zG=y.forwardRef(({className:t,...e},s)=>a.jsx(U4,{ref:s,className:Be("px-2 py-1.5 text-sm font-semibold",t),...e}));zG.displayName=U4.displayName;const Vt=y.forwardRef(({className:t,children:e,...s},r)=>a.jsxs(q4,{ref:r,className:Be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[a.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(VG,{children:a.jsx(Ny,{className:"h-4 w-4"})})}),a.jsx(BG,{children:e})]}));Vt.displayName=q4.displayName;const UG=y.forwardRef(({className:t,...e},s)=>a.jsx(G4,{ref:s,className:Be("-mx-1 my-1 h-px bg-muted",t),...e}));UG.displayName=G4.displayName;const De=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("w-full max-w-full overflow-hidden rounded-xl border bg-card text-card-foreground shadow",t),...e}));De.displayName="Card";const ft=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("flex flex-col space-y-1.5 p-4 sm:p-6",t),...e}));ft.displayName="CardHeader";const pt=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("break-words font-semibold leading-none tracking-tight",t),...e}));pt.displayName="CardTitle";const Dm=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("break-words text-sm text-muted-foreground",t),...e}));Dm.displayName="CardDescription";const He=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("w-full p-4 sm:p-6",t),...e}));He.displayName="CardContent";const Ib=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("flex flex-wrap items-center gap-2 p-4 pt-0 sm:p-6 sm:pt-0",t),...e}));Ib.displayName="CardFooter";function K4({children:t}){const e=Ot(),{user:s,loading:r}=qs();return y.useEffect(()=>{!r.onAuthUserChanged&&s&&s.role!=="ADMIN"&&(me.error("Você não tem permissão para acessar esta página"),e({to:"/403"}))},[s,r.onAuthUserChanged,e]),r.onAuthUserChanged||!s?a.jsx(Ri,{}):s.role!=="ADMIN"?a.jsx(a.Fragment,{}):t}const qG=Id("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function qe({className:t,variant:e,...s}){return a.jsx("div",{className:Be(qG({variant:e}),t),...s})}const FG={ADMIN:"Administrador",PLAYER:"Jogador"},HG=Wt("/_authenticated/users")({component:GG});function GG(){const t=Ot(),{users:e,loading:s,searchUsers:r}=eH(),[n,i]=y.useState({page:1,limit:10});y.useEffect(()=>{r(n)},[n,r]);const c=u=>{switch(u){case"ADMIN":return"bg-red-500";case"PLAYER":return"bg-blue-500";default:return"bg-gray-500"}};return a.jsx(K4,{children:a.jsx("div",{className:"container mx-auto py-8",children:a.jsxs(De,{children:[a.jsx(ft,{children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsx(pt,{children:"Usuários"})})}),a.jsxs(He,{children:[a.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[a.jsx(Ps,{placeholder:"Nome",value:n.nome||"",onChange:u=>i({...n,nome:u.target.value})}),a.jsx(Ps,{placeholder:"Email",value:n.email||"",onChange:u=>i({...n,email:u.target.value})}),a.jsxs(xi,{value:n.role,onValueChange:u=>i({...n,role:u}),children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Tipo de Usuário"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"ADMIN",children:"Administrador"}),a.jsx(Vt,{value:"PLAYER",children:"Jogador"})]})]})]}),a.jsx("div",{className:"rounded-md border",children:a.jsxs(pp,{children:[a.jsx(gp,{children:a.jsxs(za,{children:[a.jsx(lr,{children:"Nome"}),a.jsx(lr,{children:"Email"}),a.jsx(lr,{children:"Tipo"}),a.jsx(lr,{children:"Maior Andar"}),a.jsx(lr,{children:"Total de Jogos"}),a.jsx(lr,{children:"Vitórias"}),a.jsx(lr,{children:"Ações"})]})}),a.jsx(xp,{children:s?a.jsx(za,{children:a.jsx(Ms,{colSpan:7,className:"text-center",children:"Carregando..."})}):e.length===0?a.jsx(za,{children:a.jsx(Ms,{colSpan:7,className:"text-center",children:"Nenhum usuário encontrado"})}):e.map(u=>a.jsxs(za,{children:[a.jsx(Ms,{children:u.nome}),a.jsx(Ms,{children:u.email}),a.jsx(Ms,{children:a.jsx(qe,{className:c(u.role),children:FG[u.role]})}),a.jsx(Ms,{children:u.highest_floor}),a.jsx(Ms,{children:u.total_games}),a.jsx(Ms,{children:u.total_victories}),a.jsx(Ms,{children:a.jsx(de,{variant:"ghost",onClick:()=>t({to:`/users/${u.id}`}),children:"Visualizar"})})]},u.id))})]})})]})]})})})}var XG=D2();function YG(){return XG.useSyncExternalStore(KG,()=>!0,()=>!1)}function KG(){return()=>{}}var Bb="Avatar",[WG,nZ]=oa(Bb),[ZG,W4]=WG(Bb),Z4=y.forwardRef((t,e)=>{const{__scopeAvatar:s,...r}=t,[n,i]=y.useState("idle");return a.jsx(ZG,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:a.jsx(Ze.span,{...r,ref:e})})});Z4.displayName=Bb;var Q4="AvatarImage",J4=y.forwardRef((t,e)=>{const{__scopeAvatar:s,src:r,onLoadingStatusChange:n=()=>{},...i}=t,c=W4(Q4,s),u=QG(r,i),f=Js(h=>{n(h),c.onImageLoadingStatusChange(h)});return vs(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?a.jsx(Ze.img,{...i,ref:e,src:r}):null});J4.displayName=Q4;var eR="AvatarFallback",tR=y.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:r,...n}=t,i=W4(eR,s),[c,u]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>u(!0),r);return()=>window.clearTimeout(f)}},[r]),c&&i.imageLoadingStatus!=="loaded"?a.jsx(Ze.span,{...n,ref:e}):null});tR.displayName=eR;function h2(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function QG(t,{referrerPolicy:e,crossOrigin:s}){const r=YG(),n=y.useRef(null),i=r?(n.current||(n.current=new window.Image),n.current):null,[c,u]=y.useState(()=>h2(i,t));return vs(()=>{u(h2(i,t))},[i,t]),vs(()=>{const f=g=>()=>{u(g)};if(!i)return;const h=f("loaded"),p=f("error");return i.addEventListener("load",h),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",h),i.removeEventListener("error",p)}},[i,s,e]),c}var sR=Z4,rR=J4,aR=tR;const nR=y.forwardRef(({className:t,...e},s)=>a.jsx(sR,{ref:s,className:Be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));nR.displayName=sR.displayName;const oR=y.forwardRef(({className:t,...e},s)=>a.jsx(rR,{ref:s,className:Be("aspect-square h-full w-full",t),...e}));oR.displayName=rR.displayName;const iR=y.forwardRef(({className:t,...e},s)=>a.jsx(aR,{ref:s,className:Be("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));iR.displayName=aR.displayName;function JG(){const{isInstalled:t,canInstall:e}=nA(),[s,r]=y.useState(!0),[n,i]=y.useState(!1);y.useEffect(()=>{const u=()=>r(navigator.onLine);return window.addEventListener("online",u),window.addEventListener("offline",u),(()=>{const h=window.matchMedia("(display-mode: standalone)").matches,p=window.matchMedia("(display-mode: fullscreen)").matches;i(h||p)})(),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",u)}},[]);const c=[{name:"Modo Offline",status:"serviceWorker"in navigator,icon:s?t8:JB,description:s?"Online":"Offline"},{name:"PWA Instalado",status:t,icon:t?yv:DE,description:t?"Instalado":e?"Disponível":"Não disponível"},{name:"Modo Tela Cheia",status:n,icon:uS,description:n?"Ativo":"Navegador"},{name:"Service Worker",status:"serviceWorker"in navigator,icon:"serviceWorker"in navigator?yv:pm,description:"serviceWorker"in navigator?"Suportado":"Não suportado"}];return a.jsxs(De,{className:"w-full max-w-md",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(uS,{className:"h-5 w-5"}),"Status PWA"]})}),a.jsxs(He,{className:"space-y-3",children:[c.map(u=>{const f=u.icon;return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(f,{className:`h-4 w-4 ${u.status?"text-green-500":"text-red-500"}`}),a.jsx("span",{className:"text-sm font-medium",children:u.name})]}),a.jsx(qe,{variant:u.status?"default":"secondary",children:u.description})]},u.name)}),!s&&a.jsx("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-md",children:a.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"🌐 Você está offline! O jogo ainda pode funcionar com recursos em cache."})})]})]})}const eX=Gm({nome:Ws().min(3,"Nome deve ter no mínimo 3 caracteres"),tipo_pessoa:FO(["PF","PJ"]),documento:Ws().optional(),telefone:Ws().optional(),data_nascimento:Ws().optional()}),tX=Wt("/_authenticated/profile")({component:sX});function sX(){var x;const{user:t}=qs(),e=Ot(),[s,r]=y.useState(null),[n,i]=y.useState(!0),c=y.useRef(null),[u,f]=y.useState(null),h=Vy({resolver:zy(eX),defaultValues:{nome:"",tipo_pessoa:"PF"}});y.useEffect(()=>{(async()=>{try{i(!0);const{data:_,error:j}=await cc.getUserProfile();if(j){me.error("Erro",{description:j});return}_&&(r(_),h.reset({nome:_.nome,tipo_pessoa:_.tipo_pessoa,documento:_.documento,telefone:_.telefone,data_nascimento:_.data_nascimento}))}catch(_){me.error("Erro",{description:_ instanceof Error?_.message:"Não foi possível carregar seu perfil"})}finally{i(!1)}})()},[h]);const p=async b=>{if(!(!(t!=null&&t.id)||!s))try{const{error:_}=await cc.updateUser(t.id,{...b,data_nascimento:b.data_nascimento?new Date(b.data_nascimento):void 0,imagemPerfil:u||void 0});if(_)throw new Error(_);const{data:j,error:N}=await cc.getUserProfile();if(N)throw new Error(N);j&&r(j),me.success("Sucesso",{description:"Perfil atualizado com sucesso!"}),f(null)}catch(_){me.error("Erro",{description:_ instanceof Error?_.message:"Erro ao atualizar perfil"})}},g=b=>{var j;const _=(j=b.target.files)==null?void 0:j[0];_&&f(_)};return n?a.jsx("div",{className:"container mx-auto px-4 py-6",children:a.jsx(De,{children:a.jsx(ft,{children:a.jsx(pt,{children:"Carregando..."})})})}):a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>e({to:"/game"}),className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),a.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Perfil"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie suas informações pessoais"})]})]})}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(De,{children:[a.jsxs(ft,{children:[a.jsx(pt,{children:"Foto de Perfil"}),a.jsx(Dm,{children:"Atualize sua foto de perfil"})]}),a.jsx(He,{children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(nR,{className:"h-24 w-24",children:[a.jsx(oR,{src:s==null?void 0:s.imagem_perfil_url}),a.jsx(iR,{children:(x=s==null?void 0:s.nome)==null?void 0:x.charAt(0)})]}),a.jsx(Ps,{type:"file",ref:c,accept:"image/*",onChange:g,className:"max-w-xs"})]})})]}),a.jsxs(De,{children:[a.jsxs(ft,{children:[a.jsx(pt,{children:"Informações Pessoais"}),a.jsx(Dm,{children:"Atualize suas informações pessoais"})]}),a.jsx(He,{children:a.jsx(Uy,{...h,children:a.jsxs("form",{onSubmit:h.handleSubmit(p),className:"space-y-4",children:[a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsx(Ba,{control:h.control,name:"nome",render:({field:b})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Nome *"}),a.jsx(_a,{children:a.jsx(Ps,{...b})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:h.control,name:"tipo_pessoa",render:({field:b})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Tipo de Pessoa *"}),a.jsxs(xi,{onValueChange:b.onChange,defaultValue:b.value,children:[a.jsx(_a,{children:a.jsx(po,{children:a.jsx(vi,{placeholder:"Selecione o tipo de pessoa"})})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"PF",children:"Pessoa Física"}),a.jsx(Vt,{value:"PJ",children:"Pessoa Jurídica"})]})]}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:h.control,name:"documento",render:({field:b})=>a.jsxs(ba,{children:[a.jsx(wa,{children:h.watch("tipo_pessoa")==="PF"?"CPF":"CNPJ"}),a.jsx(_a,{children:a.jsx(Ps,{...b,value:b.value||""})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:h.control,name:"telefone",render:({field:b})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Telefone"}),a.jsx(_a,{children:a.jsx(Ps,{...b,value:b.value||""})}),a.jsx(ja,{})]})}),a.jsx(Ba,{control:h.control,name:"data_nascimento",render:({field:b})=>a.jsxs(ba,{children:[a.jsx(wa,{children:"Data de Nascimento"}),a.jsx(_a,{children:a.jsx(Ps,{type:"date",...b,value:b.value||""})}),a.jsx(ja,{})]})})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(de,{type:"submit",children:"Salvar"})})]})})})]}),a.jsx(JG,{})]})]})}function rX(){return a.jsxs(De,{className:"w-full max-w-md",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(wI,{className:"h-5 w-5 text-primary"}),"Sobre Tower Trials"]})}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Um jogo de aventura em que você sobe uma torre mágica, enfrentando inimigos cada vez mais fortes em cada andar. Quanto mais alto você chegar, melhor será sua posição no ranking."}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-4",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[a.jsx("div",{className:"mt-1",children:a.jsx(iI,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-1",children:"Progressão na Torre"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Cada andar apresenta um inimigo mais forte. A dificuldade aumenta conforme você sobe, mas você recupera um pouco de HP a cada inimigo derrotado."})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[a.jsx("div",{className:"mt-1",children:a.jsx(Tt,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-1",children:"Ataque"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ataque direto ao inimigo, causando dano baseado no seu valor de ataque menos a defesa do inimigo."})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[a.jsx("div",{className:"mt-1",children:a.jsx(bt,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-1",children:"Defesa"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aumenta temporariamente sua defesa, reduzindo o dano recebido no próximo ataque do inimigo."})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[a.jsx("div",{className:"mt-1",children:a.jsx(At,{className:"h-5 w-5 text-primary"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-1",children:"Habilidade Especial"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Causa o dobro do seu dano de ataque, mas tem um cooldown de 3 turnos antes de poder ser usada novamente."})]})]})]})]})]})}const aX=Wt("/_authenticated/game")({component:nX});function nX(){return Ii().pathname==="/game"?a.jsx(oX,{}):a.jsx(Lo,{})}function oX(){const t=Ot(),{user:e}=qs(),[s,r]=y.useState(!1),n=()=>{if(!e){t({to:"/auth",search:{auth:"true"}});return}t({to:"/game/play"})},i=()=>{t({to:"/game/ranking"})},c=()=>{t({to:"/game/play/hub/cemetery",search:{character:""}})};return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:[a.jsxs("div",{className:"w-full max-w-md text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"Tower Trials"}),a.jsx("p",{className:"text-foreground/80",children:"Suba a torre mágica, derrote inimigos e alcance o andar mais alto possível!"})]}),s?a.jsxs("div",{className:"w-full max-w-md mb-4",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx(de,{variant:"ghost",size:"sm",className:"p-1 h-8 w-8",onClick:()=>r(!1),children:a.jsx(zi,{className:"h-5 w-5"})})}),a.jsx(rX,{})]}):a.jsxs(De,{className:"w-full max-w-md mb-4",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-center",children:"Menu Principal"})}),a.jsxs(He,{className:"space-y-4",children:[a.jsx(de,{onClick:n,className:"w-full py-6 text-lg cursor-pointer",size:"lg",children:e?"Jogar":"Entrar para Jogar"}),a.jsx(de,{onClick:i,className:"w-full py-6 text-lg cursor-pointer",variant:"outline",size:"lg",children:"Ranking"}),e&&a.jsxs(de,{onClick:c,className:"w-full py-4 text-base border border-red-500/20 bg-red-500/5 hover:bg-red-500/10 text-red-400 hover:text-red-300 cursor-pointer",variant:"ghost",size:"lg",children:[a.jsx(Qs,{className:"h-5 w-5 mr-2"}),"Cemitério"]})]}),a.jsxs(Ib,{className:"flex justify-between",children:[a.jsxs(de,{variant:"ghost",size:"sm",className:"flex items-center gap-1 cursor-pointer",onClick:()=>r(!0),children:[a.jsx(sB,{className:"h-4 w-4"}),a.jsx("span",{children:"Como Jogar"})]}),e?a.jsxs("div",{className:"text-sm text-muted-foreground",children:[a.jsx("span",{className:"font-medium",children:e.username||e.email})," |",a.jsx(_o,{to:"/logout",className:"text-primary ml-1 hover:underline",children:"Sair"})]}):a.jsx(_o,{to:"/auth",search:{auth:"true"},children:a.jsx(de,{variant:"ghost",size:"sm",className:"cursor-pointer",children:"Entrar / Criar Conta"})})]})]})]})}const iX=Wt("/_authenticated/403")({component:lX});function lX(){return a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx("h1",{children:"A página que você tentou acessar não existe ou você não possui a permissão necessária."})})}const cX=Wt("/_public/auth/verify-email")({component:uX,validateSearch:t=>({auth:t.auth||""})});function uX(){const{user:t}=qs();return a.jsx("div",{className:"container mx-auto flex min-h-screen items-center justify-center px-4",children:a.jsxs(De,{className:"w-full max-w-md",children:[a.jsx(ft,{children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(dB,{className:"h-8 w-8 text-primary"}),a.jsxs("div",{children:[a.jsx(pt,{children:"Verifique seu Email"}),a.jsx(Dm,{children:"Enviamos um link de confirmação para seu email"})]})]})}),a.jsxs(He,{className:"space-y-6",children:[a.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[a.jsxs("p",{className:"mb-2",children:["Olá ",a.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email}),","]}),a.jsx("p",{className:"mb-2",children:"Para sua segurança, enviamos um email de confirmação para o endereço fornecido."}),a.jsx("p",{children:"Por favor, siga estas etapas:"}),a.jsxs("ol",{className:"ml-4 mt-2 list-decimal space-y-1",children:[a.jsx("li",{children:"Verifique sua caixa de entrada"}),a.jsx("li",{children:"Clique no link de confirmação no email"}),a.jsx("li",{children:"Retorne aqui para fazer login"})]})]}),a.jsx("div",{className:"space-y-4 text-sm text-muted-foreground",children:a.jsx("p",{children:"Não recebeu o email? Verifique sua pasta de spam ou aguarde alguns minutos."})}),a.jsx("div",{className:"flex flex-col space-y-2",children:a.jsx(_o,{to:"/auth",search:{auth:"true"},children:a.jsxs(de,{variant:"outline",className:"w-full",children:[a.jsx(hs,{className:"mr-2 h-4 w-4"}),"Voltar para o Login"]})})})]})]})})}class sc{static async saveScore(e){try{const{data:s,error:r}=await je.rpc("save_ranking_entry",{p_user_id:e.user_id,p_player_name:e.player_name,p_floor:e.floor,p_character_level:e.character_level||1,p_character_gold:e.character_gold||0,p_character_alive:e.character_alive??!0});if(r)throw r;return{data:s,error:null}}catch(s){return console.error("Erro ao salvar no ranking:",s),{data:"",error:s instanceof Error?s.message:"Erro ao salvar no ranking"}}}static async getGlobalRanking(e="floor",s=10,r="all",n="",i=1){try{const c=(i-1)*s;console.log(`[RankingService] Buscando ranking global - modo: ${e}, filtro: ${r}, nome: ${n}, página: ${i}, limite: ${s}`);let u;switch(e){case"floor":u="get_dynamic_ranking_by_highest_floor";break;case"level":u="get_dynamic_ranking_by_level";break;case"gold":u="get_dynamic_ranking_by_gold";break;default:u="get_dynamic_ranking_by_floor"}console.log(`[RankingService] Chamando função: ${u}`);const{data:f,error:h}=await je.rpc(u,{p_limit:s,p_status_filter:r,p_name_filter:n,p_offset:c});if(h)throw console.error(`[RankingService] Erro na função ${u}:`,h),h;return console.log("[RankingService] Dados recebidos:",(f==null?void 0:f.length)||0,"entradas"),console.log("[RankingService] Primeiras 3 entradas:",f==null?void 0:f.slice(0,3)),{data:f||[],error:null}}catch(c){return console.error("Erro ao buscar ranking global:",c),{data:[],error:c instanceof Error?c.message:"Erro ao buscar ranking"}}}static async countRankingEntries(e="all",s=""){try{console.log(`[RankingService] Contando entradas - filtro: ${e}, nome: ${s}`);const{data:r,error:n}=await je.rpc("count_ranking_entries",{p_status_filter:e,p_name_filter:s});if(n)throw console.error("[RankingService] Erro ao contar entradas:",n),n;return console.log(`[RankingService] Total de entradas: ${r}`),{data:r||0,error:null}}catch(r){return console.error("Erro ao contar entradas do ranking:",r),{data:0,error:r instanceof Error?r.message:"Erro ao contar entradas"}}}static async getUserRanking(e,s=10){try{console.log(`[RankingService] Buscando histórico do usuário: ${e}, limite: ${s}`);const{data:r,error:n}=await je.rpc("get_dynamic_user_ranking_history",{p_user_id:e,p_limit:s});if(n)throw console.error("[RankingService] Erro no histórico do usuário:",n),n;return console.log("[RankingService] Histórico do usuário recebido:",(r==null?void 0:r.length)||0,"entradas"),{data:r||[],error:null}}catch(r){return console.error("Erro ao buscar ranking do usuário:",r),{data:[],error:r instanceof Error?r.message:"Erro ao buscar ranking do usuário"}}}static async getUserStats(e){try{console.log(`[RankingService] Buscando estatísticas do usuário: ${e}`);const{data:s,error:r}=await je.rpc("get_dynamic_user_stats",{p_user_id:e}).single();if(r)throw console.error("[RankingService] Erro nas estatísticas do usuário:",r),r;const n=s,i={bestFloor:(n==null?void 0:n.best_floor)||0,bestLevel:(n==null?void 0:n.best_level)||1,bestGold:(n==null?void 0:n.best_gold)||0,totalRuns:(n==null?void 0:n.total_runs)||0,aliveCharacters:(n==null?void 0:n.alive_characters)||0};return console.log("[RankingService] Estatísticas do usuário recebidas:",i),{data:i,error:null}}catch(s){return console.error("Erro ao buscar estatísticas do usuário:",s),{data:{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0},error:s instanceof Error?s.message:"Erro ao buscar estatísticas"}}}static async testRankingSystem(e){try{const{data:s,error:r}=await je.rpc("test_ranking_system",{p_user_id:e||null});if(r)throw r;return{data:s||[],error:null}}catch(s){return console.error("Erro ao testar sistema de ranking:",s),{data:[],error:s instanceof Error?s.message:"Erro ao testar ranking"}}}static async syncAllRankings(){try{const{data:e,error:s}=await je.rpc("refresh_all_rankings");if(s)throw s;return{data:e||"Sincronização concluída",error:null}}catch(e){return console.error("Erro ao sincronizar rankings:",e),{data:"",error:e instanceof Error?e.message:"Erro ao sincronizar rankings"}}}}const dX={ADMIN:"Administrador",PLAYER:"Jogador"},lR=Wt("/_authenticated/users/$id")({component:fX});function fX(){const{id:t}=lR.useParams(),[e,s]=y.useState(null),[r,n]=y.useState([]),[i,c]=y.useState(!0),[u,f]=y.useState(null);return y.useEffect(()=>{(async()=>{try{c(!0),f(null);const{data:p,error:g}=await cc.searchUsers({page:1,limit:1,email:t});if(g){f(`Erro ao buscar usuário: ${g}`);return}if(!p||p.length===0){f("Usuário não encontrado");return}const x=p[0];s(x);const{data:b}=await sc.getUserRanking(x.uid);n(b||[])}catch(p){console.error("Erro ao carregar dados:",p),f("Erro ao carregar dados do usuário")}finally{c(!1)}})()},[t]),i?a.jsx("div",{children:"Carregando..."}):u?a.jsx("div",{className:"text-red-500",children:u}):e?a.jsx(K4,{children:a.jsxs("div",{className:"container mx-auto py-8",children:[a.jsxs(De,{className:"mb-8",children:[a.jsx(ft,{children:a.jsx(pt,{children:"Detalhes do Usuário"})}),a.jsx(He,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Nome"}),a.jsx("p",{className:"text-lg",children:e.nome})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Email"}),a.jsx("p",{className:"text-lg",children:e.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Tipo"}),a.jsx(qe,{className:e.role==="ADMIN"?"bg-red-500":"bg-blue-500",children:dX[e.role]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Status"}),a.jsx(qe,{variant:e.ativo?"default":"destructive",children:e.ativo?"Ativo":"Inativo"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Maior Andar Alcançado"}),a.jsx("p",{className:"text-lg",children:e.highest_floor})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Total de Jogos"}),a.jsx("p",{className:"text-lg",children:e.total_games})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Vitórias"}),a.jsx("p",{className:"text-lg",children:e.total_victories})]})]})})]}),a.jsxs(De,{children:[a.jsx(ft,{children:a.jsx(pt,{children:"Histórico de Rankings"})}),a.jsx(He,{children:a.jsx("div",{className:"rounded-md border",children:a.jsxs(pp,{children:[a.jsx(gp,{children:a.jsxs(za,{children:[a.jsx(lr,{children:"Andar Alcançado"}),a.jsx(lr,{children:"Data"})]})}),a.jsx(xp,{children:r.length===0?a.jsx(za,{children:a.jsx(Ms,{colSpan:2,className:"text-center",children:"Nenhum ranking encontrado"})}):r.map(h=>a.jsxs(za,{children:[a.jsx(Ms,{children:h.highest_floor}),a.jsx(Ms,{children:h.created_at?new Date(h.created_at).toLocaleDateString("pt-BR"):"-"})]},h.id))})]})})})]})]})}):a.jsx("div",{children:"Usuário não encontrado"})}const hX=({activeMode:t,onModeChange:e,statusFilter:s,onStatusFilterChange:r,nameFilter:n,onNameFilterChange:i,currentPage:c,totalPages:u,onPageChange:f,isLoading:h=!1})=>{const p=[{key:"floor",label:"Andar Mais Alto",icon:Sa,color:"text-yellow-500"},{key:"level",label:"Maior Nível",icon:Br,color:"text-blue-500"},{key:"gold",label:"Mais Rico",icon:_r,color:"text-amber-500"}],g=[{key:"all",label:"Todos",shortLabel:"Todos",icon:BE,color:"text-gray-500"},{key:"alive",label:"Apenas Vivos",shortLabel:"Vivos",icon:ds,color:"text-green-500"},{key:"dead",label:"Apenas Mortos",shortLabel:"Mortos",icon:Qs,color:"text-red-500"}];return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Modalidade"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(x=>{const b=x.icon,_=t===x.key;return a.jsxs(de,{variant:_?"default":"outline",size:"sm",onClick:()=>e(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${_?"":"hover:bg-muted"}`,children:[a.jsx(b,{className:`h-3 w-3 ${_?"text-white":"text-muted-foreground"}`}),a.jsx("span",{className:"hidden sm:inline",children:x.label}),a.jsx("span",{className:"sm:hidden",children:x.key==="floor"?"Andar":x.key==="level"?"Nível":"Ouro"})]},x.key)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Status"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(x=>{const b=x.icon,_=s===x.key;return a.jsxs(de,{variant:_?"default":"outline",size:"sm",onClick:()=>r(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${_?"":"hover:bg-muted"}`,children:[a.jsx(b,{className:`h-3 w-3 ${_?"text-white":"text-muted-foreground"}`}),a.jsx("span",{className:"hidden sm:inline",children:x.label}),a.jsx("span",{className:"sm:hidden",children:x.shortLabel})]},x.key)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Buscar Jogador"}),a.jsxs("div",{className:"relative",children:[a.jsx(Jm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ps,{type:"text",placeholder:"Digite o nome do jogador...",value:n,onChange:x=>i(x.target.value),disabled:h,className:"pl-10 text-sm"})]})]}),u>1&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Páginas"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>f(c-1),disabled:c<=1||h,className:"flex items-center gap-2",children:[a.jsx(vv,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-muted-foreground",children:["Página ",c," de ",u]})}),a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>f(c+1),disabled:c>=u||h,className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),a.jsx(RE,{className:"h-4 w-4"})]})]})]})]})},Lr=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),mX=({entries:t,mode:e,currentUserId:s})=>{const r=f=>{switch(f){case 0:return"text-yellow-500";case 1:return"text-gray-400";case 2:return"text-amber-700";default:return"text-gray-300"}},n=(f,h)=>{switch(h){case"floor":return`Andar ${f.highest_floor}`;case"level":return`Nível ${f.character_level}`;case"gold":return`${Lr(f.character_gold)} Gold`;default:return`Andar ${f.highest_floor}`}},i=(f,h)=>{switch(h){case"floor":return`Nível ${f.character_level} • ${Lr(f.character_gold)} Gold`;case"level":return`Andar ${f.highest_floor} • ${Lr(f.character_gold)} Gold`;case"gold":return`Andar ${f.highest_floor} • Nível ${f.character_level}`;default:return`Nível ${f.character_level}`}},u=(f=>{switch(f){case"floor":return Sa;case"level":return Br;case"gold":return _r;default:return Sa}})(e);return t.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Nenhum registro encontrado para esta modalidade."})]}):a.jsxs(pp,{children:[a.jsx(gp,{children:a.jsxs(za,{children:[a.jsx(lr,{className:"w-12 text-center",children:"Pos."}),a.jsx(lr,{children:"Jogador"}),a.jsx(lr,{className:"text-right",children:"Valor Principal"}),a.jsx(lr,{className:"text-right hidden sm:table-cell",children:"Detalhes"}),a.jsx(lr,{className:"text-right",children:"Data"})]})}),a.jsx(xp,{children:t.map((f,h)=>a.jsxs(za,{className:f.user_id===s?"bg-primary/5":"",children:[a.jsx(Ms,{className:"text-center font-medium",children:h<3?a.jsx(Sa,{className:`inline h-4 w-4 ${r(h)}`}):a.jsx("span",{className:"text-muted-foreground",children:h+1})}),a.jsx(Ms,{children:a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:f.player_name}),f.character_alive?a.jsx(ds,{className:"h-3 w-3 text-green-500"}):a.jsx(Qs,{className:"h-3 w-3 text-red-500"}),f.user_id===s&&a.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Você"})]}),a.jsx("div",{className:"text-xs text-muted-foreground sm:hidden",children:i(f,e)})]})})}),a.jsx(Ms,{className:"text-right font-medium",children:n(f,e)}),a.jsx(Ms,{className:"text-right text-muted-foreground hidden sm:table-cell",children:i(f,e)}),a.jsx(Ms,{className:"text-right text-muted-foreground",children:f.created_at?new Date(f.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]},f.id))})]})},pX=({stats:t,userRanking:e})=>{const[s,r]=y.useState(!0),[n,i]=y.useState(!1),c=e[0];return a.jsxs("div",{className:"space-y-4",children:[a.jsxs(De,{children:[a.jsx(ft,{className:"pb-3",children:a.jsxs(de,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>r(!s),children:[a.jsx(pt,{className:"text-lg font-medium",children:"Suas Conquistas"}),s?a.jsx(xc,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Ro,{className:"h-4 w-4 text-muted-foreground"})]})}),s&&a.jsx(He,{className:"pt-0",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[a.jsx(Sa,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestFloor}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Melhor Andar"})]}),a.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[a.jsx(Br,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),a.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestLevel}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Maior Nível"})]}),a.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[a.jsx(_r,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),a.jsx("div",{className:"text-xl font-bold mb-1",title:`${t.bestGold.toLocaleString("pt-BR")} Gold`,children:Lr(t.bestGold)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Mais Rico"})]})]})})]}),c&&a.jsxs(De,{children:[a.jsx(ft,{className:"pb-3",children:a.jsxs(de,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>i(!n),children:[a.jsxs(pt,{className:"text-lg font-medium flex items-center gap-2",children:[a.jsx(TE,{className:"h-4 w-4"}),"Última Tentativa"]}),n?a.jsx(xc,{className:"h-4 w-4 text-muted-foreground"}):a.jsx(Ro,{className:"h-4 w-4 text-muted-foreground"})]})}),n&&a.jsx(He,{className:"pt-0",children:a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[c.character_alive?a.jsx("span",{className:"text-sm",children:"❤️"}):a.jsx("span",{className:"text-sm",children:"💀"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-sm",children:c.character_alive?"Vivo":"Morto"}),a.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(c.created_at).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-bold",children:["Andar ",c.highest_floor]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Nível ",c.character_level]})]})]})})]}),a.jsx(De,{children:a.jsx(He,{className:"p-4",children:a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Total de Tentativas:"}),a.jsx("span",{className:"font-medium",children:t.totalRuns})]})})})]})},m2=20,gX=Wt("/_authenticated/game/ranking")({component:xX});function xX(){const t=Ot(),{user:e}=qs(),[s,r]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),[f,h]=y.useState(!0),[p,g]=y.useState("floor"),[x,b]=y.useState("all"),[_,j]=y.useState(""),[N,C]=y.useState(1),[E,S]=y.useState(1),[P,R]=y.useState("");y.useEffect(()=>{const V=setTimeout(()=>{R(_)},500);return()=>clearTimeout(V)},[_]),y.useEffect(()=>{C(1)},[p,x,P]),y.useEffect(()=>{A()},[e==null?void 0:e.id,p,x,P,N]);const D=y.useCallback(async()=>{try{const V=await sc.countRankingEntries(x,P);if(V.data!==null){const F=V.data,Q=Math.max(1,Math.ceil(F/m2));S(Q),console.log(`[RankingPage] Total de entradas: ${F}, páginas: ${Q}`)}}catch(V){console.error("Erro ao contar entradas:",V),S(1)}},[x,P]),$=async()=>{console.log("[RankingPage] Forçando atualização do ranking..."),await A()},A=async()=>{var V,F,Q;try{h(!0),console.log(`[RankingPage] Iniciando busca de dados - modo: ${p}, filtro: ${x}, nome: ${P}, página: ${N}`),await D();const G=await sc.getGlobalRanking(p,m2,x,P,N);if(console.log("[RankingPage] Resposta do ranking global:",{success:!G.error,error:G.error,dataLength:((V=G.data)==null?void 0:V.length)||0,data:G.data}),G.error?(console.error("Erro ao buscar ranking global:",G.error),r([])):(r(G.data||[]),console.log(`[RankingPage] Ranking global carregado: ${((F=G.data)==null?void 0:F.length)||0} entradas`),G.data&&G.data.length>0&&console.log("[RankingPage] Primeiros 5 personagens do ranking:",G.data.slice(0,5).map(k=>({name:k.player_name,highest_floor:k.highest_floor,level:k.character_level,alive:k.character_alive,user_id:k.user_id})))),e!=null&&e.id){const[k,B]=await Promise.all([sc.getUserRanking(e.id,15),sc.getUserStats(e.id)]);k.error?(console.error("Erro ao buscar ranking do usuário:",k.error),i([])):(i(k.data||[]),console.log(`[RankingPage] Ranking do usuário carregado: ${((Q=k.data)==null?void 0:Q.length)||0} entradas`)),B.error?(console.error("Erro ao buscar estatísticas do usuário:",B.error),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})):(u(B.data||{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),console.log("[RankingPage] Estatísticas do usuário carregadas:",B.data))}}catch(G){console.error("Erro ao buscar dados do ranking:",G),r([]),i([]),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})}finally{h(!1)}},M=V=>{switch(V){case"floor":return"Ranking por Andar Mais Alto";case"level":return"Ranking por Nível Mais Alto";case"gold":return"Ranking por Mais Ouro";default:return"Ranking"}},U=V=>{C(V)},Y=()=>{const V=[];return x!=="all"&&V.push(x==="alive"?"vivos":"mortos"),P&&V.push(`nome: "${P}"`),V.length>0?` (${V.join(", ")})`:""};return a.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:M(p)}),a.jsxs("p",{className:"text-muted-foreground",children:["Veja os melhores jogadores",Y()]})]})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(de,{variant:"outline",size:"sm",onClick:$,disabled:f,children:"Atualizar"})})]}),a.jsx(De,{className:"mb-6",children:a.jsx(ft,{children:a.jsx(hX,{activeMode:p,onModeChange:g,statusFilter:x,onStatusFilterChange:b,nameFilter:_,onNameFilterChange:j,currentPage:N,totalPages:E,onPageChange:U,isLoading:f})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e&&a.jsx("div",{className:"lg:col-span-1",children:a.jsx(pX,{stats:c,userRanking:n.map(V=>({highest_floor:V.highest_floor,character_level:V.character_level,character_gold:V.character_gold,character_alive:V.character_alive,created_at:V.created_at}))})}),a.jsx("div",{className:e?"lg:col-span-3":"lg:col-span-4",children:a.jsxs(De,{children:[a.jsx(He,{className:"p-0",children:a.jsx(mX,{entries:s,mode:p,currentUserId:e==null?void 0:e.id})}),E>1&&a.jsxs(Ib,{className:"flex justify-center gap-2",children:[a.jsx(de,{variant:"outline",size:"sm",onClick:()=>U(N-1),disabled:N<=1||f,children:"Anterior"}),a.jsxs("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Página ",N," de ",E]}),a.jsx(de,{variant:"outline",size:"sm",onClick:()=>U(N+1),disabled:N>=E||f,children:"Próxima"})]})]})})]})]})}const Rn=PA,vX=DA,cR=y.forwardRef(({className:t,...e},s)=>a.jsx(np,{ref:s,className:Be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));cR.displayName=np.displayName;const Qa=y.forwardRef(({className:t,children:e,...s},r)=>a.jsxs(vX,{children:[a.jsx(cR,{}),a.jsxs(op,{ref:r,className:Be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,a.jsxs($A,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(zi,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qa.displayName=op.displayName;const Mn=({className:t,...e})=>a.jsx("div",{className:Be("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Mn.displayName="DialogHeader";const uR=({className:t,...e})=>a.jsx("div",{className:Be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});uR.displayName="DialogFooter";const Ja=y.forwardRef(({className:t,...e},s)=>a.jsx(ip,{ref:s,className:Be("text-lg font-semibold leading-none tracking-tight",t),...e}));Ja.displayName=ip.displayName;const wc=y.forwardRef(({className:t,...e},s)=>a.jsx(OA,{ref:s,className:Be("text-sm text-muted-foreground",t),...e}));wc.displayName=OA.displayName;var Vb="Progress",zb=100,[yX,oZ]=oa(Vb),[bX,wX]=yX(Vb),dR=y.forwardRef((t,e)=>{const{__scopeProgress:s,value:r=null,max:n,getValueLabel:i=_X,...c}=t;(n||n===0)&&!p2(n)&&console.error(jX(`${n}`,"Progress"));const u=p2(n)?n:zb;r!==null&&!g2(r,u)&&console.error(NX(`${r}`,"Progress"));const f=g2(r,u)?r:null,h=Om(f)?i(f,u):void 0;return a.jsx(bX,{scope:s,value:f,max:u,children:a.jsx(Ze.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Om(f)?f:void 0,"aria-valuetext":h,role:"progressbar","data-state":mR(f,u),"data-value":f??void 0,"data-max":u,...c,ref:e})})});dR.displayName=Vb;var fR="ProgressIndicator",hR=y.forwardRef((t,e)=>{const{__scopeProgress:s,...r}=t,n=wX(fR,s);return a.jsx(Ze.div,{"data-state":mR(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:e})});hR.displayName=fR;function _X(t,e){return`${Math.round(t/e*100)}%`}function mR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Om(t){return typeof t=="number"}function p2(t){return Om(t)&&!isNaN(t)&&t>0}function g2(t,e){return Om(t)&&!isNaN(t)&&t<=e&&t>=0}function jX(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${zb}\`.`}function NX(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${zb} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pR=dR,SX=hR;const qa=y.forwardRef(({className:t,value:e,...s},r)=>a.jsx(pR,{ref:r,className:Be("relative h-2 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:a.jsx(SX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));qa.displayName=pR.displayName;const CX=Id("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sd=y.forwardRef(({className:t,variant:e,...s},r)=>a.jsx("div",{ref:r,role:"alert",className:Be(CX({variant:e}),t),...s}));sd.displayName="Alert";const EX=y.forwardRef(({className:t,...e},s)=>a.jsx("h5",{ref:s,className:Be("mb-1 font-medium leading-none tracking-tight",t),...e}));EX.displayName="AlertTitle";const rd=y.forwardRef(({className:t,...e},s)=>a.jsx("div",{ref:s,className:Be("text-sm [&_p]:leading-relaxed",t),...e}));rd.displayName="AlertDescription";const x2=20,AX=Wt("/_authenticated/game/play")({component:kX});function kX(){return Ii().pathname==="/game/play"?a.jsx(TX,{}):a.jsx(Lo,{})}function TX(){const t=Ot(),{user:e}=qs(),[s,r]=y.useState([]),[n,i]=y.useState(null),[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(!1),[x,b]=y.useState(""),[_,j]=y.useState({isValid:!0}),[N,C]=y.useState(!1),[E,S]=y.useState(!1),[P,R]=y.useState(null);y.useEffect(()=>{e!=null&&e.id&&D()},[e==null?void 0:e.id]),y.useEffect(()=>{if(x.trim()){const k=sa.validateCharacterName(x);if(k.isValid&&s.length>0){const B=s.map(W=>W.name),z=sa.formatCharacterName(x);if(sa.isTooSimilar(z,B)){const W=sa.generateNameSuggestions(z);j({isValid:!1,error:"Nome muito similar a um personagem existente",suggestions:W})}else j(k)}else j(k)}else j({isValid:!0})},[x,s]);const D=async()=>{try{h(!0);const k=await Ge.getUserCharacters(e.id);k.success&&k.data&&r(k.data);const B=await Ge.getUserCharacterProgression(e.id);B.success&&B.data&&i(B.data)}catch(k){console.error("Erro ao carregar dados:",k),me.error("Erro ao carregar dados dos personagens")}finally{h(!1)}};y.useEffect(()=>{if(n&&s!==void 0){const k=[];for(let B=1;B<=x2;B++){const z=s.find(X=>s.indexOf(X)+1===B)||null,W=B<=n.max_character_slots,L=$(B);k.push({slotNumber:B,character:z,isUnlocked:W,requiredTotalLevel:L})}u(k)}},[n,s]);const $=k=>k<=3?0:(k-3)*15,A=async()=>{if(!(!(e!=null&&e.id)||!x.trim()||!_.isValid)){C(!0);try{const k=await Ge.createCharacter({user_id:e.id,name:x.trim()});k.success&&k.data?(me.success("Personagem criado com sucesso!",{description:`${sa.formatCharacterName(x)} foi criado!`}),await D(),V()):me.error("Erro ao criar personagem",{description:k.error})}catch(k){console.error("Erro ao criar personagem:",k),me.error("Erro ao criar personagem")}finally{C(!1)}}},M=k=>{R(k),S(!0)},U=async()=>{if(P)try{const k=await Ge.getCharacter(P.id);k.success&&k.data?t({to:"/game/play/hub",search:{character:P.id}}):me.error("Erro ao selecionar personagem",{description:k.error})}catch(k){console.error("Erro ao selecionar personagem:",k),me.error("Erro ao selecionar personagem")}},Y=()=>{g(!0)},V=()=>{g(!1),b(""),j({isValid:!0})},F=k=>{b(k)},Q=k=>{const z=(L=>Math.floor(100*Math.pow(1.1,L-1)))(k.level),W=k.xp/z*100;return a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Nível:"}),a.jsx("span",{className:"font-medium",children:k.level})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"XP:"}),a.jsxs("span",{className:"font-medium",children:[k.xp,"/",z]})]}),a.jsx(qa,{value:W,className:"h-2"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Andar Máximo:"}),a.jsx("span",{className:"font-medium",children:k.floor})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Ouro:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:k.gold})]})]})},G=k=>{if(!k.isUnlocked)return a.jsx(De,{className:"opacity-50",children:a.jsxs(He,{className:"p-4 text-center",children:[a.jsx(iB,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slot ",k.slotNumber]}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requer nível total ",k.requiredTotalLevel]})]})},k.slotNumber);if(!k.character)return a.jsx(De,{className:"cursor-pointer hover:bg-accent/50 border-dashed",children:a.jsxs(He,{className:"p-4 text-center",onClick:()=>Y(),children:[a.jsx(Bo,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Criar Personagem"}),a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Slot ",k.slotNumber]})]})},k.slotNumber);const B=k.character,z=B.hp>0;return a.jsxs(De,{className:`cursor-pointer hover:bg-accent/50 ${z?"":"border-red-500/50 bg-red-500/5"}`,onClick:()=>z&&M(B),style:{cursor:z?"pointer":"not-allowed"},children:[a.jsx(ft,{className:"pb-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(pt,{className:"text-base flex items-center gap-2",children:[B.name,!z&&a.jsx(Qs,{className:"h-4 w-4 text-red-500"}),B.floor>=100&&a.jsx(Ti,{className:"h-4 w-4 text-yellow-500"})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",k.slotNumber]})]})}),a.jsxs(He,{className:"pt-0",children:[Q(B),!z&&a.jsxs(sd,{className:"mt-3 border-red-500/50 bg-red-500/10",children:[a.jsx(Qs,{className:"h-4 w-4 text-red-500"}),a.jsx(rd,{className:"text-red-700",children:"Este personagem morreu permanentemente"})]})]})]},k.slotNumber)};return f?a.jsx("div",{className:"container mx-auto p-4",children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{children:"Carregando personagens..."})]})})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Selecionar Personagem"}),a.jsx("p",{className:"text-muted-foreground",children:"Escolha um personagem para jogar"})]})]}),n&&a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Progressão Total"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(BE,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:n.total_character_level}),a.jsx("span",{className:"text-muted-foreground",children:"nível"})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.max_character_slots,"/",x2," slots"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(G)}),a.jsx(Rn,{open:p,onOpenChange:g,children:a.jsxs(Qa,{children:[a.jsxs(Mn,{children:[a.jsx(Ja,{children:"Criar Novo Personagem"}),a.jsx(wc,{children:"Escolha um nome para seu novo personagem. Lembre-se: a morte é permanente!"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(Ps,{placeholder:"Nome do personagem",value:x,onChange:k=>b(k.target.value),className:_.isValid?"":"border-red-500"}),!_.isValid&&_.error&&a.jsxs(sd,{className:"mt-2 border-red-500/50 bg-red-500/10",children:[a.jsx(ME,{className:"h-4 w-4 text-red-500"}),a.jsx(rd,{className:"text-red-700",children:_.error})]}),_.suggestions&&_.suggestions.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Sugestões:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:_.suggestions.map((k,B)=>a.jsx(de,{variant:"outline",size:"sm",onClick:()=>F(k),children:k},B))})]})]}),a.jsxs(sd,{children:[a.jsx(Qs,{className:"h-4 w-4"}),a.jsxs(rd,{children:[a.jsx("strong",{children:"Aviso:"})," Este jogo possui morte permanente (permadeath). Se seu personagem morrer, ele será perdido para sempre!"]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(de,{variant:"outline",onClick:V,children:"Cancelar"}),a.jsx(de,{onClick:A,disabled:!x.trim()||!_.isValid||N,children:N?"Criando...":"Criar Personagem"})]})]})]})}),a.jsx(Rn,{open:E,onOpenChange:S,children:a.jsxs(Qa,{children:[a.jsxs(Mn,{children:[a.jsx(Ja,{children:"Confirmar Seleção"}),a.jsxs(wc,{children:["Você está prestes a jogar com ",P==null?void 0:P.name]})]}),a.jsxs(sd,{children:[a.jsx(Cy,{className:"h-4 w-4"}),a.jsxs(rd,{children:[a.jsx("strong",{children:"Lembrete:"})," Este jogo possui morte permanente. Se seu personagem morrer durante a aventura, ele será perdido para sempre!"]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(de,{variant:"outline",onClick:()=>S(!1),className:"cursor-pointer",children:"Cancelar"}),a.jsxs(de,{onClick:U,className:"cursor-pointer",children:[a.jsx(yv,{className:"h-4 w-4 mr-2"}),"Confirmar e Jogar"]})]})]})})]})}var Fx="rovingFocusGroup.onEntryFocus",RX={bubbles:!1,cancelable:!0},Gd="RovingFocusGroup",[ly,gR,MX]=UT(Gd),[PX,xR]=oa(Gd,[MX]),[DX,OX]=PX(Gd),vR=y.forwardRef((t,e)=>a.jsx(ly.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(ly.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx($X,{...t,ref:e})})}));vR.displayName=Gd;var $X=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:r,loop:n=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...g}=t,x=y.useRef(null),b=_t(e,x),_=vp(i),[j,N]=Mo({prop:c,defaultProp:u??null,onChange:f,caller:Gd}),[C,E]=y.useState(!1),S=Js(h),P=gR(s),R=y.useRef(!1),[D,$]=y.useState(0);return y.useEffect(()=>{const A=x.current;if(A)return A.addEventListener(Fx,S),()=>A.removeEventListener(Fx,S)},[S]),a.jsx(DX,{scope:s,orientation:r,dir:_,loop:n,currentTabStopId:j,onItemFocus:y.useCallback(A=>N(A),[N]),onItemShiftTab:y.useCallback(()=>E(!0),[]),onFocusableItemAdd:y.useCallback(()=>$(A=>A+1),[]),onFocusableItemRemove:y.useCallback(()=>$(A=>A-1),[]),children:a.jsx(Ze.div,{tabIndex:C||D===0?-1:0,"data-orientation":r,...g,ref:b,style:{outline:"none",...t.style},onMouseDown:Xe(t.onMouseDown,()=>{R.current=!0}),onFocus:Xe(t.onFocus,A=>{const M=!R.current;if(A.target===A.currentTarget&&M&&!C){const U=new CustomEvent(Fx,RX);if(A.currentTarget.dispatchEvent(U),!U.defaultPrevented){const Y=P().filter(k=>k.focusable),V=Y.find(k=>k.active),F=Y.find(k=>k.id===j),G=[V,F,...Y].filter(Boolean).map(k=>k.ref.current);wR(G,p)}}R.current=!1}),onBlur:Xe(t.onBlur,()=>E(!1))})})}),yR="RovingFocusGroupItem",bR=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:r=!0,active:n=!1,tabStopId:i,children:c,...u}=t,f=Ha(),h=i||f,p=OX(yR,s),g=p.currentTabStopId===h,x=gR(s),{onFocusableItemAdd:b,onFocusableItemRemove:_,currentTabStopId:j}=p;return y.useEffect(()=>{if(r)return b(),()=>_()},[r,b,_]),a.jsx(ly.ItemSlot,{scope:s,id:h,focusable:r,active:n,children:a.jsx(Ze.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:Xe(t.onMouseDown,N=>{r?p.onItemFocus(h):N.preventDefault()}),onFocus:Xe(t.onFocus,()=>p.onItemFocus(h)),onKeyDown:Xe(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){p.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const C=BX(N,p.orientation,p.dir);if(C!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let S=x().filter(P=>P.focusable).map(P=>P.ref.current);if(C==="last")S.reverse();else if(C==="prev"||C==="next"){C==="prev"&&S.reverse();const P=S.indexOf(N.currentTarget);S=p.loop?VX(S,P+1):S.slice(P+1)}setTimeout(()=>wR(S))}}),children:typeof c=="function"?c({isCurrentTabStop:g,hasTabStop:j!=null}):c})})});bR.displayName=yR;var LX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function BX(t,e,s){const r=IX(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LX[r]}function wR(t,e=!1){const s=document.activeElement;for(const r of t)if(r===s||(r.focus({preventScroll:e}),document.activeElement!==s))return}function VX(t,e){return t.map((s,r)=>t[(e+r)%t.length])}var zX=vR,UX=bR,Cp="Tabs",[qX,iZ]=oa(Cp,[xR]),_R=xR(),[FX,Ub]=qX(Cp),jR=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,onValueChange:n,defaultValue:i,orientation:c="horizontal",dir:u,activationMode:f="automatic",...h}=t,p=vp(u),[g,x]=Mo({prop:r,onChange:n,defaultProp:i??"",caller:Cp});return a.jsx(FX,{scope:s,baseId:Ha(),value:g,onValueChange:x,orientation:c,dir:p,activationMode:f,children:a.jsx(Ze.div,{dir:p,"data-orientation":c,...h,ref:e})})});jR.displayName=Cp;var NR="TabsList",SR=y.forwardRef((t,e)=>{const{__scopeTabs:s,loop:r=!0,...n}=t,i=Ub(NR,s),c=_R(s);return a.jsx(zX,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(Ze.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:e})})});SR.displayName=NR;var CR="TabsTrigger",ER=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,disabled:n=!1,...i}=t,c=Ub(CR,s),u=_R(s),f=TR(c.baseId,r),h=RR(c.baseId,r),p=r===c.value;return a.jsx(UX,{asChild:!0,...u,focusable:!n,active:p,children:a.jsx(Ze.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:f,...i,ref:e,onMouseDown:Xe(t.onMouseDown,g=>{!n&&g.button===0&&g.ctrlKey===!1?c.onValueChange(r):g.preventDefault()}),onKeyDown:Xe(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(r)}),onFocus:Xe(t.onFocus,()=>{const g=c.activationMode!=="manual";!p&&!n&&g&&c.onValueChange(r)})})})});ER.displayName=CR;var AR="TabsContent",kR=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:r,forceMount:n,children:i,...c}=t,u=Ub(AR,s),f=TR(u.baseId,r),h=RR(u.baseId,r),p=r===u.value,g=y.useRef(p);return y.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),a.jsx(Vr,{present:n||p,children:({present:x})=>a.jsx(Ze.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!x,id:h,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:x&&i})})});kR.displayName=AR;function TR(t,e){return`${t}-trigger-${e}`}function RR(t,e){return`${t}-content-${e}`}var HX=jR,MR=SR,PR=ER,DR=kR;const OR=HX,qb=y.forwardRef(({className:t,...e},s)=>a.jsx(MR,{ref:s,className:Be("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));qb.displayName=MR.displayName;const yo=y.forwardRef(({className:t,...e},s)=>a.jsx(PR,{ref:s,className:Be("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));yo.displayName=PR.displayName;const bo=y.forwardRef(({className:t,...e},s)=>a.jsx(DR,{ref:s,className:Be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));bo.displayName=DR.displayName;function GX(t,e){return y.useReducer((s,r)=>e[s][r]??s,t)}var Fb="ScrollArea",[$R,lZ]=oa(Fb),[XX,ia]=$R(Fb),LR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:r="hover",dir:n,scrollHideDelay:i=600,...c}=t,[u,f]=y.useState(null),[h,p]=y.useState(null),[g,x]=y.useState(null),[b,_]=y.useState(null),[j,N]=y.useState(null),[C,E]=y.useState(0),[S,P]=y.useState(0),[R,D]=y.useState(!1),[$,A]=y.useState(!1),M=_t(e,Y=>f(Y)),U=vp(n);return a.jsx(XX,{scope:s,type:r,dir:U,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:p,content:g,onContentChange:x,scrollbarX:b,onScrollbarXChange:_,scrollbarXEnabled:R,onScrollbarXEnabledChange:D,scrollbarY:j,onScrollbarYChange:N,scrollbarYEnabled:$,onScrollbarYEnabledChange:A,onCornerWidthChange:E,onCornerHeightChange:P,children:a.jsx(Ze.div,{dir:U,...c,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":C+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});LR.displayName=Fb;var IR="ScrollAreaViewport",BR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:r,nonce:n,...i}=t,c=ia(IR,s),u=y.useRef(null),f=_t(e,u,c.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Ze.div,{"data-radix-scroll-area-viewport":"",...i,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BR.displayName=IR;var tn="ScrollAreaScrollbar",VR=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,n=ia(tn,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=n,u=t.orientation==="horizontal";return y.useEffect(()=>(u?i(!0):c(!0),()=>{u?i(!1):c(!1)}),[u,i,c]),n.type==="hover"?a.jsx(YX,{...r,ref:e,forceMount:s}):n.type==="scroll"?a.jsx(KX,{...r,ref:e,forceMount:s}):n.type==="auto"?a.jsx(zR,{...r,ref:e,forceMount:s}):n.type==="always"?a.jsx(Hb,{...r,ref:e}):null});VR.displayName=tn;var YX=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,n=ia(tn,t.__scopeScrollArea),[i,c]=y.useState(!1);return y.useEffect(()=>{const u=n.scrollArea;let f=0;if(u){const h=()=>{window.clearTimeout(f),c(!0)},p=()=>{f=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),a.jsx(Vr,{present:s||i,children:a.jsx(zR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),KX=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,n=ia(tn,t.__scopeScrollArea),i=t.orientation==="horizontal",c=Ap(()=>f("SCROLL_END"),100),[u,f]=GX("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>f("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,n.scrollHideDelay,f]),y.useEffect(()=>{const h=n.viewport,p=i?"scrollLeft":"scrollTop";if(h){let g=h[p];const x=()=>{const b=h[p];g!==b&&(f("SCROLL"),c()),g=b};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[n.viewport,i,f,c]),a.jsx(Vr,{present:s||u!=="hidden",children:a.jsx(Hb,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Xe(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Xe(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),zR=y.forwardRef((t,e)=>{const s=ia(tn,t.__scopeScrollArea),{forceMount:r,...n}=t,[i,c]=y.useState(!1),u=t.orientation==="horizontal",f=Ap(()=>{if(s.viewport){const h=s.viewport.offsetWidth<s.viewport.scrollWidth,p=s.viewport.offsetHeight<s.viewport.scrollHeight;c(u?h:p)}},10);return _c(s.viewport,f),_c(s.content,f),a.jsx(Vr,{present:r||i,children:a.jsx(Hb,{"data-state":i?"visible":"hidden",...n,ref:e})})}),Hb=y.forwardRef((t,e)=>{const{orientation:s="vertical",...r}=t,n=ia(tn,t.__scopeScrollArea),i=y.useRef(null),c=y.useRef(0),[u,f]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=GR(u.viewport,u.content),p={...r,sizes:u,onSizesChange:f,hasThumb:h>0&&h<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:x=>c.current=x};function g(x,b){return tY(x,c.current,u,b)}return s==="horizontal"?a.jsx(WX,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollLeft,b=v2(x,u,n.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=g(x,n.dir))}}):s==="vertical"?a.jsx(ZX,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollTop,b=v2(x,u);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=g(x))}}):null}),WX=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...n}=t,i=ia(tn,t.__scopeScrollArea),[c,u]=y.useState(),f=y.useRef(null),h=_t(e,f,i.onScrollbarXChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),a.jsx(qR,{"data-orientation":"horizontal",...n,ref:h,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ep(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollLeft+p.deltaX;t.onWheelScroll(x),YR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Lm(c.paddingLeft),paddingEnd:Lm(c.paddingRight)}})}})}),ZX=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:r,...n}=t,i=ia(tn,t.__scopeScrollArea),[c,u]=y.useState(),f=y.useRef(null),h=_t(e,f,i.onScrollbarYChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),a.jsx(qR,{"data-orientation":"vertical",...n,ref:h,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ep(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollTop+p.deltaY;t.onWheelScroll(x),YR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Lm(c.paddingTop),paddingEnd:Lm(c.paddingBottom)}})}})}),[QX,UR]=$R(tn),qR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:p,onResize:g,...x}=t,b=ia(tn,s),[_,j]=y.useState(null),N=_t(e,M=>j(M)),C=y.useRef(null),E=y.useRef(""),S=b.viewport,P=r.content-r.viewport,R=Js(p),D=Js(f),$=Ap(g,10);function A(M){if(C.current){const U=M.clientX-C.current.left,Y=M.clientY-C.current.top;h({x:U,y:Y})}}return y.useEffect(()=>{const M=U=>{const Y=U.target;(_==null?void 0:_.contains(Y))&&R(U,P)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[S,_,P,R]),y.useEffect(D,[r,D]),_c(_,$),_c(b.content,$),a.jsx(QX,{scope:s,scrollbar:_,hasThumb:n,onThumbChange:Js(i),onThumbPointerUp:Js(c),onThumbPositionChange:D,onThumbPointerDown:Js(u),children:a.jsx(Ze.div,{...x,ref:N,style:{position:"absolute",...x.style},onPointerDown:Xe(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),C.current=_.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),A(M))}),onPointerMove:Xe(t.onPointerMove,A),onPointerUp:Xe(t.onPointerUp,M=>{const U=M.target;U.hasPointerCapture(M.pointerId)&&U.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=E.current,b.viewport&&(b.viewport.style.scrollBehavior=""),C.current=null})})})}),$m="ScrollAreaThumb",FR=y.forwardRef((t,e)=>{const{forceMount:s,...r}=t,n=UR($m,t.__scopeScrollArea);return a.jsx(Vr,{present:s||n.hasThumb,children:a.jsx(JX,{ref:e,...r})})}),JX=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:r,...n}=t,i=ia($m,s),c=UR($m,s),{onThumbPositionChange:u}=c,f=_t(e,g=>c.onThumbChange(g)),h=y.useRef(void 0),p=Ap(()=>{h.current&&(h.current(),h.current=void 0)},100);return y.useEffect(()=>{const g=i.viewport;if(g){const x=()=>{if(p(),!h.current){const b=sY(g,u);h.current=b,u()}};return u(),g.addEventListener("scroll",x),()=>g.removeEventListener("scroll",x)}},[i.viewport,p,u]),a.jsx(Ze.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Xe(t.onPointerDownCapture,g=>{const b=g.target.getBoundingClientRect(),_=g.clientX-b.left,j=g.clientY-b.top;c.onThumbPointerDown({x:_,y:j})}),onPointerUp:Xe(t.onPointerUp,c.onThumbPointerUp)})});FR.displayName=$m;var Gb="ScrollAreaCorner",HR=y.forwardRef((t,e)=>{const s=ia(Gb,t.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&r?a.jsx(eY,{...t,ref:e}):null});HR.displayName=Gb;var eY=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,...r}=t,n=ia(Gb,s),[i,c]=y.useState(0),[u,f]=y.useState(0),h=!!(i&&u);return _c(n.scrollbarX,()=>{var g;const p=((g=n.scrollbarX)==null?void 0:g.offsetHeight)||0;n.onCornerHeightChange(p),f(p)}),_c(n.scrollbarY,()=>{var g;const p=((g=n.scrollbarY)==null?void 0:g.offsetWidth)||0;n.onCornerWidthChange(p),c(p)}),h?a.jsx(Ze.div,{...r,ref:e,style:{width:i,height:u,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Lm(t){return t?parseInt(t,10):0}function GR(t,e){const s=t/e;return isNaN(s)?0:s}function Ep(t){const e=GR(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-s)*e;return Math.max(r,18)}function tY(t,e,s,r="ltr"){const n=Ep(s),i=n/2,c=e||i,u=n-c,f=s.scrollbar.paddingStart+c,h=s.scrollbar.size-s.scrollbar.paddingEnd-u,p=s.content-s.viewport,g=r==="ltr"?[0,p]:[p*-1,0];return XR([f,h],g)(t)}function v2(t,e,s="ltr"){const r=Ep(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-n,c=e.content-e.viewport,u=i-r,f=s==="ltr"?[0,c]:[c*-1,0],h=Jv(t,f);return XR([0,c],[0,u])(h)}function XR(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(s-t[0])}}function YR(t,e){return t>0&&t<e}var sY=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},r=0;return function n(){const i={left:t.scrollLeft,top:t.scrollTop},c=s.left!==i.left,u=s.top!==i.top;(c||u)&&e(),s=i,r=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(r)};function Ap(t,e){const s=Js(t),r=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),y.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,e)},[s,e])}function _c(t,e){const s=Js(e);vs(()=>{let r=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(s)});return n.observe(t),()=>{window.cancelAnimationFrame(r),n.unobserve(t)}}},[t,s])}var rY=LR,aY=BR,nY=HR;function rc({className:t,children:e,...s}){return a.jsxs(rY,{"data-slot":"scroll-area",className:Be("relative",t),...s,children:[a.jsx(aY,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),a.jsx(oY,{}),a.jsx(nY,{})]})}function oY({className:t,orientation:e="vertical",...s}){return a.jsx(VR,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Be("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:a.jsx(FR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const iY=Wt("/_authenticated/game/guide")({component:lY});function lY(){const t=Ot();return a.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game"}),className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),a.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Guia do Tower Trials"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Aprenda tudo sobre o jogo"})]})]})}),a.jsxs(OR,{defaultValue:"basics",className:"w-full",children:[a.jsxs(qb,{className:"grid w-full grid-cols-2 lg:grid-cols-4",children:[a.jsx(yo,{value:"basics",children:"Básico"}),a.jsx(yo,{value:"combat",children:"Combate"}),a.jsx(yo,{value:"progression",children:"Progressão"}),a.jsx(yo,{value:"items",children:"Itens"})]}),a.jsx(bo,{value:"basics",children:a.jsx(De,{className:"p-6",children:a.jsx(rc,{className:"h-[600px] pr-4",children:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Conceitos Básicos"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Sobre o Jogo"}),a.jsx("p",{children:"Tower Trials é um jogo de RPG roguelike onde você sobe uma torre misteriosa, enfrentando monstros cada vez mais fortes a cada andar. Sua missão é subir o máximo possível, fortalecendo seu personagem e coletando equipamentos poderosos."}),a.jsx("h3",{className:"text-xl font-semibold",children:"Personagens"}),a.jsx("p",{children:"Cada jogador pode ter até 3 personagens ativos. Quando um personagem morre, ele é permanentemente deletado (sistema Permadeath). Os personagens possuem os seguintes atributos base:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"HP (Pontos de Vida):"})," Determina quanto dano você pode receber"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Mana:"})," Recurso usado para lançar magias"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"ATK (Ataque):"})," Determina o dano base dos seus ataques"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"DEF (Defesa):"})," Reduz o dano recebido"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Speed (Velocidade):"})," Afeta suas chances de fuga e ordem de ações"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"A Torre"}),a.jsx("p",{children:"A torre é dividida em andares com diferentes características:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Andares Comuns:"})," Encontros normais com monstros"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Andares de Elite (a cada 5 andares):"})," Monstros mais fortes com melhores recompensas"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Andares de Evento (a cada 7 andares):"})," Eventos especiais e encontros únicos"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Andares de Chefe (a cada 10 andares):"})," Batalhas desafiadoras contra chefes poderosos"]})]})]})]})})})}),a.jsx(bo,{value:"combat",children:a.jsx(De,{className:"p-6",children:a.jsx(rc,{className:"h-[600px] pr-4",children:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Sistema de Combate"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Ações de Combate"}),a.jsx("p",{children:"Durante o combate, você pode realizar as seguintes ações:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Ataque:"})," Causa dano baseado no seu ATK menos a DEF do inimigo"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Defesa:"})," Aumenta temporariamente sua DEF por um turno"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Magias:"})," Efeitos variados que consomem Mana"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Itens:"})," Usar poções e outros consumíveis"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fuga:"})," Tenta escapar do combate (chance baseada na velocidade)"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Magias"}),a.jsx("p",{children:"As magias são divididas em diferentes tipos de efeito:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Dano (Damage):"})," Causa dano direto ao inimigo"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Cura (Heal):"})," Recupera HP"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Buff:"})," Aumenta temporariamente seus atributos"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Debuff:"})," Reduz temporariamente os atributos do inimigo"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"DoT (Damage over Time):"})," Causa dano ao longo do tempo"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"HoT (Heal over Time):"})," Cura ao longo do tempo"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Comportamento dos Monstros"}),a.jsx("p",{children:"Os monstros possuem diferentes padrões de comportamento:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Agressivo:"})," Foca em causar dano"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Defensivo:"})," Alterna entre ataques e defesa"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Balanceado:"})," Mistura diferentes estratégias"]})]})]})]})})})}),a.jsx(bo,{value:"progression",children:a.jsx(De,{className:"p-6",children:a.jsx(rc,{className:"h-[600px] pr-4",children:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Progressão"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Níveis"}),a.jsx("p",{children:"Ao derrotar monstros, você ganha XP. A quantidade de XP necessária para subir de nível aumenta em 50% a cada nível. Ao subir de nível:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsx("li",{children:"Seus atributos base aumentam"}),a.jsx("li",{children:"HP e Mana são completamente restaurados"}),a.jsx("li",{children:"Você pode desbloquear novas magias"})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Recompensas"}),a.jsx("p",{children:"Ao derrotar monstros, você pode receber:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Gold:"})," Usado para comprar equipamentos e consumíveis"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Drops:"})," Itens que podem ser usados para crafting"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"XP:"})," Para subir de nível"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Checkpoints"}),a.jsx("p",{children:"A cada 10 andares existe um checkpoint. Estes são pontos seguros onde você pode:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsx("li",{children:"Salvar seu progresso"}),a.jsx("li",{children:"Retornar ao hub para comprar itens"}),a.jsx("li",{children:"Reorganizar seu equipamento"})]})]})]})})})}),a.jsx(bo,{value:"items",children:a.jsx(De,{className:"p-6",children:a.jsx(rc,{className:"h-[600px] pr-4",children:a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Itens e Equipamentos"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xl font-semibold",children:"Equipamentos"}),a.jsx("p",{children:"Os equipamentos são divididos em três categorias:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Armas (Weapons):"})," Aumentam principalmente ATK"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Armaduras (Armor):"})," Aumentam principalmente DEF"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Acessórios (Accessory):"})," Efeitos variados"]})]}),a.jsx("p",{children:"E em cinco raridades:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Comum (Common):"})," Equipamentos básicos"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Incomum (Uncommon):"})," Melhorias moderadas"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Raro (Rare):"})," Requer pergaminho especial para desbloquear"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Épico (Epic):"})," Requer pergaminho épico para desbloquear"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Lendário (Legendary):"})," Os mais poderosos do jogo"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Consumíveis"}),a.jsx("p",{children:"Existem diferentes tipos de consumíveis:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Poções:"})," Recuperam HP ou Mana"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Antídotos:"})," Removem efeitos negativos"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Elixires:"})," Proporcionam buffs temporários"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Pergaminhos:"})," Desbloqueiam equipamentos especiais"]})]}),a.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Crafting"}),a.jsx("p",{children:"Você pode criar itens usando materiais obtidos como drops dos monstros. Alguns consumíveis e equipamentos só podem ser obtidos através de crafting."})]})]})})})})]})]})}function $c(){const t=Km(),e=Wm(),s=jy(),r=G6(),n=Y6();return{gameState:t.gameState,loading:t.loading,error:t.error,setGameState:t.setGameState,updateLoading:t.updateLoading,setError:t.setError,resetError:t.resetError,gameMessage:e.gameMessage,gameLog:e.gameLog,addGameLogMessage:e.addGameLogMessage,setGameMessage:e.setGameMessage,characters:s.characters,selectedCharacter:s.selectedCharacter,createCharacter:s.createCharacter,selectCharacter:s.selectCharacter,loadCharacterForHub:s.loadCharacterForHub,initializeBattle:s.initializeBattle,updatePlayerStats:s.updatePlayerStats,reloadCharacters:s.reloadCharacters,performAction:r.performAction,interactWithEvent:n.interactWithEvent,startGame:s.createCharacter,clearGameState:()=>{t.setGameState({mode:"menu",player:{id:"",user_id:"",name:"",level:1,xp:0,xp_next_level:150,gold:0,hp:50,max_hp:50,mana:20,max_mana:20,atk:10,def:5,speed:10,created_at:"",updated_at:"",isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:1,spells:[],consumables:[],potionUsedThisTurn:!1,active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},strength:10,dexterity:10,intelligence:10,wisdom:10,vitality:10,luck:10,critical_chance:0,critical_damage:110,double_attack_chance:0,magic_attack:0,magic_mastery:1,magic_damage_bonus:0},currentEnemy:null,currentFloor:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:1,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1})},returnToMenu:()=>{t.setGameState({...t.gameState,mode:"menu"})},saveProgress:async()=>{},updatePlayerConsumables:i=>{t.setGameState({...t.gameState,player:{...t.gameState.player,consumables:i}})}}}const cY=({isOpen:t,onClose:e,character:s,onStartFromCheckpoint:r})=>{const[n,i]=y.useState([]),[c,u]=y.useState(!1),[f,h]=y.useState(null);y.useEffect(()=>{t&&p()},[t,s.id]);const p=async()=>{u(!0);try{console.log(`[MapModal] Carregando checkpoints para personagem ${s.name} (ID: ${s.id})`),console.log(`[MapModal] Andar atual do personagem: ${s.floor}`);const j=await Ge.getUnlockedCheckpoints(s.id);if(console.log("[MapModal] Resposta do CharacterService:",j),j.success&&j.data){if(console.log("[MapModal] Checkpoints carregados:",j.data),i(j.data),j.data.length>0){const N=j.data.find(E=>E.floor===s.floor),C=N?N.floor:j.data[j.data.length-1].floor;h(C),console.log(`[MapModal] Checkpoint selecionado por padrão: ${C}`)}}else console.error("[MapModal] Erro ao carregar checkpoints:",j.error),me.error("Erro ao carregar checkpoints",{description:j.error})}catch(j){console.error("[MapModal] Erro ao carregar checkpoints:",j),me.error("Erro ao carregar checkpoints")}finally{u(!1)}},g=async()=>{if(f===null){me.error("Selecione um checkpoint");return}try{u(!0),r(f),e()}catch(j){console.error("Erro ao iniciar aventura:",j),me.error("Erro ao iniciar aventura")}finally{u(!1)}},x=j=>j===1?a.jsx(_v,{className:"h-5 w-5"}):j>1&&(j-1)%10===0?a.jsx(Ti,{className:"h-5 w-5"}):a.jsx(wv,{className:"h-5 w-5"}),b=j=>j===1?"bg-green-500":j>1&&(j-1)%10===0?"bg-yellow-500":"bg-blue-500",_=j=>j===1?"Início da aventura":j>1&&(j-1)%10===0?"Santuário Pós-Boss":"Checkpoint";return a.jsx(Rn,{open:t,onOpenChange:e,children:a.jsxs(Qa,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs(Mn,{children:[a.jsxs(Ja,{className:"flex items-center gap-2",children:[a.jsx(wv,{className:"h-6 w-6"}),"Mapa da Torre - Checkpoints Desbloqueados"]}),a.jsx(wc,{children:"Escolha de qual andar você deseja iniciar sua aventura. Você só pode acessar checkpoints que já alcançou antes."})]}),a.jsx("div",{className:"space-y-4",children:c?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(j=>a.jsxs(De,{className:`cursor-pointer transition-all hover:shadow-md ${f===j.floor?"ring-2 ring-primary bg-primary/5":"hover:bg-accent/50"}`,onClick:()=>h(j.floor),children:[a.jsx(ft,{className:"pb-2",children:a.jsxs(pt,{className:"text-sm flex items-center gap-2",children:[a.jsx("div",{className:`p-1 rounded-full text-white ${b(j.floor)}`,children:x(j.floor)}),j.description,f===j.floor&&a.jsx(Ny,{className:"h-4 w-4 text-primary ml-auto"})]})}),a.jsxs(He,{className:"pt-0",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:_(j.floor)}),s.floor===j.floor&&a.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:"Posição Atual"})]})]},j.floor))}),a.jsx(De,{className:"bg-muted/30",children:a.jsxs(He,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"Andar Atual:"}),a.jsx("span",{className:"font-bold",children:s.floor})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[a.jsx("span",{children:"Checkpoints Desbloqueados:"}),a.jsx("span",{className:"font-bold",children:n.length})]})]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(de,{variant:"outline",onClick:e,className:"flex-1",disabled:c,children:"Cancelar"}),a.jsxs(de,{onClick:g,className:"flex-1",disabled:c||f===null,children:[c?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):a.jsx(_v,{className:"h-4 w-4 mr-2"}),"Iniciar Aventura"]})]})]})})]})})};var[kp,cZ]=oa("Tooltip",[Dc]),Tp=Dc(),KR="TooltipProvider",uY=700,cy="tooltip.open",[dY,Xb]=kp(KR),WR=t=>{const{__scopeTooltip:e,delayDuration:s=uY,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:i}=t,c=y.useRef(!0),u=y.useRef(!1),f=y.useRef(0);return y.useEffect(()=>{const h=f.current;return()=>window.clearTimeout(h)},[]),a.jsx(dY,{scope:e,isOpenDelayedRef:c,delayDuration:s,onOpen:y.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:y.useCallback(h=>{u.current=h},[]),disableHoverableContent:n,children:i})};WR.displayName=KR;var Od="Tooltip",[fY,Rp]=kp(Od),ZR=t=>{const{__scopeTooltip:e,children:s,open:r,defaultOpen:n,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=t,f=Xb(Od,t.__scopeTooltip),h=Tp(e),[p,g]=y.useState(null),x=Ha(),b=y.useRef(0),_=c??f.disableHoverableContent,j=u??f.delayDuration,N=y.useRef(!1),[C,E]=Mo({prop:r,defaultProp:n??!1,onChange:$=>{$?(f.onOpen(),document.dispatchEvent(new CustomEvent(cy))):f.onClose(),i==null||i($)},caller:Od}),S=y.useMemo(()=>C?N.current?"delayed-open":"instant-open":"closed",[C]),P=y.useCallback(()=>{window.clearTimeout(b.current),b.current=0,N.current=!1,E(!0)},[E]),R=y.useCallback(()=>{window.clearTimeout(b.current),b.current=0,E(!1)},[E]),D=y.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{N.current=!0,E(!0),b.current=0},j)},[j,E]);return y.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),a.jsx(Pb,{...h,children:a.jsx(fY,{scope:e,contentId:x,open:C,stateAttribute:S,trigger:p,onTriggerChange:g,onTriggerEnter:y.useCallback(()=>{f.isOpenDelayedRef.current?D():P()},[f.isOpenDelayedRef,D,P]),onTriggerLeave:y.useCallback(()=>{_?R():(window.clearTimeout(b.current),b.current=0)},[R,_]),onOpen:P,onClose:R,disableHoverableContent:_,children:s})})};ZR.displayName=Od;var uy="TooltipTrigger",QR=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,n=Rp(uy,s),i=Xb(uy,s),c=Tp(s),u=y.useRef(null),f=_t(e,u,n.onTriggerChange),h=y.useRef(!1),p=y.useRef(!1),g=y.useCallback(()=>h.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),a.jsx(_p,{asChild:!0,...c,children:a.jsx(Ze.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:f,onPointerMove:Xe(t.onPointerMove,x=>{x.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:Xe(t.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:Xe(t.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Xe(t.onFocus,()=>{h.current||n.onOpen()}),onBlur:Xe(t.onBlur,n.onClose),onClick:Xe(t.onClick,n.onClose)})})});QR.displayName=uy;var hY="TooltipPortal",[uZ,mY]=kp(hY,{forceMount:void 0}),jc="TooltipContent",JR=y.forwardRef((t,e)=>{const s=mY(jc,t.__scopeTooltip),{forceMount:r=s.forceMount,side:n="top",...i}=t,c=Rp(jc,t.__scopeTooltip);return a.jsx(Vr,{present:r||c.open,children:c.disableHoverableContent?a.jsx(eM,{side:n,...i,ref:e}):a.jsx(pY,{side:n,...i,ref:e})})}),pY=y.forwardRef((t,e)=>{const s=Rp(jc,t.__scopeTooltip),r=Xb(jc,t.__scopeTooltip),n=y.useRef(null),i=_t(e,n),[c,u]=y.useState(null),{trigger:f,onClose:h}=s,p=n.current,{onPointerInTransitChange:g}=r,x=y.useCallback(()=>{u(null),g(!1)},[g]),b=y.useCallback((_,j)=>{const N=_.currentTarget,C={x:_.clientX,y:_.clientY},E=bY(C,N.getBoundingClientRect()),S=wY(C,E),P=_Y(j.getBoundingClientRect()),R=NY([...S,...P]);u(R),g(!0)},[g]);return y.useEffect(()=>()=>x(),[x]),y.useEffect(()=>{if(f&&p){const _=N=>b(N,p),j=N=>b(N,f);return f.addEventListener("pointerleave",_),p.addEventListener("pointerleave",j),()=>{f.removeEventListener("pointerleave",_),p.removeEventListener("pointerleave",j)}}},[f,p,b,x]),y.useEffect(()=>{if(c){const _=j=>{const N=j.target,C={x:j.clientX,y:j.clientY},E=(f==null?void 0:f.contains(N))||(p==null?void 0:p.contains(N)),S=!jY(C,c);E?x():S&&(x(),h())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[f,p,c,h,x]),a.jsx(eM,{...t,ref:i})}),[gY,xY]=kp(Od,{isInside:!1}),vY=i8("TooltipContent"),eM=y.forwardRef((t,e)=>{const{__scopeTooltip:s,children:r,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=t,f=Rp(jc,s),h=Tp(s),{onClose:p}=f;return y.useEffect(()=>(document.addEventListener(cy,p),()=>document.removeEventListener(cy,p)),[p]),y.useEffect(()=>{if(f.trigger){const g=x=>{const b=x.target;b!=null&&b.contains(f.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[f.trigger,p]),a.jsx(Bd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:a.jsxs(Db,{"data-state":f.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(vY,{children:r}),a.jsx(gY,{scope:s,isInside:!0,children:a.jsx(fG,{id:f.contentId,role:"tooltip",children:n||r})})]})})});JR.displayName=jc;var tM="TooltipArrow",yY=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...r}=t,n=Tp(s);return xY(tM,s).isInside?null:a.jsx(Ob,{...n,...r,ref:e})});yY.displayName=tM;function bY(t,e){const s=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),n=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,r,n,i)){case i:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function wY(t,e,s=5){const r=[];switch(e){case"top":r.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":r.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":r.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":r.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return r}function _Y(t){const{top:e,right:s,bottom:r,left:n}=t;return[{x:n,y:e},{x:s,y:e},{x:s,y:r},{x:n,y:r}]}function jY(t,e){const{x:s,y:r}=t;let n=!1;for(let i=0,c=e.length-1;i<e.length;c=i++){const u=e[i],f=e[c],h=u.x,p=u.y,g=f.x,x=f.y;p>r!=x>r&&s<(g-h)*(r-p)/(x-p)+h&&(n=!n)}return n}function NY(t){const e=t.slice();return e.sort((s,r)=>s.x<r.x?-1:s.x>r.x?1:s.y<r.y?-1:s.y>r.y?1:0),SY(e)}function SY(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const n=t[r];for(;e.length>=2;){const i=e[e.length-1],c=e[e.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))e.pop();else break}e.push(n)}e.pop();const s=[];for(let r=t.length-1;r>=0;r--){const n=t[r];for(;s.length>=2;){const i=s[s.length-1],c=s[s.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var CY=WR,EY=ZR,AY=QR,sM=JR;const kY=CY,TY=EY,RY=AY,rM=y.forwardRef(({className:t,sideOffset:e=4,...s},r)=>a.jsx(sM,{ref:r,sideOffset:e,className:Be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));rM.displayName=sM.displayName;function jn({value:t,baseValue:e,equipmentBonus:s=0,modifications:r=[],size:n="md",showTooltip:i=!1,label:c,icon:u,className:f=""}){const h=isNaN(t)||t===void 0||t===null?0:t,p=isNaN(e||0)||e===void 0||e===null?0:e||0,g=isNaN(s)||s===void 0?0:s,x=r.reduce((N,C)=>C.type==="flat"?N+(isNaN(C.value)?0:C.value):N+(p||h)*((isNaN(C.value)?0:C.value)/100),0),b=r.length>0,_={sm:"text-xs",md:"text-sm",lg:"text-base"},j=a.jsxs("div",{className:`inline-flex items-center gap-1 ${_[n]} ${f}`,children:[u&&a.jsx("span",{className:"inline-flex",children:u}),a.jsx("span",{className:`font-bold transition-all duration-300 ${b?"text-purple-400 animate-pulse drop-shadow-[0_0_6px_rgba(168,85,247,0.4)]":g>0?"text-green-400":""}`,children:Math.round(h)}),b&&a.jsxs("div",{className:"inline-flex items-center",children:[a.jsx("div",{className:"w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),a.jsxs("div",{className:"ml-1 text-purple-300 text-xs animate-bounce",children:[x>0?"+":"",Math.round(x)]})]}),c&&a.jsx("span",{className:"text-muted-foreground ml-1",children:c})]});return i?a.jsx(kY,{children:a.jsxs(TY,{children:[a.jsx(RY,{asChild:!0,children:j}),a.jsx(rM,{className:"max-w-xs p-3",children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"font-semibold text-sm",children:"Detalhes da Estatística"}),e!==void 0&&!isNaN(p)&&a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Base:"}),a.jsx("span",{children:Math.round(p)})]}),g>0&&a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-muted-foreground",children:"Equipamentos:"}),a.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[a.jsx(Bo,{className:"h-3 w-3"}),Math.round(g)]})]}),r.length>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs font-medium text-purple-400 border-t border-border pt-2",children:"Efeitos Mágicos:"}),r.map((N,C)=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-purple-300 flex items-center gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),N.source_spell]}),a.jsxs("span",{className:"text-purple-400 flex items-center gap-1",children:[N.value>0?a.jsx(Br,{className:"h-3 w-3"}):a.jsx(Sv,{className:"h-3 w-3"}),N.value>0?"+":"",N.value,N.type==="percentage"?"%":""]})]},C)),a.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-purple-500/20",children:[a.jsx("span",{className:"text-purple-300",children:"Total Mágico:"}),a.jsxs("span",{className:"text-purple-400 font-medium",children:[x>0?"+":"",Math.round(x)]})]})]}),a.jsxs("div",{className:"flex justify-between text-xs font-medium pt-2 border-t border-border",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{className:`${b?"text-purple-400":"text-foreground"}`,children:Math.round(h)})]})]})})]})}):j}function MY({player:t}){const e=Ot(),[s,r]=y.useState(!1),[n,i]=y.useState(!1),c=async()=>{try{i(!0);const R=await Ge.getUnlockedCheckpoints(t.id);if(!R.success||!R.data||R.data.length===0){console.error("Nenhum checkpoint encontrado");return}const $=R.data.sort((M,U)=>U.floor-M.floor)[0];console.log(`[QuickPlay] Iniciando do checkpoint: Andar ${$.floor} - ${$.description}`);const A=await Ge.startFromCheckpoint(t.id,$.floor);if(!A.success){console.error("Erro ao iniciar do checkpoint:",A.error);return}console.log("[QuickPlay] Checkpoint configurado com sucesso. Redirecionando para batalha..."),e({to:"/game/play/hub/battle/$character",params:{character:t.id},search:{character:t.id}})}catch(R){console.error("Erro no início rápido:",R)}finally{i(!1)}},f=(R=>R<=1?0:Math.floor(100*Math.pow(1.5,R-2)))(t.level),h=t.xp_next_level,p=t.xp-f,g=h-f,x=Math.max(0,Math.min(100,p/g*100)),b=t.hp/t.max_hp*100,_=t.mana/t.max_mana*100,j=[{name:"FOR",fullName:"Força",value:t.strength||10,icon:Tt,color:"text-red-400"},{name:"AGI",fullName:"Agilidade",value:t.dexterity||10,icon:At,color:"text-green-400"},{name:"INT",fullName:"Inteligência",value:t.intelligence||10,icon:ct,color:"text-blue-400"},{name:"SAB",fullName:"Sabedoria",value:t.wisdom||10,icon:Nt,color:"text-purple-400"},{name:"VIT",fullName:"Vitalidade",value:t.vitality||10,icon:ds,color:"text-pink-400"},{name:"SOR",fullName:"Sorte",value:t.luck||10,icon:Ti,color:"text-yellow-400"}],N=()=>b>=70?"bg-green-500":b>=40?"bg-yellow-500":b>=20?"bg-orange-500":"bg-red-500",C=()=>_>=70?"bg-blue-500":_>=40?"bg-cyan-500":_>=20?"bg-indigo-500":"bg-purple-500",E=R=>{switch(R){case"sword_mastery":return a.jsx(Tt,{className:"h-4 w-4 text-red-400"});case"axe_mastery":return a.jsx(dI,{className:"h-4 w-4 text-orange-400"});case"blunt_mastery":return a.jsx(Ci,{className:"h-4 w-4 text-yellow-400"});case"defense_mastery":return a.jsx(bt,{className:"h-4 w-4 text-blue-400"});case"magic_mastery":return a.jsx(ct,{className:"h-4 w-4 text-purple-400"});default:return a.jsx(er,{className:"h-4 w-4 text-gray-400"})}},S=R=>{switch(R){case"sword_mastery":return"Maestria com Espadas";case"axe_mastery":return"Maestria com Machados";case"blunt_mastery":return"Maestria com Armas Pesadas";case"defense_mastery":return"Maestria em Defesa";case"magic_mastery":return"Maestria Mágica";default:return R}},P=[{key:"sword_mastery",level:t.sword_mastery||1,xp:t.sword_mastery_xp||0},{key:"axe_mastery",level:t.axe_mastery||1,xp:t.axe_mastery_xp||0},{key:"blunt_mastery",level:t.blunt_mastery||1,xp:t.blunt_mastery_xp||0},{key:"defense_mastery",level:t.defense_mastery||1,xp:t.defense_mastery_xp||0},{key:"magic_mastery",level:t.magic_mastery||1,xp:t.magic_mastery_xp||0}].filter(R=>R.level>1||R.xp>0);return a.jsxs(De,{className:"w-full bg-slate-900/80 border-slate-700 shadow-xl",children:[a.jsx(ft,{className:"pb-3",children:a.jsxs(pt,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-slate-700 rounded-lg",children:a.jsx(vm,{className:"h-5 w-5 text-slate-300"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-100",children:t.name}),a.jsx("p",{className:"text-sm text-slate-400",children:"Aventureiro"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[a.jsxs(de,{onClick:c,disabled:n,size:"sm",className:"quick-play-button relative overflow-hidden bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 hover:from-violet-500 hover:via-purple-500 hover:to-indigo-500 text-white border border-violet-500/20 shadow-lg transition-all duration-300 hover:shadow-violet-500/25 hover:shadow-xl hover:-translate-y-0.5 flex-shrink-0 group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:transform-none",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600/50 via-purple-600/50 to-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),!n&&a.jsx("div",{className:"quick-start-indicator absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full shadow-sm shadow-amber-400/50"}),a.jsx(_v,{className:`h-3 w-3 mr-1.5 relative z-10 transition-transform duration-300 ${n?"animate-spin":"group-hover:scale-110 group-hover:drop-shadow-lg"}`}),a.jsx("span",{className:"relative z-10 font-medium tracking-wide",children:n?"Iniciando...":"Jogar"}),!n&&a.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-500",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 group-hover:animate-pulse"})})]}),a.jsxs(qe,{variant:"outline",className:"border-amber-500 text-amber-400 bg-amber-500/10 flex-shrink-0",children:[a.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Nível ",t.level]}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>r(!s),className:"text-slate-400 hover:text-slate-200 flex-shrink-0",children:s?a.jsx(xc,{className:"h-4 w-4"}):a.jsx(Ro,{className:"h-4 w-4"})})]})]})}),a.jsxs(He,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Status"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[a.jsx(ds,{className:"h-4 w-4 text-red-400"}),"HP",t.hp<t.max_hp&&a.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"})]}),a.jsxs("span",{className:"text-slate-400",children:[t.hp,"/",t.max_hp]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:b,className:"h-2"}),a.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${N()}`,style:{width:`${b}%`}})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[a.jsx(ct,{className:"h-4 w-4 text-blue-400"}),"Mana"]}),a.jsxs("span",{className:"text-slate-400",children:[t.mana,"/",t.max_mana]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:_,className:"h-2"}),a.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${C()}`,style:{width:`${_}%`}})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[a.jsx(Nt,{className:"h-4 w-4 text-yellow-400"}),"XP"]}),a.jsxs("span",{className:"text-slate-400",children:[p.toLocaleString(),"/",g.toLocaleString()]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:x,className:"h-2"}),a.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${x}%`}})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Combat Stats"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Tt,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-muted-foreground",children:"ATK"})]}),a.jsx("span",{className:"font-bold text-red-400",children:a.jsx(jn,{value:t.atk,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,className:"text-red-400",size:"sm",showTooltip:!0})})]}),t.magic_attack&&t.magic_attack>0&&a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ct,{className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"text-muted-foreground",children:"M.ATK"})]}),a.jsx("span",{className:"font-bold text-purple-400",children:t.magic_attack})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(bt,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-muted-foreground",children:"DEF"})]}),a.jsx("span",{className:"font-bold text-blue-400",children:a.jsx(jn,{value:t.def,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,className:"text-blue-400",size:"sm",showTooltip:!0})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(At,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-muted-foreground",children:"SPD"})]}),a.jsx("span",{className:"font-bold text-yellow-400",children:a.jsx(jn,{value:t.speed,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,className:"text-yellow-400",size:"sm",showTooltip:!0})})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nt,{className:"h-4 w-4 text-amber-400"}),a.jsx("span",{className:"text-muted-foreground",children:"CRIT"})]}),a.jsxs("span",{className:"font-bold text-amber-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})]})]}),a.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Gold"})]}),a.jsx("p",{className:"text-lg font-bold text-yellow-400",children:t.gold.toLocaleString("pt-BR")})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Atributos"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:j.map(R=>{const D=R.icon;return a.jsx("div",{className:"bg-slate-800/50 p-2 rounded-lg border border-slate-700 hover:bg-slate-700/50 transition-colors",title:R.fullName,children:a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(D,{className:`h-3 w-3 ${R.color}`}),a.jsx("span",{className:"text-xs font-medium text-slate-400",children:R.name}),a.jsx("span",{className:`text-sm font-bold ${R.color}`,children:R.value})]})},R.name)})}),!!(t.critical_chance||t.critical_damage)&&a.jsxs("div",{className:"space-y-2",children:[!!t.critical_chance&&a.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"h-4 w-4 text-orange-400"}),a.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Chance Crítica"})]}),a.jsxs("p",{className:"text-sm font-bold text-orange-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})}),t.critical_damage&&a.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(er,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Dano Crítico"})]}),a.jsxs("p",{className:"text-sm font-bold text-red-400",children:[(t.critical_damage||0).toFixed(0),"%"]})]})})]})]})]}),s&&a.jsxs("div",{className:"border-t border-slate-700 pt-4 space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Habilidades de Combate"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:P.map(R=>{const D=R.level*100,$=(R.level-1)*100,A=R.xp-$,M=D-$,U=Math.max(0,Math.min(100,A/M*100));return a.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"flex items-center justify-center",children:E(R.key)}),a.jsx("span",{className:"text-xs font-medium text-slate-400 text-center",children:S(R.key)}),a.jsxs(qe,{variant:"outline",className:"border-current bg-transparent text-xs",children:["Nv. ",R.level]}),R.xp>0&&a.jsxs("div",{className:"w-full",children:[a.jsx("div",{className:"w-full h-1 bg-slate-600 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${U}%`}})}),a.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:[A,"/",M," XP"]})]})]})},R.key)})})]})]})]})}function PY({title:t,description:e,icon:s,onClick:r,badge:n,badgeColor:i="secondary",accent:c,isPrimary:u=!1}){return a.jsx(De,{className:`group relative overflow-hidden border-slate-700 bg-slate-900/80 hover:bg-slate-800/80 transition-all duration-300 hover:border-slate-600 cursor-pointer ${u?"ring-2 ring-red-600/30":""}`,children:a.jsxs(de,{variant:"ghost",className:"w-full h-full p-3 flex flex-col items-center justify-center space-y-2 hover:bg-transparent min-h-[120px] cursor-pointer",onClick:r,children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`p-3 rounded-lg bg-slate-800 group-hover:bg-slate-700 transition-colors duration-300 ${c}`,children:a.jsx(s,{className:"h-5 w-5 text-slate-300 group-hover:text-white transition-colors duration-300"})}),n&&a.jsx(qe,{variant:i,className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs font-bold bg-red-600 text-white border-red-500",children:n})]}),a.jsxs("div",{className:"text-center space-y-1 max-w-full",children:[a.jsx("h3",{className:"font-semibold text-sm text-slate-200 group-hover:text-white transition-colors duration-300 leading-tight",children:t}),a.jsx("p",{className:"text-xs text-slate-400 group-hover:text-slate-300 transition-colors duration-300 leading-tight px-1 break-words",children:e})]})]})})}function DY({player:t,onStartAdventure:e,onOpenMap:s,onOpenCharacterStats:r,onOpenShop:n,onOpenInventory:i,onOpenEquipment:c,onOpenSpells:u,onOpenCrafting:f,onOpenCemetery:h,onReturnToSelection:p}){const g=[{title:"Entrar na Torre",description:"Nova aventura",icon:Cy,onClick:e,accent:"border-red-600/30",isPrimary:!0},{title:"Mapa da Torre",description:"Usar checkpoint",icon:wv,onClick:s,accent:"border-blue-600/30"},{title:"Atributos",description:"Evoluir personagem",icon:Br,onClick:r,badge:t.attribute_points&&t.attribute_points>0?t.attribute_points:void 0,badgeColor:"destructive",accent:"border-purple-600/30"},{title:"Grimório",description:"Gerenciar magias",icon:ct,onClick:u,accent:"border-violet-600/30"},{title:"Loja",description:"Comprar itens",icon:xm,onClick:n,accent:"border-green-600/30"},{title:"Inventário",description:"Consumíveis",icon:hI,onClick:i,accent:"border-orange-600/30"},{title:"Equipamentos",description:"Armas e armaduras",icon:bt,onClick:c,accent:"border-amber-600/30"},{title:"Forja",description:"Crafting de itens",icon:Ci,onClick:f,accent:"border-cyan-600/30"},{title:"Cemitério",description:"Personagens mortos",icon:Qs,onClick:h,accent:"border-red-600/30"},{title:"Trocar",description:"Outro personagem",icon:hs,onClick:p,accent:"border-slate-600/30"}];return a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-10 gap-3",children:g.map((x,b)=>a.jsx(PY,{title:x.title,description:x.description,icon:x.icon,onClick:x.onClick,badge:x.badge,badgeColor:x.badgeColor,accent:x.accent,isPrimary:x.isPrimary},b))})}function OY({player:t,showHealNotification:e,healInfo:s,onDismissHealNotification:r}){const n=t.attribute_points&&t.attribute_points>0;return!e&&!n?null:a.jsxs("div",{className:"space-y-3",children:[n&&a.jsx(De,{className:"bg-amber-950/50 border-amber-700/50 shadow-lg backdrop-blur-sm",children:a.jsx(He,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-600/20 rounded-lg",children:a.jsx(Nt,{className:"h-4 w-4 text-amber-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-amber-200 text-sm",children:"Pontos de Atributo Disponíveis"}),a.jsxs("div",{className:"text-xs text-amber-300/80",children:["Você tem"," ",a.jsx(qe,{variant:"outline",className:"mx-1 text-amber-200 bg-amber-600/20 border-amber-500/50 text-xs px-1.5 py-0.5",children:t.attribute_points}),'ponto(s) para distribuir em "Atributos".']})]}),a.jsx(ME,{className:"h-4 w-4 text-amber-500 animate-pulse"})]})})}),e&&s&&a.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in slide-in-from-top-2 duration-500",children:a.jsx(De,{className:"bg-emerald-950/80 border-emerald-700/50 shadow-xl backdrop-blur-md",children:a.jsx(He,{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-emerald-600/20 rounded-lg",children:a.jsx(ds,{className:"h-4 w-4 text-emerald-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-emerald-200 text-sm",children:[s.character," foi curado!"]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-300",children:[a.jsx("span",{children:"HP:"}),a.jsxs("span",{className:"font-mono bg-emerald-900/50 px-2 py-0.5 rounded text-xs",children:[s.oldHp," → ",s.newHp]}),a.jsxs(qe,{variant:"outline",className:"text-emerald-300 border-emerald-500/50 bg-emerald-600/20 text-xs px-1.5 py-0.5",children:["+",s.newHp-s.oldHp]})]})]}),a.jsx(de,{variant:"ghost",size:"sm",onClick:r,className:"h-6 w-6 p-0 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-800/50",children:a.jsx(zi,{className:"h-3 w-3"})})]})})})})]})}const aM=Wt("/_authenticated/game/play/hub")({component:$Y,validateSearch:t=>({character:t.character||""})});function $Y(){const t=Ii(),{character:e}=aM.useSearch();return t.pathname==="/game/play/hub"?a.jsx(LY,{characterId:e}):a.jsx(Lo,{})}function LY({characterId:t}){const e=Ot(),s=$c(),{gameState:r,loadCharacterForHub:n}=s,{player:i}=r,[c,u]=y.useState(!0),[f,h]=y.useState(!1),[p,g]=y.useState(!1),[x,b]=y.useState(!1),[_,j]=y.useState(null);if(console.log("[GameHub] Estado atual completo:",{player:{id:i.id,name:i.name,level:i.level,gold:i.gold,floor:i.floor,hp:i.hp,max_hp:i.max_hp},characterId:t,gameMode:r.mode,hasLoadCharacterForHub:typeof n=="function",gameContextKeys:Object.keys(s)}),y.useEffect(()=>{(async()=>{if(!t){console.log("[GameHub] Sem characterId, redirecionando..."),e({to:"/game/play"});return}if(f&&i.id===t&&i.name&&i.level>0){console.log("[GameHub] Personagem já carregado corretamente:",i.name),u(!1);return}try{console.log("[GameHub] Carregando personagem:",t),u(!0);const S=await Ge.getCharacterForGame(t);if(S.success&&S.data){console.log("[GameHub] Personagem carregado com sucesso:",{name:S.data.name,level:S.data.level,gold:S.data.gold,floor:S.data.floor,hp:S.data.hp,max_hp:S.data.max_hp});const P=sessionStorage.getItem(`player_${t}`);if(P)try{const R=JSON.parse(P),D=S.data.hp-R.hp,$=D/S.data.max_hp*100;D>0&&$>=5&&(j({oldHp:R.hp,newHp:S.data.hp,character:S.data.name}),b(!0),setTimeout(()=>{b(!1)},5e3))}catch(R){console.warn("[GameHub] Erro ao processar cache:",R)}sessionStorage.setItem(`player_${t}`,JSON.stringify(S.data)),await n(S.data),h(!0),console.log("[GameHub] loadCharacterForHub executado, estado após carregamento:",r.player)}else console.error("[GameHub] Erro na resposta do serviço:",S.error),me.error("Erro ao carregar personagem",{description:S.error}),e({to:"/game/play"})}catch(S){console.error("[GameHub] Erro ao carregar personagem:",S),me.error("Erro ao carregar personagem"),e({to:"/game/play"})}finally{u(!1)}})()},[t]),c)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-950",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-500"})});const N=async()=>{try{await Ge.updateCharacterFloor(i.id,1),e({to:"/game/play/hub/battle/$character",params:{character:i.id},search:{character:i.id}})}catch(E){console.error("Erro ao iniciar do começo:",E),me.error("Erro ao iniciar aventura")}},C=async E=>{try{const S=await Ge.startFromCheckpoint(i.id,E);S.success?e({to:"/game/play/hub/battle/$character",params:{character:i.id},search:{character:i.id}}):me.error("Erro ao iniciar do checkpoint",{description:S.error})}catch(S){console.error("Erro ao iniciar do checkpoint:",S),me.error("Erro ao iniciar do checkpoint")}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 to-slate-900 p-4",children:a.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-4",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>e({to:"/game/play"}),className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Trocar Personagem"}),a.jsx("span",{className:"sm:hidden",children:"Trocar"})]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:["Hub de ",i.name||"Carregando..."]}),a.jsxs("p",{className:"text-sm sm:text-base text-slate-300",children:["Andar ",Math.max(1,i.floor||1)," • Nível ",i.level||1," •"," ",(i.gold||0).toLocaleString("pt-BR")," Gold"]})]})]})}),a.jsx(OY,{player:i,showHealNotification:x,healInfo:_,onDismissHealNotification:()=>b(!1)}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(MY,{player:i}),a.jsx(DY,{player:i,onStartAdventure:N,onOpenMap:()=>g(!0),onOpenCharacterStats:()=>window.location.href=`/game/play/hub/character-stats?character=${i.id}`,onOpenShop:()=>window.location.href=`/game/play/hub/shop?character=${i.id}`,onOpenInventory:()=>window.location.href=`/game/play/hub/inventory?character=${i.id}`,onOpenEquipment:()=>window.location.href=`/game/play/hub/equipment?character=${i.id}`,onOpenSpells:()=>window.location.href=`/game/play/hub/spells?character=${i.id}`,onOpenCrafting:()=>window.location.href=`/game/play/hub/crafting?character=${i.id}`,onOpenCemetery:()=>window.location.href="/game/play/hub/cemetery",onReturnToSelection:()=>e({to:"/game/play"})})]}),a.jsx(cY,{isOpen:p,onClose:()=>g(!1),character:{id:i.id,floor:i.floor},onStartFromCheckpoint:C})]})})}const nM=Wt("/_authenticated/game/play/hub/spells")({component:IY,validateSearch:t=>({character:t.character||""})});function IY(){const t=Ot(),{character:e}=nM.useSearch(),[s,r]=y.useState(null),[n,i]=y.useState([]),[c,u]=y.useState(null),[f,h]=y.useState({slot1:null,slot2:null,slot3:null}),[p,g]=y.useState({slot1:null,slot2:null,slot3:null}),[x,b]=y.useState(!0),[_,j]=y.useState(!1),[N,C]=y.useState(""),[E,S]=y.useState("all"),[P,R]=y.useState("all");y.useEffect(()=>{if(!e){me.error("Personagem não especificado"),t({to:"/game/play"});return}D()},[e]);const D=async()=>{if(e){b(!0);try{const k=await Ge.getCharacter(e);if(!k.success||!k.data)throw new Error("Erro ao carregar personagem");r(k.data);const B=await Zs.getCharacterAvailableSpells(e);if(!B.success||!B.data)throw new Error("Erro ao carregar magias");i(B.data);const z=await Zs.getCharacterSpellStats(e);z.success&&z.data&&u(z.data);const W=B.data.filter(X=>X.is_equipped),L={slot1:W.find(X=>X.slot_position===1)||null,slot2:W.find(X=>X.slot_position===2)||null,slot3:W.find(X=>X.slot_position===3)||null};h(L),g(L)}catch(k){console.error("Erro ao carregar dados:",k),me.error("Erro ao carregar dados das magias")}finally{b(!1)}}},$=(k,B)=>{h(z=>{const W={...z};return Object.keys(W).forEach(L=>{var ae;const X=L;((ae=W[X])==null?void 0:ae.id)===k.id&&(W[X]=null)}),W[B]=k,W})},A=k=>{h(B=>({...B,[k]:null}))},M=async()=>{var k,B,z;if(e){j(!0);try{const W=[((k=f.slot1)==null?void 0:k.id)||null,((B=f.slot2)==null?void 0:B.id)||null,((z=f.slot3)==null?void 0:z.id)||null],L=await Zs.setCharacterSpells(e,W);if(!L.success)throw new Error(L.error||"Erro ao salvar seleção");g({...f}),me.success("Seleção de magias salva com sucesso!"),await D()}catch(W){console.error("Erro ao salvar seleção:",W),me.error("Erro ao salvar seleção de magias")}finally{j(!1)}}},U=k=>({damage:a.jsx(er,{className:"h-5 w-5"}),heal:a.jsx(ds,{className:"h-5 w-5"}),buff:a.jsx(bt,{className:"h-5 w-5"}),debuff:a.jsx(Qs,{className:"h-5 w-5"}),dot:a.jsx(Qm,{className:"h-5 w-5"}),hot:a.jsx(ct,{className:"h-5 w-5"})})[k]||a.jsx(At,{className:"h-5 w-5"}),Y=k=>({damage:"text-red-500 border-red-500/30 bg-red-500/5",heal:"text-green-500 border-green-500/30 bg-green-500/5",buff:"text-blue-500 border-blue-500/30 bg-blue-500/5",debuff:"text-purple-500 border-purple-500/30 bg-purple-500/5",dot:"text-orange-500 border-orange-500/30 bg-orange-500/5",hot:"text-emerald-500 border-emerald-500/30 bg-emerald-500/5"})[k]||"text-gray-500 border-gray-500/30 bg-gray-500/5",V=k=>k<=15?"early":k<=35?"mid":"high",F=k=>{const B=V(k);return{early:"text-green-400",mid:"text-yellow-400",high:"text-red-400"}[B]},Q=n.filter(k=>{const B=k.name.toLowerCase().includes(N.toLowerCase())||k.description.toLowerCase().includes(N.toLowerCase()),z=E==="all"||k.effect_type===E,W=P==="all"||V(k.unlocked_at_level)===P;return B&&z&&W}),G=JSON.stringify(f)!==JSON.stringify(p);return x?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Carregando magias..."})]})}):s?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a.jsx(ct,{className:"h-8 w-8 text-purple-500"}),"Grimório de Magias"]}),a.jsxs("p",{className:"text-muted-foreground",children:["Gerencie as magias de"," ",a.jsx("span",{className:"font-medium text-primary",children:s.name})]})]})]}),G&&a.jsx(de,{onClick:M,disabled:_,size:"lg",className:"bg-purple-600 hover:bg-purple-700",children:_?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Salvar Seleção"]})})]}),c&&a.jsxs(De,{className:"mb-6",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Br,{className:"h-5 w-5"}),"Estatísticas de Magia"]})}),a.jsx(He,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-500",children:c.total_available}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Disponíveis"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:[c.total_equipped,"/3"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Equipadas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:s.level}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Nível Atual"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:c.highest_level_unlocked}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Máximo Desbloqueado"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(De,{className:"lg:col-span-2",children:[a.jsxs(ft,{children:[a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Ti,{className:"h-5 w-5"}),"Seleção de Magias (Máximo 3)"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Jm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ps,{placeholder:"Buscar magias...",value:N,onChange:k=>C(k.target.value),className:"pl-10"})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("select",{value:E,onChange:k=>S(k.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[a.jsx("option",{value:"all",children:"Todos os Tipos"}),a.jsx("option",{value:"damage",children:"Dano"}),a.jsx("option",{value:"heal",children:"Cura"}),a.jsx("option",{value:"buff",children:"Benefício"}),a.jsx("option",{value:"debuff",children:"Maldição"}),a.jsx("option",{value:"dot",children:"Dano Contínuo"}),a.jsx("option",{value:"hot",children:"Cura Contínua"})]}),a.jsxs("select",{value:P,onChange:k=>R(k.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[a.jsx("option",{value:"all",children:"Todos os Níveis"}),a.jsx("option",{value:"early",children:"Iniciante (1-15)"}),a.jsx("option",{value:"mid",children:"Intermediário (16-35)"}),a.jsx("option",{value:"high",children:"Avançado (36-50)"})]})]})]})]}),a.jsx(He,{children:a.jsx(rc,{className:"h-[600px]",children:a.jsxs("div",{className:"grid gap-3",children:[Q.map(k=>{const B=Object.values(f).some(W=>(W==null?void 0:W.id)===k.id),z=k.unlocked_at_level<=s.level;return a.jsx(De,{className:`transition-all cursor-pointer ${B?"ring-2 ring-purple-500 bg-purple-500/10":z?"hover:bg-accent/50":"opacity-50 cursor-not-allowed"} ${Y(k.effect_type)}`,onClick:()=>{if(z){if(B){Object.keys(f).forEach(W=>{var X;const L=W;((X=f[L])==null?void 0:X.id)===k.id&&A(L)});return}f.slot1?f.slot2?f.slot3?me.warning("Você já selecionou 3 magias! Remova uma para adicionar outra."):$(k,"slot3"):$(k,"slot2"):$(k,"slot1")}},children:a.jsx(He,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${Y(k.effect_type)}`,children:U(k.effect_type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold truncate",children:k.name}),B&&a.jsx(qe,{variant:"secondary",className:"bg-purple-500/20 text-purple-400",children:"Selecionada"}),!z&&a.jsxs(qe,{variant:"destructive",className:"text-xs",children:["Nível ",k.unlocked_at_level]})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:k.description}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[a.jsxs(qe,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(bv,{className:"h-3 w-3"}),k.mana_cost," Mana"]}),a.jsxs(qe,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(gm,{className:"h-3 w-3"}),k.cooldown,"T CD"]}),a.jsxs(qe,{variant:"outline",className:"flex items-center gap-1",children:[a.jsx(er,{className:"h-3 w-3"}),k.effect_value]}),a.jsxs(qe,{variant:"outline",className:`flex items-center gap-1 ${F(k.unlocked_at_level)}`,children:[a.jsx(Nt,{className:"h-3 w-3"}),"Nível ",k.unlocked_at_level]})]})]})]})})},k.id)}),Q.length===0&&a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(ct,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Nenhuma magia encontrada com os filtros selecionados"})]})]})})})]}),a.jsxs(De,{children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(At,{className:"h-5 w-5"}),"Magias Selecionadas"]})}),a.jsxs(He,{className:"space-y-4",children:[[1,2,3].map(k=>{const B=`slot${k}`,z=f[B];return a.jsxs(De,{className:`p-4 border-2 border-dashed transition-all ${z?`border-solid ${Y(z.effect_type)}`:"border-muted-foreground/20 hover:border-muted-foreground/40"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs(qe,{variant:"outline",className:"text-xs",children:["Slot ",k," (Tecla ",k,")"]}),z&&a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>A(B),className:"h-6 w-6 p-0 hover:bg-red-500/10 hover:text-red-500",children:a.jsx(zi,{className:"h-3 w-3"})})]}),z?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`p-1 rounded ${Y(z.effect_type)}`,children:U(z.effect_type)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-sm",children:z.name}),a.jsx("p",{className:"text-xs text-muted-foreground",children:Zs.translateEffectType(z.effect_type)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(bv,{className:"h-3 w-3"}),a.jsx("span",{children:z.mana_cost})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(gm,{className:"h-3 w-3"}),a.jsxs("span",{children:[z.cooldown,"T"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:z.effect_value})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nt,{className:"h-3 w-3"}),a.jsxs("span",{children:["Nv ",z.unlocked_at_level]})]})]})]}):a.jsxs("div",{className:"text-center text-muted-foreground",children:[a.jsx(ct,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),a.jsx("p",{className:"text-xs",children:"Clique em uma magia para equipar"})]})]},k)}),G&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-yellow-400 flex items-center gap-2",children:[a.jsx("span",{className:"h-2 w-2 bg-yellow-400 rounded-full animate-pulse"}),"Você tem alterações não salvas"]})})]})]})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground",children:"Personagem não encontrado"}),a.jsx(de,{onClick:()=>t({to:"/game/play"}),className:"mt-4",children:"Voltar"})]})})}var BY="Separator",y2="horizontal",VY=["horizontal","vertical"],oM=y.forwardRef((t,e)=>{const{decorative:s,orientation:r=y2,...n}=t,i=zY(r)?r:y2,u=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(Ze.div,{"data-orientation":i,...u,...n,ref:e})});oM.displayName=BY;function zY(t){return VY.includes(t)}var iM=oM;const dy=y.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...r},n)=>a.jsx(iM,{ref:n,decorative:s,orientation:e,className:Be("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));dy.displayName=iM.displayName;var lM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b2=fe.createContext&&fe.createContext(lM),UY=["attr","size","title"];function qY(t,e){if(t==null)return{};var s=FY(t,e),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function FY(t,e){if(t==null)return{};var s={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;s[r]=t[r]}return s}function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Im.apply(this,arguments)}function w2(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,r)}return s}function Bm(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(s),!0).forEach(function(r){HY(t,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w2(Object(s)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(s,r))})}return t}function HY(t,e,s){return e=GY(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function GY(t){var e=XY(t,"string");return typeof e=="symbol"?e:e+""}function XY(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cM(t){return t&&t.map((e,s)=>fe.createElement(e.tag,Bm({key:s},e.attr),cM(e.child)))}function Mp(t){return e=>fe.createElement(YY,Im({attr:Bm({},t.attr)},e),cM(t.child))}function YY(t){var e=s=>{var{attr:r,size:n,title:i}=t,c=qY(t,UY),u=n||s.size||"1em",f;return s.className&&(f=s.className),t.className&&(f=(f?f+" ":"")+t.className),fe.createElement("svg",Im({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,r,c,{className:f,style:Bm(Bm({color:t.color||s.color},s.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&fe.createElement("title",null,i),t.children)};return b2!==void 0?fe.createElement(b2.Consumer,null,s=>e(s)):e(lM)}function _2(t){return Mp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(t)}function j2(t){return Mp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(t)}function N2(t){return Mp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function KY(t){return Mp({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const Yb=({characterId:t,newEquipment:e,slotType:s,currentEquipment:r,showTitle:n=!0,compact:i=!1})=>{const[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(null);y.useEffect(()=>{(async()=>{h(!0),g(null);try{if(r!==void 0){const N=a6(r,e);u(N)}else{const N=await Gt.compareEquipmentStats(t,e.id,s);if(N.success&&N.data){const C=N.data.map(E=>({stat_name:E.stat_name,current_value:E.current_value,new_value:E.new_value,difference:E.difference,is_improvement:E.is_improvement}));u(C)}else g(N.error||"Erro ao comparar equipamentos")}}catch(N){console.error("Erro ao carregar comparação:",N),g("Erro ao carregar comparação")}finally{h(!1)}})()},[t,e.id,s,r]);const x=(j,N)=>N===0?a.jsx(N2,{className:"text-gray-400"}):j?a.jsx(j2,{className:"text-green-500"}):a.jsx(_2,{className:"text-red-500"}),b=(j,N)=>j===0?"":`${N?"+":""}${j.toFixed(j%1===0?0:2)}`,_=(j,N)=>N===0?"text-gray-400":j?"text-green-500":"text-red-500";return f?a.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(KY,{className:"animate-spin text-blue-500"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Carregando comparação..."})]})}):p?a.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-red-50 border-red-200`,children:a.jsx("p",{className:"text-sm text-red-600",children:p})}):c.length===0?a.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:a.jsx("p",{className:"text-sm text-gray-600",children:r===null?"Nenhum equipamento equipado atualmente":"Nenhuma mudança nos atributos"})}):a.jsxs("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-white`,children:[n&&a.jsx("h4",{className:`${i?"text-sm":"text-base"} font-semibold text-gray-800 mb-2`,children:"Comparação de Atributos"}),a.jsx("div",{className:"space-y-1",children:c.map((j,N)=>a.jsxs("div",{className:`flex items-center justify-between ${i?"text-xs":"text-sm"} py-1`,children:[a.jsxs("span",{className:"text-gray-700 font-medium",children:[j.stat_name,":"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-gray-600",children:j.current_value.toFixed(j.current_value%1===0?0:2)}),a.jsxs("div",{className:"flex items-center space-x-1",children:[x(j.is_improvement,j.difference),a.jsx("span",{className:_(j.is_improvement,j.difference),children:b(j.difference,j.is_improvement)})]}),a.jsx("span",{className:"text-gray-800 font-semibold",children:j.new_value.toFixed(j.new_value%1===0?0:2)})]})]},N))}),!i&&a.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(j2,{className:"text-green-500"}),a.jsx("span",{children:"Melhoria"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(_2,{className:"text-red-500"}),a.jsx("span",{children:"Redução"})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(N2,{className:"text-gray-400"}),a.jsx("span",{children:"Sem mudança"})]})]})})]})},WY=({character:t,availableEquipment:e,availableConsumables:s,onEquipmentPurchase:r,onConsumablePurchase:n,onOpenInventory:i})=>{const[c,u]=y.useState("equipment"),[f,h]=y.useState(null),[p,g]=y.useState("all"),[x,b]=y.useState("all"),_=e.filter(D=>p==="all"?!0:D.type===p),j=s.filter(D=>x==="all"?!0:D.type===x),N=D=>{const $={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return $[D]||$.common},C=D=>{switch(D){case"weapon":return a.jsx(Tt,{className:"h-4 w-4 text-red-400"});case"armor":return a.jsx(bt,{className:"h-4 w-4 text-blue-400"});case"accessory":return a.jsx(ra,{className:"h-4 w-4 text-purple-400"});default:return a.jsx(ur,{className:"h-4 w-4 text-slate-400"})}},E=D=>{switch(D){case"potion":return a.jsx(ct,{className:"h-4 w-4 text-blue-500"});case"antidote":return a.jsx(bt,{className:"h-4 w-4 text-green-500"});case"buff":return a.jsx(At,{className:"h-4 w-4 text-purple-500"});default:return a.jsx(ur,{className:"h-4 w-4"})}},S=D=>{const $=t.gold>=D.price,A=t.level>=D.level_requirement,M=$&&A&&D.is_unlocked,U=(f==null?void 0:f.id)===D.id;return a.jsx(De,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${U?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${M?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(D),children:a.jsx(He,{className:"p-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:C(D.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:D.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(qe,{variant:"outline",className:`text-xs border ${N(D.rarity)}`,children:D.rarity}),D.rarity==="legendary"&&a.jsx(Nt,{className:"h-3 w-3 text-amber-400 animate-pulse"}),D.rarity==="epic"&&a.jsx(ct,{className:"h-3 w-3 text-purple-400"})]}),a.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[a.jsx(_r,{className:"h-3 w-3 text-amber-400"}),a.jsx("span",{className:"text-xs font-medium text-amber-300",children:D.price})]})]})]})})},D.id)},P=D=>{const $=t.gold>=D.price,A=t.level>=(D.level_requirement||1),M=$&&A,U=(f==null?void 0:f.id)===D.id;return a.jsx(De,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${U?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${M?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(D),children:a.jsx(He,{className:"p-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:E(D.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:D.name}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:D.type==="potion"?`+${D.effect_value}`:D.type==="antidote"?"Remove debuffs":`+${D.effect_value} por 3 turnos`}),a.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[a.jsx(_r,{className:"h-3 w-3 text-amber-400"}),a.jsx("span",{className:"text-xs font-medium text-amber-300",children:D.price})]})]})]})})},D.id)},R=()=>{if(!f)return a.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"Selecione um item para ver os detalhes"}),a.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em qualquer item da lista para visualizar suas informações completas"})]})});const D="atk_bonus"in f,$=f;if(D){const A=$,M=t.gold>=A.price,U=t.level>=A.level_requirement,Y=M&&U&&A.is_unlocked;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:C(A.type)}),a.jsx("h2",{className:"text-xl font-bold text-slate-100",children:A.name})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qe,{className:`border ${N(A.rarity)}`,children:A.rarity}),a.jsx("span",{className:"text-sm text-slate-400",children:A.type==="weapon"?"Arma":A.type==="armor"?"Armadura":"Acessório"})]})]}),a.jsx(dy,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrição"}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:A.description})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-3 text-slate-200",children:"Atributos"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[A.atk_bonus>0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-900/30 border border-red-800/50 rounded-lg backdrop-blur-sm",children:[a.jsx(Tt,{className:"h-4 w-4 text-red-400"}),a.jsxs("span",{className:"text-sm text-red-300 font-medium",children:["+",A.atk_bonus]})]}),A.def_bonus>0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-900/30 border border-blue-800/50 rounded-lg backdrop-blur-sm",children:[a.jsx(bt,{className:"h-4 w-4 text-blue-400"}),a.jsxs("span",{className:"text-sm text-blue-300 font-medium",children:["+",A.def_bonus]})]}),A.mana_bonus>0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-900/30 border border-purple-800/50 rounded-lg backdrop-blur-sm",children:[a.jsx(ra,{className:"h-4 w-4 text-purple-400"}),a.jsxs("span",{className:"text-sm text-purple-300 font-medium",children:["+",A.mana_bonus]})]}),A.speed_bonus>0&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-900/30 border border-amber-800/50 rounded-lg backdrop-blur-sm",children:[a.jsx(At,{className:"h-4 w-4 text-amber-400"}),a.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["+",A.speed_bonus]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Comparação com Equipamento Atual"}),a.jsx(Yb,{characterId:t.id,newEquipment:A,slotType:A.type,showTitle:!1,compact:!0})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Requisitos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[a.jsx("span",{className:"text-sm text-slate-300",children:"Nível:"}),a.jsx("span",{className:`text-sm font-medium ${U?"text-emerald-400":"text-red-400"}`,children:A.level_requirement})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[a.jsx("span",{className:"text-sm text-slate-300",children:"Preço:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(_r,{className:"h-3 w-3 text-amber-400"}),a.jsx("span",{className:`text-sm font-medium ${M?"text-emerald-400":"text-red-400"}`,children:A.price})]})]})]})]}),a.jsx(de,{onClick:()=>r(A),disabled:!Y,className:`w-full font-semibold ${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg shadow-primary/25":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:A.is_unlocked?U?M?"Comprar":"Gold Insuficiente":`Requer Nível ${A.level_requirement}`:"Item Bloqueado"})]})}else{const A=$,M=t.gold>=A.price,U=t.level>=(A.level_requirement||1),Y=M&&U;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:E(A.type)}),a.jsx("h2",{className:"text-xl font-bold text-slate-100",children:A.name})]}),a.jsx("span",{className:"text-sm text-slate-400",children:A.type==="potion"?"Poção":A.type==="antidote"?"Antídoto":"Fortalecimento"})]}),a.jsx(dy,{}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrição"}),a.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:A.description})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Efeito"}),a.jsx("div",{className:"p-3 bg-emerald-900/30 border border-emerald-800/50 rounded-lg backdrop-blur-sm",children:a.jsx("span",{className:"text-sm text-emerald-300",children:A.type==="potion"?`Restaura ${A.effect_value} pontos`:A.type==="antidote"?"Remove todos os efeitos negativos":`Aumenta atributo em ${A.effect_value} por 3 turnos`})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Preço"}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600/30",children:[a.jsx(_r,{className:"h-4 w-4 text-amber-400"}),a.jsxs("span",{className:`font-medium ${M?"text-emerald-400":"text-red-400"}`,children:[A.price," gold cada"]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"font-semibold text-slate-200",children:"Comprar"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx(de,{onClick:()=>n(A,1),disabled:!Y,size:"sm",className:`${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-md shadow-primary/20":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:"1x"}),a.jsx(de,{onClick:()=>n(A,5),disabled:!Y||t.gold<A.price*5,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<A.price*5?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"5x"}),a.jsx(de,{onClick:()=>n(A,10),disabled:!Y||t.gold<A.price*10,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<A.price*10?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"10x"})]})]})]})}};return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-amber-900/50 to-amber-800/50 border border-amber-700/50 px-4 py-2 rounded-lg backdrop-blur-sm",children:[a.jsx(_r,{className:"h-4 w-4 text-amber-400"}),a.jsx("span",{className:"font-semibold text-amber-300",children:t.gold})]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:i,className:"border-slate-600 bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-slate-100",children:[a.jsx(ur,{className:"h-4 w-4 mr-2"}),"Inventário"]})]}),a.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[a.jsx(de,{variant:c==="equipment"?"default":"ghost",size:"sm",onClick:()=>{u("equipment"),h(null)},className:`flex-1 ${c==="equipment"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:a.jsx(MB,{className:"h-4 w-4"})}),a.jsx(de,{variant:c==="consumables"?"default":"ghost",size:"sm",onClick:()=>{u("consumables"),h(null)},className:`flex-1 ${c==="consumables"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:a.jsx(xm,{className:"h-4 w-4"})})]}),c==="equipment"&&a.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("all"),className:`${p==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:a.jsx(Sd,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("weapon"),className:`${p==="weapon"?"bg-red-900/30 text-red-400 border border-red-800/50":"text-slate-500 hover:text-red-400 hover:bg-red-900/20"}`,children:a.jsx(Tt,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("armor"),className:`${p==="armor"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:a.jsx(bt,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("accessory"),className:`${p==="accessory"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:a.jsx(ra,{className:"h-3 w-3"})})]}),c==="consumables"&&a.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("all"),className:`${x==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:a.jsx(Sd,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("potion"),className:`${x==="potion"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:a.jsx(ct,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("antidote"),className:`${x==="antidote"?"bg-emerald-900/30 text-emerald-400 border border-emerald-800/50":"text-slate-500 hover:text-emerald-400 hover:bg-emerald-900/20"}`,children:a.jsx(bt,{className:"h-3 w-3"})}),a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("buff"),className:`${x==="buff"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:a.jsx(At,{className:"h-3 w-3"})})]}),a.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-track-slate-800 scrollbar-thumb-slate-600",children:c==="equipment"?_.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(ur,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Nenhum equipamento encontrado"})]}):_.map(S):j.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(xm,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Nenhum consumível encontrado"})]}):j.map(P)})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx(De,{className:"h-full border-slate-700/50 bg-slate-800/30 backdrop-blur-sm",children:a.jsx(He,{className:"p-6 h-full",children:R()})})})]})},ZY=({character:t,isOpen:e,onClose:s,onItemSold:r})=>{const[n,i]=y.useState([]),[c,u]=y.useState([]),[f,h]=y.useState([]),[p,g]=y.useState(!1),[x,b]=y.useState(null);y.useEffect(()=>{e&&t.id&&_()},[e,t.id]);const _=async()=>{g(!0);try{const[A,M,U]=await Promise.all([Gt.getCharacterEquipment(t.id),Ht.getCharacterConsumables(t.id),Ht.getCharacterDrops(t.id)]);i(A||[]),u(M.success?M.data||[]:[]),h(U.success?U.data||[]:[])}catch(A){console.error("Erro ao carregar inventário:",A),me.error("Erro ao carregar inventário")}finally{g(!1)}},j=async(A,M)=>{var U;if(A.equipment){try{if(M==="toggle")(await Gt.toggleEquipment(t.id,A.equipment.id,!A.is_equipped)).success&&(me.success(A.is_equipped?"Item desequipado!":"Item equipado!"),_());else if(M==="sell"){const Y=await Gt.sellEquipment(t.id,A.equipment.id);Y.success&&((U=Y.data)==null?void 0:U.newGold)!==void 0?(me.success(`${A.equipment.name} vendido!`),r(Y.data.newGold),_()):me.error(Y.error||"Erro ao vender equipamento")}}catch(Y){console.error("Erro na ação:",Y),me.error("Erro ao executar ação")}b(null)}},N=async A=>{if(A.consumable){try{const M=await Ht.consumeItem(t.id,A.consumable_id,t);M.success?(me.success("Item usado com sucesso!"),_(),r(t.gold)):me.error(M.error||"Erro ao usar item")}catch(M){console.error("Erro ao usar item:",M),me.error("Erro ao usar item")}b(null)}},C=A=>{const M={common:"text-slate-400",uncommon:"text-emerald-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"};return M[A]||M.common},E=A=>A==="weapon"?a.jsx(Tt,{className:"h-4 w-4"}):A==="armor"?a.jsx(bt,{className:"h-4 w-4"}):A==="accessory"?a.jsx(ra,{className:"h-4 w-4"}):A==="potion"?a.jsx(ds,{className:"h-4 w-4"}):a.jsx(ur,{className:"h-4 w-4"}),S=A=>{const M={common:.3,uncommon:.35,rare:.4,epic:.45,legendary:.5};return Math.floor(A.price*M[A.rarity])},P=A=>!(!A.consumable||A.consumable.type==="potion"&&(A.consumable.description.includes("HP")&&t.hp>=t.max_hp||A.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),R=A=>{if(!A.equipment)return null;const M=x===A.id;return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${A.is_equipped?"bg-primary/10 border-primary/30":"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30"} ${M?"ring-2 ring-primary/50":""}`,onClick:()=>b(M?null:A.id),children:[a.jsx("div",{className:"flex-shrink-0",children:E(A.equipment.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:A.equipment.name}),A.is_equipped&&a.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Equipado"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[a.jsx("span",{className:C(A.equipment.rarity),children:A.equipment.rarity}),A.equipment.atk_bonus>0&&a.jsxs("span",{className:"text-red-400",children:["+",A.equipment.atk_bonus," ATK"]}),A.equipment.def_bonus>0&&a.jsxs("span",{className:"text-blue-400",children:["+",A.equipment.def_bonus," DEF"]})]})]}),a.jsxs("div",{className:"text-xs text-amber-400",children:[a.jsx(_r,{className:"h-3 w-3 inline mr-1"}),S(A.equipment)]})]}),M&&a.jsxs("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-3 shadow-lg space-y-3",children:[!A.is_equipped&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-slate-200 mb-2",children:"Comparação se Equipado"}),a.jsx(Yb,{characterId:t.id,newEquipment:A.equipment,slotType:A.equipment.type,showTitle:!1,compact:!0})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(de,{size:"sm",variant:A.is_equipped?"secondary":"default",onClick:()=>j(A,"toggle"),className:"flex-1 text-xs",children:A.is_equipped?"Desequipar":"Equipar"}),a.jsx(de,{size:"sm",variant:"destructive",onClick:()=>j(A,"sell"),className:"flex-1 text-xs",children:"Vender"})]})]})]},A.id)},D=A=>{if(!A.consumable)return null;const M=x===A.id,U=P(A);return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${U?"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30":"bg-slate-800/20 border-slate-700/20 opacity-60"} ${M?"ring-2 ring-primary/50":""}`,onClick:()=>U&&b(M?null:A.id),children:[a.jsx("div",{className:"flex-shrink-0",children:A.consumable.type==="potion"&&A.consumable.description.includes("HP")?a.jsx(ds,{className:"h-4 w-4 text-red-400"}):A.consumable.type==="potion"&&A.consumable.description.includes("Mana")?a.jsx(At,{className:"h-4 w-4 text-blue-400"}):a.jsx(ct,{className:"h-4 w-4 text-purple-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:A.consumable.name}),a.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",A.quantity]})]}),a.jsxs("div",{className:"text-xs text-slate-400",children:["+",A.consumable.effect_value," ",A.consumable.type]})]})]}),M&&U&&a.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-2 shadow-lg",children:a.jsx(de,{size:"sm",onClick:()=>N(A),className:"w-full text-xs",children:"Usar Agora"})})]},A.id)},$=A=>A.drop?a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Nt,{className:"h-4 w-4 text-purple-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:A.drop.name}),a.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",A.quantity]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx("span",{className:C(A.drop.rarity),children:A.drop.rarity}),a.jsxs("span",{className:"text-amber-400",children:[A.drop.value," gold cada"]})]})]})]},A.id):null;return p?a.jsx(Rn,{open:e,onOpenChange:s,children:a.jsxs(Qa,{className:"max-w-md",children:[a.jsx($b,{children:a.jsx(Ja,{children:"Carregando Inventário"})}),a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"}),a.jsx("span",{className:"ml-2 text-slate-300",children:"Carregando..."})]})]})}):a.jsx(Rn,{open:e,onOpenChange:s,children:a.jsxs(Qa,{className:"max-w-md max-h-[80vh] bg-slate-900/95 border-slate-700/50",onClick:A=>{A.target===A.currentTarget&&b(null)},children:[a.jsx(Mn,{className:"pb-2",children:a.jsxs(Ja,{className:"flex items-center justify-between text-slate-100",children:[a.jsx("span",{children:"Inventário"}),a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(_r,{className:"h-4 w-4 text-amber-400"}),a.jsx("span",{className:"text-amber-300",children:t.gold})]})]})}),a.jsxs(OR,{defaultValue:"equipment",className:"w-full",children:[a.jsxs(qb,{className:"grid w-full grid-cols-3 bg-slate-800/50",children:[a.jsxs(yo,{value:"equipment",className:"text-xs",children:["Equipamentos (",n.length,")"]}),a.jsxs(yo,{value:"consumables",className:"text-xs",children:["Consumíveis (",c.length,")"]}),a.jsxs(yo,{value:"drops",className:"text-xs",children:["Materiais (",f.length,")"]})]}),a.jsx(bo,{value:"equipment",className:"mt-4",children:a.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:n.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(ur,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Nenhum equipamento"})]}):n.map(R)})}),a.jsx(bo,{value:"consumables",className:"mt-4",children:a.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:c.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(ct,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Nenhum consumível"})]}):c.filter(A=>A.quantity>0).map(D)})}),a.jsx(bo,{value:"drops",className:"mt-4",children:a.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:f.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(Nt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Nenhum material"})]}):f.filter(A=>A.quantity>0).map($)})})]})]})})},QY=({character:t,onPurchase:e})=>{const[s,r]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState(!0),[f,h]=y.useState(!1);y.useEffect(()=>{p()},[t.level]);const p=async(_=!1)=>{try{let j=0;_?j=window.scrollY||document.documentElement.scrollTop:u(!0);const N=await Gt.getAvailableEquipment(t.level);r(N);const C=await Ht.getAvailableConsumables();if(C.success&&C.data){const E=C.data.filter(S=>S.price>0&&!S.name.includes("Elixir"));i(E)}_&&requestAnimationFrame(()=>{window.scrollTo(0,j)})}catch(j){console.error("Erro ao carregar itens da loja:",j),me.error("Erro ao carregar itens da loja")}finally{_||u(!1)}},g=async _=>{var j;if(t.gold<_.price){me.error("Gold insuficiente para comprar este item!");return}try{const N=await Gt.buyEquipment(t.id,_.id);N.success&&((j=N.data)==null?void 0:j.newGold)!==void 0?(me.success(`${_.name} comprado com sucesso!`),e(N.data.newGold)):me.error(N.error||"Erro ao comprar equipamento!")}catch(N){console.error("Erro ao comprar equipamento:",N),me.error("Erro ao comprar equipamento!")}},x=async(_,j=1)=>{const N=_.price*j;if(t.gold<N){me.error("Gold insuficiente para comprar este item!");return}try{const C=await Ht.buyConsumable(t.id,_.id,j);C.success&&C.data?(me.success(`${j}x ${_.name} comprado com sucesso!`),e(C.data.newGold)):me.error(C.error||"Erro ao comprar consumível!")}catch(C){console.error("Erro ao comprar consumível:",C),me.error("Erro ao comprar consumível!")}},b=_=>{e(_)};return c?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mr-4"}),a.jsx("span",{children:"Carregando loja..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(WY,{character:t,availableEquipment:s,availableConsumables:n,onEquipmentPurchase:g,onConsumablePurchase:x,onOpenInventory:()=>h(!0)}),a.jsx(ZY,{character:t,isOpen:f,onClose:()=>h(!1),onItemSold:b})]})};function JY(){const t=Ot(),{character:e}=uM.useSearch(),[s,r]=y.useState(null),[n,i]=y.useState(!0),[c,u]=y.useState(null);y.useEffect(()=>{f()},[e]);const f=async()=>{if(!e){t({to:"/game/play"});return}try{i(!0),u(null);const g=await Ge.getCharacter(e);if(g.success&&g.data)r(g.data);else{const x=g.error||"Erro desconhecido ao carregar personagem";u(x),me.error("Erro ao carregar personagem",{description:x})}}catch(g){const x=g instanceof Error?g.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",g),u(x),me.error("Erro ao carregar personagem",{description:x})}finally{i(!1)}},h=async g=>{s&&r(x=>({...x,gold:g}))},p=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return n?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Carregando Loja"}),a.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto carregamos os itens..."})]})}):c||!s?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsx("div",{className:"w-full max-w-md text-center",children:a.jsxs(De,{className:"p-6",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-red-500",children:"Erro ao Carregar Loja"})}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-muted-foreground",children:c||"Não foi possível carregar o personagem selecionado."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{onClick:f,className:"flex-1",children:[a.jsx(jv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),a.jsxs(de,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"w-full max-w-7xl",children:[a.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:p,className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),a.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Loja"}),a.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground",children:[s.name," • Nível ",s.level," • Andar ",s.floor]})]})]})}),a.jsx(QY,{character:s,onPurchase:h})]})})}const uM=Wt("/_authenticated/game/play/hub/shop")({component:JY,validateSearch:t=>({character:t.character||""})});class So{static async getCharacterPotionSlots(e){try{const{data:s,error:r}=await je.rpc("get_character_potion_slots",{p_character_id:e});if(r)throw r;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,consumable_id:null,consumable_name:null,consumable_description:null,effect_value:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de poção:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de poção",success:!1}}}static async getCharacterSpellSlots(e){try{const{data:s,error:r}=await je.rpc("get_character_spell_slots",{p_character_id:e});if(r)throw r;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,spell_id:null,spell_name:null,spell_description:null,mana_cost:null,damage:null,spell_type:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de spell:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de spell",success:!1}}}static async setPotionSlot(e,s,r){try{console.log(`[SlotService] Configurando slot ${s} com consumível ${r}`);const{data:n,error:i}=await je.rpc("set_potion_slot",{p_character_id:e,p_slot_position:s,p_consumable_id:r}).single();if(i)throw console.error("[SlotService] Erro no RPC set_potion_slot:",i.message),i;const c=n;return c.success?(console.log(`[SlotService] Slot ${s} configurado com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Operação falhou: ${c.error}`),{data:null,error:c.error||"Erro ao configurar slot de poção",success:!1})}catch(n){return console.error("Erro ao configurar slot de poção:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de poção",success:!1}}}static async clearPotionSlot(e,s){try{console.log(`[SlotService] Limpando slot ${s}`);const{data:r,error:n}=await je.rpc("clear_potion_slot",{p_character_id:e,p_slot_position:s}).single();if(n)throw console.error("[SlotService] Erro no RPC clear_potion_slot:",n.message),n;const i=r;return i.success?(console.log(`[SlotService] Slot ${s} limpo com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Falha ao limpar slot: ${i.error}`),{data:null,error:i.error||"Erro ao limpar slot de poção",success:!1})}catch(r){return console.error("Erro ao limpar slot de poção:",r instanceof Error?r.message:r),{data:null,error:r instanceof Error?r.message:"Erro ao limpar slot de poção",success:!1}}}static async setSpellSlot(e,s,r){try{const{error:n}=await je.rpc("set_spell_slot",{p_character_id:e,p_slot_position:s,p_spell_id:r});if(n)throw n;return{data:null,error:null,success:!0}}catch(n){return console.error("Erro ao configurar slot de spell:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de spell",success:!1}}}static async consumePotionFromSlot(e,s){try{if(!e)return{success:!1,error:"ID do personagem é obrigatório",data:null};if(s<1||s>3)return{success:!1,error:"Posição do slot inválida (1-3)",data:null};const{supabaseAdmin:r}=await Dt(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>Nd);return{supabaseAdmin:u}},void 0),{data:n,error:i}=await r.rpc("consume_potion_from_slot",{p_character_id:e,p_slot_position:s});return i?(console.error("Erro ao consumir poção do slot:",i),{success:!1,error:i.message||"Erro ao usar poção",data:null}):n?{success:!0,error:null,data:{success:n.success,message:n.message,new_hp:Math.floor(Number(n.new_hp)),new_mana:Math.floor(Number(n.new_mana))}}:{success:!1,error:"Nenhum resultado retornado",data:null}}catch(r){return console.error("Erro ao consumir poção do slot:",r),{success:!1,error:r instanceof Error?r.message:"Erro desconhecido",data:null}}}static async clearSpellSlot(e,s){return this.setSpellSlot(e,s,null)}}const eK=({character:t,onInventoryChange:e})=>{const[s,r]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(null),[x,b]=y.useState(null),[_,j]=y.useState(null),[N,C]=y.useState(null),E=y.useCallback(async()=>{try{h(!0);const[G,k,B]=await Promise.all([Ht.getCharacterConsumables(t.id),Ht.getCharacterDrops(t.id),So.getCharacterPotionSlots(t.id)]);r(G.success?G.data||[]:[]),i(k.success?k.data||[]:[]),u(B.success?B.data||[]:[])}catch(G){console.error("Erro ao carregar inventário:",G),me.error("Erro ao carregar inventário"),r([]),i([]),u([])}finally{h(!1)}},[t.id]);y.useEffect(()=>{E()},[E]);const S=async G=>{if(!G.consumable||G.quantity<=0){me.error("Consumível não disponível");return}j(G.consumable_id);try{const k=await Ht.consumeItem(t.id,G.consumable_id,t);k.success&&k.data?(await E(),e(),me.success(k.data.message)):me.error(k.error||"Erro ao usar consumível")}catch(k){console.error("Erro ao usar consumível:",k),me.error("Erro ao usar consumível")}finally{j(null)}},P=async(G,k)=>{C(k);try{const B=await So.setPotionSlot(t.id,k,G);B.success?(await E(),me.success(`Poção atribuída ao slot ${D(k)}!`)):me.error(B.error||"Erro ao atribuir poção")}catch(B){console.error("Erro ao atribuir poção:",B),me.error("Erro ao atribuir poção")}finally{C(null)}},R=async G=>{try{const k=await So.clearPotionSlot(t.id,G);k.success?(await E(),me.success("Slot limpo!")):me.error(k.error||"Erro ao limpar slot")}catch(k){console.error("Erro ao limpar slot:",k),me.error("Erro ao limpar slot")}},D=G=>{switch(G){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},$=G=>!(!G.consumable||G.consumable.type==="potion"&&(G.consumable.description.includes("HP")&&t.hp>=t.max_hp||G.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),A=G=>{if(!G.consumable)return a.jsx(ur,{className:"h-6 w-6 text-slate-400"});if(G.consumable.type==="potion"){if(G.consumable.description.includes("HP"))return a.jsx(ds,{className:"h-6 w-6 text-red-400"});if(G.consumable.description.includes("Mana"))return a.jsx(At,{className:"h-6 w-6 text-blue-400"})}return a.jsx(ct,{className:"h-6 w-6 text-purple-400"})},M=()=>a.jsx(Nt,{className:"h-6 w-6 text-amber-400"}),U=G=>{const k={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return k[G]||k.common},Y=()=>a.jsxs("div",{className:"flex gap-2 mb-4",children:[c.map(G=>{const k=D(G.slot_position),B=!G.consumable_id;return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-12 h-12 border-2 rounded-lg flex items-center justify-center cursor-pointer transition-all duration-200 ${B?"border-dashed border-slate-600 bg-slate-800/30 hover:border-slate-500":"border-solid border-blue-600 bg-blue-900/30 hover:brightness-110"}`,title:B?`Slot ${k} vazio`:G.consumable_name||"Poção",children:B?a.jsx(Bo,{className:"h-4 w-4 text-slate-500"}):a.jsx("span",{className:"text-lg",children:"🧪"})}),a.jsx(qe,{className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center bg-blue-600 text-white text-xs",children:k}),!B&&a.jsx(de,{variant:"destructive",size:"sm",className:"absolute -top-1 -left-1 h-4 w-4 p-0 rounded-full",onClick:()=>R(G.slot_position),children:a.jsx(zi,{className:"h-2 w-2"})})]},G.slot_position)}),a.jsx("div",{className:"flex items-center ml-2",children:a.jsx("span",{className:"text-xs text-slate-500",children:"Slots de Poções (Q, W, E)"})})]}),V=()=>{const G=s.filter(k=>k.consumable&&k.quantity>0);return G.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),a.jsx("p",{className:"text-slate-500",children:"Nenhum consumível disponível"})]}):a.jsx("div",{className:"grid grid-cols-8 gap-2",children:G.map(k=>{const B=(p==null?void 0:p.id)===k.id,z=$(k);return a.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${B?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":"border-slate-600 bg-slate-800/30 hover:border-slate-400"} ${z?"":"opacity-50"}`,onClick:()=>{g(k),b(null)},children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:A(k)}),k.quantity>1&&a.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:k.quantity}),!z&&a.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-red-500 rounded-full"})]},`consumable-${k.id}`)})})},F=()=>{const G=n.filter(k=>k.drop&&k.quantity>0);return G.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),a.jsx("p",{className:"text-slate-500",children:"Nenhum material disponível"})]}):a.jsx("div",{className:"grid grid-cols-8 gap-2",children:G.map(k=>{var W;const B=(x==null?void 0:x.id)===k.id,z=((W=k.drop)==null?void 0:W.rarity)||"common";return a.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${B?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":`${U(z)} hover:border-slate-400`}`,onClick:()=>{b(k),g(null)},children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:M()}),k.quantity>1&&a.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:k.quantity})]},`drop-${k.id}`)})})},Q=()=>{if(p!=null&&p.consumable){const G=p,k=G.consumable,B=$(G),z=k.type==="potion";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-4 rounded-lg border-2 border-slate-600 bg-slate-800/30",children:A(G)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:k.name}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(qe,{className:"bg-slate-700/50 text-slate-200 border-0",children:k.type}),a.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",G.quantity]})]})]})]}),a.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:a.jsx("p",{className:"text-slate-300 leading-relaxed",children:k.description})}),k.effect_value>0&&a.jsxs("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(ct,{className:"h-4 w-4 text-emerald-400"}),a.jsx("span",{className:"text-emerald-300 font-medium",children:"Efeito"})]}),a.jsxs("p",{className:"text-emerald-200",children:["+",k.effect_value," ",k.type]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(de,{onClick:()=>S(G),disabled:!B||_===G.consumable_id,className:`w-full ${B?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:_===G.consumable_id?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Usando..."]}):B?"Usar Item":k.type==="potion"&&k.description.includes("HP")&&t.hp>=t.max_hp?"HP já está no máximo":k.type==="potion"&&k.description.includes("Mana")&&t.mana>=t.max_mana?"Mana já está no máximo":"Não pode ser usado agora"}),z&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium text-slate-300",children:"Atribuir ao slot:"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:c.map(W=>{const L=D(W.slot_position),X=N===W.slot_position,ae=!!W.consumable_id;return a.jsx(de,{variant:"outline",size:"sm",disabled:X,onClick:()=>P(G.consumable_id,W.slot_position),className:`${ae?"border-blue-600 bg-blue-900/20":"border-slate-600"}`,children:X?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-t border-b border-current"}):a.jsxs(a.Fragment,{children:["Slot ",L,ae&&a.jsx("span",{className:"ml-1 text-xs",children:"(ocupado)"})]})},W.slot_position)})}),a.jsx("p",{className:"text-xs text-slate-500",children:"Poções atribuídas aos slots podem ser usadas rapidamente durante batalhas"})]})]})]})}if(x!=null&&x.drop){const G=x,k=G.drop;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-4 rounded-lg border-2 ${U(k.rarity)}`,children:M()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:k.name}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(qe,{className:`${U(k.rarity)} border-0 text-slate-200`,children:k.rarity}),a.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",G.quantity]})]})]})]}),a.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:a.jsx("p",{className:"text-slate-300 leading-relaxed",children:k.description})}),a.jsxs("div",{className:"bg-amber-900/30 border border-amber-700/50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_r,{className:"h-4 w-4 text-amber-400"}),a.jsx("span",{className:"text-amber-300 font-medium",children:"Valor"})]}),a.jsxs("p",{className:"text-amber-200",children:[k.value," gold por unidade"]})]})]})}return a.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"Selecione um item"}),a.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})})};return f?a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[70vh]",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:a.jsx(De,{className:"bg-slate-800/50 border-slate-700/50",children:a.jsx(He,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-6 bg-slate-700 rounded w-32"}),a.jsx("div",{className:"grid grid-cols-8 gap-2",children:Array.from({length:16}).map((G,k)=>a.jsx("div",{className:"aspect-square bg-slate-700 rounded"},k))})]})})})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(De,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:a.jsx(He,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-6 bg-slate-700 rounded w-24"}),a.jsx("div",{className:"h-32 bg-slate-700 rounded"})]})})})})]}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Inventário"}),a.jsxs("div",{className:"flex items-center gap-2 text-amber-400 bg-slate-800/30 px-3 py-1 rounded-lg border border-slate-700/50",children:[a.jsx(_r,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:t.gold.toLocaleString()})]})]}),a.jsx(De,{className:"bg-slate-800/50 border-slate-700/50",children:a.jsxs(He,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[a.jsx(ct,{className:"h-5 w-5 text-purple-400"}),"Consumíveis (",s.filter(G=>G.quantity>0).length,")"]}),Y(),V()]})}),a.jsx(De,{className:"bg-slate-800/50 border-slate-700/50",children:a.jsxs(He,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[a.jsx(Nt,{className:"h-5 w-5 text-amber-400"}),"Materiais (",n.filter(G=>G.quantity>0).length,")"]}),F()]})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(De,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:a.jsx(He,{className:"p-6 h-full",children:Q()})})})]})},dM=Wt("/_authenticated/game/play/hub/inventory")({component:tK,validateSearch:t=>({character:t.character||""})});function tK(){const t=Ot(),{character:e}=dM.useSearch(),{loadCharacterForHub:s}=$c(),[r,n]=y.useState(null),[i,c]=y.useState(!0),[u,f]=y.useState(null),[h,p]=y.useState(!1),[g,x]=y.useState(!1),b=async(C=!0,E=!1)=>{if(!e){t({to:"/game/play"});return}if(!(!E&&g&&(r==null?void 0:r.id)===e&&!C)){C?c(!0):p(!0),f(null);try{const S=await Ge.getCharacter(e);if(S.success&&S.data)n(S.data),await s(S.data),x(!0);else{const P=S.error||"Erro desconhecido ao carregar personagem";f(P),me.error("Erro ao carregar personagem",{description:P})}}catch(S){const P=S instanceof Error?S.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",S),f(P),me.error("Erro ao carregar personagem",{description:P})}finally{c(!1),p(!1)}}};y.useEffect(()=>{b(!0)},[e]);const _=()=>{b(!1,!0)},j=()=>{b(!1,!0)},N=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return i?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-400 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-100",children:"Carregando Inventário"}),a.jsx("p",{className:"text-slate-400",children:"Aguarde enquanto carregamos seus itens..."})]})}):u||!r?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:a.jsx("div",{className:"w-full max-w-md text-center",children:a.jsxs(De,{className:"p-6 bg-slate-800/50 border-slate-700/50",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-red-400",children:"Erro ao Carregar Inventário"})}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-slate-400",children:u||"Não foi possível carregar o personagem selecionado."}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{onClick:()=>b(),className:"flex-1 bg-amber-600 hover:bg-amber-700",children:[a.jsx(jv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),a.jsxs(de,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1 border-slate-600 text-slate-300",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-black",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:N,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Inventário"}),a.jsxs("p",{className:"text-slate-400",children:[r.name," • Nível ",r.level]})]})]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:j,disabled:h,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[a.jsx(jv,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Atualizando...":"Atualizar"]})]}),a.jsx(eK,{character:r,onInventoryChange:_})]})})}function sK({characterId:t,consumables:e,onSlotsUpdate:s}){const[r,n]=y.useState([]),[i,c]=y.useState(!0),[u,f]=y.useState(null),[h,p]=y.useState(null),g=y.useRef(null),x=y.useRef({}),b=async()=>{try{const R=await So.getCharacterPotionSlots(t);R.success&&R.data&&n(R.data)}catch(R){console.error("Erro ao carregar slots de poção:",R)}finally{c(!1)}};y.useEffect(()=>{t&&b()},[t]),y.useEffect(()=>{const R=$=>{g.current&&!g.current.contains($.target)&&(f(null),p(null))},D=()=>{f(null),p(null)};return document.addEventListener("mousedown",R),window.addEventListener("scroll",D,!0),()=>{document.removeEventListener("mousedown",R),window.removeEventListener("scroll",D,!0)}},[]),y.useEffect(()=>{if(u!==null&&x.current[u]){const R=x.current[u];if(R){const D=R.getBoundingClientRect(),$=window.innerHeight,A=250;let M=D.bottom+8,U=D.left;M+A>$&&(M=D.top-A-8),U+256>window.innerWidth&&(U=window.innerWidth-256-16),U<16&&(U=16),p({top:M,left:U})}}},[u]);const _=async(R,D)=>{try{const $=await So.setPotionSlot(t,R,D);$.success?(await b(),s==null||s(),me.success("Poção atribuída ao slot!"),f(null),p(null)):me.error($.error||"Erro ao atribuir poção")}catch($){console.error("Erro ao configurar slot:",$),me.error("Erro ao configurar slot")}},j=async R=>{try{const D=await So.clearPotionSlot(t,R);D.success?(await b(),s==null||s(),me.success("Slot limpo!")):me.error(D.error||"Erro ao limpar slot")}catch(D){console.error("Erro ao limpar slot:",D),me.error("Erro ao limpar slot")}},N=R=>{u===R?(f(null),p(null)):f(R)},C=R=>{switch(R){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},E=R=>R.consumable_description?R.consumable_description.includes("HP")||R.consumable_description.includes("Vida")?a.jsx(ds,{className:"h-8 w-8 text-red-400"}):R.consumable_description.includes("Mana")?a.jsx(At,{className:"h-8 w-8 text-blue-400"}):a.jsx(vx,{className:"h-8 w-8 text-purple-400"}):a.jsx(vx,{className:"h-8 w-8 text-slate-500"}),S=R=>{const D=r.filter(A=>A.consumable_id&&A.slot_position!==R).map(A=>A.consumable_id);console.log("[PotionSlotManager] Slots ocupados (excluindo atual):",D);const $=e.filter(A=>{var Y;const M=A.consumable&&A.consumable.type==="potion"&&A.quantity>0,U=!D.includes(A.consumable_id);return M&&!U&&console.log(`[PotionSlotManager] Poção ${(Y=A.consumable)==null?void 0:Y.name} filtrada (já está em outro slot)`),M&&U});return console.log(`[PotionSlotManager] Poções disponíveis para slot ${R}:`,$.length),$};if(i)return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[a.jsx(iS,{className:"h-4 w-4"}),a.jsx("span",{children:"Atalhos: Q, W, E"})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(R=>a.jsx("div",{className:"w-full h-20 bg-slate-700/30 rounded-lg animate-pulse"},`loading-slot-${R}`))})]});const P=({slot:R})=>{const D=S(R.slot_position);return a.jsx("div",{ref:g,className:"fixed w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:(h==null?void 0:h.top)||0,left:(h==null?void 0:h.left)||0,zIndex:9999},children:D.length>0?a.jsxs("div",{className:"p-2 space-y-1",children:[a.jsx("div",{className:"text-xs text-slate-400 px-2 py-1",children:"Selecione uma poção:"}),D.map($=>a.jsxs("button",{className:"w-full text-left px-3 py-2 rounded-md hover:bg-slate-700 transition-colors flex items-center gap-3",onClick:()=>_(R.slot_position,$.consumable_id),children:[a.jsx("div",{className:"flex-shrink-0",children:$.consumable.description.includes("HP")||$.consumable.description.includes("Vida")?a.jsx(ds,{className:"h-4 w-4 text-red-400"}):$.consumable.description.includes("Mana")?a.jsx(At,{className:"h-4 w-4 text-blue-400"}):a.jsx(vx,{className:"h-4 w-4 text-purple-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-slate-200 truncate",children:$.consumable.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:["+",$.consumable.effect_value," • x",$.quantity]})]})]},`dropdown-${$.id}`))]}):a.jsxs("div",{className:"p-4 text-center",children:[a.jsx("div",{className:"text-slate-400 text-sm",children:"Nenhuma poção disponível"}),a.jsx("div",{className:"text-slate-500 text-xs mt-1",children:e.filter($=>$.consumable&&$.consumable.type==="potion"&&$.quantity>0).length>0?"Todas as poções já estão equipadas":"Compre poções na loja"})]})})};return a.jsxs("div",{className:"space-y-4 relative",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[a.jsx(iS,{className:"h-4 w-4"}),a.jsx("span",{children:"Atalhos: Q, W, E"})]}),a.jsxs("div",{className:"text-xs text-slate-500",children:["Clique para configurar • ",e.length," consumíveis"]})]}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:r.map(R=>{const D=C(R.slot_position),$=!R.consumable_id,A=u===R.slot_position;return a.jsx("div",{className:"relative",ref:M=>{x.current[R.slot_position]=M},children:a.jsxs("div",{className:"relative group",children:[a.jsx(de,{variant:"outline",className:`w-full h-20 p-3 border-2 transition-all duration-300 ${$?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":"border-solid border-blue-600 bg-gradient-to-br from-blue-900/30 to-blue-800/40 hover:brightness-110 shadow-lg shadow-blue-400/20"} hover:scale-[1.02] active:scale-[0.98] ${A?"ring-2 ring-blue-500":""}`,onClick:()=>{$&&N(R.slot_position)},children:a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:`p-2 rounded-lg ${$?"bg-slate-700/30":"bg-black/20"}`,children:$?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bo,{className:"h-6 w-6 text-slate-500"}),a.jsx(Ro,{className:`h-4 w-4 text-slate-500 transition-transform ${A?"rotate-180":""}`})]}):E(R)}),!$&&R.effect_value&&a.jsxs("div",{className:"text-xs font-bold text-slate-200 bg-slate-800/50 px-2 py-1 rounded",children:["+",R.effect_value]}),$&&a.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"Vazio"})]})}),a.jsx(qe,{className:"absolute -top-2 -right-2 h-6 w-6 p-0 flex items-center justify-center bg-blue-600 text-white text-xs font-bold border-2 border-slate-800 shadow-lg",children:D}),!$&&a.jsx(de,{variant:"destructive",size:"sm",className:"absolute -top-2 -left-2 h-6 w-6 p-0 rounded-full shadow-lg",onClick:M=>{M.stopPropagation(),j(R.slot_position)},children:a.jsx(zi,{className:"h-3 w-3"})}),a.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:a.jsx("div",{className:"bg-slate-900/95 text-slate-300 text-xs px-3 py-2 rounded border border-slate-700/50 whitespace-nowrap shadow-lg",children:$?`Slot ${D} vazio`:R.consumable_name||"Poção"})})]})},`potion-slot-${R.slot_position}`)})}),a.jsx("div",{className:"text-xs text-slate-500 bg-slate-800/30 p-3 rounded-lg border border-slate-700/30",children:a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-medium text-slate-400",children:"Como usar:"}),a.jsx("p",{children:"• Clique em slots vazios para adicionar poções"}),a.jsx("p",{children:"• Use Q, W, E durante batalhas para consumir rapidamente"}),a.jsx("p",{children:"• Cada tipo de poção pode estar em apenas um slot"})]})}),u!==null&&h&&typeof document<"u"&&Li.createPortal(a.jsx(P,{slot:r.find(R=>R.slot_position===u)}),document.body)]})}const rK=({selectedItem:t,selectedSlot:e,character:s,onEquipmentChange:r})=>{const n=f=>{switch(f.type){case"weapon":return a.jsx(Tt,{className:"h-12 w-12 text-red-400"});case"armor":return a.jsx(cd,{className:"h-12 w-12 text-blue-400"});case"accessory":return a.jsx(ra,{className:"h-12 w-12 text-purple-400"});default:return a.jsx(bt,{className:"h-12 w-12 text-slate-400"})}},i=f=>{const h={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return h[f]||h.common},c=f=>{switch(f){case"main_hand":return"Mão Principal";case"off_hand":return"Mão Secundária";case"armor":return"Armadura";case"accessory":return"Acessório";default:return f}},u=async()=>{if(!(!t||!e))try{const f=await Gt.toggleEquipment(s.id,t.id,!1);f.success?(me.success("Item desequipado com sucesso!"),r()):me.error(f.error||"Erro ao desequipar item")}catch(f){console.error("Erro ao desequipar item:",f),me.error("Erro ao desequipar item")}};return t?a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-slate-100",children:"Detalhes do Item"})}),a.jsxs(He,{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-4 rounded-lg border-2 ${i(t.rarity)}`,children:n(t)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:t.name}),a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(qe,{className:`border ${i(t.rarity)}`,children:t.rarity}),a.jsx(qe,{variant:"outline",className:"text-slate-300",children:t.type}),t.rarity==="legendary"&&a.jsx(Nt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]}),e&&a.jsxs("p",{className:"text-sm text-slate-400",children:["Equipado em: ",c(e)]})]})]}),a.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:a.jsx("p",{className:"text-slate-300 leading-relaxed",children:t.description})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.atk_bonus>0&&a.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tt,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),a.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",t.atk_bonus]})]}),t.def_bonus>0&&a.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),a.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",t.def_bonus]})]}),t.mana_bonus>0&&a.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(At,{className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),a.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",t.mana_bonus]})]}),t.speed_bonus&&t.speed_bonus>0&&a.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(At,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),a.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",t.speed_bonus]})]})]})]}),t.level_requirement&&t.level_requirement>1&&a.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-slate-400",children:"Nível mínimo:"}),a.jsx("span",{className:`font-bold ${s.level>=t.level_requirement?"text-green-400":"text-red-400"}`,children:t.level_requirement})]})]}),t.weapon_subtype&&a.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),a.jsx("p",{className:"text-slate-400 capitalize",children:t.weapon_subtype})]}),e&&a.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:a.jsx(de,{onClick:u,variant:"outline",className:"w-full border-red-600 text-red-400 hover:bg-red-900/30",children:"Desequipar Item"})})]})]}):a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-slate-100",children:"Detalhes do Item"})}),a.jsx(He,{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"Nenhum item selecionado"}),a.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um slot para ver os detalhes do equipamento"})]})})]})},aK=({equippedSlots:t,onSlotClick:e,onSlotLongPress:s})=>{const[r,n]=y.useState(null),[i,c]=y.useState(!1),u=y.useCallback(j=>{c(!1);const N=setTimeout(()=>{c(!0),s(j)},800);n(N)},[s]),f=y.useCallback((j,N)=>{r&&(clearTimeout(r),n(null)),i||e(j,N),setTimeout(()=>c(!1),100)},[r,i,e]),h=y.useCallback(()=>{r&&(clearTimeout(r),n(null)),c(!1)},[r]),p=(j,N)=>{if(N)switch(N.type){case"weapon":return a.jsx(Tt,{className:"h-8 w-8 text-red-400"});case"armor":return a.jsx(cd,{className:"h-8 w-8 text-blue-400"});case"accessory":return a.jsx(ra,{className:"h-8 w-8 text-purple-400"});default:return a.jsx(bt,{className:"h-8 w-8 text-slate-400"})}switch(j){case"main_hand":case"off_hand":return a.jsx(Tt,{className:"h-8 w-8 text-slate-500"});case"armor":return a.jsx(cd,{className:"h-8 w-8 text-slate-500"});case"accessory":return a.jsx(ra,{className:"h-8 w-8 text-slate-500"});default:return a.jsx(Bo,{className:"h-8 w-8 text-slate-500"})}},g=j=>{if(!j)return"border-slate-600 bg-slate-800/30";const N={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return N[j]||N.common},x=(j,N)=>{const C=t[j],E=!C;return a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:N}),a.jsxs("div",{className:"relative group",children:[a.jsx(de,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${E?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":`${g(C.rarity)} hover:brightness-110 shadow-lg`} hover:scale-[1.02] active:scale-[0.98] select-none`,onMouseDown:()=>u(j),onMouseUp:()=>f(j,C??null),onMouseLeave:h,onTouchStart:()=>u(j),onTouchEnd:()=>f(j,C??null),onTouchCancel:h,onContextMenu:S=>S.preventDefault(),children:a.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[a.jsx("div",{className:`p-3 rounded-lg ${E?"bg-slate-700/30":"bg-black/20"}`,children:p(j,C??null)}),C?a.jsxs("div",{className:"text-center space-y-1",children:[a.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:C.name.length>12?`${C.name.substring(0,12)}...`:C.name}),a.jsx(qe,{variant:"outline",className:"text-xs px-2 py-0.5",children:C.rarity})]}):a.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Vazio"})]})}),a.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),a.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:a.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:E?"Toque e segure para equipar":"Toque para detalhes"})})]})]})},b=j=>{const N=j===0,C=j===0?"Peitoral":j===1?"Capacete":j===2?"Pernas":"Botas";return N?x("armor",C):a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:C}),a.jsx("div",{className:"relative group",children:a.jsx(de,{variant:"outline",className:"w-full h-32 p-4 border-2 border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 transition-all duration-300 opacity-60",disabled:!0,children:a.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[a.jsx("div",{className:"p-3 rounded-lg bg-slate-700/20",children:a.jsx(cd,{className:"h-8 w-8 text-slate-500"})}),a.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Em breve"})]})})})]})},_=j=>{const N=j===0&&t.accessory,C=j>0;return a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:j===0?"Anel 1":j===1?"Anel 2":j===2?"Colar":"Amuleto"}),a.jsxs("div",{className:"relative group",children:[a.jsx(de,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${N?`${g(t.accessory.rarity)} hover:brightness-110 shadow-lg hover:scale-[1.02]`:C?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 opacity-60":"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70 hover:scale-[1.02]"} active:scale-[0.98] select-none`,onMouseDown:()=>j===0&&u("accessory"),onMouseUp:()=>j===0&&f("accessory",t.accessory??null),onMouseLeave:h,onTouchStart:()=>j===0&&u("accessory"),onTouchEnd:()=>j===0&&f("accessory",t.accessory??null),onTouchCancel:h,onContextMenu:E=>E.preventDefault(),disabled:C,children:a.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[a.jsx("div",{className:`p-3 rounded-lg ${N?"bg-black/20":"bg-slate-700/30"}`,children:a.jsx(ra,{className:"h-8 w-8 text-slate-500"})}),N?a.jsxs("div",{className:"text-center space-y-1",children:[a.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:t.accessory.name.length>12?`${t.accessory.name.substring(0,12)}...`:t.accessory.name}),a.jsx(qe,{variant:"outline",className:"text-xs px-2 py-0.5",children:t.accessory.rarity})]}):a.jsx("div",{className:"text-sm text-slate-500 font-medium",children:j===0?"Vazio":"Em breve"})]})}),!C&&a.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),!C&&a.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:a.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:N?"Toque para detalhes":"Toque e segure para equipar"})})]})]})};return a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"text-slate-100 flex items-center gap-2",children:[a.jsx(bt,{className:"h-5 w-5 text-amber-400"}),"Equipamentos"]})}),a.jsxs(He,{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armas"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x("main_hand","Mão Principal"),x("off_hand","Mão Secundária")]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armaduras"}),a.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(j=>a.jsx("div",{children:b(j)},`armor-slot-${j}`))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Acessórios"}),a.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(j=>a.jsx("div",{children:_(j)},`accessory-slot-${j}`))})]}),a.jsx("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:a.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Toque para ver detalhes • Toque e segure para equipar/trocar"})})]})]})},fM=Wt("/_authenticated/game/play/hub/equipment")({component:nK,validateSearch:t=>({character:t.character||""})});function nK(){return Ii().pathname==="/game/play/hub/equipment"?a.jsx(oK,{}):a.jsx(Lo,{})}function oK(){const t=Ot(),{character:e}=fM.useSearch(),[s,r]=y.useState(null),[n,i]=y.useState({}),[,c]=y.useState([]),[u,f]=y.useState([]),[h,p]=y.useState(null),[g,x]=y.useState(null),[b,_]=y.useState(!0);y.useEffect(()=>{(async()=>{if(e)try{_(!0);const P=await Ge.getCharacter(e);P.success&&P.data&&r(P.data);const R=await Gt.getEquippedItems(e);i(R);const D=await Gt.getCharacterEquipment(e);c(D),console.log("[EquipmentPage] Carregando consumíveis para personagem:",e);const $=await Ht.getCharacterConsumables(e);console.log("[EquipmentPage] Resposta dos consumíveis:",$),$.success&&$.data?(console.log("[EquipmentPage] Consumíveis carregados com sucesso:",$.data),console.log("[EquipmentPage] Total de consumíveis:",$.data.length),$.data.forEach((A,M)=>{var U,Y;console.log(`[EquipmentPage] Consumível ${M+1}:`,{id:A.id,consumable_id:A.consumable_id,quantity:A.quantity,consumable_name:(U=A.consumable)==null?void 0:U.name,consumable_type:(Y=A.consumable)==null?void 0:Y.type,hasConsumableData:!!A.consumable})}),f($.data)):(console.error("[EquipmentPage] Erro ao carregar consumíveis:",$.error),f([]))}catch(P){console.error("Erro ao carregar dados do equipamento:",P),me.error("Erro ao carregar equipamentos")}finally{_(!1)}})()},[e]);const j=(S,P)=>{p(S),x(P)},N=S=>{t({to:"/game/play/hub/equipment/select",search:{character:e,slot:S}})},C=async()=>{if(e)try{const S=await Gt.getEquippedItems(e);i(S);const P=await Gt.getCharacterEquipment(e);c(P)}catch(S){console.error("Erro ao atualizar equipamentos:",S)}},E=async()=>{if(e)try{console.log("[EquipmentPage] Recarregando consumíveis...");const S=await Ht.getCharacterConsumables(e);S.success&&S.data?(console.log("[EquipmentPage] Consumíveis recarregados:",S.data.length),f(S.data)):console.error("[EquipmentPage] Erro ao recarregar consumíveis:",S.error)}catch(S){console.error("Erro ao recarregar consumíveis:",S)}};return b?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"h-96 bg-slate-700 rounded"}),a.jsx("div",{className:"h-96 bg-slate-700 rounded"})]})]})})}):s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-slate-100 flex items-center gap-2",children:[a.jsx(bt,{className:"h-8 w-8 text-amber-400"}),"Equipamentos"]}),a.jsxs("p",{className:"text-slate-400",children:[s.name," - Nível ",s.level]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(aK,{equippedSlots:n,onSlotClick:j,onSlotLongPress:N}),a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"text-slate-100 flex items-center gap-2",children:[a.jsx(Tt,{className:"h-5 w-5 text-blue-400"}),"Slots de Poções"]})}),a.jsx(He,{children:a.jsx(sK,{characterId:e,consumables:u,onSlotsUpdate:E})})]})]}),a.jsx("div",{children:a.jsx(rK,{selectedItem:g,selectedSlot:h,character:s,onEquipmentChange:C})})]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem não encontrado"}),a.jsxs(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}const iK=({recipe:t,onCraft:e,isCrafting:s,selectedCharacter:r})=>{if(!t)return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 bg-muted/10 rounded-lg border-2 border-dashed border-muted",children:[a.jsx(ur,{className:"h-16 w-16 text-muted-foreground mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Selecione uma Receita"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha uma receita da lista para ver os detalhes e ingredientes necessários."})]});const n=()=>{if(t.craftType==="equipment")switch(t.result.type){case"weapon":return a.jsx(Tt,{className:"h-6 w-6"});case"armor":return a.jsx(bt,{className:"h-6 w-6"});case"accessory":return a.jsx(ra,{className:"h-6 w-6"});default:return a.jsx(Ci,{className:"h-6 w-6"})}return a.jsx(ct,{className:"h-6 w-6"})},i=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"text-orange-400 bg-orange-500/10 border-orange-500/20";case"epic":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"rare":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"uncommon":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-gray-400 bg-gray-500/10 border-gray-500/20"}else switch(t.result.type){case"elixir":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"potion":return"text-red-400 bg-red-500/10 border-red-500/20";case"antidote":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}},c=async()=>{!t.canCraft||s||await e(t.id,t.craftType)};return a.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[a.jsxs("div",{className:"flex items-start gap-4 p-6 border-b shrink-0",children:[a.jsx("div",{className:Be("p-3 rounded-lg border",i()),children:n()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h2",{className:"text-xl font-bold truncate",children:t.result.name}),a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx(qe,{className:Be("",i()),children:t.craftType==="equipment"?t.result.rarity:t.result.type}),t.craftType==="equipment"&&t.result.level_requirement&&a.jsxs(qe,{variant:"outline",children:["Nível ",t.result.level_requirement]})]})]}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-3",children:t.result.description}),t.craftType==="equipment"&&a.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:a.jsx(qe,{variant:"secondary",className:"text-xs",children:(()=>{const u=t,f=u.result.type,h=u.result.weapon_subtype;if(f==="weapon"&&h)switch(h){case"sword":return"Espada";case"axe":return"Machado";case"blunt":return"Maça";case"staff":return"Cajado";case"dagger":return"Adaga";default:return"Arma"}else{if(f==="armor")return"Armadura";if(f==="accessory")return"Acessório"}return f})()})})]})]}),t.craftType==="equipment"&&(()=>{const u=t;return(u.result.atk_bonus||0)>0||(u.result.def_bonus||0)>0||(u.result.mana_bonus||0)>0||(u.result.speed_bonus||0)>0||(u.result.hp_bonus||0)>0?a.jsxs("div",{className:"p-6 border-b bg-muted/20 shrink-0",children:[a.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center gap-2",children:[a.jsx(Br,{className:"h-4 w-4"}),"Atributos do Equipamento"]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[(u.result.atk_bonus||0)>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg",children:[a.jsx(Tt,{className:"w-4 h-4 text-red-400"}),a.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.atk_bonus," ATK"]})]}),(u.result.def_bonus||0)>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[a.jsx(bt,{className:"w-4 h-4 text-blue-400"}),a.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.def_bonus," DEF"]})]}),(u.result.mana_bonus||0)>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[a.jsx(ct,{className:"w-4 h-4 text-purple-400"}),a.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.mana_bonus," MANA"]})]}),(u.result.speed_bonus||0)>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-500/10 border border-green-500/20 rounded-lg",children:[a.jsx(At,{className:"w-4 h-4 text-green-400"}),a.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.speed_bonus," VEL"]})]}),(u.result.hp_bonus||0)>0&&a.jsxs("div",{className:"flex items-center gap-2 p-2 bg-pink-500/10 border border-pink-500/20 rounded-lg",children:[a.jsx(ds,{className:"w-4 h-4 text-pink-400"}),a.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.hp_bonus," HP"]})]})]})]}):null})(),t.craftType==="equipment"&&(()=>{const u=t,f={id:u.result_equipment_id,name:u.result.name,description:u.result.description,type:u.result.type,rarity:u.result.rarity,weapon_subtype:u.result.weapon_subtype,atk_bonus:u.result.atk_bonus||0,def_bonus:u.result.def_bonus||0,mana_bonus:u.result.mana_bonus||0,speed_bonus:u.result.speed_bonus||0,hp_bonus:u.result.hp_bonus||0,level_requirement:u.result.level_requirement||1,price:0,is_unlocked:!0};return a.jsxs("div",{className:"p-6 border-b bg-muted/10 shrink-0",children:[a.jsx("h3",{className:"text-base font-semibold mb-3",children:"Comparação com Equipamento Atual"}),a.jsx(Yb,{characterId:(r==null?void 0:r.id)||"",newEquipment:f,slotType:u.result.type,showTitle:!1,compact:!0})]})})(),a.jsxs("div",{className:"flex-1 p-6 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:t.craftType==="equipment"?"Materiais Necessários":"Ingredientes Necessários"}),a.jsxs(qe,{variant:"outline",className:"ml-auto",children:[t.ingredients.length," itens"]})]}),a.jsx("div",{className:"space-y-3 overflow-y-auto max-h-96 pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.ingredients.map((u,f)=>{const h=u.have>=u.quantity;return a.jsxs("div",{className:Be("flex items-center justify-between p-3 rounded-lg border transition-colors",h?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="equipment"&&a.jsx(Ci,{className:"h-4 w-4 text-blue-400"}),u.type==="drop"&&a.jsx(ra,{className:"h-4 w-4 text-orange-400"}),u.type==="consumable"&&a.jsx(ct,{className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"font-medium",children:u.name})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:Be("text-sm font-mono",h?"text-green-400":"text-red-400"),children:[u.have,"/",u.quantity]}),h?a.jsx(PE,{className:"h-4 w-4 text-green-400"}):a.jsx(pm,{className:"h-4 w-4 text-red-400"})]})]},f)})})]}),a.jsx("div",{className:"p-6 border-t bg-card/50 shrink-0",children:a.jsx(de,{onClick:c,disabled:!t.canCraft||s,className:Be("w-full h-12 text-base font-semibold transition-all",t.canCraft&&!s?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-muted text-muted-foreground cursor-not-allowed"),children:s?a.jsxs(a.Fragment,{children:[a.jsx(gm,{className:"h-4 w-4 mr-2 animate-spin"}),t.craftType==="equipment"?"Forjando...":"Criando..."]}):t.canCraft?a.jsxs(a.Fragment,{children:[a.jsx(Ci,{className:"h-4 w-4 mr-2"}),t.craftType==="equipment"?"Forjar Item":"Criar Item"]}):a.jsxs(a.Fragment,{children:[a.jsx(pm,{className:"h-4 w-4 mr-2"}),"Materiais Insuficientes"]})})})]})},lK=({recipe:t,isSelected:e,onClick:s})=>{const r=()=>t.craftType==="equipment"?a.jsx(Ci,{className:"h-4 w-4 text-blue-400"}):a.jsx(ct,{className:"h-4 w-4 text-purple-400"}),n=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"border-l-orange-500 bg-orange-500/5";case"epic":return"border-l-purple-500 bg-purple-500/5";case"rare":return"border-l-blue-500 bg-blue-500/5";case"uncommon":return"border-l-green-500 bg-green-500/5";default:return"border-l-gray-500 bg-gray-500/5"}else switch(t.result.type){case"elixir":return"border-l-purple-500 bg-purple-500/5";case"potion":return"border-l-red-500 bg-red-500/5";case"antidote":return"border-l-green-500 bg-green-500/5";default:return"border-l-blue-500 bg-blue-500/5"}};return a.jsx("div",{onClick:s,className:Be("p-4 border rounded-lg cursor-pointer transition-all border-l-4",n(),e?"ring-2 ring-primary border-primary bg-primary/5":"hover:bg-accent/50 hover:border-accent"),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"shrink-0 mt-1",children:r()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold truncate",children:t.result.name}),t.canCraft?a.jsx(PE,{className:"h-4 w-4 text-green-400 shrink-0"}):a.jsx(pm,{className:"h-4 w-4 text-red-400 shrink-0"})]}),a.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:t.result.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(qe,{variant:"outline",className:"text-xs",children:t.craftType==="equipment"?t.result.rarity:t.result.type}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.ingredients.length," ingredientes"]})]})]})]})})};function cK(){const t=Ot(),{character:e}=hM.useSearch();console.log("[CraftingPage] Iniciando com characterId:",e);const{characters:s,selectedCharacter:r,selectCharacter:n}=$c(),[i,c]=y.useState(!1),[u,f]=y.useState(!1),[h,p]=y.useState([]),[g,x]=y.useState([]),[b,_]=y.useState({consumables:[],drops:[],equipment:[]}),[j,N]=y.useState([]),[C,E]=y.useState([]),[S,P]=y.useState([]),[R,D]=y.useState([]),[$,A]=y.useState(null),[M,U]=y.useState(!1),[Y,V]=y.useState(""),[F,Q]=y.useState("all"),[G,k]=y.useState("all"),[B,z]=y.useState("all"),[W,L]=y.useState("all"),[X,ae]=y.useState("all");y.useEffect(()=>{U(!0)},[]),y.useEffect(()=>{if(!(!M||!e)&&s.length>0){const ie=s.find(se=>se.id===e);ie&&(!r||r.id!==e)&&n(ie)}},[M,e,s.length]),y.useEffect(()=>{if(!M||!r)return;(async()=>{c(!0);try{const[se,ue,ce,be,Ne,we,Ce,Oe]=await Promise.all([Ht.getCraftingRecipes(),Gt.getEquipmentCraftingRecipes(),Ht.getCharacterConsumables(r.id),Ht.getCharacterDrops(r.id),Gt.getCharacterEquipment(r.id),Ht.getAvailableConsumables(),Ht.getMonsterDrops(),Gt.getAllEquipments()]);se.success&&se.data&&p(se.data),ue.success&&ue.data&&x(ue.data),_({consumables:ce.success?ce.data||[]:[],drops:be.success?be.data||[]:[],equipment:Ne||[]}),we.success&&we.data&&N(we.data),Ce.success&&Ce.data&&E(Ce.data),Oe&&Array.isArray(Oe)&&P(Oe)}catch(se){console.error("Erro ao carregar dados:",se),me.error("Erro ao carregar receitas e inventário")}finally{c(!1)}})()},[M,r]),y.useEffect(()=>{if(!M||!h.length&&!g.length||!r)return;(()=>{var ue;const se=[];for(const ce of h)try{const be=(ue=b.consumables.find(Oe=>Oe.consumable_id===ce.result_id))==null?void 0:ue.consumable,Ne={name:ce.name,description:ce.description,type:"potion"};be&&(Ne.name=be.name,Ne.description=be.description,Ne.type=be.type);const we=ce.ingredients.map(Oe=>{var ke,st,Ae,I;let Qe="",ve=0,Re="drop";if(Oe.item_type==="monster_drop"){const q=b.drops.find(K=>K.drop_id===Oe.item_id);if(ve=(q==null?void 0:q.quantity)||0,Re="drop",(ke=q==null?void 0:q.drop)!=null&&ke.name)Qe=q.drop.name;else{const K=C.find(ge=>ge.id===Oe.item_id);Qe=(K==null?void 0:K.name)||`Drop ID: ${Oe.item_id}`}}else if(Oe.item_type==="consumable"){const q=b.consumables.find(K=>K.consumable_id===Oe.item_id);if(ve=(q==null?void 0:q.quantity)||0,Re="consumable",(st=q==null?void 0:q.consumable)!=null&&st.name)Qe=q.consumable.name;else{const K=j.find(ge=>ge.id===Oe.item_id);Qe=(K==null?void 0:K.name)||`Consumível ID: ${Oe.item_id}`}}else if(Oe.item_type==="equipment"){const q=b.equipment.filter(K=>K.equipment_id===Oe.item_id&&!K.is_equipped);if(ve=q.length,Re="equipment",(I=(Ae=q[0])==null?void 0:Ae.equipment)!=null&&I.name)Qe=q[0].equipment.name;else{const K=S.find(ge=>ge.id===Oe.item_id);Qe=(K==null?void 0:K.name)||`Equipamento ID: ${Oe.item_id}`}}return{name:Qe,quantity:Oe.quantity,have:ve,type:Re}}),Ce=we.every(Oe=>Oe.have>=Oe.quantity);se.push({id:ce.id,result_id:ce.result_id,result:Ne,ingredients:we,canCraft:Ce,craftType:"consumable"})}catch(be){console.error("Erro ao processar receita de consumível:",be)}for(const ce of g)try{if(ce.equipment){const be=ce.ingredients.map(we=>{var ve,Re,ke,st;let Ce="",Oe=0,Qe="drop";if(we.item_type==="monster_drop"){const Ae=b.drops.find(I=>I.drop_id===we.item_id);if(Oe=(Ae==null?void 0:Ae.quantity)||0,Qe="drop",(ve=Ae==null?void 0:Ae.drop)!=null&&ve.name)Ce=Ae.drop.name;else{const I=C.find(q=>q.id===we.item_id);Ce=(I==null?void 0:I.name)||`Drop ID: ${we.item_id}`}}else if(we.item_type==="consumable"){const Ae=b.consumables.find(I=>I.consumable_id===we.item_id);if(Oe=(Ae==null?void 0:Ae.quantity)||0,Qe="consumable",(Re=Ae==null?void 0:Ae.consumable)!=null&&Re.name)Ce=Ae.consumable.name;else{const I=j.find(q=>q.id===we.item_id);Ce=(I==null?void 0:I.name)||`Consumível ID: ${we.item_id}`}}else if(we.item_type==="equipment"){const Ae=b.equipment.filter(I=>I.equipment_id===we.item_id&&!I.is_equipped);if(Oe=Ae.length,Qe="equipment",(st=(ke=Ae[0])==null?void 0:ke.equipment)!=null&&st.name)Ce=Ae[0].equipment.name;else{const I=S.find(q=>q.id===we.item_id);Ce=(I==null?void 0:I.name)||`Equipamento ID: ${we.item_id}`}}return{name:Ce,quantity:we.quantity,have:Oe,type:Qe}}),Ne=be.every(we=>we.have>=we.quantity);se.push({id:ce.id,result_equipment_id:ce.result_equipment_id,result:{name:ce.equipment.name,description:ce.equipment.description,type:ce.equipment.type,rarity:ce.equipment.rarity,weapon_subtype:ce.equipment.weapon_subtype||void 0,atk_bonus:ce.equipment.atk_bonus||0,def_bonus:ce.equipment.def_bonus||0,mana_bonus:ce.equipment.mana_bonus||0,speed_bonus:ce.equipment.speed_bonus||0,hp_bonus:0,level_requirement:ce.equipment.level_requirement||1},ingredients:be,canCraft:Ne,craftType:"equipment"})}}catch(be){console.error("Erro ao processar receita de equipamento:",be)}if(D(se),$){const ce=se.find(be=>be.id===$.id);ce&&A(ce)}})()},[M,h,g,b,r,$==null?void 0:$.id,j,C,S]);const ee=y.useMemo(()=>{let ie=R;return Y&&(ie=ie.filter(se=>se.result.name.toLowerCase().includes(Y.toLowerCase())||se.result.description.toLowerCase().includes(Y.toLowerCase()))),F!=="all"&&(ie=ie.filter(se=>se.craftType===F)),B!=="all"&&(ie=ie.filter(se=>se.craftType==="equipment"?se.result.type===B:!0)),W!=="all"&&(ie=ie.filter(se=>se.craftType==="equipment"?se.result.weapon_subtype===W:!0)),X!=="all"&&(ie=ie.filter(se=>se.craftType==="equipment"?se.result.rarity===X:se.result.type===X)),G==="craftable"?ie=ie.filter(se=>se.canCraft):G==="missing"&&(ie=ie.filter(se=>!se.canCraft)),ie},[R,Y,F,G,B,W,X]),le=async(ie,se)=>{var ue;if(!(!r||u)){f(!0);try{let ce;if(se==="consumable"?ce=await Ht.craftItem(r.id,ie):ce=await Gt.craftEquipment(r.id,ie),ce.success){me.success("Item criado com sucesso!",{description:(ue=ce.data)==null?void 0:ue.message});const[be,Ne,we]=await Promise.all([Ht.getCharacterConsumables(r.id),Ht.getCharacterDrops(r.id),Gt.getCharacterEquipment(r.id)]);_({consumables:be.success?be.data||[]:b.consumables,drops:Ne.success?Ne.data||[]:b.drops,equipment:we||b.equipment})}else me.error("Erro ao criar item",{description:ce.error})}catch(ce){console.error("Erro ao criar item:",ce),me.error("Erro ao criar item")}finally{f(!1)}}};return M?!e||e.trim()===""?a.jsxs("div",{className:"container mx-auto py-6 text-center",children:[a.jsx("p",{children:"Redirecionando para seleção de personagem..."}),a.jsx(de,{onClick:()=>t({to:"/game/play"}),children:"Selecionar Personagem"})]}):r?a.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-7xl",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:r.id}}),className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),a.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Forja de Artefatos"}),a.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Crie poções, elixires e forje equipamentos únicos com materiais raros"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[a.jsx("div",{className:"lg:col-span-5",children:a.jsxs(De,{className:"h-full max-h-[calc(100vh-280px)]",children:[a.jsxs(ft,{className:"pb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Ci,{className:"h-5 w-5"}),"Receitas Disponíveis"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(qe,{variant:"outline",children:[ee.length," de ",R.length]}),(Y||F!=="all"||G!=="all"||B!=="all"||W!=="all"||X!=="all")&&a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>{V(""),Q("all"),k("all"),z("all"),L("all"),ae("all")},className:"h-6 px-2 text-xs",children:"Limpar Filtros"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(Ps,{placeholder:"Buscar receita...",value:Y,onChange:ie=>V(ie.target.value),className:"pl-9"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(xi,{value:F,onValueChange:ie=>{Q(ie),ie!=="equipment"&&(z("all"),L("all"),ae("all"))},children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Tipo"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"all",children:"Todos os Tipos"}),a.jsx(Vt,{value:"equipment",children:"Equipamentos"}),a.jsx(Vt,{value:"consumable",children:"Consumíveis"})]})]}),a.jsxs(xi,{value:G,onValueChange:ie=>k(ie),children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Status"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"all",children:"Todos"}),a.jsx(Vt,{value:"craftable",children:"Criáveis"}),a.jsx(Vt,{value:"missing",children:"Faltam Materiais"})]})]})]}),F==="equipment"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs(xi,{value:B,onValueChange:ie=>{z(ie),ie!=="weapon"&&L("all")},children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Tipo de Equipamento"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"all",children:"Todos Equipamentos"}),a.jsx(Vt,{value:"weapon",children:"Armas"}),a.jsx(Vt,{value:"armor",children:"Armaduras"}),a.jsx(Vt,{value:"accessory",children:"Acessórios"})]})]}),a.jsxs(xi,{value:X,onValueChange:ie=>ae(ie),children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Raridade"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"all",children:"Todas Raridades"}),a.jsx(Vt,{value:"common",children:"Comum"}),a.jsx(Vt,{value:"uncommon",children:"Incomum"}),a.jsx(Vt,{value:"rare",children:"Raro"}),a.jsx(Vt,{value:"epic",children:"Épico"}),a.jsx(Vt,{value:"legendary",children:"Lendário"})]})]})]}),B==="weapon"&&a.jsxs(xi,{value:W,onValueChange:ie=>L(ie),children:[a.jsx(po,{children:a.jsx(vi,{placeholder:"Tipo de Arma"})}),a.jsxs(go,{children:[a.jsx(Vt,{value:"all",children:"Todas as Armas"}),a.jsx(Vt,{value:"sword",children:"Espadas"}),a.jsx(Vt,{value:"axe",children:"Machados"}),a.jsx(Vt,{value:"blunt",children:"Maças"}),a.jsx(Vt,{value:"staff",children:"Cajados"}),a.jsx(Vt,{value:"dagger",children:"Adagas"})]})]})]})]})]}),a.jsx(He,{className:"flex-1 overflow-hidden",children:i?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"}),a.jsx("span",{className:"ml-2 text-muted-foreground",children:"Carregando receitas..."})]}):ee.length>0?a.jsx("div",{className:"space-y-2 h-full max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:ee.map(ie=>a.jsx(lK,{recipe:ie,isSelected:($==null?void 0:$.id)===ie.id,onClick:()=>A(ie)},ie.id))}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[a.jsx(Sd,{className:"h-12 w-12 text-muted-foreground mb-3"}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"Nenhuma receita encontrada"}),a.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Tente ajustar os filtros ou explore a torre para encontrar novas receitas"})]})})]})}),a.jsx("div",{className:"lg:col-span-7",children:a.jsx(De,{className:"h-full max-h-[calc(100vh-280px)]",children:a.jsx(iK,{recipe:$,onCraft:le,isCrafting:u,selectedCharacter:r})})})]})]}):a.jsx("div",{className:"container mx-auto py-6 text-center",children:a.jsx("p",{children:"Carregando personagem..."})}):a.jsx("div",{className:"container mx-auto py-6 text-center",children:a.jsx("p",{children:"Carregando..."})})}const hM=Wt("/_authenticated/game/play/hub/crafting")({component:cK,validateSearch:t=>{const e=t.character;return!e||typeof e!="string"?(console.warn("[CraftingRoute] Parâmetro character inválido:",e),{character:""}):{character:e.trim()}}});function uK(t){const[e,s]=y.useState(!1);return y.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(t);s(r.matches);const n=i=>{s(i.matches)};return r.addEventListener?r.addEventListener("change",n):r.addListener(n),()=>{r.removeEventListener?r.removeEventListener("change",n):r.removeListener(n)}},[t]),e}function Kb(){const[t,e]=y.useState(!1);return y.useEffect(()=>{if(typeof window>"u")return;const s=()=>{const r=window.innerWidth,n=window.innerHeight,i=r>n,c=n<=500,u=r<=1024;e(i&&c&&u)};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",()=>{setTimeout(s,100)}),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),t}function dK(){const t=y.useRef(null),[e,s]=y.useState("right"),r=y.useCallback(()=>{if(!t.current)return;const n=t.current,i=n.getBoundingClientRect();let c=n.parentElement;for(;c&&!c.classList.contains("grid");)c=c.parentElement;if(!c){s("right");return}const u=c.getBoundingClientRect(),f=u.width,h=i.left+i.width/2,p=u.left,g=h-p,x=f/3,b=f*2/3;g<x?s("right"):g>b?s("left"):s("bottom")},[]);return y.useEffect(()=>{r();const n=()=>r();return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[r]),{elementRef:t,tooltipPosition:e,updatePosition:r}}function fK({icon:t,label:e,value:s,color:r,bgColor:n,borderColor:i,tooltipData:c}){const[u,f]=y.useState(!1),h=uK("(max-width: 768px)"),{elementRef:p,tooltipPosition:g,updatePosition:x}=dK(),b=()=>{h&&f(!0)},_=()=>{h||x()},j=()=>a.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 shadow-xl",children:[a.jsx("div",{className:"text-sm font-medium text-slate-200 mb-2",children:c.title}),a.jsxs("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[c.calculations.map((N,C)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:N.label}),a.jsx("span",{className:N.color,children:N.value})]},C)),a.jsxs("div",{className:"border-t border-slate-600 pt-1 mt-1 flex justify-between font-bold",children:[a.jsx("span",{children:c.total.label}),a.jsx("span",{className:c.total.color,children:c.total.value})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsxs("div",{ref:p,className:`p-3 rounded-lg border ${n} ${i} ${h?"cursor-pointer":"cursor-help group"} relative`,onClick:b,onMouseEnter:_,title:h?`Toque para ver a fórmula de ${e}`:"Clique para ver a fórmula",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(t,{className:`h-4 w-4 ${r}`}),a.jsx("span",{className:`text-sm font-medium ${r}`,children:e})]}),a.jsx("div",{className:`text-2xl font-bold ${r}`,children:typeof s=="number"?s.toLocaleString():s}),!h&&a.jsx("div",{className:`absolute z-50 invisible group-hover:visible min-w-[280px] ${g==="left"?"right-full mr-2 -top-2":g==="right"?"left-full ml-2 -top-2":"top-full mt-2 left-1/2 transform -translate-x-1/2"}`,children:a.jsx(j,{})})]}),h&&a.jsx(Rn,{open:u,onOpenChange:f,children:a.jsxs(Qa,{className:"max-w-sm",children:[a.jsx(Mn,{children:a.jsxs(Ja,{className:"flex items-center gap-2",children:[a.jsx(t,{className:`h-5 w-5 ${r}`}),"Fórmula de ",e]})}),a.jsxs("div",{className:"space-y-2",children:[c.calculations.map((N,C)=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:N.label}),a.jsx("span",{className:`font-mono ${N.color}`,children:N.value})]},C)),a.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[a.jsx("span",{children:c.total.label}),a.jsx("span",{className:`${c.total.color}`,children:c.total.value})]})]})]})})]})}function hK({characterStats:t}){const e=t.strength||10,s=t.dexterity||10,r=t.intelligence||10,n=t.wisdom||10,i=t.vitality||10,c=t.luck||10,u=t.level,f=e+s+r+n+i+c,h=1-(Math.abs(e/f-1/6)+Math.abs(s/f-1/6)+Math.abs(r/f-1/6)+Math.abs(n/f-1/6)+Math.abs(i/f-1/6)+Math.abs(c/f-1/6))/2,p=1+h*.2;let g=1;const x=Math.max(e/f,s/f,r/f,n/f,i/f,c/f);x>.8&&(g=.7);const b=Math.pow(e,1.2)*p*g,_=Math.pow(s,1.15)*p*g,j=Math.pow(r,1.25)*p*g,N=Math.pow(n,1.1)*p*g,C=Math.pow(i,1.3)*p*g,E=c*p*g,S=t.sword_mastery||1,P=t.axe_mastery||1,R=t.blunt_mastery||1,D=t.defense_mastery||1,$=t.magic_mastery||1,A=Math.pow(Math.max(S,P,R),1.1)*p,M=Math.pow(D,1.2)*p,U=Math.pow($,1.15)*p,Y=50+u*2,V=20+u*1,F=2+u,Q=1+u,G=3+u,k=Y,B=Math.floor(C*2.5),z=Math.floor(b*.3),W=k+B+z,L=V,X=Math.floor(j*1.5),ae=Math.floor(N*1),ee=Math.floor(U*.8),le=L+X+ae+ee,ie=F,se=Math.floor(b*1.2),ue=Math.floor(A*.6),ce=Math.floor(_*.2),be=ie+se+ue+ce,Ne=F,we=Math.floor(j*1.4),Ce=Math.floor(N*.8),Oe=Math.floor(U*1),Qe=Ne+we+Ce+Oe,ve=Q,Re=Math.floor(C*.6),ke=Math.floor(N*.5),st=Math.floor(M*1),Ae=ve+Re+ke+st,I=G,q=Math.floor(_*1),K=Math.floor(E*.2),ge=I+q+K,_e=_*.25,ye=E*.35,Me=b*.1,Ye=Math.min(75,_e+ye+Me),it=130,jt=b*.4,Fs=E*.6,Hs=A*.3,zr=Math.min(250,it+jt+Fs+Hs),Nr=j*1.2,Sr=N*.8,rr=U*1.5;let ar=Nr+Sr+rr;ar>100&&(ar=100+(ar-100)*.7);const la=Math.min(200,ar),fr=(Os,hr)=>{const ca=hr||0,Je=Os+ca;return ca>0?a.jsxs("span",{children:[Je.toLocaleString(),a.jsxs("span",{className:"text-orange-400 text-sm ml-1 font-medium",children:["(+",ca,")"]})]}):a.jsx("span",{children:Je.toLocaleString()})},rs=(Os,hr,ca,Je)=>{const zt=[...hr];return zt.push({label:`Diversidade da Build: ${(h*100).toFixed(1)}%`,value:`Bônus: ${((p-1)*100).toFixed(1)}%`,color:h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}),g<1&&zt.push({label:"Penalidade Mono-Build:",value:`-${((1-g)*100).toFixed(0)}%`,color:"text-red-400"}),ca>0&&zt.push({label:"Bônus Equipamentos:",value:`+${ca}`,color:"text-orange-400"}),{title:Os,calculations:zt,total:{label:"Total Final (Sistema):",value:Je.toLocaleString(),color:"text-green-400"}}},Ui=[{icon:ds,label:"HP Máximo",value:fr(t.max_hp-(t.equipment_hp_bonus||0),t.equipment_hp_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:rs("Cálculo Exato do HP:",[{label:`Base (50 + 2×${u}):`,value:k,color:"text-blue-400"},{label:"Vitalidade^1.3 × 2.5:",value:`+${B} (${i}^1.3)`,color:"text-pink-400"},{label:"Força^1.2 × 0.3:",value:`+${z} (${e}^1.2)`,color:"text-red-400"},{label:"Subtotal Calculado:",value:W,color:"text-gray-300"}],t.equipment_hp_bonus||0,t.max_hp)},{icon:gI,label:"Mana Máxima",value:fr(t.max_mana-(t.equipment_mana_bonus||0),t.equipment_mana_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:rs("Cálculo Exato da Mana:",[{label:`Base (20 + 1×${u}):`,value:L,color:"text-blue-400"},{label:"Inteligência^1.25 × 1.5:",value:`+${X} (${r}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 1.0:",value:`+${ae} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 0.8:",value:`+${ee} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:le,color:"text-gray-300"}],t.equipment_mana_bonus||0,t.max_mana)},{icon:Tt,label:"ATK Físico",value:fr(t.atk-(t.equipment_atk_bonus||0),t.equipment_atk_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:rs("Cálculo Exato do ATK Físico:",[{label:`Base (2 + ${u}):`,value:ie,color:"text-blue-400"},{label:"Força^1.2 × 1.2:",value:`+${se} (${e}^1.2)`,color:"text-red-400"},{label:"Maior Maestria^1.1 × 0.6:",value:`+${ue} (${Math.max(S,P,R)}^1.1)`,color:"text-orange-400"},{label:"Destreza^1.15 × 0.2:",value:`+${ce} (${s}^1.15)`,color:"text-green-400"},{label:"Subtotal Calculado:",value:be,color:"text-gray-300"}],t.equipment_atk_bonus||0,t.atk)},...t.magic_attack&&t.magic_attack>0?[{icon:ct,label:"ATK Mágico",value:a.jsx("span",{children:t.magic_attack.toLocaleString()}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:rs("Cálculo Exato do ATK Mágico:",[{label:`Base (2 + ${u}):`,value:Ne,color:"text-blue-400"},{label:"Inteligência^1.25 × 1.4:",value:`+${we} (${r}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 0.8:",value:`+${Ce} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 1.0:",value:`+${Oe} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:Qe,color:"text-gray-300"}],0,t.magic_attack)}]:[],{icon:bt,label:"Defesa",value:fr(t.def-(t.equipment_def_bonus||0),t.equipment_def_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:rs("Cálculo Exato da Defesa:",[{label:`Base (1 + ${u}):`,value:ve,color:"text-blue-400"},{label:"Vitalidade^1.3 × 0.6:",value:`+${Re} (${i}^1.3)`,color:"text-pink-400"},{label:"Sabedoria^1.1 × 0.5:",value:`+${ke} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Defesa^1.2 × 1.0:",value:`+${st} (${D}^1.2)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:Ae,color:"text-gray-300"}],t.equipment_def_bonus||0,t.def)},{icon:At,label:"Velocidade",value:fr(t.speed-(t.equipment_speed_bonus||0),t.equipment_speed_bonus),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:rs("Cálculo Exato da Velocidade:",[{label:`Base (3 + ${u}):`,value:I,color:"text-blue-400"},{label:"Destreza^1.15 × 1.0:",value:`+${q} (${s}^1.15)`,color:"text-green-400"},{label:"Sorte × 0.2:",value:`+${K} (${c})`,color:"text-yellow-300"},{label:"Subtotal Calculado:",value:ge,color:"text-gray-300"}],t.equipment_speed_bonus||0,t.speed)},{icon:Nt,label:"Chance Crítica",value:a.jsxs("span",{children:[t.critical_chance.toFixed(1),"%"]}),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:rs("Cálculo Exato da Chance Crítica:",[{label:"Destreza^1.15 × 0.25:",value:`${_e.toFixed(1)}% (${s}^1.15)`,color:"text-green-400"},{label:"Sorte × 0.35:",value:`+${ye.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Força^1.2 × 0.1:",value:`+${Me.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Cap Máximo: 75%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${Ye.toFixed(1)}%`,color:"text-gray-300"}],0,t.critical_chance)},{icon:er,label:"Dano Crítico",value:a.jsxs("span",{children:[t.critical_damage.toFixed(0),"%"]}),color:"text-orange-400",bgColor:"bg-orange-500/5",borderColor:"border-orange-500/20",tooltipData:rs("Cálculo Exato do Dano Crítico:",[{label:"Base:",value:`${it}%`,color:"text-blue-400"},{label:"Força^1.2 × 0.4:",value:`+${jt.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Sorte × 0.6:",value:`+${Fs.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Maior Maestria^1.1 × 0.3:",value:`+${Hs.toFixed(1)}% (${Math.max(S,P,R)}^1.1)`,color:"text-orange-400"},{label:"Cap Máximo: 250%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${zr.toFixed(0)}%`,color:"text-gray-300"}],0,t.critical_damage)},{icon:ct,label:"Bônus Mágico",value:a.jsxs("span",{children:["+",Math.round(t.magic_damage_bonus),"%"]}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:rs("Cálculo Exato do Bônus Mágico:",[{label:"Inteligência^1.25 × 1.2:",value:`${Nr.toFixed(1)}% (${r}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 0.8:",value:`+${Sr.toFixed(1)}% (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 1.5:",value:`+${rr.toFixed(1)}% (${$}^1.15)`,color:"text-cyan-400"},{label:"Diminishing Returns após 100%",value:"",color:"text-orange-400"},{label:"Cap Máximo: 200%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${la.toFixed(1)}%`,color:"text-gray-300"}],0,t.magic_damage_bonus)}];return a.jsxs(De,{children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(cI,{className:"h-5 w-5"}),"Stats Derivados"]})}),a.jsxs(He,{className:"space-y-4 overflow-visible",children:[a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 overflow-visible",children:Ui.map((Os,hr)=>a.jsx(fK,{icon:Os.icon,label:Os.label,value:Os.value,color:Os.color,bgColor:Os.bgColor,borderColor:Os.borderColor,tooltipData:Os.tooltipData},hr))}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 border border-slate-700 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-2",children:"Análise da Build:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Diversidade:"}),a.jsxs("span",{className:`ml-2 ${h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}`,children:[(h*100).toFixed(1),"%"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Bônus:"}),a.jsxs("span",{className:"ml-2 text-green-400",children:["+",((p-1)*100).toFixed(1),"%"]})]}),g<1&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Mono-Build:"}),a.jsxs("span",{className:"ml-2 text-red-400",children:["-",((1-g)*100).toFixed(0),"%"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-400",children:"Dominante:"}),a.jsxs("span",{className:"ml-2 text-yellow-400",children:[(x*100).toFixed(0),"%"]})]})]})]})]})]})]})}const mM=Wt("/_authenticated/game/play/hub/character-stats")({component:mK,validateSearch:t=>{const e=t.character;return!e||typeof e!="string"||e.trim()===""?(console.warn("[CharacterStatsRoute] Parâmetro character inválido:",e),{character:""}):{character:e.trim()}}});function mK(){const t=Ot(),{character:e}=mM.useSearch();console.log("[CharacterStatsPage] Character ID recebido:",e);const[s,r]=y.useState(null),[n,i]=y.useState(!0),[c,u]=y.useState(!1),[f,h]=y.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0}),p=y.useCallback(async()=>{if(!e||e.trim()===""){console.warn("[CharacterStatsPage] Character ID não fornecido, redirecionando para seleção de personagem"),t({to:"/game/play"});return}try{i(!0);const S=await Ge.getCharacterStats(e);S.success&&S.data?(console.log("[CharacterStatsPage] Stats recebidos:",{hp:{value:S.data.max_hp,base:S.data.base_max_hp,bonus:S.data.equipment_hp_bonus},atk:{value:S.data.atk,base:S.data.base_atk,bonus:S.data.equipment_atk_bonus}}),r(S.data)):(me.error("Erro ao carregar stats do personagem",{description:S.error}),t({to:"/game/play/hub",search:{character:e}}))}catch(S){console.error("Erro ao carregar stats:",S),me.error("Erro ao carregar stats do personagem"),t({to:"/game/play/hub",search:{character:e}})}finally{i(!1)}},[e,t]);y.useEffect(()=>{e&&p()},[e]);const g=Object.values(f).reduce((S,P)=>S+P,0),x=((s==null?void 0:s.attribute_points)||0)-g,b=S=>{x>0&&h(P=>({...P,[S]:P[S]+1}))},_=S=>{f[S]>0&&h(P=>({...P,[S]:P[S]-1}))},j=()=>{h({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},N=async()=>{if(!(g===0||!e)){u(!0);try{const S=await Ge.distributeAttributePoints(e,f);S.success?(me.success("Pontos distribuídos com sucesso!"),j(),await p()):me.error("Erro ao distribuir pontos",{description:S.error})}catch(S){console.error("Erro ao distribuir pontos:",S),me.error("Erro ao distribuir pontos")}finally{u(!1)}}},C={strength:{label:"Força",icon:Br,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",description:"Aumenta dano físico e capacidade de carga"},dexterity:{label:"Destreza",icon:At,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",description:"Aumenta velocidade e chance de crítico"},intelligence:{label:"Inteligência",icon:ct,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",description:"Aumenta dano mágico e pontos de mana"},wisdom:{label:"Sabedoria",icon:No,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",description:"Aumenta regeneração de mana e resistência"},vitality:{label:"Vitalidade",icon:ds,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",description:"Aumenta pontos de vida e regeneração"},luck:{label:"Sorte",icon:Nt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",description:"Aumenta chance de drops raros e críticos"}},E=S=>{switch(S){case cs.SWORD_MASTERY:return Tt;case cs.AXE_MASTERY:return At;case cs.BLUNT_MASTERY:return er;case cs.DEFENSE_MASTERY:return bt;case cs.MAGIC_MASTERY:return ct}};return n?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):s?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4 overflow-visible",children:a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex flex-col items-start gap-4",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[a.jsx(hs,{className:"h-2 w-2 mr-2"}),"Voltar ao Hub"]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Atributos & Habilidades"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie os stats do seu personagem"})]})]}),s.attribute_points>0&&a.jsxs(qe,{variant:"outline",className:"bg-yellow-500/10 border-yellow-500/30 text-yellow-400 px-3 py-1",children:[a.jsx(Nt,{className:"h-4 w-4 mr-2"}),x," pontos disponíveis"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 overflow-visible",children:[a.jsxs(De,{children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Br,{className:"h-5 w-5"}),"Atributos Primários"]})}),a.jsxs(He,{className:"space-y-4",children:[Object.entries(C).map(([S,P])=>{const R=S,D=s[R]||0,$=P.icon;return a.jsxs(Rs.div,{className:`flex items-center gap-4 p-4 rounded-lg border ${P.bgColor} ${P.borderColor}`,whileHover:{scale:1.01},children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx($,{className:`h-5 w-5 ${P.color}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-sm",children:P.label}),a.jsx("div",{className:"text-xs text-muted-foreground",children:P.description})]})]}),a.jsxs("div",{className:"text-center min-w-[80px]",children:[a.jsxs("div",{className:"text-lg font-bold",children:[D,f[R]>0&&a.jsxs("span",{className:"text-green-400 ml-1 text-sm",children:["+",f[R]]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[D+f[R],"/50"]})]}),s.attribute_points>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(de,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>_(R),disabled:f[R]===0,children:a.jsx(OE,{className:"h-4 w-4"})}),a.jsx("div",{className:"w-8 text-center text-sm font-mono",children:f[R]}),a.jsx(de,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>b(R),disabled:x===0,children:a.jsx(Bo,{className:"h-4 w-4"})})]})]},R)}),s.attribute_points>0&&g>0&&a.jsx(tT,{children:a.jsxs(Rs.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t pt-4 mt-4",children:[a.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-3 mb-4",children:[a.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[a.jsx(ct,{className:"h-4 w-4 text-primary"}),"Preview dos Melhoramentos"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.vitality>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"HP:"}),a.jsxs("span",{className:"text-green-400",children:["+",f.vitality*8]})]}),f.intelligence>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Mana:"}),a.jsxs("span",{className:"text-blue-400",children:["+",f.intelligence*5]})]}),f.strength>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Ataque:"}),a.jsxs("span",{className:"text-red-400",children:["+",f.strength*2]})]}),f.dexterity>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Velocidade:"}),a.jsxs("span",{className:"text-green-400",children:["+",Math.floor(f.dexterity*1.5)]})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(de,{variant:"outline",onClick:j,className:"flex-1",children:[a.jsx($E,{className:"h-4 w-4 mr-2"}),"Resetar"]}),a.jsxs(de,{onClick:N,disabled:c,className:"flex-1 bg-emerald-500 hover:bg-emerald-600",children:[c?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}):a.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Confirmar"]})]})]})})]})]}),a.jsx(hK,{characterStats:s}),a.jsxs(De,{className:"lg:col-span-2",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(ct,{className:"h-5 w-5"}),"Habilidades de Combate"]})}),a.jsx(He,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.values(cs).map(S=>{const P=E(S),R=s[`${S}_mastery`],D=s[`${S}_mastery_xp`],$=n6(R),A=D/$*100;return a.jsxs("div",{className:"bg-card p-4 rounded-lg border",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(P,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold capitalize",children:S.replace("_"," ")}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nível ",R]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:["XP: ",D,"/",$]}),a.jsxs("span",{children:[Math.round(A),"%"]})]}),a.jsx(qa,{value:A,className:"h-2"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:o6(S)})]},S)})})})]})]})]})}):a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro ao carregar"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Não foi possível carregar os stats do personagem"}),a.jsx(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:"Voltar ao Hub"})]})})}function pK({className:t="",showHeader:e=!0,collapsible:s=!1}){const{user:r}=qs(),[n,i]=y.useState([]),[c,u]=y.useState(null),[f,h]=y.useState(!0),[p,g]=y.useState(1),[x,b]=y.useState(!1),[_,j]=y.useState(0),[N,C]=y.useState(!1),[E,S]=y.useState(null),P=6;y.useEffect(()=>{r!=null&&r.id&&R()},[r==null?void 0:r.id,p]);const R=async()=>{if(r!=null&&r.id){h(!0);try{const M=await Bh.getUserCemetery(r.id,{page:p,limit:P});M.success&&M.data?(i(M.data.characters),u(M.data.stats),j(M.data.total),b(M.data.hasMore)):me.error("Erro ao carregar cemitério",{description:M.error||"Erro desconhecido"})}catch(M){console.error("Erro ao carregar cemitério:",M),me.error("Erro ao carregar cemitério")}finally{h(!1)}}},D=M=>Bh.formatSurvivalTime(M),$=(M,U)=>Bh.formatDeathCause(M,U),A=M=>new Date(M).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return f&&n.length===0?a.jsxs(De,{className:t,children:[e&&a.jsx(ft,{className:"pb-4",children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitério"]})}),a.jsx(He,{children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})})})]}):!c||c.total_deaths===0?a.jsxs(De,{className:t,children:[e&&a.jsx(ft,{className:"pb-4",children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitério"]})}),a.jsx(He,{children:a.jsxs("div",{className:"text-center py-8 space-y-4",children:[a.jsx("div",{className:"text-6xl opacity-50",children:"⚰️"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Cemitério Vazio"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum personagem foi perdido ainda. Que a sorte continue com você!"})]})]})})]}):a.jsxs(De,{className:t,children:[e&&a.jsx(ft,{className:"pb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitério",a.jsxs(qe,{variant:"destructive",className:"ml-2",children:[c.total_deaths," mort",c.total_deaths===1?"e":"es"]})]}),s&&a.jsx(de,{variant:"ghost",size:"sm",onClick:()=>C(!N),children:N?a.jsx(No,{className:"h-4 w-4"}):a.jsx(vv,{className:"h-4 w-4"})})]})}),(!s||!N)&&a.jsxs(He,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-center",children:[a.jsx(Sa,{className:"h-6 w-6 mx-auto mb-2 text-red-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Nível"}),a.jsx("div",{className:"text-xl font-bold text-red-400",children:c.highest_level_reached})]}),a.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-3 text-center",children:[a.jsx(er,{className:"h-6 w-6 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Andar"}),a.jsx("div",{className:"text-xl font-bold text-orange-400",children:c.highest_floor_reached})]}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-center",children:[a.jsx(qB,{className:"h-6 w-6 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Tempo Total"}),a.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[c.total_survival_time_hours,"h"]})]}),a.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3 text-center",children:[a.jsx(IE,{className:"h-6 w-6 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Ameaça"}),a.jsx("div",{className:"text-xs font-bold text-purple-400 truncate",title:c.deadliest_monster,children:c.deadliest_monster})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Personagens Perdidos"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," de ",_]})]}),f?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(M=>a.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 animate-pulse",children:[a.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mb-3"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-muted/30 rounded w-full"}),a.jsx("div",{className:"h-4 bg-muted/30 rounded w-3/4"})]})]},M))}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(M=>a.jsx(De,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 bg-red-500/5 border-red-500/20",onClick:()=>S(M),children:a.jsx(He,{className:"p-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-semibold text-lg truncate",children:M.name}),a.jsxs(qe,{variant:"outline",className:"bg-background/50",children:["Nv ",M.level]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Tt,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-red-400 font-medium",children:M.atk})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(bt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),a.jsx("div",{className:"text-blue-400 font-medium",children:M.def})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(At,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),a.jsx("div",{className:"text-yellow-400 font-medium",children:M.speed})]})]}),a.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Andar alcançado:"}),a.jsx("span",{className:"font-medium text-orange-400",children:M.floor_reached})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Tempo de vida:"}),a.jsx("span",{className:"font-medium text-blue-400",children:D(M.survival_time_minutes)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Gold acumulado:"}),a.jsx("span",{className:"font-medium text-yellow-400",children:Lr(M.gold)})]})]}),a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2",children:[a.jsx("div",{className:"text-xs text-red-400 font-medium",children:$(M.death_cause,M.killed_by_monster)}),a.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:A(M.died_at)})]})]})})},M.id))})]}),_>P&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>g(M=>Math.max(1,M-1)),disabled:p===1||f,children:[a.jsx(vv,{className:"h-4 w-4 mr-1"}),"Anterior"]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Página ",p," de ",Math.ceil(_/P)]}),a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>g(M=>M+1),disabled:!x||f,children:["Próxima",a.jsx(RE,{className:"h-4 w-4 ml-1"})]})]})]}),E&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(De,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsx(ft,{children:a.jsxs(pt,{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-5 w-5 text-red-500"}),E.name,a.jsxs(qe,{variant:"outline",className:"ml-2",children:["Nível ",E.level]})]})}),a.jsxs(He,{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-3 text-center",children:[a.jsx(Tt,{className:"h-5 w-5 mx-auto mb-2 text-red-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Ataque"}),a.jsx("div",{className:"text-xl font-bold text-red-400",children:E.atk})]}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-3 text-center",children:[a.jsx(bt,{className:"h-5 w-5 mx-auto mb-2 text-blue-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Defesa"}),a.jsx("div",{className:"text-xl font-bold text-blue-400",children:E.def})]}),a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-3 text-center",children:[a.jsx(At,{className:"h-5 w-5 mx-auto mb-2 text-yellow-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Velocidade"}),a.jsx("div",{className:"text-xl font-bold text-yellow-400",children:E.speed})]}),a.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded p-3 text-center",children:[a.jsx(Nt,{className:"h-5 w-5 mx-auto mb-2 text-green-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"HP Máximo"}),a.jsx("div",{className:"text-xl font-bold text-green-400",children:E.max_hp})]}),a.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-3 text-center",children:[a.jsx(Nt,{className:"h-5 w-5 mx-auto mb-2 text-purple-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Mana Máxima"}),a.jsx("div",{className:"text-xl font-bold text-purple-400",children:E.max_mana})]}),a.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded p-3 text-center",children:[a.jsx(er,{className:"h-5 w-5 mx-auto mb-2 text-orange-400"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Andar Alcançado"}),a.jsx("div",{className:"text-xl font-bold text-orange-400",children:E.floor_reached})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Atributos Primários"}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Força"}),a.jsx("div",{className:"text-lg font-bold",children:E.strength})]}),a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Destreza"}),a.jsx("div",{className:"text-lg font-bold",children:E.dexterity})]}),a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Inteligência"}),a.jsx("div",{className:"text-lg font-bold",children:E.intelligence})]}),a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Sabedoria"}),a.jsx("div",{className:"text-lg font-bold",children:E.wisdom})]}),a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Vitalidade"}),a.jsx("div",{className:"text-lg font-bold",children:E.vitality})]}),a.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[a.jsx("div",{className:"text-sm text-muted-foreground",children:"Sorte"}),a.jsx("div",{className:"text-lg font-bold",children:E.luck})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Resumo da Jornada"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(gm,{className:"h-4 w-4 text-blue-400"}),"Tempo de sobrevivência"]}),a.jsx("span",{className:"font-medium text-blue-400",children:D(E.survival_time_minutes)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"h-4 w-4 text-yellow-400"}),"XP acumulado"]}),a.jsx("span",{className:"font-medium text-yellow-400",children:Lr(E.xp)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(_r,{className:"h-4 w-4 text-yellow-400"}),"Gold acumulado"]}),a.jsx("span",{className:"font-medium text-yellow-400",children:Lr(E.gold)})]})]})]}),a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-4",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-red-400",children:"Fim da Jornada"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qs,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"font-medium",children:$(E.death_cause,E.killed_by_monster)})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(TE,{className:"h-4 w-4"}),a.jsx("span",{children:A(E.died_at)})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(de,{onClick:()=>S(null),children:"Fechar"})})]})]})})]})}const gK=Wt("/_authenticated/game/play/hub/cemetery")({component:xK});function xK(){const t=Ot();return a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary",children:a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs(de,{variant:"ghost",onClick:()=>t({to:"/game/play"}),className:"mb-4",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar à Seleção de Personagens"]}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent",children:"Cemitério do Tower Trials"}),a.jsx("p",{className:"text-muted-foreground",children:"Honre a memória dos bravos aventureiros que caíram nas trevas da torre"})]})]}),a.jsx(pK,{className:"w-full",showHeader:!1,collapsible:!1})]})})}const pM=Wt("/_authenticated/game/play/hub/equipment/select")({component:vK,validateSearch:t=>({character:t.character||"",slot:t.slot||"main_hand"})});function vK(){const t=Ot(),{character:e,slot:s}=pM.useSearch(),[r,n]=y.useState(null),[i,c]=y.useState([]),[u,f]=y.useState([]),[h,p]=y.useState(null),[g,x]=y.useState(!0),[b,_]=y.useState(""),[j,N]=y.useState("all"),[C,E]=y.useState("name"),[S,P]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e||!s){t({to:"/game/play/hub",search:{character:e}});return}try{x(!0);const F=await Ge.getCharacter(e);F.success&&F.data&&n(F.data);const Q=await Gt.getCharacterEquipment(e);c(Q)}catch(F){console.error("Erro ao carregar dados:",F),me.error("Erro ao carregar equipamentos")}finally{x(!1)}})()},[e,s,t]),y.useEffect(()=>{const V=i.filter(F=>{if(!F.equipment)return!1;const Q=F.equipment;return!(!R(Q,s)||j!=="all"&&Q.type!==j||b&&!Q.name.toLowerCase().includes(b.toLowerCase()))});V.sort((F,Q)=>{const G=F.equipment,k=Q.equipment;switch(C){case"name":return G.name.localeCompare(k.name);case"level":return(k.level_requirement||0)-(G.level_requirement||0);case"rarity":{const B={common:1,uncommon:2,rare:3,epic:4,legendary:5};return(B[k.rarity]||0)-(B[G.rarity]||0)}case"attack":return k.atk_bonus-G.atk_bonus;case"defense":return k.def_bonus-G.def_bonus;default:return 0}}),f(V)},[i,b,j,C,s]);const R=(V,F)=>{switch(F){case"main_hand":case"off_hand":return V.type==="weapon";case"armor":return V.type==="armor";case"accessory":return V.type==="accessory";default:return!1}},D=V=>{switch(V){case"main_hand":return"Mão Principal";case"off_hand":return"Mão Secundária";case"armor":return"Armadura";case"accessory":return"Acessório";default:return V}},$=V=>{switch(V.type){case"weapon":return a.jsx(Tt,{className:"h-6 w-6 text-red-400"});case"armor":return a.jsx(cd,{className:"h-6 w-6 text-blue-400"});case"accessory":return a.jsx(ra,{className:"h-6 w-6 text-purple-400"});default:return a.jsx(bt,{className:"h-6 w-6 text-slate-400"})}},A=V=>{const F={common:"border-slate-600 bg-slate-800/30 text-slate-300",uncommon:"border-emerald-600 bg-emerald-900/30 text-emerald-300",rare:"border-blue-600 bg-blue-900/30 text-blue-300",epic:"border-purple-600 bg-purple-900/30 text-purple-300",legendary:"border-amber-600 bg-amber-900/30 text-amber-300"};return F[V]||F.common},M=async V=>{if(!(!e||S))try{P(!0);const F=await Gt.toggleEquipment(e,V.id,!0,s);F.success?(me.success(`${V.name} equipado com sucesso!`),t({to:"/game/play/hub/equipment",search:{character:e}})):me.error(F.error||"Erro ao equipar item")}catch(F){console.error("Erro ao equipar item:",F),me.error("Erro ao equipar item")}finally{P(!1)}},U=V=>{if(!V.equipment)return null;const F=V.equipment,Q=(h==null?void 0:h.id)===F.id;return a.jsx("div",{className:`relative cursor-pointer transition-all duration-200 ${Q?"transform scale-[1.02]":"hover:transform hover:scale-[1.01]"}`,onClick:()=>p(F),children:a.jsx(De,{className:`border-2 transition-all duration-200 ${Q?"border-amber-400 bg-amber-900/20 shadow-lg shadow-amber-400/20":`${A(F.rarity)} hover:brightness-110`}`,children:a.jsx(He,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${A(F.rarity)}`,children:$(F)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-slate-200 truncate",children:F.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(qe,{variant:"outline",className:"text-xs",children:F.rarity}),F.level_requirement&&F.level_requirement>1&&a.jsxs(qe,{variant:"outline",className:"text-xs",children:["Nv. ",F.level_requirement]})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-400",children:[F.atk_bonus>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Tt,{className:"h-3 w-3 text-red-400"}),"+",F.atk_bonus]}),F.def_bonus>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(bt,{className:"h-3 w-3 text-blue-400"}),"+",F.def_bonus]}),F.mana_bonus>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(At,{className:"h-3 w-3 text-purple-400"}),"+",F.mana_bonus]})]})]})]})})})},F.id)},Y=()=>{if(!h)return a.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ur,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg",children:"Selecione um equipamento"}),a.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})});const V=r?r.level>=(h.level_requirement||1):!1;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`p-4 rounded-lg border-2 ${A(h.rarity)}`,children:$(h)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:h.name}),a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(qe,{className:`border ${A(h.rarity)}`,children:h.rarity}),a.jsx(qe,{variant:"outline",className:"text-slate-300",children:h.type}),h.rarity==="legendary"&&a.jsx(Nt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]})]})]}),a.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:a.jsx("p",{className:"text-slate-300 leading-relaxed",children:h.description})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.atk_bonus>0&&a.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tt,{className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),a.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",h.atk_bonus]})]}),h.def_bonus>0&&a.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bt,{className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),a.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",h.def_bonus]})]}),h.mana_bonus>0&&a.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(At,{className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),a.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",h.mana_bonus]})]}),h.speed_bonus&&h.speed_bonus>0&&a.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(At,{className:"h-4 w-4 text-yellow-400"}),a.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),a.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",h.speed_bonus]})]})]})]}),h.level_requirement&&h.level_requirement>1&&a.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-slate-400",children:"Nível mínimo:"}),a.jsx("span",{className:`font-bold ${V?"text-green-400":"text-red-400"}`,children:h.level_requirement})]})]}),h.weapon_subtype&&a.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),a.jsx("p",{className:"text-slate-400 capitalize",children:h.weapon_subtype})]}),a.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:a.jsx(de,{onClick:()=>M(h),disabled:!V||S,className:`w-full ${V?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:S?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Equipando..."]}):V?`Equipar em ${D(s)}`:`Nível ${h.level_requirement} necessário`})})]})};return g?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"h-96 bg-slate-700 rounded"}),a.jsx("div",{className:"lg:col-span-2 h-96 bg-slate-700 rounded"})]})]})})}):r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub/equipment",search:{character:e}}),className:"self-start",children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar"]}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-100 flex items-center gap-2",children:[a.jsx(Tt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-400"}),a.jsx("span",{className:"hidden sm:inline",children:"Selecionar Equipamento"}),a.jsx("span",{className:"sm:hidden",children:"Equipamentos"})]}),a.jsxs("p",{className:"text-slate-400 text-sm sm:text-base",children:[r.name," - ",D(s)]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50",children:[a.jsx(ft,{className:"pb-3",children:a.jsxs(pt,{className:"text-slate-100 flex items-center gap-2 text-lg",children:[a.jsx(Sd,{className:"h-5 w-5 text-amber-400"}),"Filtros"]})}),a.jsxs(He,{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Jm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500"}),a.jsx(Ps,{placeholder:"Buscar equipamento...",value:b,onChange:V=>_(V.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-slate-200"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Tipo"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-2 gap-2",children:[{value:"all",label:"Todos"},{value:"weapon",label:"Armas"},{value:"armor",label:"Armaduras"},{value:"accessory",label:"Acessórios"}].map(V=>a.jsx(de,{variant:j===V.value?"default":"outline",size:"sm",onClick:()=>N(V.value),className:"text-xs",children:V.label},V.value))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Ordenar por"}),a.jsxs("select",{value:C,onChange:V=>E(V.target.value),className:"w-full p-2 rounded-md bg-slate-700/50 border border-slate-600 text-slate-200 text-sm",children:[a.jsx("option",{value:"name",children:"Nome"}),a.jsx("option",{value:"level",children:"Nível"}),a.jsx("option",{value:"rarity",children:"Raridade"}),a.jsx("option",{value:"attack",children:"Ataque"}),a.jsx("option",{value:"defense",children:"Defesa"})]})]})]})]}),a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50",children:[a.jsx(ft,{className:"pb-3",children:a.jsxs(pt,{className:"text-slate-100 text-lg",children:["Equipamentos (",u.length,")"]})}),a.jsx(He,{className:"space-y-3 max-h-[400px] sm:max-h-[500px] lg:max-h-[600px] overflow-y-auto",children:u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ur,{className:"h-12 w-12 mx-auto mb-3 text-slate-600 opacity-50"}),a.jsx("p",{className:"text-slate-500",children:"Nenhum equipamento encontrado"})]}):u.map(U)})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(De,{className:"bg-slate-800/50 border-slate-700/50 h-full min-h-[400px]",children:[a.jsx(ft,{children:a.jsx(pt,{className:"text-slate-100",children:"Detalhes do Equipamento"})}),a.jsx(He,{className:"h-full",children:Y()})]})})]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem não encontrado"}),a.jsxs(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[a.jsx(hs,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}const yK="/assets/thief-idle-01-Cg6afdQr.png",bK="/assets/thief-idle-02-Des9M6g7.png",wK="/assets/thief-idle-03-zEN7iEdx.png";function _K({className:t="",size:e=64}){const[s,r]=y.useState(1),n=[yK,bK,wK];return y.useEffect(()=>{const i=setInterval(()=>{r(c=>c%3+1)},600);return()=>clearInterval(i)},[]),a.jsx("div",{className:`relative ${t}`,style:{width:e,height:e},children:a.jsx("img",{src:n[s-1],alt:"Thief Idle Animation",className:"object-contain"})})}function jK({player:t,currentEnemy:e,playerHpPercentage:s,playerManaPercentage:r,enemyHpPercentage:n,isPlayerTurn:i}){var $,A,M,U,Y,V,F,Q,G,k,B,z;y.useEffect(()=>{console.log("[BattleArena] Props recebidas:"),console.log("- player:",t==null?void 0:t.name,`(andar: ${t==null?void 0:t.floor})`),console.log("- currentEnemy:",e==null?void 0:e.name,`(HP: ${e==null?void 0:e.hp}/${e==null?void 0:e.maxHp})`),console.log("- playerHpPercentage:",s),console.log("- enemyHpPercentage:",n),console.log("- isPlayerTurn:",i)},[t,e,s,n,i]);const[c,u]=y.useState(!1),[f,h]=y.useState(!1),[p,g]=y.useState([]),[x,b]=y.useState(!1),_=y.useRef(null);y.useEffect(()=>{const W=L=>{_.current&&!_.current.contains(L.target)&&b(!1)};return x&&(document.addEventListener("mousedown",W),document.addEventListener("touchstart",W)),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchstart",W)}},[x]);const j=()=>{b(!x)},[N,C]=y.useState({playerHp:t.hp,enemyHp:e.hp,battleId:`${t.floor}-${e.name}-${Date.now()}`});y.useEffect(()=>{const W=`${t.floor}-${e.name}`;if(!N.battleId.includes(W)){C({playerHp:t.hp,enemyHp:e.hp,battleId:W});return}let L=!1;if(t.hp<N.playerHp&&N.playerHp-t.hp>=1){const X=N.playerHp-t.hp;console.log(`[BattleArena] Jogador recebeu ${X} de dano`),E(X,!0,!1,"physical"),L=!0}if(e.hp<N.enemyHp&&N.enemyHp-e.hp>=1){const X=N.enemyHp-e.hp,ae=X>t.atk*1.5;console.log(`[BattleArena] Inimigo recebeu ${X} de dano ${ae?"(CRÍTICO)":""}`),E(X,!1,ae,"physical"),L=!0}L&&C({playerHp:t.hp,enemyHp:e.hp,battleId:W})},[t.hp,e.hp,t.atk,t.floor,e.name]);const E=(W,L,X,ae)=>{const ee=`${Date.now()}-${Math.random()}`,le={id:ee,damage:W,isPlayer:L,isCritical:X,damageType:ae,timestamp:Date.now()};g(ie=>[...ie,le]),setTimeout(()=>{g(ie=>ie.filter(se=>se.id!==ee))},2e3)},S=W=>({aggressive:"Agressivo",defensive:"Defensivo",balanced:"Equilibrado"})[W]||W,P=W=>{switch(W){case"aggressive":return"bg-red-500/20 text-red-400 border-red-500/30";case"defensive":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"balanced":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},R=W=>({armored:"Blindado",swift:"Veloz",magical:"Mágico",brutish:"Brutal",resilient:"Resistente",berserker:"Berserker",ethereal:"Etéreo",venomous:"Venenoso"})[W]||W,D=W=>{switch(W){case"armored":return a.jsx(bt,{className:"h-3 w-3"});case"swift":return a.jsx(At,{className:"h-3 w-3"});case"magical":return a.jsx(ct,{className:"h-3 w-3"});case"brutish":return a.jsx(Tt,{className:"h-3 w-3"});case"resilient":return a.jsx(Nv,{className:"h-3 w-3"});case"berserker":return a.jsx(er,{className:"h-3 w-3"});case"ethereal":return a.jsx(No,{className:"h-3 w-3"});case"venomous":return a.jsx(Qm,{className:"h-3 w-3"});default:return a.jsx(QI,{className:"h-3 w-3"})}};return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/30 via-transparent to-slate-900/30 rounded-xl"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-red-500/5 rounded-xl"}),a.jsx(De,{className:`relative border-2 backdrop-blur-sm overflow-hidden transition-all duration-500 ${s>=70?"battle-card-healthy":s>=30?"battle-card-wounded":"battle-card-critical"}`,children:a.jsxs(He,{className:"p-3 md:p-6",children:[a.jsx("div",{className:"text-center mb-3 md:mb-6",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 mb-2",children:[a.jsxs(qe,{variant:"outline",className:"px-2 py-1 text-xs bg-background/50",children:[a.jsx(Tt,{className:"h-3 w-3 mr-1"}),"Andar ",t.floor]}),a.jsx("div",{className:"h-1.5 w-1.5 md:h-2 md:w-2 rounded-full bg-primary animate-pulse"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(qe,{variant:i?"default":"secondary",className:`px-2 py-1 text-xs ${i?"bg-primary text-primary-foreground border-primary":"bg-secondary text-secondary-foreground border-secondary"}`,children:i?"Seu Turno":"Turno do Inimigo"}),i&&a.jsxs("div",{className:"relative",ref:_,children:[a.jsx("button",{className:"ml-1 text-muted-foreground hover:text-foreground transition-colors touch-manipulation",onClick:j,onTouchStart:j,"aria-label":"Mostrar atalhos de teclado",children:a.jsx(RI,{className:"h-3 w-3 md:h-4 md:w-4"})}),x&&a.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 z-50 bg-background border border-border rounded-lg shadow-xl p-4 w-72 md:w-80 max-w-[90vw]",children:[a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-semibold mb-3 text-center text-foreground",children:"Atalhos de Teclado"}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"A"}),a.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"S"}),a.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"D"})]}),a.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Atacar, Defender, Fugir"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"1"}),a.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"2"}),a.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"3"})]}),a.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Magias 1, 2, 3"})]}),a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"Q"}),a.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"W"}),a.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"E"})]}),a.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Poções 1, 2, 3"})]})]})]}),a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-border"}),a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 translate-y-px w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-background"})]})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-8 items-start",children:[a.jsxs("div",{className:"space-y-2 md:space-y-4",children:[a.jsxs("div",{className:"text-center relative",children:[a.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[a.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 border-2 md:border-3 flex items-center justify-center transition-all duration-500 overflow-hidden ${i?"border-blue-500 shadow-xl md:shadow-2xl shadow-blue-500/40 scale-105 md:scale-110":"border-blue-500/30 scale-100"}`,children:a.jsx(_K,{size:64,className:"scale-75 md:scale-100 lg:scale-110"})}),i&&a.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[a.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full animate-ping"}),a.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full"})]}),t.isDefending&&a.jsx("div",{className:"absolute -bottom-1 -left-1 md:-bottom-2 md:-left-2",children:a.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-600/90 rounded-full flex items-center justify-center border-2 border-background",children:a.jsx(bt,{className:"h-3 w-3 md:h-4 md:w-4 text-white"})})})]}),a.jsxs("div",{className:"space-y-1 md:space-y-2",children:[a.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[a.jsx(Ti,{className:"h-3 w-3 md:h-5 md:w-5 text-yellow-500"}),a.jsx("span",{className:"truncate",children:t.name})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[a.jsxs(qe,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[a.jsx(Nt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",t.level]}),a.jsxs(qe,{variant:"outline",className:"bg-background/50 text-yellow-400 text-xs px-1 md:px-2",children:[t.gold.toLocaleString("pt-BR"),"G"]})]})]}),p.filter(W=>W.isPlayer).map(W=>a.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${W.isCritical?"text-red-400 text-2xl animate-damage-critical":"text-red-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",W.damage,W.isCritical&&a.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRÍTICO!"})]},W.id))]}),a.jsxs("div",{className:"space-y-2 md:space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ds,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),a.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),a.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.hp,"/",t.max_hp]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:s,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),a.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${s>=70?"bg-green-500":s>=40?"bg-yellow-500":s>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${s}%`}})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ct,{className:"h-3 w-3 md:h-4 md:w-4 text-blue-500"}),a.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),a.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.mana,"/",t.max_mana]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:r,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),a.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${r>=70?"bg-blue-500":r>=40?"bg-cyan-500":r>=20?"bg-indigo-500":"bg-purple-500"}`,style:{width:`${r}%`}})]})]})]}),a.jsxs("div",{className:`grid gap-1 md:gap-2 ${t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0?"grid-cols-4":"grid-cols-3"}`,children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(Tt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-xs text-red-300 mb-1",children:"ATK"}),a.jsx("div",{className:"text-xs font-bold text-red-400",children:a.jsx(jn,{value:t.atk||0,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,modifications:((A=($=t.active_effects)==null?void 0:$.attribute_modifications)==null?void 0:A.filter(W=>W.attribute==="atk"))||[],size:"sm",showTooltip:!0})})]}),t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0&&a.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(ct,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-purple-400"}),a.jsx("div",{className:"text-xs text-purple-300 mb-1",children:"MAG"}),a.jsx("div",{className:"text-xs font-bold text-purple-400",children:a.jsx(jn,{value:t.magic_attack,modifications:((U=(M=t.active_effects)==null?void 0:M.attribute_modifications)==null?void 0:U.filter(W=>W.attribute==="magic_attack"))||[],size:"sm",showTooltip:!0})})]}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(bt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),a.jsx("div",{className:"text-xs text-blue-300 mb-1",children:"DEF"}),a.jsx("div",{className:"text-xs font-bold text-blue-400",children:a.jsx(jn,{value:t.def||0,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,modifications:((V=(Y=t.active_effects)==null?void 0:Y.attribute_modifications)==null?void 0:V.filter(W=>W.attribute==="def"))||[],size:"sm",showTooltip:!0})})]}),a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(At,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),a.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"SPD"}),a.jsx("div",{className:"text-xs font-bold text-yellow-400",children:a.jsx(jn,{value:t.speed||0,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,modifications:((Q=(F=t.active_effects)==null?void 0:F.attribute_modifications)==null?void 0:Q.filter(W=>W.attribute==="speed"))||[],size:"sm",showTooltip:!0})})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[c?a.jsx(xc,{className:"h-3 w-3 mr-1"}):a.jsx(Ro,{className:"h-3 w-3 mr-1"}),c?"Menos":"Mais"," Detalhes"]}),c&&a.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"space-y-2",children:(()=>{const L=(ie=>ie<=1?0:Math.floor(100*Math.pow(1.5,ie-2)))(t.level),X=t.xp_next_level,ae=t.xp-L,ee=X-L,le=Math.max(0,Math.min(100,ae/ee*100));return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nt,{className:"h-3 w-3 text-yellow-500"}),a.jsx("span",{className:"font-medium text-xs text-muted-foreground",children:"Experiência"})]}),a.jsxs("div",{className:"text-xs font-bold",children:[a.jsx("span",{className:"text-yellow-400",children:Lr(ae)}),a.jsx("span",{className:"text-muted-foreground mx-1",children:"/"}),a.jsx("span",{className:"text-muted-foreground",children:Lr(ee)})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:le,className:"h-2",style:{background:"rgba(0,0,0,0.2)"}}),a.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${le}%`}})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 via-yellow-500/5 to-yellow-500/10 rounded-full pointer-events-none"})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground",children:["Nível ",t.level]}),a.jsxs("span",{className:"text-yellow-400 font-medium",children:[Lr(ee-ae)," para nv"," ",t.level+1]})]})]})})()}),(t.strength||t.dexterity||t.intelligence||t.wisdom||t.vitality||t.luck)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primários:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[t.strength&&a.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[a.jsx(Br,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-muted-foreground",children:"FOR"}),a.jsx("div",{className:"font-medium",children:t.strength})]}),t.dexterity&&a.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[a.jsx(At,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),a.jsx("div",{className:"text-muted-foreground",children:"DES"}),a.jsx("div",{className:"font-medium",children:t.dexterity})]}),t.intelligence&&a.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[a.jsx(ct,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),a.jsx("div",{className:"text-muted-foreground",children:"INT"}),a.jsx("div",{className:"font-medium",children:t.intelligence})]}),t.wisdom&&a.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[a.jsx(No,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),a.jsx("div",{className:"text-muted-foreground",children:"SAB"}),a.jsx("div",{className:"font-medium",children:t.wisdom})]}),t.vitality&&a.jsxs("div",{className:"bg-pink-500/10 rounded p-1 text-center",children:[a.jsx(ds,{className:"h-3 w-3 mx-auto mb-1 text-pink-400"}),a.jsx("div",{className:"text-muted-foreground",children:"VIT"}),a.jsx("div",{className:"font-medium",children:t.vitality})]}),t.luck&&a.jsxs("div",{className:"bg-yellow-500/10 rounded p-1 text-center",children:[a.jsx(Nt,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),a.jsx("div",{className:"text-muted-foreground",children:"SOR"}),a.jsx("div",{className:"font-medium",children:t.luck})]})]})]}),(t.critical_chance||t.critical_damage)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avançado:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.critical_chance&&a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[a.jsx(oS,{className:"h-3 w-3"}),a.jsx("span",{children:"Crítico"})]}),a.jsx("div",{className:"font-medium text-yellow-400",children:a.jsx(jn,{value:t.critical_chance,modifications:((k=(G=t.active_effects)==null?void 0:G.attribute_modifications)==null?void 0:k.filter(W=>W.attribute==="critical_chance"))||[],size:"sm",showTooltip:!0,label:"%"})})]}),t.critical_damage&&a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:"Dano Crit"})]}),a.jsx("div",{className:"font-medium text-orange-400",children:a.jsx(jn,{value:t.critical_damage,modifications:((z=(B=t.active_effects)==null?void 0:B.attribute_modifications)==null?void 0:z.filter(W=>W.attribute==="critical_damage"))||[],size:"sm",showTooltip:!0,label:"%"})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Habilidades:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(t.sword_mastery||0)>1&&a.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[a.jsx(Tt,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-muted-foreground",children:"Espada"}),a.jsxs("div",{className:"font-medium",children:["Lv ",t.sword_mastery]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.sword_mastery_xp||0," XP"]})]}),(t.axe_mastery||0)>1&&a.jsxs("div",{className:"bg-orange-500/10 rounded p-1 text-center",children:[a.jsx(er,{className:"h-3 w-3 mx-auto mb-1 text-orange-400"}),a.jsx("div",{className:"text-muted-foreground",children:"Machado"}),a.jsxs("div",{className:"font-medium",children:["Lv ",t.axe_mastery]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.axe_mastery_xp||0," XP"]})]}),(t.blunt_mastery||0)>1&&a.jsxs("div",{className:"bg-brown-500/10 rounded p-1 text-center",children:[a.jsx(xv,{className:"h-3 w-3 mx-auto mb-1 text-brown-400"}),a.jsx("div",{className:"text-muted-foreground",children:"Concussão"}),a.jsxs("div",{className:"font-medium",children:["Lv ",t.blunt_mastery]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.blunt_mastery_xp||0," XP"]})]}),(t.defense_mastery||0)>1&&a.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[a.jsx(bt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),a.jsx("div",{className:"text-muted-foreground",children:"Defesa"}),a.jsxs("div",{className:"font-medium",children:["Lv ",t.defense_mastery]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.defense_mastery_xp||0," XP"]})]}),(t.magic_mastery||0)>1&&a.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[a.jsx(ct,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),a.jsx("div",{className:"text-muted-foreground",children:"Magia"}),a.jsxs("div",{className:"font-medium",children:["Lv ",t.magic_mastery]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.magic_mastery_xp||0," XP"]})]})]})]}),!!(t.attribute_points&&t.attribute_points>0)&&a.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openAttributeModal"))},className:"w-full bg-yellow-500/10 border border-yellow-500/20 rounded p-2 hover:bg-yellow-500/20 hover:border-yellow-500/40 transition-all duration-200 cursor-pointer relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/5 via-yellow-500/10 to-yellow-500/5 animate-pulse"}),a.jsxs("div",{className:"relative flex items-center gap-2 text-yellow-400",children:[a.jsx(Nt,{className:"h-4 w-4 animate-pulse"}),a.jsxs("span",{className:"text-sm font-medium",children:[t.attribute_points," pontos de atributo disponíveis"]})]})]}),!!t.isDefending&&a.jsxs("div",{className:"flex items-center gap-2 text-blue-400 bg-blue-500/10 rounded p-2",children:[a.jsx(bt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Postura Defensiva Ativa"})]}),t.defenseCooldown>0&&a.jsxs("div",{className:"flex items-center gap-2 text-orange-400 bg-orange-500/10 rounded p-2",children:[a.jsx(xv,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-sm",children:["Defesa em Cooldown: ",t.defenseCooldown," turnos"]})]})]})]})]}),a.jsxs("div",{className:"space-y-2 md:space-y-4",children:[a.jsxs("div",{className:"text-center relative",children:[a.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[a.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-red-500/20 to-orange-500/20 border-2 md:border-3 flex items-center justify-center text-2xl md:text-4xl lg:text-5xl transition-all duration-500 ${i?"border-red-500/30 scale-100":"border-red-500 shadow-xl md:shadow-2xl shadow-red-500/40 scale-105 md:scale-110"}`,children:e.image||"👾"}),!i&&a.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[a.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full animate-ping"}),a.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-1 md:space-y-2",children:[a.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[a.jsx(Qs,{className:"h-3 w-3 md:h-5 md:w-5 text-red-500"}),a.jsx("span",{className:"truncate",children:e.name})]}),a.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[a.jsxs(qe,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[a.jsx(No,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",e.level]}),e.tier&&e.tier>1&&a.jsxs(qe,{variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30 text-xs px-1 md:px-2",children:[a.jsx(Nt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Tier ",e.tier]}),e.is_boss&&a.jsxs(qe,{className:"bg-red-500/20 text-red-400 border-red-500/30 text-xs px-1 md:px-2",children:[a.jsx(Ti,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"BOSS"]}),a.jsx(qe,{className:`text-xs border px-1 md:px-2 ${P(e.behavior)}`,children:S(e.behavior)})]})]}),p.filter(W=>!W.isPlayer).map(W=>a.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${W.isCritical?"text-orange-400 text-2xl animate-damage-critical":"text-orange-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",W.damage,W.isCritical&&a.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRÍTICO!"})]},W.id))]}),a.jsxs("div",{className:"space-y-2 md:space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ds,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),a.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),a.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[e.hp,"/",e.maxHp]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(qa,{value:n,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),a.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${n>=70?"bg-green-500":n>=40?"bg-yellow-500":n>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${n}%`}})]})]}),e.mana>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ct,{className:"h-3 w-3 md:h-4 md:w-4 text-purple-500"}),a.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),a.jsx("span",{className:"text-xs md:text-sm font-bold",children:e.mana})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-2 md:h-3 bg-black/20 rounded-full"}),a.jsx("div",{className:"absolute top-0 left-0 h-2 md:h-3 bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.mana/Math.max(e.mana,100)*100)}%`}})]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:[a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(Tt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-xs font-bold text-red-400",children:e.attack})]}),a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(bt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),a.jsx("div",{className:"text-xs font-bold text-blue-400",children:e.defense})]}),a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[a.jsx(At,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),a.jsx("div",{className:"text-xs font-bold text-yellow-400",children:e.speed})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>h(!f),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[f?a.jsx(xc,{className:"h-3 w-3 mr-1"}):a.jsx(Ro,{className:"h-3 w-3 mr-1"}),f?"Menos":"Mais"," Detalhes"]}),f&&a.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsx("div",{className:"text-muted-foreground",children:"Recompensa XP"}),a.jsx("div",{className:"font-medium text-blue-400",children:e.reward_xp})]}),a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsx("div",{className:"text-muted-foreground",children:"Recompensa Gold"}),a.jsx("div",{className:"font-medium text-yellow-400",children:e.reward_gold})]})]}),!!(e.strength||e.dexterity||e.intelligence)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primários:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[!!e.strength&&a.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[a.jsx(Br,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),a.jsx("div",{className:"text-muted-foreground",children:"FOR"}),a.jsx("div",{className:"font-medium",children:e.strength})]}),!!e.dexterity&&a.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[a.jsx(At,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),a.jsx("div",{className:"text-muted-foreground",children:"DES"}),a.jsx("div",{className:"font-medium",children:e.dexterity})]}),!!e.intelligence&&a.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[a.jsx(ct,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),a.jsx("div",{className:"text-muted-foreground",children:"INT"}),a.jsx("div",{className:"font-medium",children:e.intelligence})]})]})]}),!!(e.critical_chance||e.critical_damage)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avançado:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[!!e.critical_chance&&a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[a.jsx(oS,{className:"h-3 w-3"}),a.jsx("span",{children:"Crítico"})]}),a.jsxs("div",{className:"font-medium text-yellow-400",children:[(e.critical_chance||0).toFixed(1),"%"]})]}),!!e.critical_damage&&a.jsxs("div",{className:"bg-background/20 rounded p-2",children:[a.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[a.jsx(er,{className:"h-3 w-3"}),a.jsx("span",{children:"Dano Crit"})]}),a.jsxs("div",{className:"font-medium text-orange-400",children:[(e.critical_damage||0).toFixed(0),"%"]})]})]})]}),!!(e.physical_resistance||e.magical_resistance||e.debuff_resistance)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Resistências:"}),a.jsxs("div",{className:"space-y-1",children:[!!(e.physical_resistance&&e.physical_resistance>0)&&a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(bt,{className:"h-3 w-3 text-red-400"}),a.jsx("span",{children:"Física"})]}),a.jsxs("span",{className:"text-red-400",children:[((e.physical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.magical_resistance&&e.magical_resistance>0)&&a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ct,{className:"h-3 w-3 text-blue-400"}),a.jsx("span",{children:"Mágica"})]}),a.jsxs("span",{className:"text-blue-400",children:[((e.magical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.debuff_resistance&&e.debuff_resistance>0)&&a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nv,{className:"h-3 w-3 text-green-400"}),a.jsx("span",{children:"Debuffs"})]}),a.jsxs("span",{className:"text-green-400",children:[((e.debuff_resistance||0)*100).toFixed(0),"%"]})]})]})]}),!!(e.physical_vulnerability&&e.physical_vulnerability>1||e.magical_vulnerability&&e.magical_vulnerability>1)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Vulnerabilidades:"}),a.jsxs("div",{className:"space-y-1",children:[!!(e.physical_vulnerability&&e.physical_vulnerability>1)&&a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sv,{className:"h-3 w-3 text-red-400"}),a.jsx("span",{children:"Física"})]}),a.jsxs("span",{className:"text-red-400",children:["+",(((e.physical_vulnerability||1)-1)*100).toFixed(0),"%"]})]}),!!(e.magical_vulnerability&&e.magical_vulnerability>1)&&a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sv,{className:"h-3 w-3 text-blue-400"}),a.jsx("span",{children:"Mágica"})]}),a.jsxs("span",{className:"text-blue-400",children:["+",(((e.magical_vulnerability||1)-1)*100).toFixed(0),"%"]})]})]})]}),!!(e.primary_trait||e.secondary_trait)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Características:"}),a.jsxs("div",{className:"space-y-1",children:[!!e.primary_trait&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[D(e.primary_trait),a.jsx("span",{className:"text-purple-400",children:R(e.primary_trait)})]}),!!e.secondary_trait&&a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[D(e.secondary_trait),a.jsx("span",{className:"text-blue-400",children:R(e.secondary_trait)})]})]})]})]})]})]})]})]})})]})}const NK=t=>{const e=t.name.toLowerCase(),s=t.description.toLowerCase();return e.includes("bola de fogo")||e.includes("fireball")||s.includes("fogo")?a.jsx(Qm,{className:"h-4 w-4"}):e.includes("raio de gelo")||e.includes("ice")||s.includes("gelo")?a.jsx(LE,{className:"h-4 w-4"}):e.includes("cura")||e.includes("heal")||s.includes("restaura")?a.jsx(ds,{className:"h-4 w-4"}):e.includes("raio")||e.includes("bolt")||s.includes("raio")?a.jsx(At,{className:"h-4 w-4"}):e.includes("escudo")||e.includes("shield")||s.includes("defesa")?a.jsx(Nv,{className:"h-4 w-4"}):e.includes("dano")||s.includes("damage")||s.includes("dano")?a.jsx(er,{className:"h-4 w-4"}):s.includes("overtime")||s.includes("tempo")?a.jsx(xv,{className:"h-4 w-4"}):a.jsx(ct,{className:"h-4 w-4"})};function SK({handleAction:t,isPlayerTurn:e,loading:s,player:r,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i,currentEnemy:c,battleRewards:u}){const{performAction:f}=y.useContext(c6),[h,p]=y.useState([]),[g,x]=y.useState(!0),[b,_]=y.useState(null),[j,N]=y.useState(null),[C,E]=y.useState(null),[S,P]=y.useState(null),[R,D]=y.useState(!1),$=y.useRef(!1),A=y.useRef(0),M=300,U=y.useRef(null),Y=y.useCallback(async()=>{if(!(R||!u)){console.log("[CombinedBattleInterface] === BOTÃO FALLBACK ACIONADO ==="),console.log("[CombinedBattleInterface] Avançando para próximo andar via fallback..."),D(!0);try{f("continue"),me.success("Avançando para o próximo andar!",{description:"Preparando nova batalha...",duration:2e3})}catch(ve){console.error("[CombinedBattleInterface] Erro ao avançar:",ve),me.error("Erro ao avançar para o próximo andar"),D(!1)}}},[R,u,f]),V=!e||s.performAction,F=r.potionUsedThisTurn||!1,Q=r.hp<=0;y.useEffect(()=>{console.log("[CombinedBattleInterface] === ESTADO DETALHADO DO TURNO ==="),console.log(`[CombinedBattleInterface] isPlayerTurn: ${e}`),console.log(`[CombinedBattleInterface] loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] isDisabled: ${V}`),console.log("[CombinedBattleInterface] currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isAlive:c.hp>0}:"null"),console.log("[CombinedBattleInterface] battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp}:"null"),console.log("[CombinedBattleInterface] === FIM DO LOG DETALHADO ==="),c&&c.hp>0&&!e&&!s.performAction&&!u&&(console.warn("[CombinedBattleInterface] ⚠️  POSSÍVEL PROBLEMA: Turno travado no inimigo"),console.warn(`[CombinedBattleInterface] - Inimigo vivo: ${c.name} (${c.hp}/${c.maxHp})`),console.warn("[CombinedBattleInterface] - Não é turno do jogador"),console.warn("[CombinedBattleInterface] - Não está carregando"),console.warn("[CombinedBattleInterface] - Sem recompensas de batalha"))},[e,s.performAction,V,c==null?void 0:c.name,c==null?void 0:c.hp,u]);const G=!!(u&&!s.performAction&&!Q&&!R&&(!c||c.hp<=0)),k=s.performAction||Q;y.useEffect(()=>{var ve;console.log("[CombinedBattleInterface] === CONDIÇÕES DO BOTÃO FALLBACK ==="),console.log(`[CombinedBattleInterface] shouldShowNextFloorButton: ${G}`),console.log("[CombinedBattleInterface] - battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp,dropsCount:((ve=u.drops)==null?void 0:ve.length)||0}:"null/undefined"),console.log(`[CombinedBattleInterface] - loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] - isPlayerDead: ${Q}`),console.log(`[CombinedBattleInterface] - continuingAdventure: ${R}`),console.log("[CombinedBattleInterface] - currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isDead:c.hp<=0}:"null/undefined"),console.log("[CombinedBattleInterface] === FIM DAS CONDIÇÕES ===")},[G,u,s.performAction,Q,R,c==null?void 0:c.hp]);const B=async()=>{try{const ve=await So.getCharacterPotionSlots(r.id);ve.success&&ve.data&&p(ve.data)}catch(ve){console.error("Erro ao carregar slots de poção:",ve)}finally{x(!1)}};y.useEffect(()=>{r.id&&B()},[r.id]),y.useEffect(()=>{r.id&&r.consumables&&(console.log("[CombinedBattleInterface] Consumáveis mudaram, recarregando slots"),B())},[r.consumables]);const z=async ve=>{var st;if(Q||V||b!==null)return;const Re=h.find(Ae=>Ae.slot_position===ve);if(!(Re!=null&&Re.consumable_id)){me.warning(`Slot ${W(ve)} está vazio`);return}if(F){me.error("Você já usou uma poção neste turno!",{description:"Você só pode usar uma poção por turno",duration:3e3});return}const ke=(st=r.consumables)==null?void 0:st.find(Ae=>Ae.consumable_id===Re.consumable_id);if(!ke||ke.quantity<=0){me.error("Poção não disponível!",{description:"Você não possui esta poção no inventário",duration:3e3});return}_(ve);try{console.log(`[CombinedBattleInterface] Usando poção do slot ${ve}`);const Ae=await So.consumePotionFromSlot(r.id,ve);if(Ae.success&&Ae.data){const{message:I,new_hp:q,new_mana:K}=Ae.data;if(console.log(`[CombinedBattleInterface] Poção usada com sucesso: HP ${q}, Mana ${K}`),n(q,K),r.potionUsedThisTurn=!0,r.consumables&&ke){const ge=r.consumables.map(_e=>_e.consumable_id===Re.consumable_id?{..._e,quantity:Math.max(0,_e.quantity-1)}:_e).filter(_e=>_e.quantity>0);console.log("[CombinedBattleInterface] Atualizando consumáveis via contexto:",ge.length),i(ge)}P(ve),setTimeout(()=>P(null),2e3),await B(),me.success(I,{description:`HP: ${q} | Mana: ${K}`,duration:4e3})}else console.error("[CombinedBattleInterface] Erro ao usar poção:",Ae.error),me.error(Ae.error||"Erro ao usar poção")}catch(Ae){console.error("Erro ao usar poção:",Ae),me.error("Erro ao usar poção")}finally{_(null)}};y.useEffect(()=>{const ve=Re=>{if(Q||b!==null)return;const ke=Re.target;if(ke.tagName==="INPUT"||ke.tagName==="TEXTAREA"||ke.contentEditable==="true")return;const st=Re.key.toLowerCase();switch(st){case"a":if(V)return;Re.preventDefault(),t("attack");return;case"s":if(V||r.defenseCooldown>0)return;Re.preventDefault(),t("defend");return;case"d":if(k)return;Re.preventDefault(),le("flee");return}if(V)return;let Ae=0;switch(st){case"q":Ae=1;break;case"w":Ae=2;break;case"e":Ae=3;break;default:{const I=parseInt(st)-1;if(I>=0&&I<Math.min(3,r.spells.length)){const q=r.spells[I];r.mana>=q.mana_cost&&q.current_cooldown===0&&(Re.preventDefault(),t("spell",q.id))}return}}Ae>0&&(Re.preventDefault(),z(Ae))};return window.addEventListener("keydown",ve),()=>window.removeEventListener("keydown",ve)},[V,k,b,h,r.spells,r.mana,r.defenseCooldown,F,Q]);const W=ve=>{switch(ve){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},L=ve=>{var Re;return ve.consumable_id?(Re=ve.consumable_description)!=null&&Re.toLowerCase().includes("mana")?a.jsx(bv,{className:"h-5 w-5 text-blue-500"}):a.jsx(VI,{className:"h-5 w-5 text-red-500"}):null},X=(ve,Re)=>{N({...ve,position:Re})},ae=()=>{U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{N(null)},150)},ee=y.useCallback(()=>{const Re=Date.now()-A.current;return $.current?(console.warn("[CombinedBattleInterface] Ação bloqueada - já processando"),!1):Re<M?(console.warn(`[CombinedBattleInterface] Ação bloqueada - cooldown (${Re}ms < ${M}ms)`),!1):!0},[]),le=y.useCallback(async(ve,Re,ke)=>{var st;if(ee()){(st=ke==null?void 0:ke.preventDefault)==null||st.call(ke),$.current=!0,A.current=Date.now();try{await t(ve,Re)}finally{setTimeout(()=>{$.current=!1},M)}}},[ee,t]),ie=ve=>{ve.preventDefault(),le("attack",void 0,ve)},se=ve=>{ve.preventDefault(),le("defend",void 0,ve)},ue=ve=>{ve.preventDefault(),le("flee")},ce=(ve,Re)=>{ve.preventDefault(),le("spell",Re,ve)},be=(ve,Re)=>{const ke=Re.currentTarget.getBoundingClientRect(),st={x:ke.left+ke.width/2,y:ke.top-10},Ae=setTimeout(()=>{X(ve,st)},500);E(Ae)},Ne=()=>{C&&(clearTimeout(C),E(null))},we=()=>{C&&(clearTimeout(C),E(null)),ae()},Ce=(ve,Re)=>{Re.preventDefault();const ke=Re.currentTarget.getBoundingClientRect(),st={x:ke.left+ke.width/2,y:ke.top-10},Ae=setTimeout(()=>{X(ve,st)},500);E(Ae)},Oe=()=>{C&&(clearTimeout(C),E(null))},Qe=r.spells.slice(0,3);return a.jsxs(a.Fragment,{children:[Q&&a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center rounded-xl",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx("div",{className:"text-red-400 text-2xl animate-pulse",children:"💀"}),a.jsx("div",{className:"text-red-400 font-bold text-lg",children:"Personagem Morto"}),a.jsx("div",{className:"text-muted-foreground text-sm",children:"Interface bloqueada"})]})}),a.jsx(De,{className:"border-0 bg-card/50 backdrop-blur-sm relative",children:a.jsxs(He,{className:"p-3 md:p-3 space-y-3 md:space-y-2",children:[G&&!Q&&a.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-teal-500/10 border border-green-500/20 rounded-xl animate-in slide-in-from-top-2 duration-500",children:a.jsxs("div",{className:"text-center space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"text-lg",children:"⚔️"}),a.jsx("div",{className:"text-sm text-green-400 font-medium",children:"Inimigo derrotado - Pronto para avançar"}),a.jsx("div",{className:"text-lg",children:"⚔️"})]}),a.jsxs("div",{className:"bg-background/30 rounded-lg p-3 border border-green-500/10",children:[a.jsx("div",{className:"text-xs text-green-300 font-medium mb-1",children:"Recompensas Obtidas:"}),a.jsxs("div",{className:"flex justify-center items-center gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nt,{className:"h-4 w-4 text-blue-400"}),a.jsxs("span",{className:"text-blue-400 font-semibold",children:["+",u==null?void 0:u.xp," XP"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-yellow-400 text-lg",children:"💰"}),a.jsxs("span",{className:"text-yellow-400 font-semibold",children:["+",u==null?void 0:u.gold," Gold"]})]}),(u==null?void 0:u.drops)&&u.drops.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-purple-400 text-lg",children:"📦"}),a.jsxs("span",{className:"text-purple-400 font-semibold",children:["+",u.drops.length," item",u.drops.length>1?"s":""]})]})]}),(u==null?void 0:u.leveledUp)&&a.jsx("div",{className:"mt-2 text-center",children:a.jsxs(qe,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse",children:["🎊 LEVEL UP! Nível ",u.newLevel]})})]}),a.jsx(de,{onClick:Y,disabled:s.performAction||Q||R,size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg shadow-green-500/20 transition-all duration-200 transform hover:scale-105 w-full md:w-auto cursor-pointer",children:s.performAction||R?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Avançando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(kE,{className:"h-4 w-4 mr-2"}),"Continuar Aventura"]})}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Continue para o próximo andar da torre"})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-center md:items-start gap-3 md:gap-4",children:[a.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-left",children:"Ações de Combate"}),a.jsxs("div",{className:"flex justify-center md:justify-start gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(de,{onClick:ie,disabled:V||G||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-red-500/30 bg-red-500/5 hover:bg-red-500/10 hover:border-red-500/50 shadow-lg shadow-red-500/10 transition-all duration-200 cursor-pointer ${Q?"opacity-30 cursor-not-allowed":""}`,children:a.jsx(Tt,{className:"h-4 w-4 md:h-5 md:w-5 text-red-500/80"})}),a.jsx(qe,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"A"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(de,{onClick:se,disabled:V||r.defenseCooldown>0||G||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-blue-500/30 bg-blue-500/5 hover:bg-blue-500/10 hover:border-blue-500/50 shadow-lg shadow-blue-500/10 transition-all duration-200 cursor-pointer ${Q?"opacity-30 cursor-not-allowed":""}`,children:a.jsx(bt,{className:"h-4 w-4 md:h-5 md:w-5 text-blue-500/80"})}),a.jsx(qe,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",style:{display:r.defenseCooldown>0?"none":"flex"},children:"S"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(de,{onClick:ue,disabled:k,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-amber-500/30 bg-amber-500/5 hover:bg-amber-500/10 hover:border-amber-500/50 shadow-lg shadow-amber-500/10 transition-all duration-200 cursor-pointer ${Q?"opacity-30 cursor-not-allowed":s.performAction?"opacity-50 animate-pulse":""}`,children:a.jsx(hs,{className:"h-4 w-4 md:h-5 md:w-5 text-amber-500/80"})}),a.jsx(qe,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"D"})]})]})]}),a.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[a.jsxs("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-right",children:["Poções Rápidas",F&&a.jsx("span",{className:"ml-2 text-orange-400 text-xs",children:"• Poção usada neste turno"})]}),a.jsx("div",{className:"flex justify-center md:justify-end gap-2",children:g?[1,2,3].map(ve=>a.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-muted/20 rounded-xl animate-pulse"},ve)):h.map(ve=>{var Me;const Re=b===ve.slot_position,ke=!ve.consumable_id,st=W(ve.slot_position),Ae=F&&!ke,I=S===ve.slot_position,q=(Me=r.consumables)==null?void 0:Me.find(Ye=>Ye.consumable_id===ve.consumable_id),K=(q==null?void 0:q.quantity)||0,ge=S===ve.slot_position&&K>0?Math.max(0,K-1):K,_e={title:ve.consumable_name||`Slot ${st}`,description:ke?"Slot vazio - Configure no inventário":ge===0?"Sem unidades disponíveis":F?"Poção já usada neste turno":ve.consumable_description||"Poção",stats:ke?[]:[{label:"Efeito",value:`+${ve.effect_value}`},{label:"Disponível",value:`x${ge}`},{label:"Tecla",value:st},...F?[{label:"Status",value:"Indisponível neste turno"}]:[]]},ye=!ke&&ge===0;return a.jsxs("div",{className:"relative",children:[a.jsxs(de,{onClick:()=>z(ve.slot_position),disabled:V||ke||Re||G||Ae||ye||Q,variant:"ghost",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-2 relative border-2 transition-all duration-200 cursor-pointer ${ke?"border-dashed border-muted-foreground/20 bg-transparent hover:bg-muted/10 hover:border-muted-foreground/30":ye?"border-red-500/30 bg-red-500/5 opacity-50 cursor-not-allowed":Ae?"border-orange-500/30 bg-orange-500/5 opacity-50 cursor-not-allowed":"border-emerald-500/30 bg-emerald-500/5 hover:bg-emerald-500/10 hover:border-emerald-500/50 shadow-lg shadow-emerald-500/10"} ${Re?"opacity-50":""} ${I?"animate-pulse scale-110":""} ${Q?"opacity-30 cursor-not-allowed":""}`,onMouseDown:Ye=>be(_e,Ye),onMouseUp:Ne,onMouseLeave:we,onTouchStart:Ye=>Ce(_e,Ye),onTouchEnd:Oe,children:[ke?a.jsx(Bo,{className:"h-4 w-4 md:h-5 md:w-5 text-muted-foreground/40"}):a.jsxs("div",{className:"flex items-center justify-center",children:[L(ve),(Ae||ye)&&a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"w-6 h-0.5 bg-red-500 rotate-45 absolute"}),a.jsx("div",{className:"w-6 h-0.5 bg-red-500 -rotate-45 absolute"})]})]}),Re&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-xl",children:a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-2 border-primary border-t-transparent"})}),I&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"text-green-400 font-bold text-xs animate-bounce",children:"✓"})})]}),!ke&&a.jsx("div",{className:`absolute -bottom-1 -left-1 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center border border-background font-semibold ${ye?"bg-red-500/90":ge<5?"bg-orange-500/90":"bg-emerald-500/90"}`,children:ge}),a.jsx(qe,{variant:"outline",className:`absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center border-muted-foreground/30 ${Ae?"bg-orange-500/20 text-orange-400 border-orange-500/30":ye?"bg-red-500/20 text-red-400 border-red-500/30":"bg-background/90"}`,children:st}),Ae&&a.jsx("div",{className:"absolute top-0 left-0 bg-orange-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:"✗"}),ye&&a.jsx("div",{className:"absolute top-0 left-0 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:"⚠"})]},ve.slot_position)})})]})]}),Qe.length>0&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"border-t border-border/50 pt-2",children:[a.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center",children:"Magias"}),a.jsx("div",{className:"flex justify-center gap-2 md:max-w-md md:mx-auto",children:Qe.map((ve,Re)=>{const ke=r.mana>=ve.mana_cost&&ve.current_cooldown===0,st=NK(ve),Ae=(Re+1).toString(),I={title:ve.name,description:ve.description,stats:[{label:"Custo de Mana",value:`${ve.mana_cost}`},{label:"Cooldown",value:ve.current_cooldown>0?`${ve.current_cooldown} turnos`:"Disponível"},{label:"Dano/Efeito",value:`${ve.effect_value}`},{label:"Tecla",value:Ae}]};return a.jsxs("div",{className:"relative",children:[a.jsxs(de,{onClick:q=>ce(q,ve.id),onMouseDown:q=>be(I,q),onMouseUp:Ne,onMouseLeave:we,onTouchStart:q=>Ce(I,q),onTouchEnd:Oe,disabled:V||!ke||G||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 relative border-2 transition-all duration-200 cursor-pointer ${ke?"border-violet-500/30 bg-violet-500/5 hover:bg-violet-500/10 hover:border-violet-500/50 shadow-lg shadow-violet-500/10":"border-muted-foreground/10 bg-muted/5 opacity-50 cursor-not-allowed"} ${Q?"opacity-30 cursor-not-allowed":""}`,children:[a.jsx("div",{className:ke?"text-violet-500/80":"text-muted-foreground/50",children:st}),ve.current_cooldown>0&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500/90 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:ve.current_cooldown}),a.jsx("div",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background ${ke?"bg-blue-500/90":"bg-muted-foreground/70"}`,children:ve.mana_cost})]}),a.jsx(qe,{variant:"outline",className:"absolute -top-1 -left-1 md:-top-2 md:-left-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:Ae})]},ve.id)})})]})}),a.jsx("div",{className:"hidden md:block text-center",children:a.jsx("div",{className:"text-xs text-muted-foreground/60",children:Q?"Interface bloqueada - Personagem morto":"Atalhos: A/S/D (Combate) • Q/W/E (Poções) • 1/2/3 (Magias)"})})]})}),j&&a.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:j.position.x,top:j.position.y,transform:"translate(-50%, -100%)"},children:a.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border border-border/50 rounded-lg p-3 shadow-xl max-w-xs",children:[a.jsx("h4",{className:"font-medium text-sm mb-1",children:j.title}),a.jsx("p",{className:"text-xs text-muted-foreground mb-2 leading-relaxed",children:j.description}),j.stats.length>0&&a.jsx("div",{className:"space-y-1",children:j.stats.map((ve,Re)=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsxs("span",{className:"text-muted-foreground",children:[ve.label,":"]}),a.jsx("span",{className:"font-medium",children:ve.value})]},Re))})]})})]})}function CK({isOpen:t,onContinue:e,onReturnToHub:s,onOpenAttributeModal:r,rewards:n,leveledUp:i,newLevel:c,hasAttributePoints:u}){const f=Kb();y.useEffect(()=>{if(f){const x=document.createElement("style");return x.textContent=`
        .victory-modal-landscape .scroll-area {
          max-height: calc(90vh - 140px);
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }
        .victory-modal-buttons {
          min-height: 24px !important;
          padding: 0.15rem 0.3rem !important;
          font-size: 0.65rem !important;
          font-weight: 600 !important;
          line-height: 1 !important;
        }
        .victory-modal-landscape [data-radix-dialog-content] {
          max-height: 90vh !important;
        }
      `,document.head.appendChild(x),()=>{document.head.removeChild(x)}}},[f]);const h=()=>{console.log("[VictoryModal] Botão Continuar clicado - chamando onContinue"),e()},p=()=>{console.log("[VictoryModal] Botão Voltar ao Hub clicado - chamando onReturnToHub"),s()},g=()=>{console.log("[VictoryModal] Botão Distribuir Pontos clicado - chamando onOpenAttributeModal"),r()};return a.jsx(tT,{children:t&&a.jsx(Rn,{open:t,children:a.jsxs(Qa,{className:`overflow-hidden ${f?"max-w-[98vw] max-h-[98vh] p-2 victory-modal-landscape w-[98vw]":"sm:max-w-[425px]"}`,children:[a.jsxs(Mn,{className:`relative ${f?"pb-2":""}`,children:[!f&&a.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"absolute -top-12 left-1/2 -translate-x-1/2 w-24 h-24 bg-yellow-500/20 rounded-full flex items-center justify-center",children:a.jsx(Sa,{className:"h-12 w-12 text-yellow-500"})}),a.jsxs(Rs.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center pt-12"}`,children:[f&&a.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(Sa,{className:"h-5 w-5 text-yellow-500"})}),a.jsxs("div",{className:f?"text-left":"text-center",children:[a.jsx(Ja,{className:`font-bold ${f?"text-base":"text-2xl"}`,children:"Vitória!"}),a.jsx(wc,{className:`${f?"text-xs":""}`,children:"Você derrotou o inimigo e avançou para o próximo andar!"})]})]})]}),a.jsx("div",{className:f?"scroll-area overflow-y-auto max-h-[calc(98vh-100px)]":"",children:a.jsxs(Rs.div,{className:`${f?"py-1 space-y-1":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[a.jsxs("div",{className:`${f?"grid grid-cols-2 gap-1 mb-1":"space-y-4"}`,children:[a.jsxs(Rs.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[a.jsx(Nt,{className:`text-yellow-500 ${f?"h-3 w-3":"h-6 w-6"}`}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Experiência"}),a.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",n.xp," XP"]})]})]}),a.jsxs(Rs.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[a.jsx(_r,{className:`text-yellow-400 ${f?"h-3 w-3":"h-6 w-6"}`}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Ouro"}),a.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",Lr(n.gold)," Gold"]})]})]})]}),i&&c&&a.jsxs(Rs.div,{className:`rounded-lg bg-gradient-to-r from-primary/20 to-primary/30 text-center ${f?"p-2 mt-2":"p-4 mt-2"}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,type:"spring"},children:[a.jsxs("div",{className:`flex items-center gap-2 ${f?"justify-start mb-1":"justify-center mb-2"}`,children:[a.jsx(ct,{className:`text-primary ${f?"h-4 w-4":"h-6 w-6"}`}),a.jsxs("div",{className:`font-bold ${f?"text-sm":"text-xl"}`,children:["Nível ",c,"!"]})]}),a.jsx("div",{className:`opacity-80 ${f?"text-xs mb-1":"text-sm mb-2"}`,children:"Seu personagem evoluiu e ficou mais forte!"}),a.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-sm"}`,children:[a.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"HP +10"}),a.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Mana +5"}),a.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Ataque +2"}),a.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Defesa +1"})]})]}),n.drops.length>0&&a.jsxs(Rs.div,{className:`bg-primary/10 rounded-lg ${f?"mt-2 p-2":"mt-4 p-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:[a.jsxs("h4",{className:`font-semibold flex items-center gap-2 ${f?"mb-1 text-xs":"mb-3"}`,children:[a.jsx(xm,{className:f?"h-3 w-3":"h-5 w-5"}),"Itens Obtidos"]}),a.jsx("div",{className:`${f?"grid grid-cols-2 gap-1":"space-y-2"}`,children:n.drops.map((x,b)=>a.jsxs(Rs.div,{className:`flex items-center gap-2 bg-background/50 rounded ${f?"p-1 text-xs":"p-2"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:1+b*.1},children:[a.jsx("span",{className:f?"text-xs":"text-xl",children:"🎁"}),a.jsx("span",{className:"flex-1 truncate",children:x.name}),a.jsxs("span",{className:"font-mono flex-shrink-0",children:["x",x.quantity]})]},b))})]})]})}),a.jsx(uR,{className:`flex flex-col gap-1 ${f?"mt-1":"mt-4"}`,children:a.jsxs("div",{className:`w-full ${f?"grid grid-cols-3 gap-1":"flex flex-col gap-2"}`,children:[u&&a.jsxs(de,{onClick:g,className:`bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white shadow-lg ${f?"victory-modal-buttons text-xs":"w-full"}`,children:[a.jsx(Br,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Pts":"Distribuir Pontos de Atributo"]}),a.jsxs(de,{onClick:p,variant:"outline",className:`items-center justify-center ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[a.jsx(eB,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"":"Voltar ao Hub"]}),a.jsxs(de,{onClick:h,className:`bg-emerald-500 hover:bg-emerald-600 ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[a.jsx(kE,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),"Continuar"]})]})})]})})})}function EK({isOpen:t,onClose:e,player:s,gameMessage:r=`${s.name} foi derrotado no Andar ${s.floor}...`,highestFloor:n=s.floor,isCharacterDeleted:i=!1,userId:c,onReturnToCharacterSelect:u,onViewCemetery:f}){const h=Ot(),[p,g]=y.useState(!1),[x,b]=y.useState(!1),_=Kb(),j=async()=>{if(!(!c||!s.id))try{g(!0),b(!0);const E=await sc.saveScore({player_name:s.name,floor:s.floor-1,user_id:c,character_level:s.level,character_gold:s.gold,character_alive:!1});if(E.error)throw new Error(E.error);if(!i){const{error:S}=await Ge.deleteCharacter(s.id);if(S)throw new Error(S)}me.success("Fim de jogo",{description:"Pontuação salva e personagem deletado permanentemente."}),u()}catch(E){me.error("Erro ao finalizar jogo",{description:E instanceof Error?E.message:"Erro desconhecido"}),console.error("Erro ao finalizar jogo:",E)}finally{g(!1),b(!1)}},N=()=>{f?f():h({to:"/game/play/hub/cemetery",search:{character:s.id}})},C=()=>{h({to:"/game/ranking"})};return a.jsx(Rn,{open:t,onOpenChange:e,children:a.jsxs(Qa,{className:`overflow-hidden ${_?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-md"}`,children:[a.jsx(Mn,{className:`text-center ${_?"pb-2":""}`,children:a.jsxs(Ja,{className:`flex items-center justify-center gap-2 ${_?"text-lg":"text-2xl"}`,children:[a.jsx(Qs,{className:`text-red-500 ${_?"h-5 w-5":"h-8 w-8"}`}),i?"Permadeath - Personagem Perdido":"Fim de Jogo"]})}),a.jsxs("div",{className:`${_?"space-y-2 max-h-[calc(95vh-140px)] overflow-y-auto":"space-y-4"}`,children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:`mb-2 ${_?"text-sm":"text-lg"}`,children:r}),a.jsxs("div",{className:`flex items-center justify-center gap-2 mb-2 ${_?"mb-2":"mb-4"}`,children:[a.jsx(Sa,{className:`text-yellow-500 ${_?"h-4 w-4":"h-6 w-6"}`}),a.jsxs("span",{className:`font-bold ${_?"text-lg":"text-2xl"}`,children:["Andar ",s.floor-1]})]}),a.jsxs("p",{className:`text-muted-foreground ${_?"text-xs":"text-sm"}`,children:["Seu recorde atual: Andar ",n]})]}),a.jsxs("div",{className:_?"grid grid-cols-2 gap-2":"space-y-3",children:[a.jsxs("div",{className:`bg-muted rounded-lg ${_?"p-2":"p-4"}`,children:[a.jsx("h3",{className:`font-medium mb-2 ${_?"text-sm":""}`,children:"Estatísticas Finais"}),a.jsxs("div",{className:`grid grid-cols-2 gap-1 ${_?"text-xs":"gap-2 text-sm"}`,children:[a.jsx("div",{children:"Personagem:"}),a.jsx("div",{className:"font-medium truncate",children:s.name}),a.jsx("div",{children:"Andares:"}),a.jsx("div",{className:"font-medium",children:s.floor-1}),a.jsx("div",{children:"HP final:"}),a.jsxs("div",{className:"font-medium",children:[s.hp,"/",s.max_hp]}),a.jsx("div",{children:"Nível:"}),a.jsx("div",{className:"font-medium",children:s.level}),a.jsx("div",{children:"Gold:"}),a.jsx("div",{className:"font-medium",children:Lr(s.gold)}),a.jsx("div",{children:"XP total:"}),a.jsx("div",{className:"font-medium",children:Lr(s.xp)})]})]}),a.jsxs("div",{className:`bg-red-500/10 border border-red-500/20 rounded-lg ${_?"p-2":"p-4"}`,children:[a.jsxs("div",{className:`flex items-center gap-2 mb-2 ${_?"mb-1":""}`,children:[a.jsx(IE,{className:`text-red-400 ${_?"h-3 w-3":"h-5 w-5"}`}),a.jsx("span",{className:`font-medium text-red-400 ${_?"text-xs":"text-sm"}`,children:"Aviso de Permadeath"})]}),a.jsx("p",{className:`text-red-400 mb-2 ${_?"text-xs mb-1":"text-sm"}`,children:i?"Este personagem foi permanentemente deletado.":"Este personagem será permanentemente deletado ao continuar."}),a.jsx("p",{className:"text-red-300 text-xs",children:"Suas estatísticas serão salvas no ranking para comparação."})]})]}),i&&a.jsx("div",{className:`bg-blue-500/10 border border-blue-500/20 rounded-lg ${_?"p-2":"p-3"}`,children:a.jsxs("div",{className:"text-blue-400 text-xs",children:["💀 ",a.jsx("strong",{children:"Estatísticas da Jornada:"}),a.jsx("br",{}),a.jsxs("div",{className:`mt-1 ${_?"grid grid-cols-2 gap-1":""}`,children:[a.jsxs("div",{children:["• Nível alcançado: ",s.level]}),a.jsxs("div",{children:["• Andar mais alto: ",s.floor]}),a.jsxs("div",{children:["• Gold acumulado: ",s.gold]}),a.jsxs("div",{children:["• XP total: ",s.xp]})]})]})})]}),a.jsxs("div",{className:`flex gap-2 ${_?"flex-row pt-2":"flex-col pt-4"}`,children:[i&&a.jsxs(de,{variant:"outline",onClick:N,className:`border-blue-500/30 text-blue-400 hover:bg-blue-500/10 ${_?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[a.jsx(No,{className:`mr-1 ${_?"h-3 w-3":"h-4 w-4 mr-2"}`}),_?"Cemitério":"Ver Cemitério"]}),a.jsx(de,{variant:"destructive",onClick:j,disabled:p||x,className:`${_?"flex-1 text-xs h-8":"w-full"}`,children:p||x?a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("div",{className:`animate-spin rounded-full border-t-2 border-b-2 border-white ${_?"h-3 w-3":"h-4 w-4"}`}),"Finalizando..."]}):a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Qs,{className:`${_?"h-3 w-3":"h-4 w-4"}`}),_?"Aceitar Derrota":i?"Criar Novo Personagem":"Aceitar Derrota e Salvar"]})}),a.jsxs(de,{variant:"outline",onClick:C,className:`${_?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[a.jsx(Sa,{className:`mr-1 ${_?"h-3 w-3":"h-4 w-4 mr-2"}`}),_?"Ranking":"Ver Ranking"]})]})]})})}function AK(){const{gameState:t,performAction:e,loading:s}=$c(),{currentSpecialEvent:r,player:n}=t;if(!r)return null;const i=()=>{e("interact_event")},c=gv.getEventIcon(r.type),u=gv.getEventColor(r.type),f=Math.ceil(n.max_hp*r.hp_restore_percent/100),h=Math.ceil(n.max_mana*r.mana_restore_percent/100),p=r.gold_reward_max>0?`${r.gold_reward_min}-${r.gold_reward_max}`:"0";return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"w-full max-w-4xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:`text-8xl mb-4 ${u}`,children:c}),a.jsx("h1",{className:"text-4xl font-bold mb-2",children:r.name}),a.jsxs("p",{className:"text-xl text-muted-foreground",children:["Andar ",n.floor]})]}),a.jsxs(De,{className:"overflow-hidden border-2 border-primary/20 shadow-xl",children:[a.jsx(ft,{className:"bg-primary/10 text-center",children:a.jsx(pt,{className:"text-2xl",children:"Evento Especial"})}),a.jsxs(He,{className:"p-8",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("p",{className:"text-lg leading-relaxed",children:r.description})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[r.hp_restore_percent>0&&a.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl text-green-500 mb-2",children:"❤️"}),a.jsx("div",{className:"font-semibold text-green-600",children:"Restauração de HP"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Até ",f," HP (",r.hp_restore_percent,"%)"]})]}),r.mana_restore_percent>0&&a.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl text-blue-500 mb-2",children:"💧"}),a.jsx("div",{className:"font-semibold text-blue-600",children:"Restauração de Mana"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Até ",h," Mana (",r.mana_restore_percent,"%)"]})]}),r.gold_reward_max>0&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl text-yellow-500 mb-2",children:"💰"}),a.jsx("div",{className:"font-semibold text-yellow-600",children:"Recompensa de Gold"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[p," Gold"]})]})]}),a.jsxs("div",{className:"bg-card border rounded-lg p-4 mb-8",children:[a.jsx("h3",{className:"font-semibold mb-3 text-center",children:"Status Atual"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-red-500",children:"❤️"}),a.jsx("div",{className:"text-sm font-medium",children:"HP"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.hp,"/",n.max_hp]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-blue-500",children:"💧"}),a.jsx("div",{className:"text-sm font-medium",children:"Mana"}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.mana,"/",n.max_mana]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-yellow-500",children:"💰"}),a.jsx("div",{className:"text-sm font-medium",children:"Gold"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:n.gold})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl text-purple-500",children:"🏢"}),a.jsx("div",{className:"text-sm font-medium",children:"Andar"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:n.floor})]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx(de,{onClick:i,disabled:s.performAction,size:"lg",className:"px-8 py-3 text-lg",children:s.performAction?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current mr-2"}),"Processando..."]}):a.jsxs(a.Fragment,{children:[c," Interagir"]})})})]})]}),t.gameMessage&&a.jsx("div",{className:"mt-6 text-center",children:a.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:a.jsx("p",{className:"text-lg",children:t.gameMessage})})})]})})}const kK=({isOpen:t,onClose:e,character:s,onAttributesUpdated:r})=>{const[n,i]=y.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0}),[c,u]=y.useState(!1),f=Kb(),h=Object.values(n).reduce((N,C)=>N+C,0),p=(s.attribute_points||0)-h,g=N=>{p>0&&i(C=>({...C,[N]:C[N]+1}))},x=N=>{n[N]>0&&i(C=>({...C,[N]:C[N]-1}))},b=()=>{i({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},_=async()=>{var N,C;if(h!==0){u(!0);try{const E=await Ge.distributeAttributePoints(s.id,n);if(E.success&&((N=E.data)!=null&&N.new_stats)){if(me.success("Pontos distribuídos com sucesso!"),r){const S={...s,...E.data.new_stats,attribute_points:E.data.new_stats.attribute_points};r(S)}b(),e()}else me.error("Erro ao distribuir pontos",{description:E.error||((C=E.data)==null?void 0:C.message)})}catch(E){console.error("Erro ao distribuir pontos:",E),me.error("Erro ao distribuir pontos")}finally{u(!1)}}},j={strength:{label:"Força",icon:Br,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",benefit:"+2 Ataque + 0.5% Dano Crítico"},dexterity:{label:"Destreza",icon:At,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",benefit:"+1.5 Velocidade + 0.3% Crítico"},intelligence:{label:"Inteligência",icon:ct,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",benefit:"+5 Mana + 10% Dano Mágico"},wisdom:{label:"Sabedoria",icon:No,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",benefit:"+1 Def + 5% Magia + 12% Cura"},vitality:{label:"Vitalidade",icon:ds,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",benefit:"+8 HP + 1 Defesa"},luck:{label:"Sorte",icon:Nt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",benefit:"+0.5% Crítico + 1% Dano Crítico"}};return!t||!s.attribute_points||s.attribute_points===0?null:a.jsx(Rn,{open:t,onOpenChange:e,children:a.jsxs(Qa,{className:`overflow-hidden ${f?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-2xl max-h-[90vh] overflow-y-auto"}`,children:[a.jsxs(Mn,{className:`${f?"pb-2":"text-center"}`,children:[!f&&a.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"mx-auto w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mb-4",children:a.jsx(Nt,{className:"h-8 w-8 text-yellow-500"})}),a.jsxs(Rs.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center"}`,children:[f&&a.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(Nt,{className:"h-5 w-5 text-yellow-500"})}),a.jsxs("div",{className:f?"text-left flex-1":"text-center",children:[a.jsx(Ja,{className:`font-bold ${f?"text-lg":"text-xl"}`,children:"Distribuir Pontos de Atributo"}),a.jsx(wc,{asChild:!0,children:a.jsxs("div",{className:`${f?"flex items-center justify-between mt-1":"text-center space-y-3"}`,children:[a.jsxs(qe,{variant:"outline",className:`bg-yellow-500/10 border-yellow-500/30 text-yellow-400 ${f?"px-2 py-1 text-xs":"px-3 py-1"}`,children:[a.jsx(Nt,{className:`mr-2 ${f?"h-3 w-3":"h-4 w-4"}`}),p," pontos"]}),!f&&a.jsx("p",{className:"text-sm text-muted-foreground",children:"Distribua seus pontos estrategicamente para fortalecer seu personagem na torre."})]})})]})]})]}),a.jsx("div",{className:`${f?"overflow-y-auto max-h-[calc(95vh-120px)]":""}`,children:a.jsxs(Rs.div,{className:`${f?"py-2":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[a.jsx("div",{className:`${f?"grid grid-cols-2 gap-2 mb-3":"space-y-3"}`,children:Object.entries(j).map(([N,C])=>{const E=N,S=s[E]||0,P=C.icon;return a.jsxs(Rs.div,{className:`flex items-center gap-2 rounded-lg border ${C.bgColor} ${C.borderColor} ${f?"p-2 text-xs":"gap-3 p-3"}`,whileHover:{scale:1.01},children:[a.jsxs("div",{className:`flex items-center gap-2 flex-1 ${f?"min-w-0":"gap-3"}`,children:[a.jsx(P,{className:`flex-shrink-0 ${C.color} ${f?"h-4 w-4":"h-5 w-5"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`font-semibold ${f?"text-xs truncate":"text-sm"}`,children:C.label}),!f&&a.jsx("div",{className:"text-xs text-muted-foreground",children:C.benefit})]})]}),a.jsx("div",{className:`text-center ${f?"min-w-[40px]":"min-w-[60px]"}`,children:a.jsxs("div",{className:`font-bold ${f?"text-xs":"text-sm"}`,children:[S,n[E]>0&&a.jsxs("span",{className:"text-green-400 ml-1",children:["+",n[E]]})]})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(de,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>x(E),disabled:n[E]===0,children:a.jsx(OE,{className:f?"h-3 w-3":"h-4 w-4"})}),a.jsx("div",{className:`text-center font-mono ${f?"w-6 text-xs":"w-8 text-sm"}`,children:n[E]}),a.jsx(de,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>g(E),disabled:p===0,children:a.jsx(Bo,{className:f?"h-3 w-3":"h-4 w-4"})})]})]},E)})}),h>0&&a.jsxs(Rs.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`bg-primary/5 border border-primary/20 rounded-lg ${f?"p-2 mt-2":"p-3"}`,children:[a.jsxs("div",{className:`font-medium mb-2 flex items-center gap-2 ${f?"text-xs":"text-sm"}`,children:[a.jsx(er,{className:`text-primary ${f?"h-3 w-3":"h-4 w-4"}`}),"Preview dos Melhoramentos"]}),a.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-xs"}`,children:[n.vitality>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"HP:"}),a.jsxs("span",{className:"text-green-400",children:["+",n.vitality*8]})]}),n.intelligence>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Mana:"}),a.jsxs("span",{className:"text-blue-400",children:["+",n.intelligence*5]})]}),n.strength>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Ataque:"}),a.jsxs("span",{className:"text-red-400",children:["+",n.strength*2]})]}),n.dexterity>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Velocidade:"}),a.jsxs("span",{className:"text-green-400",children:["+",Math.floor(n.dexterity*1.5)]})]})]})]})]})}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(de,{variant:"outline",onClick:e,className:`flex-1 ${f?"text-xs h-8":""}`,children:"Cancelar"}),h>0&&a.jsxs(de,{variant:"outline",onClick:b,className:`flex-1 ${f?"text-xs h-8":""}`,children:[a.jsx($E,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Reset":"Resetar"]}),a.jsxs(de,{onClick:_,disabled:c||h===0,className:`flex-1 bg-emerald-500 hover:bg-emerald-600 ${f?"text-xs h-8":""}`,children:[c?a.jsx("div",{className:`animate-spin rounded-full border-2 border-white border-t-transparent mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}):a.jsx(Sy,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?`OK (${h})`:`Confirmar (${h})`]})]})]})})};function TK({currentFloor:t,playerLevel:e}){fe.useEffect(()=>{console.log("[BattleHeader] Props recebidas:"),console.log("- currentFloor:",t==null?void 0:t.description,`(tipo: ${t==null?void 0:t.type})`),console.log("- playerLevel:",e)},[t,e]);const s=f=>{switch(f){case"boss":return"👑";case"elite":return"⭐";case"event":return"❓";default:return"🗺️"}},r=t.floorNumber||1,n=Math.ceil(r/20),i=(r-1)%20+1,c=[5,10,15,20].includes(i),u=n>1;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 flex-wrap",children:[a.jsxs("h2",{className:"text-2xl font-bold text-primary",children:[s(t.type)," ",t.description]}),a.jsxs(qe,{variant:"outline",className:"bg-background/50",children:[a.jsx(vI,{className:"h-3 w-3 mr-1"}),"Andar ",r]}),u&&a.jsxs(qe,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:[a.jsx(Ti,{className:"h-3 w-3 mr-1"}),"Tier ",n]}),c&&a.jsxs(qe,{className:"bg-red-500/20 text-red-400 border-red-500/30 animate-pulse",children:[a.jsx(er,{className:"h-3 w-3 mr-1"}),"BOSS"]}),t.isCheckpoint&&a.jsxs(qe,{className:"bg-primary/20 text-primary",children:[a.jsx(Nt,{className:"h-3 w-3 mr-1"}),"Checkpoint"]})]}),u&&a.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:a.jsxs("span",{className:"bg-purple-500/10 px-2 py-1 rounded border border-purple-500/20",children:["Sistema Cíclico: Posição ",i,"/20 no Ciclo ",n,c&&" • Monstros Escalados"]})}),e<t.minLevel&&a.jsxs("div",{className:"text-yellow-500 text-sm",children:["⚠️ Nível recomendado: ",t.minLevel]}),u&&a.jsx("div",{className:"text-sm text-purple-400 mt-2",children:"Os monstros foram fortalecidos pelo poder ancestral da torre!"})]})})}var Pp="Popover",[gM,dZ]=oa(Pp,[Dc]),Xd=Dc(),[RK,qo]=gM(Pp),xM=t=>{const{__scopePopover:e,children:s,open:r,defaultOpen:n,onOpenChange:i,modal:c=!1}=t,u=Xd(e),f=y.useRef(null),[h,p]=y.useState(!1),[g,x]=Mo({prop:r,defaultProp:n??!1,onChange:i,caller:Pp});return a.jsx(Pb,{...u,children:a.jsx(RK,{scope:e,contentId:Ha(),triggerRef:f,open:g,onOpenChange:x,onOpenToggle:y.useCallback(()=>x(b=>!b),[x]),hasCustomAnchor:h,onCustomAnchorAdd:y.useCallback(()=>p(!0),[]),onCustomAnchorRemove:y.useCallback(()=>p(!1),[]),modal:c,children:s})})};xM.displayName=Pp;var vM="PopoverAnchor",MK=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,n=qo(vM,s),i=Xd(s),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=n;return y.useEffect(()=>(c(),()=>u()),[c,u]),a.jsx(_p,{...i,...r,ref:e})});MK.displayName=vM;var yM="PopoverTrigger",bM=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,n=qo(yM,s),i=Xd(s),c=_t(e,n.triggerRef),u=a.jsx(Ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":SM(n.open),...r,ref:c,onClick:Xe(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?u:a.jsx(_p,{asChild:!0,...i,children:u})});bM.displayName=yM;var Wb="PopoverPortal",[PK,DK]=gM(Wb,{forceMount:void 0}),wM=t=>{const{__scopePopover:e,forceMount:s,children:r,container:n}=t,i=qo(Wb,e);return a.jsx(PK,{scope:e,forceMount:s,children:a.jsx(Vr,{present:s||i.open,children:a.jsx(tp,{asChild:!0,container:n,children:r})})})};wM.displayName=Wb;var Nc="PopoverContent",_M=y.forwardRef((t,e)=>{const s=DK(Nc,t.__scopePopover),{forceMount:r=s.forceMount,...n}=t,i=qo(Nc,t.__scopePopover);return a.jsx(Vr,{present:r||i.open,children:i.modal?a.jsx($K,{...n,ref:e}):a.jsx(LK,{...n,ref:e})})});_M.displayName=Nc;var OK=Mi("PopoverContent.RemoveScroll"),$K=y.forwardRef((t,e)=>{const s=qo(Nc,t.__scopePopover),r=y.useRef(null),n=_t(e,r),i=y.useRef(!1);return y.useEffect(()=>{const c=r.current;if(c)return Ty(c)},[]),a.jsx(rp,{as:OK,allowPinchZoom:!0,children:a.jsx(jM,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xe(t.onCloseAutoFocus,c=>{var u;c.preventDefault(),i.current||(u=s.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Xe(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Xe(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),LK=y.forwardRef((t,e)=>{const s=qo(Nc,t.__scopePopover),r=y.useRef(!1),n=y.useRef(!1);return a.jsx(jM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(r.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),jM=y.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,...g}=t,x=qo(Nc,s),b=Xd(s);return ky(),a.jsx(ep,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:i,children:a.jsx(Bd,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:p,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:a.jsx(Db,{"data-state":SM(x.open),role:"dialog",id:x.contentId,...b,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),NM="PopoverClose",IK=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,n=qo(NM,s);return a.jsx(Ze.button,{type:"button",...r,ref:e,onClick:Xe(t.onClick,()=>n.onOpenChange(!1))})});IK.displayName=NM;var BK="PopoverArrow",VK=y.forwardRef((t,e)=>{const{__scopePopover:s,...r}=t,n=Xd(s);return a.jsx(Ob,{...n,...r,ref:e})});VK.displayName=BK;function SM(t){return t?"open":"closed"}var zK=xM,UK=bM,qK=wM,CM=_M;const FK=zK,HK=UK,EM=y.forwardRef(({className:t,align:e="center",sideOffset:s=4,...r},n)=>a.jsx(qK,{children:a.jsx(CM,{ref:n,align:e,sideOffset:s,className:Be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));EM.displayName=CM.displayName;var Dp="Checkbox",[GK,fZ]=oa(Dp),[XK,Zb]=GK(Dp);function YK(t){const{__scopeCheckbox:e,checked:s,children:r,defaultChecked:n,disabled:i,form:c,name:u,onCheckedChange:f,required:h,value:p="on",internal_do_not_use_render:g}=t,[x,b]=Mo({prop:s,defaultProp:n??!1,onChange:f,caller:Dp}),[_,j]=y.useState(null),[N,C]=y.useState(null),E=y.useRef(!1),S=_?!!c||!!_.closest("form"):!0,P={checked:x,disabled:i,setChecked:b,control:_,setControl:j,name:u,form:c,value:p,hasConsumerStoppedPropagationRef:E,required:h,defaultChecked:Co(n)?!1:n,isFormControl:S,bubbleInput:N,setBubbleInput:C};return a.jsx(XK,{scope:e,...P,children:KK(g)?g(P):r})}var AM="CheckboxTrigger",kM=y.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:s,...r},n)=>{const{control:i,value:c,disabled:u,checked:f,required:h,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:x,isFormControl:b,bubbleInput:_}=Zb(AM,t),j=_t(n,p),N=y.useRef(f);return y.useEffect(()=>{const C=i==null?void 0:i.form;if(C){const E=()=>g(N.current);return C.addEventListener("reset",E),()=>C.removeEventListener("reset",E)}},[i,g]),a.jsx(Ze.button,{type:"button",role:"checkbox","aria-checked":Co(f)?"mixed":f,"aria-required":h,"data-state":DM(f),"data-disabled":u?"":void 0,disabled:u,value:c,...r,ref:j,onKeyDown:Xe(e,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Xe(s,C=>{g(E=>Co(E)?!0:!E),_&&b&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})})});kM.displayName=AM;var Qb=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:r,checked:n,defaultChecked:i,required:c,disabled:u,value:f,onCheckedChange:h,form:p,...g}=t;return a.jsx(YK,{__scopeCheckbox:s,checked:n,defaultChecked:i,disabled:u,required:c,onCheckedChange:h,name:r,form:p,value:f,internal_do_not_use_render:({isFormControl:x})=>a.jsxs(a.Fragment,{children:[a.jsx(kM,{...g,ref:e,__scopeCheckbox:s}),x&&a.jsx(PM,{__scopeCheckbox:s})]})})});Qb.displayName=Dp;var TM="CheckboxIndicator",RM=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:r,...n}=t,i=Zb(TM,s);return a.jsx(Vr,{present:r||Co(i.checked)||i.checked===!0,children:a.jsx(Ze.span,{"data-state":DM(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...t.style}})})});RM.displayName=TM;var MM="CheckboxBubbleInput",PM=y.forwardRef(({__scopeCheckbox:t,...e},s)=>{const{control:r,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:c,required:u,disabled:f,name:h,value:p,form:g,bubbleInput:x,setBubbleInput:b}=Zb(MM,t),_=_t(s,b),j=u4(i),N=e4(r);y.useEffect(()=>{const E=x;if(!E)return;const S=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(S,"checked").set,D=!n.current;if(j!==i&&R){const $=new Event("click",{bubbles:D});E.indeterminate=Co(i),R.call(E,Co(i)?!1:i),E.dispatchEvent($)}},[x,j,i,n]);const C=y.useRef(Co(i)?!1:i);return a.jsx(Ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??C.current,required:u,disabled:f,name:h,value:p,form:g,...e,tabIndex:-1,ref:_,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});PM.displayName=MM;function KK(t){return typeof t=="function"}function Co(t){return t==="indeterminate"}function DM(t){return Co(t)?"indeterminate":t?"checked":"unchecked"}const OM=y.forwardRef(({className:t,...e},s)=>a.jsx(Qb,{ref:s,className:Be("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:a.jsx(RM,{className:Be("flex items-center justify-center text-current"),children:a.jsx(Ny,{className:"h-4 w-4"})})}));OM.displayName=Qb.displayName;function WK({gameLog:t}){const e=y.useRef(null),[s,r]=y.useState({system:!0,battle:!0,lore:!0,skill_xp:!0,level_up:!0,equipment:!0,enemy_action:!0,player_action:!0,damage:!0,healing:!0});y.useEffect(()=>{if(e.current){const g=e.current.querySelector("[data-radix-scroll-area-viewport]");g&&(g.scrollTop=g.scrollHeight)}},[t]);const n=(g,x)=>{r(b=>({...b,[g]:x}))},i=g=>{r({system:g,battle:g,lore:g,skill_xp:g,level_up:g,equipment:g,enemy_action:g,player_action:g,damage:g,healing:g})},c=t.filter(g=>s[g.type]),u=g=>{switch(g){case"system":return"text-blue-400";case"battle":return"text-foreground";case"lore":return"text-purple-400 italic";case"skill_xp":return"text-green-400";case"level_up":return"text-yellow-400 font-semibold";case"equipment":return"text-orange-400";case"enemy_action":return"text-red-400";case"player_action":return"text-blue-400";case"damage":return"text-red-300";case"healing":return"text-green-300";default:return"text-foreground"}},f=g=>{switch(g){case"enemy_action":return a.jsx(Tt,{className:"h-3 w-3 text-red-400 mr-2"});case"player_action":return a.jsx(bt,{className:"h-3 w-3 text-blue-400 mr-2"});case"damage":return a.jsx(At,{className:"h-3 w-3 text-red-300 mr-2"});case"healing":return a.jsx(ct,{className:"h-3 w-3 text-green-300 mr-2"});case"level_up":return a.jsx("span",{className:"mr-2",children:"🌟"});case"equipment":return a.jsx("span",{className:"mr-2",children:"⚔️"});case"skill_xp":return a.jsx("span",{className:"mr-2",children:"📈"});case"lore":return a.jsx("span",{className:"mr-2",children:"📜"});default:return null}},h=g=>{switch(g){case"system":return"Sistema";case"battle":return"Batalha";case"lore":return"História";case"skill_xp":return"XP de Habilidade";case"level_up":return"Level Up";case"equipment":return"Equipamentos";case"enemy_action":return"Ações do Inimigo";case"player_action":return"Ações do Jogador";case"damage":return"Dano";case"healing":return"Cura";default:return g}},p=g=>{let x=g.text;if(x.includes("causou")&&x.includes("de dano")){const b=x.match(/(\d+)\s+de dano/);if(b){const _=b[1];x=x.replace(`${_} de dano`,`**${_}** de dano`)}}if(x.includes("recuperou")&&x.includes("HP")){const b=x.match(/(\d+)\s+HP/);if(b){const _=b[1];x=x.replace(`${_} HP`,`**${_}** HP`)}}return x};return a.jsxs(De,{className:"mt-6",children:[a.jsxs(ft,{className:"pb-2 flex flex-row items-center justify-between",children:[a.jsxs(pt,{className:"text-lg flex items-center gap-2",children:[a.jsx(lS,{className:"h-5 w-5"}),"Log de Batalha"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.length,"/",t.length]}),a.jsxs(FK,{children:[a.jsx(HK,{asChild:!0,children:a.jsx(de,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:a.jsx(Sd,{className:"h-4 w-4"})})}),a.jsx(EM,{className:"w-80",align:"end",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"font-medium",children:"Filtros do Log"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>i(!0),className:"h-6 px-2 text-xs",children:[a.jsx(No,{className:"h-3 w-3 mr-1"}),"Todos"]}),a.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-6 px-2 text-xs",children:[a.jsx(UI,{className:"h-3 w-3 mr-1"}),"Nenhum"]})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s).map(([g,x])=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(OM,{id:g,checked:x,onCheckedChange:b=>n(g,!!b)}),a.jsx("label",{htmlFor:g,className:`text-xs font-medium cursor-pointer ${u(g)}`,children:h(g)})]},g))})]})})]})]})]}),a.jsx(He,{children:a.jsx(rc,{ref:e,className:"h-56 rounded border p-3 bg-card/50 backdrop-blur-sm",children:c.length===0?a.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:a.jsxs("div",{className:"text-center",children:[a.jsx(lS,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:t.length===0?"Nenhum evento ainda":"Nenhum evento corresponde aos filtros"})]})}):a.jsx("div",{className:"space-y-2",children:c.map((g,x)=>a.jsxs("div",{className:`flex items-start text-sm leading-relaxed ${u(g.type)} transition-all duration-200 hover:bg-muted/20 rounded p-2 -m-2`,children:[f(g.type),a.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:p(g).replace(/\*\*(.+?)\*\*/g,'<strong class="text-yellow-300">$1</strong>')}}),a.jsx("span",{className:"text-xs text-muted-foreground/60 ml-2 flex-shrink-0",children:new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},`${x}-${g.text.substring(0,20)}`))})})})]})}const ZK=t=>{switch(t.effect_type){case"damage":return a.jsx(Qm,{className:"w-3 h-3"});case"heal":return a.jsx(ds,{className:"w-3 h-3"});case"buff":return a.jsx(ct,{className:"w-3 h-3"});case"debuff":return a.jsx(LE,{className:"w-3 h-3"});default:return a.jsx(At,{className:"w-3 h-3"})}},QK=t=>{switch(t.effect_type){case"damage":return"bg-red-500/20 hover:bg-red-500/30 border-red-500/50";case"heal":return"bg-green-500/20 hover:bg-green-500/30 border-green-500/50";case"buff":return"bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50";case"debuff":return"bg-purple-500/20 hover:bg-purple-500/30 border-purple-500/50";default:return"bg-slate-500/20 hover:bg-slate-500/30 border-slate-500/50"}};function S2({handleAction:t,isPlayerTurn:e,loading:s,player:r,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i}){var g;const[c,u]=y.useState([]),f=((g=r.spells)==null?void 0:g.slice(0,3))||[];y.useEffect(()=>{(async()=>{if(!r.consumables)return;const b=r.consumables.filter(_=>{var j;return((j=_.consumable)==null?void 0:j.type)==="potion"&&_.quantity>0}).slice(0,3).map(_=>({id:_.id,consumable_id:_.consumable_id,consumable:{id:_.consumable.id,name:_.consumable.name,type:_.consumable.type,effect_value:_.consumable.effect_value},quantity:_.quantity}));u(b)})()},[r.consumables]);const h=async x=>{if(!(!e||s.performAction||r.potionUsedThisTurn))try{if((await Ht.consumeItem(r.id,x.consumable_id,r)).success){const _=x.consumable.effect_value,j=Math.min(r.max_hp,r.hp+_),N=Math.min(r.max_mana,r.mana);n(j,N);const C=r.consumables.map(E=>E.consumable_id===x.consumable_id?{...E,quantity:E.quantity-1}:E).filter(E=>E.quantity>0);i(C)}}catch(b){console.error("Erro ao usar poção:",b)}},p=!e||s.performAction;return a.jsxs("div",{className:"quick-action-panel flex flex-col gap-1 p-2 bg-slate-900/40 rounded-lg border border-slate-700/50 w-16 shadow-lg",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"relative",children:[a.jsx(de,{variant:"outline",size:"sm",onClick:()=>t("attack"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-red-500/20 hover:bg-red-500/30 border-red-500/50 text-red-400 transition-all duration-150 cursor-pointer",title:"Atacar (A)",children:a.jsx(Tt,{className:"w-4 h-4"})}),a.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"A"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t("defend"),disabled:p||r.defenseCooldown>0,className:`quick-action-button w-12 h-12 p-0 bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50 text-blue-400 transition-all duration-150 relative cursor-pointer ${r.defenseCooldown>0?"opacity-50":""}`,title:`Defender (S)${r.defenseCooldown>0?` - Cooldown: ${r.defenseCooldown}`:""}`,children:[a.jsx(bt,{className:"w-4 h-4"}),r.defenseCooldown>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:r.defenseCooldown})]}),a.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"S"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(de,{variant:"outline",size:"sm",onClick:()=>t("flee"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-yellow-500/20 hover:bg-yellow-500/30 border-yellow-500/50 text-yellow-400 transition-all duration-150 cursor-pointer",title:"Fugir (D)",children:a.jsx(hs,{className:"w-4 h-4"})}),a.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"D"})]})]}),a.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),a.jsx("div",{className:"flex flex-col gap-1",children:f.map((x,b)=>{const _=r.mana>=x.mana_cost&&x.current_cooldown===0;return a.jsxs("div",{className:"relative",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t("spell",x.id),disabled:p||!_,className:`quick-action-button w-12 h-12 p-0 ${QK(x)} relative transition-all duration-150 cursor-pointer ${_?"":"opacity-50"}`,title:`${x.name} (${1+b}) - ${x.mana_cost} Mana${x.current_cooldown>0?` - Cooldown: ${x.current_cooldown}`:r.mana<x.mana_cost?" - Mana insuficiente":""}`,children:[ZK(x),x.current_cooldown>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.current_cooldown}),a.jsx("span",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center ${r.mana>=x.mana_cost?"bg-blue-600":"bg-red-600"}`,children:x.mana_cost})]}),a.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:1+b})]},x.id)})}),c.length>0&&a.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),a.jsx("div",{className:"flex flex-col gap-1",children:c.map((x,b)=>a.jsxs("div",{className:"relative",children:[a.jsxs(de,{variant:"outline",size:"sm",onClick:()=>h(x),disabled:p||r.potionUsedThisTurn,className:`quick-action-button w-12 h-12 p-0 bg-green-500/20 hover:bg-green-500/30 border-green-500/50 text-green-400 relative transition-all duration-150 cursor-pointer ${r.potionUsedThisTurn?"opacity-50":""}`,title:`${x.consumable.name} (${["Q","W","E"][b]}) - Cura ${x.consumable.effect_value} HP${r.potionUsedThisTurn?" - Já usou poção neste turno":""}`,children:[a.jsx(ds,{className:"w-4 h-4"}),a.jsx("span",{className:"absolute -bottom-1 -right-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.quantity}),r.potionUsedThisTurn&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-orange-500/30 rounded-lg",children:a.jsx("span",{className:"text-orange-400 text-xs font-bold",children:"✗"})})]}),a.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:["Q","W","E"][b]})]},x.id))})]})}const JK=({isVisible:t,isSuccess:e,playerName:s,enemyName:r,onComplete:n})=>{const[i,c]=y.useState(!1),[u,f]=y.useState(0);if(y.useEffect(()=>(c(!0),()=>c(!1)),[]),y.useEffect(()=>{if(!t)return;console.log(`[FleeOverlay] 🎭 Overlay ativado - Sucesso: ${e}, Jogador: ${s}, Inimigo: ${r}`);const g=setInterval(()=>{f(b=>Math.min(b+(e?2.5:3.3),100))},50),x=setTimeout(()=>{console.log("[FleeOverlay] ⏰ Tempo esgotado - Chamando onComplete"),n()},e?3e3:2500);return()=>{clearInterval(g),clearTimeout(x)}},[t,e,s,r,n]),!i||!t)return null;const p=e?{emoji:"🏃‍♂️",title:"Fuga Bem-Sucedida!",subtitle:"Redirecionando para o hub...",description:r?`${s} conseguiu fugir de ${r}!`:`${s} conseguiu escapar!`,bgColor:"bg-gradient-to-r from-green-500/20 via-emerald-500/20 to-teal-500/20",borderColor:"border-green-500/30",textColor:"text-green-400",accentColor:"border-green-400"}:{emoji:"⚔️",title:"Fuga Falhou!",subtitle:"Prepare-se para o contra-ataque...",description:r?`${r} impediu a fuga de ${s}!`:`O inimigo impediu a fuga de ${s}!`,bgColor:"bg-gradient-to-r from-red-500/20 via-orange-500/20 to-yellow-500/20",borderColor:"border-red-500/30",textColor:"text-red-400",accentColor:"border-red-400"};return a.jsxs("div",{className:"fixed inset-0 backdrop-blur-md z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40"}),a.jsxs("div",{className:`relative ${p.bgColor} border ${p.borderColor} rounded-2xl p-8 shadow-2xl max-w-md mx-4 transform transition-all duration-500 animate-in zoom-in-95 fade-in-0`,children:[a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:`text-6xl ${e?"animate-bounce":"animate-pulse"} transition-all duration-300`,children:p.emoji}),a.jsx("div",{className:`font-bold text-2xl ${p.textColor}`,children:p.title}),a.jsx("div",{className:"text-muted-foreground text-base",children:p.subtitle}),a.jsx("div",{className:"w-full bg-background/30 rounded-full h-2 overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-150 ease-out ${e?"bg-green-400":"bg-red-400"}`,style:{width:`${u}%`}})}),a.jsx("div",{className:"text-sm text-muted-foreground/90 leading-relaxed px-2",children:p.description}),a.jsxs("div",{className:"flex items-center justify-center gap-3 pt-2",children:[a.jsx("div",{className:`animate-spin rounded-full h-5 w-5 border-2 border-t-transparent ${p.accentColor}`}),a.jsx("span",{className:`text-sm font-medium ${p.textColor}`,children:e?"Redirecionando...":"Retornando..."})]})]}),a.jsx("div",{className:`absolute inset-0 rounded-2xl border-2 ${p.borderColor} animate-pulse pointer-events-none`})]})]})};function eW(){const t=Ot(),{user:e}=qs(),{gameState:s,performAction:r,loading:n,initializeBattle:i,addGameLogMessage:c,updatePlayerStats:u,updatePlayerConsumables:f,gameLog:h}=$c(),{player:p,currentEnemy:g,currentFloor:x,isPlayerTurn:b}=s,[_,j]=y.useState(!1),[N,C]=y.useState(!1),[E,S]=y.useState(!1),[P,R]=y.useState(!1),[D,$]=y.useState(!1),[A,M]=y.useState(!0),[U,Y]=y.useState(!1),[V,F]=y.useState(null),[Q,G]=y.useState({xp:0,gold:0,drops:[],leveledUp:!1,newLevel:0}),k=y.useRef(!1),B=y.useRef(0),z=y.useRef(!1),W=y.useRef(!1),L=y.useRef(null),X=y.useRef(0),ae=y.useRef(null),ee=3,le=15e3,ie=y.useRef(new Set),{character:se}=py({from:"/_authenticated/game/play/hub/battle/$character"}),ue=y.useMemo(()=>{const I=g&&g.maxHp>0?Math.max(0,Math.min(100,g.hp/g.maxHp*100)):0,q=p.max_hp>0?Math.max(0,Math.min(100,p.hp/p.max_hp*100)):0,K=p.max_mana>0?Math.max(0,Math.min(100,p.mana/p.max_mana*100)):0;return{enemyHpPercentage:I,playerHpPercentage:q,playerManaPercentage:K}},[g==null?void 0:g.hp,g==null?void 0:g.maxHp,p.hp,p.max_hp,p.mana,p.max_mana]),ce=y.useCallback(()=>{ae.current&&(clearTimeout(ae.current),ae.current=null),z.current=!1,L.current=null,X.current=0,F(null)},[]);y.useEffect(()=>(W.current=!0,console.log("[GameBattle] Componente montado"),()=>{console.log("[GameBattle] Componente desmontado - limpando recursos"),W.current=!1,ce()}),[ce]),y.useEffect(()=>{if(!W.current||!(e!=null&&e.id)||!se){console.log("[GameBattle] Condições básicas não atendidas:",{mounted:W.current,userId:!!(e!=null&&e.id),characterId:!!se});return}if(z.current&&L.current===se){console.log("[GameBattle] Batalha já inicializada para este personagem");return}if(n.loadProgress){console.log("[GameBattle] Aguardando carregamento de progresso...");return}if(X.current>=ee){console.error("[GameBattle] Máximo de tentativas de inicialização atingido"),F("Erro ao carregar batalha. Verifique sua conexão e tente novamente."),me.error("Falha ao inicializar batalha",{description:"Retorne ao hub e tente novamente",duration:5e3,action:{label:"Voltar ao Hub",onClick:()=>t({to:"/game/play"})}});return}const I=async()=>{try{console.log(`[GameBattle] Inicializando batalha para personagem ${se} (tentativa ${X.current+1}/${ee})`),X.current+=1,z.current=!0,L.current=se,F(null),ae.current=setTimeout(()=>{W.current&&z.current&&(console.error("[GameBattle] Timeout de inicialização atingido"),F("Tempo limite de carregamento atingido"),z.current=!1,X.current<ee&&setTimeout(()=>{W.current&&(console.log("[GameBattle] Tentando reinicialização após timeout..."),z.current=!1)},2e3))},le);const K=await Ge.getCharacter(se);if(!K.success||!K.data)throw new Error(K.error||"Personagem não encontrado");await i(K.data,se),ae.current&&(clearTimeout(ae.current),ae.current=null),M(!1),F(null),console.log("[GameBattle] Batalha inicializada com sucesso")}catch(K){console.error("[GameBattle] Erro ao inicializar batalha:",K),ae.current&&(clearTimeout(ae.current),ae.current=null),z.current=!1,L.current=null;const ge=K instanceof Error?K.message:"Erro desconhecido";F(ge),X.current<ee?(console.log("[GameBattle] Tentando reinicialização em 3 segundos..."),setTimeout(()=>{W.current&&(z.current=!1)},3e3)):me.error("Erro ao inicializar batalha",{description:ge,duration:5e3,action:{label:"Voltar ao Hub",onClick:()=>t({to:"/game/play"})}})}},q=setTimeout(()=>{W.current&&!z.current&&I()},100);return()=>clearTimeout(q)},[e==null?void 0:e.id,se,i,n.loadProgress,t,ce]),y.useEffect(()=>{if(!s.battleRewards||_)return;const I=`${p.floor}-${(g==null?void 0:g.name)||"unknown"}-${s.battleRewards.xp}-${s.battleRewards.gold}`;if(ie.current.has(I)){console.log(`[GameBattle] Recompensa já processada: ${I}`);return}if(!s.battleRewards.xp&&!s.battleRewards.gold){console.log("[GameBattle] Recompensas inválidas ou vazias - ignorando");return}ie.current.add(I),console.log("[GameBattle] Processando recompensa de vitória");const q=s.battleRewards;G({xp:q.xp,gold:q.gold,drops:q.drops||[],leveledUp:q.leveledUp,newLevel:q.newLevel}),j(!0),c(`Vitória! Você derrotou o inimigo e recebeu ${q.xp} XP e ${q.gold} Gold.`,"system"),q.leveledUp&&q.newLevel&&c(`Você subiu para o nível ${q.newLevel}!`,"system"),setTimeout(()=>{ie.current.size>10&&Array.from(ie.current).slice(0,5).forEach(ge=>ie.current.delete(ge))},5e3)},[s.battleRewards,_,p.floor,g==null?void 0:g.name,c]),y.useEffect(()=>{s.mode==="gameover"&&p.hp<=0&&!N&&(console.log("[GameBattle] Personagem morreu - exibindo modal de morte"),C(!0),s.characterDeleted&&c(`${p.name} foi perdido permanentemente. O sistema de Permadeath está ativo.`,"system"))},[s.mode,p.hp,s.characterDeleted,p.name,c,N]),y.useEffect(()=>{if(!z.current||A||V)return;if(s.mode==="battle"&&!g&&!s.battleRewards&&!s.currentSpecialEvent){console.warn("[GameBattle] ⚠️ ESTADO INCONSISTENTE DETECTADO: modo battle sem inimigo, sem recompensas, sem evento");const q=setTimeout(async()=>{if(!W.current)return;if(s.mode==="battle"&&!g&&!s.battleRewards&&!s.currentSpecialEvent){console.log("[GameBattle] 🔄 Tentando recuperação de estado inconsistente...");try{const{GameService:ge}=await Dt(async()=>{const{GameService:ye}=await Promise.resolve().then(()=>mm);return{GameService:ye}},void 0),_e=await ge.generateEnemy(p.floor);if(_e){console.log(`[GameBattle] ✅ Inimigo regenerado: ${_e.name}`);return}}catch(ge){console.error("[GameBattle] ❌ Erro ao regenerar inimigo:",ge)}console.log("[GameBattle] 🔄 Forçando reinicialização completa..."),z.current=!1,X.current=0,M(!0),F(null),me.warning("Recuperando estado da batalha...",{description:"Recarregando dados do jogo",duration:3e3})}},3e3);return()=>clearTimeout(q)}},[s.mode,g,s.battleRewards,s.currentSpecialEvent,p.floor,A,V]),y.useEffect(()=>{if((s.mode==="fled"||s.fleeSuccessful===!0)&&!P){console.log("[GameBattle] Fuga detectada - ativando overlay");const q=s.mode==="fled"||s.fleeSuccessful===!0;$(q),R(!0),k.current=!0}},[s.mode,s.fleeSuccessful,P]),y.useEffect(()=>{const I=()=>{const q=window.innerWidth<=768,K=window.innerHeight>window.innerWidth;Y(q&&K)};return I(),window.addEventListener("resize",I),window.addEventListener("orientationchange",I),()=>{window.removeEventListener("resize",I),window.removeEventListener("orientationchange",I)}},[]),y.useEffect(()=>{const I=()=>S(!0);return window.addEventListener("openAttributeModal",I),()=>window.removeEventListener("openAttributeModal",I)},[]);const be=y.useCallback(async(I,q,K)=>{const ge=Date.now();if(console.log(`[GameBattle] Executando ação: ${I}`),s.mode==="gameover"||p.hp<=0){console.warn("[GameBattle] Ação bloqueada - personagem está morto");return}if(!(I==="consumable"||I==="flee"||I==="continue")&&!b){console.warn(`[GameBattle] Ação '${I}' bloqueada - não é turno do jogador`);return}if(I!=="consumable"&&ge-B.current<300){console.warn("[GameBattle] Debounce - aguardando");return}B.current=ge;try{console.log(`[GameBattle] Delegando ação '${I}' para provider`),await r(I,q,K)}catch(ye){console.error(`[GameBattle] Erro ao executar ação '${I}':`,ye),me.error(`Erro ao executar ação: ${I}`)}},[s.mode,p.hp,b,r]),Ne=y.useCallback(I=>{console.log("[game-battle] Atualizando consumáveis do jogador:",I.length),f(I)},[f]),we=y.useCallback((I,q)=>{console.log(`[game-battle] Atualizando stats do jogador: HP ${I}, Mana ${q}`),u(I,q),s.player.id&&Ge.updateCharacterHpMana(s.player.id,I,q).then(K=>{K.success||(console.error("[game-battle] Erro ao atualizar stats no banco:",K.error),me.error("Erro ao atualizar status do personagem"))}).catch(K=>{console.error("[game-battle] Erro ao atualizar stats:",K),me.error("Erro ao atualizar status do personagem")})},[u,s.player.id]),Ce=y.useCallback(async()=>{if(k.current||n.performAction){console.warn("[GameBattle] Continuar aventura bloqueado - já processando ação");return}k.current=!0,j(!1);try{console.log("[GameBattle] Chamando performAction('continue')..."),await be("continue")}catch(I){console.error("[GameBattle] Erro ao avançar:",I),me.error("Erro ao avançar para o próximo andar"),j(!0)}finally{k.current=!1}},[n.performAction,be]),Oe=y.useCallback(()=>{t({to:"/game/play/hub",search:{character:s.player.id}})},[t,s.player.id]),Qe=y.useCallback(()=>{t({to:"/game/play"})},[t]),ve=y.useCallback(()=>{S(!0),j(!1)},[]),Re=y.useCallback(async()=>{if(console.log("[GameBattle] Overlay de fuga concluído, sucesso:",D),R(!1),k.current=!1,D){console.log("[GameBattle] Fuga bem-sucedida - redirecionando"),me.success("Fuga bem-sucedida!",{description:"Retornando ao hub...",duration:2e3});try{await Ge.updateCharacterFloor(s.player.id,1),console.log("[GameBattle] Andar resetado para 1")}catch(I){console.error("[GameBattle] Erro ao resetar andar:",I)}t({to:"/game/play/hub",search:{character:s.player.id}})}else me.warning("Fuga falhou!",{description:"Prepare-se para o contra-ataque...",duration:3e3})},[D,s.player.id,t]),ke=s.mode==="fled"||s.fleeSuccessful===!0||P;if(V&&X.current>=ee)return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"text-destructive text-6xl mb-4",children:"⚠️"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Erro ao Carregar Batalha"}),a.jsx("p",{className:"text-muted-foreground mb-6",children:V}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded",children:"Tentar Novamente"}),a.jsx("button",{onClick:()=>t({to:"/game/play"}),className:"w-full bg-secondary text-secondary-foreground hover:bg-secondary/90 px-4 py-2 rounded",children:"Voltar ao Hub"})]})]})});if(A||!z.current){const I=Math.min((Date.now()-(ae.current?Date.now()-le:Date.now()))/le*100,90);return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Inicializando Batalha..."}),a.jsx("p",{className:"text-muted-foreground mb-4",children:X.current>1?`Tentativa ${X.current}/${ee}`:"Preparando sua aventura..."}),V&&X.current<ee&&a.jsx("p",{className:"text-sm text-muted-foreground text-yellow-600 mb-2",children:"Tentando reconectar..."}),a.jsx("div",{className:"w-full bg-secondary rounded-full h-2 mb-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${I}%`}})}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Carregando dados do personagem e andar..."})]})})}if(s.mode==="special_event"||s.currentSpecialEvent)return a.jsx(AK,{});const st=x&&p.id;return!ke&&!st&&!s.battleRewards?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mb-4"}),a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Carregando dados..."}),a.jsxs("p",{className:"text-muted-foreground text-sm",children:[!x&&"Carregando dados do andar...",!p.id&&"Carregando personagem..."]})]})}):a.jsxs(a.Fragment,{children:[n.performAction&&a.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-2 duration-200",children:a.jsx("div",{className:"bg-background/90 backdrop-blur-sm border rounded-lg px-3 py-2 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-muted-foreground",children:"Processando..."})]})})}),a.jsxs("div",{className:"w-full max-w-6xl",children:[a.jsx(TK,{currentFloor:{floorNumber:p.floor,type:(x==null?void 0:x.type)||"common",description:(x==null?void 0:x.description)||`Andar ${p.floor}`,isCheckpoint:(x==null?void 0:x.isCheckpoint)||!1,minLevel:(x==null?void 0:x.minLevel)||1},playerLevel:p.level}),a.jsxs("div",{className:"mb-6 relative",children:[!U&&a.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-20 z-10 hidden lg:block",children:a.jsx(S2,{handleAction:be,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:we,onPlayerConsumablesUpdate:Ne})}),!U&&a.jsx("div",{className:"fixed bottom-4 left-4 z-20 block lg:hidden",children:a.jsx(S2,{handleAction:be,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:we,onPlayerConsumablesUpdate:Ne})}),a.jsx(jK,{player:p,currentEnemy:g||{id:"placeholder",name:s.battleRewards?"Inimigo derrotado!":"Preparando próximo inimigo...",level:1,hp:0,maxHp:1,attack:0,defense:0,speed:1,image:s.battleRewards?"💀":"⏳",behavior:"balanced",mana:0,reward_xp:0,reward_gold:0,possible_drops:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}},playerHpPercentage:ue.playerHpPercentage,playerManaPercentage:ue.playerManaPercentage,enemyHpPercentage:ue.enemyHpPercentage,isPlayerTurn:b})]}),a.jsx("div",{className:"mb-6",children:a.jsx(SK,{handleAction:be,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:we,onPlayerConsumablesUpdate:Ne,currentEnemy:g,battleRewards:s.battleRewards})}),a.jsx(WK,{gameLog:h})]}),a.jsx(CK,{isOpen:_,onContinue:Ce,onReturnToHub:Oe,onOpenAttributeModal:ve,rewards:Q,leveledUp:Q.leveledUp,newLevel:Q.newLevel,hasAttributePoints:(p.attribute_points||0)>0}),a.jsx(EK,{isOpen:N,onClose:()=>C(!1),player:{id:p.id,name:p.name,level:p.level,floor:p.floor,hp:p.hp,max_hp:p.max_hp,xp:p.xp,gold:p.gold},gameMessage:`${p.name} foi derrotado no Andar ${p.floor}...`,highestFloor:p.floor,isCharacterDeleted:s.characterDeleted,userId:e==null?void 0:e.id,onReturnToCharacterSelect:Qe,onViewCemetery:()=>{t({to:"/game/play/hub/cemetery",search:{character:p.id}})}}),a.jsx(kK,{isOpen:E,onClose:()=>{S(!1),s.battleRewards&&!_&&j(!0)},character:p}),P&&a.jsx("div",{className:"fixed inset-0 z-50",children:a.jsx(JK,{isVisible:P,isSuccess:D,playerName:p.name,enemyName:g==null?void 0:g.name,onComplete:Re})})]})}function tW(){const t=Ot(),{character:e}=$M.useParams(),{loading:s}=$c(),[r,n]=y.useState(!0),i=y.useRef(!1),c=y.useRef(!1),u=y.useMemo(()=>({isGameLoading:s.loadProgress,shouldShowLoading:r||s.loadProgress}),[s.loadProgress,r]);return y.useEffect(()=>(c.current=!0,()=>{c.current=!1,i.current=!1}),[]),y.useEffect(()=>{if(!c.current)return;const f=u.isGameLoading;if(!f&&r){const h=setTimeout(()=>{c.current&&n(!1)},100);return()=>clearTimeout(h)}else f&&!r&&n(!0)},[u.isGameLoading,r]),y.useEffect(()=>{!c.current||i.current||(e?i.current=!0:(i.current=!0,me.error("Personagem não especificado",{description:"Redirecionando para a seleção de personagens"}),t({to:"/game/play"})))},[e,t]),u.shouldShowLoading?a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsxs("div",{className:"w-full max-w-6xl",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"h-8 w-64 bg-muted/50 animate-pulse rounded mx-auto mb-4"}),a.jsx("div",{className:"h-4 w-48 bg-muted/30 animate-pulse rounded mx-auto"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(f=>a.jsxs("div",{className:"bg-card rounded-lg overflow-hidden shadow animate-pulse",children:[a.jsx("div",{className:"p-4 bg-muted/20",children:a.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mx-auto"})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"aspect-square bg-muted/30 rounded-md mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-muted/40 rounded w-full"}),a.jsx("div",{className:"h-2 bg-muted/30 rounded w-full"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{className:"h-8 bg-muted/20 rounded"}),a.jsx("div",{className:"h-8 bg-muted/20 rounded"})]})]})]})]},f))}),a.jsxs("div",{className:"bg-card rounded-lg p-4 animate-pulse",children:[a.jsx("div",{className:"h-6 bg-muted/40 rounded w-32 mx-auto mb-4"}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),a.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),a.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"})]})]})]})}):a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:a.jsx(eW,{})})}const $M=Wt("/_authenticated/game/play/hub/battle/$character")({component:tW}),Jb=G8.update({id:"/_public",getParentRoute:()=>Zm}),Yd=Az.update({id:"/_authenticated",getParentRoute:()=>Zm}),sW=Rz.update({id:"/",path:"/",getParentRoute:()=>Zm}),rW=Mz.update({id:"/logout",path:"/logout",getParentRoute:()=>Jb}),LM=zT.update({id:"/auth",path:"/auth",getParentRoute:()=>Jb}),IM=HG.update({id:"/users",path:"/users",getParentRoute:()=>Yd}),aW=tX.update({id:"/profile",path:"/profile",getParentRoute:()=>Yd}),Op=aX.update({id:"/game",path:"/game",getParentRoute:()=>Yd}),nW=iX.update({id:"/403",path:"/403",getParentRoute:()=>Yd}),oW=cX.update({id:"/verify-email",path:"/verify-email",getParentRoute:()=>LM}),iW=lR.update({id:"/$id",path:"/$id",getParentRoute:()=>IM}),lW=gX.update({id:"/ranking",path:"/ranking",getParentRoute:()=>Op}),BM=AX.update({id:"/play",path:"/play",getParentRoute:()=>Op}),cW=iY.update({id:"/guide",path:"/guide",getParentRoute:()=>Op}),Dn=aM.update({id:"/hub",path:"/hub",getParentRoute:()=>BM}),uW=nM.update({id:"/spells",path:"/spells",getParentRoute:()=>Dn}),dW=uM.update({id:"/shop",path:"/shop",getParentRoute:()=>Dn}),fW=dM.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Dn}),VM=fM.update({id:"/equipment",path:"/equipment",getParentRoute:()=>Dn}),hW=hM.update({id:"/crafting",path:"/crafting",getParentRoute:()=>Dn}),mW=mM.update({id:"/character-stats",path:"/character-stats",getParentRoute:()=>Dn}),pW=gK.update({id:"/cemetery",path:"/cemetery",getParentRoute:()=>Dn}),gW=pM.update({id:"/select",path:"/select",getParentRoute:()=>VM}),xW=$M.update({id:"/battle/$character",path:"/battle/$character",getParentRoute:()=>Dn}),vW={AuthenticatedGamePlayHubEquipmentSelectRoute:gW},yW=VM._addFileChildren(vW),bW={AuthenticatedGamePlayHubCemeteryRoute:pW,AuthenticatedGamePlayHubCharacterStatsRoute:mW,AuthenticatedGamePlayHubCraftingRoute:hW,AuthenticatedGamePlayHubEquipmentRoute:yW,AuthenticatedGamePlayHubInventoryRoute:fW,AuthenticatedGamePlayHubShopRoute:dW,AuthenticatedGamePlayHubSpellsRoute:uW,AuthenticatedGamePlayHubBattleCharacterRoute:xW},wW=Dn._addFileChildren(bW),_W={AuthenticatedGamePlayHubRoute:wW},jW=BM._addFileChildren(_W),NW={AuthenticatedGameGuideRoute:cW,AuthenticatedGamePlayRoute:jW,AuthenticatedGameRankingRoute:lW},SW=Op._addFileChildren(NW),CW={AuthenticatedUsersIdRoute:iW},EW=IM._addFileChildren(CW),AW={Authenticated403Route:nW,AuthenticatedGameRoute:SW,AuthenticatedProfileRoute:aW,AuthenticatedUsersRoute:EW},kW=Yd._addFileChildren(AW),TW={PublicAuthVerifyEmailRoute:oW},RW=LM._addFileChildren(TW),MW={PublicAuthRoute:RW,PublicLogoutRoute:rW},PW=Jb._addFileChildren(MW),DW={IndexRoute:sW,AuthenticatedRoute:kW,PublicRoute:PW},OW=Zm._addFileChildren(DW)._addFileTypes(),$W=hD({routeTree:OW});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("🚀 Service Worker registrado com sucesso:",t.scope)}).catch(t=>{console.log("❌ Falha ao registrar Service Worker:",t)})});lP.createRoot(document.getElementById("root")).render(a.jsx(y.StrictMode,{children:a.jsx(gD,{router:$W})}));export{Ge as C,mO as D,cr as F,hO as S,BW as a,Si as b,xo as c,Na as d,cN as e,QD as f,Ey as g,KD as h,aO as i,UW as j,YW as k,Nn as l,HW as m,sO as n,JD as o,FW as p,qW as q,XW as r,Qx as s,GW as t,CD as u,Ht as v};
