var B3=Object.defineProperty;var V3=(t,e,s)=>e in t?B3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ut=(t,e,s)=>V3(t,typeof e!="symbol"?e+"":e,s);function q3(t,e){for(var s=0;s<e.length;s++){const a=e[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function Pm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function U3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}),s}var $0={exports:{}},ku={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj;function z3(){if(Mj)return ku;Mj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,n,i){var c=null;if(i!==void 0&&(c=""+i),n.key!==void 0&&(c=""+n.key),"key"in n){i={};for(var u in n)u!=="key"&&(i[u]=n[u])}else i=n;return n=i.ref,{$$typeof:t,type:a,key:c,ref:n!==void 0?n:null,props:i}}return ku.Fragment=e,ku.jsx=s,ku.jsxs=s,ku}var Pj;function F3(){return Pj||(Pj=1,$0.exports=z3()),$0.exports}var r=F3(),L0={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dj;function H3(){if(Dj)return it;Dj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function N(L,X,ne){this.props=L,this.context=X,this.refs=w,this.updater=ne||b}N.prototype.isReactComponent={},N.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},N.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=N.prototype;function C(L,X,ne){this.props=L,this.context=X,this.refs=w,this.updater=ne||b}var S=C.prototype=new E;S.constructor=C,j(S,N.prototype),S.isPureReactComponent=!0;var P=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function $(L,X,ne,te,ie,le){return ne=le.ref,{$$typeof:t,type:L,key:X,ref:ne!==void 0?ne:null,props:le}}function k(L,X){return $(L.type,X,void 0,void 0,void 0,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function V(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ne){return X[ne]})}var Y=/\/+/g;function B(L,X){return typeof L=="object"&&L!==null&&L.key!=null?V(""+L.key):X.toString(36)}function z(){}function Q(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(z,z):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function H(L,X,ne,te,ie){var le=typeof L;(le==="undefined"||le==="boolean")&&(L=null);var ae=!1;if(L===null)ae=!0;else switch(le){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(L.$$typeof){case t:case e:ae=!0;break;case p:return ae=L._init,H(ae(L._payload),X,ne,te,ie)}}if(ae)return ie=ie(L),ae=te===""?"."+B(L,0):te,P(ie)?(ne="",ae!=null&&(ne=ae.replace(Y,"$&/")+"/"),H(ie,X,ne,"",function(we){return we})):ie!=null&&(M(ie)&&(ie=k(ie,ne+(ie.key==null||L&&L.key===ie.key?"":(""+ie.key).replace(Y,"$&/")+"/")+ae)),X.push(ie)),1;ae=0;var ue=te===""?".":te+":";if(P(L))for(var ce=0;ce<L.length;ce++)te=L[ce],le=ue+B(te,ce),ae+=H(te,X,ne,le,ie);else if(ce=x(L),typeof ce=="function")for(L=ce.call(L),ce=0;!(te=L.next()).done;)te=te.value,le=ue+B(te,ce++),ae+=H(te,X,ne,le,ie);else if(le==="object"){if(typeof L.then=="function")return H(Q(L),X,ne,te,ie);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return ae}function A(L,X,ne){if(L==null)return L;var te=[],ie=0;return H(L,te,"","",function(le){return X.call(ne,le,ie++)}),te}function I(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(ne){(L._status===0||L._status===-1)&&(L._status=1,L._result=ne)},function(ne){(L._status===0||L._status===-1)&&(L._status=2,L._result=ne)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var q=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function K(){}return it.Children={map:A,forEach:function(L,X,ne){A(L,function(){X.apply(this,arguments)},ne)},count:function(L){var X=0;return A(L,function(){X++}),X},toArray:function(L){return A(L,function(X){return X})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},it.Component=N,it.Fragment=s,it.Profiler=n,it.PureComponent=C,it.StrictMode=a,it.Suspense=f,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,it.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},it.cache=function(L){return function(){return L.apply(null,arguments)}},it.cloneElement=function(L,X,ne){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var te=j({},L.props),ie=L.key,le=void 0;if(X!=null)for(ae in X.ref!==void 0&&(le=void 0),X.key!==void 0&&(ie=""+X.key),X)!D.call(X,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&X.ref===void 0||(te[ae]=X[ae]);var ae=arguments.length-2;if(ae===1)te.children=ne;else if(1<ae){for(var ue=Array(ae),ce=0;ce<ae;ce++)ue[ce]=arguments[ce+2];te.children=ue}return $(L.type,ie,void 0,void 0,le,te)},it.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},it.createElement=function(L,X,ne){var te,ie={},le=null;if(X!=null)for(te in X.key!==void 0&&(le=""+X.key),X)D.call(X,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ie[te]=X[te]);var ae=arguments.length-2;if(ae===1)ie.children=ne;else if(1<ae){for(var ue=Array(ae),ce=0;ce<ae;ce++)ue[ce]=arguments[ce+2];ie.children=ue}if(L&&L.defaultProps)for(te in ae=L.defaultProps,ae)ie[te]===void 0&&(ie[te]=ae[te]);return $(L,le,void 0,void 0,null,ie)},it.createRef=function(){return{current:null}},it.forwardRef=function(L){return{$$typeof:u,render:L}},it.isValidElement=M,it.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:I}},it.memo=function(L,X){return{$$typeof:h,type:L,compare:X===void 0?null:X}},it.startTransition=function(L){var X=R.T,ne={};R.T=ne;try{var te=L(),ie=R.S;ie!==null&&ie(ne,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(K,q)}catch(le){q(le)}finally{R.T=X}},it.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},it.use=function(L){return R.H.use(L)},it.useActionState=function(L,X,ne){return R.H.useActionState(L,X,ne)},it.useCallback=function(L,X){return R.H.useCallback(L,X)},it.useContext=function(L){return R.H.useContext(L)},it.useDebugValue=function(){},it.useDeferredValue=function(L,X){return R.H.useDeferredValue(L,X)},it.useEffect=function(L,X,ne){var te=R.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(L,X)},it.useId=function(){return R.H.useId()},it.useImperativeHandle=function(L,X,ne){return R.H.useImperativeHandle(L,X,ne)},it.useInsertionEffect=function(L,X){return R.H.useInsertionEffect(L,X)},it.useLayoutEffect=function(L,X){return R.H.useLayoutEffect(L,X)},it.useMemo=function(L,X){return R.H.useMemo(L,X)},it.useOptimistic=function(L,X){return R.H.useOptimistic(L,X)},it.useReducer=function(L,X,ne){return R.H.useReducer(L,X,ne)},it.useRef=function(L){return R.H.useRef(L)},it.useState=function(L){return R.H.useState(L)},it.useSyncExternalStore=function(L,X,ne){return R.H.useSyncExternalStore(L,X,ne)},it.useTransition=function(){return R.H.useTransition()},it.version="19.1.0",it}var Oj;function Pd(){return Oj||(Oj=1,L0.exports=H3()),L0.exports}var y=Pd();const he=Pm(y),gE=q3({__proto__:null,default:he},[y]);var I0={exports:{}},Au={},B0={exports:{}},V0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function G3(){return $j||($j=1,function(t){function e(A,I){var q=A.length;A.push(I);e:for(;0<q;){var K=q-1>>>1,L=A[K];if(0<n(L,I))A[K]=I,A[q]=L,q=K;else break e}}function s(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var I=A[0],q=A.pop();if(q!==I){A[0]=q;e:for(var K=0,L=A.length,X=L>>>1;K<X;){var ne=2*(K+1)-1,te=A[ne],ie=ne+1,le=A[ie];if(0>n(te,q))ie<L&&0>n(le,te)?(A[K]=le,A[ie]=q,K=ie):(A[K]=te,A[ne]=q,K=ne);else if(ie<L&&0>n(le,q))A[K]=le,A[ie]=q,K=ie;else break e}}return I}function n(A,I){var q=A.sortIndex-I.sortIndex;return q!==0?q:A.id-I.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,x=3,b=!1,j=!1,w=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function P(A){for(var I=s(h);I!==null;){if(I.callback===null)a(h);else if(I.startTime<=A)a(h),I.sortIndex=I.expirationTime,e(f,I);else break;I=s(h)}}function R(A){if(w=!1,P(A),!j)if(s(f)!==null)j=!0,D||(D=!0,B());else{var I=s(h);I!==null&&H(R,I.startTime-A)}}var D=!1,$=-1,k=5,M=-1;function V(){return N?!0:!(t.unstable_now()-M<k)}function Y(){if(N=!1,D){var A=t.unstable_now();M=A;var I=!0;try{e:{j=!1,w&&(w=!1,C($),$=-1),b=!0;var q=x;try{t:{for(P(A),g=s(f);g!==null&&!(g.expirationTime>A&&V());){var K=g.callback;if(typeof K=="function"){g.callback=null,x=g.priorityLevel;var L=K(g.expirationTime<=A);if(A=t.unstable_now(),typeof L=="function"){g.callback=L,P(A),I=!0;break t}g===s(f)&&a(f),P(A)}else a(f);g=s(f)}if(g!==null)I=!0;else{var X=s(h);X!==null&&H(R,X.startTime-A),I=!1}}break e}finally{g=null,x=q,b=!1}I=void 0}}finally{I?B():D=!1}}}var B;if(typeof S=="function")B=function(){S(Y)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=Y,B=function(){Q.postMessage(null)}}else B=function(){E(Y,0)};function H(A,I){$=E(function(){A(t.unstable_now())},I)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(A){switch(x){case 1:case 2:case 3:var I=3;break;default:I=x}var q=x;x=I;try{return A()}finally{x=q}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(A,I){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var q=x;x=A;try{return I()}finally{x=q}},t.unstable_scheduleCallback=function(A,I,q){var K=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?K+q:K):q=K,A){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,A={id:p++,callback:I,priorityLevel:A,startTime:q,expirationTime:L,sortIndex:-1},q>K?(A.sortIndex=q,e(h,A),s(f)===null&&A===s(h)&&(w?(C($),$=-1):w=!0,H(R,q-K))):(A.sortIndex=L,e(f,A),j||b||(j=!0,D||(D=!0,B()))),A},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(A){var I=x;return function(){var q=x;x=I;try{return A.apply(this,arguments)}finally{x=q}}}}(V0)),V0}var Lj;function X3(){return Lj||(Lj=1,B0.exports=G3()),B0.exports}var q0={exports:{}},Xs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ij;function Y3(){if(Ij)return Xs;Ij=1;var t=Pd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Xs.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(f,h,null,p)},Xs.flushSync=function(f){var h=c.T,p=a.p;try{if(c.T=null,a.p=2,f)return f()}finally{c.T=h,a.p=p,a.d.f()}},Xs.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},Xs.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},Xs.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):p==="script"&&a.d.X(f,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xs.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},Xs.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);a.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xs.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},Xs.requestFormReset=function(f){a.d.r(f)},Xs.unstable_batchedUpdates=function(f,h){return f(h)},Xs.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},Xs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Xs.version="19.1.0",Xs}var Bj;function xE(){if(Bj)return q0.exports;Bj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),q0.exports=Y3(),q0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vj;function K3(){if(Vj)return Au;Vj=1;var t=X3(),e=Pd(),s=xE();function a(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function c(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(a(188))}function f(o){var l=o.alternate;if(!l){if(l=i(o),l===null)throw Error(a(188));return l!==o?null:o}for(var d=o,m=l;;){var v=d.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===d)return u(v),o;if(_===m)return u(v),l;_=_.sibling}throw Error(a(188))}if(d.return!==m.return)d=v,m=_;else{for(var T=!1,O=v.child;O;){if(O===d){T=!0,d=v,m=_;break}if(O===m){T=!0,m=v,d=_;break}O=O.sibling}if(!T){for(O=_.child;O;){if(O===d){T=!0,d=_,m=v;break}if(O===m){T=!0,m=_,d=v;break}O=O.sibling}if(!T)throw Error(a(189))}}if(d.alternate!==m)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),S=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case b:return"Portal";case S:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case P:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case $:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var H=Array.isArray,A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},K=[],L=-1;function X(o){return{current:o}}function ne(o){0>L||(o.current=K[L],K[L]=null,L--)}function te(o,l){L++,K[L]=o.current,o.current=l}var ie=X(null),le=X(null),ae=X(null),ue=X(null);function ce(o,l){switch(te(ae,l),te(le,o),te(ie,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?oj(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=oj(l),o=ij(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(ie),te(ie,o)}function we(){ne(ie),ne(le),ne(ae)}function Se(o){o.memoizedState!==null&&te(ue,o);var l=ie.current,d=ij(l,o.type);l!==d&&(te(le,o),te(ie,d))}function je(o){le.current===o&&(ne(ie),ne(le)),ue.current===o&&(ne(ue),ju._currentValue=q)}var Ce=Object.prototype.hasOwnProperty,ve=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,fe=t.unstable_shouldYield,Re=t.unstable_requestPaint,Te=t.unstable_now,et=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,U=t.unstable_UserBlockingPriority,G=t.unstable_NormalPriority,Z=t.unstable_LowPriority,ye=t.unstable_IdlePriority,Ne=t.log,be=t.unstable_setDisableYieldValue,De=null,Xe=null;function ot(o){if(typeof Ne=="function"&&be(o),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(De,o)}catch{}}var wt=Math.clz32?Math.clz32:qa,Fs=Math.log,Hs=Math.LN2;function qa(o){return o>>>=0,o===0?32:31-(Fs(o)/Hs|0)|0}var Na=256,Sa=4194304;function ra(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function na(o,l,d){var m=o.pendingLanes;if(m===0)return 0;var v=0,_=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var O=m&134217727;return O!==0?(m=O&~_,m!==0?v=ra(m):(T&=O,T!==0?v=ra(T):d||(d=O&~o,d!==0&&(v=ra(d))))):(O=m&~_,O!==0?v=ra(O):T!==0?v=ra(T):d||(d=m&~o,d!==0&&(v=ra(d)))),v===0?0:l!==0&&l!==v&&(l&_)===0&&(_=v&-v,d=l&-l,_>=d||_===32&&(d&4194048)!==0)?l:v}function lr(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function fa(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ts(){var o=Na;return Na<<=1,(Na&4194048)===0&&(Na=256),o}function Vi(){var o=Sa;return Sa<<=1,(Sa&62914560)===0&&(Sa=4194304),o}function Os(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function ha(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function cr(o,l,d,m,v,_){var T=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var O=o.entanglements,F=o.expirationTimes,se=o.hiddenUpdates;for(d=T&~d;0<d;){var me=31-wt(d),xe=1<<me;O[me]=0,F[me]=-1;var re=se[me];if(re!==null)for(se[me]=null,me=0;me<re.length;me++){var oe=re[me];oe!==null&&(oe.lane&=-536870913)}d&=~xe}m!==0&&Ze(o,m,0),_!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=_&~(T&~l))}function Ze(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-wt(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|d&4194090}function Bt(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var m=31-wt(d),v=1<<m;v&l|o[m]&l&&(o[m]|=l),d&=~v}}function fs(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function $s(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function zo(){var o=I.p;return o!==0?o:(o=window.event,o===void 0?32:Ej(o.type))}function xs(o,l){var d=I.p;try{return I.p=o,l()}finally{I.p=d}}var ss=Math.random().toString(36).slice(2),as="__reactFiber$"+ss,Vt="__reactProps$"+ss,js="__reactContainer$"+ss,qi="__reactEvents$"+ss,sn="__reactListeners$"+ss,Xb="__reactHandles$"+ss,Yb="__reactResources$"+ss,Dc="__reactMarker$"+ss;function Ap(o){delete o[as],delete o[Vt],delete o[qi],delete o[sn],delete o[Xb]}function Ui(o){var l=o[as];if(l)return l;for(var d=o.parentNode;d;){if(l=d[js]||d[as]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=dj(o);o!==null;){if(d=o[as])return d;o=dj(o)}return l}o=d,d=o.parentNode}return null}function zi(o){if(o=o[as]||o[js]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Oc(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(a(33))}function Fi(o){var l=o[Yb];return l||(l=o[Yb]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ns(o){o[Dc]=!0}var Kb=new Set,Wb={};function Fo(o,l){Hi(o,l),Hi(o+"Capture",l)}function Hi(o,l){for(Wb[o]=l,o=0;o<l.length;o++)Kb.add(l[o])}var RM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zb={},Qb={};function MM(o){return Ce.call(Qb,o)?!0:Ce.call(Zb,o)?!1:RM.test(o)?Qb[o]=!0:(Zb[o]=!0,!1)}function Gd(o,l,d){if(MM(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Xd(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function an(o,l,d,m){if(m===null)o.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+m)}}var Tp,Jb;function Gi(o){if(Tp===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Tp=l&&l[1]||"",Jb=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tp+o+Jb}var Rp=!1;function Mp(o,l){if(!o||Rp)return"";Rp=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(oe){var re=oe}Reflect.construct(o,[],xe)}else{try{xe.call()}catch(oe){re=oe}o.call(xe.prototype)}}else{try{throw Error()}catch(oe){re=oe}(xe=o())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(oe){if(oe&&re&&typeof oe.stack=="string")return[oe.stack,re.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),T=_[0],O=_[1];if(T&&O){var F=T.split(`
`),se=O.split(`
`);for(v=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;if(m===F.length||v===se.length)for(m=F.length-1,v=se.length-1;1<=m&&0<=v&&F[m]!==se[v];)v--;for(;1<=m&&0<=v;m--,v--)if(F[m]!==se[v]){if(m!==1||v!==1)do if(m--,v--,0>v||F[m]!==se[v]){var me=`
`+F[m].replace(" at new "," at ");return o.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",o.displayName)),me}while(1<=m&&0<=v);break}}}finally{Rp=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?Gi(d):""}function PM(o){switch(o.tag){case 26:case 27:case 5:return Gi(o.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return Mp(o.type,!1);case 11:return Mp(o.type.render,!1);case 1:return Mp(o.type,!0);case 31:return Gi("Activity");default:return""}}function e_(o){try{var l="";do l+=PM(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Ua(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function t_(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function DM(o){var l=t_(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,_=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(T){m=""+T,_.call(this,T)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Yd(o){o._valueTracker||(o._valueTracker=DM(o))}function s_(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return o&&(m=t_(o)?o.checked?"true":"false":o.value),o=m,o!==d?(l.setValue(o),!0):!1}function Kd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var OM=/[\n"\\]/g;function za(o){return o.replace(OM,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Pp(o,l,d,m,v,_,T,O){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),l!=null?T==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Ua(l)):o.value!==""+Ua(l)&&(o.value=""+Ua(l)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),l!=null?Dp(o,T,Ua(l)):d!=null?Dp(o,T,Ua(d)):m!=null&&o.removeAttribute("value"),v==null&&_!=null&&(o.defaultChecked=!!_),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.name=""+Ua(O):o.removeAttribute("name")}function a_(o,l,d,m,v,_,T,O){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||d!=null){if(!(_!=="submit"&&_!=="reset"||l!=null))return;d=d!=null?""+Ua(d):"",l=l!=null?""+Ua(l):d,O||l===o.value||(o.value=l),o.defaultValue=l}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=O?o.checked:!!m,o.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T)}function Dp(o,l,d){l==="number"&&Kd(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function Xi(o,l,d,m){if(o=o.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<o.length;d++)v=l.hasOwnProperty("$"+o[d].value),o[d].selected!==v&&(o[d].selected=v),v&&m&&(o[d].defaultSelected=!0)}else{for(d=""+Ua(d),l=null,v=0;v<o.length;v++){if(o[v].value===d){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function r_(o,l,d){if(l!=null&&(l=""+Ua(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+Ua(d):""}function n_(o,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(a(92));if(H(m)){if(1<m.length)throw Error(a(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Ua(l),o.defaultValue=d,m=o.textContent,m===d&&m!==""&&m!==null&&(o.value=m)}function Yi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var $M=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function o_(o,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,d):typeof d!="number"||d===0||$M.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function i_(o,l,d){if(l!=null&&typeof l!="object")throw Error(a(62));if(o=o.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var v in l)m=l[v],l.hasOwnProperty(v)&&d[v]!==m&&o_(o,v,m)}else for(var _ in l)l.hasOwnProperty(_)&&o_(o,_,l[_])}function Op(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),IM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wd(o){return IM.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var $p=null;function Lp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ki=null,Wi=null;function l_(o){var l=zi(o);if(l&&(o=l.stateNode)){var d=o[Vt]||null;e:switch(o=l.stateNode,l.type){case"input":if(Pp(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+za(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==o&&m.form===o.form){var v=m[Vt]||null;if(!v)throw Error(a(90));Pp(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===o.form&&s_(m)}break e;case"textarea":r_(o,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Xi(o,!!d.multiple,l,!1)}}}var Ip=!1;function c_(o,l,d){if(Ip)return o(l,d);Ip=!0;try{var m=o(l);return m}finally{if(Ip=!1,(Ki!==null||Wi!==null)&&($f(),Ki&&(l=Ki,o=Wi,Wi=Ki=null,l_(l),o)))for(l=0;l<o.length;l++)l_(o[l])}}function $c(o,l){var d=o.stateNode;if(d===null)return null;var m=d[Vt]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(a(231,l,typeof d));return d}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bp=!1;if(rn)try{var Lc={};Object.defineProperty(Lc,"passive",{get:function(){Bp=!0}}),window.addEventListener("test",Lc,Lc),window.removeEventListener("test",Lc,Lc)}catch{Bp=!1}var On=null,Vp=null,Zd=null;function u_(){if(Zd)return Zd;var o,l=Vp,d=l.length,m,v="value"in On?On.value:On.textContent,_=v.length;for(o=0;o<d&&l[o]===v[o];o++);var T=d-o;for(m=1;m<=T&&l[d-m]===v[_-m];m++);return Zd=v.slice(o,1<m?1-m:void 0)}function Qd(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Jd(){return!0}function d_(){return!1}function ma(o){function l(d,m,v,_,T){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(d=o[O],this[O]=d?d(_):_[O]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Jd:d_,this.isPropagationStopped=d_,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Jd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Jd)},persist:function(){},isPersistent:Jd}),l}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=ma(Ho),Ic=p({},Ho,{view:0,detail:0}),BM=ma(Ic),qp,Up,Bc,tf=p({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bc&&(Bc&&o.type==="mousemove"?(qp=o.screenX-Bc.screenX,Up=o.screenY-Bc.screenY):Up=qp=0,Bc=o),qp)},movementY:function(o){return"movementY"in o?o.movementY:Up}}),f_=ma(tf),VM=p({},tf,{dataTransfer:0}),qM=ma(VM),UM=p({},Ic,{relatedTarget:0}),zp=ma(UM),zM=p({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),FM=ma(zM),HM=p({},Ho,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),GM=ma(HM),XM=p({},Ho,{data:0}),h_=ma(XM),YM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZM(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=WM[o])?!!l[o]:!1}function Fp(){return ZM}var QM=p({},Ic,{key:function(o){if(o.key){var l=YM[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Qd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?KM[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fp,charCode:function(o){return o.type==="keypress"?Qd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Qd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),JM=ma(QM),e5=p({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m_=ma(e5),t5=p({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fp}),s5=ma(t5),a5=p({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),r5=ma(a5),n5=p({},tf,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),o5=ma(n5),i5=p({},Ho,{newState:0,oldState:0}),l5=ma(i5),c5=[9,13,27,32],Hp=rn&&"CompositionEvent"in window,Vc=null;rn&&"documentMode"in document&&(Vc=document.documentMode);var u5=rn&&"TextEvent"in window&&!Vc,p_=rn&&(!Hp||Vc&&8<Vc&&11>=Vc),g_=" ",x_=!1;function v_(o,l){switch(o){case"keyup":return c5.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zi=!1;function d5(o,l){switch(o){case"compositionend":return y_(l);case"keypress":return l.which!==32?null:(x_=!0,g_);case"textInput":return o=l.data,o===g_&&x_?null:o;default:return null}}function f5(o,l){if(Zi)return o==="compositionend"||!Hp&&v_(o,l)?(o=u_(),Zd=Vp=On=null,Zi=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return p_&&l.locale!=="ko"?null:l.data;default:return null}}var h5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b_(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!h5[o.type]:l==="textarea"}function __(o,l,d,m){Ki?Wi?Wi.push(m):Wi=[m]:Ki=m,l=Uf(l,"onChange"),0<l.length&&(d=new ef("onChange","change",null,d,m),o.push({event:d,listeners:l}))}var qc=null,Uc=null;function m5(o){tj(o,0)}function sf(o){var l=Oc(o);if(s_(l))return o}function w_(o,l){if(o==="change")return l}var j_=!1;if(rn){var Gp;if(rn){var Xp="oninput"in document;if(!Xp){var N_=document.createElement("div");N_.setAttribute("oninput","return;"),Xp=typeof N_.oninput=="function"}Gp=Xp}else Gp=!1;j_=Gp&&(!document.documentMode||9<document.documentMode)}function S_(){qc&&(qc.detachEvent("onpropertychange",E_),Uc=qc=null)}function E_(o){if(o.propertyName==="value"&&sf(Uc)){var l=[];__(l,Uc,o,Lp(o)),c_(m5,l)}}function p5(o,l,d){o==="focusin"?(S_(),qc=l,Uc=d,qc.attachEvent("onpropertychange",E_)):o==="focusout"&&S_()}function g5(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sf(Uc)}function x5(o,l){if(o==="click")return sf(l)}function v5(o,l){if(o==="input"||o==="change")return sf(l)}function y5(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Ea=typeof Object.is=="function"?Object.is:y5;function zc(o,l){if(Ea(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!Ce.call(l,v)||!Ea(o[v],l[v]))return!1}return!0}function C_(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function k_(o,l){var d=C_(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=l&&m>=l)return{node:d,offset:l-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=C_(d)}}function A_(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?A_(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function T_(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Kd(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Kd(o.document)}return l}function Yp(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var b5=rn&&"documentMode"in document&&11>=document.documentMode,Qi=null,Kp=null,Fc=null,Wp=!1;function R_(o,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Wp||Qi==null||Qi!==Kd(m)||(m=Qi,"selectionStart"in m&&Yp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fc&&zc(Fc,m)||(Fc=m,m=Uf(Kp,"onSelect"),0<m.length&&(l=new ef("onSelect","select",null,l,d),o.push({event:l,listeners:m}),l.target=Qi)))}function Go(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Ji={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionrun:Go("Transition","TransitionRun"),transitionstart:Go("Transition","TransitionStart"),transitioncancel:Go("Transition","TransitionCancel"),transitionend:Go("Transition","TransitionEnd")},Zp={},M_={};rn&&(M_=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function Xo(o){if(Zp[o])return Zp[o];if(!Ji[o])return o;var l=Ji[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in M_)return Zp[o]=l[d];return o}var P_=Xo("animationend"),D_=Xo("animationiteration"),O_=Xo("animationstart"),_5=Xo("transitionrun"),w5=Xo("transitionstart"),j5=Xo("transitioncancel"),$_=Xo("transitionend"),L_=new Map,Qp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qp.push("scrollEnd");function ur(o,l){L_.set(o,l),Fo(l,[o])}var I_=new WeakMap;function Fa(o,l){if(typeof o=="object"&&o!==null){var d=I_.get(o);return d!==void 0?d:(l={value:o,source:l,stack:e_(l)},I_.set(o,l),l)}return{value:o,source:l,stack:e_(l)}}var Ha=[],el=0,Jp=0;function af(){for(var o=el,l=Jp=el=0;l<o;){var d=Ha[l];Ha[l++]=null;var m=Ha[l];Ha[l++]=null;var v=Ha[l];Ha[l++]=null;var _=Ha[l];if(Ha[l++]=null,m!==null&&v!==null){var T=m.pending;T===null?v.next=v:(v.next=T.next,T.next=v),m.pending=v}_!==0&&B_(d,v,_)}}function rf(o,l,d,m){Ha[el++]=o,Ha[el++]=l,Ha[el++]=d,Ha[el++]=m,Jp|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function eg(o,l,d,m){return rf(o,l,d,m),nf(o)}function tl(o,l){return rf(o,null,null,l),nf(o)}function B_(o,l,d){o.lanes|=d;var m=o.alternate;m!==null&&(m.lanes|=d);for(var v=!1,_=o.return;_!==null;)_.childLanes|=d,m=_.alternate,m!==null&&(m.childLanes|=d),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(v=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,v&&l!==null&&(v=31-wt(d),o=_.hiddenUpdates,m=o[v],m===null?o[v]=[l]:m.push(l),l.lane=d|536870912),_):null}function nf(o){if(50<pu)throw pu=0,o0=null,Error(a(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var sl={};function N5(o,l,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ca(o,l,d,m){return new N5(o,l,d,m)}function tg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function nn(o,l){var d=o.alternate;return d===null?(d=Ca(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function V_(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function of(o,l,d,m,v,_){var T=0;if(m=o,typeof o=="function")tg(o)&&(T=1);else if(typeof o=="string")T=E3(o,d,ie.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=Ca(31,d,l,v),o.elementType=M,o.lanes=_,o;case j:return Yo(d.children,v,_,l);case w:T=8,v|=24;break;case N:return o=Ca(12,d,l,v|2),o.elementType=N,o.lanes=_,o;case R:return o=Ca(13,d,l,v),o.elementType=R,o.lanes=_,o;case D:return o=Ca(19,d,l,v),o.elementType=D,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case E:case S:T=10;break e;case C:T=9;break e;case P:T=11;break e;case $:T=14;break e;case k:T=16,m=null;break e}T=29,d=Error(a(130,o===null?"null":typeof o,"")),m=null}return l=Ca(T,d,l,v),l.elementType=o,l.type=m,l.lanes=_,l}function Yo(o,l,d,m){return o=Ca(7,o,m,l),o.lanes=d,o}function sg(o,l,d){return o=Ca(6,o,null,l),o.lanes=d,o}function ag(o,l,d){return l=Ca(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var al=[],rl=0,lf=null,cf=0,Ga=[],Xa=0,Ko=null,on=1,ln="";function Wo(o,l){al[rl++]=cf,al[rl++]=lf,lf=o,cf=l}function q_(o,l,d){Ga[Xa++]=on,Ga[Xa++]=ln,Ga[Xa++]=Ko,Ko=o;var m=on;o=ln;var v=32-wt(m)-1;m&=~(1<<v),d+=1;var _=32-wt(l)+v;if(30<_){var T=v-v%5;_=(m&(1<<T)-1).toString(32),m>>=T,v-=T,on=1<<32-wt(l)+v|d<<v|m,ln=_+o}else on=1<<_|d<<v|m,ln=o}function rg(o){o.return!==null&&(Wo(o,1),q_(o,1,0))}function ng(o){for(;o===lf;)lf=al[--rl],al[rl]=null,cf=al[--rl],al[rl]=null;for(;o===Ko;)Ko=Ga[--Xa],Ga[Xa]=null,ln=Ga[--Xa],Ga[Xa]=null,on=Ga[--Xa],Ga[Xa]=null}var oa=null,Qt=null,kt=!1,Zo=null,Mr=!1,og=Error(a(519));function Qo(o){var l=Error(a(418,""));throw Xc(Fa(l,o)),og}function U_(o){var l=o.stateNode,d=o.type,m=o.memoizedProps;switch(l[as]=o,l[Vt]=m,d){case"dialog":xt("cancel",l),xt("close",l);break;case"iframe":case"object":case"embed":xt("load",l);break;case"video":case"audio":for(d=0;d<xu.length;d++)xt(xu[d],l);break;case"source":xt("error",l);break;case"img":case"image":case"link":xt("error",l),xt("load",l);break;case"details":xt("toggle",l);break;case"input":xt("invalid",l),a_(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Yd(l);break;case"select":xt("invalid",l);break;case"textarea":xt("invalid",l),n_(l,m.value,m.defaultValue,m.children),Yd(l)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||nj(l.textContent,d)?(m.popover!=null&&(xt("beforetoggle",l),xt("toggle",l)),m.onScroll!=null&&xt("scroll",l),m.onScrollEnd!=null&&xt("scrollend",l),m.onClick!=null&&(l.onclick=zf),l=!0):l=!1,l||Qo(o)}function z_(o){for(oa=o.return;oa;)switch(oa.tag){case 5:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:oa=oa.return}}function Hc(o){if(o!==oa)return!1;if(!kt)return z_(o),kt=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||w0(o.type,o.memoizedProps)),d=!d),d&&Qt&&Qo(o),z_(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){Qt=fr(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}Qt=null}}else l===27?(l=Qt,Zn(o.type)?(o=E0,E0=null,Qt=o):Qt=l):Qt=oa?fr(o.stateNode.nextSibling):null;return!0}function Gc(){Qt=oa=null,kt=!1}function F_(){var o=Zo;return o!==null&&(xa===null?xa=o:xa.push.apply(xa,o),Zo=null),o}function Xc(o){Zo===null?Zo=[o]:Zo.push(o)}var ig=X(null),Jo=null,cn=null;function $n(o,l,d){te(ig,l._currentValue),l._currentValue=d}function un(o){o._currentValue=ig.current,ne(ig)}function lg(o,l,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===d)break;o=o.return}}function cg(o,l,d,m){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var _=v.dependencies;if(_!==null){var T=v.child;_=_.firstContext;e:for(;_!==null;){var O=_;_=v;for(var F=0;F<l.length;F++)if(O.context===l[F]){_.lanes|=d,O=_.alternate,O!==null&&(O.lanes|=d),lg(_.return,d,o),m||(T=null);break e}_=O.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(a(341));T.lanes|=d,_=T.alternate,_!==null&&(_.lanes|=d),lg(T,d,o),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Yc(o,l,d,m){o=null;for(var v=l,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var O=v.type;Ea(v.pendingProps.value,T.value)||(o!==null?o.push(O):o=[O])}}else if(v===ue.current){if(T=v.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(ju):o=[ju])}v=v.return}o!==null&&cg(l,o,d,m),l.flags|=262144}function uf(o){for(o=o.firstContext;o!==null;){if(!Ea(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ei(o){Jo=o,cn=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Gs(o){return H_(Jo,o)}function df(o,l){return Jo===null&&ei(o),H_(o,l)}function H_(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},cn===null){if(o===null)throw Error(a(308));cn=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else cn=cn.next=l;return d}var S5=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},E5=t.unstable_scheduleCallback,C5=t.unstable_NormalPriority,vs={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ug(){return{controller:new S5,data:new Map,refCount:0}}function Kc(o){o.refCount--,o.refCount===0&&E5(C5,function(){o.controller.abort()})}var Wc=null,dg=0,nl=0,ol=null;function k5(o,l){if(Wc===null){var d=Wc=[];dg=0,nl=h0(),ol={status:"pending",value:void 0,then:function(m){d.push(m)}}}return dg++,l.then(G_,G_),l}function G_(){if(--dg===0&&Wc!==null){ol!==null&&(ol.status="fulfilled");var o=Wc;Wc=null,nl=0,ol=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function A5(o,l){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var X_=A.S;A.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&k5(o,l),X_!==null&&X_(o,l)};var ti=X(null);function fg(){var o=ti.current;return o!==null?o:qt.pooledCache}function ff(o,l){l===null?te(ti,ti.current):te(ti,l.pool)}function Y_(){var o=fg();return o===null?null:{parent:vs._currentValue,pool:o}}var Zc=Error(a(460)),K_=Error(a(474)),hf=Error(a(542)),hg={then:function(){}};function W_(o){return o=o.status,o==="fulfilled"||o==="rejected"}function mf(){}function Z_(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(mf,mf),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,J_(o),o;default:if(typeof l.status=="string")l.then(mf,mf);else{if(o=qt,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=m}},function(m){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,J_(o),o}throw Qc=l,Zc}}var Qc=null;function Q_(){if(Qc===null)throw Error(a(459));var o=Qc;return Qc=null,o}function J_(o){if(o===Zc||o===hf)throw Error(a(483))}var Ln=!1;function mg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pg(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function In(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bn(o,l,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Rt&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,l=nf(o),B_(o,null,d),l}return rf(o,m,l,d),nf(o)}function Jc(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,Bt(o,d)}}function gg(o,l){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};_===null?v=_=T:_=_.next=T,d=d.next}while(d!==null);_===null?v=_=l:_=_.next=l}else v=_=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var xg=!1;function eu(){if(xg){var o=ol;if(o!==null)throw o}}function tu(o,l,d,m){xg=!1;var v=o.updateQueue;Ln=!1;var _=v.firstBaseUpdate,T=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var F=O,se=F.next;F.next=null,T===null?_=se:T.next=se,T=F;var me=o.alternate;me!==null&&(me=me.updateQueue,O=me.lastBaseUpdate,O!==T&&(O===null?me.firstBaseUpdate=se:O.next=se,me.lastBaseUpdate=F))}if(_!==null){var xe=v.baseState;T=0,me=se=F=null,O=_;do{var re=O.lane&-536870913,oe=re!==O.lane;if(oe?(bt&re)===re:(m&re)===re){re!==0&&re===nl&&(xg=!0),me!==null&&(me=me.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Qe=o,Ye=O;re=l;var $t=d;switch(Ye.tag){case 1:if(Qe=Ye.payload,typeof Qe=="function"){xe=Qe.call($t,xe,re);break e}xe=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Ye.payload,re=typeof Qe=="function"?Qe.call($t,xe,re):Qe,re==null)break e;xe=p({},xe,re);break e;case 2:Ln=!0}}re=O.callback,re!==null&&(o.flags|=64,oe&&(o.flags|=8192),oe=v.callbacks,oe===null?v.callbacks=[re]:oe.push(re))}else oe={lane:re,tag:O.tag,payload:O.payload,callback:O.callback,next:null},me===null?(se=me=oe,F=xe):me=me.next=oe,T|=re;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;oe=O,O=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);me===null&&(F=xe),v.baseState=F,v.firstBaseUpdate=se,v.lastBaseUpdate=me,_===null&&(v.shared.lanes=0),Xn|=T,o.lanes=T,o.memoizedState=xe}}function ew(o,l){if(typeof o!="function")throw Error(a(191,o));o.call(l)}function tw(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)ew(d[o],l)}var il=X(null),pf=X(0);function sw(o,l){o=xn,te(pf,o),te(il,l),xn=o|l.baseLanes}function vg(){te(pf,xn),te(il,il.current)}function yg(){xn=pf.current,ne(il),ne(pf)}var Vn=0,ct=null,Dt=null,hs=null,gf=!1,ll=!1,si=!1,xf=0,su=0,cl=null,T5=0;function rs(){throw Error(a(321))}function bg(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Ea(o[d],l[d]))return!1;return!0}function _g(o,l,d,m,v,_){return Vn=_,ct=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,A.H=o===null||o.memoizedState===null?Bw:Vw,si=!1,_=d(m,v),si=!1,ll&&(_=rw(l,d,m,v)),aw(o),_}function aw(o){A.H=jf;var l=Dt!==null&&Dt.next!==null;if(Vn=0,hs=Dt=ct=null,gf=!1,su=0,cl=null,l)throw Error(a(300));o===null||Ss||(o=o.dependencies,o!==null&&uf(o)&&(Ss=!0))}function rw(o,l,d,m){ct=o;var v=0;do{if(ll&&(cl=null),su=0,ll=!1,25<=v)throw Error(a(301));if(v+=1,hs=Dt=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}A.H=L5,_=l(d,m)}while(ll);return _}function R5(){var o=A.H,l=o.useState()[0];return l=typeof l.then=="function"?au(l):l,o=o.useState()[0],(Dt!==null?Dt.memoizedState:null)!==o&&(ct.flags|=1024),l}function wg(){var o=xf!==0;return xf=0,o}function jg(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function Ng(o){if(gf){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}gf=!1}Vn=0,hs=Dt=ct=null,ll=!1,su=xf=0,cl=null}function pa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?ct.memoizedState=hs=o:hs=hs.next=o,hs}function ms(){if(Dt===null){var o=ct.alternate;o=o!==null?o.memoizedState:null}else o=Dt.next;var l=hs===null?ct.memoizedState:hs.next;if(l!==null)hs=l,Dt=o;else{if(o===null)throw ct.alternate===null?Error(a(467)):Error(a(310));Dt=o,o={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},hs===null?ct.memoizedState=hs=o:hs=hs.next=o}return hs}function Sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(o){var l=su;return su+=1,cl===null&&(cl=[]),o=Z_(cl,o,l),l=ct,(hs===null?l.memoizedState:hs.next)===null&&(l=l.alternate,A.H=l===null||l.memoizedState===null?Bw:Vw),o}function vf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return au(o);if(o.$$typeof===S)return Gs(o)}throw Error(a(438,String(o)))}function Eg(o){var l=null,d=ct.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=ct.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Sg(),ct.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),m=0;m<o;m++)d[m]=V;return l.index++,d}function dn(o,l){return typeof l=="function"?l(o):l}function yf(o){var l=ms();return Cg(l,Dt,o)}function Cg(o,l,d){var m=o.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=d;var v=o.baseQueue,_=m.pending;if(_!==null){if(v!==null){var T=v.next;v.next=_.next,_.next=T}l.baseQueue=v=_,m.pending=null}if(_=o.baseState,v===null)o.memoizedState=_;else{l=v.next;var O=T=null,F=null,se=l,me=!1;do{var xe=se.lane&-536870913;if(xe!==se.lane?(bt&xe)===xe:(Vn&xe)===xe){var re=se.revertLane;if(re===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),xe===nl&&(me=!0);else if((Vn&re)===re){se=se.next,re===nl&&(me=!0);continue}else xe={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},F===null?(O=F=xe,T=_):F=F.next=xe,ct.lanes|=re,Xn|=re;xe=se.action,si&&d(_,xe),_=se.hasEagerState?se.eagerState:d(_,xe)}else re={lane:xe,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},F===null?(O=F=re,T=_):F=F.next=re,ct.lanes|=xe,Xn|=xe;se=se.next}while(se!==null&&se!==l);if(F===null?T=_:F.next=O,!Ea(_,o.memoizedState)&&(Ss=!0,me&&(d=ol,d!==null)))throw d;o.memoizedState=_,o.baseState=T,o.baseQueue=F,m.lastRenderedState=_}return v===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function kg(o){var l=ms(),d=l.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=o;var m=d.dispatch,v=d.pending,_=l.memoizedState;if(v!==null){d.pending=null;var T=v=v.next;do _=o(_,T.action),T=T.next;while(T!==v);Ea(_,l.memoizedState)||(Ss=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),d.lastRenderedState=_}return[_,m]}function nw(o,l,d){var m=ct,v=ms(),_=kt;if(_){if(d===void 0)throw Error(a(407));d=d()}else d=l();var T=!Ea((Dt||v).memoizedState,d);T&&(v.memoizedState=d,Ss=!0),v=v.queue;var O=lw.bind(null,m,v,o);if(ru(2048,8,O,[o]),v.getSnapshot!==l||T||hs!==null&&hs.memoizedState.tag&1){if(m.flags|=2048,ul(9,bf(),iw.bind(null,m,v,d,l),null),qt===null)throw Error(a(349));_||(Vn&124)!==0||ow(m,l,d)}return d}function ow(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=ct.updateQueue,l===null?(l=Sg(),ct.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function iw(o,l,d,m){l.value=d,l.getSnapshot=m,cw(l)&&uw(o)}function lw(o,l,d){return d(function(){cw(l)&&uw(o)})}function cw(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Ea(o,d)}catch{return!0}}function uw(o){var l=tl(o,2);l!==null&&Ma(l,o,2)}function Ag(o){var l=pa();if(typeof o=="function"){var d=o;if(o=d(),si){ot(!0);try{d()}finally{ot(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:o},l}function dw(o,l,d,m){return o.baseState=d,Cg(o,Dt,typeof m=="function"?m:dn)}function M5(o,l,d,m,v){if(wf(o))throw Error(a(485));if(o=l.action,o!==null){var _={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};A.T!==null?d(!0):_.isTransition=!1,m(_),d=l.pending,d===null?(_.next=l.pending=_,fw(l,_)):(_.next=d.next,l.pending=d.next=_)}}function fw(o,l){var d=l.action,m=l.payload,v=o.state;if(l.isTransition){var _=A.T,T={};A.T=T;try{var O=d(v,m),F=A.S;F!==null&&F(T,O),hw(o,l,O)}catch(se){Tg(o,l,se)}finally{A.T=_}}else try{_=d(v,m),hw(o,l,_)}catch(se){Tg(o,l,se)}}function hw(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){mw(o,l,m)},function(m){return Tg(o,l,m)}):mw(o,l,d)}function mw(o,l,d){l.status="fulfilled",l.value=d,pw(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,fw(o,d)))}function Tg(o,l,d){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,pw(l),l=l.next;while(l!==m)}o.action=null}function pw(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function gw(o,l){return l}function xw(o,l){if(kt){var d=qt.formState;if(d!==null){e:{var m=ct;if(kt){if(Qt){t:{for(var v=Qt,_=Mr;v.nodeType!==8;){if(!_){v=null;break t}if(v=fr(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Qt=fr(v.nextSibling),m=v.data==="F!";break e}}Qo(m)}m=!1}m&&(l=d[0])}}return d=pa(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gw,lastRenderedState:l},d.queue=m,d=$w.bind(null,ct,m),m.dispatch=d,m=Ag(!1),_=Og.bind(null,ct,!1,m.queue),m=pa(),v={state:l,dispatch:null,action:o,pending:null},m.queue=v,d=M5.bind(null,ct,v,_,d),v.dispatch=d,m.memoizedState=o,[l,d,!1]}function vw(o){var l=ms();return yw(l,Dt,o)}function yw(o,l,d){if(l=Cg(o,l,gw)[0],o=yf(dn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=au(l)}catch(T){throw T===Zc?hf:T}else m=l;l=ms();var v=l.queue,_=v.dispatch;return d!==l.memoizedState&&(ct.flags|=2048,ul(9,bf(),P5.bind(null,v,d),null)),[m,_,o]}function P5(o,l){o.action=l}function bw(o){var l=ms(),d=Dt;if(d!==null)return yw(l,d,o);ms(),l=l.memoizedState,d=ms();var m=d.queue.dispatch;return d.memoizedState=o,[l,m,!1]}function ul(o,l,d,m){return o={tag:o,create:d,deps:m,inst:l,next:null},l=ct.updateQueue,l===null&&(l=Sg(),ct.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,l.lastEffect=o),o}function bf(){return{destroy:void 0,resource:void 0}}function _w(){return ms().memoizedState}function _f(o,l,d,m){var v=pa();m=m===void 0?null:m,ct.flags|=o,v.memoizedState=ul(1|l,bf(),d,m)}function ru(o,l,d,m){var v=ms();m=m===void 0?null:m;var _=v.memoizedState.inst;Dt!==null&&m!==null&&bg(m,Dt.memoizedState.deps)?v.memoizedState=ul(l,_,d,m):(ct.flags|=o,v.memoizedState=ul(1|l,_,d,m))}function ww(o,l){_f(8390656,8,o,l)}function jw(o,l){ru(2048,8,o,l)}function Nw(o,l){return ru(4,2,o,l)}function Sw(o,l){return ru(4,4,o,l)}function Ew(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function Cw(o,l,d){d=d!=null?d.concat([o]):null,ru(4,4,Ew.bind(null,l,o),d)}function Rg(){}function kw(o,l){var d=ms();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&bg(l,m[1])?m[0]:(d.memoizedState=[o,l],o)}function Aw(o,l){var d=ms();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&bg(l,m[1]))return m[0];if(m=o(),si){ot(!0);try{o()}finally{ot(!1)}}return d.memoizedState=[m,l],m}function Mg(o,l,d){return d===void 0||(Vn&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=M1(),ct.lanes|=o,Xn|=o,d)}function Tw(o,l,d,m){return Ea(d,l)?d:il.current!==null?(o=Mg(o,d,m),Ea(o,l)||(Ss=!0),o):(Vn&42)===0?(Ss=!0,o.memoizedState=d):(o=M1(),ct.lanes|=o,Xn|=o,l)}function Rw(o,l,d,m,v){var _=I.p;I.p=_!==0&&8>_?_:8;var T=A.T,O={};A.T=O,Og(o,!1,l,d);try{var F=v(),se=A.S;if(se!==null&&se(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var me=A5(F,m);nu(o,l,me,Ra(o))}else nu(o,l,m,Ra(o))}catch(xe){nu(o,l,{then:function(){},status:"rejected",reason:xe},Ra())}finally{I.p=_,A.T=T}}function D5(){}function Pg(o,l,d,m){if(o.tag!==5)throw Error(a(476));var v=Mw(o).queue;Rw(o,v,l,q,d===null?D5:function(){return Pw(o),d(m)})}function Mw(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:q},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dn,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function Pw(o){var l=Mw(o).next.queue;nu(o,l,{},Ra())}function Dg(){return Gs(ju)}function Dw(){return ms().memoizedState}function Ow(){return ms().memoizedState}function O5(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=Ra();o=In(d);var m=Bn(l,o,d);m!==null&&(Ma(m,l,d),Jc(m,l,d)),l={cache:ug()},o.payload=l;return}l=l.return}}function $5(o,l,d){var m=Ra();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},wf(o)?Lw(l,d):(d=eg(o,l,d,m),d!==null&&(Ma(d,o,m),Iw(d,l,m)))}function $w(o,l,d){var m=Ra();nu(o,l,d,m)}function nu(o,l,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(wf(o))Lw(l,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var T=l.lastRenderedState,O=_(T,d);if(v.hasEagerState=!0,v.eagerState=O,Ea(O,T))return rf(o,l,v,0),qt===null&&af(),!1}catch{}finally{}if(d=eg(o,l,v,m),d!==null)return Ma(d,o,m),Iw(d,l,m),!0}return!1}function Og(o,l,d,m){if(m={lane:2,revertLane:h0(),action:m,hasEagerState:!1,eagerState:null,next:null},wf(o)){if(l)throw Error(a(479))}else l=eg(o,d,m,2),l!==null&&Ma(l,o,2)}function wf(o){var l=o.alternate;return o===ct||l!==null&&l===ct}function Lw(o,l){ll=gf=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function Iw(o,l,d){if((d&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,Bt(o,d)}}var jf={readContext:Gs,use:vf,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useLayoutEffect:rs,useInsertionEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useSyncExternalStore:rs,useId:rs,useHostTransitionStatus:rs,useFormState:rs,useActionState:rs,useOptimistic:rs,useMemoCache:rs,useCacheRefresh:rs},Bw={readContext:Gs,use:vf,useCallback:function(o,l){return pa().memoizedState=[o,l===void 0?null:l],o},useContext:Gs,useEffect:ww,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,_f(4194308,4,Ew.bind(null,l,o),d)},useLayoutEffect:function(o,l){return _f(4194308,4,o,l)},useInsertionEffect:function(o,l){_f(4,2,o,l)},useMemo:function(o,l){var d=pa();l=l===void 0?null:l;var m=o();if(si){ot(!0);try{o()}finally{ot(!1)}}return d.memoizedState=[m,l],m},useReducer:function(o,l,d){var m=pa();if(d!==void 0){var v=d(l);if(si){ot(!0);try{d(l)}finally{ot(!1)}}}else v=l;return m.memoizedState=m.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},m.queue=o,o=o.dispatch=$5.bind(null,ct,o),[m.memoizedState,o]},useRef:function(o){var l=pa();return o={current:o},l.memoizedState=o},useState:function(o){o=Ag(o);var l=o.queue,d=$w.bind(null,ct,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:Rg,useDeferredValue:function(o,l){var d=pa();return Mg(d,o,l)},useTransition:function(){var o=Ag(!1);return o=Rw.bind(null,ct,o.queue,!0,!1),pa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var m=ct,v=pa();if(kt){if(d===void 0)throw Error(a(407));d=d()}else{if(d=l(),qt===null)throw Error(a(349));(bt&124)!==0||ow(m,l,d)}v.memoizedState=d;var _={value:d,getSnapshot:l};return v.queue=_,ww(lw.bind(null,m,_,o),[o]),m.flags|=2048,ul(9,bf(),iw.bind(null,m,_,d,l),null),d},useId:function(){var o=pa(),l=qt.identifierPrefix;if(kt){var d=ln,m=on;d=(m&~(1<<32-wt(m)-1)).toString(32)+d,l="«"+l+"R"+d,d=xf++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=T5++,l="«"+l+"r"+d.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:Dg,useFormState:xw,useActionState:xw,useOptimistic:function(o){var l=pa();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Og.bind(null,ct,!0,d),d.dispatch=l,[o,l]},useMemoCache:Eg,useCacheRefresh:function(){return pa().memoizedState=O5.bind(null,ct)}},Vw={readContext:Gs,use:vf,useCallback:kw,useContext:Gs,useEffect:jw,useImperativeHandle:Cw,useInsertionEffect:Nw,useLayoutEffect:Sw,useMemo:Aw,useReducer:yf,useRef:_w,useState:function(){return yf(dn)},useDebugValue:Rg,useDeferredValue:function(o,l){var d=ms();return Tw(d,Dt.memoizedState,o,l)},useTransition:function(){var o=yf(dn)[0],l=ms().memoizedState;return[typeof o=="boolean"?o:au(o),l]},useSyncExternalStore:nw,useId:Dw,useHostTransitionStatus:Dg,useFormState:vw,useActionState:vw,useOptimistic:function(o,l){var d=ms();return dw(d,Dt,o,l)},useMemoCache:Eg,useCacheRefresh:Ow},L5={readContext:Gs,use:vf,useCallback:kw,useContext:Gs,useEffect:jw,useImperativeHandle:Cw,useInsertionEffect:Nw,useLayoutEffect:Sw,useMemo:Aw,useReducer:kg,useRef:_w,useState:function(){return kg(dn)},useDebugValue:Rg,useDeferredValue:function(o,l){var d=ms();return Dt===null?Mg(d,o,l):Tw(d,Dt.memoizedState,o,l)},useTransition:function(){var o=kg(dn)[0],l=ms().memoizedState;return[typeof o=="boolean"?o:au(o),l]},useSyncExternalStore:nw,useId:Dw,useHostTransitionStatus:Dg,useFormState:bw,useActionState:bw,useOptimistic:function(o,l){var d=ms();return Dt!==null?dw(d,Dt,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:Eg,useCacheRefresh:Ow},dl=null,ou=0;function Nf(o){var l=ou;return ou+=1,dl===null&&(dl=[]),Z_(dl,o,l)}function iu(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Sf(o,l){throw l.$$typeof===g?Error(a(525)):(o=Object.prototype.toString.call(l),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function qw(o){var l=o._init;return l(o._payload)}function Uw(o){function l(J,W){if(o){var ee=J.deletions;ee===null?(J.deletions=[W],J.flags|=16):ee.push(W)}}function d(J,W){if(!o)return null;for(;W!==null;)l(J,W),W=W.sibling;return null}function m(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function v(J,W){return J=nn(J,W),J.index=0,J.sibling=null,J}function _(J,W,ee){return J.index=ee,o?(ee=J.alternate,ee!==null?(ee=ee.index,ee<W?(J.flags|=67108866,W):ee):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function T(J){return o&&J.alternate===null&&(J.flags|=67108866),J}function O(J,W,ee,ge){return W===null||W.tag!==6?(W=sg(ee,J.mode,ge),W.return=J,W):(W=v(W,ee),W.return=J,W)}function F(J,W,ee,ge){var Le=ee.type;return Le===j?me(J,W,ee.props.children,ge,ee.key):W!==null&&(W.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===k&&qw(Le)===W.type)?(W=v(W,ee.props),iu(W,ee),W.return=J,W):(W=of(ee.type,ee.key,ee.props,null,J.mode,ge),iu(W,ee),W.return=J,W)}function se(J,W,ee,ge){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=ag(ee,J.mode,ge),W.return=J,W):(W=v(W,ee.children||[]),W.return=J,W)}function me(J,W,ee,ge,Le){return W===null||W.tag!==7?(W=Yo(ee,J.mode,ge,Le),W.return=J,W):(W=v(W,ee),W.return=J,W)}function xe(J,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=sg(""+W,J.mode,ee),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return ee=of(W.type,W.key,W.props,null,J.mode,ee),iu(ee,W),ee.return=J,ee;case b:return W=ag(W,J.mode,ee),W.return=J,W;case k:var ge=W._init;return W=ge(W._payload),xe(J,W,ee)}if(H(W)||B(W))return W=Yo(W,J.mode,ee,null),W.return=J,W;if(typeof W.then=="function")return xe(J,Nf(W),ee);if(W.$$typeof===S)return xe(J,df(J,W),ee);Sf(J,W)}return null}function re(J,W,ee,ge){var Le=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Le!==null?null:O(J,W,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:return ee.key===Le?F(J,W,ee,ge):null;case b:return ee.key===Le?se(J,W,ee,ge):null;case k:return Le=ee._init,ee=Le(ee._payload),re(J,W,ee,ge)}if(H(ee)||B(ee))return Le!==null?null:me(J,W,ee,ge,null);if(typeof ee.then=="function")return re(J,W,Nf(ee),ge);if(ee.$$typeof===S)return re(J,W,df(J,ee),ge);Sf(J,ee)}return null}function oe(J,W,ee,ge,Le){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return J=J.get(ee)||null,O(W,J,""+ge,Le);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case x:return J=J.get(ge.key===null?ee:ge.key)||null,F(W,J,ge,Le);case b:return J=J.get(ge.key===null?ee:ge.key)||null,se(W,J,ge,Le);case k:var ht=ge._init;return ge=ht(ge._payload),oe(J,W,ee,ge,Le)}if(H(ge)||B(ge))return J=J.get(ee)||null,me(W,J,ge,Le,null);if(typeof ge.then=="function")return oe(J,W,ee,Nf(ge),Le);if(ge.$$typeof===S)return oe(J,W,ee,df(W,ge),Le);Sf(W,ge)}return null}function Qe(J,W,ee,ge){for(var Le=null,ht=null,Fe=W,Ke=W=0,Cs=null;Fe!==null&&Ke<ee.length;Ke++){Fe.index>Ke?(Cs=Fe,Fe=null):Cs=Fe.sibling;var St=re(J,Fe,ee[Ke],ge);if(St===null){Fe===null&&(Fe=Cs);break}o&&Fe&&St.alternate===null&&l(J,Fe),W=_(St,W,Ke),ht===null?Le=St:ht.sibling=St,ht=St,Fe=Cs}if(Ke===ee.length)return d(J,Fe),kt&&Wo(J,Ke),Le;if(Fe===null){for(;Ke<ee.length;Ke++)Fe=xe(J,ee[Ke],ge),Fe!==null&&(W=_(Fe,W,Ke),ht===null?Le=Fe:ht.sibling=Fe,ht=Fe);return kt&&Wo(J,Ke),Le}for(Fe=m(Fe);Ke<ee.length;Ke++)Cs=oe(Fe,J,Ke,ee[Ke],ge),Cs!==null&&(o&&Cs.alternate!==null&&Fe.delete(Cs.key===null?Ke:Cs.key),W=_(Cs,W,Ke),ht===null?Le=Cs:ht.sibling=Cs,ht=Cs);return o&&Fe.forEach(function(so){return l(J,so)}),kt&&Wo(J,Ke),Le}function Ye(J,W,ee,ge){if(ee==null)throw Error(a(151));for(var Le=null,ht=null,Fe=W,Ke=W=0,Cs=null,St=ee.next();Fe!==null&&!St.done;Ke++,St=ee.next()){Fe.index>Ke?(Cs=Fe,Fe=null):Cs=Fe.sibling;var so=re(J,Fe,St.value,ge);if(so===null){Fe===null&&(Fe=Cs);break}o&&Fe&&so.alternate===null&&l(J,Fe),W=_(so,W,Ke),ht===null?Le=so:ht.sibling=so,ht=so,Fe=Cs}if(St.done)return d(J,Fe),kt&&Wo(J,Ke),Le;if(Fe===null){for(;!St.done;Ke++,St=ee.next())St=xe(J,St.value,ge),St!==null&&(W=_(St,W,Ke),ht===null?Le=St:ht.sibling=St,ht=St);return kt&&Wo(J,Ke),Le}for(Fe=m(Fe);!St.done;Ke++,St=ee.next())St=oe(Fe,J,Ke,St.value,ge),St!==null&&(o&&St.alternate!==null&&Fe.delete(St.key===null?Ke:St.key),W=_(St,W,Ke),ht===null?Le=St:ht.sibling=St,ht=St);return o&&Fe.forEach(function(I3){return l(J,I3)}),kt&&Wo(J,Ke),Le}function $t(J,W,ee,ge){if(typeof ee=="object"&&ee!==null&&ee.type===j&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case x:e:{for(var Le=ee.key;W!==null;){if(W.key===Le){if(Le=ee.type,Le===j){if(W.tag===7){d(J,W.sibling),ge=v(W,ee.props.children),ge.return=J,J=ge;break e}}else if(W.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===k&&qw(Le)===W.type){d(J,W.sibling),ge=v(W,ee.props),iu(ge,ee),ge.return=J,J=ge;break e}d(J,W);break}else l(J,W);W=W.sibling}ee.type===j?(ge=Yo(ee.props.children,J.mode,ge,ee.key),ge.return=J,J=ge):(ge=of(ee.type,ee.key,ee.props,null,J.mode,ge),iu(ge,ee),ge.return=J,J=ge)}return T(J);case b:e:{for(Le=ee.key;W!==null;){if(W.key===Le)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){d(J,W.sibling),ge=v(W,ee.children||[]),ge.return=J,J=ge;break e}else{d(J,W);break}else l(J,W);W=W.sibling}ge=ag(ee,J.mode,ge),ge.return=J,J=ge}return T(J);case k:return Le=ee._init,ee=Le(ee._payload),$t(J,W,ee,ge)}if(H(ee))return Qe(J,W,ee,ge);if(B(ee)){if(Le=B(ee),typeof Le!="function")throw Error(a(150));return ee=Le.call(ee),Ye(J,W,ee,ge)}if(typeof ee.then=="function")return $t(J,W,Nf(ee),ge);if(ee.$$typeof===S)return $t(J,W,df(J,ee),ge);Sf(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(d(J,W.sibling),ge=v(W,ee),ge.return=J,J=ge):(d(J,W),ge=sg(ee,J.mode,ge),ge.return=J,J=ge),T(J)):d(J,W)}return function(J,W,ee,ge){try{ou=0;var Le=$t(J,W,ee,ge);return dl=null,Le}catch(Fe){if(Fe===Zc||Fe===hf)throw Fe;var ht=Ca(29,Fe,null,J.mode);return ht.lanes=ge,ht.return=J,ht}finally{}}}var fl=Uw(!0),zw=Uw(!1),Ya=X(null),Pr=null;function qn(o){var l=o.alternate;te(ys,ys.current&1),te(Ya,o),Pr===null&&(l===null||il.current!==null||l.memoizedState!==null)&&(Pr=o)}function Fw(o){if(o.tag===22){if(te(ys,ys.current),te(Ya,o),Pr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Pr=o)}}else Un()}function Un(){te(ys,ys.current),te(Ya,Ya.current)}function fn(o){ne(Ya),Pr===o&&(Pr=null),ne(ys)}var ys=X(0);function Ef(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||S0(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function $g(o,l,d,m){l=o.memoizedState,d=d(m,l),d=d==null?l:p({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Lg={enqueueSetState:function(o,l,d){o=o._reactInternals;var m=Ra(),v=In(m);v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Ma(l,o,m),Jc(l,o,m))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var m=Ra(),v=In(m);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Ma(l,o,m),Jc(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Ra(),m=In(d);m.tag=2,l!=null&&(m.callback=l),l=Bn(o,m,d),l!==null&&(Ma(l,o,d),Jc(l,o,d))}};function Hw(o,l,d,m,v,_,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,_,T):l.prototype&&l.prototype.isPureReactComponent?!zc(d,m)||!zc(v,_):!0}function Gw(o,l,d,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==o&&Lg.enqueueReplaceState(l,l.state,null)}function ai(o,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(o=o.defaultProps){d===l&&(d=p({},d));for(var v in o)d[v]===void 0&&(d[v]=o[v])}return d}var Cf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Xw(o){Cf(o)}function Yw(o){console.error(o)}function Kw(o){Cf(o)}function kf(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Ww(o,l,d){try{var m=o.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ig(o,l,d){return d=In(d),d.tag=3,d.payload={element:null},d.callback=function(){kf(o,l)},d}function Zw(o){return o=In(o),o.tag=3,o}function Qw(o,l,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var _=m.value;o.payload=function(){return v(_)},o.callback=function(){Ww(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){Ww(l,d,m),typeof v!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function I5(o,l,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&Yc(l,d,v,!0),d=Ya.current,d!==null){switch(d.tag){case 13:return Pr===null?l0():d.alternate===null&&Jt===0&&(Jt=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===hg?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),u0(o,m,v)),!1;case 22:return d.flags|=65536,m===hg?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),u0(o,m,v)),!1}throw Error(a(435,d.tag))}return u0(o,m,v),l0(),!1}if(kt)return l=Ya.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,m!==og&&(o=Error(a(422),{cause:m}),Xc(Fa(o,d)))):(m!==og&&(l=Error(a(423),{cause:m}),Xc(Fa(l,d))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,m=Fa(m,d),v=Ig(o.stateNode,m,v),gg(o,v),Jt!==4&&(Jt=2)),!1;var _=Error(a(520),{cause:m});if(_=Fa(_,d),mu===null?mu=[_]:mu.push(_),Jt!==4&&(Jt=2),l===null)return!0;m=Fa(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=v&-v,d.lanes|=o,o=Ig(d.stateNode,m,o),gg(d,o),!1;case 1:if(l=d.type,_=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Yn===null||!Yn.has(_))))return d.flags|=65536,v&=-v,d.lanes|=v,v=Zw(v),Qw(v,o,d,m),gg(d,v),!1}d=d.return}while(d!==null);return!1}var Jw=Error(a(461)),Ss=!1;function Ls(o,l,d,m){l.child=o===null?zw(l,null,d,m):fl(l,o.child,d,m)}function e1(o,l,d,m,v){d=d.render;var _=l.ref;if("ref"in m){var T={};for(var O in m)O!=="ref"&&(T[O]=m[O])}else T=m;return ei(l),m=_g(o,l,d,T,_,v),O=wg(),o!==null&&!Ss?(jg(o,l,v),hn(o,l,v)):(kt&&O&&rg(l),l.flags|=1,Ls(o,l,m,v),l.child)}function t1(o,l,d,m,v){if(o===null){var _=d.type;return typeof _=="function"&&!tg(_)&&_.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=_,s1(o,l,_,m,v)):(o=of(d.type,null,m,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!Gg(o,v)){var T=_.memoizedProps;if(d=d.compare,d=d!==null?d:zc,d(T,m)&&o.ref===l.ref)return hn(o,l,v)}return l.flags|=1,o=nn(_,m),o.ref=l.ref,o.return=l,l.child=o}function s1(o,l,d,m,v){if(o!==null){var _=o.memoizedProps;if(zc(_,m)&&o.ref===l.ref)if(Ss=!1,l.pendingProps=m=_,Gg(o,v))(o.flags&131072)!==0&&(Ss=!0);else return l.lanes=o.lanes,hn(o,l,v)}return Bg(o,l,d,m,v)}function a1(o,l,d){var m=l.pendingProps,v=m.children,_=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=_!==null?_.baseLanes|d:d,o!==null){for(v=l.child=o.child,_=0;v!==null;)_=_|v.lanes|v.childLanes,v=v.sibling;l.childLanes=_&~m}else l.childLanes=0,l.child=null;return r1(o,l,m,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&ff(l,_!==null?_.cachePool:null),_!==null?sw(l,_):vg(),Fw(l);else return l.lanes=l.childLanes=536870912,r1(o,l,_!==null?_.baseLanes|d:d,d)}else _!==null?(ff(l,_.cachePool),sw(l,_),Un(),l.memoizedState=null):(o!==null&&ff(l,null),vg(),Un());return Ls(o,l,v,d),l.child}function r1(o,l,d,m){var v=fg();return v=v===null?null:{parent:vs._currentValue,pool:v},l.memoizedState={baseLanes:d,cachePool:v},o!==null&&ff(l,null),vg(),Fw(l),o!==null&&Yc(o,l,m,!0),null}function Af(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(a(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function Bg(o,l,d,m,v){return ei(l),d=_g(o,l,d,m,void 0,v),m=wg(),o!==null&&!Ss?(jg(o,l,v),hn(o,l,v)):(kt&&m&&rg(l),l.flags|=1,Ls(o,l,d,v),l.child)}function n1(o,l,d,m,v,_){return ei(l),l.updateQueue=null,d=rw(l,m,d,v),aw(o),m=wg(),o!==null&&!Ss?(jg(o,l,_),hn(o,l,_)):(kt&&m&&rg(l),l.flags|=1,Ls(o,l,d,_),l.child)}function o1(o,l,d,m,v){if(ei(l),l.stateNode===null){var _=sl,T=d.contextType;typeof T=="object"&&T!==null&&(_=Gs(T)),_=new d(m,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Lg,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=m,_.state=l.memoizedState,_.refs={},mg(l),T=d.contextType,_.context=typeof T=="object"&&T!==null?Gs(T):sl,_.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&($g(l,d,T,m),_.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&Lg.enqueueReplaceState(_,_.state,null),tu(l,m,_,v),eu(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){_=l.stateNode;var O=l.memoizedProps,F=ai(d,O);_.props=F;var se=_.context,me=d.contextType;T=sl,typeof me=="object"&&me!==null&&(T=Gs(me));var xe=d.getDerivedStateFromProps;me=typeof xe=="function"||typeof _.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,me||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(O||se!==T)&&Gw(l,_,m,T),Ln=!1;var re=l.memoizedState;_.state=re,tu(l,m,_,v),eu(),se=l.memoizedState,O||re!==se||Ln?(typeof xe=="function"&&($g(l,d,xe,m),se=l.memoizedState),(F=Ln||Hw(l,d,F,m,re,se,T))?(me||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=se),_.props=m,_.state=se,_.context=T,m=F):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{_=l.stateNode,pg(o,l),T=l.memoizedProps,me=ai(d,T),_.props=me,xe=l.pendingProps,re=_.context,se=d.contextType,F=sl,typeof se=="object"&&se!==null&&(F=Gs(se)),O=d.getDerivedStateFromProps,(se=typeof O=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==xe||re!==F)&&Gw(l,_,m,F),Ln=!1,re=l.memoizedState,_.state=re,tu(l,m,_,v),eu();var oe=l.memoizedState;T!==xe||re!==oe||Ln||o!==null&&o.dependencies!==null&&uf(o.dependencies)?(typeof O=="function"&&($g(l,d,O,m),oe=l.memoizedState),(me=Ln||Hw(l,d,me,m,re,oe,F)||o!==null&&o.dependencies!==null&&uf(o.dependencies))?(se||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,oe,F),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,oe,F)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&re===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&re===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=oe),_.props=m,_.state=oe,_.context=F,m=me):(typeof _.componentDidUpdate!="function"||T===o.memoizedProps&&re===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&re===o.memoizedState||(l.flags|=1024),m=!1)}return _=m,Af(o,l),m=(l.flags&128)!==0,_||m?(_=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&m?(l.child=fl(l,o.child,null,v),l.child=fl(l,null,d,v)):Ls(o,l,d,v),l.memoizedState=_.state,o=l.child):o=hn(o,l,v),o}function i1(o,l,d,m){return Gc(),l.flags|=256,Ls(o,l,d,m),l.child}var Vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qg(o){return{baseLanes:o,cachePool:Y_()}}function Ug(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=Ka),o}function l1(o,l,d){var m=l.pendingProps,v=!1,_=(l.flags&128)!==0,T;if((T=_)||(T=o!==null&&o.memoizedState===null?!1:(ys.current&2)!==0),T&&(v=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,o===null){if(kt){if(v?qn(l):Un(),kt){var O=Qt,F;if(F=O){e:{for(F=O,O=Mr;F.nodeType!==8;){if(!O){O=null;break e}if(F=fr(F.nextSibling),F===null){O=null;break e}}O=F}O!==null?(l.memoizedState={dehydrated:O,treeContext:Ko!==null?{id:on,overflow:ln}:null,retryLane:536870912,hydrationErrors:null},F=Ca(18,null,null,0),F.stateNode=O,F.return=l,l.child=F,oa=l,Qt=null,F=!0):F=!1}F||Qo(l)}if(O=l.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return S0(O)?l.lanes=32:l.lanes=536870912,null;fn(l)}return O=m.children,m=m.fallback,v?(Un(),v=l.mode,O=Tf({mode:"hidden",children:O},v),m=Yo(m,v,d,null),O.return=l,m.return=l,O.sibling=m,l.child=O,v=l.child,v.memoizedState=qg(d),v.childLanes=Ug(o,T,d),l.memoizedState=Vg,m):(qn(l),zg(l,O))}if(F=o.memoizedState,F!==null&&(O=F.dehydrated,O!==null)){if(_)l.flags&256?(qn(l),l.flags&=-257,l=Fg(o,l,d)):l.memoizedState!==null?(Un(),l.child=o.child,l.flags|=128,l=null):(Un(),v=m.fallback,O=l.mode,m=Tf({mode:"visible",children:m.children},O),v=Yo(v,O,d,null),v.flags|=2,m.return=l,v.return=l,m.sibling=v,l.child=m,fl(l,o.child,null,d),m=l.child,m.memoizedState=qg(d),m.childLanes=Ug(o,T,d),l.memoizedState=Vg,l=v);else if(qn(l),S0(O)){if(T=O.nextSibling&&O.nextSibling.dataset,T)var se=T.dgst;T=se,m=Error(a(419)),m.stack="",m.digest=T,Xc({value:m,source:null,stack:null}),l=Fg(o,l,d)}else if(Ss||Yc(o,l,d,!1),T=(d&o.childLanes)!==0,Ss||T){if(T=qt,T!==null&&(m=d&-d,m=(m&42)!==0?1:fs(m),m=(m&(T.suspendedLanes|d))!==0?0:m,m!==0&&m!==F.retryLane))throw F.retryLane=m,tl(o,m),Ma(T,o,m),Jw;O.data==="$?"||l0(),l=Fg(o,l,d)}else O.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=F.treeContext,Qt=fr(O.nextSibling),oa=l,kt=!0,Zo=null,Mr=!1,o!==null&&(Ga[Xa++]=on,Ga[Xa++]=ln,Ga[Xa++]=Ko,on=o.id,ln=o.overflow,Ko=l),l=zg(l,m.children),l.flags|=4096);return l}return v?(Un(),v=m.fallback,O=l.mode,F=o.child,se=F.sibling,m=nn(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&65011712,se!==null?v=nn(se,v):(v=Yo(v,O,d,null),v.flags|=2),v.return=l,m.return=l,m.sibling=v,l.child=m,m=v,v=l.child,O=o.child.memoizedState,O===null?O=qg(d):(F=O.cachePool,F!==null?(se=vs._currentValue,F=F.parent!==se?{parent:se,pool:se}:F):F=Y_(),O={baseLanes:O.baseLanes|d,cachePool:F}),v.memoizedState=O,v.childLanes=Ug(o,T,d),l.memoizedState=Vg,m):(qn(l),d=o.child,o=d.sibling,d=nn(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,o!==null&&(T=l.deletions,T===null?(l.deletions=[o],l.flags|=16):T.push(o)),l.child=d,l.memoizedState=null,d)}function zg(o,l){return l=Tf({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Tf(o,l){return o=Ca(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Fg(o,l,d){return fl(l,o.child,null,d),o=zg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function c1(o,l,d){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),lg(o.return,l,d)}function Hg(o,l,d,m,v){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(_.isBackwards=l,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=d,_.tailMode=v)}function u1(o,l,d){var m=l.pendingProps,v=m.revealOrder,_=m.tail;if(Ls(o,l,m.children,d),m=ys.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&c1(o,d,l);else if(o.tag===19)c1(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(te(ys,m),v){case"forwards":for(d=l.child,v=null;d!==null;)o=d.alternate,o!==null&&Ef(o)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),Hg(l,!1,v,d,_);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&Ef(o)===null){l.child=v;break}o=v.sibling,v.sibling=d,d=v,v=o}Hg(l,!0,d,null,_);break;case"together":Hg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function hn(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Xn|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Yc(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(a(153));if(l.child!==null){for(o=l.child,d=nn(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=nn(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function Gg(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&uf(o)))}function B5(o,l,d){switch(l.tag){case 3:ce(l,l.stateNode.containerInfo),$n(l,vs,o.memoizedState.cache),Gc();break;case 27:case 5:Se(l);break;case 4:ce(l,l.stateNode.containerInfo);break;case 10:$n(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(qn(l),l.flags|=128,null):(d&l.child.childLanes)!==0?l1(o,l,d):(qn(l),o=hn(o,l,d),o!==null?o.sibling:null);qn(l);break;case 19:var v=(o.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(Yc(o,l,d,!1),m=(d&l.childLanes)!==0),v){if(m)return u1(o,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(ys,ys.current),m)break;return null;case 22:case 23:return l.lanes=0,a1(o,l,d);case 24:$n(l,vs,o.memoizedState.cache)}return hn(o,l,d)}function d1(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)Ss=!0;else{if(!Gg(o,d)&&(l.flags&128)===0)return Ss=!1,B5(o,l,d);Ss=(o.flags&131072)!==0}else Ss=!1,kt&&(l.flags&1048576)!==0&&q_(l,cf,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var m=l.elementType,v=m._init;if(m=v(m._payload),l.type=m,typeof m=="function")tg(m)?(o=ai(m,o),l.tag=1,l=o1(null,l,m,o,d)):(l.tag=0,l=Bg(null,l,m,o,d));else{if(m!=null){if(v=m.$$typeof,v===P){l.tag=11,l=e1(null,l,m,o,d);break e}else if(v===$){l.tag=14,l=t1(null,l,m,o,d);break e}}throw l=Q(m)||m,Error(a(306,l,""))}}return l;case 0:return Bg(o,l,l.type,l.pendingProps,d);case 1:return m=l.type,v=ai(m,l.pendingProps),o1(o,l,m,v,d);case 3:e:{if(ce(l,l.stateNode.containerInfo),o===null)throw Error(a(387));m=l.pendingProps;var _=l.memoizedState;v=_.element,pg(o,l),tu(l,m,null,d);var T=l.memoizedState;if(m=T.cache,$n(l,vs,m),m!==_.cache&&cg(l,[vs],d,!0),eu(),m=T.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=i1(o,l,m,d);break e}else if(m!==v){v=Fa(Error(a(424)),l),Xc(v),l=i1(o,l,m,d);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Qt=fr(o.firstChild),oa=l,kt=!0,Zo=null,Mr=!0,d=zw(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Gc(),m===v){l=hn(o,l,d);break e}Ls(o,l,m,d)}l=l.child}return l;case 26:return Af(o,l),o===null?(d=pj(l.type,null,l.pendingProps,null))?l.memoizedState=d:kt||(d=l.type,o=l.pendingProps,m=Ff(ae.current).createElement(d),m[as]=l,m[Vt]=o,Bs(m,d,o),Ns(m),l.stateNode=m):l.memoizedState=pj(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Se(l),o===null&&kt&&(m=l.stateNode=fj(l.type,l.pendingProps,ae.current),oa=l,Mr=!0,v=Qt,Zn(l.type)?(E0=v,Qt=fr(m.firstChild)):Qt=v),Ls(o,l,l.pendingProps.children,d),Af(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&kt&&((v=m=Qt)&&(m=h3(m,l.type,l.pendingProps,Mr),m!==null?(l.stateNode=m,oa=l,Qt=fr(m.firstChild),Mr=!1,v=!0):v=!1),v||Qo(l)),Se(l),v=l.type,_=l.pendingProps,T=o!==null?o.memoizedProps:null,m=_.children,w0(v,_)?m=null:T!==null&&w0(v,T)&&(l.flags|=32),l.memoizedState!==null&&(v=_g(o,l,R5,null,null,d),ju._currentValue=v),Af(o,l),Ls(o,l,m,d),l.child;case 6:return o===null&&kt&&((o=d=Qt)&&(d=m3(d,l.pendingProps,Mr),d!==null?(l.stateNode=d,oa=l,Qt=null,o=!0):o=!1),o||Qo(l)),null;case 13:return l1(o,l,d);case 4:return ce(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=fl(l,null,m,d):Ls(o,l,m,d),l.child;case 11:return e1(o,l,l.type,l.pendingProps,d);case 7:return Ls(o,l,l.pendingProps,d),l.child;case 8:return Ls(o,l,l.pendingProps.children,d),l.child;case 12:return Ls(o,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,$n(l,l.type,m.value),Ls(o,l,m.children,d),l.child;case 9:return v=l.type._context,m=l.pendingProps.children,ei(l),v=Gs(v),m=m(v),l.flags|=1,Ls(o,l,m,d),l.child;case 14:return t1(o,l,l.type,l.pendingProps,d);case 15:return s1(o,l,l.type,l.pendingProps,d);case 19:return u1(o,l,d);case 31:return m=l.pendingProps,d=l.mode,m={mode:m.mode,children:m.children},o===null?(d=Tf(m,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=nn(o.child,m),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return a1(o,l,d);case 24:return ei(l),m=Gs(vs),o===null?(v=fg(),v===null&&(v=qt,_=ug(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=d),v=_),l.memoizedState={parent:m,cache:v},mg(l),$n(l,vs,v)):((o.lanes&d)!==0&&(pg(o,l),tu(l,null,null,d),eu()),v=o.memoizedState,_=l.memoizedState,v.parent!==m?(v={parent:m,cache:m},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),$n(l,vs,m)):(m=_.cache,$n(l,vs,m),m!==v.cache&&cg(l,[vs],d,!0))),Ls(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(a(156,l.tag))}function mn(o){o.flags|=4}function f1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!bj(l)){if(l=Ya.current,l!==null&&((bt&4194048)===bt?Pr!==null:(bt&62914560)!==bt&&(bt&536870912)===0||l!==Pr))throw Qc=hg,K_;o.flags|=8192}}function Rf(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Vi():536870912,o.lanes|=l,gl|=l)}function lu(o,l){if(!kt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Kt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(l)for(var v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=d,l}function V5(o,l,d){var m=l.pendingProps;switch(ng(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(l),null;case 1:return Kt(l),null;case 3:return d=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),un(vs),we(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Hc(l)?mn(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,F_())),Kt(l),null;case 26:return d=l.memoizedState,o===null?(mn(l),d!==null?(Kt(l),f1(l,d)):(Kt(l),l.flags&=-16777217)):d?d!==o.memoizedState?(mn(l),Kt(l),f1(l,d)):(Kt(l),l.flags&=-16777217):(o.memoizedProps!==m&&mn(l),Kt(l),l.flags&=-16777217),null;case 27:je(l),d=ae.current;var v=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(!m){if(l.stateNode===null)throw Error(a(166));return Kt(l),null}o=ie.current,Hc(l)?U_(l):(o=fj(v,m,d),l.stateNode=o,mn(l))}return Kt(l),null;case 5:if(je(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(!m){if(l.stateNode===null)throw Error(a(166));return Kt(l),null}if(o=ie.current,Hc(l))U_(l);else{switch(v=Ff(ae.current),o){case 1:o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=v.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}o[as]=l,o[Vt]=m;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)o.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=o;e:switch(Bs(o,d,m),d){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&mn(l)}}return Kt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&mn(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(a(166));if(o=ae.current,Hc(l)){if(o=l.stateNode,d=l.memoizedProps,m=null,v=oa,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}o[as]=l,o=!!(o.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||nj(o.nodeValue,d)),o||Qo(l)}else o=Ff(o).createTextNode(m),o[as]=l,l.stateNode=o}return Kt(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Hc(l),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(a(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));v[as]=l}else Gc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),v=!1}else v=F_(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(fn(l),l):(fn(l),null)}if(fn(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=m!==null,o=o!==null&&o.memoizedState!==null,d){m=l.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var _=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==v&&(m.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),Rf(l,l.updateQueue),Kt(l),null;case 4:return we(),o===null&&x0(l.stateNode.containerInfo),Kt(l),null;case 10:return un(l.type),Kt(l),null;case 19:if(ne(ys),v=l.memoizedState,v===null)return Kt(l),null;if(m=(l.flags&128)!==0,_=v.rendering,_===null)if(m)lu(v,!1);else{if(Jt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=Ef(o),_!==null){for(l.flags|=128,lu(v,!1),o=_.updateQueue,l.updateQueue=o,Rf(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)V_(d,o),d=d.sibling;return te(ys,ys.current&1|2),l.child}o=o.sibling}v.tail!==null&&Te()>Df&&(l.flags|=128,m=!0,lu(v,!1),l.lanes=4194304)}else{if(!m)if(o=Ef(_),o!==null){if(l.flags|=128,m=!0,o=o.updateQueue,l.updateQueue=o,Rf(l,o),lu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!kt)return Kt(l),null}else 2*Te()-v.renderingStartTime>Df&&d!==536870912&&(l.flags|=128,m=!0,lu(v,!1),l.lanes=4194304);v.isBackwards?(_.sibling=l.child,l.child=_):(o=v.last,o!==null?o.sibling=_:l.child=_,v.last=_)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=Te(),l.sibling=null,o=ys.current,te(ys,m?o&1|2:o&1),l):(Kt(l),null);case 22:case 23:return fn(l),yg(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Kt(l),l.subtreeFlags&6&&(l.flags|=8192)):Kt(l),d=l.updateQueue,d!==null&&Rf(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),o!==null&&ne(ti),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),un(vs),Kt(l),null;case 25:return null;case 30:return null}throw Error(a(156,l.tag))}function q5(o,l){switch(ng(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return un(vs),we(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return je(l),null;case 13:if(fn(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(a(340));Gc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ne(ys),null;case 4:return we(),null;case 10:return un(l.type),null;case 22:case 23:return fn(l),yg(),o!==null&&ne(ti),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return un(vs),null;case 25:return null;default:return null}}function h1(o,l){switch(ng(l),l.tag){case 3:un(vs),we();break;case 26:case 27:case 5:je(l);break;case 4:we();break;case 13:fn(l);break;case 19:ne(ys);break;case 10:un(l.type);break;case 22:case 23:fn(l),yg(),o!==null&&ne(ti);break;case 24:un(vs)}}function cu(o,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&o)===o){m=void 0;var _=d.create,T=d.inst;m=_(),T.destroy=m}d=d.next}while(d!==v)}}catch(O){Lt(l,l.return,O)}}function zn(o,l,d){try{var m=l.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var _=v.next;m=_;do{if((m.tag&o)===o){var T=m.inst,O=T.destroy;if(O!==void 0){T.destroy=void 0,v=l;var F=d,se=O;try{se()}catch(me){Lt(v,F,me)}}}m=m.next}while(m!==_)}}catch(me){Lt(l,l.return,me)}}function m1(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{tw(l,d)}catch(m){Lt(o,o.return,m)}}}function p1(o,l,d){d.props=ai(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(m){Lt(o,l,m)}}function uu(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof d=="function"?o.refCleanup=d(m):d.current=m}}catch(v){Lt(o,l,v)}}function Dr(o,l){var d=o.ref,m=o.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){Lt(o,l,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Lt(o,l,v)}else d.current=null}function g1(o){var l=o.type,d=o.memoizedProps,m=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){Lt(o,o.return,v)}}function Xg(o,l,d){try{var m=o.stateNode;l3(m,o.type,d,l),m[Vt]=l}catch(v){Lt(o,o.return,v)}}function x1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Zn(o.type)||o.tag===4}function Yg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||x1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Zn(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Kg(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=zf));else if(m!==4&&(m===27&&Zn(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(Kg(o,l,d),o=o.sibling;o!==null;)Kg(o,l,d),o=o.sibling}function Mf(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(m!==4&&(m===27&&Zn(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Mf(o,l,d),o=o.sibling;o!==null;)Mf(o,l,d),o=o.sibling}function v1(o){var l=o.stateNode,d=o.memoizedProps;try{for(var m=o.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Bs(l,m,d),l[as]=o,l[Vt]=d}catch(_){Lt(o,o.return,_)}}var pn=!1,ns=!1,Wg=!1,y1=typeof WeakSet=="function"?WeakSet:Set,Es=null;function U5(o,l){if(o=o.containerInfo,b0=Wf,o=T_(o),Yp(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var T=0,O=-1,F=-1,se=0,me=0,xe=o,re=null;t:for(;;){for(var oe;xe!==d||v!==0&&xe.nodeType!==3||(O=T+v),xe!==_||m!==0&&xe.nodeType!==3||(F=T+m),xe.nodeType===3&&(T+=xe.nodeValue.length),(oe=xe.firstChild)!==null;)re=xe,xe=oe;for(;;){if(xe===o)break t;if(re===d&&++se===v&&(O=T),re===_&&++me===m&&(F=T),(oe=xe.nextSibling)!==null)break;xe=re,re=xe.parentNode}xe=oe}d=O===-1||F===-1?null:{start:O,end:F}}else d=null}d=d||{start:0,end:0}}else d=null;for(_0={focusedElem:o,selectionRange:d},Wf=!1,Es=l;Es!==null;)if(l=Es,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Es=o;else for(;Es!==null;){switch(l=Es,_=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,d=l,v=_.memoizedProps,_=_.memoizedState,m=d.stateNode;try{var Qe=ai(d.type,v,d.elementType===d.type);o=m.getSnapshotBeforeUpdate(Qe,_),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ye){Lt(d,d.return,Ye)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)N0(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":N0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=l.sibling,o!==null){o.return=l.return,Es=o;break}Es=l.return}}function b1(o,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:Fn(o,d),m&4&&cu(5,d);break;case 1:if(Fn(o,d),m&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(T){Lt(d,d.return,T)}else{var v=ai(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(v,l,o.__reactInternalSnapshotBeforeUpdate)}catch(T){Lt(d,d.return,T)}}m&64&&m1(d),m&512&&uu(d,d.return);break;case 3:if(Fn(o,d),m&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{tw(o,l)}catch(T){Lt(d,d.return,T)}}break;case 27:l===null&&m&4&&v1(d);case 26:case 5:Fn(o,d),l===null&&m&4&&g1(d),m&512&&uu(d,d.return);break;case 12:Fn(o,d);break;case 13:Fn(o,d),m&4&&j1(o,d),m&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=Z5.bind(null,d),p3(o,d))));break;case 22:if(m=d.memoizedState!==null||pn,!m){l=l!==null&&l.memoizedState!==null||ns,v=pn;var _=ns;pn=m,(ns=l)&&!_?Hn(o,d,(d.subtreeFlags&8772)!==0):Fn(o,d),pn=v,ns=_}break;case 30:break;default:Fn(o,d)}}function _1(o){var l=o.alternate;l!==null&&(o.alternate=null,_1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Ap(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Xt=null,ga=!1;function gn(o,l,d){for(d=d.child;d!==null;)w1(o,l,d),d=d.sibling}function w1(o,l,d){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(De,d)}catch{}switch(d.tag){case 26:ns||Dr(d,l),gn(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ns||Dr(d,l);var m=Xt,v=ga;Zn(d.type)&&(Xt=d.stateNode,ga=!1),gn(o,l,d),yu(d.stateNode),Xt=m,ga=v;break;case 5:ns||Dr(d,l);case 6:if(m=Xt,v=ga,Xt=null,gn(o,l,d),Xt=m,ga=v,Xt!==null)if(ga)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(d.stateNode)}catch(_){Lt(d,l,_)}else try{Xt.removeChild(d.stateNode)}catch(_){Lt(d,l,_)}break;case 18:Xt!==null&&(ga?(o=Xt,uj(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),Cu(o)):uj(Xt,d.stateNode));break;case 4:m=Xt,v=ga,Xt=d.stateNode.containerInfo,ga=!0,gn(o,l,d),Xt=m,ga=v;break;case 0:case 11:case 14:case 15:ns||zn(2,d,l),ns||zn(4,d,l),gn(o,l,d);break;case 1:ns||(Dr(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&p1(d,l,m)),gn(o,l,d);break;case 21:gn(o,l,d);break;case 22:ns=(m=ns)||d.memoizedState!==null,gn(o,l,d),ns=m;break;default:gn(o,l,d)}}function j1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Cu(o)}catch(d){Lt(l,l.return,d)}}function z5(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new y1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new y1),l;default:throw Error(a(435,o.tag))}}function Zg(o,l){var d=z5(o);l.forEach(function(m){var v=Q5.bind(null,o,m);d.has(m)||(d.add(m),m.then(v,v))})}function ka(o,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],_=o,T=l,O=T;e:for(;O!==null;){switch(O.tag){case 27:if(Zn(O.type)){Xt=O.stateNode,ga=!1;break e}break;case 5:Xt=O.stateNode,ga=!1;break e;case 3:case 4:Xt=O.stateNode.containerInfo,ga=!0;break e}O=O.return}if(Xt===null)throw Error(a(160));w1(_,T,v),Xt=null,ga=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)N1(l,o),l=l.sibling}var dr=null;function N1(o,l){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ka(l,o),Aa(o),m&4&&(zn(3,o,o.return),cu(3,o),zn(5,o,o.return));break;case 1:ka(l,o),Aa(o),m&512&&(ns||d===null||Dr(d,d.return)),m&64&&pn&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=dr;if(ka(l,o),Aa(o),m&512&&(ns||d===null||Dr(d,d.return)),m&4){var _=d!==null?d.memoizedState:null;if(m=o.memoizedState,d===null)if(m===null)if(o.stateNode===null){e:{m=o.type,d=o.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":_=v.getElementsByTagName("title")[0],(!_||_[Dc]||_[as]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(m),v.head.insertBefore(_,v.querySelector("head > title"))),Bs(_,m,d),_[as]=o,Ns(_),m=_;break e;case"link":var T=vj("link","href",v).get(m+(d.href||""));if(T){for(var O=0;O<T.length;O++)if(_=T[O],_.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&_.getAttribute("rel")===(d.rel==null?null:d.rel)&&_.getAttribute("title")===(d.title==null?null:d.title)&&_.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(O,1);break t}}_=v.createElement(m),Bs(_,m,d),v.head.appendChild(_);break;case"meta":if(T=vj("meta","content",v).get(m+(d.content||""))){for(O=0;O<T.length;O++)if(_=T[O],_.getAttribute("content")===(d.content==null?null:""+d.content)&&_.getAttribute("name")===(d.name==null?null:d.name)&&_.getAttribute("property")===(d.property==null?null:d.property)&&_.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&_.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(O,1);break t}}_=v.createElement(m),Bs(_,m,d),v.head.appendChild(_);break;default:throw Error(a(468,m))}_[as]=o,Ns(_),m=_}o.stateNode=m}else yj(v,o.type,o.stateNode);else o.stateNode=xj(v,m,o.memoizedProps);else _!==m?(_===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):_.count--,m===null?yj(v,o.type,o.stateNode):xj(v,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Xg(o,o.memoizedProps,d.memoizedProps)}break;case 27:ka(l,o),Aa(o),m&512&&(ns||d===null||Dr(d,d.return)),d!==null&&m&4&&Xg(o,o.memoizedProps,d.memoizedProps);break;case 5:if(ka(l,o),Aa(o),m&512&&(ns||d===null||Dr(d,d.return)),o.flags&32){v=o.stateNode;try{Yi(v,"")}catch(oe){Lt(o,o.return,oe)}}m&4&&o.stateNode!=null&&(v=o.memoizedProps,Xg(o,v,d!==null?d.memoizedProps:v)),m&1024&&(Wg=!0);break;case 6:if(ka(l,o),Aa(o),m&4){if(o.stateNode===null)throw Error(a(162));m=o.memoizedProps,d=o.stateNode;try{d.nodeValue=m}catch(oe){Lt(o,o.return,oe)}}break;case 3:if(Xf=null,v=dr,dr=Hf(l.containerInfo),ka(l,o),dr=v,Aa(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Cu(l.containerInfo)}catch(oe){Lt(o,o.return,oe)}Wg&&(Wg=!1,S1(o));break;case 4:m=dr,dr=Hf(o.stateNode.containerInfo),ka(l,o),Aa(o),dr=m;break;case 12:ka(l,o),Aa(o);break;case 13:ka(l,o),Aa(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(a0=Te()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Zg(o,m)));break;case 22:v=o.memoizedState!==null;var F=d!==null&&d.memoizedState!==null,se=pn,me=ns;if(pn=se||v,ns=me||F,ka(l,o),ns=me,pn=se,Aa(o),m&8192)e:for(l=o.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||F||pn||ns||ri(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){F=d=l;try{if(_=F.stateNode,v)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{O=F.stateNode;var xe=F.memoizedProps.style,re=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;O.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(oe){Lt(F,F.return,oe)}}}else if(l.tag===6){if(d===null){F=l;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(oe){Lt(F,F.return,oe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Zg(o,d))));break;case 19:ka(l,o),Aa(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Zg(o,m)));break;case 30:break;case 21:break;default:ka(l,o),Aa(o)}}function Aa(o){var l=o.flags;if(l&2){try{for(var d,m=o.return;m!==null;){if(x1(m)){d=m;break}m=m.return}if(d==null)throw Error(a(160));switch(d.tag){case 27:var v=d.stateNode,_=Yg(o);Mf(o,_,v);break;case 5:var T=d.stateNode;d.flags&32&&(Yi(T,""),d.flags&=-33);var O=Yg(o);Mf(o,O,T);break;case 3:case 4:var F=d.stateNode.containerInfo,se=Yg(o);Kg(o,se,F);break;default:throw Error(a(161))}}catch(me){Lt(o,o.return,me)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function S1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;S1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Fn(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)b1(o,l.alternate,l),l=l.sibling}function ri(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:zn(4,l,l.return),ri(l);break;case 1:Dr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&p1(l,l.return,d),ri(l);break;case 27:yu(l.stateNode);case 26:case 5:Dr(l,l.return),ri(l);break;case 22:l.memoizedState===null&&ri(l);break;case 30:ri(l);break;default:ri(l)}o=o.sibling}}function Hn(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,v=o,_=l,T=_.flags;switch(_.tag){case 0:case 11:case 15:Hn(v,_,d),cu(4,_);break;case 1:if(Hn(v,_,d),m=_,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(se){Lt(m,m.return,se)}if(m=_,v=m.updateQueue,v!==null){var O=m.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)ew(F[v],O)}catch(se){Lt(m,m.return,se)}}d&&T&64&&m1(_),uu(_,_.return);break;case 27:v1(_);case 26:case 5:Hn(v,_,d),d&&m===null&&T&4&&g1(_),uu(_,_.return);break;case 12:Hn(v,_,d);break;case 13:Hn(v,_,d),d&&T&4&&j1(v,_);break;case 22:_.memoizedState===null&&Hn(v,_,d),uu(_,_.return);break;case 30:break;default:Hn(v,_,d)}l=l.sibling}}function Qg(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Kc(d))}function Jg(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Kc(o))}function Or(o,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)E1(o,l,d,m),l=l.sibling}function E1(o,l,d,m){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Or(o,l,d,m),v&2048&&cu(9,l);break;case 1:Or(o,l,d,m);break;case 3:Or(o,l,d,m),v&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Kc(o)));break;case 12:if(v&2048){Or(o,l,d,m),o=l.stateNode;try{var _=l.memoizedProps,T=_.id,O=_.onPostCommit;typeof O=="function"&&O(T,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(F){Lt(l,l.return,F)}}else Or(o,l,d,m);break;case 13:Or(o,l,d,m);break;case 23:break;case 22:_=l.stateNode,T=l.alternate,l.memoizedState!==null?_._visibility&2?Or(o,l,d,m):du(o,l):_._visibility&2?Or(o,l,d,m):(_._visibility|=2,hl(o,l,d,m,(l.subtreeFlags&10256)!==0)),v&2048&&Qg(T,l);break;case 24:Or(o,l,d,m),v&2048&&Jg(l.alternate,l);break;default:Or(o,l,d,m)}}function hl(o,l,d,m,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var _=o,T=l,O=d,F=m,se=T.flags;switch(T.tag){case 0:case 11:case 15:hl(_,T,O,F,v),cu(8,T);break;case 23:break;case 22:var me=T.stateNode;T.memoizedState!==null?me._visibility&2?hl(_,T,O,F,v):du(_,T):(me._visibility|=2,hl(_,T,O,F,v)),v&&se&2048&&Qg(T.alternate,T);break;case 24:hl(_,T,O,F,v),v&&se&2048&&Jg(T.alternate,T);break;default:hl(_,T,O,F,v)}l=l.sibling}}function du(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,m=l,v=m.flags;switch(m.tag){case 22:du(d,m),v&2048&&Qg(m.alternate,m);break;case 24:du(d,m),v&2048&&Jg(m.alternate,m);break;default:du(d,m)}l=l.sibling}}var fu=8192;function ml(o){if(o.subtreeFlags&fu)for(o=o.child;o!==null;)C1(o),o=o.sibling}function C1(o){switch(o.tag){case 26:ml(o),o.flags&fu&&o.memoizedState!==null&&k3(dr,o.memoizedState,o.memoizedProps);break;case 5:ml(o);break;case 3:case 4:var l=dr;dr=Hf(o.stateNode.containerInfo),ml(o),dr=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=fu,fu=16777216,ml(o),fu=l):ml(o));break;default:ml(o)}}function k1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function hu(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Es=m,T1(m,o)}k1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)A1(o),o=o.sibling}function A1(o){switch(o.tag){case 0:case 11:case 15:hu(o),o.flags&2048&&zn(9,o,o.return);break;case 3:hu(o);break;case 12:hu(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Pf(o)):hu(o);break;default:hu(o)}}function Pf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Es=m,T1(m,o)}k1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:zn(8,l,l.return),Pf(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Pf(l));break;default:Pf(l)}o=o.sibling}}function T1(o,l){for(;Es!==null;){var d=Es;switch(d.tag){case 0:case 11:case 15:zn(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Kc(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Es=m;else e:for(d=o;Es!==null;){m=Es;var v=m.sibling,_=m.return;if(_1(m),m===d){Es=null;break e}if(v!==null){v.return=_,Es=v;break e}Es=_}}}var F5={getCacheForType:function(o){var l=Gs(vs),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},H5=typeof WeakMap=="function"?WeakMap:Map,Rt=0,qt=null,gt=null,bt=0,Mt=0,Ta=null,Gn=!1,pl=!1,e0=!1,xn=0,Jt=0,Xn=0,ni=0,t0=0,Ka=0,gl=0,mu=null,xa=null,s0=!1,a0=0,Df=1/0,Of=null,Yn=null,Is=0,Kn=null,xl=null,vl=0,r0=0,n0=null,R1=null,pu=0,o0=null;function Ra(){if((Rt&2)!==0&&bt!==0)return bt&-bt;if(A.T!==null){var o=nl;return o!==0?o:h0()}return zo()}function M1(){Ka===0&&(Ka=(bt&536870912)===0||kt?ts():536870912);var o=Ya.current;return o!==null&&(o.flags|=32),Ka}function Ma(o,l,d){(o===qt&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(yl(o,0),Wn(o,bt,Ka,!1)),ha(o,d),((Rt&2)===0||o!==qt)&&(o===qt&&((Rt&2)===0&&(ni|=d),Jt===4&&Wn(o,bt,Ka,!1)),$r(o))}function P1(o,l,d){if((Rt&6)!==0)throw Error(a(327));var m=!d&&(l&124)===0&&(l&o.expiredLanes)===0||lr(o,l),v=m?Y5(o,l):c0(o,l,!0),_=m;do{if(v===0){pl&&!m&&Wn(o,l,0,!1);break}else{if(d=o.current.alternate,_&&!G5(d)){v=c0(o,l,!1),_=!1;continue}if(v===2){if(_=l,o.errorRecoveryDisabledLanes&_)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var O=o;v=mu;var F=O.current.memoizedState.isDehydrated;if(F&&(yl(O,T).flags|=256),T=c0(O,T,!1),T!==2){if(e0&&!F){O.errorRecoveryDisabledLanes|=_,ni|=_,v=4;break e}_=xa,xa=v,_!==null&&(xa===null?xa=_:xa.push.apply(xa,_))}v=T}if(_=!1,v!==2)continue}}if(v===1){yl(o,0),Wn(o,l,0,!0);break}e:{switch(m=o,_=v,_){case 0:case 1:throw Error(a(345));case 4:if((l&4194048)!==l)break;case 6:Wn(m,l,Ka,!Gn);break e;case 2:xa=null;break;case 3:case 5:break;default:throw Error(a(329))}if((l&62914560)===l&&(v=a0+300-Te(),10<v)){if(Wn(m,l,Ka,!Gn),na(m,0,!0)!==0)break e;m.timeoutHandle=lj(D1.bind(null,m,d,xa,Of,s0,l,Ka,ni,gl,Gn,_,2,-0,0),v);break e}D1(m,d,xa,Of,s0,l,Ka,ni,gl,Gn,_,0,-0,0)}}break}while(!0);$r(o)}function D1(o,l,d,m,v,_,T,O,F,se,me,xe,re,oe){if(o.timeoutHandle=-1,xe=l.subtreeFlags,(xe&8192||(xe&16785408)===16785408)&&(wu={stylesheets:null,count:0,unsuspend:C3},C1(l),xe=A3(),xe!==null)){o.cancelPendingCommit=xe(q1.bind(null,o,l,_,d,m,v,T,O,F,me,1,re,oe)),Wn(o,_,T,!se);return}q1(o,l,_,d,m,v,T,O,F)}function G5(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],_=v.getSnapshot;v=v.value;try{if(!Ea(_(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Wn(o,l,d,m){l&=~t0,l&=~ni,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var v=l;0<v;){var _=31-wt(v),T=1<<_;m[_]=-1,v&=~T}d!==0&&Ze(o,d,l)}function $f(){return(Rt&6)===0?(gu(0),!1):!0}function i0(){if(gt!==null){if(Mt===0)var o=gt.return;else o=gt,cn=Jo=null,Ng(o),dl=null,ou=0,o=gt;for(;o!==null;)h1(o.alternate,o),o=o.return;gt=null}}function yl(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,u3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),i0(),qt=o,gt=d=nn(o.current,null),bt=l,Mt=0,Ta=null,Gn=!1,pl=lr(o,l),e0=!1,gl=Ka=t0=ni=Xn=Jt=0,xa=mu=null,s0=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var v=31-wt(m),_=1<<v;l|=o[v],m&=~_}return xn=l,af(),d}function O1(o,l){ct=null,A.H=jf,l===Zc||l===hf?(l=Q_(),Mt=3):l===K_?(l=Q_(),Mt=4):Mt=l===Jw?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Ta=l,gt===null&&(Jt=1,kf(o,Fa(l,o.current)))}function $1(){var o=A.H;return A.H=jf,o===null?jf:o}function L1(){var o=A.A;return A.A=F5,o}function l0(){Jt=4,Gn||(bt&4194048)!==bt&&Ya.current!==null||(pl=!0),(Xn&134217727)===0&&(ni&134217727)===0||qt===null||Wn(qt,bt,Ka,!1)}function c0(o,l,d){var m=Rt;Rt|=2;var v=$1(),_=L1();(qt!==o||bt!==l)&&(Of=null,yl(o,l)),l=!1;var T=Jt;e:do try{if(Mt!==0&&gt!==null){var O=gt,F=Ta;switch(Mt){case 8:i0(),T=6;break e;case 3:case 2:case 9:case 6:Ya.current===null&&(l=!0);var se=Mt;if(Mt=0,Ta=null,bl(o,O,F,se),d&&pl){T=0;break e}break;default:se=Mt,Mt=0,Ta=null,bl(o,O,F,se)}}X5(),T=Jt;break}catch(me){O1(o,me)}while(!0);return l&&o.shellSuspendCounter++,cn=Jo=null,Rt=m,A.H=v,A.A=_,gt===null&&(qt=null,bt=0,af()),T}function X5(){for(;gt!==null;)I1(gt)}function Y5(o,l){var d=Rt;Rt|=2;var m=$1(),v=L1();qt!==o||bt!==l?(Of=null,Df=Te()+500,yl(o,l)):pl=lr(o,l);e:do try{if(Mt!==0&&gt!==null){l=gt;var _=Ta;t:switch(Mt){case 1:Mt=0,Ta=null,bl(o,l,_,1);break;case 2:case 9:if(W_(_)){Mt=0,Ta=null,B1(l);break}l=function(){Mt!==2&&Mt!==9||qt!==o||(Mt=7),$r(o)},_.then(l,l);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:W_(_)?(Mt=0,Ta=null,B1(l)):(Mt=0,Ta=null,bl(o,l,_,7));break;case 5:var T=null;switch(gt.tag){case 26:T=gt.memoizedState;case 5:case 27:var O=gt;if(!T||bj(T)){Mt=0,Ta=null;var F=O.sibling;if(F!==null)gt=F;else{var se=O.return;se!==null?(gt=se,Lf(se)):gt=null}break t}}Mt=0,Ta=null,bl(o,l,_,5);break;case 6:Mt=0,Ta=null,bl(o,l,_,6);break;case 8:i0(),Jt=6;break e;default:throw Error(a(462))}}K5();break}catch(me){O1(o,me)}while(!0);return cn=Jo=null,A.H=m,A.A=v,Rt=d,gt!==null?0:(qt=null,bt=0,af(),Jt)}function K5(){for(;gt!==null&&!fe();)I1(gt)}function I1(o){var l=d1(o.alternate,o,xn);o.memoizedProps=o.pendingProps,l===null?Lf(o):gt=l}function B1(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=n1(d,l,l.pendingProps,l.type,void 0,bt);break;case 11:l=n1(d,l,l.pendingProps,l.type.render,l.ref,bt);break;case 5:Ng(l);default:h1(d,l),l=gt=V_(l,xn),l=d1(d,l,xn)}o.memoizedProps=o.pendingProps,l===null?Lf(o):gt=l}function bl(o,l,d,m){cn=Jo=null,Ng(l),dl=null,ou=0;var v=l.return;try{if(I5(o,v,l,d,bt)){Jt=1,kf(o,Fa(d,o.current)),gt=null;return}}catch(_){if(v!==null)throw gt=v,_;Jt=1,kf(o,Fa(d,o.current)),gt=null;return}l.flags&32768?(kt||m===1?o=!0:pl||(bt&536870912)!==0?o=!1:(Gn=o=!0,(m===2||m===9||m===3||m===6)&&(m=Ya.current,m!==null&&m.tag===13&&(m.flags|=16384))),V1(l,o)):Lf(l)}function Lf(o){var l=o;do{if((l.flags&32768)!==0){V1(l,Gn);return}o=l.return;var d=V5(l.alternate,l,xn);if(d!==null){gt=d;return}if(l=l.sibling,l!==null){gt=l;return}gt=l=o}while(l!==null);Jt===0&&(Jt=5)}function V1(o,l){do{var d=q5(o.alternate,o);if(d!==null){d.flags&=32767,gt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){gt=o;return}gt=o=d}while(o!==null);Jt=6,gt=null}function q1(o,l,d,m,v,_,T,O,F){o.cancelPendingCommit=null;do If();while(Is!==0);if((Rt&6)!==0)throw Error(a(327));if(l!==null){if(l===o.current)throw Error(a(177));if(_=l.lanes|l.childLanes,_|=Jp,cr(o,d,_,T,O,F),o===qt&&(gt=qt=null,bt=0),xl=l,Kn=o,vl=d,r0=_,n0=v,R1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,J5(G,function(){return G1(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=A.T,A.T=null,v=I.p,I.p=2,T=Rt,Rt|=4;try{U5(o,l,d)}finally{Rt=T,I.p=v,A.T=m}}Is=1,U1(),z1(),F1()}}function U1(){if(Is===1){Is=0;var o=Kn,l=xl,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=A.T,A.T=null;var m=I.p;I.p=2;var v=Rt;Rt|=4;try{N1(l,o);var _=_0,T=T_(o.containerInfo),O=_.focusedElem,F=_.selectionRange;if(T!==O&&O&&O.ownerDocument&&A_(O.ownerDocument.documentElement,O)){if(F!==null&&Yp(O)){var se=F.start,me=F.end;if(me===void 0&&(me=se),"selectionStart"in O)O.selectionStart=se,O.selectionEnd=Math.min(me,O.value.length);else{var xe=O.ownerDocument||document,re=xe&&xe.defaultView||window;if(re.getSelection){var oe=re.getSelection(),Qe=O.textContent.length,Ye=Math.min(F.start,Qe),$t=F.end===void 0?Ye:Math.min(F.end,Qe);!oe.extend&&Ye>$t&&(T=$t,$t=Ye,Ye=T);var J=k_(O,Ye),W=k_(O,$t);if(J&&W&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==W.node||oe.focusOffset!==W.offset)){var ee=xe.createRange();ee.setStart(J.node,J.offset),oe.removeAllRanges(),Ye>$t?(oe.addRange(ee),oe.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),oe.addRange(ee))}}}}for(xe=[],oe=O;oe=oe.parentNode;)oe.nodeType===1&&xe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<xe.length;O++){var ge=xe[O];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Wf=!!b0,_0=b0=null}finally{Rt=v,I.p=m,A.T=d}}o.current=l,Is=2}}function z1(){if(Is===2){Is=0;var o=Kn,l=xl,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=A.T,A.T=null;var m=I.p;I.p=2;var v=Rt;Rt|=4;try{b1(o,l.alternate,l)}finally{Rt=v,I.p=m,A.T=d}}Is=3}}function F1(){if(Is===4||Is===3){Is=0,Re();var o=Kn,l=xl,d=vl,m=R1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Is=5:(Is=0,xl=Kn=null,H1(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Yn=null),$s(d),l=l.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(De,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=A.T,v=I.p,I.p=2,A.T=null;try{for(var _=o.onRecoverableError,T=0;T<m.length;T++){var O=m[T];_(O.value,{componentStack:O.stack})}}finally{A.T=l,I.p=v}}(vl&3)!==0&&If(),$r(o),v=o.pendingLanes,(d&4194090)!==0&&(v&42)!==0?o===o0?pu++:(pu=0,o0=o):pu=0,gu(0)}}function H1(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Kc(l)))}function If(o){return U1(),z1(),F1(),G1()}function G1(){if(Is!==5)return!1;var o=Kn,l=r0;r0=0;var d=$s(vl),m=A.T,v=I.p;try{I.p=32>d?32:d,A.T=null,d=n0,n0=null;var _=Kn,T=vl;if(Is=0,xl=Kn=null,vl=0,(Rt&6)!==0)throw Error(a(331));var O=Rt;if(Rt|=4,A1(_.current),E1(_,_.current,T,d),Rt=O,gu(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(De,_)}catch{}return!0}finally{I.p=v,A.T=m,H1(o,l)}}function X1(o,l,d){l=Fa(d,l),l=Ig(o.stateNode,l,2),o=Bn(o,l,2),o!==null&&(ha(o,2),$r(o))}function Lt(o,l,d){if(o.tag===3)X1(o,o,d);else for(;l!==null;){if(l.tag===3){X1(l,o,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Yn===null||!Yn.has(m))){o=Fa(d,o),d=Zw(2),m=Bn(l,d,2),m!==null&&(Qw(d,m,l,o),ha(m,2),$r(m));break}}l=l.return}}function u0(o,l,d){var m=o.pingCache;if(m===null){m=o.pingCache=new H5;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(e0=!0,v.add(d),o=W5.bind(null,o,l,d),l.then(o,o))}function W5(o,l,d){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,qt===o&&(bt&d)===d&&(Jt===4||Jt===3&&(bt&62914560)===bt&&300>Te()-a0?(Rt&2)===0&&yl(o,0):t0|=d,gl===bt&&(gl=0)),$r(o)}function Y1(o,l){l===0&&(l=Vi()),o=tl(o,l),o!==null&&(ha(o,l),$r(o))}function Z5(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),Y1(o,d)}function Q5(o,l){var d=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(a(314))}m!==null&&m.delete(l),Y1(o,d)}function J5(o,l){return ve(o,l)}var Bf=null,_l=null,d0=!1,Vf=!1,f0=!1,oi=0;function $r(o){o!==_l&&o.next===null&&(_l===null?Bf=_l=o:_l=_l.next=o),Vf=!0,d0||(d0=!0,t3())}function gu(o,l){if(!f0&&Vf){f0=!0;do for(var d=!1,m=Bf;m!==null;){if(o!==0){var v=m.pendingLanes;if(v===0)var _=0;else{var T=m.suspendedLanes,O=m.pingedLanes;_=(1<<31-wt(42|o)+1)-1,_&=v&~(T&~O),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(d=!0,Q1(m,_))}else _=bt,_=na(m,m===qt?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||lr(m,_)||(d=!0,Q1(m,_));m=m.next}while(d);f0=!1}}function e3(){K1()}function K1(){Vf=d0=!1;var o=0;oi!==0&&(c3()&&(o=oi),oi=0);for(var l=Te(),d=null,m=Bf;m!==null;){var v=m.next,_=W1(m,l);_===0?(m.next=null,d===null?Bf=v:d.next=v,v===null&&(_l=d)):(d=m,(o!==0||(_&3)!==0)&&(Vf=!0)),m=v}gu(o)}function W1(o,l){for(var d=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var T=31-wt(_),O=1<<T,F=v[T];F===-1?((O&d)===0||(O&m)!==0)&&(v[T]=fa(O,l)):F<=l&&(o.expiredLanes|=O),_&=~O}if(l=qt,d=bt,d=na(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,d===0||o===l&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&Pe(m),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||lr(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(m!==null&&Pe(m),$s(d)){case 2:case 8:d=U;break;case 32:d=G;break;case 268435456:d=ye;break;default:d=G}return m=Z1.bind(null,o),d=ve(d,m),o.callbackPriority=l,o.callbackNode=d,l}return m!==null&&m!==null&&Pe(m),o.callbackPriority=2,o.callbackNode=null,2}function Z1(o,l){if(Is!==0&&Is!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(If()&&o.callbackNode!==d)return null;var m=bt;return m=na(o,o===qt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(P1(o,m,l),W1(o,Te()),o.callbackNode!=null&&o.callbackNode===d?Z1.bind(null,o):null)}function Q1(o,l){if(If())return null;P1(o,l,!0)}function t3(){d3(function(){(Rt&6)!==0?ve(Ae,e3):K1()})}function h0(){return oi===0&&(oi=ts()),oi}function J1(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Wd(""+o)}function ej(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function s3(o,l,d,m,v){if(l==="submit"&&d&&d.stateNode===v){var _=J1((v[Vt]||null).action),T=m.submitter;T&&(l=(l=T[Vt]||null)?J1(l.formAction):T.getAttribute("formAction"),l!==null&&(_=l,T=null));var O=new ef("action","action",null,m,v);o.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(oi!==0){var F=T?ej(v,T):new FormData(v);Pg(d,{pending:!0,data:F,method:v.method,action:_},null,F)}}else typeof _=="function"&&(O.preventDefault(),F=T?ej(v,T):new FormData(v),Pg(d,{pending:!0,data:F,method:v.method,action:_},_,F))},currentTarget:v}]})}}for(var m0=0;m0<Qp.length;m0++){var p0=Qp[m0],a3=p0.toLowerCase(),r3=p0[0].toUpperCase()+p0.slice(1);ur(a3,"on"+r3)}ur(P_,"onAnimationEnd"),ur(D_,"onAnimationIteration"),ur(O_,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(_5,"onTransitionRun"),ur(w5,"onTransitionStart"),ur(j5,"onTransitionCancel"),ur($_,"onTransitionEnd"),Hi("onMouseEnter",["mouseout","mouseover"]),Hi("onMouseLeave",["mouseout","mouseover"]),Hi("onPointerEnter",["pointerout","pointerover"]),Hi("onPointerLeave",["pointerout","pointerover"]),Fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function tj(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],v=m.event;m=m.listeners;e:{var _=void 0;if(l)for(var T=m.length-1;0<=T;T--){var O=m[T],F=O.instance,se=O.currentTarget;if(O=O.listener,F!==_&&v.isPropagationStopped())break e;_=O,v.currentTarget=se;try{_(v)}catch(me){Cf(me)}v.currentTarget=null,_=F}else for(T=0;T<m.length;T++){if(O=m[T],F=O.instance,se=O.currentTarget,O=O.listener,F!==_&&v.isPropagationStopped())break e;_=O,v.currentTarget=se;try{_(v)}catch(me){Cf(me)}v.currentTarget=null,_=F}}}}function xt(o,l){var d=l[qi];d===void 0&&(d=l[qi]=new Set);var m=o+"__bubble";d.has(m)||(sj(l,o,2,!1),d.add(m))}function g0(o,l,d){var m=0;l&&(m|=4),sj(d,o,m,l)}var qf="_reactListening"+Math.random().toString(36).slice(2);function x0(o){if(!o[qf]){o[qf]=!0,Kb.forEach(function(d){d!=="selectionchange"&&(n3.has(d)||g0(d,!1,o),g0(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[qf]||(l[qf]=!0,g0("selectionchange",!1,l))}}function sj(o,l,d,m){switch(Ej(l)){case 2:var v=M3;break;case 8:v=P3;break;default:v=R0}d=v.bind(null,l,d,o),v=void 0,!Bp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(l,d,{capture:!0,passive:v}):o.addEventListener(l,d,!0):v!==void 0?o.addEventListener(l,d,{passive:v}):o.addEventListener(l,d,!1)}function v0(o,l,d,m,v){var _=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var O=m.stateNode.containerInfo;if(O===v)break;if(T===4)for(T=m.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;O!==null;){if(T=Ui(O),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){m=_=T;continue e}O=O.parentNode}}m=m.return}c_(function(){var se=_,me=Lp(d),xe=[];e:{var re=L_.get(o);if(re!==void 0){var oe=ef,Qe=o;switch(o){case"keypress":if(Qd(d)===0)break e;case"keydown":case"keyup":oe=JM;break;case"focusin":Qe="focus",oe=zp;break;case"focusout":Qe="blur",oe=zp;break;case"beforeblur":case"afterblur":oe=zp;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=f_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=qM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=s5;break;case P_:case D_:case O_:oe=FM;break;case $_:oe=r5;break;case"scroll":case"scrollend":oe=BM;break;case"wheel":oe=o5;break;case"copy":case"cut":case"paste":oe=GM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=m_;break;case"toggle":case"beforetoggle":oe=l5}var Ye=(l&4)!==0,$t=!Ye&&(o==="scroll"||o==="scrollend"),J=Ye?re!==null?re+"Capture":null:re;Ye=[];for(var W=se,ee;W!==null;){var ge=W;if(ee=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ee===null||J===null||(ge=$c(W,J),ge!=null&&Ye.push(vu(W,ge,ee))),$t)break;W=W.return}0<Ye.length&&(re=new oe(re,Qe,null,d,me),xe.push({event:re,listeners:Ye}))}}if((l&7)===0){e:{if(re=o==="mouseover"||o==="pointerover",oe=o==="mouseout"||o==="pointerout",re&&d!==$p&&(Qe=d.relatedTarget||d.fromElement)&&(Ui(Qe)||Qe[js]))break e;if((oe||re)&&(re=me.window===me?me:(re=me.ownerDocument)?re.defaultView||re.parentWindow:window,oe?(Qe=d.relatedTarget||d.toElement,oe=se,Qe=Qe?Ui(Qe):null,Qe!==null&&($t=i(Qe),Ye=Qe.tag,Qe!==$t||Ye!==5&&Ye!==27&&Ye!==6)&&(Qe=null)):(oe=null,Qe=se),oe!==Qe)){if(Ye=f_,ge="onMouseLeave",J="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(Ye=m_,ge="onPointerLeave",J="onPointerEnter",W="pointer"),$t=oe==null?re:Oc(oe),ee=Qe==null?re:Oc(Qe),re=new Ye(ge,W+"leave",oe,d,me),re.target=$t,re.relatedTarget=ee,ge=null,Ui(me)===se&&(Ye=new Ye(J,W+"enter",Qe,d,me),Ye.target=ee,Ye.relatedTarget=$t,ge=Ye),$t=ge,oe&&Qe)t:{for(Ye=oe,J=Qe,W=0,ee=Ye;ee;ee=wl(ee))W++;for(ee=0,ge=J;ge;ge=wl(ge))ee++;for(;0<W-ee;)Ye=wl(Ye),W--;for(;0<ee-W;)J=wl(J),ee--;for(;W--;){if(Ye===J||J!==null&&Ye===J.alternate)break t;Ye=wl(Ye),J=wl(J)}Ye=null}else Ye=null;oe!==null&&aj(xe,re,oe,Ye,!1),Qe!==null&&$t!==null&&aj(xe,$t,Qe,Ye,!0)}}e:{if(re=se?Oc(se):window,oe=re.nodeName&&re.nodeName.toLowerCase(),oe==="select"||oe==="input"&&re.type==="file")var Le=w_;else if(b_(re))if(j_)Le=v5;else{Le=g5;var ht=p5}else oe=re.nodeName,!oe||oe.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?se&&Op(se.elementType)&&(Le=w_):Le=x5;if(Le&&(Le=Le(o,se))){__(xe,Le,d,me);break e}ht&&ht(o,re,se),o==="focusout"&&se&&re.type==="number"&&se.memoizedProps.value!=null&&Dp(re,"number",re.value)}switch(ht=se?Oc(se):window,o){case"focusin":(b_(ht)||ht.contentEditable==="true")&&(Qi=ht,Kp=se,Fc=null);break;case"focusout":Fc=Kp=Qi=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,R_(xe,d,me);break;case"selectionchange":if(b5)break;case"keydown":case"keyup":R_(xe,d,me)}var Fe;if(Hp)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Zi?v_(o,d)&&(Ke="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Ke="onCompositionStart");Ke&&(p_&&d.locale!=="ko"&&(Zi||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Zi&&(Fe=u_()):(On=me,Vp="value"in On?On.value:On.textContent,Zi=!0)),ht=Uf(se,Ke),0<ht.length&&(Ke=new h_(Ke,o,null,d,me),xe.push({event:Ke,listeners:ht}),Fe?Ke.data=Fe:(Fe=y_(d),Fe!==null&&(Ke.data=Fe)))),(Fe=u5?d5(o,d):f5(o,d))&&(Ke=Uf(se,"onBeforeInput"),0<Ke.length&&(ht=new h_("onBeforeInput","beforeinput",null,d,me),xe.push({event:ht,listeners:Ke}),ht.data=Fe)),s3(xe,o,se,d,me)}tj(xe,l)})}function vu(o,l,d){return{instance:o,listener:l,currentTarget:d}}function Uf(o,l){for(var d=l+"Capture",m=[];o!==null;){var v=o,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=$c(o,d),v!=null&&m.unshift(vu(o,v,_)),v=$c(o,l),v!=null&&m.push(vu(o,v,_))),o.tag===3)return m;o=o.return}return[]}function wl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function aj(o,l,d,m,v){for(var _=l._reactName,T=[];d!==null&&d!==m;){var O=d,F=O.alternate,se=O.stateNode;if(O=O.tag,F!==null&&F===m)break;O!==5&&O!==26&&O!==27||se===null||(F=se,v?(se=$c(d,_),se!=null&&T.unshift(vu(d,se,F))):v||(se=$c(d,_),se!=null&&T.push(vu(d,se,F)))),d=d.return}T.length!==0&&o.push({event:l,listeners:T})}var o3=/\r\n?/g,i3=/\u0000|\uFFFD/g;function rj(o){return(typeof o=="string"?o:""+o).replace(o3,`
`).replace(i3,"")}function nj(o,l){return l=rj(l),rj(o)===l}function zf(){}function Ot(o,l,d,m,v,_){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Yi(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Yi(o,""+m);break;case"className":Xd(o,"class",m);break;case"tabIndex":Xd(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Xd(o,d,m);break;case"style":i_(o,m,_);break;case"data":if(l!=="object"){Xd(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Wd(""+m),o.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(d==="formAction"?(l!=="input"&&Ot(o,l,"name",v.name,v,null),Ot(o,l,"formEncType",v.formEncType,v,null),Ot(o,l,"formMethod",v.formMethod,v,null),Ot(o,l,"formTarget",v.formTarget,v,null)):(Ot(o,l,"encType",v.encType,v,null),Ot(o,l,"method",v.method,v,null),Ot(o,l,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Wd(""+m),o.setAttribute(d,m);break;case"onClick":m!=null&&(o.onclick=zf);break;case"onScroll":m!=null&&xt("scroll",o);break;case"onScrollEnd":m!=null&&xt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}d=Wd(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""+m):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":m===!0?o.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,m):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(d,m):o.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(d):o.setAttribute(d,m);break;case"popover":xt("beforetoggle",o),xt("toggle",o),Gd(o,"popover",m);break;case"xlinkActuate":an(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":an(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":an(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":an(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":an(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":an(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":an(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":an(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":an(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Gd(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=LM.get(d)||d,Gd(o,d,m))}}function y0(o,l,d,m,v,_){switch(d){case"style":i_(o,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"children":typeof m=="string"?Yi(o,m):(typeof m=="number"||typeof m=="bigint")&&Yi(o,""+m);break;case"onScroll":m!=null&&xt("scroll",o);break;case"onScrollEnd":m!=null&&xt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=zf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wb.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),_=o[Vt]||null,_=_!=null?_[d]:null,typeof _=="function"&&o.removeEventListener(l,_,v),typeof m=="function")){typeof _!="function"&&_!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,m,v);break e}d in o?o[d]=m:m===!0?o.setAttribute(d,""):Gd(o,d,m)}}}function Bs(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",o),xt("load",o);var m=!1,v=!1,_;for(_ in d)if(d.hasOwnProperty(_)){var T=d[_];if(T!=null)switch(_){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ot(o,l,_,T,d,null)}}v&&Ot(o,l,"srcSet",d.srcSet,d,null),m&&Ot(o,l,"src",d.src,d,null);return;case"input":xt("invalid",o);var O=_=T=v=null,F=null,se=null;for(m in d)if(d.hasOwnProperty(m)){var me=d[m];if(me!=null)switch(m){case"name":v=me;break;case"type":T=me;break;case"checked":F=me;break;case"defaultChecked":se=me;break;case"value":_=me;break;case"defaultValue":O=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,l));break;default:Ot(o,l,m,me,d,null)}}a_(o,_,O,F,se,T,v,!1),Yd(o);return;case"select":xt("invalid",o),m=T=_=null;for(v in d)if(d.hasOwnProperty(v)&&(O=d[v],O!=null))switch(v){case"value":_=O;break;case"defaultValue":T=O;break;case"multiple":m=O;default:Ot(o,l,v,O,d,null)}l=_,d=T,o.multiple=!!m,l!=null?Xi(o,!!m,l,!1):d!=null&&Xi(o,!!m,d,!0);return;case"textarea":xt("invalid",o),_=v=m=null;for(T in d)if(d.hasOwnProperty(T)&&(O=d[T],O!=null))switch(T){case"value":m=O;break;case"defaultValue":v=O;break;case"children":_=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(91));break;default:Ot(o,l,T,O,d,null)}n_(o,m,v,_),Yd(o);return;case"option":for(F in d)if(d.hasOwnProperty(F)&&(m=d[F],m!=null))switch(F){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ot(o,l,F,m,d,null)}return;case"dialog":xt("beforetoggle",o),xt("toggle",o),xt("cancel",o),xt("close",o);break;case"iframe":case"object":xt("load",o);break;case"video":case"audio":for(m=0;m<xu.length;m++)xt(xu[m],o);break;case"image":xt("error",o),xt("load",o);break;case"details":xt("toggle",o);break;case"embed":case"source":case"link":xt("error",o),xt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in d)if(d.hasOwnProperty(se)&&(m=d[se],m!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ot(o,l,se,m,d,null)}return;default:if(Op(l)){for(me in d)d.hasOwnProperty(me)&&(m=d[me],m!==void 0&&y0(o,l,me,m,d,void 0));return}}for(O in d)d.hasOwnProperty(O)&&(m=d[O],m!=null&&Ot(o,l,O,m,d,null))}function l3(o,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,T=null,O=null,F=null,se=null,me=null;for(oe in d){var xe=d[oe];if(d.hasOwnProperty(oe)&&xe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":F=xe;default:m.hasOwnProperty(oe)||Ot(o,l,oe,null,m,xe)}}for(var re in m){var oe=m[re];if(xe=d[re],m.hasOwnProperty(re)&&(oe!=null||xe!=null))switch(re){case"type":_=oe;break;case"name":v=oe;break;case"checked":se=oe;break;case"defaultChecked":me=oe;break;case"value":T=oe;break;case"defaultValue":O=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,l));break;default:oe!==xe&&Ot(o,l,re,oe,m,xe)}}Pp(o,T,O,F,se,me,_,v);return;case"select":oe=T=O=re=null;for(_ in d)if(F=d[_],d.hasOwnProperty(_)&&F!=null)switch(_){case"value":break;case"multiple":oe=F;default:m.hasOwnProperty(_)||Ot(o,l,_,null,m,F)}for(v in m)if(_=m[v],F=d[v],m.hasOwnProperty(v)&&(_!=null||F!=null))switch(v){case"value":re=_;break;case"defaultValue":O=_;break;case"multiple":T=_;default:_!==F&&Ot(o,l,v,_,m,F)}l=O,d=T,m=oe,re!=null?Xi(o,!!d,re,!1):!!m!=!!d&&(l!=null?Xi(o,!!d,l,!0):Xi(o,!!d,d?[]:"",!1));return;case"textarea":oe=re=null;for(O in d)if(v=d[O],d.hasOwnProperty(O)&&v!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ot(o,l,O,null,m,v)}for(T in m)if(v=m[T],_=d[T],m.hasOwnProperty(T)&&(v!=null||_!=null))switch(T){case"value":re=v;break;case"defaultValue":oe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:v!==_&&Ot(o,l,T,v,m,_)}r_(o,re,oe);return;case"option":for(var Qe in d)if(re=d[Qe],d.hasOwnProperty(Qe)&&re!=null&&!m.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Ot(o,l,Qe,null,m,re)}for(F in m)if(re=m[F],oe=d[F],m.hasOwnProperty(F)&&re!==oe&&(re!=null||oe!=null))switch(F){case"selected":o.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Ot(o,l,F,re,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in d)re=d[Ye],d.hasOwnProperty(Ye)&&re!=null&&!m.hasOwnProperty(Ye)&&Ot(o,l,Ye,null,m,re);for(se in m)if(re=m[se],oe=d[se],m.hasOwnProperty(se)&&re!==oe&&(re!=null||oe!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(a(137,l));break;default:Ot(o,l,se,re,m,oe)}return;default:if(Op(l)){for(var $t in d)re=d[$t],d.hasOwnProperty($t)&&re!==void 0&&!m.hasOwnProperty($t)&&y0(o,l,$t,void 0,m,re);for(me in m)re=m[me],oe=d[me],!m.hasOwnProperty(me)||re===oe||re===void 0&&oe===void 0||y0(o,l,me,re,m,oe);return}}for(var J in d)re=d[J],d.hasOwnProperty(J)&&re!=null&&!m.hasOwnProperty(J)&&Ot(o,l,J,null,m,re);for(xe in m)re=m[xe],oe=d[xe],!m.hasOwnProperty(xe)||re===oe||re==null&&oe==null||Ot(o,l,xe,re,m,oe)}var b0=null,_0=null;function Ff(o){return o.nodeType===9?o:o.ownerDocument}function oj(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ij(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function w0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var j0=null;function c3(){var o=window.event;return o&&o.type==="popstate"?o===j0?!1:(j0=o,!0):(j0=null,!1)}var lj=typeof setTimeout=="function"?setTimeout:void 0,u3=typeof clearTimeout=="function"?clearTimeout:void 0,cj=typeof Promise=="function"?Promise:void 0,d3=typeof queueMicrotask=="function"?queueMicrotask:typeof cj<"u"?function(o){return cj.resolve(null).then(o).catch(f3)}:lj;function f3(o){setTimeout(function(){throw o})}function Zn(o){return o==="head"}function uj(o,l){var d=l,m=0,v=0;do{var _=d.nextSibling;if(o.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(0<m&&8>m){d=m;var T=o.ownerDocument;if(d&1&&yu(T.documentElement),d&2&&yu(T.body),d&4)for(d=T.head,yu(d),T=d.firstChild;T;){var O=T.nextSibling,F=T.nodeName;T[Dc]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=O}}if(v===0){o.removeChild(_),Cu(l);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=_}while(d);Cu(l)}function N0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":N0(d),Ap(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function h3(o,l,d,m){for(;o.nodeType===1;){var v=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Dc])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=fr(o.nextSibling),o===null)break}return null}function m3(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=fr(o.nextSibling),o===null))return null;return o}function S0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function p3(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function fr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var E0=null;function dj(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function fj(o,l,d){switch(l=Ff(d),o){case"html":if(o=l.documentElement,!o)throw Error(a(452));return o;case"head":if(o=l.head,!o)throw Error(a(453));return o;case"body":if(o=l.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function yu(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Ap(o)}var Wa=new Map,hj=new Set;function Hf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var vn=I.d;I.d={f:g3,r:x3,D:v3,C:y3,L:b3,m:_3,X:j3,S:w3,M:N3};function g3(){var o=vn.f(),l=$f();return o||l}function x3(o){var l=zi(o);l!==null&&l.tag===5&&l.type==="form"?Pw(l):vn.r(o)}var jl=typeof document>"u"?null:document;function mj(o,l,d){var m=jl;if(m&&typeof l=="string"&&l){var v=za(l);v='link[rel="'+o+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),hj.has(v)||(hj.add(v),o={rel:o,crossOrigin:d,href:l},m.querySelector(v)===null&&(l=m.createElement("link"),Bs(l,"link",o),Ns(l),m.head.appendChild(l)))}}function v3(o){vn.D(o),mj("dns-prefetch",o,null)}function y3(o,l){vn.C(o,l),mj("preconnect",o,l)}function b3(o,l,d){vn.L(o,l,d);var m=jl;if(m&&o&&l){var v='link[rel="preload"][as="'+za(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+za(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+za(d.imageSizes)+'"]')):v+='[href="'+za(o)+'"]';var _=v;switch(l){case"style":_=Nl(o);break;case"script":_=Sl(o)}Wa.has(_)||(o=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),Wa.set(_,o),m.querySelector(v)!==null||l==="style"&&m.querySelector(bu(_))||l==="script"&&m.querySelector(_u(_))||(l=m.createElement("link"),Bs(l,"link",o),Ns(l),m.head.appendChild(l)))}}function _3(o,l){vn.m(o,l);var d=jl;if(d&&o){var m=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+za(m)+'"][href="'+za(o)+'"]',_=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Sl(o)}if(!Wa.has(_)&&(o=p({rel:"modulepreload",href:o},l),Wa.set(_,o),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(_u(_)))return}m=d.createElement("link"),Bs(m,"link",o),Ns(m),d.head.appendChild(m)}}}function w3(o,l,d){vn.S(o,l,d);var m=jl;if(m&&o){var v=Fi(m).hoistableStyles,_=Nl(o);l=l||"default";var T=v.get(_);if(!T){var O={loading:0,preload:null};if(T=m.querySelector(bu(_)))O.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},d),(d=Wa.get(_))&&C0(o,d);var F=T=m.createElement("link");Ns(F),Bs(F,"link",o),F._p=new Promise(function(se,me){F.onload=se,F.onerror=me}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Gf(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:O},v.set(_,T)}}}function j3(o,l){vn.X(o,l);var d=jl;if(d&&o){var m=Fi(d).hoistableScripts,v=Sl(o),_=m.get(v);_||(_=d.querySelector(_u(v)),_||(o=p({src:o,async:!0},l),(l=Wa.get(v))&&k0(o,l),_=d.createElement("script"),Ns(_),Bs(_,"link",o),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function N3(o,l){vn.M(o,l);var d=jl;if(d&&o){var m=Fi(d).hoistableScripts,v=Sl(o),_=m.get(v);_||(_=d.querySelector(_u(v)),_||(o=p({src:o,async:!0,type:"module"},l),(l=Wa.get(v))&&k0(o,l),_=d.createElement("script"),Ns(_),Bs(_,"link",o),d.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(v,_))}}function pj(o,l,d,m){var v=(v=ae.current)?Hf(v):null;if(!v)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Nl(d.href),d=Fi(v).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=Nl(d.href);var _=Fi(v).hoistableStyles,T=_.get(o);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,T),(_=v.querySelector(bu(o)))&&!_._p&&(T.instance=_,T.state.loading=5),Wa.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Wa.set(o,d),_||S3(v,o,d,T.state))),l&&m===null)throw Error(a(528,""));return T}if(l&&m!==null)throw Error(a(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Sl(d),d=Fi(v).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function Nl(o){return'href="'+za(o)+'"'}function bu(o){return'link[rel="stylesheet"]['+o+"]"}function gj(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function S3(o,l,d,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Bs(l,"link",d),Ns(l),o.head.appendChild(l))}function Sl(o){return'[src="'+za(o)+'"]'}function _u(o){return"script[async]"+o}function xj(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+za(d.href)+'"]');if(m)return l.instance=m,Ns(m),m;var v=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),Ns(m),Bs(m,"style",v),Gf(m,d.precedence,o),l.instance=m;case"stylesheet":v=Nl(d.href);var _=o.querySelector(bu(v));if(_)return l.state.loading|=4,l.instance=_,Ns(_),_;m=gj(d),(v=Wa.get(v))&&C0(m,v),_=(o.ownerDocument||o).createElement("link"),Ns(_);var T=_;return T._p=new Promise(function(O,F){T.onload=O,T.onerror=F}),Bs(_,"link",m),l.state.loading|=4,Gf(_,d.precedence,o),l.instance=_;case"script":return _=Sl(d.src),(v=o.querySelector(_u(_)))?(l.instance=v,Ns(v),v):(m=d,(v=Wa.get(_))&&(m=p({},d),k0(m,v)),o=o.ownerDocument||o,v=o.createElement("script"),Ns(v),Bs(v,"link",m),o.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(a(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Gf(m,d.precedence,o));return l.instance}function Gf(o,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,_=v,T=0;T<m.length;T++){var O=m[T];if(O.dataset.precedence===l)_=O;else if(_!==v)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function C0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function k0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Xf=null;function vj(o,l,d){if(Xf===null){var m=new Map,v=Xf=new Map;v.set(d,m)}else v=Xf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(o))return m;for(m.set(o,null),d=d.getElementsByTagName(o),v=0;v<d.length;v++){var _=d[v];if(!(_[Dc]||_[as]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(l)||"";T=o+T;var O=m.get(T);O?O.push(_):m.set(T,[_])}}return m}function yj(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function E3(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function bj(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var wu=null;function C3(){}function k3(o,l,d){if(wu===null)throw Error(a(475));var m=wu;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Nl(d.href),_=o.querySelector(bu(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=Yf.bind(m),o.then(m,m)),l.state.loading|=4,l.instance=_,Ns(_);return}_=o.ownerDocument||o,d=gj(d),(v=Wa.get(v))&&C0(d,v),_=_.createElement("link"),Ns(_);var T=_;T._p=new Promise(function(O,F){T.onload=O,T.onerror=F}),Bs(_,"link",d),l.instance=_}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Yf.bind(m),o.addEventListener("load",l),o.addEventListener("error",l))}}function A3(){if(wu===null)throw Error(a(475));var o=wu;return o.stylesheets&&o.count===0&&A0(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&A0(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function Yf(){if(this.count--,this.count===0){if(this.stylesheets)A0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Kf=null;function A0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Kf=new Map,l.forEach(T3,o),Kf=null,Yf.call(o))}function T3(o,l){if(!(l.state.loading&4)){var d=Kf.get(o);if(d)var m=d.get(null);else{d=new Map,Kf.set(o,d);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var T=v[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}v=l.instance,T=v.getAttribute("data-precedence"),_=d.get(T)||m,_===m&&d.set(null,v),d.set(T,v),this.count++,m=Yf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),_?_.parentNode.insertBefore(v,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),l.state.loading|=4}}var ju={$$typeof:S,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function R3(o,l,d,m,v,_,T,O){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Os(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.hiddenUpdates=Os(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function _j(o,l,d,m,v,_,T,O,F,se,me,xe){return o=new R3(o,l,d,T,O,F,se,xe),l=1,_===!0&&(l|=24),_=Ca(3,null,null,l),o.current=_,_.stateNode=o,l=ug(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:m,isDehydrated:d,cache:l},mg(_),o}function wj(o){return o?(o=sl,o):sl}function jj(o,l,d,m,v,_){v=wj(v),m.context===null?m.context=v:m.pendingContext=v,m=In(l),m.payload={element:d},_=_===void 0?null:_,_!==null&&(m.callback=_),d=Bn(o,m,l),d!==null&&(Ma(d,o,l),Jc(d,o,l))}function Nj(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function T0(o,l){Nj(o,l),(o=o.alternate)&&Nj(o,l)}function Sj(o){if(o.tag===13){var l=tl(o,67108864);l!==null&&Ma(l,o,67108864),T0(o,67108864)}}var Wf=!0;function M3(o,l,d,m){var v=A.T;A.T=null;var _=I.p;try{I.p=2,R0(o,l,d,m)}finally{I.p=_,A.T=v}}function P3(o,l,d,m){var v=A.T;A.T=null;var _=I.p;try{I.p=8,R0(o,l,d,m)}finally{I.p=_,A.T=v}}function R0(o,l,d,m){if(Wf){var v=M0(m);if(v===null)v0(o,l,m,Zf,d),Cj(o,m);else if(O3(v,o,l,d,m))m.stopPropagation();else if(Cj(o,m),l&4&&-1<D3.indexOf(o)){for(;v!==null;){var _=zi(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=ra(_.pendingLanes);if(T!==0){var O=_;for(O.pendingLanes|=2,O.entangledLanes|=2;T;){var F=1<<31-wt(T);O.entanglements[1]|=F,T&=~F}$r(_),(Rt&6)===0&&(Df=Te()+500,gu(0))}}break;case 13:O=tl(_,2),O!==null&&Ma(O,_,2),$f(),T0(_,2)}if(_=M0(m),_===null&&v0(o,l,m,Zf,d),_===v)break;v=_}v!==null&&m.stopPropagation()}else v0(o,l,m,null,d)}}function M0(o){return o=Lp(o),P0(o)}var Zf=null;function P0(o){if(Zf=null,o=Ui(o),o!==null){var l=i(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=c(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Zf=o,null}function Ej(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(et()){case Ae:return 2;case U:return 8;case G:case Z:return 32;case ye:return 268435456;default:return 32}default:return 32}}var D0=!1,Qn=null,Jn=null,eo=null,Nu=new Map,Su=new Map,to=[],D3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cj(o,l){switch(o){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Nu.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(l.pointerId)}}function Eu(o,l,d,m,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},l!==null&&(l=zi(l),l!==null&&Sj(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function O3(o,l,d,m,v){switch(l){case"focusin":return Qn=Eu(Qn,o,l,d,m,v),!0;case"dragenter":return Jn=Eu(Jn,o,l,d,m,v),!0;case"mouseover":return eo=Eu(eo,o,l,d,m,v),!0;case"pointerover":var _=v.pointerId;return Nu.set(_,Eu(Nu.get(_)||null,o,l,d,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Su.set(_,Eu(Su.get(_)||null,o,l,d,m,v)),!0}return!1}function kj(o){var l=Ui(o.target);if(l!==null){var d=i(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){o.blockedOn=l,xs(o.priority,function(){if(d.tag===13){var m=Ra();m=fs(m);var v=tl(d,m);v!==null&&Ma(v,d,m),T0(d,m)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Qf(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=M0(o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);$p=m,d.target.dispatchEvent(m),$p=null}else return l=zi(d),l!==null&&Sj(l),o.blockedOn=d,!1;l.shift()}return!0}function Aj(o,l,d){Qf(o)&&d.delete(l)}function $3(){D0=!1,Qn!==null&&Qf(Qn)&&(Qn=null),Jn!==null&&Qf(Jn)&&(Jn=null),eo!==null&&Qf(eo)&&(eo=null),Nu.forEach(Aj),Su.forEach(Aj)}function Jf(o,l){o.blockedOn===l&&(o.blockedOn=null,D0||(D0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,$3)))}var eh=null;function Tj(o){eh!==o&&(eh=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){eh===o&&(eh=null);for(var l=0;l<o.length;l+=3){var d=o[l],m=o[l+1],v=o[l+2];if(typeof m!="function"){if(P0(m||d)===null)continue;break}var _=zi(d);_!==null&&(o.splice(l,3),l-=3,Pg(_,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Cu(o){function l(F){return Jf(F,o)}Qn!==null&&Jf(Qn,o),Jn!==null&&Jf(Jn,o),eo!==null&&Jf(eo,o),Nu.forEach(l),Su.forEach(l);for(var d=0;d<to.length;d++){var m=to[d];m.blockedOn===o&&(m.blockedOn=null)}for(;0<to.length&&(d=to[0],d.blockedOn===null);)kj(d),d.blockedOn===null&&to.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],_=d[m+1],T=v[Vt]||null;if(typeof _=="function")T||Tj(d);else if(T){var O=null;if(_&&_.hasAttribute("formAction")){if(v=_,T=_[Vt]||null)O=T.formAction;else if(P0(v)!==null)continue}else O=T.action;typeof O=="function"?d[m+1]=O:(d.splice(m,3),m-=3),Tj(d)}}}function O0(o){this._internalRoot=o}th.prototype.render=O0.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(a(409));var d=l.current,m=Ra();jj(d,m,o,l,null,null)},th.prototype.unmount=O0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;jj(o.current,2,null,o,null,null),$f(),l[js]=null}};function th(o){this._internalRoot=o}th.prototype.unstable_scheduleHydration=function(o){if(o){var l=zo();o={blockedOn:null,target:o,priority:l};for(var d=0;d<to.length&&l!==0&&l<to[d].priority;d++);to.splice(d,0,o),d===0&&kj(o)}};var Rj=e.version;if(Rj!=="19.1.0")throw Error(a(527,Rj,"19.1.0"));I.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=f(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var L3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{De=sh.inject(L3),Xe=sh}catch{}}return Au.createRoot=function(o,l){if(!n(o))throw Error(a(299));var d=!1,m="",v=Xw,_=Yw,T=Kw,O=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(O=l.unstable_transitionCallbacks)),l=_j(o,1,!1,null,null,d,m,v,_,T,O,null),o[js]=l.current,x0(o),new O0(l)},Au.hydrateRoot=function(o,l,d){if(!n(o))throw Error(a(299));var m=!1,v="",_=Xw,T=Yw,O=Kw,F=null,se=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(F=d.unstable_transitionCallbacks),d.formState!==void 0&&(se=d.formState)),l=_j(o,1,!0,l,d??null,m,v,_,T,O,F,se),l.context=wj(null),d=l.current,m=Ra(),m=fs(m),v=In(m),v.callback=null,Bn(d,v,m),d=m,l.current.lanes=d,ha(l,d),$r(l),o[js]=l.current,x0(o),new th(l)},Au.version="19.1.0",Au}var qj;function W3(){if(qj)return I0.exports;qj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I0.exports=K3(),I0.exports}var Z3=W3();const Q3=Pm(Z3);var J3="Invariant failed";function Nn(t,e){if(!t)throw new Error(J3)}const tc=new WeakMap,Ch=new WeakMap,zh={current:[]};let U0=!1,td=0;const Iu=new Set,ah=new Map;function vE(t){const e=Array.from(t).sort((s,a)=>s instanceof sc&&s.options.deps.includes(a)?1:a instanceof sc&&a.options.deps.includes(s)?-1:0);for(const s of e){if(zh.current.includes(s))continue;zh.current.push(s),s.recompute();const a=Ch.get(s);if(a)for(const n of a){const i=tc.get(n);i&&vE(i)}}}function eP(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function tP(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function yE(t){if(td>0&&!ah.has(t)&&ah.set(t,t.prevState),Iu.add(t),!(td>0)&&!U0)try{for(U0=!0;Iu.size>0;){const e=Array.from(Iu);Iu.clear();for(const s of e){const a=ah.get(s)??s.prevState;s.prevState=a,eP(s)}for(const s of e){const a=tc.get(s);a&&(zh.current.push(s),vE(a))}for(const s of e){const a=tc.get(s);if(a)for(const n of a)tP(n)}}}finally{U0=!1,zh.current=[],ah.clear()}}function El(t){td++;try{t()}finally{if(td--,td===0){const e=Array.from(Iu)[0];e&&yE(e)}}}function sP(t){return typeof t=="function"}class Ix{constructor(e,s){this.listeners=new Set,this.subscribe=a=>{var n,i;this.listeners.add(a);const c=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,a,this);return()=>{this.listeners.delete(a),c==null||c()}},this.prevState=e,this.state=e,this.options=s}setState(e){var s,a,n;this.prevState=this.state,(s=this.options)!=null&&s.updateFn?this.state=this.options.updateFn(this.prevState)(e):sP(e)?this.state=e(this.prevState):this.state=e,(n=(a=this.options)==null?void 0:a.onUpdate)==null||n.call(a),yE(this)}}class sc{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const s=[],a=[];for(const n of this.options.deps)s.push(n.prevState),a.push(n.state);return this.lastSeenDepValues=a,{prevDepVals:s,currDepVals:a,prevVal:this.prevState??void 0}},this.recompute=()=>{var s,a;this.prevState=this.state;const{prevDepVals:n,currDepVals:i,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:n,currDepVals:i,prevVal:c}),(a=(s=this.options).onUpdate)==null||a.call(s)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof sc&&i.checkIfRecalculationNeededDeeply();let s=!1;const a=this.lastSeenDepValues,{currDepVals:n}=this.getDepVals();for(let i=0;i<n.length;i++)if(n[i]!==a[i]){s=!0;break}s&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const s of this._subscriptions)s()}),this.subscribe=s=>{var a,n;this.listeners.add(s);const i=(n=(a=this.options).onSubscribe)==null?void 0:n.call(a,s,this);return()=>{this.listeners.delete(s),i==null||i()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const s of e)if(s instanceof sc)s.registerOnGraph(),this.registerOnGraph(s.options.deps);else if(s instanceof Ix){let a=tc.get(s);a||(a=new Set,tc.set(s,a)),a.add(this);let n=Ch.get(this);n||(n=new Set,Ch.set(this,n)),n.add(s)}}unregisterFromGraph(e=this.options.deps){for(const s of e)if(s instanceof sc)this.unregisterFromGraph(s.options.deps);else if(s instanceof Ix){const a=tc.get(s);a&&a.delete(this);const n=Ch.get(this);n&&n.delete(s)}}}const bo="__TSR_index",Uj="popstate",zj="beforeunload";function bE(t){let e=t.getLocation();const s=new Set,a=c=>{e=t.getLocation(),s.forEach(u=>u({location:e,action:c}))},n=c=>{t.notifyOnIndexChange??!0?a(c):e=t.getLocation()},i=async({task:c,navigateOpts:u,...f})=>{var h,p;if((u==null?void 0:u.ignoreBlocker)??!1){c();return}const x=((h=t.getBlockers)==null?void 0:h.call(t))??[],b=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&x.length&&b)for(const j of x){const w=pd(f.path,f.state);if(await j.blockerFn({currentLocation:e,nextLocation:w,action:f.type})){(p=t.onBlocked)==null||p.call(t);return}}c()};return{get location(){return e},get length(){return t.getLength()},subscribers:s,subscribe:c=>(s.add(c),()=>{s.delete(c)}),push:(c,u,f)=>{const h=e.state[bo];u=Bx(h+1,u),i({task:()=>{t.pushState(c,u),a({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:c,state:u})},replace:(c,u,f)=>{const h=e.state[bo];u=Bx(h,u),i({task:()=>{t.replaceState(c,u),a({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:c,state:u})},go:(c,u)=>{i({task:()=>{t.go(c),n({type:"GO",index:c})},navigateOpts:u,type:"GO"})},back:c=>{i({task:()=>{t.back((c==null?void 0:c.ignoreBlocker)??!1),n({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{i({task:()=>{t.forward((c==null?void 0:c.ignoreBlocker)??!1),n({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[bo]!==0,createHref:c=>t.createHref(c),block:c=>{var u;if(!t.setBlockers)return()=>{};const f=((u=t.getBlockers)==null?void 0:u.call(t))??[];return t.setBlockers([...f,c]),()=>{var h,p;const g=((h=t.getBlockers)==null?void 0:h.call(t))??[];(p=t.setBlockers)==null||p.call(t,g.filter(x=>x!==c))}},flush:()=>{var c;return(c=t.flush)==null?void 0:c.call(t)},destroy:()=>{var c;return(c=t.destroy)==null?void 0:c.call(t)},notify:a}}function Bx(t,e){return e||(e={}),{...e,key:ny(),[bo]:t}}function aP(t){var e;const s=typeof document<"u"?window:void 0,a=s.history.pushState,n=s.history.replaceState;let i=[];const c=()=>i,u=M=>i=M,f=M=>M,h=()=>pd(`${s.location.pathname}${s.location.search}${s.location.hash}`,s.history.state);(e=s.history.state)!=null&&e.key||s.history.replaceState({[bo]:0,key:ny()},"");let p=h(),g,x=!1,b=!1,j=!1,w=!1;const N=()=>p;let E,C;const S=()=>{E&&(k._ignoreSubscribers=!0,(E.isPush?s.history.pushState:s.history.replaceState)(E.state,"",E.href),k._ignoreSubscribers=!1,E=void 0,C=void 0,g=void 0)},P=(M,V,Y)=>{const B=f(V);C||(g=p),p=pd(V,Y),E={href:B,state:Y,isPush:(E==null?void 0:E.isPush)||M==="push"},C||(C=Promise.resolve().then(()=>S()))},R=M=>{p=h(),k.notify({type:M})},D=async()=>{if(b){b=!1;return}const M=h(),V=M.state[bo]-p.state[bo],Y=V===1,B=V===-1,z=!Y&&!B||x;x=!1;const Q=z?"GO":B?"BACK":"FORWARD",H=z?{type:"GO",index:V}:{type:B?"BACK":"FORWARD"};if(j)j=!1;else{const A=c();if(typeof document<"u"&&A.length){for(const I of A)if(await I.blockerFn({currentLocation:p,nextLocation:M,action:Q})){b=!0,s.history.go(1),k.notify(H);return}}}p=h(),k.notify(H)},$=M=>{if(w){w=!1;return}let V=!1;const Y=c();if(typeof document<"u"&&Y.length)for(const B of Y){const z=B.enableBeforeUnload??!0;if(z===!0){V=!0;break}if(typeof z=="function"&&z()===!0){V=!0;break}}if(V)return M.preventDefault(),M.returnValue=""},k=bE({getLocation:N,getLength:()=>s.history.length,pushState:(M,V)=>P("push",M,V),replaceState:(M,V)=>P("replace",M,V),back:M=>(M&&(j=!0),w=!0,s.history.back()),forward:M=>{M&&(j=!0),w=!0,s.history.forward()},go:M=>{x=!0,s.history.go(M)},createHref:M=>f(M),flush:S,destroy:()=>{s.history.pushState=a,s.history.replaceState=n,s.removeEventListener(zj,$,{capture:!0}),s.removeEventListener(Uj,D)},onBlocked:()=>{g&&p!==g&&(p=g)},getBlockers:c,setBlockers:u,notifyOnIndexChange:!1});return s.addEventListener(zj,$,{capture:!0}),s.addEventListener(Uj,D),s.history.pushState=function(...M){const V=a.apply(s.history,M);return k._ignoreSubscribers||R("PUSH"),V},s.history.replaceState=function(...M){const V=n.apply(s.history,M);return k._ignoreSubscribers||R("REPLACE"),V},k}function rP(t={initialEntries:["/"]}){const e=t.initialEntries;let s=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const a=e.map((i,c)=>Bx(c,void 0));return bE({getLocation:()=>pd(e[s],a[s]),getLength:()=>e.length,pushState:(i,c)=>{s<e.length-1&&(e.splice(s+1),a.splice(s+1)),a.push(c),e.push(i),s=Math.max(e.length-1,0)},replaceState:(i,c)=>{a[s]=c,e[s]=i},back:()=>{s=Math.max(s-1,0)},forward:()=>{s=Math.min(s+1,e.length-1)},go:i=>{s=Math.min(Math.max(s+i,0),e.length-1)},createHref:i=>i})}function pd(t,e){const s=t.indexOf("#"),a=t.indexOf("?");return{href:t,pathname:t.substring(0,s>0?a>0?Math.min(s,a):s:a>0?a:t.length),hash:s>-1?t.substring(s):"",search:a>-1?t.slice(a,s===-1?void 0:s):"",state:e||{[bo]:0,key:ny()}}}function ny(){return(Math.random()+1).toString(36).substring(7)}function Xl(t){return t[t.length-1]}function nP(t){return typeof t=="function"}function xi(t,e){return nP(t)?t(e):t}function Vx(t,e){return e.reduce((s,a)=>(s[a]=t[a],s),{})}function Ja(t,e){if(t===e)return t;const s=e,a=Gj(t)&&Gj(s);if(a||Fj(t)&&Fj(s)){const n=a?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),i=n.length,c=a?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),u=c.length,f=a?[]:{};let h=0;for(let p=0;p<u;p++){const g=a?p:c[p];(!a&&n.includes(g)||a)&&t[g]===void 0&&s[g]===void 0?(f[g]=void 0,h++):(f[g]=Ja(t[g],s[g]),f[g]===t[g]&&t[g]!==void 0&&h++)}return i===u&&h===i?t:f}return s}function Fj(t){return qx(t)&&Object.getOwnPropertyNames(t).length===Object.keys(t).length}function qx(t){if(!Hj(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const s=e.prototype;return!(!Hj(s)||!s.hasOwnProperty("isPrototypeOf"))}function Hj(t){return Object.prototype.toString.call(t)==="[object Object]"}function Gj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xj(t,e){let s=Object.keys(t);return e&&(s=s.filter(a=>t[a]!==void 0)),s}function ac(t,e,s){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(qx(t)&&qx(e)){const a=(s==null?void 0:s.ignoreUndefined)??!0,n=Xj(t,a),i=Xj(e,a);return!(s!=null&&s.partial)&&n.length!==i.length?!1:i.every(c=>ac(t[c],e[c],s))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((a,n)=>!ac(a,e[n],s)):!1}function zl(t){let e,s;const a=new Promise((n,i)=>{e=n,s=i});return a.status="pending",a.resolve=n=>{a.status="resolved",a.value=n,e(n),t==null||t(n)},a.reject=n=>{a.status="rejected",s(n)},a}function Sn(t){return Dm(t.filter(e=>e!==void 0).join("/"))}function Dm(t){return t.replace(/\/{2,}/g,"/")}function oy(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function vi(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function oP(t){return vi(oy(t))}function Fh(t,e){return t!=null&&t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function iP(t,e,s){return Fh(t,s)===Fh(e,s)}function lP({basepath:t,base:e,to:s,trailingSlash:a="never",caseSensitive:n}){var i,c;e=Hh(t,e,n),s=Hh(t,s,n);let u=lc(e);const f=lc(s);u.length>1&&((i=Xl(u))==null?void 0:i.value)==="/"&&u.pop(),f.forEach((p,g)=>{p.value==="/"?g?g===f.length-1&&u.push(p):u=[p]:p.value===".."?u.pop():p.value==="."||u.push(p)}),u.length>1&&(((c=Xl(u))==null?void 0:c.value)==="/"?a==="never"&&u.pop():a==="always"&&u.push({type:"pathname",value:"/"}));const h=Sn([t,...u.map(p=>p.value)]);return Dm(h)}function lc(t){if(!t)return[];t=Dm(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const s=t.split("/").filter(Boolean);return e.push(...s.map(a=>a==="$"||a==="*"?{type:"wildcard",value:a}:a.charAt(0)==="$"?{type:"param",value:a}:{type:"pathname",value:a.includes("%25")?a.split("%25").map(n=>decodeURI(n)).join("%25"):decodeURI(a)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function rh({path:t,params:e,leaveWildcards:s,leaveParams:a,decodeCharMap:n}){const i=lc(t);function c(p){const g=e[p],x=typeof g=="string";return["*","_splat"].includes(p)?x?encodeURI(g):g:x?cP(g,n):g}let u=!1;const f={},h=Sn(i.map(p=>{if(p.type==="wildcard"){f._splat=e._splat;const g=c("_splat");return s?`${p.value}${g??""}`:g}if(p.type==="param"){const g=p.value.substring(1);if(!u&&!(g in e)&&(u=!0),f[g]=e[g],a){const x=c(p.value);return`${p.value}${x??""}`}return c(g)??"undefined"}return p.value}));return{usedParams:f,interpolatedPath:h,isMissingParams:u}}function cP(t,e){let s=encodeURIComponent(t);if(e)for(const[a,n]of e)s=s.replaceAll(a,n);return s}function nh(t,e,s){const a=uP(t,e,s);if(!(s.to&&!a))return a??{}}function Hh(t,e,s=!1){const a=s?t:t.toLowerCase(),n=s?e:e.toLowerCase();switch(!0){case a==="/":return e;case n===a:return"";case e.length<t.length:return e;case n[a.length]!=="/":return e;case n.startsWith(a):return e.slice(t.length);default:return e}}function uP(t,e,s){if(t!=="/"&&!e.startsWith(t))return;e=Hh(t,e,s.caseSensitive);const a=Hh(t,`${s.to??"$"}`,s.caseSensitive),n=lc(e),i=lc(a);e.startsWith("/")||n.unshift({type:"pathname",value:"/"}),a.startsWith("/")||i.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let f=0;f<Math.max(n.length,i.length);f++){const h=n[f],p=i[f],g=f>=n.length-1,x=f>=i.length-1;if(p){if(p.type==="wildcard"){const b=decodeURI(Sn(n.slice(f).map(j=>j.value)));return c["*"]=b,c._splat=b,!0}if(p.type==="pathname"){if(p.value==="/"&&!(h!=null&&h.value))return!0;if(h){if(s.caseSensitive){if(p.value!==h.value)return!1}else if(p.value.toLowerCase()!==h.value.toLowerCase())return!1}}if(!h)return!1;if(p.type==="param"){if(h.value==="/")return!1;h.value.charAt(0)!=="$"&&(c[p.value.substring(1)]=decodeURIComponent(h.value))}}if(!g&&x)return c["**"]=Sn(n.slice(f+1).map(b=>b.value)),!!s.fuzzy&&(p==null?void 0:p.value)!=="/"}return!0})()?c:void 0}function tr(t){return!!(t!=null&&t.isNotFound)}function dP(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Gh="tsr-scroll-restoration-v1_3",fP=(t,e)=>{let s;return(...a)=>{s||(s=setTimeout(()=>{t(...a),s=null},e))}};function hP(){const t=dP();if(!t)return;const e=t.getItem(Gh);let s=e?JSON.parse(e):{};return{state:s,set:a=>(s=xi(a,s)||s,t.setItem(Gh,JSON.stringify(s)))}}const z0=hP(),Ux=t=>t.state.key||t.href;function mP(t){const e=[];let s;for(;s=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(s.children,t)+1})`),t=s;return`${e.join(" > ")}`.toLowerCase()}let Xh=!1;function _E(t,e,s,a,n){var i;let c;try{c=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const u=e||((i=window.history.state)==null?void 0:i.key),f=c[u];Xh=!0,(()=>{if(a&&f){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:s});else if(p){const x=document.querySelector(p);x&&(x.scrollLeft=g.scrollX,x.scrollTop=g.scrollY)}}return}const h=window.location.hash.split("#")[1];if(h){const p=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(h);g&&g.scrollIntoView(p)}return}["window",...(n==null?void 0:n.filter(p=>p!=="window"))??[]].forEach(p=>{const g=p==="window"?window:typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo({top:0,left:0,behavior:s})})})(),Xh=!1}function pP(t,e){if(z0===void 0||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),typeof document>"u"||t.isScrollRestorationSetup))return;t.isScrollRestorationSetup=!0,Xh=!1;const a=t.options.getScrollRestorationKey||Ux;window.history.scrollRestoration="manual";const n=i=>{if(Xh||!t.isScrollRestoring)return;let c="";if(i.target===document||i.target===window)c="window";else{const f=i.target.getAttribute("data-scroll-restoration-id");f?c=`[data-scroll-restoration-id="${f}"]`:c=mP(i.target)}const u=a(t.state.location);z0.set(f=>{const h=f[u]=f[u]||{},p=h[c]=h[c]||{};if(c==="window")p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(c){const g=document.querySelector(c);g&&(p.scrollX=g.scrollLeft||0,p.scrollY=g.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",fP(n,100),!0),t.subscribe("onRendered",i=>{const c=a(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}_E(Gh,c,t.options.scrollRestorationBehavior||void 0,t.isScrollRestoring||void 0,t.options.scrollToTopSelectors||void 0),t.isScrollRestoring&&z0.set(u=>(u[c]=u[c]||{},u))})}function gP(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const s=document.getElementById(t.state.location.hash);s&&s.scrollIntoView(e)}}}function xP(t,e){const s=Object.entries(t).flatMap(([n,i])=>Array.isArray(i)?i.map(c=>[n,String(c)]):[[n,String(i)]]);return""+new URLSearchParams(s).toString()}function F0(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function vP(t,e){const s=t;return[...new URLSearchParams(s).entries()].reduce((i,[c,u])=>{const f=i[c];return f==null?i[c]=F0(u):i[c]=Array.isArray(f)?[...f,F0(u)]:[f,F0(u)],i},{})}const yP=_P(JSON.parse),bP=wP(JSON.stringify,JSON.parse);function _P(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const s=vP(e);for(const a in s){const n=s[a];if(typeof n=="string")try{s[a]=t(n)}catch{}}return s}}function wP(t,e){function s(a){if(typeof a=="object"&&a!==null)try{return t(a)}catch{}else if(typeof a=="string"&&typeof e=="function")try{return e(a),t(a)}catch{}return a}return a=>{a={...a},Object.keys(a).forEach(i=>{const c=a[i];typeof c>"u"||c===void 0?delete a[i]:a[i]=s(c)});const n=xP(a).toString();return n?`?${n}`:""}}const gr="__root__";function jP(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function di(t){return!!(t!=null&&t.isRedirect)}function H0(t){return!!(t!=null&&t.isRedirect)&&t.href}function wi(t){const e=t.resolvedLocation,s=t.location,a=(e==null?void 0:e.pathname)!==s.pathname,n=(e==null?void 0:e.href)!==s.href,i=(e==null?void 0:e.hash)!==s.hash;return{fromLocation:e,toLocation:s,pathChanged:a,hrefChanged:n,hashChanged:i}}class NP{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=s=>s(),this.update=s=>{var a;s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||s.basepath&&s.basepath!==n.basepath)&&(s.basepath===void 0||s.basepath===""||s.basepath==="/"?this.basepath="/":this.basepath=`/${oP(s.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?rP({initialEntries:[this.basepath||"/"]}):aP()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Ix(EP(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}}),pP(this)),typeof window<"u"&&"CSS"in window&&typeof((a=window.CSS)==null?void 0:a.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[s.id]=s);const a=c=>{c.forEach((u,f)=>{u.init({originalIndex:f,defaultSsr:this.options.defaultSsr});const h=this.routesById[u.id];if(Nn(!h,`Duplicate routes found with id: ${String(u.id)}`),this.routesById[u.id]=u,!u.isRoot&&u.path){const g=vi(u.fullPath);(!this.routesByPath[g]||u.fullPath.endsWith("/"))&&(this.routesByPath[g]=u)}const p=u.children;p!=null&&p.length&&a(p)})};a([this.routeTree]);const n=[];Object.values(this.routesById).forEach((c,u)=>{var f;if(c.isRoot||!c.path)return;const h=oy(c.fullPath),p=lc(h);for(;p.length>1&&((f=p[0])==null?void 0:f.value)==="/";)p.shift();const g=p.map(x=>x.value==="/"?.75:x.type==="param"?.5:x.type==="wildcard"?.25:1);n.push({child:c,trimmed:h,parsed:p,index:u,scores:g})}),this.flatRoutes=n.sort((c,u)=>{const f=Math.min(c.scores.length,u.scores.length);for(let h=0;h<f;h++)if(c.scores[h]!==u.scores[h])return u.scores[h]-c.scores[h];if(c.scores.length!==u.scores.length)return u.scores.length-c.scores.length;for(let h=0;h<f;h++)if(c.parsed[h].value!==u.parsed[h].value)return c.parsed[h].value>u.parsed[h].value?1:-1;return c.index-u.index}).map((c,u)=>(c.child.rank=u,c.child))},this.subscribe=(s,a)=>{const n={eventType:s,fn:a};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=s=>{this.subscribers.forEach(a=>{a.eventType===s.type&&a.fn(s)})},this.parseLocation=(s,a)=>{const n=({pathname:f,search:h,hash:p,state:g})=>{const x=this.options.parseSearch(h),b=this.options.stringifySearch(x);return{pathname:f,searchStr:b,search:Ja(s==null?void 0:s.search,x),hash:p.split("#").reverse()[0]??"",href:`${f}${b}${p}`,state:Ja(s==null?void 0:s.state,g)}},i=n(a??this.history.location),{__tempLocation:c,__tempKey:u}=i.state;if(c&&(!u||u===this.tempLocationKey)){const f=n(c);return f.state.key=i.state.key,delete f.state.__tempLocation,{...f,maskedLocation:i}}return i},this.resolvePathWithBase=(s,a)=>lP({basepath:this.basepath,base:s,to:Dm(a),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(s,a,n)=>typeof s=="string"?this.matchRoutesInternal({pathname:s,search:a},n):this.matchRoutesInternal(s,a),this.getMatchedRoutes=(s,a)=>{let n={};const i=vi(s.pathname),c=p=>nh(this.basepath,i,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let u=(a==null?void 0:a.to)!==void 0?this.routesByPath[a.to]:void 0;u?n=c(u):u=this.flatRoutes.find(p=>{const g=c(p);return g?(n=g,!0):!1});let f=u||this.routesById[gr];const h=[f];for(;f.parentRoute;)f=f.parentRoute,h.unshift(f);return{matchedRoutes:h,routeParams:n,foundRoute:u}},this.cancelMatch=s=>{const a=this.getMatch(s);a&&(a.abortController.abort(),clearTimeout(a.pendingTimeout))},this.cancelMatches=()=>{var s;(s=this.state.pendingMatches)==null||s.forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=s=>{const a=(i={},c)=>{var u,f,h,p,g,x,b;const j=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,w=i.from!=null?j.find(B=>nh(this.basepath,vi(B.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,N=(w==null?void 0:w.pathname)||this.latestLocation.pathname;Nn(i.from==null||w!=null,"Could not find match for from: "+i.from);const E=(u=this.state.pendingMatches)!=null&&u.length?(f=Xl(this.state.pendingMatches))==null?void 0:f.search:((h=Xl(j))==null?void 0:h.search)||this.latestLocation.search,C=c==null?void 0:c.matchedRoutes.filter(B=>j.find(z=>z.routeId===B.id));let S;if(i.to){const B=(w==null?void 0:w.fullPath)||((p=Xl(j))==null?void 0:p.fullPath)||this.latestLocation.pathname;S=this.resolvePathWithBase(B,`${i.to}`)}else{const B=this.routesById[(g=C==null?void 0:C.find(z=>{const Q=rh({path:z.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return Sn([this.basepath,Q])===N}))==null?void 0:g.id];S=this.resolvePathWithBase(N,(B==null?void 0:B.to)??N)}const P={...(x=Xl(j))==null?void 0:x.params};let R=(i.params??!0)===!0?P:{...P,...xi(i.params,P)};Object.keys(R).length>0&&(c==null||c.matchedRoutes.map(B=>{var z;return((z=B.options.params)==null?void 0:z.stringify)??B.options.stringifyParams}).filter(Boolean).forEach(B=>{R={...R,...B(R)}})),S=rh({path:S,params:R??{},leaveWildcards:!1,leaveParams:s.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let D=E;if(s._includeValidateSearch&&((b=this.options.search)!=null&&b.strict)){let B={};c==null||c.matchedRoutes.forEach(z=>{try{z.options.validateSearch&&(B={...B,...G0(z.options.validateSearch,{...B,...D})??{}})}catch{}}),D=B}D=(B=>{const z=(c==null?void 0:c.matchedRoutes.reduce((A,I)=>{var q;const K=[];if("search"in I.options)(q=I.options.search)!=null&&q.middlewares&&K.push(...I.options.search.middlewares);else if(I.options.preSearchFilters||I.options.postSearchFilters){const L=({search:X,next:ne})=>{let te=X;"preSearchFilters"in I.options&&I.options.preSearchFilters&&(te=I.options.preSearchFilters.reduce((le,ae)=>ae(le),X));const ie=ne(te);return"postSearchFilters"in I.options&&I.options.postSearchFilters?I.options.postSearchFilters.reduce((le,ae)=>ae(le),ie):ie};K.push(L)}if(s._includeValidateSearch&&I.options.validateSearch){const L=({search:X,next:ne})=>{const te=ne(X);try{return{...te,...G0(I.options.validateSearch,te)??{}}}catch{return te}};K.push(L)}return A.concat(K)},[]))??[],Q=({search:A})=>i.search?i.search===!0?A:xi(i.search,A):{};z.push(Q);const H=(A,I)=>{if(A>=z.length)return I;const q=z[A];return q({search:I,next:L=>H(A+1,L)})};return H(0,B)})(D),D=Ja(E,D);const k=this.options.stringifySearch(D),M=i.hash===!0?this.latestLocation.hash:i.hash?xi(i.hash,this.latestLocation.hash):void 0,V=M?`#${M}`:"";let Y=i.state===!0?this.latestLocation.state:i.state?xi(i.state,this.latestLocation.state):{};return Y=Ja(this.latestLocation.state,Y),{pathname:S,search:D,searchStr:k,state:Y,hash:M??"",href:`${S}${k}${V}`,unmaskOnReload:i.unmaskOnReload}},n=(i={},c)=>{var u;const f=a(i);let h=c?a(c):void 0;if(!h){let x={};const b=(u=this.options.routeMasks)==null?void 0:u.find(j=>{const w=nh(this.basepath,f.pathname,{to:j.from,caseSensitive:!1,fuzzy:!1});return w?(x=w,!0):!1});if(b){const{from:j,...w}=b;c={...Vx(s,["from"]),...w,params:x},h=a(c)}}const p=this.getMatchedRoutes(f,i),g=a(i,p);if(h){const x=this.getMatchedRoutes(h,c),b=a(c,x);g.maskedLocation=b}return g};return s.mask?n(s,{...Vx(s,["from"]),...s.mask}):n(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:a,...n})=>{const i=()=>{const f=["key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(p=>{n.state[p]=this.latestLocation.state[p]});const h=ac(n.state,this.latestLocation.state);return f.forEach(p=>{delete n.state[p]}),h},c=this.latestLocation.href===n.href,u=this.commitLocationPromise;if(this.commitLocationPromise=zl(()=>{u==null||u.resolve()}),c&&i())this.load();else{let{maskedLocation:f,hashScrollIntoView:h,...p}=n;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=s,this.history[n.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:a})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:a,hashScrollIntoView:n,viewTransition:i,ignoreBlocker:c,href:u,...f}={})=>{if(u){const p=this.history.location.state.__TSR_index,g=pd(u,{__TSR_index:s?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const h=this.buildLocation({...f,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:i,replace:s,resetScroll:a,hashScrollIntoView:n,ignoreBlocker:c})},this.navigate=({to:s,reloadDocument:a,href:n,...i})=>{if(a){if(!n){const c=this.buildLocation({to:s,...i});n=this.history.createHref(c.href)}i.replace?window.location.replace(n):window.location.href=n;return}return this.buildAndCommitLocation({...i,href:n,to:s})},this.load=async s=>{this.latestLocation=this.parseLocation(this.latestLocation);let a,n,i;for(i=new Promise(c=>{this.startTransition(async()=>{var u;try{const f=this.latestLocation,h=this.state.resolvedLocation;this.cancelMatches();let p;El(()=>{p=this.matchRoutes(f),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:f,pendingMatches:p,cachedMatches:g.cachedMatches.filter(x=>!p.find(b=>b.id===x.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...wi({resolvedLocation:h,location:f})}),this.emit({type:"onBeforeLoad",...wi({resolvedLocation:h,location:f})}),await this.loadMatches({sync:s==null?void 0:s.sync,matches:p,location:f,onReady:async()=>{this.startViewTransition(async()=>{let g,x,b;El(()=>{this.__store.setState(j=>{const w=j.matches,N=j.pendingMatches||j.matches;return g=w.filter(E=>!N.find(C=>C.id===E.id)),x=N.filter(E=>!w.find(C=>C.id===E.id)),b=w.filter(E=>N.find(C=>C.id===E.id)),{...j,isLoading:!1,loadedAt:Date.now(),matches:N,pendingMatches:void 0,cachedMatches:[...j.cachedMatches,...g.filter(E=>E.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[x,"onEnter"],[b,"onStay"]].forEach(([j,w])=>{j.forEach(N=>{var E,C;(C=(E=this.looseRoutesById[N.routeId].options)[w])==null||C.call(E,N)})})})}})}catch(f){H0(f)?(a=f,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):tr(f)&&(n=f),this.__store.setState(h=>({...h,statusCode:a?a.statusCode:n?404:h.matches.some(p=>p.status==="error")?500:200,redirect:a}))}this.latestLoadPromise===i&&((u=this.commitLocationPromise)==null||u.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=s=>{const a=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,a&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let n;if(typeof a=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,c=this.state.resolvedLocation,u=typeof a.types=="function"?a.types(wi({resolvedLocation:c,location:i})):a.types;n={update:s,types:u}}else n=s;document.startViewTransition(n)}else s()},this.updateMatch=(s,a)=>{var n;let i;const c=(n=this.state.pendingMatches)==null?void 0:n.find(p=>p.id===s),u=this.state.matches.find(p=>p.id===s),f=this.state.cachedMatches.find(p=>p.id===s),h=c?"pendingMatches":u?"matches":f?"cachedMatches":"";return h&&this.__store.setState(p=>{var g;return{...p,[h]:(g=p[h])==null?void 0:g.map(x=>x.id===s?i=a(x):x)}}),i},this.getMatch=s=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(a=>a.id===s),this.loadMatches=async({location:s,matches:a,preload:n,onReady:i,updateMatch:c=this.updateMatch,sync:u})=>{let f,h=!1;const p=async()=>{h||(h=!0,await(i==null?void 0:i()))},g=b=>!!(n&&!this.state.matches.find(j=>j.id===b)),x=(b,j)=>{var w,N,E,C;if(H0(j)&&!j.reloadDocument)throw j;if(di(j)||tr(j)){if(c(b.id,S=>({...S,status:di(j)?"redirected":tr(j)?"notFound":"error",isFetching:!1,error:j,beforeLoadPromise:void 0,loaderPromise:void 0})),j.routeId||(j.routeId=b.routeId),(w=b.beforeLoadPromise)==null||w.resolve(),(N=b.loaderPromise)==null||N.resolve(),(E=b.loadPromise)==null||E.resolve(),di(j))throw h=!0,j=this.resolveRedirect({...j,_fromLocation:s}),j;if(tr(j))throw this._handleNotFound(a,j,{updateMatch:c}),(C=this.serverSsr)==null||C.onMatchSettled({router:this,match:this.getMatch(b.id)}),j}};try{await new Promise((b,j)=>{(async()=>{var w,N,E,C;try{const S=(D,$,k)=>{var M,V;const{id:Y,routeId:B}=a[D],z=this.looseRoutesById[B];if($ instanceof Promise)throw $;$.routerCode=k,f=f??D,x(this.getMatch(Y),$);try{(V=(M=z.options).onError)==null||V.call(M,$)}catch(Q){$=Q,x(this.getMatch(Y),$)}c(Y,Q=>{var H,A;return(H=Q.beforeLoadPromise)==null||H.resolve(),(A=Q.loadPromise)==null||A.resolve(),{...Q,error:$,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[D,{id:$,routeId:k}]of a.entries()){const M=this.getMatch($),V=(w=a[D-1])==null?void 0:w.id,Y=this.looseRoutesById[k],B=Y.options.pendingMs??this.options.defaultPendingMs,z=!!(i&&!this.isServer&&!g($)&&(Y.options.loader||Y.options.beforeLoad||Yj(Y))&&typeof B=="number"&&B!==1/0&&(Y.options.pendingComponent??((N=this.options)==null?void 0:N.defaultPendingComponent)));let Q=!0;if((M.beforeLoadPromise||M.loaderPromise)&&(z&&setTimeout(()=>{try{p()}catch{}},B),await M.beforeLoadPromise,Q=this.getMatch($).status!=="success"),Q){try{c($,ue=>{const ce=ue.loadPromise;return{...ue,loadPromise:zl(()=>{ce==null||ce.resolve()}),beforeLoadPromise:zl()}});const H=new AbortController;let A;z&&(A=setTimeout(()=>{try{p()}catch{}},B));const{paramsError:I,searchError:q}=this.getMatch($);I&&S(D,I,"PARSE_PARAMS"),q&&S(D,q,"VALIDATE_SEARCH");const K=()=>V?this.getMatch(V).context:this.options.context??{};c($,ue=>({...ue,isFetching:"beforeLoad",fetchCount:ue.fetchCount+1,abortController:H,pendingTimeout:A,context:{...K(),...ue.__routeContext}}));const{search:L,params:X,context:ne,cause:te}=this.getMatch($),ie=g($),le={search:L,abortController:H,params:X,preload:ie,context:ne,location:s,navigate:ue=>this.navigate({...ue,_fromLocation:s}),buildLocation:this.buildLocation,cause:ie?"preload":te,matches:a},ae=await((C=(E=Y.options).beforeLoad)==null?void 0:C.call(E,le))??{};(di(ae)||tr(ae))&&S(D,ae,"BEFORE_LOAD"),c($,ue=>({...ue,__beforeLoadContext:ae,context:{...K(),...ue.__routeContext,...ae},abortController:H}))}catch(H){S(D,H,"BEFORE_LOAD")}c($,H=>{var A;return(A=H.beforeLoadPromise)==null||A.resolve(),{...H,beforeLoadPromise:void 0,isFetching:!1}})}}const P=a.slice(0,f),R=[];P.forEach(({id:D,routeId:$},k)=>{R.push((async()=>{const{loaderPromise:M}=this.getMatch(D);let V=!1,Y=!1;if(M){await M;const B=this.getMatch(D);B.error&&x(B,B.error)}else{const B=R[k-1],z=this.looseRoutesById[$],Q=()=>{const{params:ie,loaderDeps:le,abortController:ae,context:ue,cause:ce}=this.getMatch(D),we=g(D);return{params:ie,deps:le,preload:!!we,parentMatchPromise:B,abortController:ae,context:ue,location:s,navigate:Se=>this.navigate({...Se,_fromLocation:s}),cause:we?"preload":ce,route:z}},H=Date.now()-this.getMatch(D).updatedAt,A=g(D),I=A?z.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:z.options.staleTime??this.options.defaultStaleTime??0,q=z.options.shouldReload,K=typeof q=="function"?q(Q()):q;c(D,ie=>({...ie,loaderPromise:zl(),preload:!!A&&!this.state.matches.find(le=>le.id===D)}));const L=()=>{var ie,le,ae,ue,ce,we;const Se=this.getMatch(D);if(!Se)return;const je={matches:a,match:Se,params:Se.params,loaderData:Se.loaderData},Ce=(le=(ie=z.options).head)==null?void 0:le.call(ie,je),ve=Ce==null?void 0:Ce.meta,Pe=Ce==null?void 0:Ce.links,fe=Ce==null?void 0:Ce.scripts,Re=(ue=(ae=z.options).scripts)==null?void 0:ue.call(ae,je),Te=(we=(ce=z.options).headers)==null?void 0:we.call(ce,je);c(D,et=>({...et,meta:ve,links:Pe,headScripts:fe,headers:Te,scripts:Re}))},X=async()=>{var ie,le,ae,ue,ce;try{const we=async()=>{const Se=this.getMatch(D);Se.minPendingPromise&&await Se.minPendingPromise};try{this.loadRouteChunk(z),c(D,je=>({...je,isFetching:"loader"}));const Se=await((le=(ie=z.options).loader)==null?void 0:le.call(ie,Q()));x(this.getMatch(D),Se),await z._lazyPromise,await we(),await z._componentsPromise,El(()=>{c(D,je=>({...je,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Se})),L()})}catch(Se){let je=Se;await we(),x(this.getMatch(D),Se);try{(ue=(ae=z.options).onError)==null||ue.call(ae,Se)}catch(Ce){je=Ce,x(this.getMatch(D),Ce)}El(()=>{c(D,Ce=>({...Ce,error:je,status:"error",isFetching:!1})),L()})}(ce=this.serverSsr)==null||ce.onMatchSettled({router:this,match:this.getMatch(D)})}catch(we){El(()=>{c(D,Se=>({...Se,loaderPromise:void 0})),L()}),x(this.getMatch(D),we)}},{status:ne,invalid:te}=this.getMatch(D);V=ne==="success"&&(te||(K??H>I)),A&&z.options.preload===!1||(V&&!u?(Y=!0,(async()=>{try{await X();const{loaderPromise:ie,loadPromise:le}=this.getMatch(D);ie==null||ie.resolve(),le==null||le.resolve(),c(D,ae=>({...ae,loaderPromise:void 0}))}catch(ie){H0(ie)&&await this.navigate(ie)}})()):ne!=="success"||V&&u?await X():L())}if(!Y){const{loaderPromise:B,loadPromise:z}=this.getMatch(D);B==null||B.resolve(),z==null||z.resolve()}return c(D,B=>({...B,isFetching:Y?B.isFetching:!1,loaderPromise:Y?B.loaderPromise:void 0,invalid:!1})),this.getMatch(D)})())}),await Promise.all(R),b()}catch(S){j(S)}})()}),await p()}catch(b){if(di(b)||tr(b))throw tr(b)&&!n&&await p(),b}return a},this.invalidate=s=>{const a=n=>{var i;return((i=s==null?void 0:s.filter)==null?void 0:i.call(s,n))??!0?{...n,invalid:!0,...n.status==="error"?{status:"pending",error:void 0}:{}}:n};return this.__store.setState(n=>{var i;return{...n,matches:n.matches.map(a),cachedMatches:n.cachedMatches.map(a),pendingMatches:(i=n.pendingMatches)==null?void 0:i.map(a)}}),this.load({sync:s==null?void 0:s.sync})},this.resolveRedirect=s=>{const a=s;return a.href||(a.href=this.buildLocation(a).href),a},this.clearCache=s=>{const a=s==null?void 0:s.filter;a!==void 0?this.__store.setState(n=>({...n,cachedMatches:n.cachedMatches.filter(i=>!a(i))})):this.__store.setState(n=>({...n,cachedMatches:[]}))},this.clearExpiredCache=()=>{const s=a=>{const n=this.looseRoutesById[a.routeId];if(!n.options.loader)return!0;const i=(a.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(a.status!=="error"&&Date.now()-a.updatedAt<i)};this.clearCache({filter:s})},this.loadRouteChunk=s=>(s._lazyPromise===void 0&&(s.lazyFn?s._lazyPromise=s.lazyFn().then(a=>{const{id:n,...i}=a.options;Object.assign(s.options,i)}):s._lazyPromise=Promise.resolve()),s._componentsPromise===void 0&&(s._componentsPromise=s._lazyPromise.then(()=>Promise.all(wE.map(async a=>{const n=s.options[a];n!=null&&n.preload&&await n.preload()})))),s._componentsPromise),this.preloadRoute=async s=>{const a=this.buildLocation(s);let n=this.matchRoutes(a,{throwOnError:!0,preload:!0,dest:s});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),c=new Set([...i,...this.state.cachedMatches.map(u=>u.id)]);El(()=>{n.forEach(u=>{c.has(u.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,u]}))})});try{return n=await this.loadMatches({matches:n,location:a,preload:!0,updateMatch:(u,f)=>{i.has(u)?n=n.map(h=>h.id===u?f(h):h):this.updateMatch(u,f)}}),n}catch(u){if(di(u))return u.reloadDocument?void 0:await this.preloadRoute({...u,_fromLocation:a});tr(u)||console.error(u);return}},this.matchRoute=(s,a)=>{const n={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},i=this.buildLocation(n);if(a!=null&&a.pending&&this.state.status!=="pending")return!1;const u=((a==null?void 0:a.pending)===void 0?!this.state.isLoading:a.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=nh(this.basepath,u.pathname,{...a,to:i.pathname});return!f||s.params&&!ac(f,s.params,{partial:!0})?!1:f&&((a==null?void 0:a.includeSearch)??!0)?ac(u.search,i.search,{partial:!0})?f:!1:f},this._handleNotFound=(s,a,{updateMatch:n=this.updateMatch}={})=>{var i;const c=this.routesById[a.routeId??""]??this.routeTree,u={};for(const h of s)u[h.routeId]=h;!c.options.notFoundComponent&&((i=this.options)!=null&&i.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),Nn(c.options.notFoundComponent);const f=u[c.id];Nn(f,"Could not find match for route: "+c.id),n(f.id,h=>({...h,status:"notFound",error:a,isFetching:!1})),a.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(a.routeId=c.parentRoute.id,this._handleNotFound(s,a,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??bP,parseSearch:e.parseSearch??yP}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,s){const{foundRoute:a,matchedRoutes:n,routeParams:i}=this.getMatchedRoutes(e,s==null?void 0:s.dest);let c=!1;(a?a.path!=="/"&&i["**"]:vi(e.pathname))&&(this.options.notFoundRoute?n.push(this.options.notFoundRoute):c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let g=n.length-1;g>=0;g--){const x=n[g];if(x.children)return x.id}return gr}})(),f=n.map(g=>{var x;let b;const j=((x=g.options.params)==null?void 0:x.parse)??g.options.parseParams;if(j)try{const w=j(i);Object.assign(i,w)}catch(w){if(b=new SP(w.message,{cause:w}),s!=null&&s.throwOnError)throw b;return b}}),h=[],p=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return n.forEach((g,x)=>{var b,j;const w=h[x-1],[N,E,C]=(()=>{const z=(w==null?void 0:w.search)??e.search,Q=(w==null?void 0:w._strictSearch)??{};try{const H=G0(g.options.validateSearch,{...z})??{};return[{...z,...H},{...Q,...H},void 0]}catch(H){let A=H;if(H instanceof Yh||(A=new Yh(H.message,{cause:H})),s!=null&&s.throwOnError)throw A;return[z,{},A]}})(),S=((j=(b=g.options).loaderDeps)==null?void 0:j.call(b,{search:N}))??"",P=S?JSON.stringify(S):"",{usedParams:R,interpolatedPath:D}=rh({path:g.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),$=rh({path:g.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+P,k=this.getMatch($),M=this.state.matches.find(z=>z.routeId===g.id),V=M?"stay":"enter";let Y;if(k)Y={...k,cause:V,params:M?Ja(M.params,i):i,_strictParams:R,search:Ja(M?M.search:k.search,N),_strictSearch:E};else{const z=g.options.loader||g.options.beforeLoad||g.lazyFn||Yj(g)?"pending":"success";Y={id:$,index:x,routeId:g.id,params:M?Ja(M.params,i):i,_strictParams:R,pathname:Sn([this.basepath,D]),updatedAt:Date.now(),search:M?Ja(M.search,N):N,_strictSearch:E,searchError:void 0,status:z,isFetching:!1,error:void 0,paramsError:f[x],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:V,loaderDeps:M?Ja(M.loaderDeps,S):S,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:zl(),fullPath:g.fullPath}}s!=null&&s.preload||(Y.globalNotFound=u===g.id),Y.searchError=C;const B=p(w);Y.context={...B,...Y.__routeContext,...Y.__beforeLoadContext},h.push(Y)}),h.forEach((g,x)=>{var b,j;const w=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(s==null?void 0:s._buildLocation)!==!0){const E=h[x-1],C=p(E),S={deps:g.loaderDeps,params:g.params,context:C,location:e,navigate:P=>this.navigate({...P,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:h};g.__routeContext=((j=(b=w.options).context)==null?void 0:j.call(b,S))??{},g.context={...C,...g.__routeContext,...g.__beforeLoadContext}}}),h}}class Yh extends Error{}class SP extends Error{}function EP(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function G0(t,e){if(t==null)return{};if("~standard"in t){const s=t["~standard"].validate(e);if(s instanceof Promise)throw new Yh("Async validation not supported");if(s.issues)throw new Yh(JSON.stringify(s.issues,void 0,2),{cause:s});return s.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}const wE=["component","errorComponent","pendingComponent","notFoundComponent"];function Yj(t){var e;for(const s of wE)if((e=t.options[s])!=null&&e.preload)return!0;return!1}const CP="Error preloading route! ☝️";class jE{constructor(e){if(this.init=s=>{var a,n;this.originalIndex=s.originalIndex;const i=this.options,c=!(i!=null&&i.path)&&!(i!=null&&i.id);if(this.parentRoute=(n=(a=this.options).getParentRoute)==null?void 0:n.call(a),c)this._path=gr;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let u=c?gr:i==null?void 0:i.path;u&&u!=="/"&&(u=oy(u));const f=(i==null?void 0:i.id)||u;let h=c?gr:Sn([this.parentRoute.id===gr?"":this.parentRoute.id,f]);u===gr&&(u="/"),h!==gr&&(h=Sn(["/",h]));const p=h===gr?"/":Sn([this.parentRoute.fullPath,u]);this._path=u,this._id=h,this._fullPath=p,this._to=p,this._ssr=(i==null?void 0:i.ssr)??s.defaultSsr??!0},this.clone=s=>{this._path=s._path,this._id=s._id,this._fullPath=s._fullPath,this._to=s._to,this._ssr=s._ssr,this.options.getParentRoute=s.options.getParentRoute,this.children=s.children},this.addChildren=s=>this._addFileChildren(s),this._addFileChildren=s=>(Array.isArray(s)&&(this.children=s),typeof s=="object"&&s!==null&&(this.children=Object.values(s)),this),this._addFileTypes=()=>this,this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class kP extends jE{constructor(e){super(e)}}function iy(t){const e=t.errorComponent??Om;return r.jsx(AP,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:s,reset:a})=>s?y.createElement(e,{error:s,reset:a}):t.children})}class AP extends y.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,s){this.props.onCatch&&this.props.onCatch(e,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Om({error:t}){const[e,s]=y.useState(!1);return r.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[r.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),r.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(a=>!a),children:e?"Hide Error":"Show Error"})]}),r.jsx("div",{style:{height:".25rem"}}),e?r.jsx("div",{children:r.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?r.jsx("code",{children:t.message}):null})}):null]})}var X0={exports:{}},Y0={},K0={exports:{}},W0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kj;function TP(){if(Kj)return W0;Kj=1;var t=Pd();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var s=typeof Object.is=="function"?Object.is:e,a=t.useState,n=t.useEffect,i=t.useLayoutEffect,c=t.useDebugValue;function u(g,x){var b=x(),j=a({inst:{value:b,getSnapshot:x}}),w=j[0].inst,N=j[1];return i(function(){w.value=b,w.getSnapshot=x,f(w)&&N({inst:w})},[g,b,x]),n(function(){return f(w)&&N({inst:w}),g(function(){f(w)&&N({inst:w})})},[g]),c(b),b}function f(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!s(g,b)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return W0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,W0}var Wj;function NE(){return Wj||(Wj=1,K0.exports=TP()),K0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zj;function RP(){if(Zj)return Y0;Zj=1;var t=Pd(),e=NE();function s(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:s,n=e.useSyncExternalStore,i=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return Y0.useSyncExternalStoreWithSelector=function(h,p,g,x,b){var j=i(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=u(function(){function E(D){if(!C){if(C=!0,S=D,D=x(D),b!==void 0&&w.hasValue){var $=w.value;if(b($,D))return P=$}return P=D}if($=P,a(S,D))return $;var k=x(D);return b!==void 0&&b($,k)?(S=D,$):(S=D,P=k)}var C=!1,S,P,R=g===void 0?null:g;return[function(){return E(p())},R===null?void 0:function(){return E(R())}]},[p,g,x,b]);var N=n(h,j[0],j[1]);return c(function(){w.hasValue=!0,w.value=N},[N]),f(N),N},Y0}var Qj;function MP(){return Qj||(Qj=1,X0.exports=RP()),X0.exports}var PP=MP();function DP(t,e=s=>s){return PP.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,OP)}function OP(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[a,n]of t)if(!e.has(a)||!Object.is(n,e.get(a)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!1;for(let a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(e,s[a])||!Object.is(t[s[a]],e[s[a]]))return!1;return!0}const Z0=y.createContext(null);function SE(){return typeof document>"u"?Z0:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Z0,Z0)}function Tr(t){const e=y.useContext(SE());return t==null||t.warn,e}function Ds(t){const e=Tr({warn:(t==null?void 0:t.router)===void 0}),s=(t==null?void 0:t.router)||e,a=y.useRef(void 0);return DP(s.__store,n=>{if(t!=null&&t.select){if(t.structuralSharing??s.options.defaultStructuralSharing){const i=Ja(a.current,t.select(n));return a.current=i,i}return t.select(n)}return n})}const $m=y.createContext(void 0),$P=y.createContext(void 0);function Eo(t){const e=y.useContext(t.from?$P:$m);return Ds({select:a=>{const n=a.matches.find(i=>t.from?t.from===i.routeId:i.id===e);if(Nn(!((t.shouldThrow??!0)&&!n),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),n!==void 0)return t.select?t.select(n):n},structuralSharing:t.structuralSharing})}function EE(t){return Eo({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function CE(t){const{select:e,...s}=t;return Eo({...s,select:a=>e?e(a.loaderDeps):a.loaderDeps})}function ly(t){return Eo({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function cy(t){return Eo({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function Pt(t){const{navigate:e}=Tr();return y.useCallback(s=>e({from:t==null?void 0:t.from,...s}),[t==null?void 0:t.from,e])}var Oi=xE();const kE=Pm(Oi),Bu=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Q0(t){const e=y.useRef({value:t,prev:null}),s=e.current.value;return t!==s&&(e.current={value:t,prev:s}),e.current.prev}function LP(t,e,s={},a={}){const n=y.useRef(typeof IntersectionObserver=="function"),i=y.useRef(null);return y.useEffect(()=>{if(!(!t.current||!n.current||a.disabled))return i.current=new IntersectionObserver(([c])=>{e(c)},s),i.current.observe(t.current),()=>{var c;(c=i.current)==null||c.disconnect()}},[e,s,a.disabled,t]),i.current}function IP(t){const e=y.useRef(null);return y.useImperativeHandle(t,()=>e.current,[]),e}function BP(){const t=Tr(),e=y.useRef({router:t,mounted:!1}),s=Ds({select:({isLoading:g})=>g}),[a,n]=y.useState(!1),i=Ds({select:g=>g.matches.some(x=>x.status==="pending"),structuralSharing:!0}),c=Q0(s),u=s||a||i,f=Q0(u),h=s||i,p=Q0(h);return t.isServer||(t.startTransition=g=>{n(!0),y.startTransition(()=>{g(),n(!1)})}),y.useEffect(()=>{const g=t.history.subscribe(t.load),x=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return vi(t.latestLocation.href)!==vi(x.href)&&t.commitLocation({...x,replace:!0}),()=>{g()}},[t,t.history]),Bu(()=>{if(typeof window<"u"&&t.clientSsr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Bu(()=>{c&&!s&&t.emit({type:"onLoad",...wi(t.state)})},[c,t,s]),Bu(()=>{p&&!h&&t.emit({type:"onBeforeRouteMount",...wi(t.state)})},[h,p,t]),Bu(()=>{f&&!u&&(t.emit({type:"onResolved",...wi(t.state)}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),gP(t))},[u,f,t]),null}function VP(t){const e=Ds({select:s=>`not-found-${s.location.pathname}-${s.status}`});return r.jsx(iy,{getResetKey:()=>e,onCatch:(s,a)=>{var n;if(tr(s))(n=t.onCatch)==null||n.call(t,s,a);else throw s},errorComponent:({error:s})=>{var a;if(tr(s))return(a=t.fallback)==null?void 0:a.call(t,s);throw s},children:t.children})}function qP(){return r.jsx("p",{children:"Not Found"})}function kh(t){return r.jsx(r.Fragment,{children:t.children})}function AE(t,e,s){return e.options.notFoundComponent?r.jsx(e.options.notFoundComponent,{data:s}):t.options.defaultNotFoundComponent?r.jsx(t.options.defaultNotFoundComponent,{data:s}):r.jsx(qP,{})}var J0,Jj;function UP(){if(Jj)return J0;Jj=1;const t={},e=t.hasOwnProperty,s=(k,M)=>{for(const V in k)e.call(k,V)&&M(V,k[V])},a=(k,M)=>(M&&s(M,(V,Y)=>{k[V]=Y}),k),n=(k,M)=>{const V=k.length;let Y=-1;for(;++Y<V;)M(k[Y])},i=k=>"\\u"+("0000"+k).slice(-4),c=(k,M)=>{let V=k.toString(16);return M?V:V.toUpperCase()},u=t.toString,f=Array.isArray,h=k=>typeof Buffer=="function"&&Buffer.isBuffer(k),p=k=>u.call(k)=="[object Object]",g=k=>typeof k=="string"||u.call(k)=="[object String]",x=k=>typeof k=="number"||u.call(k)=="[object Number]",b=k=>typeof k=="bigint",j=k=>typeof k=="function",w=k=>u.call(k)=="[object Map]",N=k=>u.call(k)=="[object Set]",E={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},C=/[\\\b\f\n\r\t]/,S=/[0-9]/,P=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,R=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,D=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,$=(k,M)=>{const V=()=>{I=A,++M.indentLevel,A=M.indent.repeat(M.indentLevel)},Y={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},B=M&&M.json;B&&(Y.quotes="double",Y.wrap=!0),M=a(Y,M),M.quotes!="single"&&M.quotes!="double"&&M.quotes!="backtick"&&(M.quotes="single");const z=M.quotes=="double"?'"':M.quotes=="backtick"?"`":"'",Q=M.compact,H=M.lowercaseHex;let A=M.indent.repeat(M.indentLevel),I="";const q=M.__inline1__,K=M.__inline2__,L=Q?"":`
`;let X,ne=!0;const te=M.numbers=="binary",ie=M.numbers=="octal",le=M.numbers=="decimal",ae=M.numbers=="hexadecimal";if(B&&k&&j(k.toJSON)&&(k=k.toJSON()),!g(k)){if(w(k))return k.size==0?"new Map()":(Q||(M.__inline1__=!0,M.__inline2__=!1),"new Map("+$(Array.from(k),M)+")");if(N(k))return k.size==0?"new Set()":"new Set("+$(Array.from(k),M)+")";if(h(k))return k.length==0?"Buffer.from([])":"Buffer.from("+$(Array.from(k),M)+")";if(f(k))return X=[],M.wrap=!0,q&&(M.__inline1__=!1,M.__inline2__=!0),K||V(),n(k,ce=>{ne=!1,K&&(M.__inline2__=!1),X.push((Q||K?"":A)+$(ce,M))}),ne?"[]":K?"["+X.join(", ")+"]":"["+L+X.join(","+L)+L+(Q?"":I)+"]";if(x(k)||b(k)){if(B)return JSON.stringify(Number(k));let ce;if(le)ce=String(k);else if(ae){let we=k.toString(16);H||(we=we.toUpperCase()),ce="0x"+we}else te?ce="0b"+k.toString(2):ie&&(ce="0o"+k.toString(8));return b(k)?ce+"n":ce}else return b(k)?B?JSON.stringify(Number(k)):k+"n":p(k)?(X=[],M.wrap=!0,V(),s(k,(ce,we)=>{ne=!1,X.push((Q?"":A)+$(ce,M)+":"+(Q?"":" ")+$(we,M))}),ne?"{}":"{"+L+X.join(","+L)+L+(Q?"":I)+"}"):B?JSON.stringify(k)||"null":String(k)}const ue=M.escapeEverything?R:D;return X=k.replace(ue,(ce,we,Se,je,Ce,ve)=>{if(we){if(M.minimal)return we;const fe=we.charCodeAt(0),Re=we.charCodeAt(1);if(M.es6){const Te=(fe-55296)*1024+Re-56320+65536;return"\\u{"+c(Te,H)+"}"}return i(c(fe,H))+i(c(Re,H))}if(Se)return i(c(Se.charCodeAt(0),H));if(ce=="\0"&&!B&&!S.test(ve.charAt(Ce+1)))return"\\0";if(je)return je==z||M.escapeEverything?"\\"+je:je;if(C.test(ce))return E[ce];if(M.minimal&&!P.test(ce))return ce;const Pe=c(ce.charCodeAt(0),H);return B||Pe.length>2?i(Pe):"\\x"+("00"+Pe).slice(-2)}),z=="`"&&(X=X.replace(/\$\{/g,"\\${")),M.isScriptContext&&(X=X.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,B?"\\u003C!--":"\\x3C!--")),M.wrap&&(X=z+X+z),X};return $.version="3.0.2",J0=$,J0}UP();function zP({children:t,log:e}){return typeof document<"u"?null:r.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[t,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function FP(){const t=Tr(),s=(t.options.getScrollRestorationKey||Ux)(t.latestLocation),a=s!==Ux(t.latestLocation)?s:null;return!t.isScrollRestoring||!t.isServer?null:r.jsx(zP,{children:`(${_E.toString()})(${JSON.stringify(Gh)},${JSON.stringify(a)}, undefined, true)`,log:!1})}const TE=y.memo(function({matchId:e}){var s,a;const n=Tr(),i=Ds({select:E=>{var C;return(C=E.matches.find(S=>S.id===e))==null?void 0:C.routeId}});Nn(i);const c=n.routesById[i],u=c.options.pendingComponent??n.options.defaultPendingComponent,f=u?r.jsx(u,{}):null,h=c.options.errorComponent??n.options.defaultErrorComponent,p=c.options.onCatch??n.options.defaultOnCatch,g=c.isRoot?c.options.notFoundComponent??((s=n.options.notFoundRoute)==null?void 0:s.options.component):c.options.notFoundComponent,x=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??u??((a=c.options.errorComponent)==null?void 0:a.preload))?y.Suspense:kh,b=h?iy:kh,j=g?VP:kh,w=Ds({select:E=>E.loadedAt}),N=Ds({select:E=>{var C;const S=E.matches.findIndex(P=>P.id===e);return(C=E.matches[S-1])==null?void 0:C.routeId}});return r.jsxs(r.Fragment,{children:[r.jsx($m.Provider,{value:e,children:r.jsx(x,{fallback:f,children:r.jsx(b,{getResetKey:()=>w,errorComponent:h||Om,onCatch:(E,C)=>{if(tr(E))throw E;p==null||p(E,C)},children:r.jsx(j,{fallback:E=>{if(!g||E.routeId&&E.routeId!==i||!E.routeId&&!c.isRoot)throw E;return y.createElement(g,E)},children:r.jsx(GP,{matchId:e})})})})}),N===gr&&n.options.scrollRestoration?r.jsxs(r.Fragment,{children:[r.jsx(HP,{}),r.jsx(FP,{})]}):null]})});function HP(){const t=Tr(),e=y.useRef(void 0);return r.jsx("script",{suppressHydrationWarning:!0,ref:s=>{s&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...wi(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.key)}const GP=y.memo(function({matchId:e}){var s,a,n;const i=Tr(),{match:c,key:u,routeId:f}=Ds({select:x=>{const b=x.matches.findIndex(S=>S.id===e),j=x.matches[b],w=j.routeId,N=i.routesById[w].options.remountDeps??i.options.defaultRemountDeps,E=N==null?void 0:N({routeId:w,loaderDeps:j.loaderDeps,params:j._strictParams,search:j._strictSearch});return{key:E?JSON.stringify(E):void 0,routeId:w,match:Vx(j,["id","status","error"])}},structuralSharing:!0}),h=i.routesById[f],p=y.useMemo(()=>{const x=h.options.component??i.options.defaultComponent;return x?r.jsx(x,{},u):r.jsx($o,{})},[u,h.options.component,i.options.defaultComponent]),g=(h.options.errorComponent??i.options.defaultErrorComponent)||Om;if(c.status==="notFound")return Nn(tr(c.error)),AE(i,h,c.error);if(c.status==="redirected")throw Nn(di(c.error)),(s=i.getMatch(c.id))==null?void 0:s.loadPromise;if(c.status==="error"){if(i.isServer)return r.jsx(g,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const x=h.options.pendingMinMs??i.options.defaultPendingMinMs;if(x&&!((a=i.getMatch(c.id))!=null&&a.minPendingPromise)&&!i.isServer){const b=zl();Promise.resolve().then(()=>{i.updateMatch(c.id,j=>({...j,minPendingPromise:b}))}),setTimeout(()=>{b.resolve(),i.updateMatch(c.id,j=>({...j,minPendingPromise:void 0}))},x)}throw(n=i.getMatch(c.id))==null?void 0:n.loadPromise}return p}),$o=y.memo(function(){const e=Tr(),s=y.useContext($m),a=Ds({select:h=>{var p;return(p=h.matches.find(g=>g.id===s))==null?void 0:p.routeId}}),n=e.routesById[a],i=Ds({select:h=>{const g=h.matches.find(x=>x.id===s);return Nn(g),g.globalNotFound}}),c=Ds({select:h=>{var p;const g=h.matches,x=g.findIndex(b=>b.id===s);return(p=g[x+1])==null?void 0:p.id}});if(i)return AE(e,n,void 0);if(!c)return null;const u=r.jsx(TE,{matchId:c}),f=e.options.defaultPendingComponent?r.jsx(e.options.defaultPendingComponent,{}):null;return s===gr?r.jsx(y.Suspense,{fallback:f,children:u}):u});function XP(){const t=Tr(),e=t.options.defaultPendingComponent?r.jsx(t.options.defaultPendingComponent,{}):null,s=t.isServer||typeof document<"u"&&t.clientSsr?kh:y.Suspense,a=r.jsxs(s,{fallback:e,children:[r.jsx(BP,{}),r.jsx(YP,{})]});return t.options.InnerWrap?r.jsx(t.options.InnerWrap,{children:a}):a}function YP(){const t=Ds({select:s=>{var a;return(a=s.matches[0])==null?void 0:a.id}}),e=Ds({select:s=>s.loadedAt});return r.jsx($m.Provider,{value:t,children:r.jsx(iy,{getResetKey:()=>e,errorComponent:Om,onCatch:s=>{s.message||s.toString()},children:t?r.jsx(TE,{matchId:t}):null})})}function KP(t){return Ds({select:e=>{const s=e.matches;return t!=null&&t.select?t.select(s):s},structuralSharing:t==null?void 0:t.structuralSharing})}function WP(t,e){const s=Tr(),[a,n]=y.useState(!1),i=y.useRef(!1),c=IP(e),{activeProps:u=()=>({className:"active"}),inactiveProps:f=()=>({}),activeOptions:h,to:p,preload:g,preloadDelay:x,hashScrollIntoView:b,replace:j,startTransition:w,resetScroll:N,viewTransition:E,children:C,target:S,disabled:P,style:R,className:D,onClick:$,onFocus:k,onMouseEnter:M,onMouseLeave:V,onTouchStart:Y,ignoreBlocker:B,...z}=t,{params:Q,search:H,hash:A,state:I,mask:q,reloadDocument:K,...L}=z,X=y.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ne=Ds({select:G=>G.location.search,structuralSharing:!0}),te=KP({select:G=>{var Z;return t.from??((Z=G[G.length-1])==null?void 0:Z.fullPath)}}),ie=y.useMemo(()=>({...t,from:te}),[t,te]),le=y.useMemo(()=>s.buildLocation(ie),[s,ie,ne]),ae=y.useMemo(()=>ie.reloadDocument?!1:g??s.options.defaultPreload,[s.options.defaultPreload,g,ie.reloadDocument]),ue=x??s.options.defaultPreloadDelay??0,ce=Ds({select:G=>{if(h!=null&&h.exact){if(!iP(G.location.pathname,le.pathname,s.basepath))return!1}else{const Z=Fh(G.location.pathname,s.basepath).split("/");if(!Fh(le.pathname,s.basepath).split("/").every((be,De)=>be===Z[De]))return!1}return((h==null?void 0:h.includeSearch)??!0)&&!ac(G.location.search,le.search,{partial:!(h!=null&&h.exact),ignoreUndefined:!(h!=null&&h.explicitUndefined)})?!1:h!=null&&h.includeHash?G.location.hash===le.hash:!0}}),we=y.useCallback(()=>{s.preloadRoute(ie).catch(G=>{console.warn(G),console.warn(CP)})},[ie,s]),Se=y.useCallback(G=>{G!=null&&G.isIntersecting&&we()},[we]);if(LP(c,Se,{rootMargin:"100px"},{disabled:!!P||ae!=="viewport"}),Bu(()=>{i.current||!P&&ae==="render"&&(we(),i.current=!0)},[P,we,ae]),X==="external")return{...L,ref:c,type:X,href:p,...C&&{children:C},...S&&{target:S},...P&&{disabled:P},...R&&{style:R},...D&&{className:D},...$&&{onClick:$},...k&&{onFocus:k},...M&&{onMouseEnter:M},...V&&{onMouseLeave:V},...Y&&{onTouchStart:Y}};const je=G=>{if(!P&&!ZP(G)&&!G.defaultPrevented&&(!S||S==="_self")&&G.button===0){G.preventDefault(),Oi.flushSync(()=>{n(!0)});const Z=s.subscribe("onResolved",()=>{Z(),n(!1)});return s.navigate({...ie,replace:j,resetScroll:N,hashScrollIntoView:b,startTransition:w,viewTransition:E,ignoreBlocker:B})}},Ce=G=>{P||ae&&we()},ve=Ce,Pe=G=>{if(P)return;const Z=G.target||{};if(ae){if(Z.preloadTimeout)return;Z.preloadTimeout=setTimeout(()=>{Z.preloadTimeout=null,we()},ue)}},fe=G=>{if(P)return;const Z=G.target||{};Z.preloadTimeout&&(clearTimeout(Z.preloadTimeout),Z.preloadTimeout=null)},Re=G=>Z=>{var ye;(ye=Z.persist)==null||ye.call(Z),G.filter(Boolean).forEach(Ne=>{Z.defaultPrevented||Ne(Z)})},Te=ce?xi(u,{})??{}:{},et=ce?{}:xi(f,{}),Ae=[D,Te.className,et.className].filter(Boolean).join(" "),U={...R,...Te.style,...et.style};return{...L,...Te,...et,href:P?void 0:le.maskedLocation?s.history.createHref(le.maskedLocation.href):s.history.createHref(le.href),ref:c,onClick:Re([$,je]),onFocus:Re([k,Ce]),onMouseEnter:Re([M,Pe]),onMouseLeave:Re([V,fe]),onTouchStart:Re([Y,ve]),disabled:!!P,target:S,...Object.keys(U).length&&{style:U},...Ae&&{className:Ae},...P&&{role:"link","aria-disabled":!0},...ce&&{"data-status":"active","aria-current":"page"},...a&&{"data-transitioning":"transitioning"}}}const _o=y.forwardRef((t,e)=>{const{_asChild:s,...a}=t,{type:n,ref:i,...c}=WP(a,e),u=typeof a.children=="function"?a.children({isActive:c["data-status"]==="active"}):a.children;return typeof s>"u"&&delete c.disabled,y.createElement(s||"a",{...c,ref:i},u)});function ZP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}let QP=class extends jE{constructor(e){super(e),this.useMatch=s=>Eo({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Eo({...s,from:this.id,select:a=>s!=null&&s.select?s.select(a.context):a.context}),this.useSearch=s=>cy({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>ly({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>CE({...s,from:this.id}),this.useLoaderData=s=>EE({...s,from:this.id}),this.useNavigate=()=>Pt({from:this.fullPath}),this.Link=he.forwardRef((s,a)=>r.jsx(_o,{ref:a,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}};function JP(t){return new QP(t)}class eD extends kP{constructor(e){super(e),this.useMatch=s=>Eo({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Eo({...s,from:this.id,select:a=>s!=null&&s.select?s.select(a.context):a.context}),this.useSearch=s=>cy({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>ly({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>CE({...s,from:this.id}),this.useLoaderData=s=>EE({...s,from:this.id}),this.useNavigate=()=>Pt({from:this.fullPath}),this.Link=he.forwardRef((s,a)=>r.jsx(_o,{ref:a,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}}function tD(t){return new eD(t)}function Yt(t){return new sD(t,{silent:!0}).createRoute}class sD{constructor(e,s){this.path=e,this.createRoute=a=>{this.silent;const n=JP(a);return n.isRoot=!1,n},this.silent=s==null?void 0:s.silent}}const aD=t=>new rD(t);class rD extends NP{constructor(e){super(e)}}function nD({router:t,children:e,...s}){t.update({...t.options,...s,context:{...t.options.context,...s.context}});const a=SE(),n=r.jsx(a.Provider,{value:t,children:e});return t.options.Wrap?r.jsx(t.options.Wrap,{children:n}):n}function oD({router:t,...e}){return r.jsx(nD,{router:t,...e,children:r.jsx(XP,{})})}function $i(t){return Ds({select:e=>e.location})}const iD="modulepreload",lD=function(t){return"/"+t},eN={},ws=function(e,s,a){let n=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=c(s.map(h=>{if(h=lD(h),h in eN)return;eN[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":iD,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((b,j)=>{x.addEventListener("load",b),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return n.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},nt={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return tN(this.context.count)},getNextContextId(){return tN(this.context.count++)}};function tN(t){const e=String(t),s=e.length-1;return nt.context.id+(s?String.fromCharCode(96+s):"")+e}function Vu(t){nt.context=t}const RE=!1,cD=(t,e)=>t===e,Kh=Symbol("solid-proxy"),ME=typeof Proxy=="function",Wh={equals:cD};let PE=IE;const Pn=1,Zh=2,DE={owned:null,cleanups:null,context:null,owner:null},ex={};var Gt=null;let tx=null,uD=null,Ht=null,aa=null,En=null,Lm=0;function dD(t,e){const s=Ht,a=Gt,n=t.length===0,i=e===void 0?a:e,c=n?DE:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=n?t:()=>t(()=>Cr(()=>gd(c)));Gt=c,Ht=null;try{return Co(u,!0)}finally{Ht=s,Gt=a}}function go(t,e){e=e?Object.assign({},Wh,e):Wh;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},a=n=>(typeof n=="function"&&(n=n(s.value)),LE(s,n));return[$E.bind(s),a]}function fD(t,e,s){const a=Im(t,e,!0,Pn);wc(a)}function ji(t,e,s){const a=Im(t,e,!1,Pn);wc(a)}function AW(t,e,s){PE=_D;const a=Im(t,e,!1,Pn);(!s||!s.render)&&(a.user=!0),En?En.push(a):wc(a)}function Sr(t,e,s){s=s?Object.assign({},Wh,s):Wh;const a=Im(t,e,!0,0);return a.observers=null,a.observerSlots=null,a.comparator=s.equals||void 0,wc(a),$E.bind(a)}function hD(t){return t&&typeof t=="object"&&"then"in t}function mD(t,e,s){let a,n,i;a=!0,n=t,i={};let c=null,u=ex,f=null,h=!1,p="initialValue"in i,g=typeof a=="function"&&Sr(a);const x=new Set,[b,j]=(i.storage||go)(i.initialValue),[w,N]=go(void 0),[E,C]=go(void 0,{equals:!1}),[S,P]=go(p?"ready":"unresolved");nt.context&&(f=nt.getNextContextId(),i.ssrLoadFrom==="initial"?u=i.initialValue:nt.load&&nt.has(f)&&(u=nt.load(f)));function R(V,Y,B,z){return c===V&&(c=null,z!==void 0&&(p=!0),(V===u||Y===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(z,{value:Y})),u=ex,D(Y,B)),Y}function D(V,Y){Co(()=>{Y===void 0&&j(()=>V),P(Y!==void 0?"errored":p?"ready":"unresolved"),N(Y);for(const B of x.keys())B.decrement();x.clear()},!1)}function $(){const V=vD,Y=b(),B=w();if(B!==void 0&&!c)throw B;return Ht&&Ht.user,Y}function k(V=!0){if(V!==!1&&h)return;h=!1;const Y=g?g():a;if(Y==null||Y===!1){R(c,Cr(b));return}let B;const z=u!==ex?u:Cr(()=>{try{return n(Y,{value:b(),refetching:V})}catch(Q){B=Q}});if(B!==void 0){R(c,void 0,Ah(B),Y);return}else if(!hD(z))return R(c,z,void 0,Y),z;return c=z,"v"in z?(z.s===1?R(c,z.v,void 0,Y):R(c,void 0,Ah(z.v),Y),z):(h=!0,queueMicrotask(()=>h=!1),Co(()=>{P(p?"refreshing":"pending"),C()},!1),z.then(Q=>R(z,Q,void 0,Y),Q=>R(z,void 0,Ah(Q),Y)))}Object.defineProperties($,{state:{get:()=>S()},error:{get:()=>w()},loading:{get(){const V=S();return V==="pending"||V==="refreshing"}},latest:{get(){if(!p)return $();const V=w();if(V&&!c)throw V;return b()}}});let M=Gt;return g?fD(()=>(M=Gt,k(!1))):k(!1),[$,{refetch:V=>pD(M,()=>k(V)),mutate:j}]}function Cr(t){if(Ht===null)return t();const e=Ht;Ht=null;try{return t()}finally{Ht=e}}function pD(t,e){const s=Gt,a=Ht;Gt=t,Ht=null;try{return Co(e,!0)}catch(n){uy(n)}finally{Gt=s,Ht=a}}const[TW,RW]=go(!1);function OE(t,e){const s=Symbol("context");return{id:s,Provider:wD(s),defaultValue:t}}function gD(t){let e;return Gt&&Gt.context&&(e=Gt.context[t.id])!==void 0?e:t.defaultValue}function xD(t){const e=Sr(t),s=Sr(()=>zx(e()));return s.toArray=()=>{const a=s();return Array.isArray(a)?a:a!=null?[a]:[]},s}let vD;function $E(){if(this.sources&&this.state)if(this.state===Pn)wc(this);else{const t=aa;aa=null,Co(()=>Jh(this),!1),aa=t}if(Ht){const t=this.observers?this.observers.length:0;Ht.sources?(Ht.sources.push(this),Ht.sourceSlots.push(t)):(Ht.sources=[this],Ht.sourceSlots=[t]),this.observers?(this.observers.push(Ht),this.observerSlots.push(Ht.sources.length-1)):(this.observers=[Ht],this.observerSlots=[Ht.sources.length-1])}return this.value}function LE(t,e,s){let a=t.value;return(!t.comparator||!t.comparator(a,e))&&(t.value=e,t.observers&&t.observers.length&&Co(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],c=tx&&tx.running;c&&tx.disposed.has(i),(c?!i.tState:!i.state)&&(i.pure?aa.push(i):En.push(i),i.observers&&BE(i)),c||(i.state=Pn)}if(aa.length>1e6)throw aa=[],new Error},!1)),e}function wc(t){if(!t.fn)return;gd(t);const e=Lm;yD(t,t.value,e)}function yD(t,e,s){let a;const n=Gt,i=Ht;Ht=Gt=t;try{a=t.fn(e)}catch(c){return t.pure&&(t.state=Pn,t.owned&&t.owned.forEach(gd),t.owned=null),t.updatedAt=s+1,uy(c)}finally{Ht=i,Gt=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?LE(t,a):t.value=a,t.updatedAt=s)}function Im(t,e,s,a=Pn,n){const i={fn:t,state:a,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Gt,context:Gt?Gt.context:null,pure:s};return Gt===null||Gt!==DE&&(Gt.owned?Gt.owned.push(i):Gt.owned=[i]),i}function Qh(t){if(t.state===0)return;if(t.state===Zh)return Jh(t);if(t.suspense&&Cr(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Lm);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===Pn)wc(t);else if(t.state===Zh){const a=aa;aa=null,Co(()=>Jh(t,e[0]),!1),aa=a}}function Co(t,e){if(aa)return t();let s=!1;e||(aa=[]),En?s=!0:En=[],Lm++;try{const a=t();return bD(s),a}catch(a){s||(En=null),aa=null,uy(a)}}function bD(t){if(aa&&(IE(aa),aa=null),t)return;const e=En;En=null,e.length&&Co(()=>PE(e),!1)}function IE(t){for(let e=0;e<t.length;e++)Qh(t[e])}function _D(t){let e,s=0;for(e=0;e<t.length;e++){const a=t[e];a.user?t[s++]=a:Qh(a)}if(nt.context){if(nt.count){nt.effects||(nt.effects=[]),nt.effects.push(...t.slice(0,s));return}Vu()}for(nt.effects&&(nt.done||!nt.count)&&(t=[...nt.effects,...t],s+=nt.effects.length,delete nt.effects),e=0;e<s;e++)Qh(t[e])}function Jh(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const a=t.sources[s];if(a.sources){const n=a.state;n===Pn?a!==e&&(!a.updatedAt||a.updatedAt<Lm)&&Qh(a):n===Zh&&Jh(a,e)}}}function BE(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=Zh,s.pure?aa.push(s):En.push(s),s.observers&&BE(s))}}function gd(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),a=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const i=n.pop(),c=s.observerSlots.pop();a<n.length&&(i.sourceSlots[c]=a,n[a]=i,s.observerSlots[a]=c)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)gd(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)gd(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ah(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function uy(t,e=Gt){throw Ah(t)}function zx(t){if(typeof t=="function"&&!t.length)return zx(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const a=zx(t[s]);Array.isArray(a)?e.push.apply(e,a):e.push(a)}return e}return t}function wD(t,e){return function(a){let n;return ji(()=>n=Cr(()=>(Gt.context={...Gt.context,[t]:a.value},xD(()=>a.children))),void 0),n}}function sN(t,e){return Cr(()=>t(e||{}))}function oh(){return!0}const Fx={get(t,e,s){return e===Kh?s:t.get(e)},has(t,e){return e===Kh?!0:t.has(e)},set:oh,deleteProperty:oh,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:oh,deleteProperty:oh}},ownKeys(t){return t.keys()}};function sx(t){return(t=typeof t=="function"?t():t)?t:{}}function jD(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function MW(...t){let e=!1;for(let c=0;c<t.length;c++){const u=t[c];e=e||!!u&&Kh in u,t[c]=typeof u=="function"?(e=!0,Sr(u)):u}if(ME&&e)return new Proxy({get(c){for(let u=t.length-1;u>=0;u--){const f=sx(t[u])[c];if(f!==void 0)return f}},has(c){for(let u=t.length-1;u>=0;u--)if(c in sx(t[u]))return!0;return!1},keys(){const c=[];for(let u=0;u<t.length;u++)c.push(...Object.keys(sx(t[u])));return[...new Set(c)]}},Fx);const s={},a=Object.create(null);for(let c=t.length-1;c>=0;c--){const u=t[c];if(!u)continue;const f=Object.getOwnPropertyNames(u);for(let h=f.length-1;h>=0;h--){const p=f[h];if(p==="__proto__"||p==="constructor")continue;const g=Object.getOwnPropertyDescriptor(u,p);if(!a[p])a[p]=g.get?{enumerable:!0,configurable:!0,get:jD.bind(s[p]=[g.get.bind(u)])}:g.value!==void 0?g:void 0;else{const x=s[p];x&&(g.get?x.push(g.get.bind(u)):g.value!==void 0&&x.push(()=>g.value))}}}const n={},i=Object.keys(a);for(let c=i.length-1;c>=0;c--){const u=i[c],f=a[u];f&&f.get?Object.defineProperty(n,u,f):n[u]=f?f.value:void 0}return n}function ND(t,...e){if(ME&&Kh in t){const n=new Set(e.length>1?e.flat():e[0]),i=e.map(c=>new Proxy({get(u){return c.includes(u)?t[u]:void 0},has(u){return c.includes(u)&&u in t},keys(){return c.filter(u=>u in t)}},Fx));return i.push(new Proxy({get(c){return n.has(c)?void 0:t[c]},has(c){return n.has(c)?!1:c in t},keys(){return Object.keys(t).filter(c=>!n.has(c))}},Fx)),i}const s={},a=e.map(()=>({}));for(const n of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,n),c=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let u=!1,f=0;for(const h of e)h.includes(n)&&(u=!0,c?a[f][n]=i.value:Object.defineProperty(a[f],n,i)),++f;u||(c?s[n]=i.value:Object.defineProperty(s,n,i))}return[...a,s]}function SD(t){let e,s;const a=n=>{const i=nt.context;if(i){const[u,f]=go();nt.count||(nt.count=0),nt.count++,(s||(s=t())).then(h=>{!nt.done&&Vu(i),nt.count--,f(()=>h.default),Vu()}),e=u}else if(!e){const[u]=mD(()=>(s||(s=t())).then(f=>f.default));e=u}let c;return Sr(()=>(c=e())?Cr(()=>{if(!i||nt.done)return c(n);const u=nt.context;Vu(i);const f=c(n);return Vu(u),f}):"")};return a.preload=()=>s||((s=t()).then(n=>e=()=>n.default),s),a}let ED=0;function PW(){return nt.context?nt.getNextContextId():`cl-${ED++}`}const CD=t=>`Stale read from <${t}>.`;function DW(t){const e=t.keyed,s=Sr(()=>t.when,void 0,void 0),a=e?s:Sr(s,void 0,{equals:(n,i)=>!n==!i});return Sr(()=>{const n=a();if(n){const i=t.children;return typeof i=="function"&&i.length>0?Cr(()=>i(e?n:()=>{if(!Cr(a))throw CD("Show");return s()})):i}return t.fallback},void 0,void 0)}const kD=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],AD=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...kD]),TD=new Set(["innerHTML","textContent","innerText","children"]),RD=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),MD=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function PD(t,e){const s=MD[t];return typeof s=="object"?s[e]?s.$:void 0:s}const DD=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),OD=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),$D={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},OW=t=>Sr(()=>t());function LD(t,e,s){let a=s.length,n=e.length,i=a,c=0,u=0,f=e[n-1].nextSibling,h=null;for(;c<n||u<i;){if(e[c]===s[u]){c++,u++;continue}for(;e[n-1]===s[i-1];)n--,i--;if(n===c){const p=i<a?u?s[u-1].nextSibling:s[i-u]:f;for(;u<i;)t.insertBefore(s[u++],p)}else if(i===u)for(;c<n;)(!h||!h.has(e[c]))&&e[c].remove(),c++;else if(e[c]===s[i-1]&&s[u]===e[n-1]){const p=e[--n].nextSibling;t.insertBefore(s[u++],e[c++].nextSibling),t.insertBefore(s[--i],p),e[n]=s[i]}else{if(!h){h=new Map;let g=u;for(;g<i;)h.set(s[g],g++)}const p=h.get(e[c]);if(p!=null)if(u<p&&p<i){let g=c,x=1,b;for(;++g<n&&g<i&&!((b=h.get(e[g]))==null||b!==p+x);)x++;if(x>p-u){const j=e[c];for(;u<p;)t.insertBefore(s[u++],j)}else t.replaceChild(s[u++],e[c++])}else c++;else e[c++].remove()}}}const aN="_$DX_DELEGATE";function ID(t,e,s,a={}){let n;return dD(i=>{n=i,e===document?t():YD(e,t(),e.firstChild?null:void 0,s)},a.owner),()=>{n(),e.textContent=""}}function $W(t,e,s,a){let n;const i=()=>{const u=document.createElement("template");return u.innerHTML=t,u.content.firstChild},c=()=>(n||(n=i())).cloneNode(!0);return c.cloneNode=c,c}function BD(t,e=window.document){const s=e[aN]||(e[aN]=new Set);for(let a=0,n=t.length;a<n;a++){const i=t[a];s.has(i)||(s.add(i),e.addEventListener(i,QD))}}function Hx(t,e,s){Li(t)||(s==null?t.removeAttribute(e):t.setAttribute(e,s))}function VD(t,e,s,a){Li(t)||(a==null?t.removeAttributeNS(e,s):t.setAttributeNS(e,s,a))}function qD(t,e,s){Li(t)||(s?t.setAttribute(e,""):t.removeAttribute(e))}function UD(t,e){Li(t)||(e==null?t.removeAttribute("class"):t.className=e)}function zD(t,e,s,a){if(a)Array.isArray(s)?(t[`$$${e}`]=s[0],t[`$$${e}Data`]=s[1]):t[`$$${e}`]=s;else if(Array.isArray(s)){const n=s[0];t.addEventListener(e,s[0]=i=>n.call(t,s[1],i))}else t.addEventListener(e,s,typeof s!="function"&&s)}function FD(t,e,s={}){const a=Object.keys(e||{}),n=Object.keys(s);let i,c;for(i=0,c=n.length;i<c;i++){const u=n[i];!u||u==="undefined"||e[u]||(rN(t,u,!1),delete s[u])}for(i=0,c=a.length;i<c;i++){const u=a[i],f=!!e[u];!u||u==="undefined"||s[u]===f||!f||(rN(t,u,!0),s[u]=f)}return s}function HD(t,e,s){if(!e)return s?Hx(t,"style"):e;const a=t.style;if(typeof e=="string")return a.cssText=e;typeof s=="string"&&(a.cssText=s=void 0),s||(s={}),e||(e={});let n,i;for(i in s)e[i]==null&&a.removeProperty(i),delete s[i];for(i in e)n=e[i],n!==s[i]&&(a.setProperty(i,n),s[i]=n);return s}function GD(t,e={},s,a){const n={};return a||ji(()=>n.children=xd(t,e.children,n.children)),ji(()=>typeof e.ref=="function"&&XD(e.ref,t)),ji(()=>KD(t,e,s,!0,n,!0)),n}function XD(t,e,s){return Cr(()=>t(e,s))}function YD(t,e,s,a){if(s!==void 0&&!a&&(a=[]),typeof e!="function")return xd(t,e,a,s);ji(n=>xd(t,e(),n,s),a)}function KD(t,e,s,a,n={},i=!1){e||(e={});for(const c in n)if(!(c in e)){if(c==="children")continue;n[c]=nN(t,c,null,n[c],s,i,e)}for(const c in e){if(c==="children")continue;const u=e[c];n[c]=nN(t,c,u,n[c],s,i,e)}}function WD(t){let e,s;return!Li()||!(e=nt.registry.get(s=JD()))?t():(nt.completed&&nt.completed.add(e),nt.registry.delete(s),e)}function Li(t){return!!nt.context&&!nt.done&&(!t||t.isConnected)}function ZD(t){return t.toLowerCase().replace(/-([a-z])/g,(e,s)=>s.toUpperCase())}function rN(t,e,s){const a=e.trim().split(/\s+/);for(let n=0,i=a.length;n<i;n++)t.classList.toggle(a[n],s)}function nN(t,e,s,a,n,i,c){let u,f,h,p,g;if(e==="style")return HD(t,s,a);if(e==="classList")return FD(t,s,a);if(s===a)return a;if(e==="ref")i||s(t);else if(e.slice(0,3)==="on:"){const x=e.slice(3);a&&t.removeEventListener(x,a,typeof a!="function"&&a),s&&t.addEventListener(x,s,typeof s!="function"&&s)}else if(e.slice(0,10)==="oncapture:"){const x=e.slice(10);a&&t.removeEventListener(x,a,!0),s&&t.addEventListener(x,s,!0)}else if(e.slice(0,2)==="on"){const x=e.slice(2).toLowerCase(),b=DD.has(x);if(!b&&a){const j=Array.isArray(a)?a[0]:a;t.removeEventListener(x,j)}(b||s)&&(zD(t,x,s,b),b&&BD([x]))}else if(e.slice(0,5)==="attr:")Hx(t,e.slice(5),s);else if(e.slice(0,5)==="bool:")qD(t,e.slice(5),s);else if((g=e.slice(0,5)==="prop:")||(h=TD.has(e))||!n&&((p=PD(e,t.tagName))||(f=AD.has(e)))||(u=t.nodeName.includes("-")||"is"in c)){if(g)e=e.slice(5),f=!0;else if(Li(t))return s;e==="class"||e==="className"?UD(t,s):u&&!f&&!h?t[ZD(e)]=s:t[p||e]=s}else{const x=n&&e.indexOf(":")>-1&&$D[e.split(":")[0]];x?VD(t,x,e,s):Hx(t,RD[e]||e,s)}return s}function QD(t){if(nt.registry&&nt.events&&nt.events.find(([f,h])=>h===t))return;let e=t.target;const s=`$$${t.type}`,a=t.target,n=t.currentTarget,i=f=>Object.defineProperty(t,"target",{configurable:!0,value:f}),c=()=>{const f=e[s];if(f&&!e.disabled){const h=e[`${s}Data`];if(h!==void 0?f.call(e,h,t):f.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},u=()=>{for(;c()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),nt.registry&&!nt.done&&(nt.done=_$HY.done=!0),t.composedPath){const f=t.composedPath();i(f[0]);for(let h=0;h<f.length-2&&(e=f[h],!!c());h++){if(e._$host){e=e._$host,u();break}if(e.parentNode===n)break}}else u();i(a)}function xd(t,e,s,a,n){const i=Li(t);if(i){!s&&(s=[...t.childNodes]);let f=[];for(let h=0;h<s.length;h++){const p=s[h];p.nodeType===8&&p.data.slice(0,2)==="!$"?p.remove():f.push(p)}s=f}for(;typeof s=="function";)s=s();if(e===s)return s;const c=typeof e,u=a!==void 0;if(t=u&&s[0]&&s[0].parentNode||t,c==="string"||c==="number"){if(i||c==="number"&&(e=e.toString(),e===s))return s;if(u){let f=s[0];f&&f.nodeType===3?f.data!==e&&(f.data=e):f=document.createTextNode(e),s=Cl(t,s,a,f)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||c==="boolean"){if(i)return s;s=Cl(t,s,a)}else{if(c==="function")return ji(()=>{let f=e();for(;typeof f=="function";)f=f();s=xd(t,f,s,a)}),()=>s;if(Array.isArray(e)){const f=[],h=s&&Array.isArray(s);if(Gx(f,e,s,n))return ji(()=>s=xd(t,f,s,a,!0)),()=>s;if(i){if(!f.length)return s;if(a===void 0)return s=[...t.childNodes];let p=f[0];if(p.parentNode!==t)return s;const g=[p];for(;(p=p.nextSibling)!==a;)g.push(p);return s=g}if(f.length===0){if(s=Cl(t,s,a),u)return s}else h?s.length===0?oN(t,f,a):LD(t,s,f):(s&&Cl(t),oN(t,f));s=f}else if(e.nodeType){if(i&&e.parentNode)return s=u?[e]:e;if(Array.isArray(s)){if(u)return s=Cl(t,s,a,e);Cl(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function Gx(t,e,s,a){let n=!1;for(let i=0,c=e.length;i<c;i++){let u=e[i],f=s&&s[t.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)t.push(u);else if(Array.isArray(u))n=Gx(t,u,f)||n;else if(h==="function")if(a){for(;typeof u=="function";)u=u();n=Gx(t,Array.isArray(u)?u:[u],Array.isArray(f)?f:[f])||n}else t.push(u),n=!0;else{const p=String(u);f&&f.nodeType===3&&f.data===p?t.push(f):t.push(document.createTextNode(p))}}return n}function oN(t,e,s=null){for(let a=0,n=e.length;a<n;a++)t.insertBefore(e[a],s)}function Cl(t,e,s,a){if(s===void 0)return t.textContent="";const n=a||document.createTextNode("");if(e.length){let i=!1;for(let c=e.length-1;c>=0;c--){const u=e[c];if(n!==u){const f=u.parentNode===t;!i&&!c?f?t.replaceChild(n,u):t.insertBefore(n,s):f&&u.remove()}else i=!0}}else t.insertBefore(n,s);return[n]}function JD(){return nt.getNextContextId()}const eO="http://www.w3.org/2000/svg";function tO(t,e=!1){return e?document.createElementNS(eO,t):document.createElement(t)}function sO(t,e){const s=Sr(t);return Sr(()=>{const a=s();switch(typeof a){case"function":return Cr(()=>a(e));case"string":const n=OD.has(a),i=nt.context?WD():tO(a,n);return GD(i,e,n),i}})}function LW(t){const[,e]=ND(t,["component"]);return sO(()=>t.component,e)}const aO=OE(void 0),rO=OE(void 0),IW=()=>{const t=gD(rO);if(!t)throw new Error("useDevtoolsOnClose must be used within a TanStackRouterDevtools component");return t};var VE=t=>{throw TypeError(t)},qE=(t,e,s)=>e.has(t)||VE("Cannot "+s),Ys=(t,e,s)=>(qE(t,e,"read from private field"),e.get(t)),Za=(t,e,s)=>e.has(t)?VE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Vs=(t,e,s,a)=>(qE(t,e,"write to private field"),e.set(t,s),s),qu,Uu,zu,Fu,Hu,Th,Rh,Mh,Gu,Fl,Xu,Ph;class nO{constructor(e){Za(this,qu),Za(this,Uu),Za(this,zu),Za(this,Fu),Za(this,Hu),Za(this,Th),Za(this,Rh),Za(this,Mh),Za(this,Gu),Za(this,Fl,!1),Za(this,Xu),Za(this,Ph),Vs(this,qu,go(e.router)),Vs(this,Uu,go(e.routerState)),Vs(this,zu,e.position??"bottom-left"),Vs(this,Fu,e.initialIsOpen??!1),Vs(this,Hu,e.shadowDOMTarget),Vs(this,Th,e.panelProps),Vs(this,Rh,e.closeButtonProps),Vs(this,Mh,e.toggleButtonProps),Vs(this,Gu,e.containerElement)}mount(e){if(Ys(this,Fl))throw new Error("Devtools is already mounted");const s=ID(()=>{const[a]=Ys(this,qu),[n]=Ys(this,Uu),i=Ys(this,zu),c=Ys(this,Fu),u=Ys(this,Hu),f=Ys(this,Th),h=Ys(this,Rh),p=Ys(this,Mh),g=Ys(this,Gu);let x;return Ys(this,Xu)?x=Ys(this,Xu):(x=SD(()=>ws(()=>import("./FloatingTanStackRouterDevtools-KTxWFEM3.js"),[])),Vs(this,Xu,x)),sN(aO.Provider,{value:u,get children(){return sN(x,{position:i,initialIsOpen:c,router:a,routerState:n,shadowDOMTarget:u,panelProps:f,closeButtonProps:h,toggleButtonProps:p,containerElement:g})}})},e);Vs(this,Fl,!0),Vs(this,Ph,s)}unmount(){var e;if(!Ys(this,Fl))throw new Error("Devtools is not mounted");(e=Ys(this,Ph))==null||e.call(this),Vs(this,Fl,!1)}setRouter(e){Ys(this,qu)[1](e)}setRouterState(e){Ys(this,Uu)[1](e)}setOptions(e){e.position!==void 0&&Vs(this,zu,e.position),e.initialIsOpen!==void 0&&Vs(this,Fu,e.initialIsOpen),e.shadowDOMTarget!==void 0&&Vs(this,Hu,e.shadowDOMTarget),e.containerElement!==void 0&&Vs(this,Gu,e.containerElement)}}qu=new WeakMap;Uu=new WeakMap;zu=new WeakMap;Fu=new WeakMap;Hu=new WeakMap;Th=new WeakMap;Rh=new WeakMap;Mh=new WeakMap;Gu=new WeakMap;Fl=new WeakMap;Xu=new WeakMap;Ph=new WeakMap;function oO(t){const{initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:f}=t,h=Tr({warn:!1}),p=f??h,g=Ds({router:p}),x=y.useRef(null),[b]=y.useState(()=>new nO({initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:p,routerState:g}));return y.useEffect(()=>{b.setRouter(p)},[b,p]),y.useEffect(()=>{b.setRouterState(g)},[b,g]),y.useEffect(()=>{b.setOptions({initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u})},[b,e,s,a,n,i,c,u]),y.useEffect(()=>(x.current&&b.mount(x.current),()=>{b.unmount()}),[b]),r.jsx(y.Fragment,{children:r.jsx("div",{ref:x})})}const iO=oO;console.warn("[@tanstack/router-devtools] This package has moved to @tanstack/react-router-devtools. Please switch to the new package at your earliest convenience, as this package will be dropped in the next major version release.");var Et;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function s(n){throw new Error}t.assertNever=s,t.arrayToEnum=n=>{const i={};for(const c of n)i[c]=c;return i},t.getValidEnumValues=n=>{const i=t.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),c={};for(const u of i)c[u]=n[u];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(const c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=a,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Et||(Et={}));var iN;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(iN||(iN={}));const qe=Et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lo=t=>{switch(typeof t){case"undefined":return qe.undefined;case"string":return qe.string;case"number":return Number.isNaN(t)?qe.nan:qe.number;case"boolean":return qe.boolean;case"function":return qe.function;case"bigint":return qe.bigint;case"symbol":return qe.symbol;case"object":return Array.isArray(t)?qe.array:t===null?qe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?qe.promise:typeof Map<"u"&&t instanceof Map?qe.map:typeof Set<"u"&&t instanceof Set?qe.set:typeof Date<"u"&&t instanceof Date?qe.date:qe.object;default:return qe.unknown}},Ee=Et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Wr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(i){return i.message},a={_errors:[]},n=i=>{for(const c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)a._errors.push(s(c));else{let u=a,f=0;for(;f<c.path.length;){const h=c.path[f];f===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(s(c))):u[h]=u[h]||{_errors:[]},u=u[h],f++}}};return n(this),a}static assert(e){if(!(e instanceof Wr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},a=[];for(const n of this.issues)n.path.length>0?(s[n.path[0]]=s[n.path[0]]||[],s[n.path[0]].push(e(n))):a.push(e(n));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}Wr.create=t=>new Wr(t);const Xx=(t,e)=>{let s;switch(t.code){case Ee.invalid_type:t.received===qe.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case Ee.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,Et.jsonStringifyReplacer)}`;break;case Ee.unrecognized_keys:s=`Unrecognized key(s) in object: ${Et.joinValues(t.keys,", ")}`;break;case Ee.invalid_union:s="Invalid input";break;case Ee.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Et.joinValues(t.options)}`;break;case Ee.invalid_enum_value:s=`Invalid enum value. Expected ${Et.joinValues(t.options)}, received '${t.received}'`;break;case Ee.invalid_arguments:s="Invalid function arguments";break;case Ee.invalid_return_type:s="Invalid function return type";break;case Ee.invalid_date:s="Invalid date";break;case Ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:Et.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case Ee.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case Ee.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case Ee.custom:s="Invalid input";break;case Ee.invalid_intersection_types:s="Intersection results could not be merged";break;case Ee.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case Ee.not_finite:s="Number must be finite";break;default:s=e.defaultError,Et.assertNever(t)}return{message:s}};let lO=Xx;function cO(){return lO}const uO=t=>{const{data:e,path:s,errorMaps:a,issueData:n}=t,i=[...s,...n.path||[]],c={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let u="";const f=a.filter(h=>!!h).slice().reverse();for(const h of f)u=h(c,{data:e,defaultError:u}).message;return{...n,path:i,message:u}};function Oe(t,e){const s=cO(),a=uO({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Xx?void 0:Xx].filter(n=>!!n)});t.common.issues.push(a)}class Ia{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const a=[];for(const n of s){if(n.status==="aborted")return st;n.status==="dirty"&&e.dirty(),a.push(n.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,s){const a=[];for(const n of s){const i=await n.key,c=await n.value;a.push({key:i,value:c})}return Ia.mergeObjectSync(e,a)}static mergeObjectSync(e,s){const a={};for(const n of s){const{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return st;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(a[i.value]=c.value)}return{status:e.value,value:a}}}const st=Object.freeze({status:"aborted"}),Yu=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),lN=t=>t.status==="aborted",cN=t=>t.status==="dirty",cc=t=>t.status==="valid",em=t=>typeof Promise<"u"&&t instanceof Promise;var Ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ue||(Ue={}));class ko{constructor(e,s,a,n){this._cachedPath=[],this.parent=e,this.data=s,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uN=(t,e)=>{if(cc(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Wr(t.common.issues);return this._error=s,this._error}}};function mt(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:a,description:n}=t;if(e&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,u)=>{const{message:f}=t;return c.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??a??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:f??s??u.defaultError}},description:n}}class Nt{get description(){return this._def.description}_getType(e){return lo(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ia,ctx:{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(em(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const a=this.safeParse(e,s);if(a.success)return a.data;throw a.error}safeParse(e,s){const a={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},n=this._parseSync({data:e,path:a.path,parent:a});return uN(a,n)}"~validate"(e){var a,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return cc(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(n=(a=i==null?void 0:i.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>cc(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,s){const a=await this.safeParseAsync(e,s);if(a.success)return a.data;throw a.error}async safeParseAsync(e,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},n=this._parse({data:e,path:a.path,parent:a}),i=await(em(n)?n:Promise.resolve(n));return uN(a,i)}refine(e,s){const a=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,i)=>{const c=e(n),u=()=>i.addIssue({code:Ee.custom,...a(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(e,s){return this._refinement((a,n)=>e(a)?!0:(n.addIssue(typeof s=="function"?s(a,n):s),!1))}_refinement(e){return new dc({schema:this,typeName:at.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return wo.create(this,this._def)}nullable(){return fc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fr.create(this)}promise(){return rm.create(this,this._def)}or(e){return sm.create([this,e],this._def)}and(e){return am.create(this,e,this._def)}transform(e){return new dc({...mt(this._def),schema:this,typeName:at.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Wx({...mt(this._def),innerType:this,defaultValue:s,typeName:at.ZodDefault})}brand(){return new PO({typeName:at.ZodBranded,type:this,...mt(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Zx({...mt(this._def),innerType:this,catchValue:s,typeName:at.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return dy.create(this,e)}readonly(){return Qx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dO=/^c[^\s-]{8,}$/i,fO=/^[0-9a-z]+$/,hO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,pO=/^[a-z0-9_-]{21}$/i,gO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,yO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ax;const bO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_O=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,jO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,NO=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SO=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,UE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",EO=new RegExp(`^${UE}$`);function zE(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function CO(t){return new RegExp(`^${zE(t)}$`)}function kO(t){let e=`${UE}T${zE(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function AO(t,e){return!!((e==="v4"||!e)&&bO.test(t)||(e==="v6"||!e)&&wO.test(t))}function TO(t,e){if(!gO.test(t))return!1;try{const[s]=t.split("."),a=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function RO(t,e){return!!((e==="v4"||!e)&&_O.test(t)||(e==="v6"||!e)&&jO.test(t))}class xo extends Nt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==qe.string){const i=this._getOrReturnCtx(e);return Oe(i,{code:Ee.invalid_type,expected:qe.string,received:i.parsedType}),st}const a=new Ia;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const c=e.data.length>i.value,u=e.data.length<i.value;(c||u)&&(n=this._getOrReturnCtx(e,n),c?Oe(n,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Oe(n,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")vO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"email",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")ax||(ax=new RegExp(yO,"u")),ax.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"emoji",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")mO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"uuid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")pO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"nanoid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")dO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"cuid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")fO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"cuid2",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")hO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"ulid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),Oe(n,{validation:"url",code:Ee.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"regex",code:Ee.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?kO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?EO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?CO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?xO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"duration",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?AO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"ip",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?TO(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"jwt",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?RO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"cidr",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?NO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"base64",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?SO.test(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{validation:"base64url",code:Ee.invalid_string,message:i.message}),a.dirty()):Et.assertNever(i);return{status:a.value,value:e.data}}_regex(e,s,a){return this.refinement(n=>e.test(n),{validation:s,code:Ee.invalid_string,...Ue.errToObj(a)})}_addCheck(e){return new xo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ue.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ue.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ue.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ue.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...Ue.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...Ue.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...Ue.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...Ue.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...Ue.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...Ue.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...Ue.errToObj(s)})}nonempty(e){return this.min(1,Ue.errToObj(e))}trim(){return new xo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new xo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new xo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}xo.create=t=>new xo({checks:[],typeName:at.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...mt(t)});function MO(t,e){const s=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,n=s>a?s:a,i=Number.parseInt(t.toFixed(n).replace(".","")),c=Number.parseInt(e.toFixed(n).replace(".",""));return i%c/10**n}class vd extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==qe.number){const i=this._getOrReturnCtx(e);return Oe(i,{code:Ee.invalid_type,expected:qe.number,received:i.parsedType}),st}let a;const n=new Ia;for(const i of this._def.checks)i.kind==="int"?Et.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?MO(e.data,i.value)!==0&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.not_finite,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,a,n){return new vd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:Ue.toString(n)}]})}_addCheck(e){return new vd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:Ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ue.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Et.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(s)&&Number.isFinite(e)}}vd.create=t=>new vd({checks:[],typeName:at.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...mt(t)});class yd extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==qe.bigint)return this._getInvalidInput(e);let a;const n=new Ia;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),Oe(a,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return Oe(s,{code:Ee.invalid_type,expected:qe.bigint,received:s.parsedType}),st}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,a,n){return new yd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:Ue.toString(n)}]})}_addCheck(e){return new yd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}yd.create=t=>new yd({checks:[],typeName:at.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...mt(t)});class dN extends Nt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==qe.boolean){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.boolean,received:a.parsedType}),st}return nr(e.data)}}dN.create=t=>new dN({typeName:at.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...mt(t)});class tm extends Nt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==qe.date){const i=this._getOrReturnCtx(e);return Oe(i,{code:Ee.invalid_type,expected:qe.date,received:i.parsedType}),st}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Oe(i,{code:Ee.invalid_date}),st}const a=new Ia;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):Et.assertNever(i);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new tm({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:Ue.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:Ue.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}tm.create=t=>new tm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:at.ZodDate,...mt(t)});class fN extends Nt{_parse(e){if(this._getType(e)!==qe.symbol){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.symbol,received:a.parsedType}),st}return nr(e.data)}}fN.create=t=>new fN({typeName:at.ZodSymbol,...mt(t)});class hN extends Nt{_parse(e){if(this._getType(e)!==qe.undefined){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.undefined,received:a.parsedType}),st}return nr(e.data)}}hN.create=t=>new hN({typeName:at.ZodUndefined,...mt(t)});class mN extends Nt{_parse(e){if(this._getType(e)!==qe.null){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.null,received:a.parsedType}),st}return nr(e.data)}}mN.create=t=>new mN({typeName:at.ZodNull,...mt(t)});class pN extends Nt{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}}pN.create=t=>new pN({typeName:at.ZodAny,...mt(t)});class gN extends Nt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}}gN.create=t=>new gN({typeName:at.ZodUnknown,...mt(t)});class Ao extends Nt{_parse(e){const s=this._getOrReturnCtx(e);return Oe(s,{code:Ee.invalid_type,expected:qe.never,received:s.parsedType}),st}}Ao.create=t=>new Ao({typeName:at.ZodNever,...mt(t)});class xN extends Nt{_parse(e){if(this._getType(e)!==qe.undefined){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.void,received:a.parsedType}),st}return nr(e.data)}}xN.create=t=>new xN({typeName:at.ZodVoid,...mt(t)});class Fr extends Nt{_parse(e){const{ctx:s,status:a}=this._processInputParams(e),n=this._def;if(s.parsedType!==qe.array)return Oe(s,{code:Ee.invalid_type,expected:qe.array,received:s.parsedType}),st;if(n.exactLength!==null){const c=s.data.length>n.exactLength.value,u=s.data.length<n.exactLength.value;(c||u)&&(Oe(s,{code:c?Ee.too_big:Ee.too_small,minimum:u?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(Oe(s,{code:Ee.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(Oe(s,{code:Ee.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((c,u)=>n.type._parseAsync(new ko(s,c,s.path,u)))).then(c=>Ia.mergeArray(a,c));const i=[...s.data].map((c,u)=>n.type._parseSync(new ko(s,c,s.path,u)));return Ia.mergeArray(a,i)}get element(){return this._def.type}min(e,s){return new Fr({...this._def,minLength:{value:e,message:Ue.toString(s)}})}max(e,s){return new Fr({...this._def,maxLength:{value:e,message:Ue.toString(s)}})}length(e,s){return new Fr({...this._def,exactLength:{value:e,message:Ue.toString(s)}})}nonempty(e){return this.min(1,e)}}Fr.create=(t,e)=>new Fr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:at.ZodArray,...mt(e)});function Hl(t){if(t instanceof ps){const e={};for(const s in t.shape){const a=t.shape[s];e[s]=wo.create(Hl(a))}return new ps({...t._def,shape:()=>e})}else return t instanceof Fr?new Fr({...t._def,type:Hl(t.element)}):t instanceof wo?wo.create(Hl(t.unwrap())):t instanceof fc?fc.create(Hl(t.unwrap())):t instanceof Ci?Ci.create(t.items.map(e=>Hl(e))):t}class ps extends Nt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=Et.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==qe.object){const h=this._getOrReturnCtx(e);return Oe(h,{code:Ee.invalid_type,expected:qe.object,received:h.parsedType}),st}const{status:a,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ao&&this._def.unknownKeys==="strip"))for(const h in n.data)c.includes(h)||u.push(h);const f=[];for(const h of c){const p=i[h],g=n.data[h];f.push({key:{status:"valid",value:h},value:p._parse(new ko(n,g,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof Ao){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of u)f.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(h==="strict")u.length>0&&(Oe(n,{code:Ee.unrecognized_keys,keys:u}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of u){const g=n.data[p];f.push({key:{status:"valid",value:p},value:h._parse(new ko(n,g,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of f){const g=await p.key,x=await p.value;h.push({key:g,value:x,alwaysSet:p.alwaysSet})}return h}).then(h=>Ia.mergeObjectSync(a,h)):Ia.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return Ue.errToObj,new ps({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,a)=>{var i,c;const n=((c=(i=this._def).errorMap)==null?void 0:c.call(i,s,a).message)??a.defaultError;return s.code==="unrecognized_keys"?{message:Ue.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ps({...this._def,unknownKeys:"strip"})}passthrough(){return new ps({...this._def,unknownKeys:"passthrough"})}extend(e){return new ps({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ps({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:at.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ps({...this._def,catchall:e})}pick(e){const s={};for(const a of Et.objectKeys(e))e[a]&&this.shape[a]&&(s[a]=this.shape[a]);return new ps({...this._def,shape:()=>s})}omit(e){const s={};for(const a of Et.objectKeys(this.shape))e[a]||(s[a]=this.shape[a]);return new ps({...this._def,shape:()=>s})}deepPartial(){return Hl(this)}partial(e){const s={};for(const a of Et.objectKeys(this.shape)){const n=this.shape[a];e&&!e[a]?s[a]=n:s[a]=n.optional()}return new ps({...this._def,shape:()=>s})}required(e){const s={};for(const a of Et.objectKeys(this.shape))if(e&&!e[a])s[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof wo;)i=i._def.innerType;s[a]=i}return new ps({...this._def,shape:()=>s})}keyof(){return FE(Et.objectKeys(this.shape))}}ps.create=(t,e)=>new ps({shape:()=>t,unknownKeys:"strip",catchall:Ao.create(),typeName:at.ZodObject,...mt(e)});ps.strictCreate=(t,e)=>new ps({shape:()=>t,unknownKeys:"strict",catchall:Ao.create(),typeName:at.ZodObject,...mt(e)});ps.lazycreate=(t,e)=>new ps({shape:t,unknownKeys:"strip",catchall:Ao.create(),typeName:at.ZodObject,...mt(e)});class sm extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a=this._def.options;function n(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return s.common.issues.push(...u.ctx.common.issues),u.result;const c=i.map(u=>new Wr(u.ctx.common.issues));return Oe(s,{code:Ee.invalid_union,unionErrors:c}),st}if(s.common.async)return Promise.all(a.map(async i=>{const c={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:c}),ctx:c}})).then(n);{let i;const c=[];for(const f of a){const h={...s,common:{...s.common,issues:[]},parent:null},p=f._parseSync({data:s.data,path:s.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const u=c.map(f=>new Wr(f));return Oe(s,{code:Ee.invalid_union,unionErrors:u}),st}}get options(){return this._def.options}}sm.create=(t,e)=>new sm({options:t,typeName:at.ZodUnion,...mt(e)});function Yx(t,e){const s=lo(t),a=lo(e);if(t===e)return{valid:!0,data:t};if(s===qe.object&&a===qe.object){const n=Et.objectKeys(e),i=Et.objectKeys(t).filter(u=>n.indexOf(u)!==-1),c={...t,...e};for(const u of i){const f=Yx(t[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(s===qe.array&&a===qe.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<t.length;i++){const c=t[i],u=e[i],f=Yx(c,u);if(!f.valid)return{valid:!1};n.push(f.data)}return{valid:!0,data:n}}else return s===qe.date&&a===qe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class am extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=(i,c)=>{if(lN(i)||lN(c))return st;const u=Yx(i.value,c.value);return u.valid?((cN(i)||cN(c))&&s.dirty(),{status:s.value,value:u.data}):(Oe(a,{code:Ee.invalid_intersection_types}),st)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}am.create=(t,e,s)=>new am({left:t,right:e,typeName:at.ZodIntersection,...mt(s)});class Ci extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.array)return Oe(a,{code:Ee.invalid_type,expected:qe.array,received:a.parsedType}),st;if(a.data.length<this._def.items.length)return Oe(a,{code:Ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),st;!this._def.rest&&a.data.length>this._def.items.length&&(Oe(a,{code:Ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...a.data].map((c,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new ko(a,c,a.path,u)):null}).filter(c=>!!c);return a.common.async?Promise.all(i).then(c=>Ia.mergeArray(s,c)):Ia.mergeArray(s,i)}get items(){return this._def.items}rest(e){return new Ci({...this._def,rest:e})}}Ci.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ci({items:t,typeName:at.ZodTuple,rest:null,...mt(e)})};class vN extends Nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.map)return Oe(a,{code:Ee.invalid_type,expected:qe.map,received:a.parsedType}),st;const n=this._def.keyType,i=this._def.valueType,c=[...a.data.entries()].map(([u,f],h)=>({key:n._parse(new ko(a,u,a.path,[h,"key"])),value:i._parse(new ko(a,f,a.path,[h,"value"]))}));if(a.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of c){const h=await f.key,p=await f.value;if(h.status==="aborted"||p.status==="aborted")return st;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}})}else{const u=new Map;for(const f of c){const h=f.key,p=f.value;if(h.status==="aborted"||p.status==="aborted")return st;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}}}}vN.create=(t,e,s)=>new vN({valueType:e,keyType:t,typeName:at.ZodMap,...mt(s)});class bd extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.set)return Oe(a,{code:Ee.invalid_type,expected:qe.set,received:a.parsedType}),st;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(Oe(a,{code:Ee.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(Oe(a,{code:Ee.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const i=this._def.valueType;function c(f){const h=new Set;for(const p of f){if(p.status==="aborted")return st;p.status==="dirty"&&s.dirty(),h.add(p.value)}return{status:s.value,value:h}}const u=[...a.data.values()].map((f,h)=>i._parse(new ko(a,f,a.path,h)));return a.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,s){return new bd({...this._def,minSize:{value:e,message:Ue.toString(s)}})}max(e,s){return new bd({...this._def,maxSize:{value:e,message:Ue.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}bd.create=(t,e)=>new bd({valueType:t,minSize:null,maxSize:null,typeName:at.ZodSet,...mt(e)});class yN extends Nt{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}yN.create=(t,e)=>new yN({getter:t,typeName:at.ZodLazy,...mt(e)});class bN extends Nt{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Oe(s,{received:s.data,code:Ee.invalid_literal,expected:this._def.value}),st}return{status:"valid",value:e.data}}get value(){return this._def.value}}bN.create=(t,e)=>new bN({value:t,typeName:at.ZodLiteral,...mt(e)});function FE(t,e){return new uc({values:t,typeName:at.ZodEnum,...mt(e)})}class uc extends Nt{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),a=this._def.values;return Oe(s,{expected:Et.joinValues(a),received:s.parsedType,code:Ee.invalid_type}),st}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),a=this._def.values;return Oe(s,{received:s.data,code:Ee.invalid_enum_value,options:a}),st}return nr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return uc.create(e,{...this._def,...s})}exclude(e,s=this._def){return uc.create(this.options.filter(a=>!e.includes(a)),{...this._def,...s})}}uc.create=FE;class Kx extends Nt{_parse(e){const s=Et.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==qe.string&&a.parsedType!==qe.number){const n=Et.objectValues(s);return Oe(a,{expected:Et.joinValues(n),received:a.parsedType,code:Ee.invalid_type}),st}if(this._cache||(this._cache=new Set(Et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=Et.objectValues(s);return Oe(a,{received:a.data,code:Ee.invalid_enum_value,options:n}),st}return nr(e.data)}get enum(){return this._def.values}}Kx.create=(t,e)=>new Kx({values:t,typeName:at.ZodNativeEnum,...mt(e)});class rm extends Nt{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==qe.promise&&s.common.async===!1)return Oe(s,{code:Ee.invalid_type,expected:qe.promise,received:s.parsedType}),st;const a=s.parsedType===qe.promise?s.data:Promise.resolve(s.data);return nr(a.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}rm.create=(t,e)=>new rm({type:t,typeName:at.ZodPromise,...mt(e)});class dc extends Nt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===at.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{Oe(a,c),c.fatal?s.abort():s.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const c=n.transform(a.data,i);if(a.common.async)return Promise.resolve(c).then(async u=>{if(s.value==="aborted")return st;const f=await this._def.schema._parseAsync({data:u,path:a.path,parent:a});return f.status==="aborted"?st:f.status==="dirty"||s.value==="dirty"?Yu(f.value):f});{if(s.value==="aborted")return st;const u=this._def.schema._parseSync({data:c,path:a.path,parent:a});return u.status==="aborted"?st:u.status==="dirty"||s.value==="dirty"?Yu(u.value):u}}if(n.type==="refinement"){const c=u=>{const f=n.refinement(u,i);if(a.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(a.common.async===!1){const u=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return u.status==="aborted"?st:(u.status==="dirty"&&s.dirty(),c(u.value),{status:s.value,value:u.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(u=>u.status==="aborted"?st:(u.status==="dirty"&&s.dirty(),c(u.value).then(()=>({status:s.value,value:u.value}))))}if(n.type==="transform")if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!cc(c))return st;const u=n.transform(c.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:u}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>cc(c)?Promise.resolve(n.transform(c.value,i)).then(u=>({status:s.value,value:u})):st);Et.assertNever(n)}}dc.create=(t,e,s)=>new dc({schema:t,typeName:at.ZodEffects,effect:e,...mt(s)});dc.createWithPreprocess=(t,e,s)=>new dc({schema:e,effect:{type:"preprocess",transform:t},typeName:at.ZodEffects,...mt(s)});class wo extends Nt{_parse(e){return this._getType(e)===qe.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wo.create=(t,e)=>new wo({innerType:t,typeName:at.ZodOptional,...mt(e)});class fc extends Nt{_parse(e){return this._getType(e)===qe.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fc.create=(t,e)=>new fc({innerType:t,typeName:at.ZodNullable,...mt(e)});class Wx extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e);let a=s.data;return s.parsedType===qe.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Wx.create=(t,e)=>new Wx({innerType:t,typeName:at.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...mt(e)});class Zx extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return em(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wr(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Wr(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Zx.create=(t,e)=>new Zx({innerType:t,typeName:at.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...mt(e)});class _N extends Nt{_parse(e){if(this._getType(e)!==qe.nan){const a=this._getOrReturnCtx(e);return Oe(a,{code:Ee.invalid_type,expected:qe.nan,received:a.parsedType}),st}return{status:"valid",value:e.data}}}_N.create=t=>new _N({typeName:at.ZodNaN,...mt(t)});class PO extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class dy extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?st:i.status==="dirty"?(s.dirty(),Yu(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?st:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(e,s){return new dy({in:e,out:s,typeName:at.ZodPipeline})}}class Qx extends Nt{_parse(e){const s=this._def.innerType._parse(e),a=n=>(cc(n)&&(n.value=Object.freeze(n.value)),n);return em(s)?s.then(n=>a(n)):a(s)}unwrap(){return this._def.innerType}}Qx.create=(t,e)=>new Qx({innerType:t,typeName:at.ZodReadonly,...mt(e)});var at;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(at||(at={}));const Ws=xo.create;Ao.create;Fr.create;const Bm=ps.create;sm.create;am.create;Ci.create;const DO=uc.create,OO=Kx.create;rm.create;wo.create;fc.create;const $O=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ws(async()=>{const{default:a}=await Promise.resolve().then(()=>jc);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)};class fy extends Error{constructor(e,s="FunctionsError",a){super(e),this.name=s,this.context=a}}class LO extends fy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class IO extends fy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BO extends fy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jx||(Jx={}));var VO=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class qO{constructor(e,{headers:s={},customFetch:a,region:n=Jx.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=$O(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var a;return VO(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:c}=s;let u={},{region:f}=s;f||(f=this.region),f&&f!=="any"&&(u["x-region"]=f);let h;c&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=c):typeof c=="string"?(u["Content-Type"]="text/plain",h=c):typeof FormData<"u"&&c instanceof FormData?h=c:(u["Content-Type"]="application/json",h=JSON.stringify(c)));const p=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),n),body:h}).catch(j=>{throw new LO(j)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new IO(p);if(!p.ok)throw new BO(p);let x=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield p.json():x==="application/octet-stream"?b=yield p.blob():x==="text/event-stream"?b=p:x==="multipart/form-data"?b=yield p.formData():b=yield p.text(),{data:b,error:null}}catch(n){return{data:null,error:n}}})}}var ks={},kl={},Al={},Tl={},Rl={},Ml={},UO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},hc=UO();const zO=hc.fetch,HE=hc.fetch.bind(hc),GE=hc.Headers,FO=hc.Request,HO=hc.Response,jc=Object.freeze(Object.defineProperty({__proto__:null,Headers:GE,Request:FO,Response:HO,default:HE,fetch:zO},Symbol.toStringTag,{value:"Module"})),GO=U3(jc);var ih={},wN;function XE(){if(wN)return ih;wN=1,Object.defineProperty(ih,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return ih.default=t,ih}var jN;function YE(){if(jN)return Ml;jN=1;var t=Ml&&Ml.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ml,"__esModule",{value:!0});const e=t(GO),s=t(XE());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,c){return this.headers=Object.assign({},this.headers),this.headers[i]=c,this}then(i,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,x;let b=null,j=null,w=null,N=h.status,E=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?j=R:j=JSON.parse(R))}const S=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");S&&P&&P.length>1&&(w=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(b={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,w=null,N=406,E="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const S=await h.text();try{b=JSON.parse(S),Array.isArray(b)&&h.status===404&&(j=[],b=null,N=200,E="OK")}catch{h.status===404&&S===""?(N=204,E="No Content"):b={message:S}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,N=200,E="OK"),b&&this.shouldThrowOnError)throw new s.default(b)}return{error:b,data:j,count:w,status:N,statusText:E}});return this.shouldThrowOnError||(f=f.catch(h=>{var p,g,x;return{error:{message:`${(p=h==null?void 0:h.name)!==null&&p!==void 0?p:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),f.then(i,c)}returns(){return this}overrideTypes(){return this}}return Ml.default=a,Ml}var NN;function KE(){if(NN)return Rl;NN=1;var t=Rl&&Rl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Rl,"__esModule",{value:!0});const e=t(YE());class s extends e.default{select(n){let i=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:c,foreignTable:u,referencedTable:f=u}={}){const h=f?`${f}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${n}.${i?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:c=i}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${n}`),this}range(n,i,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${n}`),this.url.searchParams.set(h,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:c=!1,buffers:u=!1,wal:f=!1,format:h="text"}={}){var p;const g=[n?"analyze":null,i?"verbose":null,c?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${g};`,h==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Rl.default=s,Rl}var SN;function hy(){if(SN)return Tl;SN=1;var t=Tl&&Tl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Tl,"__esModule",{value:!0});const e=t(KE());class s extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const c=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(n,`in.(${c})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:c,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const h=c===void 0?"":`(${c})`;return this.url.searchParams.append(n,`${f}fts${h}.${i}`),this}match(n){return Object.entries(n).forEach(([i,c])=>{this.url.searchParams.append(i,`eq.${c}`)}),this}not(n,i,c){return this.url.searchParams.append(n,`not.${i}.${c}`),this}or(n,{foreignTable:i,referencedTable:c=i}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${n})`),this}filter(n,i,c){return this.url.searchParams.append(n,`${i}.${c}`),this}}return Tl.default=s,Tl}var EN;function WE(){if(EN)return Al;EN=1;var t=Al&&Al.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Al,"__esModule",{value:!0});const e=t(hy());class s{constructor(n,{headers:i={},schema:c,fetch:u}){this.url=n,this.headers=i,this.schema=c,this.fetch=u}select(n,{head:i=!1,count:c}={}){const u=i?"HEAD":"GET";let f=!1;const h=(n??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:c=!0}={}){const u="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),i&&f.push(`count=${i}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(n)){const h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:c=!1,count:u,defaultToNull:f=!0}={}){const h="POST",p=[`resolution=${c?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),f||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(n)){const g=n.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const c="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),this.headers.Prefer=u.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",c=[];return n&&c.push(`count=${n}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Al.default=s,Al}var Tu={},Ru={},CN;function XO(){return CN||(CN=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.version=void 0,Ru.version="0.0.0-automated"),Ru}var kN;function YO(){if(kN)return Tu;kN=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.DEFAULT_HEADERS=void 0;const t=XO();return Tu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Tu}var AN;function KO(){if(AN)return kl;AN=1;var t=kl&&kl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(kl,"__esModule",{value:!0});const e=t(WE()),s=t(hy()),a=YO();class n{constructor(c,{headers:u={},schema:f,fetch:h}={}){this.url=c,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),u),this.schemaName=f,this.fetch=h}from(c){const u=new URL(`${this.url}/${c}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new n(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:f=!1,get:h=!1,count:p}={}){let g;const x=new URL(`${this.url}/rpc/${c}`);let b;f||h?(g=f?"HEAD":"GET",Object.entries(u).filter(([w,N])=>N!==void 0).map(([w,N])=>[w,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([w,N])=>{x.searchParams.append(w,N)})):(g="POST",b=u);const j=Object.assign({},this.headers);return p&&(j.Prefer=`count=${p}`),new s.default({method:g,url:x,headers:j,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return kl.default=n,kl}var TN;function WO(){if(TN)return ks;TN=1;var t=ks&&ks.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ks,"__esModule",{value:!0}),ks.PostgrestError=ks.PostgrestBuilder=ks.PostgrestTransformBuilder=ks.PostgrestFilterBuilder=ks.PostgrestQueryBuilder=ks.PostgrestClient=void 0;const e=t(KO());ks.PostgrestClient=e.default;const s=t(WE());ks.PostgrestQueryBuilder=s.default;const a=t(hy());ks.PostgrestFilterBuilder=a.default;const n=t(KE());ks.PostgrestTransformBuilder=n.default;const i=t(YE());ks.PostgrestBuilder=i.default;const c=t(XE());return ks.PostgrestError=c.default,ks.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:c.default},ks}var ZO=WO();const QO=Pm(ZO),{PostgrestClient:JO,PostgrestQueryBuilder:BW,PostgrestFilterBuilder:VW,PostgrestTransformBuilder:qW,PostgrestBuilder:UW,PostgrestError:zW}=QO;let ev;typeof window>"u"?ev=require("ws"):ev=window.WebSocket;const e$="2.11.10",t$={"X-Client-Info":`realtime-js/${e$}`},s$="1.0.0",ZE=1e4,a$=1e3;var rc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rc||(rc={}));var ia;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ia||(ia={}));var xr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xr||(xr={}));var tv;(function(t){t.websocket="websocket"})(tv||(tv={}));var mi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(mi||(mi={}));class r${constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,s,a)}_decodeBroadcast(e,s,a){const n=s.getUint8(1),i=s.getUint8(2);let c=this.HEADER_LENGTH+2;const u=a.decode(e.slice(c,c+n));c=c+n;const f=a.decode(e.slice(c,c+i));c=c+i;const h=JSON.parse(a.decode(e.slice(c,e.byteLength)));return{ref:null,topic:u,event:f,payload:h}}}let QE=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const RN=(t,e,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((i,c)=>(i[c]=n$(c,t,e,n),i),{})},n$=(t,e,s,a)=>{const n=e.find(u=>u.name===t),i=n==null?void 0:n.type,c=s[t];return i&&!a.includes(i)?JE(i,c):sv(c)},JE=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return c$(e,s)}switch(t){case Ut.bool:return o$(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return i$(e);case Ut.json:case Ut.jsonb:return l$(e);case Ut.timestamp:return u$(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return sv(e);default:return sv(e)}},sv=t=>t,o$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},l$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},c$=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,a=t[s];if(t[0]==="{"&&a==="}"){let i;const c=t.slice(1,s);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(u=>JE(e,u))}return t},u$=t=>typeof t=="string"?t.replace(" ","T"):t,eC=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class rx{constructor(e,s,a={},n=ZE){this.channel=e,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var a;return this._hasReceived(e)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var MN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(MN||(MN={}));class sd{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sd.syncState(this.state,n,i,c),this.pendingDiffs.forEach(f=>{this.state=sd.syncDiff(this.state,f,i,c)}),this.pendingDiffs=[],u()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=sd.syncDiff(this.state,n,i,c),u())}),this.onJoin((n,i,c)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:c})}),this.onLeave((n,i,c)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,a,n){const i=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(i,(h,p)=>{c[h]||(f[h]=p)}),this.map(c,(h,p)=>{const g=i[h];if(g){const x=p.map(N=>N.presence_ref),b=g.map(N=>N.presence_ref),j=p.filter(N=>b.indexOf(N.presence_ref)<0),w=g.filter(N=>x.indexOf(N.presence_ref)<0);j.length>0&&(u[h]=j),w.length>0&&(f[h]=w)}else u[h]=p}),this.syncDiff(i,{joins:u,leaves:f},a,n)}static syncDiff(e,s,a,n){const{joins:i,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const g=e[u].map(b=>b.presence_ref),x=p.filter(b=>g.indexOf(b.presence_ref)<0);e[u].unshift(...x)}a(u,p,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,n(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(a=>s(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,a)=>{const n=e[a];return"metas"in n?s[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[a]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var PN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(PN||(PN={}));var DN;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(DN||(DN={}));var wn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(wn||(wn={}));class my{constructor(e,s={config:{}},a){this.topic=e,this.params=s,this.socket=a,this.bindings={},this.state=ia.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new rx(this,xr.join,this.params,this.timeout),this.rejoinTimer=new QE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ia.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ia.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ia.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ia.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new sd(this),this.broadcastEndpointURL=eC(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:c,private:u}}=this.params;this._onError(p=>e==null?void 0:e(wn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(wn.CLOSED));const f={},h={broadcast:i,presence:c,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(p=>p.filter))!==null&&n!==void 0?n:[],private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(wn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,j=[];for(let w=0;w<b;w++){const N=x[w],{filter:{event:E,schema:C,table:S,filter:P}}=N,R=p&&p[w];if(R&&R.event===E&&R.schema===C&&R.table===S&&R.filter===P)j.push(Object.assign(Object.assign({},N),{id:R.id}));else{this.unsubscribe(),this.state=ia.errored,e==null||e(wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(wn.SUBSCRIBED);return}}).receive("error",p=>{this.state=ia.errored,e==null||e(wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,a){return this._on(e,s,a)}async send(e,s={}){var a,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ia.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xr.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(a=>{const n=new rx(this,xr.leave,{},e);n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),c}_push(e,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new rx(this,e,s,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,a){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,a){var n,i;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=xr;if(a&&[u,f,h,p].indexOf(c)>=0&&a!==this._joinRef())return;let x=this._onMessage(c,s,a);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var j,w,N;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((N=(w=b.filter)===null||w===void 0?void 0:w.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===c}).map(b=>b.callback(x,a)):(i=this.bindings[c])===null||i===void 0||i.filter(b=>{var j,w,N,E,C,S;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const P=b.id,R=(j=b.filter)===null||j===void 0?void 0:j.event;return P&&((w=s.ids)===null||w===void 0?void 0:w.includes(P))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(C=(E=b==null?void 0:b.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return P==="*"||P===((S=s==null?void 0:s.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:w,table:N,commit_timestamp:E,type:C,errors:S}=j;x=Object.assign(Object.assign({},{schema:w,table:N,commit_timestamp:E,eventType:C,new:{},old:{},errors:S}),this._getPayloadRecords(j))}b.callback(x,a)})}_isClosed(){return this.state===ia.closed}_isJoined(){return this.state===ia.joined}_isJoining(){return this.state===ia.joining}_isLeaving(){return this.state===ia.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,a){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const a=e.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&my.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const a in e)if(e[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xr.close,{},e)}_onError(e){this._on(xr.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ia.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=RN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=RN(e.columns,e.old_record)),s}}const ON=()=>{},d$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class f${constructor(e,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=t$,this.params={},this.timeout=ZE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ON,this.ref=0,this.logger=ON,this.conn=null,this.sendBuffer=[],this.serializer=new r$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let c;return i?c=i:typeof fetch>"u"?c=(...u)=>ws(async()=>{const{default:f}=await Promise.resolve().then(()=>jc);return{default:f}},void 0).then(({default:f})=>f(...u)):c=fetch,(...u)=>c(...u)},this.endPoint=`${e}/${tv.websocket}`,this.httpEndpoint=eC(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(a=s==null?void 0:s.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,c)=>c(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new QE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=ev),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new h$(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:s$}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(a=>a._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,a){this.logger(e,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case rc.connecting:return mi.Connecting;case rc.open:return mi.Open;case rc.closing:return mi.Closing;default:return mi.Closed}}isConnected(){return this.connectionState()===mi.Open}channel(e,s={config:{}}){const a=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new my(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:a,payload:n,ref:i}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${a} (${i})`,n),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{s&&a.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),a.joinedOnce&&a._isJoined()&&a._push(xr.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(a$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:a,event:n,payload:i,ref:c}=s;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${c&&"("+c+")"||""}`,i),Array.from(this.channels).filter(u=>u._isMember(a)).forEach(u=>u._trigger(n,i,c)),this.stateChangeCallbacks.message.forEach(u=>u(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(xr.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const a=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${a}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const a=new Blob([d$],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class h${constructor(e,s,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=a.close}}class py extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function As(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class m$ extends py{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class av extends py{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var p$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const tC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ws(async()=>{const{default:a}=await Promise.resolve().then(()=>jc);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},g$=()=>p$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ws(()=>Promise.resolve().then(()=>jc),void 0)).Response:Response}),rv=t=>{if(Array.isArray(t))return t.map(s=>rv(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=rv(a)}),e};var Ii=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const nx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),x$=(t,e,s)=>Ii(void 0,void 0,void 0,function*(){const a=yield g$();t instanceof a&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new m$(nx(n),t.status||500))}).catch(n=>{e(new av(nx(n),n))}):e(new av(nx(t),t))}),v$=(t,e,s,a)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),s))};function Dd(t,e,s,a,n,i){return Ii(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(s,v$(e,a,n,i)).then(f=>{if(!f.ok)throw f;return a!=null&&a.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>x$(f,u,a))})})}function nm(t,e,s,a){return Ii(this,void 0,void 0,function*(){return Dd(t,"GET",e,s,a)})}function co(t,e,s,a,n){return Ii(this,void 0,void 0,function*(){return Dd(t,"POST",e,a,n,s)})}function y$(t,e,s,a,n){return Ii(this,void 0,void 0,function*(){return Dd(t,"PUT",e,a,n,s)})}function b$(t,e,s,a){return Ii(this,void 0,void 0,function*(){return Dd(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function sC(t,e,s,a,n){return Ii(this,void 0,void 0,function*(){return Dd(t,"DELETE",e,a,n,s)})}var va=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const _$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$N={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class w${constructor(e,s={},a,n){this.url=e,this.headers=s,this.bucketId=a,this.fetch=tC(n)}uploadOrUpdate(e,s,a,n){return va(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},$N),n);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f))):(i=a,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),n!=null&&n.headers&&(u=Object.assign(Object.assign({},u),n.headers));const h=this._removeEmptyFolders(s),p=this._getFinalPath(h),g=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:i,headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{})),x=yield g.json();return g.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(As(i))return{data:null,error:i};throw i}})}upload(e,s,a){return va(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,a)})}uploadToSignedUrl(e,s,a,n){return va(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),c=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",s);try{let f;const h=Object.assign({upsert:$N.upsert},n),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&a instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",a)):typeof FormData<"u"&&a instanceof FormData?(f=a,f.append("cacheControl",h.cacheControl)):(f=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield this.fetch(u.toString(),{method:"PUT",body:f,headers:p}),x=yield g.json();return g.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(f){if(As(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,s){return va(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield co(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),c=new URL(this.url+i.url),u=c.searchParams.get("token");if(!u)throw new py("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}update(e,s,a){return va(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,a)})}move(e,s,a){return va(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}copy(e,s,a){return va(this,void 0,void 0,function*(){try{return{data:{path:(yield co(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,a){return va(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield co(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,a){return va(this,void 0,void 0,function*(){try{const n=yield co(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}download(e,s){return va(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),c=i?`?${i}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield nm(this.fetch,`${this.url}/${n}/${u}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(As(u))return{data:null,error:u};throw u}})}info(e){return va(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const a=yield nm(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:rv(a),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}exists(e){return va(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield b$(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(As(a)&&a instanceof av){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,s){const a=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const u=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});f!==""&&n.push(f);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${h}`)}}}remove(e){return va(this,void 0,void 0,function*(){try{return{data:yield sC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}list(e,s,a){return va(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},_$),s),{prefix:e||""});return{data:yield co(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const j$="2.7.1",N$={"X-Client-Info":`storage-js/${j$}`};var Pl=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class S${constructor(e,s={},a){this.url=e,this.headers=Object.assign(Object.assign({},N$),s),this.fetch=tC(a)}listBuckets(){return Pl(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(As(e))return{data:null,error:e};throw e}})}getBucket(e){return Pl(this,void 0,void 0,function*(){try{return{data:yield nm(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Pl(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}updateBucket(e,s){return Pl(this,void 0,void 0,function*(){try{return{data:yield y$(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Pl(this,void 0,void 0,function*(){try{return{data:yield co(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Pl(this,void 0,void 0,function*(){try{return{data:yield sC(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}}class E$ extends S${constructor(e,s={},a){super(e,s,a)}from(e){return new w$(this.url,this.headers,e,this.fetch)}}const C$="2.50.0";let Ku="";typeof Deno<"u"?Ku="deno":typeof document<"u"?Ku="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ku="react-native":Ku="node";const k$={"X-Client-Info":`supabase-js-${Ku}/${C$}`},A$={headers:k$},T$={schema:"public"},R$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M$={};var P$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const D$=t=>{let e;return t?e=t:typeof fetch>"u"?e=HE:e=fetch,(...s)=>e(...s)},O$=()=>typeof Headers>"u"?GE:Headers,$$=(t,e,s)=>{const a=D$(s),n=O$();return(i,c)=>P$(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:t;let h=new n(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),a(i,Object.assign(Object.assign({},c),{headers:h}))})};var L$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};function I$(t){return t.endsWith("/")?t:t+"/"}function B$(t,e){var s,a;const{db:n,auth:i,realtime:c,global:u}=t,{db:f,auth:h,realtime:p,global:g}=e,x={db:Object.assign(Object.assign({},f),n),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},p),c),global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(s=g==null?void 0:g.headers)!==null&&s!==void 0?s:{}),(a=u==null?void 0:u.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>L$(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const aC="2.70.0",Gl=30*1e3,nv=3,ox=nv*Gl,V$="http://localhost:9999",q$="supabase.auth.token",U$={"X-Client-Info":`gotrue-js/${aC}`},ov="X-Supabase-Api-Version",rC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},z$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F$=6e5;class Vm extends Error{constructor(e,s,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class H$ extends Vm{constructor(e,s,a){super(e,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function G$(t){return rt(t)&&t.name==="AuthApiError"}class nC extends Vm{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Lo extends Vm{constructor(e,s,a,n){super(e,a,n),this.name=s,this.status=a}}class no extends Lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X$(t){return rt(t)&&t.name==="AuthSessionMissingError"}class lh extends Lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ch extends Lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class uh extends Lo{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y$(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class LN extends Lo{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class iv extends Lo{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ix(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class IN extends Lo{constructor(e,s,a){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class ad extends Lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),BN=` 	
\r=`.split(""),K$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<BN.length;e+=1)t[BN[e].charCodeAt(0)]=-2;for(let e=0;e<om.length;e+=1)t[om[e].charCodeAt(0)]=e;return t})();function VN(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(om[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(om[a]),e.queuedBits-=6}}function oC(t,e,s){const a=K$[t];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qN(t){const e=[],s=c=>{e.push(String.fromCodePoint(c))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=c=>{Q$(c,a,s)};for(let c=0;c<t.length;c+=1)oC(t.charCodeAt(c),n,i);return e.join("")}function W$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Z$(t,e){for(let s=0;s<t.length;s+=1){let a=t.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}W$(a,e)}}function Q$(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let a=1;a<6;a+=1)if((t>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function J$(t){const e=[],s={queue:0,queuedBits:0},a=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)oC(t.charCodeAt(n),s,a);return new Uint8Array(e)}function eL(t){const e=[];return Z$(t,s=>e.push(s)),new Uint8Array(e)}function tL(t){const e=[],s={queue:0,queuedBits:0},a=n=>{e.push(n)};return t.forEach(n=>VN(n,s,a)),VN(null,s,a),e.join("")}function sL(t){return Math.round(Date.now()/1e3)+t}function aL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hr=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},rd=()=>{if(!hr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function rL(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((a,n)=>{e[n]=a}),e}const iC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ws(async()=>{const{default:a}=await Promise.resolve().then(()=>jc);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},nL=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",lC=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},dh=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},fh=async(t,e)=>{await t.removeItem(e)};class qm{constructor(){this.promise=new qm.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}qm.promiseConstructor=Promise;function lx(t){const e=t.split(".");if(e.length!==3)throw new ad("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!z$.test(e[a]))throw new ad("JWT not in base64url format");return{header:JSON.parse(qN(e[0])),payload:JSON.parse(qN(e[1])),signature:J$(e[2]),raw:{header:e[0],payload:e[1]}}}async function oL(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function iL(t,e){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const c=await t(i);if(!e(i,null,c)){a(c);return}}catch(c){if(!e(i,c)){n(c);return}}})()})}function lL(t){return("0"+t.toString(16)).substr(-2)}function cL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(e),Array.from(e,lL).join("")}async function uL(t){const s=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function dL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await uL(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dl(t,e,s=!1){const a=cL();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await lC(t,`${e}-code-verifier`,n);const i=await dL(a);return[i,a===i?"plain":"s256"]}const fL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hL(t){const e=t.headers.get(ov);if(!e||!e.match(fL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ol(t){if(!gL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var xL=function(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s};const fi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vL=[502,503,504];async function UN(t){var e;if(!nL(t))throw new iv(fi(t),0);if(vL.includes(t.status))throw new iv(fi(t),t.status);let s;try{s=await t.json()}catch(i){throw new nC(fi(i),i)}let a;const n=hL(t);if(n&&n.getTime()>=rC["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new IN(fi(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new no}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,c)=>i&&typeof c=="string",!0))throw new IN(fi(s),t.status,s.weak_password.reasons);throw new H$(fi(s),t.status||500,a)}const yL=(t,e,s,a)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function vt(t,e,s,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[ov]||(i[ov]=rC["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const c=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(c.redirect_to=a.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await bL(t,e,s+u,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(f):{data:Object.assign({},f),error:null}}async function bL(t,e,s,a,n,i){const c=yL(e,a,n,i);let u;try{u=await t(s,Object.assign({},c))}catch(f){throw console.error(f),new iv(fi(f),0)}if(u.ok||await UN(u),a!=null&&a.noResolveJson)return u;try{return await u.json()}catch(f){await UN(f)}}function _n(t){var e;let s=null;NL(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=sL(t.expires_in)));const a=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:a},error:null}}function zN(t){const e=_n(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(e.data.weak_password=t.weak_password),e}function fo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _L(t){return{data:t,error:null}}function wL(t){const{action_link:e,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i}=t,c=xL(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function jL(t){return t}function NL(t){return t.access_token&&t.refresh_token&&t.expires_in}const cx=["global","local","others"];var SL=function(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s};class EL{constructor({url:e="",headers:s={},fetch:a}){this.url=e,this.headers=s,this.fetch=iC(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=cx[0]){if(cx.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cx.join(", ")}`);try{return await vt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,s={}){try{return await vt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:fo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:s}=e,a=SL(e,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await vt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:wL,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(rt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await vt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:fo})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,a,n,i,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await vt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:jL});if(p.error)throw p.error;const g=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(j.split(";")[1].split("=")[1]);h[`${N}Page`]=w}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(rt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Ol(e);try{return await vt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:fo})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ol(e);try{return await vt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:fo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,s=!1){Ol(e);try{return await vt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:fo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Ol(e.userId);try{const{data:s,error:a}=await vt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ol(e.userId),Ol(e.id);try{return{data:await vt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}}const CL={getItem:t=>rd()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{rd()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{rd()&&globalThis.localStorage.removeItem(t)}};function FN(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function kL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $l={debug:!!(globalThis&&rd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class AL extends cC{}async function TL(t,e,s){$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),$l.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{$l.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw $l.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new AL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if($l.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}kL();const RL={url:V$,storageKey:q$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function HN(t,e,s){return await s()}class _d{constructor(e){var s,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_d.nextInstanceID,_d.nextInstanceID+=1,this.instanceID>0&&hr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},RL),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new EL({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=iC(n.fetch),this.lock=n.lock||HN,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:hr()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=TL:this.lock=HN,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:rd()?this.storage=CL:(this.memoryStorage={},this.storage=FN(this.memoryStorage)):(this.memoryStorage={},this.storage=FN(this.memoryStorage)),hr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${aC}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=rL(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),hr()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Y$(i)){const f=(e=i.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:c,redirectType:u}=n;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return rt(s)?{error:s}:{error:new nC("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,a,n;try{const i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:_n}),{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,a,n;try{let i;if("email"in e){const{email:p,password:g,options:x}=e;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await Dl(this.storage,this.storageKey)),i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:g,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:j},xform:_n})}else if("phone"in e){const{phone:p,password:g,options:x}=e;i=await vt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(a=x==null?void 0:x.data)!==null&&a!==void 0?a:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:_n})}else throw new ch("You must provide either an email or phone number and a password");const{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:c,options:u}=e;s=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zN})}else if("phone"in e){const{phone:i,password:c,options:u}=e;s=await vt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zN})}else throw new ch("You must provide either an email or phone number and a password");const{data:a,error:n}=s;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new lh}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,a,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,a,n,i,c,u,f,h,p,g,x,b;let j,w;if("message"in e)j=e.message,w=e.signature;else{const{chain:N,wallet:E,statement:C,options:S}=e;let P;if(hr())if(typeof E=="object")P=E;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))P=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=E}const R=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in P&&P.signIn){const D=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),C?{statement:C}:null));let $;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")$=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)$=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)j=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),w=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${R.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(a=S==null?void 0:S.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((g=(p=S==null?void 0:S.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...S.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const D=await P.signMessage(new TextEncoder().encode(j),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:N,error:E}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:tL(w)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:_n});if(E)throw E;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new lh}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:E})}catch(N){if(rt(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await dh(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:i,error:c}=await vt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:_n});if(await fh(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new lh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:c})}catch(i){if(rt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:a,token:n,access_token:i,nonce:c}=e,u=await vt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:_n}),{data:f,error:h}=u;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new lh}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,a,n,i,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Dl(this.storage,this.storageKey));const{error:g}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await vt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new ch("You must provide either an email or phone number.")}catch(u){if(rt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var s,a;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:c,error:u}=await vt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:_n});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,a,n;try{let i=null,c=null;return this.flowType==="pkce"&&([i,c]=await Dl(this.storage,this.storageKey)),await vt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:c}),headers:this.headers,xform:_L})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:a}=e;if(a)throw a;if(!s)throw new no;const{error:n}=await vt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:a,type:n,options:i}=e,{error:c}=await vt(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:a,type:n,options:i}=e,{data:c,error:u}=await vt(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ch("You must provide either an email or phone number and a type")}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await dh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<ox:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,h,p)=>(!c&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,p))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:fo}):await this._useSession(async s=>{var a,n,i;const{data:c,error:u}=s;if(u)throw u;return!(!((a=c.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new no}:await vt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=c.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:fo})})}catch(s){if(rt(s))return X$(s)&&(await this._removeSession(),await fh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new no;const c=n.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Dl(this.storage,this.storageKey));const{data:h,error:p}=await vt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:fo});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new no;const s=Date.now()/1e3;let a=s,n=!0,i=null;const{payload:c}=lx(e.access_token);if(c.exp&&(a=c.exp,n=a<=s),n){const{session:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(rt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var a;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(a=c.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new no;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!hr())throw new uh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new uh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new LN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new uh("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new LN("No code detected.");const{data:C,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!i||!u||!c||!h)throw new uh("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let x=p+g;f&&(x=parseInt(f));const b=x-p;b*1e3<=Gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const j=x-g;p-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,p):p-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,p);const{data:w,error:N}=await this._getUser(i);if(N)throw N;const E={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:g,expires_at:x,refresh_token:c,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(a){if(rt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await dh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{error:i};const c=(a=n.session)===null||a===void 0?void 0:a.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(G$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await fh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=aL(),a={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async s=>{var a,n;try{const{data:{session:i},error:c}=s;if(c)throw c;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Dl(this.storage,this.storageKey,!0));try{return await vt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:a,error:n}=await this._useSession(async i=>{var c,u,f,h,p;const{data:g,error:x}=i;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await vt(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(n)throw n;return hr()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(rt(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var a,n;const{data:i,error:c}=s;if(c)throw c;return await vt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await iL(async n=>(n>0&&await oL(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await vt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_n})),(n,i)=>{const c=200*Math.pow(2,n);return i&&ix(i)&&Date.now()+c-a<Gl})}catch(a){if(this._debug(s,"error",a),rt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",a),hr()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await dh(this.storage,this.storageKey);if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const n=((e=a.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ox;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${ox}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),ix(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,a;if(!e)throw new no;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new qm;const{data:i,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!i.session)throw new no;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(n,"error",i),rt(i)){const c={session:null,error:i};return ix(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,a=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){i.push(f)}});if(await Promise.all(c),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lC(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await fh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Gl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-e)/Gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Gl}ms, refresh threshold is ${nv} ticks`),n<=nv&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof cC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,c]=await Dl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(c)}`});n.push(u.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await vt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var a,n;const{data:i,error:c}=s;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:h}=await vt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((n=f==null?void 0:f.totp)===null||n===void 0)&&n.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:c,error:u}=await vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await vt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(e==null?void 0:e.factors)||[],n=a.filter(c=>c.factor_type==="totp"&&c.status==="verified"),i=a.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,a;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=lx(n.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((a=(s=n.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(f="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,s={keys:[]}){let a=s.keys.find(c=>c.kid===e);if(a||(a=this.jwks.keys.find(c=>c.kid===e),a&&this.jwks_cached_at+F$>Date.now()))return a;const{data:n,error:i}=await vt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new ad("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(c=>c.kid===e),!a)throw new ad("No matching signing key found in JWKS");return a}async getClaims(e,s={keys:[]}){try{let a=e;if(!a){const{data:b,error:j}=await this.getSession();if(j||!b.session)return{data:null,error:j};a=b.session.access_token}const{header:n,payload:i,signature:c,raw:{header:u,payload:f}}=lx(a);if(mL(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(a);if(b)throw b;return{data:{claims:i,header:n,signature:c},error:null}}const h=pL(n.alg),p=await this.fetchJwk(n.kid,s),g=await crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,c,eL(`${u}.${f}`)))throw new ad("Invalid JWT signature");return{data:{claims:i,header:n,signature:c},error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}}_d.nextInstanceID=0;const ML=_d;class PL extends ML{constructor(e){super(e)}}var DL=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class OL{constructor(e,s,a){var n,i,c;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const u=I$(e),f=new URL(u);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:T$,realtime:M$,auth:Object.assign(Object.assign({},R$),{storageKey:h}),global:A$},g=B$(a??{},p);this.storageKey=(n=g.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=$$(s,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new JO(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new qO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new E$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},a={}){return this.rest.rpc(e,s,a)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return DL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:n,storageKey:i,flowType:c,lock:u,debug:f},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new PL({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:n,flowType:c,lock:u,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new f$(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,s,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uC=(t,e,s)=>new OL(t,e,s),$L=Bm({email:Ws().email("Email inválido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}),LL=Bm({email:Ws().email("Email inválido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres"),confirmPassword:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}).refine(t=>t.password===t.confirmPassword,{message:"As senhas não coincidem",path:["confirmPassword"]}),IL={onAuthUserChanged:!1,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},BL={user:null,session:null,isLoading:!1,isAuthenticated:!1,error:null,loading:IL},dC=y.createContext({...BL,signInWithEmail:async()=>({success:!1}),signUpWithEmail:async()=>({success:!1}),signOut:async()=>{},updateProfile:async()=>({success:!1})});var nd=(t=>(t.LOCAL="LOCAL",t.DEV="DEV",t.PROD="PROD",t))(nd||{});const VL=Bm({VITE_ENV:OO(nd),VITE_BASE_URL:Ws().url().optional(),VITE_SUPABASE_URL:Ws().url(),VITE_SUPABASE_ANON_KEY:Ws(),VITE_SERVICE_ROLE:Ws().optional(),VITE_LOGIN_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_ANON_KEY:Ws().optional()});function qL(){const t={VITE_ENV:"DEV",VITE_BASE_URL:"http://tower-trials.vercel.app",VITE_SUPABASE_URL:"https://rpagdztnwtyjatslrjay.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyODUxNjEsImV4cCI6MjA2Mjg2MTE2MX0.DIB6tYhoJ_Rb5pGr8Vu236MFhFUaMIq0x7PrUTR0ztI",VITE_SERVICE_ROLE:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzI4NTE2MSwiZXhwIjoyMDYyODYxMTYxfQ.kylyn4vQcXVEMJuZ_baF9Mt4Ka5d1RFraocaIx3lrB4",VITE_LOGIN_URL:"http://tower-trials.vercel.app/login",VITE_SUPABASE_LOCAL_URL:void 0,VITE_SUPABASE_LOCAL_ANON_KEY:void 0};try{return VL.parse(t)}catch(e){throw console.error("❌ Erro de configuração de ambiente:"),e instanceof Wr&&e.errors.forEach(s=>{console.error(`- ${s.path.join(".")}: ${s.message}`)}),console.error(`
📋 Variáveis necessárias:`),console.error("- VITE_ENV (LOCAL, DEV, ou PROD)"),console.error("- VITE_SUPABASE_URL"),console.error("- VITE_SUPABASE_ANON_KEY"),console.error(`
💡 Crie um arquivo .env.local com essas variáveis`),new Error("Configuração de ambiente inválida")}}const li=qL(),UL=()=>{switch(li.VITE_ENV){case nd.LOCAL:return{url:li.VITE_SUPABASE_LOCAL_URL||"http://127.0.0.1:54321",anonKey:li.VITE_SUPABASE_LOCAL_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",serviceRoleKey:li.VITE_SERVICE_ROLE||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU"};case nd.DEV:case nd.PROD:default:return{url:li.VITE_SUPABASE_URL,anonKey:li.VITE_SUPABASE_ANON_KEY,serviceRoleKey:li.VITE_SERVICE_ROLE}}},im=UL(),_e=uC(im.url,im.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),zL=uC(im.url,im.serviceRoleKey||"",{auth:{autoRefreshToken:!1,persistSession:!1}}),od=Object.freeze(Object.defineProperty({__proto__:null,supabase:_e,supabaseAdmin:zL},Symbol.toStringTag,{value:"Module"})),uo={getSession:async()=>{try{const{data:{session:t},error:e}=await _e.auth.getSession();if(e)throw e;return t}catch(t){return console.error("Erro ao obter sessão:",t instanceof Error?t.message:t),null}},getCurrentUser:async()=>{try{const{data:{user:t},error:e}=await _e.auth.getUser();if((e==null?void 0:e.status)===403||!t)return null;if(e)throw e;const{data:s,error:a}=await _e.from("users").select("*").eq("uid",t.id).maybeSingle();return a?(console.error("Erro ao buscar perfil:",a.message),null):s?{...t,username:s.username,display_name:s.display_name,avatar_url:s.avatar_url,role:s.role,highest_floor:s.highest_floor,total_games:s.total_games,total_victories:s.total_victories,total_character_level:s.total_character_level,max_character_slots:s.max_character_slots,is_active:s.is_active,last_login:s.last_login}:null}catch(t){return t instanceof Error&&!t.message.includes("JWT")&&console.error("Erro ao obter usuário atual:",t.message),null}},signOut:async()=>{try{const{error:t}=await _e.auth.signOut();if(t)throw t}catch(t){throw console.error("Erro ao fazer logout:",t instanceof Error?t.message:t),t}},signInWithEmail:async({email:t,password:e})=>{try{const{data:s,error:a}=await _e.auth.signInWithPassword({email:t,password:e});if(a)throw a;if(!s.user)return{user:null,session:null,error:"Usuário não encontrado"};const{data:n,error:i}=await _e.from("users").select("*").eq("uid",s.user.id).maybeSingle();return i?(console.error("Erro ao buscar perfil:",i.message),{user:null,session:s.session,error:"Erro ao buscar perfil do usuário"}):n?(await _e.from("users").update({last_login:new Date().toISOString()}).eq("uid",s.user.id),{user:{...s.user,username:n.username,display_name:n.display_name,avatar_url:n.avatar_url,role:n.role,highest_floor:n.highest_floor,total_games:n.total_games,total_victories:n.total_victories,total_character_level:n.total_character_level,max_character_slots:n.max_character_slots,is_active:n.is_active,last_login:n.last_login},session:s.session}):{user:null,session:s.session,error:"Perfil não encontrado"}}catch(s){return{user:null,session:null,error:String(s)}}},signUpWithEmail:async t=>{try{const{email:e,password:s,username:a=e.split("@")[0]}=t,{data:n,error:i}=await _e.auth.signUp({email:e,password:s,options:{data:{username:a},emailRedirectTo:`${window.location.origin}/auth`}});if(i)throw i;if(!n.user)throw new Error("Falha ao criar usuário");await new Promise(c=>setTimeout(c,1e3));try{await _e.rpc("create_user_profile",{p_uid:n.user.id,p_username:a,p_email:e})}catch(c){console.error("Erro ao chamar RPC:",c);try{const{error:u}=await _e.from("users").insert({uid:n.user.id,username:a,email:e,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(u){if(console.error("Erro no fallback de inserção:",u),u.code==="23505")return{user:{...n.user,username:a,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session};throw u}}catch(u){console.error("Erro total no processo de criação de perfil:",u)}}return{user:{...n.user,username:a,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session}}catch(e){return console.error("Erro no registro:",e instanceof Error?e.message:e),{user:null,session:null,error:String(e)}}},updateProfile:async t=>{try{const e=await uo.getSession();if(!(e!=null&&e.user))throw new Error("Usuário não autenticado");const{error:s}=await _e.from("users").update({display_name:t.display_name,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("uid",e.user.id).select().single();if(s)throw s;return{user:await uo.getCurrentUser(),session:e}}catch(e){return{user:null,session:null,error:String(e)}}},handleAuthError:t=>{if(t instanceof Vm)switch(t.status){case 400:if(t.message.includes("Email not confirmed"))return new Error("Por favor, confirme seu e-mail antes de fazer login");if(t.message.includes("Invalid login credentials"))return new Error("E-mail ou senha incorretos");if(t.message.includes("Password should be at least 6 characters"))return new Error("A senha deve ter pelo menos 6 caracteres");if(t.message.includes("User already registered"))return new Error("Este e-mail já está cadastrado");break;case 401:return new Error("Sessão expirada. Por favor, faça login novamente");case 422:return new Error("Dados inválidos. Verifique as informações e tente novamente");case 429:return new Error("Muitas tentativas. Por favor, aguarde alguns minutos")}return t instanceof Error?t:new Error("Ocorreu um erro inesperado. Tente novamente mais tarde")}},Wu={onAuthUserChanged:!0,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},Mu={user:null,session:null,isLoading:!0,isAuthenticated:!1,error:null,loading:Wu};function FL({children:t}){const e=Pt(),[s,a]=y.useState(Mu),n=y.useCallback(async()=>{a(p=>p.isLoading?{...p,loading:{...p.loading,onAuthUserChanged:!0}}:p);try{const p=await uo.getSession();if(!p){a({...Mu,isLoading:!1,loading:{...Wu,onAuthUserChanged:!1}});return}const g=await uo.getCurrentUser();a({...Mu,user:g,session:p,isAuthenticated:!!g,isLoading:!1,loading:{...Wu,onAuthUserChanged:!1}})}catch(p){console.error("Erro ao carregar usuário:",p instanceof Error?p.message:p),a({...Mu,error:p instanceof Error?p.message:String(p),isLoading:!1,loading:{...Wu,onAuthUserChanged:!1}})}},[]);y.useEffect(()=>{const{data:{subscription:p}}=_e.auth.onAuthStateChange((g,x)=>{a(b=>JSON.stringify(x)===JSON.stringify(b.session)?b:{...b,session:x,isLoading:!0,loading:{...b.loading,onAuthUserChanged:!0}})});return()=>{p.unsubscribe()}},[]),y.useEffect(()=>{s.isLoading&&n()},[s.isLoading,n]);const i=y.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,signIn:!0}}));try{const g=await uo.signInWithEmail(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,signIn:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,signIn:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao fazer login";return a(b=>({...b,error:x,loading:{...b.loading,signIn:!1}})),{success:!1,error:x}}},[]),c=y.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,signUp:!0}}));try{const g=await uo.signUpWithEmail(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,signUp:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,signUp:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao criar conta";return a(b=>({...b,error:x,loading:{...b.loading,signUp:!1}})),{success:!1,error:x}}},[]),u=y.useCallback(async()=>{a(p=>({...p,loading:{...p.loading,signOut:!0}}));try{await uo.signOut(),a({...Mu,isLoading:!1,loading:{...Wu,onAuthUserChanged:!1}}),e({to:"/auth",search:{auth:"logout"}})}catch(p){console.error("Erro ao fazer logout:",p instanceof Error?p.message:p),a(g=>({...g,error:p instanceof Error?p.message:String(p),loading:{...g.loading,signOut:!1}}))}},[e]),f=y.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,updateProfile:!0}}));try{const g=await uo.updateProfile(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,updateProfile:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,updateProfile:!1,onAuthUserChanged:!0}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao atualizar perfil";return a(b=>({...b,error:x,loading:{...b.loading,updateProfile:!1}})),{success:!1,error:x}}},[]),h=y.useMemo(()=>({...s,signInWithEmail:i,signUpWithEmail:c,signOut:u,updateProfile:f}),[s]);return r.jsx(dC.Provider,{value:h,children:t})}function HL(t){var e,s;return((e=t.main_hand)==null?void 0:e.type)==="weapon"&&((s=t.off_hand)==null?void 0:s.type)==="weapon"}function GL(t){var e,s;return((e=t.off_hand)==null?void 0:e.type)==="armor"&&!((s=t.off_hand)!=null&&s.weapon_subtype)}function XL(t){var e;return((e=t.main_hand)==null?void 0:e.type)==="weapon"?t.main_hand:void 0}const YL=(t,e)=>{const s=[];return[{name:"Ataque",current:(t==null?void 0:t.atk_bonus)||0,new:e.atk_bonus},{name:"Defesa",current:(t==null?void 0:t.def_bonus)||0,new:e.def_bonus},{name:"Mana",current:(t==null?void 0:t.mana_bonus)||0,new:e.mana_bonus},{name:"Velocidade",current:(t==null?void 0:t.speed_bonus)||0,new:e.speed_bonus},{name:"HP",current:(t==null?void 0:t.hp_bonus)||0,new:e.hp_bonus},{name:"Chance Crítica",current:(t==null?void 0:t.critical_chance_bonus)||0,new:e.critical_chance_bonus},{name:"Dano Crítico",current:(t==null?void 0:t.critical_damage_bonus)||0,new:e.critical_damage_bonus},{name:"Duplo Ataque",current:(t==null?void 0:t.double_attack_chance_bonus)||0,new:e.double_attack_chance_bonus},{name:"Dano Mágico",current:(t==null?void 0:t.magic_damage_bonus)||0,new:e.magic_damage_bonus}].forEach(n=>{const i=n.new-n.current;i!==0&&s.push({stat_name:n.name,current_value:n.current,new_value:n.new,difference:i,is_improvement:i>0})}),s},Ts={BASE_XP_NEXT_LEVEL:100,BASE_STATS:{hp:100,mana:50,atk:20,def:10,speed:10},STAT_GROWTH_PER_LEVEL:{hp:10,mana:5,atk:2,def:1,speed:1}};function KL(t,e){return{hp:Ts.BASE_STATS.hp+Ts.STAT_GROWTH_PER_LEVEL.hp*(t-1),mana:Ts.BASE_STATS.mana+Ts.STAT_GROWTH_PER_LEVEL.mana*(t-1),atk:Ts.BASE_STATS.atk+Ts.STAT_GROWTH_PER_LEVEL.atk*(t-1),def:Ts.BASE_STATS.def+Ts.STAT_GROWTH_PER_LEVEL.def*(t-1),speed:Ts.BASE_STATS.speed+Ts.STAT_GROWTH_PER_LEVEL.speed*(t-1)}}var is=(t=>(t.SWORD_MASTERY="sword",t.AXE_MASTERY="axe",t.BLUNT_MASTERY="blunt",t.DEFENSE_MASTERY="defense",t.MAGIC_MASTERY="magic",t))(is||{});function WL(t){return Math.floor(50*Math.pow(1.4,t-1))}function ZL(t){return{sword:"Maestria com espadas. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",axe:"Maestria com machados. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",blunt:"Maestria com armas de concussão. Aumenta ataque (+1), chance crítica (+0.2%) e dano crítico (+3%) por nível.",defense:"Maestria defensiva. Aumenta defesa (+2) por nível e reduz dano recebido.",magic:"Maestria mágica. Aumenta mana (+3), dano mágico (+15%) e cura (+10%) por nível."}[t]}const QL={buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},JL={id:"",user_id:"",name:"",level:1,xp:0,xp_next_level:Ts.BASE_XP_NEXT_LEVEL,gold:0,hp:Ts.BASE_STATS.hp,max_hp:Ts.BASE_STATS.hp,mana:Ts.BASE_STATS.mana,max_mana:Ts.BASE_STATS.mana,atk:Ts.BASE_STATS.atk,def:Ts.BASE_STATS.def,speed:Ts.BASE_STATS.speed,created_at:"",updated_at:"",isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:1,spells:[],consumables:[],potionUsedThisTurn:!1,active_effects:QL,strength:10,dexterity:10,intelligence:10,wisdom:10,vitality:10,luck:10,critical_chance:0,critical_damage:110,double_attack_chance:0,magic_attack:0,magic_mastery:1,magic_damage_bonus:0},fC={mode:"menu",player:JL,currentEnemy:null,currentFloor:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:0,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1},e6=y.createContext({gameState:fC,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"",gameLog:[],characters:[],selectedCharacter:null,startGame:async()=>{},selectCharacter:async()=>{},loadCharacterForHub:async()=>{},clearGameState:()=>{},performAction:()=>{},returnToMenu:()=>{},resetError:()=>{},addGameLogMessage:()=>{},saveProgress:async()=>{},updatePlayerStats:()=>{},updatePlayerConsumables:()=>{}});function t6(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const s6=t=>{switch(t){case"success":return n6;case"info":return i6;case"warning":return o6;case"error":return l6;default:return null}},a6=Array(12).fill(0),r6=({visible:t,className:e})=>he.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},he.createElement("div",{className:"sonner-spinner"},a6.map((s,a)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),n6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),o6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),i6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),l6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),c6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),u6=()=>{const[t,e]=he.useState(document.hidden);return he.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let lv=1;class d6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:a,...n}=e,i=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:lv++,c=this.toasts.find(f=>f.id===i),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(f=>f.id===i?(this.publish({...f,...e,id:i,title:a}),{...f,...e,id:i,dismissible:u,title:a}):f):this.addToast({title:a,...n,dismissible:u,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let i=a!==void 0,c;const u=n.then(async h=>{if(c=["resolve",h],he.isValidElement(h))i=!1,this.create({id:a,type:"default",message:h});else if(h6(h)&&!h.ok){i=!1;const g=typeof s.error=="function"?await s.error(`HTTP error! status: ${h.status}`):s.error,x=typeof s.description=="function"?await s.description(`HTTP error! status: ${h.status}`):s.description,j=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"error",description:x,...j})}else if(h instanceof Error){i=!1;const g=typeof s.error=="function"?await s.error(h):s.error,x=typeof s.description=="function"?await s.description(h):s.description,j=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"error",description:x,...j})}else if(s.success!==void 0){i=!1;const g=typeof s.success=="function"?await s.success(h):s.success,x=typeof s.description=="function"?await s.description(h):s.description,j=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"success",description:x,...j})}}).catch(async h=>{if(c=["reject",h],s.error!==void 0){i=!1;const p=typeof s.error=="function"?await s.error(h):s.error,g=typeof s.description=="function"?await s.description(h):s.description,b=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:g,...b})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),s.finally==null||s.finally.call(s)}),f=()=>new Promise((h,p)=>u.then(()=>c[0]==="reject"?p(c[1]):h(c[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:f}:Object.assign(a,{unwrap:f})},this.custom=(e,s)=>{const a=(s==null?void 0:s.id)||lv++;return this.create({jsx:e(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _a=new d6,f6=(t,e)=>{const s=(e==null?void 0:e.id)||lv++;return _a.addToast({title:t,...e,id:s}),s},h6=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",m6=f6,p6=()=>_a.toasts,g6=()=>_a.getActiveToasts(),pe=Object.assign(m6,{success:_a.success,info:_a.info,warning:_a.warning,error:_a.error,custom:_a.custom,message:_a.message,promise:_a.promise,dismiss:_a.dismiss,loading:_a.loading},{getHistory:p6,getToasts:g6});t6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function hh(t){return t.label!==void 0}const x6=3,v6="24px",y6="16px",GN=4e3,b6=356,_6=14,w6=45,j6=200;function Lr(...t){return t.filter(Boolean).join(" ")}function N6(t){const[e,s]=t.split("-"),a=[];return e&&a.push(e),s&&a.push(s),a}const S6=t=>{var e,s,a,n,i,c,u,f,h;const{invert:p,toast:g,unstyled:x,interacting:b,setHeights:j,visibleToasts:w,heights:N,index:E,toasts:C,expanded:S,removeToast:P,defaultRichColors:R,closeButton:D,style:$,cancelButtonStyle:k,actionButtonStyle:M,className:V="",descriptionClassName:Y="",duration:B,position:z,gap:Q,expandByDefault:H,classNames:A,icons:I,closeButtonAriaLabel:q="Close toast"}=t,[K,L]=he.useState(null),[X,ne]=he.useState(null),[te,ie]=he.useState(!1),[le,ae]=he.useState(!1),[ue,ce]=he.useState(!1),[we,Se]=he.useState(!1),[je,Ce]=he.useState(!1),[ve,Pe]=he.useState(0),[fe,Re]=he.useState(0),Te=he.useRef(g.duration||B||GN),et=he.useRef(null),Ae=he.useRef(null),U=E===0,G=E+1<=w,Z=g.type,ye=g.dismissible!==!1,Ne=g.className||"",be=g.descriptionClassName||"",De=he.useMemo(()=>N.findIndex(Ze=>Ze.toastId===g.id)||0,[N,g.id]),Xe=he.useMemo(()=>{var Ze;return(Ze=g.closeButton)!=null?Ze:D},[g.closeButton,D]),ot=he.useMemo(()=>g.duration||B||GN,[g.duration,B]),wt=he.useRef(0),Fs=he.useRef(0),Hs=he.useRef(0),qa=he.useRef(null),[Na,Sa]=z.split("-"),ra=he.useMemo(()=>N.reduce((Ze,Bt,fs)=>fs>=De?Ze:Ze+Bt.height,0),[N,De]),na=u6(),lr=g.invert||p,fa=Z==="loading";Fs.current=he.useMemo(()=>De*Q+ra,[De,ra]),he.useEffect(()=>{Te.current=ot},[ot]),he.useEffect(()=>{ie(!0)},[]),he.useEffect(()=>{const Ze=Ae.current;if(Ze){const Bt=Ze.getBoundingClientRect().height;return Re(Bt),j(fs=>[{toastId:g.id,height:Bt,position:g.position},...fs]),()=>j(fs=>fs.filter($s=>$s.toastId!==g.id))}},[j,g.id]),he.useLayoutEffect(()=>{if(!te)return;const Ze=Ae.current,Bt=Ze.style.height;Ze.style.height="auto";const fs=Ze.getBoundingClientRect().height;Ze.style.height=Bt,Re(fs),j($s=>$s.find(xs=>xs.toastId===g.id)?$s.map(xs=>xs.toastId===g.id?{...xs,height:fs}:xs):[{toastId:g.id,height:fs,position:g.position},...$s])},[te,g.title,g.description,j,g.id,g.jsx,g.action,g.cancel]);const ts=he.useCallback(()=>{ae(!0),Pe(Fs.current),j(Ze=>Ze.filter(Bt=>Bt.toastId!==g.id)),setTimeout(()=>{P(g)},j6)},[g,P,j,Fs]);he.useEffect(()=>{if(g.promise&&Z==="loading"||g.duration===1/0||g.type==="loading")return;let Ze;return S||b||na?(()=>{if(Hs.current<wt.current){const $s=new Date().getTime()-wt.current;Te.current=Te.current-$s}Hs.current=new Date().getTime()})():(()=>{Te.current!==1/0&&(wt.current=new Date().getTime(),Ze=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),ts()},Te.current))})(),()=>clearTimeout(Ze)},[S,b,g,Z,na,ts]),he.useEffect(()=>{g.delete&&(ts(),g.onDismiss==null||g.onDismiss.call(g,g))},[ts,g.delete]);function Vi(){var Ze;if(I!=null&&I.loading){var Bt;return he.createElement("div",{className:Lr(A==null?void 0:A.loader,g==null||(Bt=g.classNames)==null?void 0:Bt.loader,"sonner-loader"),"data-visible":Z==="loading"},I.loading)}return he.createElement(r6,{className:Lr(A==null?void 0:A.loader,g==null||(Ze=g.classNames)==null?void 0:Ze.loader),visible:Z==="loading"})}const Os=g.icon||(I==null?void 0:I[Z])||s6(Z);var ha,cr;return he.createElement("li",{tabIndex:0,ref:Ae,className:Lr(V,Ne,A==null?void 0:A.toast,g==null||(e=g.classNames)==null?void 0:e.toast,A==null?void 0:A.default,A==null?void 0:A[Z],g==null||(s=g.classNames)==null?void 0:s[Z]),"data-sonner-toast":"","data-rich-colors":(ha=g.richColors)!=null?ha:R,"data-styled":!(g.jsx||g.unstyled||x),"data-mounted":te,"data-promise":!!g.promise,"data-swiped":je,"data-removed":le,"data-visible":G,"data-y-position":Na,"data-x-position":Sa,"data-index":E,"data-front":U,"data-swiping":ue,"data-dismissible":ye,"data-type":Z,"data-invert":lr,"data-swipe-out":we,"data-swipe-direction":X,"data-expanded":!!(S||H&&te),style:{"--index":E,"--toasts-before":E,"--z-index":C.length-E,"--offset":`${le?ve:Fs.current}px`,"--initial-height":H?"auto":`${fe}px`,...$,...g.style},onDragEnd:()=>{ce(!1),L(null),qa.current=null},onPointerDown:Ze=>{fa||!ye||(et.current=new Date,Pe(Fs.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(ce(!0),qa.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,Bt,fs;if(we||!ye)return;qa.current=null;const $s=Number(((Ze=Ae.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zo=Number(((Bt=Ae.current)==null?void 0:Bt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),xs=new Date().getTime()-((fs=et.current)==null?void 0:fs.getTime()),ss=K==="x"?$s:zo,as=Math.abs(ss)/xs;if(Math.abs(ss)>=w6||as>.11){Pe(Fs.current),g.onDismiss==null||g.onDismiss.call(g,g),ne(K==="x"?$s>0?"right":"left":zo>0?"down":"up"),ts(),Se(!0);return}else{var Vt,js;(Vt=Ae.current)==null||Vt.style.setProperty("--swipe-amount-x","0px"),(js=Ae.current)==null||js.style.setProperty("--swipe-amount-y","0px")}Ce(!1),ce(!1),L(null)},onPointerMove:Ze=>{var Bt,fs,$s;if(!qa.current||!ye||((Bt=window.getSelection())==null?void 0:Bt.toString().length)>0)return;const xs=Ze.clientY-qa.current.y,ss=Ze.clientX-qa.current.x;var as;const Vt=(as=t.swipeDirections)!=null?as:N6(z);!K&&(Math.abs(ss)>1||Math.abs(xs)>1)&&L(Math.abs(ss)>Math.abs(xs)?"x":"y");let js={x:0,y:0};const qi=sn=>1/(1.5+Math.abs(sn)/20);if(K==="y"){if(Vt.includes("top")||Vt.includes("bottom"))if(Vt.includes("top")&&xs<0||Vt.includes("bottom")&&xs>0)js.y=xs;else{const sn=xs*qi(xs);js.y=Math.abs(sn)<Math.abs(xs)?sn:xs}}else if(K==="x"&&(Vt.includes("left")||Vt.includes("right")))if(Vt.includes("left")&&ss<0||Vt.includes("right")&&ss>0)js.x=ss;else{const sn=ss*qi(ss);js.x=Math.abs(sn)<Math.abs(ss)?sn:ss}(Math.abs(js.x)>0||Math.abs(js.y)>0)&&Ce(!0),(fs=Ae.current)==null||fs.style.setProperty("--swipe-amount-x",`${js.x}px`),($s=Ae.current)==null||$s.style.setProperty("--swipe-amount-y",`${js.y}px`)}},Xe&&!g.jsx&&Z!=="loading"?he.createElement("button",{"aria-label":q,"data-disabled":fa,"data-close-button":!0,onClick:fa||!ye?()=>{}:()=>{ts(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Lr(A==null?void 0:A.closeButton,g==null||(a=g.classNames)==null?void 0:a.closeButton)},(cr=I==null?void 0:I.close)!=null?cr:c6):null,(Z||g.icon||g.promise)&&g.icon!==null&&((I==null?void 0:I[Z])!==null||g.icon)?he.createElement("div",{"data-icon":"",className:Lr(A==null?void 0:A.icon,g==null||(n=g.classNames)==null?void 0:n.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Vi():null,g.type!=="loading"?Os:null):null,he.createElement("div",{"data-content":"",className:Lr(A==null?void 0:A.content,g==null||(i=g.classNames)==null?void 0:i.content)},he.createElement("div",{"data-title":"",className:Lr(A==null?void 0:A.title,g==null||(c=g.classNames)==null?void 0:c.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?he.createElement("div",{"data-description":"",className:Lr(Y,be,A==null?void 0:A.description,g==null||(u=g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),he.isValidElement(g.cancel)?g.cancel:g.cancel&&hh(g.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||k,onClick:Ze=>{hh(g.cancel)&&ye&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Ze),ts())},className:Lr(A==null?void 0:A.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,he.isValidElement(g.action)?g.action:g.action&&hh(g.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||M,onClick:Ze=>{hh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Ze),!Ze.defaultPrevented&&ts())},className:Lr(A==null?void 0:A.actionButton,g==null||(h=g.classNames)==null?void 0:h.actionButton)},g.action.label):null)};function XN(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function E6(t,e){const s={};return[t,e].forEach((a,n)=>{const i=n===1,c=i?"--mobile-offset":"--offset",u=i?y6:v6;function f(h){["top","right","bottom","left"].forEach(p=>{s[`${c}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof a=="number"||typeof a=="string"?f(a):typeof a=="object"?["top","right","bottom","left"].forEach(h=>{a[h]===void 0?s[`${c}-${h}`]=u:s[`${c}-${h}`]=typeof a[h]=="number"?`${a[h]}px`:a[h]}):f(u)}),s}const C6=he.forwardRef(function(e,s){const{invert:a,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:c,closeButton:u,className:f,offset:h,mobileOffset:p,theme:g="light",richColors:x,duration:b,style:j,visibleToasts:w=x6,toastOptions:N,dir:E=XN(),gap:C=_6,icons:S,containerAriaLabel:P="Notifications"}=e,[R,D]=he.useState([]),$=he.useMemo(()=>Array.from(new Set([n].concat(R.filter(X=>X.position).map(X=>X.position)))),[R,n]),[k,M]=he.useState([]),[V,Y]=he.useState(!1),[B,z]=he.useState(!1),[Q,H]=he.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=he.useRef(null),I=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=he.useRef(null),K=he.useRef(!1),L=he.useCallback(X=>{D(ne=>{var te;return(te=ne.find(ie=>ie.id===X.id))!=null&&te.delete||_a.dismiss(X.id),ne.filter(({id:ie})=>ie!==X.id)})},[]);return he.useEffect(()=>_a.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{D(ne=>ne.map(te=>te.id===X.id?{...te,delete:!0}:te))});return}setTimeout(()=>{kE.flushSync(()=>{D(ne=>{const te=ne.findIndex(ie=>ie.id===X.id);return te!==-1?[...ne.slice(0,te),{...ne[te],...X},...ne.slice(te+1)]:[X,...ne]})})})}),[R]),he.useEffect(()=>{if(g!=="system"){H(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?H("dark"):H("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:ne})=>{H(ne?"dark":"light")})}catch{X.addListener(({matches:te})=>{try{H(te?"dark":"light")}catch(ie){console.error(ie)}})}},[g]),he.useEffect(()=>{R.length<=1&&Y(!1)},[R]),he.useEffect(()=>{const X=ne=>{var te;if(i.every(ae=>ne[ae]||ne.code===ae)){var le;Y(!0),(le=A.current)==null||le.focus()}ne.code==="Escape"&&(document.activeElement===A.current||(te=A.current)!=null&&te.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),he.useEffect(()=>{if(A.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,K.current=!1)}},[A.current]),he.createElement("section",{ref:s,"aria-label":`${P} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},$.map((X,ne)=>{var te;const[ie,le]=X.split("-");return R.length?he.createElement("ol",{key:X,dir:E==="auto"?XN():E,tabIndex:-1,ref:A,className:f,"data-sonner-toaster":!0,"data-sonner-theme":Q,"data-y-position":ie,"data-x-position":le,style:{"--front-toast-height":`${((te=k[0])==null?void 0:te.height)||0}px`,"--width":`${b6}px`,"--gap":`${C}px`,...j,...E6(h,p)},onBlur:ae=>{K.current&&!ae.currentTarget.contains(ae.relatedTarget)&&(K.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||K.current||(K.current=!0,q.current=ae.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{B||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:ae=>{ae.target instanceof HTMLElement&&ae.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},R.filter(ae=>!ae.position&&ne===0||ae.position===X).map((ae,ue)=>{var ce,we;return he.createElement(S6,{key:ae.id,icons:S,index:ue,toast:ae,defaultRichColors:x,duration:(ce=N==null?void 0:N.duration)!=null?ce:b,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:w,closeButton:(we=N==null?void 0:N.closeButton)!=null?we:u,interacting:B,position:X,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:L,toasts:R.filter(Se=>Se.position==ae.position),heights:k.filter(Se=>Se.position==ae.position),setHeights:M,expandByDefault:c,gap:C,expanded:V,swipeDirections:e.swipeDirections})})):null}))}),hC=y.createContext(null);function k6({children:t}){const[e,s]=y.useState({gameState:fC,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"Bem-vindo ao Tower Trials! Crie um personagem para iniciar sua aventura.",gameLog:[{text:"Bem-vindo ao Tower Trials!",type:"system"}]}),a=(f,h)=>{s(p=>({...p,loading:{...p.loading,[f]:h}}))},n=f=>{s(h=>({...h,gameState:f}))},i=f=>{s(h=>({...h,error:f})),f&&pe.error("Erro",{description:f})},c=()=>{s(f=>({...f,error:null}))},u=y.useMemo(()=>({gameState:e.gameState,loading:e.loading,error:e.error,setGameState:n,updateLoading:a,setError:i,resetError:c}),[e]);return r.jsx(hC.Provider,{value:u,children:t})}function Um(){const t=y.useContext(hC);if(!t)throw new Error("useGameState deve ser usado dentro de um GameStateProvider");return t}const mC=y.createContext(null);function A6({children:t}){const[e,s]=y.useState(""),[a,n]=y.useState([]),i=y.useCallback((u,f="system")=>{n(h=>h.slice(-5).some(x=>x.text===u&&x.type===f)?h:[...h,{text:u,type:f}])},[]),c=y.useMemo(()=>({gameMessage:e,gameLog:a,addGameLogMessage:i,setGameMessage:s}),[e,a,i,s]);return r.jsx(mC.Provider,{value:c,children:t})}function zm(){const t=y.useContext(mC);if(!t)throw new Error("useGameLog deve ser usado dentro de um LogProvider");return t}function ao(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class Ft{static async getAvailableEquipment(e){try{const s=`level_${e}`,a=Date.now();if(a-this.lastFetchTimestamp<this.CACHE_DURATION&&this.equipmentCache.has(s))return this.equipmentCache.get(s)||[];const{data:n,error:i}=await _e.from("equipment").select("*").lte("level_requirement",e).eq("is_unlocked",!0).eq("craftable",!1).order("level_requirement",{ascending:!0});if(i)throw i;const c=n;return this.equipmentCache.set(s,c),this.lastFetchTimestamp=a,c}catch(s){return console.error("Erro ao buscar equipamentos:",s instanceof Error?s.message:s),[]}}static async getEquipmentCraftingRecipes(){try{const{data:e,error:s}=await _e.from("equipment_crafting_recipes").select(`
                    *,
                    equipment:result_equipment_id (*),
                    ingredients:equipment_crafting_ingredients (*)
                `).order("name");if(s)throw s;return{data:e,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas de equipamentos:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas de equipamentos",success:!1}}}static async canCraftEquipment(e,s){try{const{data:a,error:n}=await _e.rpc("check_can_craft_equipment",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar crafting de equipamento:",a),{data:null,error:ao(a,"Erro ao verificar crafting de equipamento"),success:!1}}}static async craftEquipment(e,s){try{const{error:a}=await _e.rpc("craft_equipment",{p_character_id:e,p_recipe_id:s});if(a)throw a;return{data:{message:"Equipamento criado com sucesso!"},error:null,success:!0}}catch(a){return console.error("Erro ao craftar equipamento:",a),{data:null,error:ao(a,"Erro ao craftar equipamento"),success:!1}}}static async getCharacterEquipment(e){try{const{data:s,error:a}=await _e.from("character_equipment").select(`
                    *,
                    equipment:equipment_id (*)
                `).eq("character_id",e).order("created_at",{ascending:!1});if(a)throw a;return s}catch(s){return console.error("Erro ao buscar equipamentos do personagem:",s instanceof Error?s.message:s),[]}}static async getEquippedItems(e){try{const{data:s,error:a}=await _e.rpc("get_equipped_slots",{p_character_id:e});if(a)throw a;const n={};return s&&Array.isArray(s)&&s.forEach(i=>{const c={id:i.equipment_id,name:i.equipment_name,description:"",type:i.equipment_type,weapon_subtype:i.weapon_subtype,rarity:i.rarity,level_requirement:0,atk_bonus:i.atk_bonus,def_bonus:i.def_bonus,mana_bonus:i.mana_bonus,speed_bonus:i.speed_bonus,hp_bonus:i.hp_bonus,critical_chance_bonus:i.critical_chance_bonus,critical_damage_bonus:i.critical_damage_bonus,double_attack_chance_bonus:i.double_attack_chance_bonus,magic_damage_bonus:i.magic_damage_bonus,price:0,is_unlocked:!0,created_at:"",updated_at:""};n[i.slot_type]=c}),n}catch(s){return console.error("Erro ao buscar equipamentos equipados:",s instanceof Error?s.message:s),{}}}static async toggleEquipment(e,s,a,n){try{const{error:i}=await _e.rpc("toggle_equipment",{p_character_id:e,p_equipment_id:s,p_equip:a,p_slot_type:n});if(i)throw i;return{data:a?"Item equipado com sucesso!":"Item desequipado com sucesso!",error:null,success:!0}}catch(i){return console.error("Erro ao equipar/desequipar item:",i),{data:null,error:ao(i,"Erro ao equipar/desequipar item"),success:!1}}}static async buyEquipment(e,s){try{const{data:a,error:n}=await _e.from("equipment").select("price").eq("id",s).single();if(n)throw new Error(`Erro ao buscar equipamento: ${n.message}`);if(!a)throw new Error("Equipamento não encontrado");const{data:i,error:c}=await _e.rpc("buy_equipment",{p_character_id:e,p_equipment_id:s,p_price:a.price});if(c)throw c;return{data:{newGold:i},error:null,success:!0}}catch(a){return console.error("Erro ao comprar equipamento:",a),{data:null,error:ao(a,"Erro ao comprar equipamento"),success:!1}}}static async sellEquipment(e,s){try{const{data:a,error:n}=await _e.rpc("sell_equipment",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:{newGold:a},error:null,success:!0}}catch(a){return console.error("Erro ao vender equipamento:",a),{data:null,error:ao(a,"Erro ao vender equipamento"),success:!1}}}static async canEquipItem(e,s){try{const{data:a,error:n}=await _e.rpc("can_equip_item",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar se pode equipar item:",a),{data:null,error:ao(a,"Erro ao verificar se pode equipar item"),success:!1}}}static async getAllEquipments(){try{const{data:e,error:s}=await _e.from("equipment").select("*").order("name");if(s)throw s;return e}catch(e){return console.error("Erro ao buscar todos os equipamentos:",e instanceof Error?e.message:e),[]}}static clearCache(){this.equipmentCache.clear(),this.lastFetchTimestamp=0}static async compareEquipmentStats(e,s,a){try{const{data:n,error:i}=await _e.rpc("compare_equipment_stats",{p_character_id:e,p_new_equipment_id:s,p_slot_type:a});return i?(console.error("[EquipmentService] Erro ao comparar equipamentos:",i),{success:!1,error:i.message,data:null}):{success:!0,error:null,data:n||[]}}catch(n){return console.error("[EquipmentService] Erro na comparação de equipamentos:",n),{success:!1,error:ao(n,"Erro ao comparar equipamentos"),data:null}}}static async getEquipmentBonuses(e){try{const{data:s,error:a}=await _e.rpc("calculate_equipment_bonuses_enhanced",{p_character_id:e});return a?(console.error("[EquipmentService] Erro ao calcular bônus:",a),{success:!1,error:a.message,data:null}):{success:!0,error:null,data:(s==null?void 0:s[0])||{total_atk_bonus:0,total_def_bonus:0,total_mana_bonus:0,total_speed_bonus:0,total_hp_bonus:0,total_critical_chance_bonus:0,total_critical_damage_bonus:0,total_double_attack_chance_bonus:0,total_magic_damage_bonus:0}}}catch(s){return console.error("[EquipmentService] Erro ao obter bônus:",s),{success:!1,error:ao(s,"Erro ao obter bônus de equipamentos"),data:null}}}}ut(Ft,"equipmentCache",new Map),ut(Ft,"lastFetchTimestamp",0),ut(Ft,"CACHE_DURATION",3e5);const T6=t=>{const e={hp:0,max_hp:0,mana:0,max_mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,double_attack_chance:0,magic_damage:0},s=(a,n=!1)=>{if(!a)return;const i=n&&a.type==="weapon"?.8:1,c=n&&a.type==="armor"?1:i;e.hp+=Math.floor(a.hp_bonus*c),e.max_hp+=Math.floor(a.hp_bonus*c),e.mana+=Math.floor(a.mana_bonus*c),e.max_mana+=Math.floor(a.mana_bonus*c),e.atk+=Math.floor(a.atk_bonus*c),e.def+=Math.floor(a.def_bonus*c),e.speed+=Math.floor(a.speed_bonus*c),e.critical_chance+=a.critical_chance_bonus*c,e.critical_damage+=a.critical_damage_bonus*c,e.double_attack_chance+=a.double_attack_chance_bonus*c,e.magic_damage+=a.magic_damage_bonus*c};return s(t.main_hand??null,!1),s(t.off_hand??null,!0),s(t.armor??null,!1),s(t.accessory??null,!1),s(t.accessory_2??null,!1),e},ux=Object.freeze(Object.defineProperty({__proto__:null,EquipmentService:Ft,calculateEquipmentBonus:T6},Symbol.toStringTag,{value:"Module"}));class sr{static validateCharacterName(e){if(!e||typeof e!="string")return{isValid:!1,error:"Nome é obrigatório"};const s=e.trim();if(s.length<3)return{isValid:!1,error:"Nome deve ter pelo menos 3 caracteres"};if(s.length>20)return{isValid:!1,error:"Nome deve ter no máximo 20 caracteres"};for(const u of this.INVALID_PATTERNS)if(u.test(s))return{isValid:!1,error:this.getPatternError(u)};const a=s.toLowerCase().split(/[\s\-']+/);for(const u of a)if(this.BLACKLIST_WORDS.includes(u))return{isValid:!1,error:"Nome contém palavras inadequadas"};const n=s.toLowerCase().replace(/[\s\-']/g,"");for(const u of this.BLACKLIST_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contém termos inadequados"};for(const u of this.RESERVED_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contém termos reservados do sistema"};if(!/[a-zA-ZÀ-ÿ]/.test(s))return{isValid:!1,error:"Nome deve conter pelo menos uma letra"};const i=(s.match(/[a-zA-ZÀ-ÿ]/g)||[]).length;return(s.match(/[0-9]/g)||[]).length>i?{isValid:!1,error:"Nome não pode ter mais números que letras"}:{isValid:!0}}static getPatternError(e){const s=e.toString();return s.includes("^[0-9]+$")?"Nome não pode ser apenas números":s.includes("^[^a-zA-ZÀ-ÿ]")?"Nome deve começar com uma letra":s.includes("[^a-zA-ZÀ-ÿ0-9\\s'\\-]")?"Nome contém caracteres especiais não permitidos":s.includes("\\d{3,}")?"Nome não pode ter mais de 2 números consecutivos":s.includes("(.)\\1{3,}")?"Nome não pode ter mais de 3 caracteres iguais seguidos":s.includes("^\\s|\\s$")?"Nome não pode começar ou terminar com espaços":s.includes("\\s{2,}")?"Nome não pode ter espaços múltiplos":"Nome contém formato inválido"}static formatCharacterName(e){if(!e)return"";let s=e.trim().replace(/\s+/g," ");return s=s.replace(/\b\w/g,a=>a.toUpperCase()),s}static generateNameSuggestions(e){const s=[],a=e.replace(/[^a-zA-ZÀ-ÿ]/g,"");if(a.length>=3){for(let i=1;i<=3;i++){const c=Math.floor(Math.random()*100);s.push(this.formatCharacterName(a+c))}const n=["Jr","II","III","X","Prime","Neo"];for(const i of n.slice(0,2))s.push(this.formatCharacterName(a+i))}if(s.length===0){const n=["Aventureiro","Guerreiro","Explorador","Heroi","Campeao","Bravo","Valente","Nobre","Lenda","Mestre"];for(let i=0;i<3;i++){const c=n[Math.floor(Math.random()*n.length)],u=Math.floor(Math.random()*1e3);s.push(`${c}${u}`)}}return s.slice(0,3)}static isTooSimilar(e,s){const a=e.toLowerCase().replace(/[^a-zA-ZÀ-ÿ0-9]/g,"");for(const n of s){const i=n.toLowerCase().replace(/[^a-zA-ZÀ-ÿ0-9]/g,"");if(a===i||this.calculateSimilarity(a,i)>.8)return!0}return!1}static calculateSimilarity(e,s){const a=e.length>s.length?e:s,n=e.length>s.length?s:e;if(a.length===0)return 1;const i=this.levenshteinDistance(a,n);return(a.length-i)/a.length}static levenshteinDistance(e,s){const a=Array(s.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let n=0;n<=e.length;n+=1)a[0][n]=n;for(let n=0;n<=s.length;n+=1)a[n][0]=n;for(let n=1;n<=s.length;n+=1)for(let i=1;i<=e.length;i+=1){const c=e[i-1]===s[n-1]?0:1;a[n][i]=Math.min(a[n][i-1]+1,a[n-1][i]+1,a[n-1][i-1]+c)}return a[s.length][e.length]}}ut(sr,"BLACKLIST_WORDS",["porra","merda","caralho","puta","putaria","viado","bicha","cu","buceta","piroca","pinto","rola","foda","foder","fodido","cuzao","cuzão","babaca","otario","otário","idiota","imbecil","retardado","mongoloide","burro","desgraça","desgraçado","filho da puta","fdp","vagabundo","safado","cachorro","cadela","prostituta","vagabunda","piranha","galinha","fuck","shit","bitch","damn","hell","ass","asshole","bastard","crap","piss","dick","cock","pussy","cunt","whore","slut","fag","faggot","nigger","retard","moron","idiot","stupid","gay","lesbian","homo","nazi","hitler","rape","kill","murder","mierda","joder","puta","puto","cabron","cabrón","pendejo","idiota","estupido","estúpido","culo","coño","verga","chingar","pinche","mamada","putada","hijo de puta","hdp","marica","maricon","maricón","droga","cocaina","heroina","crack","cocaine","heroin","drug","dealer","traficante","sexo","sex","porn","porno","nude","naked","xxx","fetish","admin","moderador","mod","gm","gamemaster","suporte","support","oficial","staff","dev","developer","bot","sistema","system"]),ut(sr,"RESERVED_WORDS",["admin","administrator","moderador","moderator","mod","gm","gamemaster","suporte","support","help","ajuda","oficial","official","staff","dev","developer","sistema","system","bot","null","undefined","test","teste","demo","sample","example","exemplo","guest","visitante","player","jogador","user","usuario","usuário","npc","monster","monstro"]),ut(sr,"INVALID_PATTERNS",[/^[0-9]+$/,/^[^a-zA-ZÀ-ÿ]/,/[^a-zA-ZÀ-ÿ0-9\s'-]/,/\d{3,}/,/(.)\1{3,}/,/^\s|\s$/,/\s{2,}/]);class tt{static async getUserCharacterProgression(e){try{const{data:s,error:a}=await _e.rpc("get_user_character_progression",{p_user_id:e}).single();if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar progressão de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar progressão",success:!1}}}static async checkCharacterLimit(e){try{const{data:s,error:a}=await _e.rpc("check_character_limit",{p_user_id:e}).single();if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao verificar limite de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao verificar limite",success:!1}}}static async getUserCharacters(e){try{const s=Date.now(),a=`user_${e}`,n=this.lastFetchTimestamp.get(a)||0;if(s-n<1e4){const c=Array.from(this.characterCache.values()).filter(u=>u.user_id===e);if(c.length>0)return console.log(`[CharacterService] Usando lista de personagens em cache para usuário ${e} (${c.length} personagens) - última busca há ${Math.round((s-n)/1e3)}s`),{data:c,error:null,success:!0}}if(this.pendingUserCharactersRequests.has(e))return console.log(`[CharacterService] Reutilizando requisição pendente para usuário ${e}`),this.pendingUserCharactersRequests.get(e);console.log(`[CharacterService] Buscando personagens do servidor para usuário ${e}`);const i=this.fetchUserCharactersFromServer(e,a,s);return this.pendingUserCharactersRequests.set(e,i),i.finally(()=>{this.pendingUserCharactersRequests.delete(e)}),i}catch(s){return console.error("Erro ao buscar personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagens",success:!1}}}static async getCharacter(e){try{const s=this.characterCache.get(e),a=Date.now(),n=this.lastFetchTimestamp.get(e)||0;if(s&&a-n<this.CACHE_DURATION)return console.log(`[CharacterService] Usando personagem em cache: ${s.name} (andar: ${s.floor})`),{data:s,error:null,success:!0};if(this.pendingRequests.has(e))return console.log(`[CharacterService] Reutilizando requisição pendente para personagem ${e}`),this.pendingRequests.get(e);const i=this.fetchCharacterFromServer(e);this.pendingRequests.set(e,i),i.finally(()=>{this.pendingRequests.delete(e)});const c=await i;if(c.success&&c.data){console.log(`[CharacterService] Aplicando cura automática para ${c.data.name}`);const u=await this.applyAutoHeal(e);if(u.success&&u.data&&u.data.healed){console.log(`[CharacterService] ${c.data.name} curado: ${u.data.oldHp} -> ${u.data.newHp} HP`);const f=u.data.newHp-u.data.oldHp,h=f/c.data.max_hp*100;return h>=5&&console.log(`[CharacterService] Cura significativa detectada: +${f} HP (${h.toFixed(1)}%)`),{data:u.data.character,error:null,success:!0}}}return c}catch(s){return console.error("Erro ao buscar personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async fetchUserCharactersFromServer(e,s,a){try{const{data:n,error:i}=await _e.rpc("get_user_characters",{p_user_id:e});if(i)throw i;return this.characterCache.clear(),n.forEach(c=>{this.characterCache.set(c.id,c)}),this.lastFetchTimestamp.set(s,a),{data:n,error:null,success:!0}}catch(n){return console.error("Erro ao buscar personagens do servidor:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao buscar personagens",success:!1}}}static async fetchCharacterFromServer(e){try{console.log(`[CharacterService] Buscando personagem ${e} do servidor`);const{data:s,error:a}=await _e.rpc("get_character_full_stats",{p_character_id:e}).single();if(a)throw a;if(!s)return{data:null,error:"Personagem não encontrado",success:!1};const n=s,i={id:n.character_id,user_id:"",name:n.name,level:n.level,xp:n.xp,xp_next_level:n.xp_next_level,gold:n.gold,hp:n.hp,max_hp:n.max_hp,mana:n.mana,max_mana:n.max_mana,atk:n.atk,def:n.def,speed:n.speed,floor:1,strength:n.strength,dexterity:n.dexterity,intelligence:n.intelligence,wisdom:n.wisdom,vitality:n.vitality,luck:n.luck,attribute_points:n.attribute_points||0,critical_chance:n.critical_chance,critical_damage:n.critical_damage,sword_mastery:n.sword_mastery,axe_mastery:n.axe_mastery,blunt_mastery:n.blunt_mastery,defense_mastery:n.defense_mastery,magic_mastery:n.magic_mastery,sword_mastery_xp:n.sword_mastery_xp,axe_mastery_xp:n.axe_mastery_xp,blunt_mastery_xp:n.blunt_mastery_xp,defense_mastery_xp:n.defense_mastery_xp,magic_mastery_xp:n.magic_mastery_xp,is_alive:!0,created_at:"",updated_at:"",last_activity:void 0},{data:c,error:u}=await _e.rpc("get_character",{p_character_id:i.id}).single();if(!u&&c){const f=c;i.user_id=f.user_id,i.floor=f.floor,i.created_at=f.created_at,i.updated_at=f.updated_at,i.last_activity=f.last_activity}return console.log(`[CharacterService] Personagem carregado do servidor: ${i.name} (andar: ${i.floor}) com crítico: ${i.critical_chance}`),this.characterCache.set(e,i),this.lastFetchTimestamp.set(e,Date.now()),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagem do servidor:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async createCharacter(e){var s,a,n;try{const i=sr.validateCharacterName(e.name);if(!i.isValid)return{data:null,error:i.error||"Nome inválido",success:!1};const c=await this.checkCharacterLimit(e.user_id);if(!c.success||!((s=c.data)!=null&&s.can_create)){const g=((a=c.data)==null?void 0:a.next_slot_required_level)||0;return{data:null,error:`Limite de personagens atingido. Para criar o ${(((n=c.data)==null?void 0:n.available_slots)||3)+1}º personagem, você precisa de ${g} níveis totais entre todos os seus personagens.`,success:!1}}const u=sr.formatCharacterName(e.name),f=await this.getUserCharacters(e.user_id);if(f.success&&f.data&&f.data.length>0){const g=f.data.map(x=>x.name);if(sr.isTooSimilar(u,g))return{data:null,error:`Nome muito similar a um personagem existente. Sugestões: ${sr.generateNameSuggestions(u).join(", ")}`,success:!1}}const{data:h,error:p}=await _e.rpc("create_character",{p_user_id:e.user_id,p_name:u});if(p){if(p.message.includes("Nome"))return{data:null,error:p.message,success:!1};if(p.message.includes("Limite")||p.message.includes("personagem"))return{data:null,error:p.message,success:!1};throw p}return this.invalidateUserCache(e.user_id),{data:{id:h},error:null,success:!0}}catch(i){return console.error("Erro ao criar personagem:",i instanceof Error?i.message:i),{data:null,error:i instanceof Error?i.message:"Erro ao criar personagem",success:!1}}}static async loadCharacter(e){const{data:s,error:a}=await _e.from("characters").select("*").eq("id",e).single();if(a)throw a;const n=await Ft.getEquippedItems(e),i=Array.isArray(n)?n:Object.values(n||{}),c=KL(s.level);return{...s,equipment_slots:i,...c}}static async grantSecureXP(e,s,a="combat"){try{const{supabaseAdmin:n}=await ws(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>od);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_grant_xp",{p_character_id:e,p_xp_amount:s,p_source:a}).single();if(c)throw c;this.invalidateCharacterCache(e);const u=i;if(u.leveled_up||u.slots_unlocked){const f=await this.getCharacter(e);f.success&&f.data&&this.invalidateUserCache(f.data.user_id)}return{data:u,error:null,success:!0}}catch(n){return console.error("Erro ao conceder XP:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder XP",success:!1}}}static async grantSecureGold(e,s,a="combat"){try{const{supabaseAdmin:n}=await ws(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>od);return{supabaseAdmin:u}},void 0),{data:i,error:c}=await n.rpc("secure_grant_gold",{p_character_id:e,p_gold_amount:s,p_source:a}).single();if(c)throw c;return this.invalidateCharacterCache(e),{data:i,error:null,success:!0}}catch(n){return console.error("Erro ao conceder gold:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder gold",success:!1}}}static async updateCharacterHpMana(e,s,a){try{if(!e)return{success:!1,error:"ID do personagem é obrigatório",data:null};const n=s!==void 0?Math.floor(Number(s)):void 0,i=a!==void 0?Math.floor(Number(a)):void 0;if(n!==void 0&&(n<0||n>9999))return{success:!1,error:"Valor de HP inválido",data:null};if(i!==void 0&&(i<0||i>9999))return{success:!1,error:"Valor de Mana inválido",data:null};const{error:c}=await _e.rpc("internal_update_character_hp_mana",{p_character_id:e,p_hp:n,p_mana:i});return c?(console.error("Erro ao atualizar HP/Mana:",c),{success:!1,error:`Erro ao atualizar stats: ${c.message}`,data:null}):(this.invalidateCharacterCache(e),{success:!0,error:null,data:null})}catch(n){return console.error("Erro ao atualizar HP/Mana do personagem:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido ao atualizar HP/Mana",data:null}}}static async updateCharacterFloor(e,s){try{console.log(`[CharacterService] Atualizando andar seguramente - ID: ${e}, Andar: ${s}`);const{supabaseAdmin:a}=await ws(async()=>{const{supabaseAdmin:i}=await Promise.resolve().then(()=>od);return{supabaseAdmin:i}},void 0),{error:n}=await a.rpc("secure_advance_floor",{p_character_id:e,p_new_floor:s});if(n)throw console.error("[CharacterService] Erro na função secure_advance_floor:",n.message),n;return this.invalidateCharacterCache(e),console.log(`[CharacterService] Andar atualizado com segurança para ${s}`),{data:null,error:null,success:!0}}catch(a){const n=a instanceof Error?a.message:"Erro desconhecido";return console.error("[CharacterService] Erro ao atualizar andar:",n),{data:null,error:n,success:!1}}}static async updateGold(e,s){const{error:a}=await _e.from("characters").update({gold:s}).eq("id",e);if(a)throw a}static async deleteCharacter(e){try{const s=await this.getCharacter(e);if(s.success&&s.data&&s.data.floor>0){console.log(`[CharacterService] Salvando personagem ${s.data.name} no ranking histórico antes de deletar`);try{const{error:n}=await _e.rpc("save_ranking_entry_on_death",{p_character_id:e});n?console.error("Erro ao salvar no ranking histórico:",n):console.log(`[CharacterService] Personagem ${s.data.name} salvo no ranking histórico com sucesso`)}catch(n){console.error("Erro ao salvar no ranking histórico:",n)}}const{error:a}=await _e.rpc("delete_character",{p_character_id:e});if(a)throw a;return this.invalidateCharacterCache(e),s.success&&s.data&&this.invalidateUserCache(s.data.user_id),console.log(`[CharacterService] Personagem deletado com sucesso: ${e}`),{error:null}}catch(s){return console.error("Erro ao deletar personagem:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Erro ao deletar personagem"}}}static invalidateCharacterCache(e){this.cacheInvalidationQueue.add(e),this.cacheInvalidationTimer&&clearTimeout(this.cacheInvalidationTimer),this.cacheInvalidationTimer=setTimeout(()=>{const s=Array.from(this.cacheInvalidationQueue);this.cacheInvalidationQueue.clear(),this.cacheInvalidationTimer=null,s.forEach(a=>{this.characterCache.delete(a),this.lastFetchTimestamp.delete(a)}),s.length>0&&console.log(`[CharacterService] Cache invalidado para ${s.length} personagens: ${s.join(", ")}`)},this.CACHE_INVALIDATION_DELAY)}static invalidateUserCache(e){const s=`user_${e}`;this.lastFetchTimestamp.delete(s);const a=[];Array.from(this.characterCache.entries()).forEach(([n,i])=>{i.user_id===e&&a.push(n)}),a.forEach(n=>this.invalidateCharacterCache(n)),console.log(`[CharacterService] Cache de usuário ${e} invalidado (${a.length} personagens)`)}static clearAllCache(){this.characterCache.clear(),this.lastFetchTimestamp.clear(),this.pendingRequests.clear(),console.log("[CharacterService] Todo o cache foi limpo")}static async getUnlockedCheckpoints(e){try{console.log(`[CharacterService] Obtendo checkpoints para personagem ${e}`);try{const{data:c,error:u}=await _e.rpc("get_character_unlocked_checkpoints",{p_character_id:e});if(!u&&c){const f=c.map(h=>({floor:h.floor_number,description:h.description}));return console.log("[CharacterService] Checkpoints obtidos via RPC:",f),{data:f,error:null,success:!0}}else u&&console.warn("[CharacterService] Erro na RPC get_character_unlocked_checkpoints:",u)}catch(c){console.warn("[CharacterService] Função RPC não disponível, usando fallback:",c)}console.log("[CharacterService] Usando fallback para calcular checkpoints");const s=await this.getCharacter(e);if(!s.success||!s.data)return{data:null,error:"Personagem não encontrado",success:!1};const a=s.data,n=Math.max(a.floor,("highest_floor"in a?a.highest_floor:a.floor)||a.floor);console.log(`[CharacterService] Andar atual: ${a.floor}, Highest floor: ${n}`);const i=[];i.push({floor:1,description:"Andar 1 - Início da Torre"});for(let c=1;c<=100;c++){const u=c*10,f=u+1;if(n>=f)i.push({floor:f,description:`Andar ${f} - Checkpoint Pós-Boss`}),console.log(`[CharacterService] Checkpoint ${f} desbloqueado (passou do boss ${u})`);else break}return console.log("[CharacterService] Checkpoints finais calculados:",i),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao obter checkpoints:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao obter checkpoints",success:!1}}}static async startFromCheckpoint(e,s){try{if(!(s===1||s>10&&(s-1)%10===0))return{data:null,error:"Checkpoint inválido",success:!1};const n=await this.getUnlockedCheckpoints(e);return!n.success||!n.data?{data:null,error:"Erro ao verificar checkpoints",success:!1}:n.data.some(u=>u.floor===s)?await this.updateCharacterFloor(e,s):{data:null,error:"Checkpoint não desbloqueado",success:!1}}catch(a){return console.error("Erro ao iniciar do checkpoint:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao iniciar do checkpoint",success:!1}}}static calculateAutoHeal(e,s){if(!e.last_activity)return{hp:e.hp,mana:e.mana};if(e.hp>=e.max_hp&&e.mana>=e.max_mana)return{hp:e.hp,mana:e.mana};const a=new Date(e.last_activity),n=s.getTime()-a.getTime(),i=Math.floor(n/1e3);if(i<1)return{hp:e.hp,mana:e.mana};const u=2*3600,f=.1,h=100;let p=e.hp;if(e.hp<e.max_hp){const x=Math.max(e.hp,Math.ceil(e.max_hp*(f/100))),b=x/e.max_hp*100,j=(h-f)/u,w=Math.min(j*i,h-b),N=Math.floor(w/100*e.max_hp);p=Math.min(e.max_hp,x+N)}let g=e.mana;if(e.mana<e.max_mana){const x=Math.max(e.mana,Math.ceil(e.max_mana*(f/100))),b=x/e.max_mana*100,j=(h-f)/u,w=Math.min(j*i,h-b),N=Math.floor(w/100*e.max_mana);g=Math.min(e.max_mana,x+N)}return(p>e.hp||g>e.mana)&&console.log(`[AutoHeal] ${e.name}: HP ${e.hp} -> ${p} (+${p-e.hp}), Mana ${e.mana} -> ${g} (+${g-e.mana}) após ${Math.floor(i/60)}min`),{hp:p,mana:g}}static async applyAutoHeal(e){try{const s=await this.getCharacter(e);if(!s.success||!s.data)return{data:null,error:"Personagem não encontrado",success:!1};const a=s.data,n=new Date,{hp:i,mana:c}=this.calculateAutoHeal(a,n);if(i===a.hp&&c===a.mana)return{data:{healed:!1,oldHp:a.hp,newHp:a.hp,character:a},error:null,success:!0};const u=await this.updateCharacterHpMana(e,i,c);if(!u.success)throw new Error(u.error||"Erro ao atualizar HP/Mana");await this.updateLastActivity(e),this.invalidateCharacterCache(e);const f={...a,hp:i,mana:c,last_activity:n.toISOString()};return{data:{healed:!0,oldHp:a.hp,newHp:i,character:f},error:null,success:!0}}catch(s){return console.error("Erro ao aplicar cura automática:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao aplicar cura automática",success:!1}}}static async updateLastActivity(e){try{const{error:s}=await _e.rpc("update_character_activity",{p_character_id:e});if(s)throw s;return this.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao atualizar última atividade:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao atualizar última atividade",success:!1}}}static async getCharacterStats(e){try{const s=await this.getCharacterForGame(e);if(!s.success||!s.data)return{success:!1,error:s.error||"Erro ao carregar dados do personagem",data:null};const a=s.data,n={level:a.level,xp:a.xp,xp_next_level:a.xp_next_level,gold:a.gold,hp:a.hp,max_hp:a.max_hp,mana:a.mana,max_mana:a.max_mana,atk:a.atk,def:a.def,speed:a.speed,strength:a.strength||10,dexterity:a.dexterity||10,intelligence:a.intelligence||10,wisdom:a.wisdom||10,vitality:a.vitality||10,luck:a.luck||10,attribute_points:a.attribute_points||0,critical_chance:a.critical_chance||0,critical_damage:a.critical_damage||0,magic_damage_bonus:a.magic_damage_bonus||0,magic_attack:a.magic_attack||0,sword_mastery:a.sword_mastery||1,axe_mastery:a.axe_mastery||1,blunt_mastery:a.blunt_mastery||1,defense_mastery:a.defense_mastery||1,magic_mastery:a.magic_mastery||1,sword_mastery_xp:a.sword_mastery_xp||0,axe_mastery_xp:a.axe_mastery_xp||0,blunt_mastery_xp:a.blunt_mastery_xp||0,defense_mastery_xp:a.defense_mastery_xp||0,magic_mastery_xp:a.magic_mastery_xp||0,base_hp:a.base_hp||a.base_max_hp,base_max_hp:a.base_max_hp,base_mana:a.base_mana||a.base_max_mana,base_max_mana:a.base_max_mana,base_atk:a.base_atk,base_def:a.base_def,base_speed:a.base_speed,equipment_hp_bonus:a.equipment_hp_bonus||0,equipment_mana_bonus:a.equipment_mana_bonus||0,equipment_atk_bonus:a.equipment_atk_bonus||0,equipment_def_bonus:a.equipment_def_bonus||0,equipment_speed_bonus:a.equipment_speed_bonus||0};return console.log(`[CharacterService] Stats unificados para ${a.name}:`,{critical_damage:n.critical_damage,fonte:"getCharacterForGame (única fonte da verdade)"}),{success:!0,error:null,data:n}}catch(s){return console.error("Erro ao buscar stats do personagem:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async getCharacterForGame(e){try{const{data:s,error:a}=await _e.from("characters").select("*").eq("id",e).single();if(a)throw a;if(!s)return{success:!1,error:"Personagem não encontrado",data:null};const{EquipmentService:n}=await ws(async()=>{const{EquipmentService:x}=await Promise.resolve().then(()=>ux);return{EquipmentService:x}},void 0),i=await n.getEquipmentBonuses(e),c=i.success&&i.data?i.data:{total_atk_bonus:0,total_def_bonus:0,total_mana_bonus:0,total_speed_bonus:0,total_hp_bonus:0,total_critical_chance_bonus:0,total_critical_damage_bonus:0,total_double_attack_chance_bonus:0,total_magic_damage_bonus:0},u=await this.calculateDerivedStats(s),f={hp:u.hp+c.total_hp_bonus,max_hp:u.max_hp+c.total_hp_bonus,mana:u.mana+c.total_mana_bonus,max_mana:u.max_mana+c.total_mana_bonus,atk:u.atk+c.total_atk_bonus,def:u.def+c.total_def_bonus,speed:u.speed+c.total_speed_bonus,magic_attack:u.magic_attack,critical_chance:u.critical_chance+c.total_critical_chance_bonus,critical_damage:u.critical_damage+c.total_critical_damage_bonus,magic_damage_bonus:u.magic_damage_bonus+c.total_magic_damage_bonus,double_attack_chance:u.double_attack_chance+c.total_double_attack_chance_bonus},h=await ws(()=>Promise.resolve().then(()=>R6),void 0).then(x=>x.SpellService.getCharacterEquippedSpells(e)),p=h.success&&h.data?h.data:[],g={id:s.id,user_id:s.user_id,name:s.name,level:s.level,xp:s.xp,xp_next_level:s.xp_next_level,gold:s.gold,hp:f.hp,max_hp:f.max_hp,mana:f.mana,max_mana:f.max_mana,atk:f.atk,def:f.def,speed:f.speed,created_at:s.created_at,updated_at:s.updated_at,isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:s.floor,spells:p,consumables:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},strength:s.strength||10,dexterity:s.dexterity||10,intelligence:s.intelligence||10,wisdom:s.wisdom||10,vitality:s.vitality||10,luck:s.luck||10,attribute_points:s.attribute_points||0,sword_mastery:s.sword_mastery||1,axe_mastery:s.axe_mastery||1,blunt_mastery:s.blunt_mastery||1,defense_mastery:s.defense_mastery||1,magic_mastery:s.magic_mastery||1,sword_mastery_xp:s.sword_mastery_xp||0,axe_mastery_xp:s.axe_mastery_xp||0,blunt_mastery_xp:s.blunt_mastery_xp||0,defense_mastery_xp:s.defense_mastery_xp||0,magic_mastery_xp:s.magic_mastery_xp||0,critical_chance:f.critical_chance,critical_damage:f.critical_damage,magic_damage_bonus:f.magic_damage_bonus,magic_attack:f.magic_attack,double_attack_chance:f.double_attack_chance,base_hp:u.hp,base_max_hp:u.max_hp,base_mana:u.mana,base_max_mana:u.max_mana,base_atk:u.atk,base_def:u.def,base_speed:u.speed,equipment_hp_bonus:c.total_hp_bonus,equipment_mana_bonus:c.total_mana_bonus,equipment_atk_bonus:c.total_atk_bonus,equipment_def_bonus:c.total_def_bonus,equipment_speed_bonus:c.total_speed_bonus};return console.log(`[CharacterService] GamePlayer criado para ${g.name}:`,{level:g.level,base_atk:g.base_atk,equipment_atk_bonus:g.equipment_atk_bonus,final_atk:g.atk,final_critical_damage:g.critical_damage}),{success:!0,error:null,data:g}}catch(s){return console.error("Erro ao buscar personagem para o jogo:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async distributeAttributePoints(e,s){try{const{data:a,error:n}=await _e.rpc("distribute_attribute_points",{p_character_id:e,p_strength:s.strength,p_dexterity:s.dexterity,p_intelligence:s.intelligence,p_wisdom:s.wisdom,p_vitality:s.vitality,p_luck:s.luck}).single();if(n)throw n;return this.invalidateCharacterCache(e),{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao distribuir pontos de atributo:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao distribuir pontos",success:!1}}}static async addSkillXp(e,s,a){try{const{data:n,error:i}=await _e.rpc("add_skill_xp",{p_character_id:e,p_skill_type:s,p_xp_amount:a}).single();if(i)throw i;return n&&n.skill_leveled_up&&this.invalidateCharacterCache(e),{data:n,error:null,success:!0}}catch(n){return console.error("Erro ao adicionar XP de habilidade:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao adicionar XP",success:!1}}}static async recalculateCharacterStats(e){try{const{error:s}=await _e.rpc("recalculate_character_stats",{p_character_id:e});if(s)throw s;return this.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao recalcular stats:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao recalcular stats",success:!1}}}static async resetCharacterProgress(e){try{const s=await this.updateCharacterFloor(e,1);if(!s.success)return s;const a=await this.getCharacter(e);return a.success&&a.data&&await this.updateCharacterHpMana(e,a.data.max_hp,a.data.max_mana),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao resetar progresso do personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao resetar progresso",success:!1}}}static async calculateDerivedStats(e){try{return console.log("[CharacterService] Calculando stats derivados para:",{id:e.id,level:e.level,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,sword_mastery:e.sword_mastery,axe_mastery:e.axe_mastery,blunt_mastery:e.blunt_mastery,defense_mastery:e.defense_mastery,magic_mastery:e.magic_mastery}),console.log("[CharacterService] Usando cálculo fallback para garantir consistência"),await this.calculateDerivedStatsFallback(e)}catch(s){return console.error("[CharacterService] Erro no cálculo de stats derivados:",s),await this.calculateDerivedStatsFallback(e)}}static async calculateDerivedStatsFallback(e){const s=e.level,a=e.strength||10,n=e.dexterity||10,i=e.intelligence||10,c=e.wisdom||10,u=e.vitality||10,f=e.luck||10,h=a+n+i+c+u+f,p=1-(Math.abs(a/h-1/6)+Math.abs(n/h-1/6)+Math.abs(i/h-1/6)+Math.abs(c/h-1/6)+Math.abs(u/h-1/6)+Math.abs(f/h-1/6))/2,g=1+p*.2;let x=1;Math.max(a/h,n/h,i/h,c/h,u/h,f/h)>.8&&(x=.7),console.log(`[CharacterService] Build analysis - Diversidade: ${(p*100).toFixed(1)}%, Mono-penalty: ${x}`);const j=Math.pow(a,1.2)*g*x,w=Math.pow(n,1.15)*g*x,N=Math.pow(i,1.25)*g*x,E=Math.pow(c,1.1)*g*x,C=Math.pow(u,1.3)*g*x,S=f*g*x,P=e.sword_mastery||1,R=e.axe_mastery||1,D=e.blunt_mastery||1,$=e.defense_mastery||1,k=e.magic_mastery||1,M=Math.pow(Math.max(P,R,D),1.1)*g,V=Math.pow($,1.2)*g,Y=Math.pow(k,1.15)*g,B=50+s*2,z=20+s*1,Q=2+s,H=1+s,A=3+s;let I={hp:0,mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,magic_damage:0,double_attack_chance:0};try{const{EquipmentService:je}=await ws(async()=>{const{EquipmentService:ve}=await Promise.resolve().then(()=>ux);return{EquipmentService:ve}},void 0),Ce=await je.getEquippedItems(e.id);if(Ce){const{calculateEquipmentBonus:ve}=await ws(async()=>{const{calculateEquipmentBonus:Pe}=await Promise.resolve().then(()=>ux);return{calculateEquipmentBonus:Pe}},void 0);I=ve(Ce),console.log("[CharacterService] Bônus de equipamentos calculado:",{atk:I.atk,def:I.def,speed:I.speed,critical_chance:I.critical_chance,magic_damage:I.magic_damage})}}catch(je){console.error("[CharacterService] Erro ao calcular bônus de equipamentos:",je)}const q=Math.floor(B+C*3.5+I.hp),K=q,L=Math.floor(z+(N+E)*1.5+I.mana),X=L,ne=Math.floor(Q+j*2.2+M+I.atk),te=Math.floor(N*1.8+Y+I.magic_damage),ie=Math.floor(H+w*1.5+V+I.def),le=Math.floor(A+w*1.8+I.speed),ae=Math.min(95,Math.floor(5+w*.3+S*.5+M*.2+I.critical_chance)),ue=Math.floor(150+j*.8+M*1.2+I.critical_damage),ce=Math.floor(N*1.2+Y*1.5+I.magic_damage),we=Math.min(25,Math.floor(w*.2+S*.3+I.double_attack_chance)),Se={hp:q,max_hp:K,mana:L,max_mana:X,atk:ne,magic_attack:te,def:ie,speed:le,critical_chance:ae,critical_damage:ue,magic_damage_bonus:ce,double_attack_chance:we};return console.log("[CharacterService] Stats derivados calculados:",{level:s,diversityBonus:(g*100-100).toFixed(1)+"%",monoPenalty:(x*100).toFixed(1)+"%",final_stats:Se}),Se}static analyzeBuildDiversity(e){const s=e.strength||10,a=e.dexterity||10,n=e.intelligence||10,i=e.wisdom||10,c=e.vitality||10,u=e.luck||10,f=s+a+n+i+c+u,h=[{name:"Força",value:s,percentage:s/f},{name:"Destreza",value:a,percentage:a/f},{name:"Inteligência",value:n,percentage:n/f},{name:"Sabedoria",value:i,percentage:i/f},{name:"Vitalidade",value:c,percentage:c/f},{name:"Sorte",value:u,percentage:u/f}],p=h.reduce((N,E)=>E.percentage>N.percentage?E:N),g=p.percentage>.8,x=1-h.reduce((N,E)=>N+Math.abs(E.percentage-1/6),0)/2,b=1+x*.2,j=g?.7:1;let w="";return g?w=`Build muito especializada em ${p.name}. Considere investir em outros atributos para melhor eficiência geral.`:x>.7?w="Build bem balanceada! Você está aproveitando as sinergias entre atributos.":w="Build moderadamente especializada. Há espaço para melhorar o equilíbrio.",{diversityScore:x,diversityPercentage:x*100,diversityBonus:b,monoBuildPenalty:j,dominantAttribute:p.name,dominantPercentage:p.percentage*100,isMonoBuild:g,recommendation:w}}}ut(tt,"characterCache",new Map),ut(tt,"lastFetchTimestamp",new Map),ut(tt,"pendingRequests",new Map),ut(tt,"pendingUserCharactersRequests",new Map),ut(tt,"CACHE_DURATION",3e4),ut(tt,"cacheInvalidationQueue",new Set),ut(tt,"cacheInvalidationTimer",null),ut(tt,"CACHE_INVALIDATION_DELAY",500);class vr{static async getMonsterForFloor(e){try{if(e<=0)return console.warn(`[MonsterService] Tentativa de gerar monstro para andar inválido: ${e}`),{data:null,error:`Andar inválido: ${e}`,success:!1};const s=this.monsterCache.get(e),a=this.cacheExpiry.get(e),n=Date.now();if(s&&a&&n<a)return console.log(`[MonsterService] Retornando monstro do cache para andar ${e}: ${s.name}`),{data:s,error:null,success:!0};if(this.pendingRequests.has(e))return console.log(`[MonsterService] Reutilizando requisição pendente para andar ${e}`),this.pendingRequests.get(e);console.log(`[MonsterService] === INÍCIO BUSCA MONSTRO ANDAR ${e} ===`);const i=this.fetchMonsterFromServer(e);return this.pendingRequests.set(e,i),i.finally(()=>{this.pendingRequests.delete(e)}),i}catch(s){return console.error(`[MonsterService] EXCEÇÃO ao obter monstro para andar ${e}:`,s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar monstro",success:!1}}}static async fetchMonsterFromServer(e){var s,a,n,i;try{console.log(`[MonsterService] Buscando monstro DIRETAMENTE do servidor para andar ${e}`);let{data:c,error:u}=await _e.rpc("get_monster_for_floor",{p_floor:e});if(u&&((s=u.message)!=null&&s.includes("function"))&&((a=u.message)!=null&&a.includes("does not exist"))){console.log("[MonsterService] Função get_monster_for_floor não existe, tentando get_monster_for_floor_with_initiative...");const{data:j,error:w}=await _e.rpc("get_monster_for_floor_with_initiative",{p_floor:e});if(w){console.log("[MonsterService] Função com iniciativa também falhou, usando fallback...");const{data:N,error:E}=await _e.from("monsters").select("*").lte("min_floor",e).order("min_floor",{ascending:!1}).limit(1);E?(c=null,u=E):(c=N&&N.length>0?N[0]:null,u=null,console.log(`[MonsterService] Usando fallback da tabela: ${(c==null?void 0:c.name)||"N/A"}`))}else c=j,u=w,console.log(`[MonsterService] Usando função com iniciativa: ${(c==null?void 0:c.name)||"N/A"}`)}else u||console.log(`[MonsterService] Usando função padrão: ${(c==null?void 0:c.name)||"N/A"}`);if(console.log("[MonsterService] Resposta da RPC get_monster_for_floor:",{hasData:!!c,hasError:!!u,dataType:typeof c,isArray:Array.isArray(c),dataLength:Array.isArray(c)?c.length:"not-array",errorMessage:u==null?void 0:u.message,errorCode:u==null?void 0:u.code}),u)if(console.error(`[MonsterService] Erro na API ao buscar monstro para andar ${e}:`,u),u.code==="42804"||(n=u.message)!=null&&n.includes("does not match function result type")){console.log("[MonsterService] Erro de tipo detectado, tentando buscar diretamente da tabela...");try{const{data:j,error:w}=await _e.from("monsters").select("*").lte("min_floor",e).order("min_floor",{ascending:!1}).limit(1);if(w)throw w;if(j&&j.length>0)console.log("[MonsterService] Fallback bem-sucedido, usando monstro da tabela"),c=j[0],u=null;else return console.warn("[MonsterService] Nenhum monstro encontrado na tabela, gerando monstro básico"),{data:this.generateBasicMonster(e),error:null,success:!0}}catch(j){return console.error("[MonsterService] Fallback da tabela também falhou:",j),console.log("[MonsterService] Gerando monstro básico como último recurso"),{data:this.generateBasicMonster(e),error:null,success:!0}}}else return console.log("[MonsterService] Erro geral na RPC, gerando monstro básico"),{data:this.generateBasicMonster(e),error:null,success:!0};if(!c||Array.isArray(c)&&c.length===0)return console.error(`[MonsterService] Nenhum monstro retornado para andar ${e}`),{data:null,error:"Nenhum monstro encontrado para este andar",success:!1};const f=Array.isArray(c)?c[0]:c;if(!f||!f.id||!f.name)return console.error(`[MonsterService] Dados de monstro inválidos para andar ${e}:`,f),{data:null,error:"Dados do monstro inválidos",success:!1};if(!f.hp||!f.atk||!f.def){console.log(`[MonsterService] Calculando stats básicos para ${f.name} (andar ${e})`);const j=f.level||Math.max(1,Math.floor(e/5)+1),w=f.tier||Math.max(1,Math.floor(e/20)+1);f.hp=f.hp||Math.floor(50+j*15+w*25),f.atk=f.atk||Math.floor(10+j*3+w*5),f.def=f.def||Math.floor(5+j*2+w*3),f.reward_xp=f.reward_xp||Math.floor(5+j*2+w*2),f.reward_gold=f.reward_gold||Math.floor(3+j*1+w*1)}console.log("[MonsterService] === MONSTRO ENCONTRADO ==="),console.log(`[MonsterService] ID: ${f.id}`),console.log(`[MonsterService] Nome: ${f.name}`),console.log(`[MonsterService] HP: ${f.hp}, ATK: ${f.atk}, DEF: ${f.def}`),console.log(`[MonsterService] Tier: ${f.tier||1}, Ciclo: ${f.cycle_position||"N/A"}, Boss: ${f.is_boss||!1}`),console.log(`[MonsterService] Level: ${f.level}, XP: ${f.reward_xp}, Gold: ${f.reward_gold}`),console.log(`[MonsterService] Buscando possible_drops para monstro ${f.id}...`);const{data:h,error:p}=await _e.from("monster_possible_drops").select(`
          drop_id,
          drop_chance,
          min_quantity,
          max_quantity,
          monster_drops:drop_id (
            id,
            name,
            description,
            rarity,
            value
          )
        `).eq("monster_id",f.id);p&&console.warn(`[MonsterService] Erro ao buscar drops do monstro ${f.id}:`,p);const g=(h||[]).map(j=>({drop_id:j.drop_id,drop_chance:j.drop_chance,min_quantity:j.min_quantity,max_quantity:j.max_quantity,drop_info:Array.isArray(j.monster_drops)?j.monster_drops[0]:j.monster_drops}));console.log(`[MonsterService] Encontrados ${g.length} possible_drops para ${f.name}`),g.forEach(j=>{var w;console.log(`[MonsterService] - ${((w=j.drop_info)==null?void 0:w.name)||"Drop desconhecido"} (chance: ${(j.drop_chance*100).toFixed(1)}%, qtd: ${j.min_quantity}-${j.max_quantity})`)});const x={id:f.id,name:f.name,hp:f.hp,atk:f.atk,def:f.def,mana:f.mana||0,speed:f.speed||10,behavior:f.behavior,min_floor:f.min_floor,reward_xp:f.reward_xp,reward_gold:f.reward_gold,level:f.level||Math.max(1,Math.floor(e/5)+1),possible_drops:g,tier:f.tier||1,base_tier:f.base_tier||1,cycle_position:f.cycle_position||(e-1)%20+1,is_boss:f.is_boss||!1,strength:f.strength,dexterity:f.dexterity,intelligence:f.intelligence,wisdom:f.wisdom,vitality:f.vitality,luck:f.luck,critical_chance:f.critical_chance,critical_damage:f.critical_damage,critical_resistance:f.critical_resistance,physical_resistance:f.physical_resistance,magical_resistance:f.magical_resistance,debuff_resistance:f.debuff_resistance,physical_vulnerability:f.physical_vulnerability,magical_vulnerability:f.magical_vulnerability,primary_trait:f.primary_trait,secondary_trait:f.secondary_trait,special_abilities:f.special_abilities||[]};console.log("[MonsterService] === MONSTRO PROCESSADO COM SUCESSO ==="),console.log(`[MonsterService] Retornando: ${x.name} (HP: ${x.hp}, ATK: ${x.atk}, DEF: ${x.def})`),console.log(`[MonsterService] Possible drops: ${((i=x.possible_drops)==null?void 0:i.length)||0} tipos`);const b=Date.now();return this.monsterCache.set(e,x),this.cacheExpiry.set(e,b+3e4),{data:x,error:null,success:!0}}catch(c){return console.error(`[MonsterService] EXCEÇÃO ao buscar monstro do servidor para andar ${e}:`,c),{data:null,error:c instanceof Error?c.message:"Erro ao buscar monstro do servidor",success:!1}}}static clearCache(){const e=Date.now();if(e-this.lastClearTime<this.MIN_CLEAR_INTERVAL){console.log(`[MonsterService] Cache clear throttled - última limpeza há ${e-this.lastClearTime}ms`);return}this.monsterCache.clear(),this.cacheExpiry.clear(),this.pendingRequests.clear(),this.lastClearTime=e,console.log("[MonsterService] Cache de monstros limpo")}static generateBasicMonster(e){const s=Math.max(1,Math.floor(e/5)+1),a=Math.max(1,Math.floor(e/20)+1),n=e%10===0,i=["Slime","Goblin","Orc","Skeleton","Wolf","Spider","Troll","Dragon","Demon","Lich"],c=Math.floor(e/2)%i.length,u=i[c],f=a>1?` Tier ${a}`:"",p=`${n?"Boss ":""}${u}${f}`,g=n?80:50,x=n?15:10,b=n?8:5,j=Math.floor(g+s*15+a*25),w=Math.floor(x+s*3+a*5),N=Math.floor(b+s*2+a*3),E=Math.floor(10+s*1+a*2),C=Math.floor((5+s*2+a*2)*(n?2.5:1)),S=Math.floor((3+s*1+a*1)*(n?2.5:1));return{id:`generated_${e}_${Date.now()}`,name:p,level:s,hp:j,atk:w,def:N,mana:Math.floor(20+s*5),speed:E,behavior:"balanced",min_floor:e,reward_xp:C,reward_gold:S,image:n?"👑":"👾",possible_drops:[],tier:a,base_tier:1,cycle_position:(e-1)%20+1,is_boss:n,strength:Math.floor(10+s*2),dexterity:Math.floor(10+s*1),intelligence:Math.floor(8+s*1),wisdom:Math.floor(8+s*1),vitality:Math.floor(12+s*2),luck:Math.floor(5+s),critical_chance:.05+s*.005,critical_damage:1.5+s*.05,critical_resistance:.1,physical_resistance:0,magical_resistance:0,debuff_resistance:0,physical_vulnerability:1,magical_vulnerability:1,primary_trait:n?"boss":"common",secondary_trait:"basic",special_abilities:n?["Boss Fury"]:[]}}static calculateDamage(e,s,a){let n=1,i=1;switch(e.behavior){case"aggressive":n=1.2,i=.8;break;case"defensive":n=.8,i=1.2;break;case"balanced":n=1,i=1;break}const c=s*n,u=a*i;return Math.max(1,Math.floor(c-u/2))}}ut(vr,"monsterCache",new Map),ut(vr,"cacheExpiry",new Map),ut(vr,"pendingRequests",new Map),ut(vr,"lastClearTime",0),ut(vr,"MIN_CLEAR_INTERVAL",1e3);class Qs{static clearCache(){const e=Date.now();if(e-this.lastClearTime<this.MIN_CLEAR_INTERVAL){console.log(`[FloorService] Cache clear throttled - última limpeza há ${e-this.lastClearTime}ms`);return}console.log("[FloorService] Limpando cache de andares"),this.floorCache.clear(),this.floorCacheExpiry.clear(),vr.clearCache(),this.lastClearTime=e,console.log("[FloorService] Cache limpo")}static generateBasicFloorData(e){let s="common";e%10===0?s="boss":e%5===0?s="elite":e%7===0&&(s="event");const a=e===1||e>10&&(e-1)%10===0,n=Math.max(1,Math.floor(e/2));let i="";switch(s){case"boss":i=`Covil do Chefe - Andar ${e}`;break;case"elite":i=`Domínio de Elite - Andar ${e}`;break;case"event":i=`Câmara de Eventos - Andar ${e}`;break;default:a?i=`Santuário Seguro - Andar ${e}`:i=`Corredor Sombrio - Andar ${e}`;break}return{floorNumber:e,type:s,isCheckpoint:a,minLevel:n,description:i}}static async getFloorData(e){var i,c;console.log(`[FloorService] Solicitando dados do andar ${e}`);const s=Date.now(),a=this.floorCache.get(e),n=this.floorCacheExpiry.get(e);if(a&&n&&s<n)return console.log(`[FloorService] Dados do andar ${e} obtidos do cache: ${a.description}`),a;try{console.log(`[FloorService] Buscando dados do andar ${e} do servidor`);const{data:u,error:f}=await _e.rpc("get_floor_data",{p_floor_number:e});if(f){if(console.error(`[FloorService] Erro na RPC get_floor_data para andar ${e}:`,f),(i=f.message)!=null&&i.includes("function")&&((c=f.message)!=null&&c.includes("does not exist"))){console.log("[FloorService] Função get_floor_data não existe, usando fallback");const x=this.generateBasicFloorData(e);return this.floorCache.set(e,x),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),x}console.log("[FloorService] Erro geral na RPC, usando fallback");const g=this.generateBasicFloorData(e);return this.floorCache.set(e,g),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),g}if(!u||Array.isArray(u)&&u.length===0)return console.error(`[FloorService] Nenhum dado encontrado para andar ${e}`),null;const h=Array.isArray(u)?u[0]:u;if(!h)return console.error(`[FloorService] Dados de andar vazios para andar ${e}`),null;const p={floorNumber:h.floor_number||e,type:h.type||"common",isCheckpoint:h.is_checkpoint||!1,minLevel:h.min_level||1,description:h.description||`Andar ${e}`};return console.log(`[FloorService] Dados do andar ${e} carregados: ${p.description} (tipo: ${p.type}, checkpoint: ${p.isCheckpoint})`),this.floorCache.set(e,p),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),p}catch(u){return console.error(`[FloorService] Exceção na função getFloorData para andar ${e}:`,u),null}}static calculateFloorRewards(e,s,a){let n=1;switch(a){case"boss":n=2.5;break;case"elite":n=1.8;break;case"event":n=1.2;break;case"common":default:n=1;break}return{xp:Math.floor(e*n),gold:Math.floor(s*n)}}static async processSpecialEventInteraction(e){const{currentSpecialEvent:s,player:a}=e;if(!s)return e;console.log(`[FloorService] Processando evento especial: ${s.name}`);let n=a.hp,i=a.mana,c=a.gold,u="";switch(s.type){case"magic_fountain":n=a.max_hp,i=a.max_mana,u="Você encontrou uma fonte mágica! HP e Mana foram restaurados completamente.";break;case"treasure_chest":{const f=Math.floor(Math.random()*50)+25;c+=f,u=`Você encontrou um baú do tesouro! Ganhou ${f} de ouro.`;break}case"bonfire":{const f=Math.floor(a.max_hp*.5);n=Math.min(a.max_hp,a.hp+f),u=`Você descansou numa fogueira acolhedora! Recuperou ${f} HP.`;break}default:u=`Você explorou o evento ${s.name}.`}return{...e,player:{...a,hp:n,mana:i,gold:c},gameMessage:u,currentSpecialEvent:null,mode:"battle"}}static async checkForSpecialEvent(e){var s,a;try{console.log(`[FloorService] Verificando eventos especiais para andar ${e}...`);const{data:n,error:i}=await _e.rpc("get_special_event_for_floor",{p_floor:e});return i?(s=i.message)!=null&&s.includes("function")&&((a=i.message)!=null&&a.includes("does not exist"))?(console.log("[FloorService] Função get_special_event_for_floor não existe - sem eventos especiais"),null):(console.warn("[FloorService] Erro ao buscar evento especial:",i),null):n?(console.log(`[FloorService] Evento especial encontrado: ${n.name}`),n):null}catch(n){return console.error("[FloorService] Erro ao verificar eventos especiais:",n),null}}}ut(Qs,"floorCache",new Map),ut(Qs,"floorCacheExpiry",new Map),ut(Qs,"FLOOR_CACHE_DURATION",1e4),ut(Qs,"lastClearTime",0),ut(Qs,"MIN_CLEAR_INTERVAL",1e3);class ya{static calculateAttackSkillXp(e,s){const a=[];if(!e)return a;const n=XL(e),i=HL(e),c=Math.max(1,Math.floor(s/10));if(n){const u=this.getWeaponSkill(n);if(u){let f=c;i?(f=Math.floor(f*1.25),a.push({skill:u,xp:f,reason:`Ataque com ${n.name} (Dual-wield)`,isOffHand:!1})):a.push({skill:u,xp:f,reason:`Ataque com ${n.name}`,isOffHand:!1})}}if(i&&e.off_hand){const u=this.getWeaponSkill(e.off_hand);if(u){const f=Math.floor(c*.75);a.push({skill:u,xp:f,reason:`Ataque com ${e.off_hand.name} (Mão secundária)`,isOffHand:!0})}}return a}static calculateDefenseSkillXp(e,s=0){const a=[];let n=Math.max(2,Math.floor(s/5));s<=0&&(n=3);let i="Ação de defesa";e&&GL(e)&&(n=Math.floor(n*2.5),i="Defesa com escudo equipado");const c=Math.max(1,Math.floor(n));return a.push({skill:is.DEFENSE_MASTERY,xp:c,reason:i,isOffHand:!1}),console.log(`[SkillXpService] XP de defesa calculado: ${c} (dano bloqueado: ${s})`),a}static calculateMagicSkillXp(e,s=0,a=0,n=null){var h;const i=[],c=Math.floor(e/2);let u=0;a>0?u=Math.floor(a/8):s>0&&(u=Math.floor(s/8));const f=Math.max(2,c+u);if(i.push({skill:is.MAGIC_MASTERY,xp:f,reason:`Uso de magia (${e} mana, ${a||s} efeito)`,isOffHand:!1}),((h=n==null?void 0:n.off_hand)==null?void 0:h.weapon_subtype)==="staff"){const p=Math.max(1,Math.floor(f*.2));i.push({skill:is.MAGIC_MASTERY,xp:p,reason:`Bônus por ${n.off_hand.name} (off-hand)`,isOffHand:!0})}return i}static getWeaponSkill(e){const s=e.name.toLowerCase();return s.includes("espada")||s.includes("sword")||s.includes("rapier")||s.includes("lâmina")?is.SWORD_MASTERY:s.includes("machado")||s.includes("axe")||s.includes("machadinha")?is.AXE_MASTERY:s.includes("martelo")||s.includes("mace")||s.includes("clava")||s.includes("maça")||s.includes("porrete")||s.includes("hammer")?is.BLUNT_MASTERY:s.includes("cajado")||s.includes("staff")||s.includes("varinha")||s.includes("orbe")||s.includes("bastão")||s.includes("cetro")?is.MAGIC_MASTERY:(s.includes("adaga")||s.includes("dagger")||s.includes("punhal")||s.includes("fang"),is.SWORD_MASTERY)}static async applySkillXp(e,s){const a=[],n=[];if(s.length===0)return{messages:a,skillLevelUps:n};console.log(`[SkillXpService] Aplicando ${s.length} ganhos de XP de habilidade para ${e}`);for(const i of s)try{const c=await tt.addSkillXp(e,i.skill,i.xp);if(c.success&&c.data){const u=this.getSkillDisplayName(i.skill),f=i.isOffHand?" (off-hand)":"";if(c.data.skill_leveled_up){const h=`🎉 ${u} subiu para nível ${c.data.new_skill_level}!${f}`;a.push(h),n.push({skill:i.skill,newLevel:c.data.new_skill_level}),console.log(`[SkillXpService] ${h}`)}else{const h=`+${i.xp} XP em ${u}${f}`;a.push(h),console.log(`[SkillXpService] ${h} (${i.reason})`)}}else console.error(`[SkillXpService] Erro ao aplicar XP de ${i.skill}:`,c.error)}catch(c){console.error(`[SkillXpService] Exceção ao aplicar XP de ${i.skill}:`,c)}return{messages:a,skillLevelUps:n}}static getSkillDisplayName(e){switch(e){case is.SWORD_MASTERY:return"Maestria em Espadas";case is.AXE_MASTERY:return"Maestria em Machados";case is.BLUNT_MASTERY:return"Maestria em Armas de Concussão";case is.DEFENSE_MASTERY:return"Maestria em Defesa";case is.MAGIC_MASTERY:return"Maestria em Magia";default:return e}}static calculateSkillDamageBonus(e){return Math.min(100,e*2)}static calculateSkillDefenseBonus(e){return Math.min(50,e*1)}static calculateManaEfficiency(e){return Math.min(40,e*1)}}class Zs{static clearCache(){this.spellCache.clear(),this.lastFetchTimestamp=0}static async getCharacterAvailableSpells(e){try{const{data:s,error:a}=await _e.rpc("get_character_available_spells",{p_character_id:e});return a?(console.error("Erro ao buscar magias disponíveis:",a),{data:null,error:a.message,success:!1}):{data:s.map(i=>({id:i.spell_id,name:i.name,description:i.description,effect_type:i.effect_type,mana_cost:i.mana_cost,cooldown:i.cooldown,effect_value:i.effect_value,duration:i.duration,unlocked_at_level:i.unlocked_at_level,is_equipped:i.is_equipped,slot_position:i.slot_position})),error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias disponíveis:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async setCharacterSpells(e,s){try{const a=s[0]||null,n=s[1]||null,i=s[2]||null,{error:c}=await _e.rpc("set_character_spells",{p_character_id:e,p_spell_1_id:a,p_spell_2_id:n,p_spell_3_id:i});return c?(console.error("Erro ao equipar magias:",c),{data:null,error:c.message,success:!1}):{data:null,error:null,success:!0}}catch(a){return console.error("Erro ao equipar magias:",a),{data:null,error:a instanceof Error?a.message:"Erro desconhecido",success:!1}}}static async getCharacterSpellStats(e){try{const{data:s,error:a}=await _e.rpc("get_character_spell_stats",{p_character_id:e});return a?(console.error("Erro ao buscar estatísticas de magias:",a),{data:null,error:a.message,success:!1}):{data:s[0]||{total_available:0,total_equipped:0,highest_level_unlocked:1,spells_by_type:{}},error:null,success:!0}}catch(s){return console.error("Erro ao buscar estatísticas de magias:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async getAvailableSpells(e){const s=Date.now();if(this.spellCache.has(e)&&s-this.lastFetchTimestamp<this.CACHE_DURATION)return{data:this.spellCache.get(e),error:null,success:!0};try{const{data:a,error:n}=await _e.rpc("get_available_spells",{p_level:e});return n?(console.error("Erro ao buscar magias:",n),{data:null,error:n.message,success:!1}):(this.spellCache.set(e,a||[]),this.lastFetchTimestamp=s,{data:a||[],error:null,success:!0})}catch(a){return console.error("Erro ao buscar magias:",a),{data:null,error:a instanceof Error?a.message:"Erro desconhecido",success:!1}}}static calculateScaledSpellDamage(e,s){if(!("intelligence"in s)||!("wisdom"in s)||!("magic_mastery"in s))return e;const a=s.intelligence||10,n=s.wisdom||10,i=s.magic_mastery||1,c=Math.pow(a,1.35)*1.8,u=Math.pow(n,1.2)*1.2,f=Math.pow(i,1.2)*2.5;let h=c+u+f;h>150&&(h=150+(h-150)*.6),h=Math.min(300,h);const p=Math.round(e*(1+h/100));return console.log("[SpellService] Cálculo de dano mágico ESPECIALIZADO:",{baseDamage:e,intelligence:a,wisdom:n,magicMastery:i,intScaling:`${c.toFixed(1)}%`,wisScaling:`${u.toFixed(1)}%`,masteryScaling:`${f.toFixed(1)}%`,totalBonus:`${h.toFixed(1)}%`,scaledDamage:p}),p}static calculateScaledSpellHealing(e,s){if(!("wisdom"in s)||!("magic_mastery"in s))return e;const a=s.wisdom||10,n=s.magic_mastery||1,i=Math.pow(a,1.3)*2.2,c=Math.pow(n,1.15)*1.8;let u=i+c;u>120&&(u=120+(u-120)*.5),u=Math.min(220,u);const f=Math.round(e*(1+u/100));return console.log("[SpellService] Cálculo de cura mágica ESPECIALIZADA:",{baseHealing:e,wisdom:a,magicMastery:n,wisScaling:`${i.toFixed(1)}%`,masteryScaling:`${c.toFixed(1)}%`,totalBonus:`${u.toFixed(1)}%`,scaledHealing:f}),f}static applySpellEffect(e,s,a){let n="",i=!0;switch(e.effect_type){case"damage":const c=this.calculateScaledSpellDamage(e.effect_value,s);a.hp=Math.max(0,a.hp-c),n=`${e.name} causou ${c} de dano mágico!`;break;case"heal":const u=this.calculateScaledSpellHealing(e.effect_value,s),f="max_hp"in a?a.max_hp:a.maxHp,h=a.hp;a.hp=Math.min(f,a.hp+u);const p=a.hp-h;n=`${e.name} restaurou ${p} HP!`;break;case"buff":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.buffs.push({type:"buff",value:g,duration:e.duration,source_spell:e.name});const x=this.getAttributeModificationsForSpell(e);if(x.length>0){a.active_effects.attribute_modifications||(a.active_effects.attribute_modifications=[]),a.active_effects.attribute_modifications.push(...x);const b=x.map(j=>`+${j.value}${j.type==="percentage"?"%":""} ${this.translateAttributeName(j.attribute)}`).join(", ");n=`${e.name} aumentou: ${b}!`}else n=`${e.name} aplicou um efeito benéfico (+${g})!`}else n=`${e.name} aplicou um efeito benéfico!`;break;case"debuff":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.debuffs.push({type:"debuff",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou um efeito prejudicial (-${g})!`}else n=`${e.name} aplicou um efeito prejudicial!`;break;case"dot":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.dots.push({type:"dot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou dano contínuo (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou dano contínuo!`;break;case"hot":if(a.active_effects){const g=this.calculateScaledSpellHealing(e.effect_value,s);a.active_effects.hots.push({type:"hot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou cura contínua (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou cura contínua!`;break;default:n=`${e.name} foi usado, mas não teve efeito!`,i=!1}return{message:n,success:i}}static processOverTimeEffects(e){const s=[];return"active_effects"in e&&e.active_effects&&(e.active_effects.dots.forEach((a,n)=>{e.hp=Math.max(0,e.hp-a.value),a.duration--,s.push(`${a.source_spell} causou ${a.value} de dano contínuo.`),a.duration<=0&&e.active_effects.dots.splice(n,1)}),e.active_effects.hots.forEach((a,n)=>{const i="max_hp"in e?e.max_hp:e.maxHp,c=e.hp;e.hp=Math.min(i,e.hp+a.value);const u=e.hp-c;a.duration--,u>0&&s.push(`${a.source_spell} restaurou ${u} HP.`),a.duration<=0&&e.active_effects.hots.splice(n,1)}),e.active_effects.attribute_modifications&&(e.active_effects.attribute_modifications=e.active_effects.attribute_modifications.filter(a=>(a.duration--,a.duration<=0?(s.push(`O efeito de ${a.source_spell} em ${this.translateAttributeName(a.attribute)} expirou.`),!1):!0)))),s}static updateSpellCooldowns(e){return e.player.spells.forEach(s=>{s.current_cooldown>0&&s.current_cooldown--}),e}static getSpellTypeIcon(e){return{damage:"⚔️",heal:"❤️",buff:"🛡️",debuff:"💀",dot:"🔥",hot:"✨"}[e]||"🔮"}static getSpellTypeColor(e){return{damage:"text-red-500",heal:"text-green-500",buff:"text-blue-500",debuff:"text-purple-500",dot:"text-orange-500",hot:"text-emerald-500"}[e]||"text-gray-500"}static translateEffectType(e){return{damage:"Dano",heal:"Cura",buff:"Benefício",debuff:"Maldição",dot:"Dano Contínuo",hot:"Cura Contínua"}[e]||e}static getAttributeModificationsForSpell(e){const s=[],a=Date.now(),n=e.name.toLowerCase();return(n.includes("força")||n.includes("strength")||n.includes("fortalecer"))&&s.push({attribute:"atk",value:Math.floor(e.effect_value*.5),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("velocidade")||n.includes("speed")||n.includes("agilidade"))&&s.push({attribute:"speed",value:Math.floor(e.effect_value*.3),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("defesa")||n.includes("defense")||n.includes("proteção"))&&s.push({attribute:"def",value:Math.floor(e.effect_value*.4),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("crítico")||n.includes("critical")||n.includes("precisão"))&&s.push({attribute:"critical_chance",value:Math.floor(e.effect_value*.2),type:"percentage",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("magia")||n.includes("magic")||n.includes("mystic"))&&s.push({attribute:"magic_attack",value:Math.floor(e.effect_value*.6),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),s}static translateAttributeName(e){return{atk:"Ataque",def:"Defesa",speed:"Velocidade",magic_attack:"Ataque Mágico",critical_chance:"Chance Crítica",critical_damage:"Dano Crítico"}[e]||e}static async getCharacterEquippedSpells(e){try{console.log(`[SpellService] Buscando magias equipadas para personagem: ${e}`);const{data:s,error:a}=await _e.from("character_spell_slots").select(`
          slot_position,
          spell_id,
          spell:spells(
            id,
            name,
            description,
            mana_cost,
            cooldown,
            effect_type,
            effect_value,
            duration,
            unlocked_at_level
          )
        `).eq("character_id",e).not("spell_id","is",null).order("slot_position");if(a)return console.error("Erro ao buscar magias equipadas:",a),{data:null,error:a.message,success:!1};console.log(`[SpellService] ${(s==null?void 0:s.length)||0} magias equipadas encontradas`);const n=(s||[]).map(i=>{const c=Array.isArray(i.spell)?i.spell[0]:i.spell;return{id:c.id,name:c.name,description:c.description,mana_cost:c.mana_cost,cooldown:c.cooldown,current_cooldown:0,effect_type:c.effect_type,effect_value:c.effect_value,duration:c.duration||0,unlocked_at_level:c.unlocked_at_level}});return console.log("[SpellService] Magias equipadas processadas:",n.map(i=>i.name)),{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias equipadas:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}}ut(Zs,"spellCache",new Map),ut(Zs,"lastFetchTimestamp",0),ut(Zs,"CACHE_DURATION",3e5);const R6=Object.freeze(Object.defineProperty({__proto__:null,SpellService:Zs},Symbol.toStringTag,{value:"Module"}));class Dh{static async killCharacter(e,s="Battle defeat",a){try{console.log(`[CemeteryService] Matando personagem ${e}:`,{deathCause:s,killedByMonster:a});const{data:n,error:i}=await _e.rpc("kill_character",{p_character_id:e,p_death_cause:s,p_killed_by_monster:a||null});if(i)throw console.error("[CemeteryService] Erro ao matar personagem:",i),i;return console.log(`[CemeteryService] Personagem ${e} morto com sucesso, ID no cemitério: ${n}`),{success:!0,data:n,error:null}}catch(n){return console.error("[CemeteryService] Erro crítico ao matar personagem:",n),{success:!1,data:null,error:n instanceof Error?n.message:"Erro desconhecido ao matar personagem"}}}static async getUserCemetery(e,s={}){try{const{page:a=1,limit:n=10}=s,i=(a-1)*n,{data:c,error:u}=await _e.rpc("get_user_cemetery",{p_user_id:e,p_limit:n,p_offset:i});if(u)throw u;const{data:f,error:h}=await _e.rpc("count_user_cemetery",{p_user_id:e});if(h)throw h;const{data:p,error:g}=await _e.rpc("get_cemetery_stats",{p_user_id:e});if(g)throw g;const x=c,b=f,j=(p==null?void 0:p[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},w=i+x.length<b;return{success:!0,data:{characters:x,total:b,stats:j,hasMore:w},error:null}}catch(a){return console.error("[CemeteryService] Erro ao buscar cemitério:",a),{success:!1,data:null,error:a instanceof Error?a.message:"Erro ao buscar cemitério"}}}static async getCemeteryStats(e){try{const{data:s,error:a}=await _e.rpc("get_cemetery_stats",{p_user_id:e});if(a)throw a;return{success:!0,data:(s==null?void 0:s[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},error:null}}catch(s){return console.error("[CemeteryService] Erro ao buscar estatísticas do cemitério:",s),{success:!1,data:null,error:s instanceof Error?s.message:"Erro ao buscar estatísticas"}}}static async hasCemetery(e){try{const{data:s,error:a}=await _e.rpc("count_user_cemetery",{p_user_id:e});if(a)throw a;return{success:!0,data:s>0,error:null}}catch(s){return console.error("[CemeteryService] Erro ao verificar cemitério:",s),{success:!1,data:!1,error:s instanceof Error?s.message:"Erro ao verificar cemitério"}}}static formatSurvivalTime(e){if(e<60)return`${e} min`;if(e<1440){const s=Math.floor(e/60),a=e%60;return a>0?`${s}h ${a}min`:`${s}h`}else{const s=Math.floor(e/1440),a=Math.floor(e%1440/60);return a>0?`${s}d ${a}h`:`${s}d`}}static formatDeathCause(e,s){switch(e){case"Battle defeat":return s?`Morto por ${s}`:"Morto em batalha";case"Player quit":return"Abandonou a jornada";case"System error":return"Erro do sistema";default:return e}}}class Ll{static calculateInitiative(e,s){const a=e,n=Math.floor(s*.5),i=.9+Math.random()*.2,c=Math.floor((a+n)*i);return Math.max(1,c)}static calculateExtraTurns(e,s){if(s<=0)return 2;const a=e/s;let n=0;return a>=3.5?n=3:a>=2.5?n=2:a>=1.8&&(n=1),n<3&&Math.random()<.2&&(n+=1),Math.min(n,3)}static calculateDamage(e,s,a=0,n=110,i=0,c=10,u=10){const f=Number(e)||0,h=Number(s)||0;if(f<=0)return{damage:1,isCritical:!1,isDoubleAttack:!1,totalAttacks:1,damageBreakdown:"Dano mínimo: 1"};const p=Math.max(1,Math.floor(f-h*.5)),x=Math.random()*100<a,b=i+Math.floor((c-10)*.5)+Math.floor((u-10)*.3),w=Math.random()*100<Math.min(35,b);let N=p,E=`Base: ${p}`;if(x){const S=n/100;N=Math.floor(N*S),E+=` → Crítico (${n}%): ${N}`}let C=1;return w&&(N=N*2,C=2,E+=` → Duplo Ataque (DEX: ${c}, SPD: ${u}): ${N}`),{damage:N,isCritical:x,isDoubleAttack:w,totalAttacks:C,damageBreakdown:E}}static async processPlayerAction(e,s,a,n){console.log(`[BattleService] Processando ação do jogador: ${e}`);const i={...s},c=[],u=[],f=[];let h=!1,p="",g=0;switch(e){case"attack":if(i.currentEnemy&&i.currentEnemy.hp>0){const x=await this.getPlayerEquipmentSlots(i.player.id),b=this.calculateDamage(i.player.atk,i.currentEnemy.defense,i.player.critical_chance||0,i.player.critical_damage||110,i.player.double_attack_chance||0,i.player.dexterity||10,i.player.speed||10);g=b.damage;const j=b.isCritical,w=b.isDoubleAttack;i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-g),i.player.isDefending&&(i.player.isDefending=!1);let N=`${i.player.name} atacou ${i.currentEnemy.name}`;if(w&&(N+=" com ataque duplo"),j&&(N+=" CRITICAMENTE"),N+=` causando ${g} de dano!`,c.push({message:N,type:"player_action"}),x){console.log(`[BattleService] Calculando skill XP para ataque com dano ${g}`);const E=ya.calculateAttackSkillXp(x,g);if(E.length>0){u.push(...E);try{const{messages:C,skillLevelUps:S}=await ya.applySkillXp(i.player.id,E);for(const P of C)c.push({message:P,type:"skill_xp"});f.push(...C);for(const P of S)console.log(`[BattleService] Skill level up: ${P.skill} -> ${P.newLevel}`)}catch(C){console.error("[BattleService] Erro ao aplicar skill XP de ataque:",C)}}}i.currentEnemy.hp<=0?(c.push({message:`${i.currentEnemy.name} foi derrotado!`,type:"system"}),p=`Você derrotou ${i.currentEnemy.name}!`):p=N}break;case"defend":if(i.player.defenseCooldown===0){i.player.isDefending=!0,i.player.defenseCooldown=3;const x=`${i.player.name} assumiu postura defensiva.`;c.push({message:x,type:"player_action"});const b=await this.getPlayerEquipmentSlots(i.player.id);if(b){const j=ya.calculateDefenseSkillXp(b,0);if(j.length>0){u.push(...j);try{const{messages:w}=await ya.applySkillXp(i.player.id,j);for(const N of w)c.push({message:N,type:"skill_xp"});f.push(...w)}catch(w){console.error("[BattleService] Erro ao aplicar skill XP de defesa:",w)}}}p=x}else p=`Defesa está em cooldown por mais ${i.player.defenseCooldown} turnos.`,h=!0;break;case"spell":if(a){const x=i.player.spells.find(b=>b.id===a);if(x&&i.player.mana>=x.mana_cost&&x.current_cooldown===0){i.player.mana=Math.max(0,i.player.mana-x.mana_cost),x.current_cooldown=x.cooldown;let b="",j=0;if(x.effect_type==="damage"&&i.currentEnemy){let C=x.effect_value;if(i.player.magic_attack&&(C+=Math.floor(i.player.magic_attack*.5)),i.player.magic_mastery&&i.player.magic_mastery>1){const S=Math.floor(C*(i.player.magic_mastery-1)*.1);C+=S}j=C,i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-C),b=`causando ${C} de dano mágico`,i.currentEnemy.hp<=0&&(b+=` e derrotando ${i.currentEnemy.name}`)}else if(x.effect_type==="heal"){let C=x.effect_value;if(i.player.magic_attack&&(C+=Math.floor(i.player.magic_attack*.3)),i.player.magic_mastery&&i.player.magic_mastery>1){const S=Math.floor(C*(i.player.magic_mastery-1)*.1);C+=S}j=C,i.player.hp=Math.min(i.player.max_hp,i.player.hp+C),b=`restaurando ${C} de vida`}const w=`${i.player.name} lançou ${x.name} ${b}!`;c.push({message:w,type:"player_action"});const N=await this.getPlayerEquipmentSlots(i.player.id),E=ya.calculateMagicSkillXp(x.mana_cost,x.effect_type==="damage"?j:0,j,N);if(E.length>0){u.push(...E);try{const{messages:C}=await ya.applySkillXp(i.player.id,E);for(const S of C)c.push({message:S,type:"skill_xp"});f.push(...C)}catch(C){console.error("[BattleService] Erro ao aplicar skill XP de magia:",C)}}p=w}else p="Não é possível usar esta magia agora.",h=!0}break;case"flee":return this.processFleeResult(s);case"consumable":if(n)try{const{ConsumableService:x}=await ws(async()=>{const{ConsumableService:j}=await Promise.resolve().then(()=>M6);return{ConsumableService:j}},void 0),b=await x.consumeItem(i.player.id,n,i.player);b.success&&b.data?(p=b.data.message,c.push({message:b.data.message,type:"player_action"}),h=!1,console.log("[BattleService] Poção usada com sucesso - turno NÃO consumido")):(p=b.error||"Erro ao usar item consumível.",h=!0)}catch(x){console.error("[BattleService] Erro ao usar consumível:",x),p="Erro ao usar item consumível.",h=!0}else p="Item consumível não especificado.",h=!0;break;case"special":p="Habilidade especial ainda não implementada.",h=!0;break;case"continue":try{console.log("[BattleService] Processando ação de continuar para próximo andar");const{GameService:x}=await ws(async()=>{const{GameService:j}=await Promise.resolve().then(()=>YN);return{GameService:j}},void 0),b=await x.advanceToNextFloor(i);Object.assign(i,b),p=b.gameMessage||"Avançando para o próximo andar...",console.log(`[BattleService] Avanço processado - novo andar: ${b.player.floor}`),h=!1}catch(x){console.error("[BattleService] Erro ao avançar para próximo andar:",x),p="Erro ao avançar para o próximo andar",h=!0}break;case"interact_event":try{console.log("[BattleService] Processando interação com evento especial");const{GameService:x}=await ws(async()=>{const{GameService:j}=await Promise.resolve().then(()=>YN);return{GameService:j}},void 0),b=await x.processSpecialEventInteraction(i);Object.assign(i,b),p=b.gameMessage||"Evento especial processado com sucesso!",console.log(`[BattleService] Evento especial processado - novo modo: ${b.mode}`),h=!1}catch(x){console.error("[BattleService] Erro ao processar evento especial:",x),p="Erro ao processar evento especial",h=!0}break;default:p="Ação não reconhecida.",h=!0;break}return i.player.defenseCooldown>0&&i.player.defenseCooldown--,e!=="consumable"&&(i.player.potionUsedThisTurn=!1),console.log(`[BattleService] Ação processada: ${e}, mensagem: ${p}`),console.log(`[BattleService] skipTurn FINAL: ${h} (poções nunca consomem turno)`),console.log("[BattleService] Skill XP gains:",u.length),{newState:i,skipTurn:h,message:p,skillXpGains:u,skillMessages:f,gameLogMessages:c}}static async processFleeResult(e){const s=await this.processFleeAttempt(e);return{newState:s,skipTurn:s.fleeSuccessful||!1,message:s.gameMessage||"Tentativa de fuga processada",skillXpGains:[],skillMessages:[],gameLogMessages:[]}}static async getPlayerEquipmentSlots(e){try{return await Ft.getEquippedItems(e)}catch(s){return console.error("[BattleService] Erro ao obter equipamentos do jogador:",s),null}}static async processPlayerDeath(e,s,a,n){try{return(await Dh.killCharacter(s.id,"Battle defeat",a.name)).success?{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado! Seu personagem foi perdido permanentemente.`,characterDeleted:!0}:{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado!`}}catch(i){return console.error("[BattleService] Erro crítico ao processar morte:",i),{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Você foi derrotado!`}}}static async processFleeAttempt(e){const{player:s,currentEnemy:a}=e;if(!a)return e;const n=s.speed||10,i=a.speed||10,c=n-i;let f=70+Math.floor(c*2);if(f=Math.max(15,Math.min(95,f)),Math.random()*100<f)return{...e,fleeSuccessful:!0,currentEnemy:null,mode:"fled",battleRewards:null,isPlayerTurn:!0,gameMessage:`${s.name} fugiu da batalha com sucesso!`};{const g=Math.floor((a.attack||10)*.3),x=Math.max(0,s.hp-g);return x<=0?this.processPlayerDeath(e,s,a,`${s.name} tentou fugir mas falhou!`):{...e,player:{...s,hp:x},fleeSuccessful:!1,gameMessage:`${s.name} tentou fugir mas falhou! Sofreu ${g} de dano.`}}}static async processEnemyAction(e,s){if(!e.currentEnemy||e.currentEnemy.hp<=0)return{newState:{...e,isPlayerTurn:!0}};const a=e.currentEnemy,n=e.player,i=[];if(console.log("[BattleService] === PROCESSANDO AÇÃO DO INIMIGO ==="),console.log(`[BattleService] Inimigo: ${a.name} (HP: ${a.hp}/${a.maxHp})`),Zs.processOverTimeEffects(a),a.hp<=0)return console.log("[BattleService] Inimigo morreu por efeitos ao longo do tempo"),{newState:{...e,isPlayerTurn:!0,gameMessage:`${a.name} foi derrotado por efeitos ao longo do tempo!`}};let c="attack";const u=a.special_abilities&&a.special_abilities.length>0,f=(a.intelligence||10)>(a.strength||10);let h=.15,p=.2;switch(a.behavior){case"aggressive":h=.25,p=.1;break;case"defensive":h=.3,p=.15;break;case"balanced":f?(p=.35,h=.2):(p=.2,h=.2);break}u&&(h+=.1),u&&Math.random()<h?c="special":a.mana>=10&&Math.random()<p&&(c="spell"),console.log(`[BattleService] Ação escolhida: ${c} (special: ${h}, spell: ${p})`);let g="",x=0,b=0;switch(c){case"attack":{console.log("[BattleService] Executando ataque físico");const j=this.calculateDamage(a.attack,n.def,a.critical_chance||0,a.critical_damage||110,0,a.dexterity||10,a.speed||10);if(x=j.damage,n.isDefending||s){b=Math.floor(x*.15);let S=`${a.name} atacou`;j.isCritical&&(S+=" com golpe crítico"),j.isDoubleAttack&&(S+=` ${j.totalAttacks}x`),S+=`, mas você reduziu o dano de ${x} para ${b} com sua defesa!`,g=S;try{const P=x-b,R=ya.calculateDefenseSkillXp(null,P);i.push(...R),console.log("[BattleService] XP de defesa por bloqueio:",R)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa:",P)}}else{b=x;let S=`${a.name} atacou`;j.isCritical&&(S+=" com golpe crítico"),j.isDoubleAttack&&(S+=` ${j.totalAttacks}x`),S+=` e causou ${b} de dano!`,g=S;try{const P=ya.calculateDefenseSkillXp(null,Math.floor(b*.3));i.push(...P),console.log("[BattleService] XP de defesa passiva:",P)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa passiva:",P)}}const w=Math.max(0,n.hp-b);if(w<=0)return console.log(`[BattleService] Jogador ${n.name} morreu - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const N={...e,player:{...n,hp:w,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},E=i.length>0?i.map(S=>`+${S.xp} XP em ${ya.getSkillDisplayName(S.skill)}`):void 0,C=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Ataque processado com sucesso. Mensagem: ${g}`),{newState:C,skillXpGains:i,skillMessages:E}}case"spell":{console.log("[BattleService] Executando magia");const j=Math.floor(a.attack*1.2),w=10;if(n.isDefending||s){b=Math.floor(j*.15),g=`${a.name} lançou uma magia, mas você reduziu o dano de ${j} para ${b} com sua defesa!`;try{const R=await Ft.getEquippedItems(n.id)||null,D=Math.floor((j-b)*.5),$=ya.calculateDefenseSkillXp(R,D);i.push(...$)}catch(P){console.warn("[BattleService] Erro ao calcular XP de defesa mágica:",P)}}else b=j,g=`${a.name} lançou uma magia e causou ${b} de dano mágico!`;const N=Math.max(0,n.hp-b);if(N<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por magia - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const E={...e,player:{...n,hp:N,isDefending:!1,potionUsedThisTurn:!1},currentEnemy:{...a,mana:Math.max(0,a.mana-w)},isPlayerTurn:!0,gameMessage:g},C=i.length>0?i.map(P=>`+${P.xp} XP em ${ya.getSkillDisplayName(P.skill)}`):void 0,S=Zs.updateSpellCooldowns(E);return console.log(`[BattleService] Magia processada com sucesso. Mensagem: ${g}`),{newState:S,skillXpGains:i,skillMessages:C}}case"special":{const j=a.special_abilities||[];if(j.length>0){const S=j[Math.floor(Math.random()*j.length)],P=S.split(":")[0].trim();if(S.includes("Regenera")||S.includes("Recupera")||S.includes("cura")){const R=Math.floor(a.maxHp*(.1+Math.random()*.15)),D=Math.min(a.maxHp,a.hp+R),$={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...a,hp:D},isPlayerTurn:!0,gameMessage:`${a.name} usou ${P} e recuperou ${R} HP!`};return{newState:Zs.updateSpellCooldowns($)}}else S.includes("dano")||S.includes("ATK")||S.includes("Ataque")?(x=Math.floor(a.attack*(1.3+Math.random()*.7)),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${P} e causou ${b} de dano!`):S.includes("crítico")||S.includes("Crítico")?(x=Math.floor(a.attack*2),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${P} com um golpe crítico devastador! ${b} de dano!`):S.includes("área")||S.includes("todos")?(x=Math.floor(a.attack*1.2),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${P} em área! ${b} de dano!`):(x=Math.floor(a.attack*(1.2+Math.random()*.5)),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${P}! ${b} de dano!`)}else switch(a.behavior){case"aggressive":{x=Math.floor(a.attack*1.5),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou Ataque Furioso e causou ${b} de dano!`;break}case"defensive":{const S=Math.floor(a.maxHp*.15),P=Math.min(a.maxHp,a.hp+S),R={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...a,hp:P},isPlayerTurn:!0,gameMessage:`${a.name} se concentrou e recuperou ${S} HP!`};return{newState:Zs.updateSpellCooldowns(R)}}default:x=Math.floor(a.attack*1.3),b=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou uma habilidade especial e causou ${b} de dano!`}if(b>0)try{const P=await Ft.getEquippedItems(n.id)||null;if(n.isDefending||s){const R=x-b,D=ya.calculateDefenseSkillXp(P,R);i.push(...D)}else{const R=ya.calculateDefenseSkillXp(P,Math.floor(b*.2));i.push(...R)}}catch(S){console.warn("[BattleService] Erro ao calcular XP de defesa especial:",S)}const w=Math.max(0,n.hp-b);if(w<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por habilidade especial - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const N={...e,player:{...n,hp:w,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},E=i.length>0?i.map(S=>`+${S.xp} XP em ${ya.getSkillDisplayName(S.skill)}`):void 0,C=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Habilidade especial processada com sucesso. Mensagem: ${g}`),{newState:C,skillXpGains:i,skillMessages:E}}default:{console.log(`[BattleService] ERRO: Ação desconhecida: ${c}`);const j={...e,player:{...e.player,potionUsedThisTurn:!1},isPlayerTurn:!0};return{newState:Zs.updateSpellCooldowns(j)}}}}}function Pu(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class zt{static async getAvailableConsumables(){try{const e=Date.now();if(e-this.lastFetchTimestamp<this.CACHE_DURATION&&this.consumableCache.size>0)return{data:Array.from(this.consumableCache.values()),error:null,success:!0};const{data:s,error:a}=await _e.from("consumables").select("*").order("price");if(a)throw a;return this.consumableCache.clear(),s.forEach(n=>{this.consumableCache.set(n.id,n)}),this.lastFetchTimestamp=e,{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar consumíveis:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar consumíveis",success:!1}}}static async getCharacterConsumables(e){try{const{data:s,error:a}=await _e.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e);if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar consumíveis do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar consumíveis do personagem",success:!1}}}static async buyConsumable(e,s,a=1){try{const{data:n,error:i}=await _e.rpc("buy_consumable",{p_character_id:e,p_consumable_id:s,p_quantity:a}).single();if(i)throw i;return{data:{newGold:n},error:null,success:!0}}catch(n){return console.error("Erro ao comprar consumível:",n),{data:null,error:Pu(n,"Erro ao comprar consumível"),success:!1}}}static async consumeItem(e,s,a){try{const{data:n,error:i}=await _e.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e).eq("consumable_id",s).single();if(i)throw i;const c=n;if(!c||c.quantity<=0)return{data:null,error:"Você não possui este item",success:!1};const u=c.consumable;let f="";const h={};switch(u.type){case"potion":if(u.description.includes("HP")||u.description.includes("Vida")){const g=a.hp,x=Math.min(a.max_hp,a.hp+u.effect_value),b=x-g;a.hp=x,h.hp=x,f=b>0?`Recuperou ${b} HP!`:"HP já estava no máximo!"}else if(u.description.includes("Mana")){const g=a.mana,x=Math.min(a.max_mana,a.mana+u.effect_value),b=x-g;a.mana=x,h.mana=x,f=b>0?`Recuperou ${b} Mana!`:"Mana já estava no máximo!"}break;case"antidote":"active_effects"in a?(a.active_effects.debuffs=[],a.active_effects.dots=[],f="Todos os efeitos negativos foram removidos!"):f="Antídoto só pode ser usado durante batalhas!";break;case"buff":"active_effects"in a?u.description.includes("Força")||u.description.includes("ataque")?(a.atk+=u.effect_value,a.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_strength"}),f=`Ataque aumentado em ${u.effect_value} por 3 turnos!`):(u.description.includes("Defesa")||u.description.includes("defesa"))&&(a.def+=u.effect_value,a.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_defense"}),f=`Defesa aumentada em ${u.effect_value} por 3 turnos!`):f="Elixires só podem ser usados durante batalhas!";break}const{error:p}=await _e.rpc("use_consumable",{p_character_id:e,p_consumable_id:s});if(p)throw p;if(Object.keys(h).length>0){const{error:g}=await _e.from("characters").update(h).eq("id",e);if(g)throw g}return{data:{message:f},error:null,success:!0}}catch(n){return console.error("Erro ao usar consumível:",n),{data:null,error:Pu(n,"Erro ao usar consumível"),success:!1}}}static async getMonsterDrops(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.dropCache.size>0)return{data:Array.from(this.dropCache.values()),error:null,success:!0};const{data:s,error:a}=await _e.from("monster_drops").select("*").order("rarity");if(a)throw a;return this.dropCache.clear(),s.forEach(n=>{this.dropCache.set(n.id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar drops:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar drops",success:!1}}}static processMonsterDrops(e,s,a=1){const n=[];return s.forEach(i=>{const c=i.drop_chance*(1+e*.02)*a;if(Math.random()<=Math.min(.95,c)){const u=Math.floor(Math.random()*(i.max_quantity-i.min_quantity+1)+i.min_quantity);u>0&&n.push({drop_id:i.drop_id,quantity:u})}}),n}static async addDropsToInventory(e,s){try{if(s.length===0)return{data:0,error:null,success:!0};const a=s.map(f=>({drop_id:f.drop_id,quantity:f.quantity}));console.log(`[ConsumableService] Processando ${s.length} drops via função segura`);const{supabaseAdmin:n}=await ws(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>od);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_process_combat_drops",{p_character_id:e,p_drops:a}).single();if(c)throw console.error("Erro na função secure_process_combat_drops:",c),c;const u=i;return console.log(`[ConsumableService] ${u} drops processados com sucesso`),{data:u,error:null,success:!0}}catch(a){return console.error("Erro ao processar drops:",a),{data:null,error:Pu(a,"Erro ao processar drops"),success:!1}}}static async getCraftingRecipes(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.recipeCache.size>0)return{data:Array.from(this.recipeCache.values()),error:null,success:!0};const{data:s,error:a}=await _e.from("crafting_recipes").select(`
          *,
          ingredients:crafting_ingredients (*)
        `);if(a)throw a;return this.recipeCache.clear(),s.forEach(n=>{this.recipeCache.set(n.result_id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas",success:!1}}}static async canCraftItem(e,s){try{const{data:a,error:n}=await _e.rpc("check_can_craft",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar crafting:",a),{data:null,error:Pu(a,"Erro ao verificar crafting"),success:!1}}}static async craftItem(e,s){try{const{error:a}=await _e.rpc("craft_item",{p_character_id:e,p_recipe_id:s});if(a)throw a;return{data:{message:"Item criado com sucesso!"},error:null,success:!0}}catch(a){return console.error("Erro ao criar item:",a),{data:null,error:Pu(a,"Erro ao criar item"),success:!1}}}static async getCharacterDrops(e){try{const{data:s,error:a}=await _e.from("character_drops").select(`
          *,
          drop:drop_id (*)
        `).eq("character_id",e);if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar drops do personagem",success:!1}}}static async checkIngredients(e,s){var a,n;try{const i=[];let c=!0;const[u,f]=await Promise.all([this.getCharacterConsumables(e),this.getCharacterDrops(e)]),h=u.success?u.data:[],p=f.success?f.data:[];for(const g of s)if(g.item_type==="monster_drop"){const x=p==null?void 0:p.find(b=>b.drop_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const b=((a=x==null?void 0:x.drop)==null?void 0:a.name)||"Item desconhecido";i.push(b)}}else if(g.item_type==="consumable"){const x=h==null?void 0:h.find(b=>b.consumable_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const b=((n=x==null?void 0:x.consumable)==null?void 0:n.name)||"Item desconhecido";i.push(b)}}return{data:{hasAll:c,missing:i},error:null,success:!0}}catch(i){return console.error("Erro ao verificar ingredientes:",i instanceof Error?i.message:i),{data:null,error:"Erro ao verificar ingredientes",success:!1}}}static async getDropInfoByIds(e){try{if(e.length===0)return{data:[],error:null,success:!0};const{data:s,error:a}=await _e.from("monster_drops").select("id, name, description, rarity, value").in("id",e);return a?(console.error("Erro ao buscar informações dos drops:",a),{data:null,error:a.message,success:!1}):{data:s||[],error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar informações dos drops",success:!1}}}}ut(zt,"consumableCache",new Map),ut(zt,"dropCache",new Map),ut(zt,"recipeCache",new Map),ut(zt,"lastFetchTimestamp",0),ut(zt,"CACHE_DURATION",3e5);const M6=Object.freeze(Object.defineProperty({__proto__:null,ConsumableService:zt},Symbol.toStringTag,{value:"Module"}));class P6{static async loadPlayerForGame(e){try{const s=await tt.getCharacterForGame(e);if(!s.success||!s.data)throw new Error(s.error||"Personagem não encontrado");const a=s.data,n=await Zs.getCharacterEquippedSpells(e),i=n.success&&n.data?n.data:[];console.log("[GameStateService] Carregando consumíveis para personagem:",e);const c=await zt.getCharacterConsumables(e);console.log("[GameStateService] Resposta dos consumíveis:",c);const u=c.success&&c.data?c.data.map(f=>({...f,consumable:f.consumable||null})).filter(f=>f.quantity>0):[];return console.log("[GameStateService] Consumíveis carregados:",u.length),{...a,spells:i,consumables:u,active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}}}catch(s){throw console.error("[GameStateService] Erro ao carregar personagem para o jogo:",s),s}}static async saveGameProgress(e,s){const{player:a,currentFloor:n}=e,i={user_id:s,player_name:a.name,current_floor:a.floor,hp:a.hp,max_hp:a.max_hp,atk:a.atk,def:a.def,highest_floor:Math.max(a.floor,(n==null?void 0:n.floorNumber)||1)};try{const{error:c}=await _e.from("game_progress").upsert(i).select();return c?(console.error("[GameStateService] Erro ao salvar progresso:",c),{success:!1,error:c.message}):{success:!0}}catch(c){return console.error("[GameStateService] Erro geral ao salvar:",c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido"}}}static async loadGameProgress(e){try{const{data:s,error:a}=await _e.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return a?(console.error("[GameStateService] Erro ao carregar progresso:",a),{success:!1,error:a.message}):{success:!0,data:s[0]||void 0}}catch(s){return console.error("[GameStateService] Erro geral ao carregar:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}static convertMonsterToEnemy(e,s){return{id:e.id,name:e.name,level:e.level||Math.max(1,Math.floor(s/5)+1),hp:e.hp,maxHp:e.hp,attack:e.atk,defense:e.def,speed:e.speed||10,image:e.image||"👾",behavior:e.behavior||"balanced",mana:e.mana||0,reward_xp:e.reward_xp,reward_gold:e.reward_gold,possible_drops:e.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:e.tier,base_tier:e.base_tier,cycle_position:e.cycle_position,is_boss:e.is_boss,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,critical_chance:e.critical_chance,critical_damage:e.critical_damage,critical_resistance:e.critical_resistance,physical_resistance:e.physical_resistance,magical_resistance:e.magical_resistance,debuff_resistance:e.debuff_resistance,physical_vulnerability:e.physical_vulnerability,magical_vulnerability:e.magical_vulnerability,primary_trait:e.primary_trait,secondary_trait:e.secondary_trait,special_abilities:e.special_abilities||[]}}static async advanceToNextFloor(e){const{player:s}=e,a=s.floor+1;console.log(`[GameStateService] Avançando do andar ${s.floor} para ${a}`);try{Qs.clearCache(),vr.clearCache(),console.log("[GameStateService] === ATUALIZANDO ANDAR NO BANCO ===");const n=await tt.updateCharacterFloor(s.id,a);if(!n.success)throw new Error(n.error||"Erro ao atualizar andar do personagem");const i=await Qs.getFloorData(a);if(!i)throw new Error(`Erro ao gerar dados do andar ${a}`);const c=await vr.getMonsterForFloor(a);if(!c.success||!c.data)throw new Error(`Falha ao gerar inimigo para o andar ${a}: ${c.error}`);const u=this.convertMonsterToEnemy(c.data,a),f=await Qs.checkForSpecialEvent(a);return{...e,mode:f?"special_event":"battle",player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:i,currentEnemy:f?null:u,currentSpecialEvent:f,gameMessage:f?`Evento especial encontrado: ${f.name}!`:`Andar ${a}: ${i.description}. Um ${u.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,a)}}catch(n){console.error(`[GameStateService] Erro crítico ao avançar para andar ${a}:`,n);try{const i=await vr.getMonsterForFloor(a);if(!i.success||!i.data)throw new Error(`Não foi possível gerar inimigo para o andar ${a}`);const c=this.convertMonsterToEnemy(i.data,a),u={floorNumber:a,type:"common",isCheckpoint:a%10===0,minLevel:Math.max(1,Math.floor(a/5)),description:`Andar ${a} - Área Desconhecida`};return{...e,player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:u,currentEnemy:c,currentSpecialEvent:null,gameMessage:`Andar ${a}: ${u.description}. Um ${c.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(i){return console.error("[GameStateService] Falha ao criar estado de fallback:",i),{...e,gameMessage:`Erro crítico ao avançar para o andar ${a}: ${n instanceof Error?n.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}}class Da{static clearAllCaches(){console.log("[GameService] Limpando todos os caches"),Qs.clearCache(),vr.clearCache(),console.log("[GameService] Todos os caches foram limpos")}static async generateEnemy(e){try{console.log(`[GameService] Iniciando geração de inimigo para andar ${e}`);const{data:s,error:a,success:n}=await vr.getMonsterForFloor(e);if(!n||a||!s)throw console.error(`[GameService] Erro ao buscar monstro para andar ${e}:`,a),new Error(`Nenhum monstro encontrado para o andar ${e}: ${a}`);if(!s.name||!s.hp||!s.atk||!s.def)throw console.error(`[GameService] Dados de monstro incompletos para andar ${e}:`,s),new Error(`Dados de monstro incompletos para o andar ${e}`);const i={id:s.id,name:s.name,level:s.level||Math.max(1,Math.floor(e/5)+1),hp:s.hp,maxHp:s.hp,attack:s.atk,defense:s.def,speed:s.speed||10,image:s.image||"👾",behavior:s.behavior||"balanced",mana:s.mana||0,reward_xp:s.reward_xp,reward_gold:s.reward_gold,possible_drops:s.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:s.tier,base_tier:s.base_tier,cycle_position:s.cycle_position,is_boss:s.is_boss,strength:s.strength,dexterity:s.dexterity,intelligence:s.intelligence,wisdom:s.wisdom,vitality:s.vitality,luck:s.luck,critical_chance:s.critical_chance,critical_damage:s.critical_damage,critical_resistance:s.critical_resistance,physical_resistance:s.physical_resistance,magical_resistance:s.magical_resistance,debuff_resistance:s.debuff_resistance,physical_vulnerability:s.physical_vulnerability,magical_vulnerability:s.magical_vulnerability,primary_trait:s.primary_trait,secondary_trait:s.secondary_trait,special_abilities:s.special_abilities||[]};return console.log(`[GameService] Monstro real gerado: ${i.name} (Tier ${i.tier||1}, Pos ${i.cycle_position||"N/A"})`),console.log(`[GameService] Stats: HP: ${i.hp}/${i.maxHp}, ATK: ${i.attack}, DEF: ${i.defense}, Boss: ${i.is_boss?"SIM":"NÃO"}`),i}catch(s){return console.error(`[GameService] Erro ao gerar inimigo para andar ${e}:`,s),null}}static async saveGameProgress(e,s){const{player:a,currentFloor:n}=e,i={user_id:s,player_name:a.name,current_floor:a.floor,hp:a.hp,max_hp:a.max_hp,attack:a.atk,defense:a.def,highest_floor:Math.max(a.floor,(n==null?void 0:n.floorNumber)||1)};try{const{data:c,error:u}=await _e.from("game_progress").upsert(i).select();return u?(console.error("Erro ao salvar progresso:",u),{success:!1,error:u.message,data:null}):{success:!0,error:void 0,data:c[0]}}catch(c){return console.error("Erro geral ao salvar:",c instanceof Error?c.message:c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido",data:null}}}static async loadGameProgress(e){try{const{data:s,error:a}=await _e.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return a?(console.error("Erro ao carregar progresso:",a),{success:!1,error:a.message,data:null}):{success:!0,error:void 0,data:s[0]||null}}catch(s){return console.error("Erro geral ao carregar:",s instanceof Error?s.message:s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async processPlayerAction(e,s,a,n){return console.log(`[GameService] Delegando ação do jogador para BattleService: ${e}`),Ll.processPlayerAction(e,s,a,n)}static async processEnemyDefeat(e){console.log("[GameService] Delegando processamento de derrota do inimigo para RewardService");const{RewardService:s}=await ws(async()=>{const{RewardService:a}=await import("./reward.service-f74hM8x7.js");return{RewardService:a}},[]);return s.processEnemyDefeat(e)}static async processEnemyActionWithDelay(e,s,a){var c;if(console.log("[GameService] === PROCESSANDO TURNO DO INIMIGO ==="),!e.currentEnemy||e.currentEnemy.hp<=0)return console.log("[GameService] Inimigo morto antes do delay - cancelando ação"),{newState:e};const n=a??1500+Math.random()*1e3,i=((c=e.currentEnemy)==null?void 0:c.name)||"Inimigo";return console.log(`[GameService] ${i} está pensando... (${Math.round(n)}ms)`),await new Promise(u=>setTimeout(u,n)),!e.currentEnemy||e.currentEnemy.hp<=0?(console.log("[GameService] Inimigo morto após delay - cancelando ação"),{newState:e}):(console.log(`[GameService] ${i} decidiu sua ação!`),Ll.processEnemyAction(e,s))}static async advanceToNextFloor(e){var n,i,c;const{player:s}=e,a=s.floor+1;console.log(`[GameService] Avançando do andar ${s.floor} para ${a}`);try{console.log("[GameService] === ATUALIZANDO ANDAR NO BANCO ==="),console.log(`[GameService] Personagem: ${s.id}`),console.log(`[GameService] Andar atual: ${s.floor} -> Próximo andar: ${a}`);const u=await tt.updateCharacterFloor(s.id,a);if(!u.success)throw console.error("[GameService] ERRO ao atualizar andar:",u.error),new Error(u.error||"Erro ao atualizar andar do personagem");console.log(`[GameService] === ANDAR ATUALIZADO NO BANCO: ${a} ===`),console.log(`[GameService] Carregando dados do andar ${a}...`);const f=await Qs.getFloorData(a);if(!f)throw new Error(`Erro ao gerar dados do andar ${a}`);console.log(`[GameService] Dados do andar ${a} carregados:`,f.description),console.log(`[GameService] === GERANDO INIMIGO PARA ANDAR ${a} ===`);const h=await this.generateEnemy(a);if(!h)throw console.error(`[GameService] Falha ao gerar inimigo para andar ${a}`),new Error(`Falha ao gerar inimigo para o andar ${a}`);console.log(`[GameService] Inimigo gerado: ${h.name} (HP: ${h.hp}/${h.maxHp})`);const p=await Qs.checkForSpecialEvent(a),g={...e,mode:p?"special_event":"battle",player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:f,currentEnemy:p?null:h,currentSpecialEvent:p,gameMessage:p?`Evento especial encontrado: ${p.name}!`:`Andar ${a}: ${f.description}. Um ${h.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,a)};return console.log(`[GameService] Estado do jogo atualizado para andar ${a} com sucesso`),console.log(`[GameService] - Modo: ${g.mode}`),console.log(`[GameService] - Andar: ${(n=g.currentFloor)==null?void 0:n.description}`),console.log(`[GameService] - Inimigo: ${((i=g.currentEnemy)==null?void 0:i.name)||"N/A"}`),console.log(`[GameService] - Evento: ${((c=g.currentSpecialEvent)==null?void 0:c.name)||"N/A"}`),g}catch(u){console.error(`[GameService] Erro crítico ao avançar para andar ${a}:`,u),console.log(`[GameService] Tentando criar estado de fallback para andar ${a}...`);try{const f=await this.generateEnemy(a);if(!f)throw new Error(`Não foi possível gerar inimigo para o andar ${a}`);const h={floorNumber:a,type:"common",isCheckpoint:a%10===0,minLevel:Math.max(1,Math.floor(a/5)),description:`Andar ${a} - Área Desconhecida`};return console.log(`[GameService] Estado de fallback criado para andar ${a}`),{...e,player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:h,currentEnemy:f,currentSpecialEvent:null,gameMessage:`Andar ${a}: ${h.description}. Um ${f.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(f){return console.error("[GameService] Falha ao criar estado de fallback:",f),{...e,gameMessage:`Erro crítico ao avançar para o andar ${a}: ${u instanceof Error?u.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}static async processSpecialEventInteraction(e){return Qs.processSpecialEventInteraction(e)}static async loadPlayerForGame(e){return P6.loadPlayerForGame(e)}}ut(Da,"calculateInitiative",Ll.calculateInitiative),ut(Da,"calculateExtraTurns",Ll.calculateExtraTurns),ut(Da,"calculateDamage",Ll.calculateDamage),ut(Da,"processEnemyAction",Ll.processEnemyAction),ut(Da,"getFloorData",Qs.getFloorData),ut(Da,"calculateFloorRewards",Qs.calculateFloorRewards);const YN=Object.freeze(Object.defineProperty({__proto__:null,GameService:Da},Symbol.toStringTag,{value:"Module"})),zs=()=>y.useContext(dC);class cv{static async getSpecialEventForFloor(e){try{console.log(`[SpecialEventService] Buscando evento especial para o andar ${e}`);const{data:s,error:a}=await _e.rpc("get_special_event_for_floor",{p_floor:e}).single();if(a)throw console.error(`[SpecialEventService] Erro ao buscar evento para andar ${e}:`,a.message),a;if(!s)throw console.error(`[SpecialEventService] Nenhum evento retornado para andar ${e}`),new Error("Nenhum evento encontrado para este andar");const n=s;return console.log(`[SpecialEventService] Evento obtido para andar ${e}: ${n.name}`),{data:n,error:null,success:!0}}catch(s){return console.error(`[SpecialEventService] Falha ao buscar evento para andar ${e}:`,s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar evento especial",success:!1}}}static async processSpecialEvent(e,s){try{console.log(`[SpecialEventService] Processando evento ${s} para personagem ${e}`);const{data:a,error:n}=await _e.rpc("process_special_event",{p_character_id:e,p_event_id:s}).single();if(n)throw console.error("[SpecialEventService] Erro ao processar evento:",n.message),n;if(!a)throw new Error("Resposta inválida do servidor");const i=a;return console.log("[SpecialEventService] Evento processado com sucesso:",i),{data:i,error:null,success:!0}}catch(a){return console.error("[SpecialEventService] Falha ao processar evento:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao processar evento especial",success:!1}}}static shouldGenerateSpecialEvent(e){return e==="event"?Math.random()<.7:!1}static getEventIcon(e){switch(e){case"bonfire":return"🔥";case"treasure_chest":return"📦";case"magic_fountain":return"⛲";default:return"✨"}}static getEventColor(e){switch(e){case"bonfire":return"text-orange-500";case"treasure_chest":return"text-yellow-500";case"magic_fountain":return"text-blue-500";default:return"text-purple-500"}}}const pC=y.createContext(null);function D6({children:t}){const[e,s]=y.useState([]),[a,n]=y.useState(null),[i,c]=y.useState(!1),{user:u}=zs(),{gameState:f,setGameState:h,updateLoading:p}=Um(),{addGameLogMessage:g,setGameMessage:x}=zm(),b=y.useRef(!1),j=y.useRef(null),w=y.useRef(!1),N=y.useRef(null);y.useEffect(()=>{if(j.current!==(u==null?void 0:u.id)&&(j.current=(u==null?void 0:u.id)||null,s([]),n(null),c(!1),b.current=!1),!(u!=null&&u.id)||i||b.current)return;(async()=>{try{console.log("[CharacterProvider] Carregando personagens pela primeira vez para:",u.id),b.current=!0,p("loadProgress",!0);const M=await tt.getUserCharacters(u.id);M.success&&M.data?(s(M.data),c(!0),M.data.length>0?x("Selecione um personagem para jogar!"):x("Você ainda não tem personagens. Crie um para começar!")):M.error&&(console.error("[CharacterProvider] Erro ao carregar personagens:",M.error),pe.error("Erro",{description:M.error}))}catch(M){console.error("[CharacterProvider] Erro ao carregar personagens:",M instanceof Error?M.message:"Erro desconhecido"),pe.error("Erro",{description:M instanceof Error?M.message:"Erro ao carregar personagens"})}finally{p("loadProgress",!1),b.current=!1}})()},[u==null?void 0:u.id,i]);const E=y.useCallback(async k=>{if(!(u!=null&&u.id)){pe.error("Erro",{description:"Você precisa estar logado para criar um personagem."});return}p("startGame",!0);try{const M=await tt.createCharacter({user_id:u.id,name:k});if(M.success&&M.data){const V=await tt.getCharacter(M.data.id);V.success&&V.data&&(s(Y=>[...Y,V.data]),n(V.data),pe.success("Sucesso",{description:"Personagem criado com sucesso!"}),g(`${V.data.name} foi criado!`))}else if(M.error)throw new Error(M.error)}catch(M){console.error("[CharacterProvider] Erro ao criar personagem:",M instanceof Error?M.message:"Erro desconhecido"),pe.error("Erro",{description:M instanceof Error?M.message:"Erro ao criar personagem"})}finally{p("startGame",!1)}},[u==null?void 0:u.id]),C=y.useCallback(async k=>{try{n(k),console.log(`[CharacterProvider] Carregando stats derivados para ${k.name}...`);const M=await tt.getCharacterForGame(k.id);if(!M.success||!M.data)throw new Error(M.error||"Erro ao carregar dados do personagem");const V=M.data;h({mode:"menu",player:V,currentFloor:null,currentEnemy:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:V.floor,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1}),g(`${k.name} selecionado!`)}catch(M){console.error("[CharacterProvider] Erro ao selecionar personagem:",M instanceof Error?M.message:"Erro desconhecido"),pe.error("Erro",{description:M instanceof Error?M.message:"Erro ao selecionar personagem"})}},[]),S=y.useCallback(async k=>{try{console.log(`[CharacterProvider] Carregando personagem para o hub: ${k.name} (ID: ${k.id})`),n(k),console.log("[CharacterProvider] Carregando stats derivados via getCharacterForGame...");const M=await tt.getCharacterForGame(k.id);if(!M.success||!M.data)throw new Error(M.error||"Erro ao carregar dados do personagem");const V=M.data;console.log("[CharacterProvider] Dados do gamePlayer:",{name:V.name,level:V.level,gold:V.gold,floor:V.floor,hp:V.hp,max_hp:V.max_hp,atk:V.atk,def:V.def});const Y={mode:"hub",player:V,currentFloor:null,currentEnemy:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:Math.max(1,V.floor),selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1};console.log("[CharacterProvider] Configurando novo estado do jogo:",Y),h(Y),x(`Bem-vindo ao hub, ${V.name}!`),console.log(`[CharacterProvider] Hub carregado com sucesso para ${V.name}`)}catch(M){console.error("[CharacterProvider] Erro ao carregar personagem para o hub:",M instanceof Error?M.message:"Erro desconhecido"),pe.error("Erro",{description:M instanceof Error?M.message:"Erro ao carregar personagem"})}},[h,x]),P=y.useCallback((k,M)=>{console.log(`[CharacterProvider] Atualizando stats do jogador: HP ${k}, Mana ${M}`);const V=f;h({...V,player:{...V.player,hp:Math.floor(k),mana:Math.floor(M)}})},[h]),R=y.useCallback(()=>{c(!1),b.current=!1},[]),D=y.useCallback(async(k,M)=>{if(w.current){console.warn("[CharacterProvider] Inicialização de batalha já em progresso - ignorando nova tentativa");return}if(N.current===M){console.warn(`[CharacterProvider] Batalha já foi inicializada para ${M} - ignorando`);return}w.current=!0,N.current=M;try{console.log(`[CharacterProvider] === INICIALIZANDO BATALHA PARA ${k.name} (${M}) ===`),p("loadProgress",!0),n(k),console.log("[CharacterProvider] Carregando dados do personagem...");const V=await tt.getCharacterForGame(k.id);if(!V.success||!V.data)throw new Error(V.error||"Erro ao carregar dados do personagem");const Y=V.data,B=Y.floor;console.log(`[CharacterProvider] Personagem carregado - Andar atual: ${B}`),console.log(`[CharacterProvider] Carregando dados do andar ${B}...`);const z=await Qs.getFloorData(B);if(!z)throw new Error(`Erro ao carregar dados do andar ${B}`);console.log(`[CharacterProvider] Dados do andar carregados: ${z.description}`);let Q=null;z.type==="event"&&cv.shouldGenerateSpecialEvent("event")&&(Q=await Qs.checkForSpecialEvent(B));let H=null;if(!Q){if(console.log(`[CharacterProvider] Gerando inimigo para andar ${B}...`),H=await Da.generateEnemy(B),!H)throw new Error(`Erro ao gerar inimigo para o andar ${B}`);console.log(`[CharacterProvider] Inimigo gerado: ${H.name} (HP: ${H.hp}/${H.maxHp})`)}const A={mode:Q?"special_event":"battle",player:Y,currentFloor:z,currentEnemy:H,currentSpecialEvent:Q,isPlayerTurn:!0,gameMessage:Q?`Evento especial encontrado: ${Q.name}!`:`Andar ${B}: ${z.description}. Um ${H.name} apareceu!`,highestFloor:Math.max(1,Y.floor),selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1};console.log("[CharacterProvider] Configurando estado de batalha:",{mode:A.mode,floor:z.description,enemy:(H==null?void 0:H.name)||"N/A",event:(Q==null?void 0:Q.name)||"N/A"}),h(A);const I=Q?`Evento especial encontrado no andar ${B}: ${Q.name}`:`Andar ${B} - ${H.name} apareceu!`;g(I,"system"),console.log("[CharacterProvider] === BATALHA INICIALIZADA COM SUCESSO ===")}catch(V){throw console.error("[CharacterProvider] Erro ao inicializar batalha:",V instanceof Error?V.message:"Erro desconhecido"),pe.error("Erro ao iniciar batalha",{description:V instanceof Error?V.message:"Erro ao inicializar batalha"}),N.current=null,V}finally{p("loadProgress",!1),w.current=!1}},[h,g,p]),$=y.useMemo(()=>({characters:e,selectedCharacter:a,createCharacter:E,selectCharacter:C,loadCharacterForHub:S,initializeBattle:D,updatePlayerStats:P,reloadCharacters:R}),[e,a]);return r.jsx(pC.Provider,{value:$,children:t})}function gy(){const t=y.useContext(pC);if(!t)throw new Error("useCharacter deve ser usado dentro de um CharacterProvider");return t}const gC=y.createContext(null);function O6({children:t}){const{gameState:e,setGameState:s,updateLoading:a}=Um(),{addGameLogMessage:n}=zm(),{selectedCharacter:i}=gy(),c=y.useRef({timestamp:0,action:"",processing:!1}),u=y.useCallback(()=>{console.log("[BattleProvider] Limpando estado de loading"),c.current.processing=!1,a("performAction",!1)},[a]),f=y.useCallback(async(h,p,g)=>{const x=Date.now(),b=x-c.current.timestamp,j=c.current.action===h;if(console.log(`[BattleProvider] === AÇÃO SOLICITADA: ${h} ===`),console.log(`[BattleProvider] Debounce: última ação ${c.current.action} há ${b}ms`),!i){console.warn("[BattleProvider] Ação bloqueada - sem personagem selecionado");return}if(c.current.processing){console.warn(`[BattleProvider] Ação bloqueada - já processando ação: ${c.current.action}`);return}if(e.mode==="gameover"){console.warn("[BattleProvider] Ação bloqueada - personagem morto");return}if(j&&b<2e3){console.warn(`[BattleProvider] Ação bloqueada - mesma ação muito rápida (${b}ms < 2000ms)`);return}if(b<500){console.warn(`[BattleProvider] Ação bloqueada - muito rápida (${b}ms < 500ms)`);return}c.current={timestamp:x,action:h,processing:!0},a("performAction",!0);try{console.log(`[BattleProvider] Processando ação do jogador: ${h}`);const w=await Da.processPlayerAction(h,e,p,g),{newState:N,skipTurn:E,message:C,skillXpGains:S,gameLogMessages:P}=w;if(P!=null&&P.length&&P.forEach(R=>{n(R.message,R.type)}),S!=null&&S.length&&i)try{for(const R of S)await tt.addSkillXp(i.id,R.skill,R.xp)}catch(R){console.error("[BattleProvider] Erro ao aplicar skill XP:",R)}if(s(N),h==="flee"&&(N.fleeSuccessful===!0||N.mode==="fled")){console.log("[BattleProvider] === FUGA BEM-SUCEDIDA ==="),n(C,"system"),u();return}if(E){n(C,"system"),u();return}if(N.currentEnemy&&N.currentEnemy.hp<=0){console.log("[BattleProvider] === INIMIGO DERROTADO ===");const R=await Da.processEnemyDefeat(N);s(R),n(`${N.currentEnemy.name} foi derrotado!`,"system"),u();return}N.currentEnemy&&!N.fleeSuccessful?(console.log("[BattleProvider] === INICIANDO TURNO DO INIMIGO ==="),s({...N,isPlayerTurn:!1,gameMessage:C}),n(C,"player_action"),setTimeout(async()=>{var R;try{console.log("[BattleProvider] Processando ação do inimigo...");const D=await Da.processEnemyActionWithDelay({...N,isPlayerTurn:!1},h==="defend",1500),{newState:$,skillXpGains:k}=D;if(k!=null&&k.length&&i)try{for(const M of k)await tt.addSkillXp(i.id,M.skill,M.xp)}catch(M){console.error("[BattleProvider] Erro ao aplicar skill XP de defesa:",M)}if($.mode==="gameover"){s($),u();return}if(i&&await tt.updateCharacterHpMana(i.id,$.player.hp,$.player.mana),(R=$.gameMessage)!=null&&R.trim()){const M=$.gameMessage.includes("causou")&&$.gameMessage.includes("dano")?"damage":"enemy_action";n($.gameMessage,M)}s({...$,isPlayerTurn:!0}),u()}catch(D){console.error("[BattleProvider] Erro no turno do inimigo:",D),u()}},1e3)):u()}catch(w){console.error("[BattleProvider] Erro ao processar ação:",w),u()}},[e,i,s,n,a,u]);return r.jsx(gC.Provider,{value:{performAction:f},children:t})}function $6(){const t=y.useContext(gC);if(!t)throw new Error("useBattle deve ser usado dentro de um BattleProvider");return t}const xC=y.createContext(null);function L6({children:t}){const{gameState:e,setGameState:s}=Um(),{addGameLogMessage:a}=zm(),{selectedCharacter:n}=gy(),i=y.useCallback(async()=>{var c;if(e.mode==="special_event")try{const u=await Da.processSpecialEventInteraction(e);if(n&&u.player){(u.player.hp!==e.player.hp||u.player.mana!==e.player.mana)&&await tt.updateCharacterHpMana(n.id,u.player.hp,u.player.mana);const p=u.player.gold-e.player.gold;p>0&&await tt.grantSecureGold(n.id,p,"special_event")}const f=await Da.generateEnemy(u.player.floor);if(!f)throw new Error("Erro ao gerar inimigo após evento especial");const h={...u,mode:"battle",currentSpecialEvent:null,currentEnemy:f,gameMessage:`Andar ${u.player.floor}: ${((c=u.currentFloor)==null?void 0:c.description)||"Área Desconhecida"}. Um ${f.name} apareceu!`};s(h),a(u.gameMessage||"Evento especial concluído!","system"),a(`Um ${f.name} apareceu!`,"system")}catch(u){console.error("[EventProvider] Erro no evento especial:",u),a("Erro ao processar evento especial","system")}},[e,n,s,a]);return r.jsx(xC.Provider,{value:{interactWithEvent:i},children:t})}function I6(){const t=y.useContext(xC);if(!t)throw new Error("useEvent deve ser usado dentro de um EventProvider");return t}function B6({children:t}){return r.jsx(k6,{children:r.jsx(A6,{children:r.jsx(D6,{children:r.jsx(O6,{children:r.jsx(L6,{children:t})})})})})}function V6(){return y.useEffect(()=>{const e=localStorage.getItem("tower-trials-theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="light"||(e==="dark"||e==="system")&&e==="system"&&!s?document.documentElement.classList.remove("dark"):document.documentElement.classList.add("dark")},[]),{setTheme:e=>{localStorage.setItem("tower-trials-theme",e),e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}}function q6({children:t}){return V6(),r.jsxs("div",{className:"font-inter",children:[r.jsx(C6,{richColors:!0,position:"top-right"}),r.jsx(FL,{children:r.jsx(B6,{children:t})})]})}const Fm=tD({component:()=>r.jsxs(q6,{children:[r.jsx($o,{}),r.jsx(iO,{})]})});/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),z6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase()),KN=t=>{const e=z6(t);return e.charAt(0).toUpperCase()+e.slice(1)},vC=(...t)=>t.filter((e,s,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===s).join(" ").trim(),F6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:c,...u},f)=>y.createElement("svg",{ref:f,...H6,width:e,height:e,stroke:t,strokeWidth:a?Number(s)*24/Number(e):s,className:vC("lucide",n),...!i&&!F6(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>y.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const s=y.forwardRef(({className:a,...n},i)=>y.createElement(G6,{ref:i,iconNode:e,className:vC(`lucide-${U6(KN(t))}`,`lucide-${t}`,a),...n}));return s.displayName=KN(t),s};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],uv=ke("activity",X6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ds=ke("arrow-left",Y6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yC=ke("arrow-right",K6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Z6=ke("arrow-up",W6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],J6=ke("award",Q6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"m14 12-8.381 8.38a1 1 0 0 1-3.001-3L11 9",key:"5z9253"}],["path",{d:"M15 15.5a.5.5 0 0 0 .5.5A6.5 6.5 0 0 0 22 9.5a.5.5 0 0 0-.5-.5h-1.672a2 2 0 0 1-1.414-.586l-5.062-5.062a1.205 1.205 0 0 0-1.704 0L9.352 5.648a1.205 1.205 0 0 0 0 1.704l5.062 5.062A2 2 0 0 1 15 13.828z",key:"19zklq"}]],tI=ke("axe",eI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]],aI=ke("backpack",sI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],dx=ke("beaker",rI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],oI=ke("brain",nI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],lI=ke("building",iI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bC=ke("calendar",cI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],dI=ke("castle",uI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],xy=ke("check",fI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],To=ke("chevron-down",hI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dv=ke("chevron-left",mI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_C=ke("chevron-right",pI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],mc=ke("chevron-up",gI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],wC=ke("circle-alert",xI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fv=ke("circle-check-big",vI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jC=ke("circle-check",yI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_I=ke("circle-help",bI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lm=ke("circle-x",wI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],cm=ke("clock",jI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],wa=ke("coins",NI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],WN=ke("crosshair",SI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],ki=ke("crown",EI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],NC=ke("download",CI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],hv=ke("droplet",kI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],TI=ke("droplets",AI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],MI=ke("eye-off",RI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jo=ke("eye",PI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],Hm=ke("flame",DI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wd=ke("funnel",OI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],ar=ke("gem",$I);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],II=ke("github",LI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],Ni=ke("hammer",BI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],cs=ke("heart",VI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],UI=ke("hexagon",qI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],FI=ke("house",zI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],GI=ke("info",HI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],ZN=ke("keyboard",XI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],KI=ke("loader-circle",YI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ZI=ke("lock",WI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JI=ke("log-out",QI);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],t8=ke("mail",e8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],mv=ke("map",s8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],r8=ke("menu",a8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],QN=ke("message-circle",n8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M5 12h14",key:"1ays0h"}]],SC=ke("minus",o8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],JN=ke("moon",i8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ua=ke("package",l8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],pv=ke("play",c8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Io=ke("plus",u8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gv=ke("refresh-cw",d8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],EC=ke("rotate-ccw",f8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vy=ke("save",h8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],p8=ke("scroll",m8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Gm=ke("search",g8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xv=ke("shield-check",x8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],yt=ke("shield",v8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],id=ke("shirt",y8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],um=ke("shopping-bag",b8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],w8=ke("shopping-cart",_8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Js=ke("skull",j8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],eS=ke("smartphone",N8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],CC=ke("snowflake",S8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],lt=ke("sparkles",E8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jt=ke("star",C8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],tS=ke("sun",k8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],At=ke("sword",A8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],yy=ke("swords",T8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ta=ke("target",R8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],P8=ke("timer",M8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],vv=ke("trending-down",D8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ba=ke("trending-up",O8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kC=ke("triangle-alert",$8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Er=ke("trophy",L8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],B8=ke("twitter",I8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dm=ke("user",V8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],AC=ke("users",q8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],z8=ke("wifi-off",U8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],H8=ke("wifi",F8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bi=ke("x",G8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ct=ke("zap",X8),Ai=()=>r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(KI,{className:"h-8 w-8 animate-spin text-primary"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})});function TC({children:t}){const{loading:e}=zs(),[s,a]=y.useState(!1),n=y.useRef(!1),i=y.useRef(null);return y.useEffect(()=>{if(!(typeof window>"u")&&!n.current)return n.current=!0,s||(e.onAuthUserChanged?i.current=setTimeout(()=>{a(!0)},5e3):a(!0)),()=>{i.current&&clearTimeout(i.current)}},[e.onAuthUserChanged,s]),y.useEffect(()=>{!e.onAuthUserChanged&&!s&&(a(!0),i.current&&(clearTimeout(i.current),i.current=null))},[e.onAuthUserChanged,s]),s?t:r.jsx(Ai,{})}function Y8({children:t}){const{user:e,signOut:s,loading:a}=zs(),n=Pt(),i=$i(),u=cy({strict:!1}).auth,f=y.useRef(!1),h=y.useRef(!1),p=y.useRef(null);return y.useLayoutEffect(()=>{const g=e!==null;p.current!==g&&(p.current=g,g||(h.current=!1,f.current=!1))},[e]),y.useEffect(()=>{if(!(typeof window>"u")&&!(a.onAuthUserChanged||e===void 0)){if(i.pathname==="/logout"){if(e&&!f.current){pe.error("Sessão expirada, faça o login novamente."),s(),f.current=!0;return}else if(!e&&f.current){const g=`${i.pathname}${i.search||""}`;try{const x=typeof g=="string"?g:"",b=x?encodeURIComponent(x):"";n({to:"/auth",search:{auth:b},replace:!0})}catch(x){console.warn("Erro ao codificar path:",x),n({to:"/auth",search:{auth:""},replace:!0})}return}}if(i.pathname!=="/auth/verify-email"&&e&&!h.current&&!f.current){h.current=!0;try{if(u&&typeof u=="string"&&u.trim()!==""&&u!=="true"){const g=decodeURIComponent(u);if(g&&g.startsWith("/")&&!g.includes("[object")&&!g.startsWith("/auth")){n({to:g,replace:!0});return}}n({to:"/game",replace:!0})}catch(g){console.warn("Erro ao processar redirecionamento:",g),n({to:"/game",replace:!0})}}}},[e,u,i.pathname,i.search,a.onAuthUserChanged,s,n]),a.onAuthUserChanged||e===void 0?r.jsx(Ai,{}):e&&!f.current&&i.pathname!=="/auth/verify-email"&&i.pathname!=="/logout"?r.jsx(Ai,{}):t}function K8({children:t}){return r.jsx(TC,{children:r.jsx(Y8,{children:t})})}function sS(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function RC(...t){return e=>{let s=!1;const a=t.map(n=>{const i=sS(n,e);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():sS(t[n],null)}}}}function _t(...t){return y.useCallback(RC(...t),t)}function Ti(t){const e=W8(t),s=y.forwardRef((a,n)=>{const{children:i,...c}=a,u=y.Children.toArray(i),f=u.find(Q8);if(f){const h=f.props.children,p=u.map(g=>g===f?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:g);return r.jsx(e,{...c,ref:n,children:y.isValidElement(h)?y.cloneElement(h,void 0,p):null})}return r.jsx(e,{...c,ref:n,children:i})});return s.displayName=`${t}.Slot`,s}var MC=Ti("Slot");function W8(t){const e=y.forwardRef((s,a)=>{const{children:n,...i}=s;if(y.isValidElement(n)){const c=eB(n),u=J8(i,n.props);return n.type!==y.Fragment&&(u.ref=a?RC(a,c):c),y.cloneElement(n,u)}return y.Children.count(n)>1?y.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PC=Symbol("radix.slottable");function Z8(t){const e=({children:s})=>r.jsx(r.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=PC,e}function Q8(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PC}function J8(t,e){const s={...e};for(const a in e){const n=t[a],i=e[a];/^on[A-Z]/.test(a)?n&&i?s[a]=(...u)=>{const f=i(...u);return n(...u),f}:n&&(s[a]=n):a==="style"?s[a]={...n,...i}:a==="className"&&(s[a]=[n,i].filter(Boolean).join(" "))}return{...t,...s}}function eB(t){var a,n;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function DC(t){var e,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(s=DC(t[e]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function by(){for(var t,e,s=0,a="",n=arguments.length;s<n;s++)(t=arguments[s])&&(e=DC(t))&&(a&&(a+=" "),a+=e);return a}const aS=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,rS=by,Od=(t,e)=>s=>{var a;if((e==null?void 0:e.variants)==null)return rS(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:i}=e,c=Object.keys(n).map(h=>{const p=s==null?void 0:s[h],g=i==null?void 0:i[h];if(p===null)return null;const x=aS(p)||aS(g);return n[h][x]}),u=s&&Object.entries(s).reduce((h,p)=>{let[g,x]=p;return x===void 0||(h[g]=x),h},{}),f=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((h,p)=>{let{class:g,className:x,...b}=p;return Object.entries(b).every(j=>{let[w,N]=j;return Array.isArray(N)?N.includes({...i,...u}[w]):{...i,...u}[w]===N})?[...h,g,x]:h},[]);return rS(t,c,f,s==null?void 0:s.class,s==null?void 0:s.className)},_y="-",tB=t=>{const e=aB(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:c=>{const u=c.split(_y);return u[0]===""&&u.length!==1&&u.shift(),OC(u,e)||sB(c)},getConflictingClassGroupIds:(c,u)=>{const f=s[c]||[];return u&&a[c]?[...f,...a[c]]:f}}},OC=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const s=t[0],a=e.nextPart.get(s),n=a?OC(t.slice(1),a):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(_y);return(c=e.validators.find(({validator:u})=>u(i)))==null?void 0:c.classGroupId},nS=/^\[(.+)\]$/,sB=t=>{if(nS.test(t)){const e=nS.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},aB=t=>{const{theme:e,classGroups:s}=t,a={nextPart:new Map,validators:[]};for(const n in s)yv(s[n],a,n,e);return a},yv=(t,e,s,a)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:oS(e,n);i.classGroupId=s;return}if(typeof n=="function"){if(rB(n)){yv(n(a),e,s,a);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([i,c])=>{yv(c,oS(e,i),s,a)})})},oS=(t,e)=>{let s=t;return e.split(_y).forEach(a=>{s.nextPart.has(a)||s.nextPart.set(a,{nextPart:new Map,validators:[]}),s=s.nextPart.get(a)}),s},rB=t=>t.isThemeGetter,nB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,a=new Map;const n=(i,c)=>{s.set(i,c),e++,e>t&&(e=0,a=s,s=new Map)};return{get(i){let c=s.get(i);if(c!==void 0)return c;if((c=a.get(i))!==void 0)return n(i,c),c},set(i,c){s.has(i)?s.set(i,c):n(i,c)}}},bv="!",_v=":",oB=_v.length,iB=t=>{const{prefix:e,experimentalParseClassName:s}=t;let a=n=>{const i=[];let c=0,u=0,f=0,h;for(let j=0;j<n.length;j++){let w=n[j];if(c===0&&u===0){if(w===_v){i.push(n.slice(f,j)),f=j+oB;continue}if(w==="/"){h=j;continue}}w==="["?c++:w==="]"?c--:w==="("?u++:w===")"&&u--}const p=i.length===0?n:n.substring(f),g=lB(p),x=g!==p,b=h&&h>f?h-f:void 0;return{modifiers:i,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:b}};if(e){const n=e+_v,i=a;a=c=>c.startsWith(n)?i(c.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(s){const n=a;a=i=>s({className:i,parseClassName:n})}return a},lB=t=>t.endsWith(bv)?t.substring(0,t.length-1):t.startsWith(bv)?t.substring(1):t,cB=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const n=[];let i=[];return a.forEach(c=>{c[0]==="["||e[c]?(n.push(...i.sort(),c),i=[]):i.push(c)}),n.push(...i.sort()),n}},uB=t=>({cache:nB(t.cacheSize),parseClassName:iB(t),sortModifiers:cB(t),...tB(t)}),dB=/\s+/,fB=(t,e)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:n,sortModifiers:i}=e,c=[],u=t.trim().split(dB);let f="";for(let h=u.length-1;h>=0;h-=1){const p=u[h],{isExternal:g,modifiers:x,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:w}=s(p);if(g){f=p+(f.length>0?" "+f:f);continue}let N=!!w,E=a(N?j.substring(0,w):j);if(!E){if(!N){f=p+(f.length>0?" "+f:f);continue}if(E=a(j),!E){f=p+(f.length>0?" "+f:f);continue}N=!1}const C=i(x).join(":"),S=b?C+bv:C,P=S+E;if(c.includes(P))continue;c.push(P);const R=n(E,N);for(let D=0;D<R.length;++D){const $=R[D];c.push(S+$)}f=p+(f.length>0?" "+f:f)}return f};function hB(){let t=0,e,s,a="";for(;t<arguments.length;)(e=arguments[t++])&&(s=$C(e))&&(a&&(a+=" "),a+=s);return a}const $C=t=>{if(typeof t=="string")return t;let e,s="";for(let a=0;a<t.length;a++)t[a]&&(e=$C(t[a]))&&(s&&(s+=" "),s+=e);return s};function mB(t,...e){let s,a,n,i=c;function c(f){const h=e.reduce((p,g)=>g(p),t());return s=uB(h),a=s.cache.get,n=s.cache.set,i=u,u(f)}function u(f){const h=a(f);if(h)return h;const p=fB(f,s);return n(f,p),p}return function(){return i(hB.apply(null,arguments))}}const bs=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},LC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,IC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,pB=/^\d+\/\d+$/,gB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,yB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Il=t=>pB.test(t),dt=t=>!!t&&!Number.isNaN(Number(t)),ro=t=>!!t&&Number.isInteger(Number(t)),fx=t=>t.endsWith("%")&&dt(t.slice(0,-1)),yn=t=>gB.test(t),_B=()=>!0,wB=t=>xB.test(t)&&!vB.test(t),BC=()=>!1,jB=t=>yB.test(t),NB=t=>bB.test(t),SB=t=>!Ie(t)&&!Be(t),EB=t=>Nc(t,UC,BC),Ie=t=>LC.test(t),ci=t=>Nc(t,zC,wB),hx=t=>Nc(t,RB,dt),iS=t=>Nc(t,VC,BC),CB=t=>Nc(t,qC,NB),mh=t=>Nc(t,FC,jB),Be=t=>IC.test(t),Du=t=>Sc(t,zC),kB=t=>Sc(t,MB),lS=t=>Sc(t,VC),AB=t=>Sc(t,UC),TB=t=>Sc(t,qC),ph=t=>Sc(t,FC,!0),Nc=(t,e,s)=>{const a=LC.exec(t);return a?a[1]?e(a[1]):s(a[2]):!1},Sc=(t,e,s=!1)=>{const a=IC.exec(t);return a?a[1]?e(a[1]):s:!1},VC=t=>t==="position"||t==="percentage",qC=t=>t==="image"||t==="url",UC=t=>t==="length"||t==="size"||t==="bg-size",zC=t=>t==="length",RB=t=>t==="number",MB=t=>t==="family-name",FC=t=>t==="shadow",PB=()=>{const t=bs("color"),e=bs("font"),s=bs("text"),a=bs("font-weight"),n=bs("tracking"),i=bs("leading"),c=bs("breakpoint"),u=bs("container"),f=bs("spacing"),h=bs("radius"),p=bs("shadow"),g=bs("inset-shadow"),x=bs("text-shadow"),b=bs("drop-shadow"),j=bs("blur"),w=bs("perspective"),N=bs("aspect"),E=bs("ease"),C=bs("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...P(),Be,Ie],D=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],k=()=>[Be,Ie,f],M=()=>[Il,"full","auto",...k()],V=()=>[ro,"none","subgrid",Be,Ie],Y=()=>["auto",{span:["full",ro,Be,Ie]},ro,Be,Ie],B=()=>[ro,"auto",Be,Ie],z=()=>["auto","min","max","fr",Be,Ie],Q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...k()],I=()=>[Il,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],q=()=>[t,Be,Ie],K=()=>[...P(),lS,iS,{position:[Be,Ie]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",AB,EB,{size:[Be,Ie]}],ne=()=>[fx,Du,ci],te=()=>["","none","full",h,Be,Ie],ie=()=>["",dt,Du,ci],le=()=>["solid","dashed","dotted","double"],ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[dt,fx,lS,iS],ce=()=>["","none",j,Be,Ie],we=()=>["none",dt,Be,Ie],Se=()=>["none",dt,Be,Ie],je=()=>[dt,Be,Ie],Ce=()=>[Il,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yn],breakpoint:[yn],color:[_B],container:[yn],"drop-shadow":[yn],ease:["in","out","in-out"],font:[SB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yn],shadow:[yn],spacing:["px",dt],text:[yn],"text-shadow":[yn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Il,Ie,Be,N]}],container:["container"],columns:[{columns:[dt,Ie,Be,u]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[ro,"auto",Be,Ie]}],basis:[{basis:[Il,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[dt,Il,"auto","initial","none",Ie]}],grow:[{grow:["",dt,Be,Ie]}],shrink:[{shrink:["",dt,Be,Ie]}],order:[{order:[ro,"first","last","none",Be,Ie]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...Q(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...Q()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":Q()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:I()}],w:[{w:[u,"screen",...I()]}],"min-w":[{"min-w":[u,"screen","none",...I()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...I()]}],h:[{h:["screen","lh",...I()]}],"min-h":[{"min-h":["screen","lh","none",...I()]}],"max-h":[{"max-h":["screen","lh",...I()]}],"font-size":[{text:["base",s,Du,ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Be,hx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",fx,Ie]}],"font-family":[{font:[kB,Ie,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Be,Ie]}],"line-clamp":[{"line-clamp":[dt,"none",Be,hx]}],leading:[{leading:[i,...k()]}],"list-image":[{"list-image":["none",Be,Ie]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Be,Ie]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:[dt,"from-font","auto",Be,ci]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[dt,"auto",Be,Ie]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Be,Ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be,Ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ro,Be,Ie],radial:["",Be,Ie],conic:[ro,Be,Ie]},TB,CB]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...le(),"hidden","none"]}],"divide-style":[{divide:[...le(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...le(),"none","hidden"]}],"outline-offset":[{"outline-offset":[dt,Be,Ie]}],"outline-w":[{outline:["",dt,Du,ci]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",p,ph,mh]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",g,ph,mh]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[dt,ci]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",x,ph,mh]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[dt,Be,Ie]}],"mix-blend":[{"mix-blend":[...ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[dt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[Be,Ie]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[dt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Be,Ie]}],filter:[{filter:["","none",Be,Ie]}],blur:[{blur:ce()}],brightness:[{brightness:[dt,Be,Ie]}],contrast:[{contrast:[dt,Be,Ie]}],"drop-shadow":[{"drop-shadow":["","none",b,ph,mh]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",dt,Be,Ie]}],"hue-rotate":[{"hue-rotate":[dt,Be,Ie]}],invert:[{invert:["",dt,Be,Ie]}],saturate:[{saturate:[dt,Be,Ie]}],sepia:[{sepia:["",dt,Be,Ie]}],"backdrop-filter":[{"backdrop-filter":["","none",Be,Ie]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[dt,Be,Ie]}],"backdrop-contrast":[{"backdrop-contrast":[dt,Be,Ie]}],"backdrop-grayscale":[{"backdrop-grayscale":["",dt,Be,Ie]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[dt,Be,Ie]}],"backdrop-invert":[{"backdrop-invert":["",dt,Be,Ie]}],"backdrop-opacity":[{"backdrop-opacity":[dt,Be,Ie]}],"backdrop-saturate":[{"backdrop-saturate":[dt,Be,Ie]}],"backdrop-sepia":[{"backdrop-sepia":["",dt,Be,Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Be,Ie]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[dt,"initial",Be,Ie]}],ease:[{ease:["linear","initial",E,Be,Ie]}],delay:[{delay:[dt,Be,Ie]}],animate:[{animate:["none",C,Be,Ie]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Be,Ie]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:we()}],"rotate-x":[{"rotate-x":we()}],"rotate-y":[{"rotate-y":we()}],"rotate-z":[{"rotate-z":we()}],scale:[{scale:Se()}],"scale-x":[{"scale-x":Se()}],"scale-y":[{"scale-y":Se()}],"scale-z":[{"scale-z":Se()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[Be,Ie,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ce()}],"translate-x":[{"translate-x":Ce()}],"translate-y":[{"translate-y":Ce()}],"translate-z":[{"translate-z":Ce()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be,Ie]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be,Ie]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[dt,Du,ci,hx]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},HC=mB(PB);function Ve(...t){return HC(by(t))}const DB=Od("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),de=y.forwardRef(({className:t,variant:e,size:s,asChild:a=!1,...n},i)=>{const c=a?MC:"button";return r.jsx(c,{className:Ve(DB({variant:e,size:s,className:t})),ref:i,...n})});de.displayName="Button";function GC(...t){return HC(by(t))}const XC={layout:{container:"max-w-5xl mx-auto p-6 sm:p-8",section:"py-8 md:py-12"}},OB=({children:t,className:e,id:s,style:a})=>r.jsx("section",{className:GC(XC.layout.section,e),id:s,style:a,children:t}),cS=({children:t,className:e,id:s,style:a})=>r.jsx("div",{className:GC(XC.layout.container,e),id:s,style:a,children:t});function YC(){return r.jsx("footer",{className:"bg-gradient-to-t from-background/90 to-background/70 border-t border-border",children:r.jsxs(OB,{children:[r.jsxs(cS,{className:"grid gap-12 md:grid-cols-[1.5fr_0.5fr_0.5fr]",children:[r.jsxs("div",{className:"not-prose flex flex-col gap-6",children:[r.jsxs(_o,{to:"/",className:"group",children:[r.jsx("h3",{className:"sr-only",children:"Tower Trials"}),r.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Enfrente desafios, suba a torre e torne-se uma lenda neste RPG roguelike épico."})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("h5",{className:"font-bold text-primary",children:"Links"}),r.jsx(_o,{to:"/game/ranking",className:"text-muted-foreground hover:text-primary transition-colors",children:"Ranking Global"}),r.jsx(_o,{to:"/game/guide",className:"text-muted-foreground hover:text-primary transition-colors",children:"Guia do Jogo"})]}),r.jsx("div",{className:"flex flex-col gap-3",children:r.jsx("h5",{className:"font-bold text-primary",children:"Legal"})})]}),r.jsxs(cS,{className:"not-prose mt-8 flex flex-col justify-between gap-6 border-t border-border pt-8 md:flex-row md:items-center md:gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:r.jsx(II,{className:"h-5 w-5"})}),r.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:r.jsx(B8,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-muted-foreground",children:"© 2024 Tower Trials. Todos os direitos reservados."})]})]})})}const $B=Yt("/_public")({component:LB});function LB(){return r.jsx(K8,{children:r.jsxs("main",{className:"flex min-h-screen flex-col",children:[r.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:r.jsx($o,{})}),r.jsx(YC,{})]})})}function IB({children:t}){const{user:e,loading:s}=zs(),a=Pt(),n=$i(),i=y.useRef(!1),c=y.useRef(null);return y.useLayoutEffect(()=>{const u=e!==null;c.current!==u&&(c.current=u,i.current=!1)},[e]),y.useEffect(()=>{if(!(typeof window>"u")&&!s.onAuthUserChanged&&e===null&&!i.current){if(i.current=!0,n.pathname.startsWith("/auth"))return;const u=`${n.pathname}${n.search||""}`;if(u&&u!=="/auth")try{const h=encodeURIComponent(typeof u=="string"?u:"/game");a({to:"/auth",search:{auth:h},replace:!0})}catch(f){console.warn("Erro ao codificar path:",f),a({to:"/auth",search:{auth:encodeURIComponent("/game")},replace:!0})}else a({to:"/auth",search:{auth:""},replace:!0})}},[e,s.onAuthUserChanged,n.pathname,n.search]),s.onAuthUserChanged||e===void 0?r.jsx(Ai,{}):e===null?r.jsx(Ai,{}):t}function BB({children:t}){return r.jsx(TC,{children:r.jsx(IB,{children:t})})}function VB({children:t}){const{user:e}=zs(),s=Pt(),a=y.useRef(!1),n=y.useRef(null);return y.useLayoutEffect(()=>{if(!e){n.current=null,a.current=!1;return}const i=!!e.email_confirmed_at;n.current!==i&&(n.current=i,a.current=!1)},[e==null?void 0:e.email_confirmed_at]),y.useEffect(()=>{typeof window>"u"||e&&!e.email_confirmed_at&&!a.current&&(a.current=!0,s({to:"/auth/verify-email",search:{auth:"true"},replace:!0}))},[e,s]),!e||!e.email_confirmed_at?null:r.jsx(r.Fragment,{children:t})}function KC(){const[t,e]=y.useState(null),[s,a]=y.useState(!1),[n,i]=y.useState(!1);return y.useEffect(()=>{const u=p=>{p.preventDefault(),e(p),a(!0)},f=()=>{i(!0),a(!1),e(null),console.log("PWA foi instalado com sucesso!")},h=()=>{const p=window.matchMedia("(display-mode: standalone)").matches,g=window.matchMedia("(display-mode: fullscreen)").matches,x=window.matchMedia("(display-mode: minimal-ui)").matches;(p||g||x)&&i(!0)};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",f),h(),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",f)}},[]),{installPWA:async()=>{if(!t)return!1;try{t.prompt();const{outcome:u}=await t.userChoice;return u==="accepted"?(e(null),a(!1),!0):!1}catch(u){return console.error("Erro ao instalar PWA:",u),!1}},isInstallable:s,isInstalled:n,canInstall:s&&!n}}function qB(){const{installPWA:t,canInstall:e,isInstalled:s}=KC(),a=async()=>{await t()&&console.log("App instalado com sucesso!")};return s?r.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"App Instalado"]}):e?r.jsxs(de,{onClick:a,variant:"outline",size:"sm",className:"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-950 dark:hover:bg-blue-900 border-blue-200 dark:border-blue-800",children:[r.jsx(NC,{className:"w-4 h-4"}),"Instalar App"]}):null}function Ge(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function UB(t,e){const s=y.createContext(e),a=i=>{const{children:c,...u}=i,f=y.useMemo(()=>u,Object.values(u));return r.jsx(s.Provider,{value:f,children:c})};a.displayName=t+"Provider";function n(i){const c=y.useContext(s);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[a,n]}function or(t,e=[]){let s=[];function a(i,c){const u=y.createContext(c),f=s.length;s=[...s,c];const h=g=>{var E;const{scope:x,children:b,...j}=g,w=((E=x==null?void 0:x[t])==null?void 0:E[f])||u,N=y.useMemo(()=>j,Object.values(j));return r.jsx(w.Provider,{value:N,children:b})};h.displayName=i+"Provider";function p(g,x){var w;const b=((w=x==null?void 0:x[t])==null?void 0:w[f])||u,j=y.useContext(b);if(j)return j;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,p]}const n=()=>{const i=s.map(c=>y.createContext(c));return function(u){const f=(u==null?void 0:u[t])||i;return y.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return n.scopeName=t,[a,zB(n,...e)]}function zB(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const a=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const c=a.reduce((u,{useScope:f,scopeName:h})=>{const g=f(i)[`__scope${h}`];return{...u,...g}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return s.scopeName=e.scopeName,s}var gs=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},FB=gE[" useId ".trim().toString()]||(()=>{}),HB=0;function Hr(t){const[e,s]=y.useState(FB());return gs(()=>{s(a=>a??String(HB++))},[t]),t||(e?`radix-${e}`:"")}var GB=gE[" useInsertionEffect ".trim().toString()]||gs;function Ro({prop:t,defaultProp:e,onChange:s=()=>{},caller:a}){const[n,i,c]=XB({defaultProp:e,onChange:s}),u=t!==void 0,f=u?t:n;{const p=y.useRef(t!==void 0);y.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${a} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,a])}const h=y.useCallback(p=>{var g;if(u){const x=YB(p)?p(t):p;x!==t&&((g=c.current)==null||g.call(c,x))}else i(p)},[u,t,i,c]);return[f,h]}function XB({defaultProp:t,onChange:e}){const[s,a]=y.useState(t),n=y.useRef(s),i=y.useRef(e);return GB(()=>{i.current=e},[e]),y.useEffect(()=>{var c;n.current!==s&&((c=i.current)==null||c.call(i,s),n.current=s)},[s,n]),[s,a,i]}function YB(t){return typeof t=="function"}var KB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],We=KB.reduce((t,e)=>{const s=Ti(`Primitive.${e}`),a=y.forwardRef((n,i)=>{const{asChild:c,...u}=n,f=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(f,{...u,ref:i})});return a.displayName=`Primitive.${e}`,{...t,[e]:a}},{});function WB(t,e){t&&Oi.flushSync(()=>t.dispatchEvent(e))}function ea(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...s)=>{var a;return(a=e.current)==null?void 0:a.call(e,...s)},[])}function ZB(t,e=globalThis==null?void 0:globalThis.document){const s=ea(t);y.useEffect(()=>{const a=n=>{n.key==="Escape"&&s(n)};return e.addEventListener("keydown",a,{capture:!0}),()=>e.removeEventListener("keydown",a,{capture:!0})},[s,e])}var QB="DismissableLayer",wv="dismissableLayer.update",JB="dismissableLayer.pointerDownOutside",eV="dismissableLayer.focusOutside",uS,WC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$d=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...f}=t,h=y.useContext(WC),[p,g]=y.useState(null),x=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=y.useState({}),j=_t(e,$=>g($)),w=Array.from(h.layers),[N]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(N),C=p?w.indexOf(p):-1,S=h.layersWithOutsidePointerEventsDisabled.size>0,P=C>=E,R=aV($=>{const k=$.target,M=[...h.branches].some(V=>V.contains(k));!P||M||(n==null||n($),c==null||c($),$.defaultPrevented||u==null||u())},x),D=rV($=>{const k=$.target;[...h.branches].some(V=>V.contains(k))||(i==null||i($),c==null||c($),$.defaultPrevented||u==null||u())},x);return ZB($=>{C===h.layers.size-1&&(a==null||a($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},x),y.useEffect(()=>{if(p)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(uS=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),dS(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=uS)}},[p,x,s,h]),y.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),dS())},[p,h]),y.useEffect(()=>{const $=()=>b({});return document.addEventListener(wv,$),()=>document.removeEventListener(wv,$)},[]),r.jsx(We.div,{...f,ref:j,style:{pointerEvents:S?P?"auto":"none":void 0,...t.style},onFocusCapture:Ge(t.onFocusCapture,D.onFocusCapture),onBlurCapture:Ge(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:Ge(t.onPointerDownCapture,R.onPointerDownCapture)})});$d.displayName=QB;var tV="DismissableLayerBranch",sV=y.forwardRef((t,e)=>{const s=y.useContext(WC),a=y.useRef(null),n=_t(e,a);return y.useEffect(()=>{const i=a.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(We.div,{...t,ref:n})});sV.displayName=tV;function aV(t,e=globalThis==null?void 0:globalThis.document){const s=ea(t),a=y.useRef(!1),n=y.useRef(()=>{});return y.useEffect(()=>{const i=u=>{if(u.target&&!a.current){let f=function(){ZC(JB,s,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=f,e.addEventListener("click",n.current,{once:!0})):f()}else e.removeEventListener("click",n.current);a.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",i),e.removeEventListener("click",n.current)}},[e,s]),{onPointerDownCapture:()=>a.current=!0}}function rV(t,e=globalThis==null?void 0:globalThis.document){const s=ea(t),a=y.useRef(!1);return y.useEffect(()=>{const n=i=>{i.target&&!a.current&&ZC(eV,s,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function dS(){const t=new CustomEvent(wv);document.dispatchEvent(t)}function ZC(t,e,s,{discrete:a}){const n=s.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),a?WB(n,i):n.dispatchEvent(i)}var mx="focusScope.autoFocusOnMount",px="focusScope.autoFocusOnUnmount",fS={bubbles:!1,cancelable:!0},nV="FocusScope",Xm=y.forwardRef((t,e)=>{const{loop:s=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...c}=t,[u,f]=y.useState(null),h=ea(n),p=ea(i),g=y.useRef(null),x=_t(e,w=>f(w)),b=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(a){let w=function(S){if(b.paused||!u)return;const P=S.target;u.contains(P)?g.current=P:oo(g.current,{select:!0})},N=function(S){if(b.paused||!u)return;const P=S.relatedTarget;P!==null&&(u.contains(P)||oo(g.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&oo(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",N);const C=new MutationObserver(E);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",N),C.disconnect()}}},[a,u,b.paused]),y.useEffect(()=>{if(u){mS.add(b);const w=document.activeElement;if(!u.contains(w)){const E=new CustomEvent(mx,fS);u.addEventListener(mx,h),u.dispatchEvent(E),E.defaultPrevented||(oV(dV(QC(u)),{select:!0}),document.activeElement===w&&oo(u))}return()=>{u.removeEventListener(mx,h),setTimeout(()=>{const E=new CustomEvent(px,fS);u.addEventListener(px,p),u.dispatchEvent(E),E.defaultPrevented||oo(w??document.body,{select:!0}),u.removeEventListener(px,p),mS.remove(b)},0)}}},[u,h,p,b]);const j=y.useCallback(w=>{if(!s&&!a||b.paused)return;const N=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(N&&E){const C=w.currentTarget,[S,P]=iV(C);S&&P?!w.shiftKey&&E===P?(w.preventDefault(),s&&oo(S,{select:!0})):w.shiftKey&&E===S&&(w.preventDefault(),s&&oo(P,{select:!0})):E===C&&w.preventDefault()}},[s,a,b.paused]);return r.jsx(We.div,{tabIndex:-1,...c,ref:x,onKeyDown:j})});Xm.displayName=nV;function oV(t,{select:e=!1}={}){const s=document.activeElement;for(const a of t)if(oo(a,{select:e}),document.activeElement!==s)return}function iV(t){const e=QC(t),s=hS(e,t),a=hS(e.reverse(),t);return[s,a]}function QC(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function hS(t,e){for(const s of t)if(!lV(s,{upTo:e}))return s}function lV(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function cV(t){return t instanceof HTMLInputElement&&"select"in t}function oo(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&cV(t)&&e&&t.select()}}var mS=uV();function uV(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=pS(t,e),t.unshift(e)},remove(e){var s;t=pS(t,e),(s=t[0])==null||s.resume()}}}function pS(t,e){const s=[...t],a=s.indexOf(e);return a!==-1&&s.splice(a,1),s}function dV(t){return t.filter(e=>e.tagName!=="A")}var fV="Portal",Ym=y.forwardRef((t,e)=>{var u;const{container:s,...a}=t,[n,i]=y.useState(!1);gs(()=>i(!0),[]);const c=s||n&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?kE.createPortal(r.jsx(We.div,{...a,ref:e}),c):null});Ym.displayName=fV;function hV(t,e){return y.useReducer((s,a)=>e[s][a]??s,t)}var Va=t=>{const{present:e,children:s}=t,a=mV(e),n=typeof s=="function"?s({present:a.isPresent}):y.Children.only(s),i=_t(a.ref,pV(n));return typeof s=="function"||a.isPresent?y.cloneElement(n,{ref:i}):null};Va.displayName="Presence";function mV(t){const[e,s]=y.useState(),a=y.useRef(null),n=y.useRef(t),i=y.useRef("none"),c=t?"mounted":"unmounted",[u,f]=hV(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=gh(a.current);i.current=u==="mounted"?h:"none"},[u]),gs(()=>{const h=a.current,p=n.current;if(p!==t){const x=i.current,b=gh(h);t?f("MOUNT"):b==="none"||(h==null?void 0:h.display)==="none"?f("UNMOUNT"):f(p&&x!==b?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,f]),gs(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=b=>{const w=gh(a.current).includes(b.animationName);if(b.target===e&&w&&(f("ANIMATION_END"),!n.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},x=b=>{b.target===e&&(i.current=gh(a.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:y.useCallback(h=>{a.current=h?getComputedStyle(h):null,s(h)},[])}}function gh(t){return(t==null?void 0:t.animationName)||"none"}function pV(t){var a,n;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var gx=0;function wy(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??gS()),document.body.insertAdjacentElement("beforeend",t[1]??gS()),gx++,()=>{gx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),gx--}},[])}function gS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ir=function(){return Ir=Object.assign||function(e){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Ir.apply(this,arguments)};function JC(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s}function gV(t,e,s){if(s||arguments.length===2)for(var a=0,n=e.length,i;a<n;a++)(i||!(a in e))&&(i||(i=Array.prototype.slice.call(e,0,a)),i[a]=e[a]);return t.concat(i||Array.prototype.slice.call(e))}var Oh="right-scroll-bar-position",$h="width-before-scroll-bar",xV="with-scroll-bars-hidden",vV="--removed-body-scroll-bar-size";function xx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function yV(t,e){var s=y.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(a){var n=s.value;n!==a&&(s.value=a,s.callback(a,n))}}}})[0];return s.callback=e,s.facade}var bV=typeof window<"u"?y.useLayoutEffect:y.useEffect,xS=new WeakMap;function _V(t,e){var s=yV(null,function(a){return t.forEach(function(n){return xx(n,a)})});return bV(function(){var a=xS.get(s);if(a){var n=new Set(a),i=new Set(t),c=s.current;n.forEach(function(u){i.has(u)||xx(u,null)}),i.forEach(function(u){n.has(u)||xx(u,c)})}xS.set(s,t)},[t]),s}function wV(t){return t}function jV(t,e){e===void 0&&(e=wV);var s=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(i){var c=e(i,a);return s.push(c),function(){s=s.filter(function(u){return u!==c})}},assignSyncMedium:function(i){for(a=!0;s.length;){var c=s;s=[],c.forEach(i)}s={push:function(u){return i(u)},filter:function(){return s}}},assignMedium:function(i){a=!0;var c=[];if(s.length){var u=s;s=[],u.forEach(i),c=s}var f=function(){var p=c;c=[],p.forEach(i)},h=function(){return Promise.resolve().then(f)};h(),s={push:function(p){c.push(p),h()},filter:function(p){return c=c.filter(p),s}}}};return n}function NV(t){t===void 0&&(t={});var e=jV(null);return e.options=Ir({async:!0,ssr:!1},t),e}var ek=function(t){var e=t.sideCar,s=JC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=e.read();if(!a)throw new Error("Sidecar medium not found");return y.createElement(a,Ir({},s))};ek.isSideCarExport=!0;function SV(t,e){return t.useMedium(e),ek}var tk=NV(),vx=function(){},Km=y.forwardRef(function(t,e){var s=y.useRef(null),a=y.useState({onScrollCapture:vx,onWheelCapture:vx,onTouchMoveCapture:vx}),n=a[0],i=a[1],c=t.forwardProps,u=t.children,f=t.className,h=t.removeScrollBar,p=t.enabled,g=t.shards,x=t.sideCar,b=t.noRelative,j=t.noIsolation,w=t.inert,N=t.allowPinchZoom,E=t.as,C=E===void 0?"div":E,S=t.gapMode,P=JC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,D=_V([s,e]),$=Ir(Ir({},P),n);return y.createElement(y.Fragment,null,p&&y.createElement(R,{sideCar:tk,removeScrollBar:h,shards:g,noRelative:b,noIsolation:j,inert:w,setCallbacks:i,allowPinchZoom:!!N,lockRef:s,gapMode:S}),c?y.cloneElement(y.Children.only(u),Ir(Ir({},$),{ref:D})):y.createElement(C,Ir({},$,{className:f,ref:D}),u))});Km.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Km.classNames={fullWidth:$h,zeroRight:Oh};var EV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function CV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=EV();return e&&t.setAttribute("nonce",e),t}function kV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function AV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var TV=function(){var t=0,e=null;return{add:function(s){t==0&&(e=CV())&&(kV(e,s),AV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},RV=function(){var t=TV();return function(e,s){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},sk=function(){var t=RV(),e=function(s){var a=s.styles,n=s.dynamic;return t(a,n),null};return e},MV={left:0,top:0,right:0,gap:0},yx=function(t){return parseInt(t||"",10)||0},PV=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],a=e[t==="padding"?"paddingTop":"marginTop"],n=e[t==="padding"?"paddingRight":"marginRight"];return[yx(s),yx(a),yx(n)]},DV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return MV;var e=PV(t),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,a-s+e[2]-e[0])}},OV=sk(),nc="data-scroll-locked",$V=function(t,e,s,a){var n=t.left,i=t.top,c=t.right,u=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(xV,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(u,"px ").concat(a,`;
  }
  body[`).concat(nc,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(a,";"),s==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(a,`;
    `),s==="padding"&&"padding-right: ".concat(u,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oh,` {
    right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat($h,` {
    margin-right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat(Oh," .").concat(Oh,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat($h," .").concat($h,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(nc,`] {
    `).concat(vV,": ").concat(u,`px;
  }
`)},vS=function(){var t=parseInt(document.body.getAttribute(nc)||"0",10);return isFinite(t)?t:0},LV=function(){y.useEffect(function(){return document.body.setAttribute(nc,(vS()+1).toString()),function(){var t=vS()-1;t<=0?document.body.removeAttribute(nc):document.body.setAttribute(nc,t.toString())}},[])},IV=function(t){var e=t.noRelative,s=t.noImportant,a=t.gapMode,n=a===void 0?"margin":a;LV();var i=y.useMemo(function(){return DV(n)},[n]);return y.createElement(OV,{styles:$V(i,!e,n,s?"":"!important")})},jv=!1;if(typeof window<"u")try{var xh=Object.defineProperty({},"passive",{get:function(){return jv=!0,!0}});window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{jv=!1}var Bl=jv?{passive:!1}:!1,BV=function(t){return t.tagName==="TEXTAREA"},ak=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!BV(t)&&s[e]==="visible")},VV=function(t){return ak(t,"overflowY")},qV=function(t){return ak(t,"overflowX")},yS=function(t,e){var s=e.ownerDocument,a=e;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=rk(t,a);if(n){var i=nk(t,a),c=i[1],u=i[2];if(c>u)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},UV=function(t){var e=t.scrollTop,s=t.scrollHeight,a=t.clientHeight;return[e,s,a]},zV=function(t){var e=t.scrollLeft,s=t.scrollWidth,a=t.clientWidth;return[e,s,a]},rk=function(t,e){return t==="v"?VV(e):qV(e)},nk=function(t,e){return t==="v"?UV(e):zV(e)},FV=function(t,e){return t==="h"&&e==="rtl"?-1:1},HV=function(t,e,s,a,n){var i=FV(t,window.getComputedStyle(e).direction),c=i*a,u=s.target,f=e.contains(u),h=!1,p=c>0,g=0,x=0;do{if(!u)break;var b=nk(t,u),j=b[0],w=b[1],N=b[2],E=w-N-i*j;(j||E)&&rk(t,u)&&(g+=E,x+=j);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(p&&Math.abs(g)<1||!p&&Math.abs(x)<1)&&(h=!0),h},vh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bS=function(t){return[t.deltaX,t.deltaY]},_S=function(t){return t&&"current"in t?t.current:t},GV=function(t,e){return t[0]===e[0]&&t[1]===e[1]},XV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},YV=0,Vl=[];function KV(t){var e=y.useRef([]),s=y.useRef([0,0]),a=y.useRef(),n=y.useState(YV++)[0],i=y.useState(sk)[0],c=y.useRef(t);y.useEffect(function(){c.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var w=gV([t.lockRef.current],(t.shards||[]).map(_S),!0).filter(Boolean);return w.forEach(function(N){return N.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),w.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var u=y.useCallback(function(w,N){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!c.current.allowPinchZoom;var E=vh(w),C=s.current,S="deltaX"in w?w.deltaX:C[0]-E[0],P="deltaY"in w?w.deltaY:C[1]-E[1],R,D=w.target,$=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in w&&$==="h"&&D.type==="range")return!1;var k=yS($,D);if(!k)return!0;if(k?R=$:(R=$==="v"?"h":"v",k=yS($,D)),!k)return!1;if(!a.current&&"changedTouches"in w&&(S||P)&&(a.current=R),!R)return!0;var M=a.current||R;return HV(M,N,w,M==="h"?S:P)},[]),f=y.useCallback(function(w){var N=w;if(!(!Vl.length||Vl[Vl.length-1]!==i)){var E="deltaY"in N?bS(N):vh(N),C=e.current.filter(function(R){return R.name===N.type&&(R.target===N.target||N.target===R.shadowParent)&&GV(R.delta,E)})[0];if(C&&C.should){N.cancelable&&N.preventDefault();return}if(!C){var S=(c.current.shards||[]).map(_S).filter(Boolean).filter(function(R){return R.contains(N.target)}),P=S.length>0?u(N,S[0]):!c.current.noIsolation;P&&N.cancelable&&N.preventDefault()}}},[]),h=y.useCallback(function(w,N,E,C){var S={name:w,delta:N,target:E,should:C,shadowParent:WV(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),p=y.useCallback(function(w){s.current=vh(w),a.current=void 0},[]),g=y.useCallback(function(w){h(w.type,bS(w),w.target,u(w,t.lockRef.current))},[]),x=y.useCallback(function(w){h(w.type,vh(w),w.target,u(w,t.lockRef.current))},[]);y.useEffect(function(){return Vl.push(i),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:x}),document.addEventListener("wheel",f,Bl),document.addEventListener("touchmove",f,Bl),document.addEventListener("touchstart",p,Bl),function(){Vl=Vl.filter(function(w){return w!==i}),document.removeEventListener("wheel",f,Bl),document.removeEventListener("touchmove",f,Bl),document.removeEventListener("touchstart",p,Bl)}},[]);var b=t.removeScrollBar,j=t.inert;return y.createElement(y.Fragment,null,j?y.createElement(i,{styles:XV(n)}):null,b?y.createElement(IV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function WV(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const ZV=SV(tk,KV);var Wm=y.forwardRef(function(t,e){return y.createElement(Km,Ir({},t,{ref:e,sideCar:ZV}))});Wm.classNames=Km.classNames;var QV=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ql=new WeakMap,yh=new WeakMap,bh={},bx=0,ok=function(t){return t&&(t.host||ok(t.parentNode))},JV=function(t,e){return e.map(function(s){if(t.contains(s))return s;var a=ok(s);return a&&t.contains(a)?a:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},eq=function(t,e,s,a){var n=JV(e,Array.isArray(t)?t:[t]);bh[s]||(bh[s]=new WeakMap);var i=bh[s],c=[],u=new Set,f=new Set(n),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};n.forEach(h);var p=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(x){if(u.has(x))p(x);else try{var b=x.getAttribute(a),j=b!==null&&b!=="false",w=(ql.get(x)||0)+1,N=(i.get(x)||0)+1;ql.set(x,w),i.set(x,N),c.push(x),w===1&&j&&yh.set(x,!0),N===1&&x.setAttribute(s,"true"),j||x.setAttribute(a,"true")}catch(E){console.error("aria-hidden: cannot operate on ",x,E)}})};return p(e),u.clear(),bx++,function(){c.forEach(function(g){var x=ql.get(g)-1,b=i.get(g)-1;ql.set(g,x),i.set(g,b),x||(yh.has(g)||g.removeAttribute(a),yh.delete(g)),b||g.removeAttribute(s)}),bx--,bx||(ql=new WeakMap,ql=new WeakMap,yh=new WeakMap,bh={})}},jy=function(t,e,s){s===void 0&&(s="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),n=QV(t);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),eq(a,n,s,"aria-hidden")):function(){return null}},Zm="Dialog",[ik,HW]=or(Zm),[tq,Rr]=ik(Zm),lk=t=>{const{__scopeDialog:e,children:s,open:a,defaultOpen:n,onOpenChange:i,modal:c=!0}=t,u=y.useRef(null),f=y.useRef(null),[h,p]=Ro({prop:a,defaultProp:n??!1,onChange:i,caller:Zm});return r.jsx(tq,{scope:e,triggerRef:u,contentRef:f,contentId:Hr(),titleId:Hr(),descriptionId:Hr(),open:h,onOpenChange:p,onOpenToggle:y.useCallback(()=>p(g=>!g),[p]),modal:c,children:s})};lk.displayName=Zm;var ck="DialogTrigger",uk=y.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=Rr(ck,s),i=_t(e,n.triggerRef);return r.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ey(n.open),...a,ref:i,onClick:Ge(t.onClick,n.onOpenToggle)})});uk.displayName=ck;var Ny="DialogPortal",[sq,dk]=ik(Ny,{forceMount:void 0}),fk=t=>{const{__scopeDialog:e,forceMount:s,children:a,container:n}=t,i=Rr(Ny,e);return r.jsx(sq,{scope:e,forceMount:s,children:y.Children.map(a,c=>r.jsx(Va,{present:s||i.open,children:r.jsx(Ym,{asChild:!0,container:n,children:c})}))})};fk.displayName=Ny;var fm="DialogOverlay",hk=y.forwardRef((t,e)=>{const s=dk(fm,t.__scopeDialog),{forceMount:a=s.forceMount,...n}=t,i=Rr(fm,t.__scopeDialog);return i.modal?r.jsx(Va,{present:a||i.open,children:r.jsx(rq,{...n,ref:e})}):null});hk.displayName=fm;var aq=Ti("DialogOverlay.RemoveScroll"),rq=y.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=Rr(fm,s);return r.jsx(Wm,{as:aq,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(We.div,{"data-state":Ey(n.open),...a,ref:e,style:{pointerEvents:"auto",...a.style}})})}),Ri="DialogContent",mk=y.forwardRef((t,e)=>{const s=dk(Ri,t.__scopeDialog),{forceMount:a=s.forceMount,...n}=t,i=Rr(Ri,t.__scopeDialog);return r.jsx(Va,{present:a||i.open,children:i.modal?r.jsx(nq,{...n,ref:e}):r.jsx(oq,{...n,ref:e})})});mk.displayName=Ri;var nq=y.forwardRef((t,e)=>{const s=Rr(Ri,t.__scopeDialog),a=y.useRef(null),n=_t(e,s.contentRef,a);return y.useEffect(()=>{const i=a.current;if(i)return jy(i)},[]),r.jsx(pk,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(t.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ge(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&i.preventDefault()}),onFocusOutside:Ge(t.onFocusOutside,i=>i.preventDefault())})}),oq=y.forwardRef((t,e)=>{const s=Rr(Ri,t.__scopeDialog),a=y.useRef(!1),n=y.useRef(!1);return r.jsx(pk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(a.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),pk=y.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,...c}=t,u=Rr(Ri,s),f=y.useRef(null),h=_t(e,f);return wy(),r.jsxs(r.Fragment,{children:[r.jsx(Xm,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:r.jsx($d,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Ey(u.open),...c,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(iq,{titleId:u.titleId}),r.jsx(cq,{contentRef:f,descriptionId:u.descriptionId})]})]})}),Sy="DialogTitle",gk=y.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=Rr(Sy,s);return r.jsx(We.h2,{id:n.titleId,...a,ref:e})});gk.displayName=Sy;var xk="DialogDescription",vk=y.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=Rr(xk,s);return r.jsx(We.p,{id:n.descriptionId,...a,ref:e})});vk.displayName=xk;var yk="DialogClose",bk=y.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=Rr(yk,s);return r.jsx(We.button,{type:"button",...a,ref:e,onClick:Ge(t.onClick,()=>n.onOpenChange(!1))})});bk.displayName=yk;function Ey(t){return t?"open":"closed"}var _k="DialogTitleWarning",[GW,wk]=UB(_k,{contentName:Ri,titleName:Sy,docsSlug:"dialog"}),iq=({titleId:t})=>{const e=wk(_k),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},lq="DialogDescriptionWarning",cq=({contentRef:t,descriptionId:e})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wk(lq).contentName}}.`;return y.useEffect(()=>{var i;const n=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&n&&(document.getElementById(e)||console.warn(a))},[a,t,e]),null},jk=lk,uq=uk,Nk=fk,Qm=hk,Jm=mk,ep=gk,Sk=vk,Ek=bk;const dq=jk,fq=uq,hq=Nk,Ck=y.forwardRef(({className:t,...e},s)=>r.jsx(Qm,{className:Ve("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));Ck.displayName=Qm.displayName;const mq=Od("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),kk=y.forwardRef(({side:t="right",className:e,children:s,...a},n)=>r.jsxs(hq,{children:[r.jsx(Ck,{}),r.jsxs(Jm,{ref:n,className:Ve(mq({side:t}),e),...a,children:[s,r.jsxs(Ek,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Bi,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kk.displayName=Jm.displayName;const Ak=({className:t,...e})=>r.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ak.displayName="SheetHeader";const Tk=y.forwardRef(({className:t,...e},s)=>r.jsx(ep,{ref:s,className:Ve("text-lg font-semibold text-foreground",t),...e}));Tk.displayName=ep.displayName;function pq(){const[t,e]=y.useState(()=>typeof window>"u"?"system":localStorage.getItem("theme")||"system"),[s,a]=y.useState("dark");return y.useEffect(()=>{const i=window.document.documentElement,c=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",u=f=>{const h=f==="system"?c():f;a(h),i.classList.remove("light","dark"),i.classList.add(h)};if(u(t),t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>u(t);return f.addEventListener("change",h),()=>f.removeEventListener("change",h)}},[t]),{theme:t,setTheme:i=>{e(i),localStorage.setItem("theme",i)},resolvedTheme:s}}const gq=(t,e)=>{const s=[...e?[]:[{href:"/game",icon:yy,label:"Jogar"}],{href:"/game/ranking",icon:Er,label:"Ranking"},{href:"/game/guide",icon:p8,label:"Guia"}];switch(t){case"ADMIN":return[...s,{href:"/users",icon:dm,label:"Admin"}];default:return s}};function xq({userName:t}){const e=$i(),s=Pt(),a=e.pathname,{user:n}=zs(),{resolvedTheme:i,setTheme:c}=pq(),u=a.startsWith("/game/play/"),f=gq(n==null?void 0:n.role,u),h=p=>{s({to:p})};return r.jsxs("header",{className:"flex w-full flex-col bg-gradient-to-b from-background/90 to-background/70 border-b border-border",children:[r.jsxs("div",{className:"flex w-full items-center justify-between px-4 py-3",children:[r.jsx("button",{onClick:()=>h("/game"),className:"group",children:r.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qB,{}),r.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-muted-foreground",children:[r.jsx(dm,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:t})]}),r.jsx(de,{variant:"ghost",size:"icon",onClick:()=>c(i==="dark"?"light":"dark"),className:"text-muted-foreground hover:text-primary transition-colors",title:i==="dark"?"Modo claro":"Modo escuro",children:i==="dark"?r.jsx(tS,{className:"h-5 w-5"}):r.jsx(JN,{className:"h-5 w-5"})}),r.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/profile"),children:r.jsx(dm,{className:"h-5 w-5"})}),r.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/logout"),children:r.jsx(JI,{className:"h-5 w-5"})}),r.jsxs(dq,{children:[r.jsx(fq,{asChild:!0,children:r.jsx(de,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors lg:hidden",children:r.jsx(r8,{className:"h-5 w-5"})})}),r.jsxs(kk,{side:"left",className:"w-[300px] bg-background border-r border-border p-0",children:[r.jsx(Ak,{className:"border-b border-border p-4",children:r.jsx(Tk,{children:"Menu Principal"})}),r.jsxs("div",{className:"flex flex-col py-2",children:[f.map(p=>{const g=p.icon,x=a===p.href;return r.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-left ${x?"bg-accent text-primary":"text-muted-foreground"}`,children:[r.jsx(g,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)}),r.jsx("button",{onClick:()=>c(i==="dark"?"light":"dark"),className:"flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-muted-foreground text-left",children:i==="dark"?r.jsxs(r.Fragment,{children:[r.jsx(tS,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Modo Claro"})]}):r.jsxs(r.Fragment,{children:[r.jsx(JN,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Modo Escuro"})]})})]})]})]})]})]}),r.jsx("nav",{className:"hidden border-t border-border lg:block",children:r.jsx("div",{className:"flex items-center justify-center gap-1 px-2",children:f.map(p=>{const g=p.icon,x=a===p.href;return r.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-2 rounded-md px-4 py-3 transition-colors hover:bg-accent ${x?"text-primary":"text-muted-foreground"}`,children:[r.jsx(g,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)})})})]})}const vq=Yt("/_authenticated")({component:bq});function yq(){const{user:t}=zs();return r.jsxs("div",{className:"flex min-h-screen flex-col",children:[r.jsx(xq,{userName:(t==null?void 0:t.username)||"Usuário"}),r.jsx("main",{className:"flex-1",children:r.jsx($o,{})}),r.jsx(YC,{})]})}function bq(){return r.jsx(BB,{children:r.jsx(VB,{children:r.jsx(yq,{})})})}const _q=Yt("/")({beforeLoad:()=>{throw jP({to:"/game"})}}),wq=Yt("/_public/logout")({component:jq});function jq(){const{signOut:t,user:e}=zs(),s=Pt();return y.useEffect(()=>{(async()=>{e&&(pe.info("Encerrando sessão..."),await t()),setTimeout(()=>{s({to:"/auth",search:{auth:"true"}})},1e3)})()},[t,s,e]),r.jsx("div",{className:"flex min-h-screen items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Ai,{}),r.jsx("p",{className:"text-muted-foreground",children:"Encerrando sessão..."})]})})}var Ld=t=>t.type==="checkbox",yi=t=>t instanceof Date,la=t=>t==null;const Rk=t=>typeof t=="object";var us=t=>!la(t)&&!Array.isArray(t)&&Rk(t)&&!yi(t),Mk=t=>us(t)&&t.target?Ld(t.target)?t.target.checked:t.target.value:t,Nq=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Pk=(t,e)=>t.has(Nq(e)),Sq=t=>{const e=t.constructor&&t.constructor.prototype;return us(e)&&e.hasOwnProperty("isPrototypeOf")},Cy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function qs(t){let e;const s=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(Cy&&(t instanceof Blob||a))&&(s||us(t)))if(e=s?[]:{},!s&&!Sq(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=qs(t[n]));else return t;return e}var tp=t=>Array.isArray(t)?t.filter(Boolean):[],ls=t=>t===void 0,Me=(t,e,s)=>{if(!e||!us(t))return s;const a=tp(e.split(/[,[\].]+?/)).reduce((n,i)=>la(n)?n:n[i],t);return ls(a)||a===t?ls(t[e])?s:t[e]:a},Pa=t=>typeof t=="boolean",ky=t=>/^\w*$/.test(t),Dk=t=>tp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Tt=(t,e,s)=>{let a=-1;const n=ky(e)?[e]:Dk(e),i=n.length,c=i-1;for(;++a<i;){const u=n[a];let f=s;if(a!==c){const h=t[u];f=us(h)||Array.isArray(h)?h:isNaN(+n[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=f,t=t[u]}};const hm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},yr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ok=he.createContext(null),sp=()=>he.useContext(Ok),Eq=t=>{const{children:e,...s}=t;return he.createElement(Ok.Provider,{value:s},e)};var $k=(t,e,s,a=!0)=>{const n={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const c=i;return e._proxyFormState[c]!==yr.all&&(e._proxyFormState[c]=!a||yr.all),s&&(s[c]=!0),t[c]}});return n};const Ay=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Cq(t){const e=sp(),{control:s=e.control,disabled:a,name:n,exact:i}=t||{},[c,u]=he.useState(s._formState),f=he.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ay(()=>s._subscribe({name:n,formState:f.current,exact:i,callback:h=>{!a&&u({...s._formState,...h})}}),[n,a,i]),he.useEffect(()=>{f.current.isValid&&s._setValid(!0)},[s]),he.useMemo(()=>$k(c,s,f.current,!1),[c,s])}var Vr=t=>typeof t=="string",Lk=(t,e,s,a,n)=>Vr(t)?(a&&e.watch.add(t),Me(s,t,n)):Array.isArray(t)?t.map(i=>(a&&e.watch.add(i),Me(s,i))):(a&&(e.watchAll=!0),s);function kq(t){const e=sp(),{control:s=e.control,name:a,defaultValue:n,disabled:i,exact:c}=t||{},u=he.useRef(n),[f,h]=he.useState(s._getWatch(a,u.current));return Ay(()=>s._subscribe({name:a,formState:{values:!0},exact:c,callback:p=>!i&&h(Lk(a,s._names,p.values||s._formValues,!1,u.current))}),[a,s,i,c]),he.useEffect(()=>s._removeUnmounted()),f}function Aq(t){const e=sp(),{name:s,disabled:a,control:n=e.control,shouldUnregister:i}=t,c=Pk(n._names.array,s),u=kq({control:n,name:s,defaultValue:Me(n._formValues,s,Me(n._defaultValues,s,t.defaultValue)),exact:!0}),f=Cq({control:n,name:s,exact:!0}),h=he.useRef(t),p=he.useRef(n.register(s,{...t.rules,value:u,...Pa(t.disabled)?{disabled:t.disabled}:{}})),g=he.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Me(f.errors,s)},isDirty:{enumerable:!0,get:()=>!!Me(f.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Me(f.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Me(f.validatingFields,s)},error:{enumerable:!0,get:()=>Me(f.errors,s)}}),[f,s]),x=he.useCallback(N=>p.current.onChange({target:{value:Mk(N),name:s},type:hm.CHANGE}),[s]),b=he.useCallback(()=>p.current.onBlur({target:{value:Me(n._formValues,s),name:s},type:hm.BLUR}),[s,n._formValues]),j=he.useCallback(N=>{const E=Me(n._fields,s);E&&N&&(E._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:C=>N.setCustomValidity(C),reportValidity:()=>N.reportValidity()})},[n._fields,s]),w=he.useMemo(()=>({name:s,value:u,...Pa(a)||f.disabled?{disabled:f.disabled||a}:{},onChange:x,onBlur:b,ref:j}),[s,a,f.disabled,x,b,j,u]);return he.useEffect(()=>{const N=n._options.shouldUnregister||i;n.register(s,{...h.current.rules,...Pa(h.current.disabled)?{disabled:h.current.disabled}:{}});const E=(C,S)=>{const P=Me(n._fields,C);P&&P._f&&(P._f.mount=S)};if(E(s,!0),N){const C=qs(Me(n._options.defaultValues,s));Tt(n._defaultValues,s,C),ls(Me(n._formValues,s))&&Tt(n._formValues,s,C)}return!c&&n.register(s),()=>{(c?N&&!n._state.action:N)?n.unregister(s):E(s,!1)}},[s,n,c,i]),he.useEffect(()=>{n._setDisabledField({disabled:a,name:s})},[a,s,n]),he.useMemo(()=>({field:w,formState:f,fieldState:g}),[w,f,g])}const Tq=t=>t.render(Aq(t));var Ty=(t,e,s,a,n)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[a]:n||!0}}:{},ld=t=>Array.isArray(t)?t:[t],wS=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}},Nv=t=>la(t)||!Rk(t);function ho(t,e){if(Nv(t)||Nv(e))return t===e;if(yi(t)&&yi(e))return t.getTime()===e.getTime();const s=Object.keys(t),a=Object.keys(e);if(s.length!==a.length)return!1;for(const n of s){const i=t[n];if(!a.includes(n))return!1;if(n!=="ref"){const c=e[n];if(yi(i)&&yi(c)||us(i)&&us(c)||Array.isArray(i)&&Array.isArray(c)?!ho(i,c):i!==c)return!1}}return!0}var ba=t=>us(t)&&!Object.keys(t).length,Ry=t=>t.type==="file",br=t=>typeof t=="function",mm=t=>{if(!Cy)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ik=t=>t.type==="select-multiple",My=t=>t.type==="radio",Rq=t=>My(t)||Ld(t),_x=t=>mm(t)&&t.isConnected;function Mq(t,e){const s=e.slice(0,-1).length;let a=0;for(;a<s;)t=ls(t)?a++:t[e[a++]];return t}function Pq(t){for(const e in t)if(t.hasOwnProperty(e)&&!ls(t[e]))return!1;return!0}function _s(t,e){const s=Array.isArray(e)?e:ky(e)?[e]:Dk(e),a=s.length===1?t:Mq(t,s),n=s.length-1,i=s[n];return a&&delete a[i],n!==0&&(us(a)&&ba(a)||Array.isArray(a)&&Pq(a))&&_s(t,s.slice(0,-1)),t}var Bk=t=>{for(const e in t)if(br(t[e]))return!0;return!1};function pm(t,e={}){const s=Array.isArray(t);if(us(t)||s)for(const a in t)Array.isArray(t[a])||us(t[a])&&!Bk(t[a])?(e[a]=Array.isArray(t[a])?[]:{},pm(t[a],e[a])):la(t[a])||(e[a]=!0);return e}function Vk(t,e,s){const a=Array.isArray(t);if(us(t)||a)for(const n in t)Array.isArray(t[n])||us(t[n])&&!Bk(t[n])?ls(e)||Nv(s[n])?s[n]=Array.isArray(t[n])?pm(t[n],[]):{...pm(t[n])}:Vk(t[n],la(e)?{}:e[n],s[n]):s[n]=!ho(t[n],e[n]);return s}var Ou=(t,e)=>Vk(t,e,pm(e));const jS={value:!1,isValid:!1},NS={value:!0,isValid:!0};var qk=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ls(t[0].attributes.value)?ls(t[0].value)||t[0].value===""?NS:{value:t[0].value,isValid:!0}:NS:jS}return jS},Uk=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:a})=>ls(t)?t:e?t===""?NaN:t&&+t:s&&Vr(t)?new Date(t):a?a(t):t;const SS={isValid:!1,value:null};var zk=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,SS):SS;function ES(t){const e=t.ref;return Ry(e)?e.files:My(e)?zk(t.refs).value:Ik(e)?[...e.selectedOptions].map(({value:s})=>s):Ld(e)?qk(t.refs).value:Uk(ls(e.value)?t.ref.value:e.value,t)}var Dq=(t,e,s,a)=>{const n={};for(const i of t){const c=Me(e,i);c&&Tt(n,i,c._f)}return{criteriaMode:s,names:[...t],fields:n,shouldUseNativeValidation:a}},gm=t=>t instanceof RegExp,$u=t=>ls(t)?t:gm(t)?t.source:us(t)?gm(t.value)?t.value.source:t.value:t,CS=t=>({isOnSubmit:!t||t===yr.onSubmit,isOnBlur:t===yr.onBlur,isOnChange:t===yr.onChange,isOnAll:t===yr.all,isOnTouch:t===yr.onTouched});const kS="AsyncFunction";var Oq=t=>!!t&&!!t.validate&&!!(br(t.validate)&&t.validate.constructor.name===kS||us(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===kS)),$q=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),AS=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const cd=(t,e,s,a)=>{for(const n of s||Object.keys(t)){const i=Me(t,n);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],n)&&!a)return!0;if(c.ref&&e(c.ref,c.name)&&!a)return!0;if(cd(u,e))break}else if(us(u)&&cd(u,e))break}}};function TS(t,e,s){const a=Me(t,s);if(a||ky(s))return{error:a,name:s};const n=s.split(".");for(;n.length;){const i=n.join("."),c=Me(e,i),u=Me(t,i);if(c&&!Array.isArray(c)&&s!==i)return{name:s};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};n.pop()}return{name:s}}var Lq=(t,e,s,a)=>{s(t);const{name:n,...i}=t;return ba(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!a||yr.all))},Iq=(t,e,s)=>!t||!e||t===e||ld(t).some(a=>a&&(s?a===e:a.startsWith(e)||e.startsWith(a))),Bq=(t,e,s,a,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(e||t):(s?a.isOnBlur:n.isOnBlur)?!t:(s?a.isOnChange:n.isOnChange)?t:!0,Vq=(t,e)=>!tp(Me(t,e)).length&&_s(t,e),qq=(t,e,s)=>{const a=ld(Me(t,s));return Tt(a,"root",e[s]),Tt(t,s,a),t},Lh=t=>Vr(t);function RS(t,e,s="validate"){if(Lh(t)||Array.isArray(t)&&t.every(Lh)||Pa(t)&&!t)return{type:s,message:Lh(t)?t:"",ref:e}}var Ul=t=>us(t)&&!gm(t)?t:{value:t,message:""},MS=async(t,e,s,a,n,i)=>{const{ref:c,refs:u,required:f,maxLength:h,minLength:p,min:g,max:x,pattern:b,validate:j,name:w,valueAsNumber:N,mount:E}=t._f,C=Me(s,w);if(!E||e.has(w))return{};const S=u?u[0]:c,P=B=>{n&&S.reportValidity&&(S.setCustomValidity(Pa(B)?"":B||""),S.reportValidity())},R={},D=My(c),$=Ld(c),k=D||$,M=(N||Ry(c))&&ls(c.value)&&ls(C)||mm(c)&&c.value===""||C===""||Array.isArray(C)&&!C.length,V=Ty.bind(null,w,a,R),Y=(B,z,Q,H=bn.maxLength,A=bn.minLength)=>{const I=B?z:Q;R[w]={type:B?H:A,message:I,ref:c,...V(B?H:A,I)}};if(i?!Array.isArray(C)||!C.length:f&&(!k&&(M||la(C))||Pa(C)&&!C||$&&!qk(u).isValid||D&&!zk(u).isValid)){const{value:B,message:z}=Lh(f)?{value:!!f,message:f}:Ul(f);if(B&&(R[w]={type:bn.required,message:z,ref:S,...V(bn.required,z)},!a))return P(z),R}if(!M&&(!la(g)||!la(x))){let B,z;const Q=Ul(x),H=Ul(g);if(!la(C)&&!isNaN(C)){const A=c.valueAsNumber||C&&+C;la(Q.value)||(B=A>Q.value),la(H.value)||(z=A<H.value)}else{const A=c.valueAsDate||new Date(C),I=L=>new Date(new Date().toDateString()+" "+L),q=c.type=="time",K=c.type=="week";Vr(Q.value)&&C&&(B=q?I(C)>I(Q.value):K?C>Q.value:A>new Date(Q.value)),Vr(H.value)&&C&&(z=q?I(C)<I(H.value):K?C<H.value:A<new Date(H.value))}if((B||z)&&(Y(!!B,Q.message,H.message,bn.max,bn.min),!a))return P(R[w].message),R}if((h||p)&&!M&&(Vr(C)||i&&Array.isArray(C))){const B=Ul(h),z=Ul(p),Q=!la(B.value)&&C.length>+B.value,H=!la(z.value)&&C.length<+z.value;if((Q||H)&&(Y(Q,B.message,z.message),!a))return P(R[w].message),R}if(b&&!M&&Vr(C)){const{value:B,message:z}=Ul(b);if(gm(B)&&!C.match(B)&&(R[w]={type:bn.pattern,message:z,ref:c,...V(bn.pattern,z)},!a))return P(z),R}if(j){if(br(j)){const B=await j(C,s),z=RS(B,S);if(z&&(R[w]={...z,...V(bn.validate,z.message)},!a))return P(z.message),R}else if(us(j)){let B={};for(const z in j){if(!ba(B)&&!a)break;const Q=RS(await j[z](C,s),S,z);Q&&(B={...Q,...V(z,Q.message)},P(Q.message),a&&(R[w]=B))}if(!ba(B)&&(R[w]={ref:S,...B},!a))return R}}return P(!0),R};const Uq={mode:yr.onSubmit,reValidateMode:yr.onChange,shouldFocusError:!0};function zq(t={}){let e={...Uq,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:br(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const a={};let n=us(e.defaultValues)||us(e.values)?qs(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:qs(n),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...p};const x={array:wS(),state:wS()},b=e.criteriaMode===yr.all,j=U=>G=>{clearTimeout(h),h=setTimeout(U,G)},w=async U=>{if(!e.disabled&&(p.isValid||g.isValid||U)){const G=e.resolver?ba((await $()).errors):await M(a,!0);G!==s.isValid&&x.state.next({isValid:G})}},N=(U,G)=>{!e.disabled&&(p.isValidating||p.validatingFields||g.isValidating||g.validatingFields)&&((U||Array.from(u.mount)).forEach(Z=>{Z&&(G?Tt(s.validatingFields,Z,G):_s(s.validatingFields,Z))}),x.state.next({validatingFields:s.validatingFields,isValidating:!ba(s.validatingFields)}))},E=(U,G=[],Z,ye,Ne=!0,be=!0)=>{if(ye&&Z&&!e.disabled){if(c.action=!0,be&&Array.isArray(Me(a,U))){const De=Z(Me(a,U),ye.argA,ye.argB);Ne&&Tt(a,U,De)}if(be&&Array.isArray(Me(s.errors,U))){const De=Z(Me(s.errors,U),ye.argA,ye.argB);Ne&&Tt(s.errors,U,De),Vq(s.errors,U)}if((p.touchedFields||g.touchedFields)&&be&&Array.isArray(Me(s.touchedFields,U))){const De=Z(Me(s.touchedFields,U),ye.argA,ye.argB);Ne&&Tt(s.touchedFields,U,De)}(p.dirtyFields||g.dirtyFields)&&(s.dirtyFields=Ou(n,i)),x.state.next({name:U,isDirty:Y(U,G),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Tt(i,U,G)},C=(U,G)=>{Tt(s.errors,U,G),x.state.next({errors:s.errors})},S=U=>{s.errors=U,x.state.next({errors:s.errors,isValid:!1})},P=(U,G,Z,ye)=>{const Ne=Me(a,U);if(Ne){const be=Me(i,U,ls(Z)?Me(n,U):Z);ls(be)||ye&&ye.defaultChecked||G?Tt(i,U,G?be:ES(Ne._f)):Q(U,be),c.mount&&w()}},R=(U,G,Z,ye,Ne)=>{let be=!1,De=!1;const Xe={name:U};if(!e.disabled){if(!Z||ye){(p.isDirty||g.isDirty)&&(De=s.isDirty,s.isDirty=Xe.isDirty=Y(),be=De!==Xe.isDirty);const ot=ho(Me(n,U),G);De=!!Me(s.dirtyFields,U),ot?_s(s.dirtyFields,U):Tt(s.dirtyFields,U,!0),Xe.dirtyFields=s.dirtyFields,be=be||(p.dirtyFields||g.dirtyFields)&&De!==!ot}if(Z){const ot=Me(s.touchedFields,U);ot||(Tt(s.touchedFields,U,Z),Xe.touchedFields=s.touchedFields,be=be||(p.touchedFields||g.touchedFields)&&ot!==Z)}be&&Ne&&x.state.next(Xe)}return be?Xe:{}},D=(U,G,Z,ye)=>{const Ne=Me(s.errors,U),be=(p.isValid||g.isValid)&&Pa(G)&&s.isValid!==G;if(e.delayError&&Z?(f=j(()=>C(U,Z)),f(e.delayError)):(clearTimeout(h),f=null,Z?Tt(s.errors,U,Z):_s(s.errors,U)),(Z?!ho(Ne,Z):Ne)||!ba(ye)||be){const De={...ye,...be&&Pa(G)?{isValid:G}:{},errors:s.errors,name:U};s={...s,...De},x.state.next(De)}},$=async U=>{N(U,!0);const G=await e.resolver(i,e.context,Dq(U||u.mount,a,e.criteriaMode,e.shouldUseNativeValidation));return N(U),G},k=async U=>{const{errors:G}=await $(U);if(U)for(const Z of U){const ye=Me(G,Z);ye?Tt(s.errors,Z,ye):_s(s.errors,Z)}else s.errors=G;return G},M=async(U,G,Z={valid:!0})=>{for(const ye in U){const Ne=U[ye];if(Ne){const{_f:be,...De}=Ne;if(be){const Xe=u.array.has(be.name),ot=Ne._f&&Oq(Ne._f);ot&&p.validatingFields&&N([ye],!0);const wt=await MS(Ne,u.disabled,i,b,e.shouldUseNativeValidation&&!G,Xe);if(ot&&p.validatingFields&&N([ye]),wt[be.name]&&(Z.valid=!1,G))break;!G&&(Me(wt,be.name)?Xe?qq(s.errors,wt,be.name):Tt(s.errors,be.name,wt[be.name]):_s(s.errors,be.name))}!ba(De)&&await M(De,G,Z)}}return Z.valid},V=()=>{for(const U of u.unMount){const G=Me(a,U);G&&(G._f.refs?G._f.refs.every(Z=>!_x(Z)):!_x(G._f.ref))&&ue(U)}u.unMount=new Set},Y=(U,G)=>!e.disabled&&(U&&G&&Tt(i,U,G),!ho(L(),n)),B=(U,G,Z)=>Lk(U,u,{...c.mount?i:ls(G)?n:Vr(U)?{[U]:G}:G},Z,G),z=U=>tp(Me(c.mount?i:n,U,e.shouldUnregister?Me(n,U,[]):[])),Q=(U,G,Z={})=>{const ye=Me(a,U);let Ne=G;if(ye){const be=ye._f;be&&(!be.disabled&&Tt(i,U,Uk(G,be)),Ne=mm(be.ref)&&la(G)?"":G,Ik(be.ref)?[...be.ref.options].forEach(De=>De.selected=Ne.includes(De.value)):be.refs?Ld(be.ref)?be.refs.forEach(De=>{(!De.defaultChecked||!De.disabled)&&(Array.isArray(Ne)?De.checked=!!Ne.find(Xe=>Xe===De.value):De.checked=Ne===De.value||!!Ne)}):be.refs.forEach(De=>De.checked=De.value===Ne):Ry(be.ref)?be.ref.value="":(be.ref.value=Ne,be.ref.type||x.state.next({name:U,values:qs(i)})))}(Z.shouldDirty||Z.shouldTouch)&&R(U,Ne,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&K(U)},H=(U,G,Z)=>{for(const ye in G){if(!G.hasOwnProperty(ye))return;const Ne=G[ye],be=U+"."+ye,De=Me(a,be);(u.array.has(U)||us(Ne)||De&&!De._f)&&!yi(Ne)?H(be,Ne,Z):Q(be,Ne,Z)}},A=(U,G,Z={})=>{const ye=Me(a,U),Ne=u.array.has(U),be=qs(G);Tt(i,U,be),Ne?(x.array.next({name:U,values:qs(i)}),(p.isDirty||p.dirtyFields||g.isDirty||g.dirtyFields)&&Z.shouldDirty&&x.state.next({name:U,dirtyFields:Ou(n,i),isDirty:Y(U,be)})):ye&&!ye._f&&!la(be)?H(U,be,Z):Q(U,be,Z),AS(U,u)&&x.state.next({...s}),x.state.next({name:c.mount?U:void 0,values:qs(i)})},I=async U=>{c.mount=!0;const G=U.target;let Z=G.name,ye=!0;const Ne=Me(a,Z),be=ot=>{ye=Number.isNaN(ot)||yi(ot)&&isNaN(ot.getTime())||ho(ot,Me(i,Z,ot))},De=CS(e.mode),Xe=CS(e.reValidateMode);if(Ne){let ot,wt;const Fs=G.type?ES(Ne._f):Mk(U),Hs=U.type===hm.BLUR||U.type===hm.FOCUS_OUT,qa=!$q(Ne._f)&&!e.resolver&&!Me(s.errors,Z)&&!Ne._f.deps||Bq(Hs,Me(s.touchedFields,Z),s.isSubmitted,Xe,De),Na=AS(Z,u,Hs);Tt(i,Z,Fs),Hs?(Ne._f.onBlur&&Ne._f.onBlur(U),f&&f(0)):Ne._f.onChange&&Ne._f.onChange(U);const Sa=R(Z,Fs,Hs),ra=!ba(Sa)||Na;if(!Hs&&x.state.next({name:Z,type:U.type,values:qs(i)}),qa)return(p.isValid||g.isValid)&&(e.mode==="onBlur"?Hs&&w():Hs||w()),ra&&x.state.next({name:Z,...Na?{}:Sa});if(!Hs&&Na&&x.state.next({...s}),e.resolver){const{errors:na}=await $([Z]);if(be(Fs),ye){const lr=TS(s.errors,a,Z),fa=TS(na,a,lr.name||Z);ot=fa.error,Z=fa.name,wt=ba(na)}}else N([Z],!0),ot=(await MS(Ne,u.disabled,i,b,e.shouldUseNativeValidation))[Z],N([Z]),be(Fs),ye&&(ot?wt=!1:(p.isValid||g.isValid)&&(wt=await M(a,!0)));ye&&(Ne._f.deps&&K(Ne._f.deps),D(Z,wt,ot,Sa))}},q=(U,G)=>{if(Me(s.errors,G)&&U.focus)return U.focus(),1},K=async(U,G={})=>{let Z,ye;const Ne=ld(U);if(e.resolver){const be=await k(ls(U)?U:Ne);Z=ba(be),ye=U?!Ne.some(De=>Me(be,De)):Z}else U?(ye=(await Promise.all(Ne.map(async be=>{const De=Me(a,be);return await M(De&&De._f?{[be]:De}:De)}))).every(Boolean),!(!ye&&!s.isValid)&&w()):ye=Z=await M(a);return x.state.next({...!Vr(U)||(p.isValid||g.isValid)&&Z!==s.isValid?{}:{name:U},...e.resolver||!U?{isValid:Z}:{},errors:s.errors}),G.shouldFocus&&!ye&&cd(a,q,U?Ne:u.mount),ye},L=U=>{const G={...c.mount?i:n};return ls(U)?G:Vr(U)?Me(G,U):U.map(Z=>Me(G,Z))},X=(U,G)=>({invalid:!!Me((G||s).errors,U),isDirty:!!Me((G||s).dirtyFields,U),error:Me((G||s).errors,U),isValidating:!!Me(s.validatingFields,U),isTouched:!!Me((G||s).touchedFields,U)}),ne=U=>{U&&ld(U).forEach(G=>_s(s.errors,G)),x.state.next({errors:U?s.errors:{}})},te=(U,G,Z)=>{const ye=(Me(a,U,{_f:{}})._f||{}).ref,Ne=Me(s.errors,U)||{},{ref:be,message:De,type:Xe,...ot}=Ne;Tt(s.errors,U,{...ot,...G,ref:ye}),x.state.next({name:U,errors:s.errors,isValid:!1}),Z&&Z.shouldFocus&&ye&&ye.focus&&ye.focus()},ie=(U,G)=>br(U)?x.state.subscribe({next:Z=>U(B(void 0,G),Z)}):B(U,G,!0),le=U=>x.state.subscribe({next:G=>{Iq(U.name,G.name,U.exact)&&Lq(G,U.formState||p,Te,U.reRenderRoot)&&U.callback({values:{...i},...s,...G})}}).unsubscribe,ae=U=>(c.mount=!0,g={...g,...U.formState},le({...U,formState:g})),ue=(U,G={})=>{for(const Z of U?ld(U):u.mount)u.mount.delete(Z),u.array.delete(Z),G.keepValue||(_s(a,Z),_s(i,Z)),!G.keepError&&_s(s.errors,Z),!G.keepDirty&&_s(s.dirtyFields,Z),!G.keepTouched&&_s(s.touchedFields,Z),!G.keepIsValidating&&_s(s.validatingFields,Z),!e.shouldUnregister&&!G.keepDefaultValue&&_s(n,Z);x.state.next({values:qs(i)}),x.state.next({...s,...G.keepDirty?{isDirty:Y()}:{}}),!G.keepIsValid&&w()},ce=({disabled:U,name:G})=>{(Pa(U)&&c.mount||U||u.disabled.has(G))&&(U?u.disabled.add(G):u.disabled.delete(G))},we=(U,G={})=>{let Z=Me(a,U);const ye=Pa(G.disabled)||Pa(e.disabled);return Tt(a,U,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:U}},name:U,mount:!0,...G}}),u.mount.add(U),Z?ce({disabled:Pa(G.disabled)?G.disabled:e.disabled,name:U}):P(U,!0,G.value),{...ye?{disabled:G.disabled||e.disabled}:{},...e.progressive?{required:!!G.required,min:$u(G.min),max:$u(G.max),minLength:$u(G.minLength),maxLength:$u(G.maxLength),pattern:$u(G.pattern)}:{},name:U,onChange:I,onBlur:I,ref:Ne=>{if(Ne){we(U,G),Z=Me(a,U);const be=ls(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,De=Rq(be),Xe=Z._f.refs||[];if(De?Xe.find(ot=>ot===be):be===Z._f.ref)return;Tt(a,U,{_f:{...Z._f,...De?{refs:[...Xe.filter(_x),be,...Array.isArray(Me(n,U))?[{}]:[]],ref:{type:be.type,name:U}}:{ref:be}}}),P(U,!1,void 0,be)}else Z=Me(a,U,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||G.shouldUnregister)&&!(Pk(u.array,U)&&c.action)&&u.unMount.add(U)}}},Se=()=>e.shouldFocusError&&cd(a,q,u.mount),je=U=>{Pa(U)&&(x.state.next({disabled:U}),cd(a,(G,Z)=>{const ye=Me(a,Z);ye&&(G.disabled=ye._f.disabled||U,Array.isArray(ye._f.refs)&&ye._f.refs.forEach(Ne=>{Ne.disabled=ye._f.disabled||U}))},0,!1))},Ce=(U,G)=>async Z=>{let ye;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let Ne=qs(i);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:be,values:De}=await $();s.errors=be,Ne=De}else await M(a);if(u.disabled.size)for(const be of u.disabled)Tt(Ne,be,void 0);if(_s(s.errors,"root"),ba(s.errors)){x.state.next({errors:{}});try{await U(Ne,Z)}catch(be){ye=be}}else G&&await G({...s.errors},Z),Se(),setTimeout(Se);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ba(s.errors)&&!ye,submitCount:s.submitCount+1,errors:s.errors}),ye)throw ye},ve=(U,G={})=>{Me(a,U)&&(ls(G.defaultValue)?A(U,qs(Me(n,U))):(A(U,G.defaultValue),Tt(n,U,qs(G.defaultValue))),G.keepTouched||_s(s.touchedFields,U),G.keepDirty||(_s(s.dirtyFields,U),s.isDirty=G.defaultValue?Y(U,qs(Me(n,U))):Y()),G.keepError||(_s(s.errors,U),p.isValid&&w()),x.state.next({...s}))},Pe=(U,G={})=>{const Z=U?qs(U):n,ye=qs(Z),Ne=ba(U),be=Ne?n:ye;if(G.keepDefaultValues||(n=Z),!G.keepValues){if(G.keepDirtyValues){const De=new Set([...u.mount,...Object.keys(Ou(n,i))]);for(const Xe of Array.from(De))Me(s.dirtyFields,Xe)?Tt(be,Xe,Me(i,Xe)):A(Xe,Me(be,Xe))}else{if(Cy&&ls(U))for(const De of u.mount){const Xe=Me(a,De);if(Xe&&Xe._f){const ot=Array.isArray(Xe._f.refs)?Xe._f.refs[0]:Xe._f.ref;if(mm(ot)){const wt=ot.closest("form");if(wt){wt.reset();break}}}}for(const De of u.mount)A(De,Me(be,De))}i=qs(be),x.array.next({values:{...be}}),x.state.next({values:{...be}})}u={mount:G.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!p.isValid||!!G.keepIsValid||!!G.keepDirtyValues,c.watch=!!e.shouldUnregister,x.state.next({submitCount:G.keepSubmitCount?s.submitCount:0,isDirty:Ne?!1:G.keepDirty?s.isDirty:!!(G.keepDefaultValues&&!ho(U,n)),isSubmitted:G.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ne?{}:G.keepDirtyValues?G.keepDefaultValues&&i?Ou(n,i):s.dirtyFields:G.keepDefaultValues&&U?Ou(n,U):G.keepDirty?s.dirtyFields:{},touchedFields:G.keepTouched?s.touchedFields:{},errors:G.keepErrors?s.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},fe=(U,G)=>Pe(br(U)?U(i):U,G),Re=(U,G={})=>{const Z=Me(a,U),ye=Z&&Z._f;if(ye){const Ne=ye.refs?ye.refs[0]:ye.ref;Ne.focus&&(Ne.focus(),G.shouldSelect&&br(Ne.select)&&Ne.select())}},Te=U=>{s={...s,...U}},Ae={control:{register:we,unregister:ue,getFieldState:X,handleSubmit:Ce,setError:te,_subscribe:le,_runSchema:$,_focusError:Se,_getWatch:B,_getDirty:Y,_setValid:w,_setFieldArray:E,_setDisabledField:ce,_setErrors:S,_getFieldArray:z,_reset:Pe,_resetDefaultValues:()=>br(e.defaultValues)&&e.defaultValues().then(U=>{fe(U,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:je,_subjects:x,_proxyFormState:p,get _fields(){return a},get _formValues(){return i},get _state(){return c},set _state(U){c=U},get _defaultValues(){return n},get _names(){return u},set _names(U){u=U},get _formState(){return s},get _options(){return e},set _options(U){e={...e,...U}}},subscribe:ae,trigger:K,register:we,handleSubmit:Ce,watch:ie,setValue:A,getValues:L,reset:fe,resetField:ve,clearErrors:ne,unregister:ue,setError:te,setFocus:Re,getFieldState:X};return{...Ae,formControl:Ae}}function Py(t={}){const e=he.useRef(void 0),s=he.useRef(void 0),[a,n]=he.useState({isDirty:!1,isValidating:!1,isLoading:br(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:br(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:zq(t),formState:a},t.formControl&&t.defaultValues&&!br(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,Ay(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),he.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),he.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),he.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),he.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),he.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==a.isDirty&&i._subjects.state.next({isDirty:c})}},[i,a.isDirty]),he.useEffect(()=>{t.values&&!ho(t.values,s.current)?(i._reset(t.values,i._options.resetOptions),s.current=t.values,n(c=>({...c}))):i._resetDefaultValues()},[i,t.values]),he.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=$k(a,i),e.current}const PS=(t,e,s)=>{if(t&&"reportValidity"in t){const a=Me(s,e);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},Sv=(t,e)=>{for(const s in e.fields){const a=e.fields[s];a&&a.ref&&"reportValidity"in a.ref?PS(a.ref,s,t):a&&a.refs&&a.refs.forEach(n=>PS(n,s,t))}},DS=(t,e)=>{e.shouldUseNativeValidation&&Sv(t,e);const s={};for(const a in t){const n=Me(e.fields,a),i=Object.assign(t[a]||{},{ref:n&&n.ref});if(Fq(e.names||Object.keys(t),a)){const c=Object.assign({},Me(s,a));Tt(c,"root",i),Tt(s,a,c)}else Tt(s,a,i)}return s},Fq=(t,e)=>{const s=OS(e);return t.some(a=>OS(a).match(`^${s}\\.\\d+`))};function OS(t){return t.replace(/\]|\[/g,"")}function Fk(t,e,s){function a(u,f){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(t),e(u,f);for(const p in c.prototype)p in u||Object.defineProperty(u,p,{value:c.prototype[p].bind(u)});u._zod.constr=c,u._zod.def=f}const n=(s==null?void 0:s.Parent)??Object;class i extends n{}function c(u){var f;const h=s!=null&&s.Parent?new i:this;a(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(i,"name",{value:t}),Object.defineProperty(c,"init",{value:a}),Object.defineProperty(c,Symbol.hasInstance,{value:u=>{var f,h;return!!(s!=null&&s.Parent&&u instanceof s.Parent)||((h=(f=u==null?void 0:u._zod)==null?void 0:f.traits)==null?void 0:h.has(t))}}),Object.defineProperty(c,"name",{value:t}),c}class Hq extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Gq={};function Hk(t){return Gq}function Xq(t,e){return typeof e=="bigint"?e.toString():e}function _h(t){return typeof t=="string"?t:t==null?void 0:t.message}function Gk(t,e,s){var n,i,c,u,f,h;const a={...t,path:t.path??[]};if(!t.message){const p=_h((c=(i=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:c.call(i,t))??_h((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??_h((f=s.customError)==null?void 0:f.call(s,t))??_h((h=s.localeError)==null?void 0:h.call(s,t))??"Invalid input";a.message=p}return delete a.inst,delete a.continue,e!=null&&e.reportInput||delete a.input,a}const Xk=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get:()=>JSON.stringify(e,Xq,2),enumerable:!0})},Yq=Fk("$ZodError",Xk),Yk=Fk("$ZodError",Xk,{Parent:Error}),Kq=(t=>(e,s,a,n)=>{const i=a?Object.assign(a,{async:!1}):{async:!1},c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise)throw new Hq;if(c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>Gk(f,i,Hk())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(Yk),Wq=(t=>async(e,s,a,n)=>{const i=a?Object.assign(a,{async:!0}):{async:!0};let c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>Gk(f,i,Hk())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(Yk);function $S(t,e){try{var s=t()}catch(a){return e(a)}return s&&s.then?s.then(void 0,e):s}function Zq(t,e){for(var s={};t.length;){var a=t[0],n=a.code,i=a.message,c=a.path.join(".");if(!s[c])if("unionErrors"in a){var u=a.unionErrors[0].errors[0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(p){return p.errors.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[a.code];s[c]=Ty(c,e,s,n,h?[].concat(h,a.message):a.message)}t.shift()}return s}function Qq(t,e){for(var s={};t.length;){var a=t[0],n=a.code,i=a.message,c=a.path.join(".");if(!s[c])if(a.code==="invalid_union"){var u=a.errors[0][0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if(a.code==="invalid_union"&&a.errors.forEach(function(p){return p.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[a.code];s[c]=Ty(c,e,s,n,h?[].concat(h,a.message):a.message)}t.shift()}return s}function Dy(t,e,s){if(s===void 0&&(s={}),function(a){return"_def"in a&&typeof a._def=="object"&&"typeName"in a._def}(t))return function(a,n,i){try{return Promise.resolve($S(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](a,e)).then(function(c){return i.shouldUseNativeValidation&&Sv({},i),{errors:{},values:s.raw?Object.assign({},a):c}})},function(c){if(function(u){return Array.isArray(u==null?void 0:u.issues)}(c))return{values:{},errors:DS(Zq(c.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};if(function(a){return"_zod"in a&&typeof a._zod=="object"}(t))return function(a,n,i){try{return Promise.resolve($S(function(){return Promise.resolve((s.mode==="sync"?Kq:Wq)(t,a,e)).then(function(c){return i.shouldUseNativeValidation&&Sv({},i),{errors:{},values:s.raw?Object.assign({},a):c}})},function(c){if(function(u){return u instanceof Yq}(c))return{values:{},errors:DS(Qq(c.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};throw new Error("Invalid input: not a Zod schema")}const Ps=y.forwardRef(({className:t,type:e,...s},a)=>r.jsx("input",{type:e,className:Ve("flex h-9 w-full rounded-md border border-neutral-200 bg-white px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-neutral-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",t),ref:a,...s}));Ps.displayName="Input";var Jq="Label",Kk=y.forwardRef((t,e)=>r.jsx(We.label,{...t,ref:e,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));Kk.displayName=Jq;var Wk=Kk;const eU=Od("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Zk=y.forwardRef(({className:t,...e},s)=>r.jsx(Wk,{ref:s,className:Ve(eU(),t),...e}));Zk.displayName=Wk.displayName;const Oy=Eq,Qk=y.createContext({}),Br=({...t})=>r.jsx(Qk.Provider,{value:{name:t.name},children:r.jsx(Tq,{...t})}),ap=()=>{const t=y.useContext(Qk),e=y.useContext(Jk),{getFieldState:s,formState:a}=sp(),n=s(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},Jk=y.createContext({}),_r=y.forwardRef(({className:t,...e},s)=>{const a=y.useId();return r.jsx(Jk.Provider,{value:{id:a},children:r.jsx("div",{ref:s,className:Ve("space-y-2",t),...e})})});_r.displayName="FormItem";const wr=y.forwardRef(({className:t,...e},s)=>{const{error:a,formItemId:n}=ap();return r.jsx(Zk,{ref:s,className:Ve(a&&"text-destructive",t),htmlFor:n,...e})});wr.displayName="FormLabel";const jr=y.forwardRef(({...t},e)=>{const{error:s,formItemId:a,formDescriptionId:n,formMessageId:i}=ap();return r.jsx(MC,{ref:e,id:a,"aria-describedby":s?`${n} ${i}`:`${n}`,"aria-invalid":!!s,...t})});jr.displayName="FormControl";const tU=y.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:a}=ap();return r.jsx("p",{ref:s,id:a,className:Ve("text-[0.8rem] text-muted-foreground",t),...e})});tU.displayName="FormDescription";const Nr=y.forwardRef(({className:t,children:e,...s},a)=>{const{error:n,formMessageId:i}=ap(),c=n?String((n==null?void 0:n.message)??""):e;return c?r.jsx("p",{ref:a,id:i,className:Ve("text-[0.8rem] font-medium text-destructive",t),...s,children:c}):null});Nr.displayName="FormMessage";function sU({onSubmit:t,isLoading:e}){const s=Py({resolver:Dy($L),defaultValues:{email:"",password:""}});return r.jsx(Oy,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[r.jsx(Br,{control:s.control,name:"email",render:({field:a})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Email"}),r.jsx(jr,{children:r.jsx(Ps,{type:"email",placeholder:"seu@email.com",...a})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:s.control,name:"password",render:({field:a})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Senha"}),r.jsx(jr,{children:r.jsx(Ps,{type:"password",placeholder:"••••••",...a})}),r.jsx(Nr,{})]})}),r.jsx(de,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Entrar"})]})})}function aU({onSubmit:t,isLoading:e}){const s=Py({resolver:Dy(LL),defaultValues:{email:"",password:"",confirmPassword:""}});return r.jsx(Oy,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[r.jsx(Br,{control:s.control,name:"email",render:({field:a})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Email"}),r.jsx(jr,{children:r.jsx(Ps,{type:"email",placeholder:"seu@email.com",...a})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:s.control,name:"password",render:({field:a})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Senha"}),r.jsx(jr,{children:r.jsx(Ps,{type:"password",placeholder:"••••••",...a})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:s.control,name:"confirmPassword",render:({field:a})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Confirmar Senha"}),r.jsx(jr,{children:r.jsx(Ps,{type:"password",placeholder:"••••••",...a})}),r.jsx(Nr,{})]})}),r.jsx(de,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Criar Conta"})]})})}const $y=y.createContext({});function Ly(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Iy=typeof window<"u",eA=Iy?y.useLayoutEffect:y.useEffect,rp=y.createContext(null);function By(t,e){t.indexOf(e)===-1&&t.push(e)}function Vy(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Cn=(t,e,s)=>s>e?e:s<t?t:s;let qy=()=>{};const kn={},tA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sA(t){return typeof t=="object"&&t!==null}const aA=t=>/^0[^.\s]+$/u.test(t);function Uy(t){let e;return()=>(e===void 0&&(e=t()),e)}const rr=t=>t,rU=(t,e)=>s=>e(t(s)),Id=(...t)=>t.reduce(rU),jd=(t,e,s)=>{const a=e-t;return a===0?1:(s-t)/a};class zy{constructor(){this.subscriptions=[]}add(e){return By(this.subscriptions,e),()=>Vy(this.subscriptions,e)}notify(e,s,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,s,a);else for(let i=0;i<n;i++){const c=this.subscriptions[i];c&&c(e,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gr=t=>t*1e3,Xr=t=>t/1e3;function rA(t,e){return e?t*(1e3/e):0}const nA=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,nU=1e-7,oU=12;function iU(t,e,s,a,n){let i,c,u=0;do c=e+(s-e)/2,i=nA(c,a,n)-t,i>0?s=c:e=c;while(Math.abs(i)>nU&&++u<oU);return c}function Bd(t,e,s,a){if(t===e&&s===a)return rr;const n=i=>iU(i,0,1,t,s);return i=>i===0||i===1?i:nA(n(i),e,a)}const oA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,iA=t=>e=>1-t(1-e),lA=Bd(.33,1.53,.69,.99),Fy=iA(lA),cA=oA(Fy),uA=t=>(t*=2)<1?.5*Fy(t):.5*(2-Math.pow(2,-10*(t-1))),Hy=t=>1-Math.sin(Math.acos(t)),dA=iA(Hy),fA=oA(Hy),lU=Bd(.42,0,1,1),cU=Bd(0,0,.58,1),hA=Bd(.42,0,.58,1),uU=t=>Array.isArray(t)&&typeof t[0]!="number",mA=t=>Array.isArray(t)&&typeof t[0]=="number",dU={linear:rr,easeIn:lU,easeInOut:hA,easeOut:cU,circIn:Hy,circInOut:fA,circOut:dA,backIn:Fy,backInOut:cA,backOut:lA,anticipate:uA},fU=t=>typeof t=="string",LS=t=>{if(mA(t)){qy(t.length===4);const[e,s,a,n]=t;return Bd(e,s,a,n)}else if(fU(t))return dU[t];return t},wh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],IS={value:null};function hU(t,e){let s=new Set,a=new Set,n=!1,i=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},f=0;function h(g){c.has(g)&&(p.schedule(g),t()),f++,g(u)}const p={schedule:(g,x=!1,b=!1)=>{const w=b&&n?s:a;return x&&c.add(g),w.has(g)||w.add(g),g},cancel:g=>{a.delete(g),c.delete(g)},process:g=>{if(u=g,n){i=!0;return}n=!0,[s,a]=[a,s],s.forEach(h),e&&IS.value&&IS.value.frameloop[e].push(f),f=0,s.clear(),n=!1,i&&(i=!1,p.process(g))}};return p}const mU=40;function pA(t,e){let s=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,c=wh.reduce((S,P)=>(S[P]=hU(i,e?P:void 0),S),{}),{setup:u,read:f,resolveKeyframes:h,preUpdate:p,update:g,preRender:x,render:b,postRender:j}=c,w=()=>{const S=kn.useManualTiming?n.timestamp:performance.now();s=!1,kn.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(S-n.timestamp,mU),1)),n.timestamp=S,n.isProcessing=!0,u.process(n),f.process(n),h.process(n),p.process(n),g.process(n),x.process(n),b.process(n),j.process(n),n.isProcessing=!1,s&&e&&(a=!1,t(w))},N=()=>{s=!0,a=!0,n.isProcessing||t(w)};return{schedule:wh.reduce((S,P)=>{const R=c[P];return S[P]=(D,$=!1,k=!1)=>(s||N(),R.schedule(D,$,k)),S},{}),cancel:S=>{for(let P=0;P<wh.length;P++)c[wh[P]].cancel(S)},state:n,steps:c}}const{schedule:Zt,cancel:Mo,state:Us,steps:wx}=pA(typeof requestAnimationFrame<"u"?requestAnimationFrame:rr,!0);let Ih;function pU(){Ih=void 0}const ja={now:()=>(Ih===void 0&&ja.set(Us.isProcessing||kn.useManualTiming?Us.timestamp:performance.now()),Ih),set:t=>{Ih=t,queueMicrotask(pU)}},gA=t=>e=>typeof e=="string"&&e.startsWith(t),Gy=gA("--"),gU=gA("var(--"),Xy=t=>gU(t)?xU.test(t.split("/*")[0].trim()):!1,xU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ec={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Nd={...Ec,transform:t=>Cn(0,1,t)},jh={...Ec,default:1},ud=t=>Math.round(t*1e5)/1e5,Yy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vU(t){return t==null}const yU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ky=(t,e)=>s=>!!(typeof s=="string"&&yU.test(s)&&s.startsWith(t)||e&&!vU(s)&&Object.prototype.hasOwnProperty.call(s,e)),xA=(t,e,s)=>a=>{if(typeof a!="string")return a;const[n,i,c,u]=a.match(Yy);return{[t]:parseFloat(n),[e]:parseFloat(i),[s]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},bU=t=>Cn(0,255,t),jx={...Ec,transform:t=>Math.round(bU(t))},bi={test:Ky("rgb","red"),parse:xA("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:a=1})=>"rgba("+jx.transform(t)+", "+jx.transform(e)+", "+jx.transform(s)+", "+ud(Nd.transform(a))+")"};function _U(t){let e="",s="",a="",n="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),a=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),a=t.substring(3,4),n=t.substring(4,5),e+=e,s+=s,a+=a,n+=n),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const Ev={test:Ky("#"),parse:_U,transform:bi.transform},Vd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),io=Vd("deg"),Yr=Vd("%"),Je=Vd("px"),wU=Vd("vh"),jU=Vd("vw"),BS={...Yr,parse:t=>Yr.parse(t)/100,transform:t=>Yr.transform(t*100)},Yl={test:Ky("hsl","hue"),parse:xA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:a=1})=>"hsla("+Math.round(t)+", "+Yr.transform(ud(e))+", "+Yr.transform(ud(s))+", "+ud(Nd.transform(a))+")"},Ks={test:t=>bi.test(t)||Ev.test(t)||Yl.test(t),parse:t=>bi.test(t)?bi.parse(t):Yl.test(t)?Yl.parse(t):Ev.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bi.transform(t):Yl.transform(t)},NU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SU(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Yy))==null?void 0:e.length)||0)+(((s=t.match(NU))==null?void 0:s.length)||0)>0}const vA="number",yA="color",EU="var",CU="var(",VS="${}",kU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sd(t){const e=t.toString(),s=[],a={color:[],number:[],var:[]},n=[];let i=0;const u=e.replace(kU,f=>(Ks.test(f)?(a.color.push(i),n.push(yA),s.push(Ks.parse(f))):f.startsWith(CU)?(a.var.push(i),n.push(EU),s.push(f)):(a.number.push(i),n.push(vA),s.push(parseFloat(f))),++i,VS)).split(VS);return{values:s,split:u,indexes:a,types:n}}function bA(t){return Sd(t).values}function _A(t){const{split:e,types:s}=Sd(t),a=e.length;return n=>{let i="";for(let c=0;c<a;c++)if(i+=e[c],n[c]!==void 0){const u=s[c];u===vA?i+=ud(n[c]):u===yA?i+=Ks.transform(n[c]):i+=n[c]}return i}}const AU=t=>typeof t=="number"?0:t;function TU(t){const e=bA(t);return _A(t)(e.map(AU))}const Po={test:SU,parse:bA,createTransformer:_A,getAnimatableNone:TU};function Nx(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function RU({hue:t,saturation:e,lightness:s,alpha:a}){t/=360,e/=100,s/=100;let n=0,i=0,c=0;if(!e)n=i=c=s;else{const u=s<.5?s*(1+e):s+e-s*e,f=2*s-u;n=Nx(f,u,t+1/3),i=Nx(f,u,t),c=Nx(f,u,t-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:a}}function xm(t,e){return s=>s>0?e:t}const Wt=(t,e,s)=>t+(e-t)*s,Sx=(t,e,s)=>{const a=t*t,n=s*(e*e-a)+a;return n<0?0:Math.sqrt(n)},MU=[Ev,bi,Yl],PU=t=>MU.find(e=>e.test(t));function qS(t){const e=PU(t);if(!e)return!1;let s=e.parse(t);return e===Yl&&(s=RU(s)),s}const US=(t,e)=>{const s=qS(t),a=qS(e);if(!s||!a)return xm(t,e);const n={...s};return i=>(n.red=Sx(s.red,a.red,i),n.green=Sx(s.green,a.green,i),n.blue=Sx(s.blue,a.blue,i),n.alpha=Wt(s.alpha,a.alpha,i),bi.transform(n))},Cv=new Set(["none","hidden"]);function DU(t,e){return Cv.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function OU(t,e){return s=>Wt(t,e,s)}function Wy(t){return typeof t=="number"?OU:typeof t=="string"?Xy(t)?xm:Ks.test(t)?US:IU:Array.isArray(t)?wA:typeof t=="object"?Ks.test(t)?US:$U:xm}function wA(t,e){const s=[...t],a=s.length,n=t.map((i,c)=>Wy(i)(i,e[c]));return i=>{for(let c=0;c<a;c++)s[c]=n[c](i);return s}}function $U(t,e){const s={...t,...e},a={};for(const n in s)t[n]!==void 0&&e[n]!==void 0&&(a[n]=Wy(t[n])(t[n],e[n]));return n=>{for(const i in a)s[i]=a[i](n);return s}}function LU(t,e){const s=[],a={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const i=e.types[n],c=t.indexes[i][a[i]],u=t.values[c]??0;s[n]=u,a[i]++}return s}const IU=(t,e)=>{const s=Po.createTransformer(e),a=Sd(t),n=Sd(e);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?Cv.has(t)&&!n.values.length||Cv.has(e)&&!a.values.length?DU(t,e):Id(wA(LU(a,n),n.values),s):xm(t,e)};function jA(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Wt(t,e,s):Wy(t)(t,e)}const BU=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Zt.update(e,s),stop:()=>Mo(e),now:()=>Us.isProcessing?Us.timestamp:ja.now()}},NA=(t,e,s=10)=>{let a="";const n=Math.max(Math.round(e/s),2);for(let i=0;i<n;i++)a+=t(i/(n-1))+", ";return`linear(${a.substring(0,a.length-2)})`},vm=2e4;function Zy(t){let e=0;const s=50;let a=t.next(e);for(;!a.done&&e<vm;)e+=s,a=t.next(e);return e>=vm?1/0:e}function VU(t,e=100,s){const a=s({...t,keyframes:[0,e]}),n=Math.min(Zy(a),vm);return{type:"keyframes",ease:i=>a.next(n*i).value/e,duration:Xr(n)}}const qU=5;function SA(t,e,s){const a=Math.max(e-qU,0);return rA(s-t(a),e-a)}const es={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ex=.001;function UU({duration:t=es.duration,bounce:e=es.bounce,velocity:s=es.velocity,mass:a=es.mass}){let n,i,c=1-e;c=Cn(es.minDamping,es.maxDamping,c),t=Cn(es.minDuration,es.maxDuration,Xr(t)),c<1?(n=h=>{const p=h*c,g=p*t,x=p-s,b=kv(h,c),j=Math.exp(-g);return Ex-x/b*j},i=h=>{const g=h*c*t,x=g*s+s,b=Math.pow(c,2)*Math.pow(h,2)*t,j=Math.exp(-g),w=kv(Math.pow(h,2),c);return(-n(h)+Ex>0?-1:1)*((x-b)*j)/w}):(n=h=>{const p=Math.exp(-h*t),g=(h-s)*t+1;return-Ex+p*g},i=h=>{const p=Math.exp(-h*t),g=(s-h)*(t*t);return p*g});const u=5/t,f=FU(n,i,u);if(t=Gr(t),isNaN(f))return{stiffness:es.stiffness,damping:es.damping,duration:t};{const h=Math.pow(f,2)*a;return{stiffness:h,damping:c*2*Math.sqrt(a*h),duration:t}}}const zU=12;function FU(t,e,s){let a=s;for(let n=1;n<zU;n++)a=a-t(a)/e(a);return a}function kv(t,e){return t*Math.sqrt(1-e*e)}const HU=["duration","bounce"],GU=["stiffness","damping","mass"];function zS(t,e){return e.some(s=>t[s]!==void 0)}function XU(t){let e={velocity:es.velocity,stiffness:es.stiffness,damping:es.damping,mass:es.mass,isResolvedFromDuration:!1,...t};if(!zS(t,GU)&&zS(t,HU))if(t.visualDuration){const s=t.visualDuration,a=2*Math.PI/(s*1.2),n=a*a,i=2*Cn(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:es.mass,stiffness:n,damping:i}}else{const s=UU(t);e={...e,...s,mass:es.mass},e.isResolvedFromDuration=!0}return e}function ym(t=es.visualDuration,e=es.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:n}=s;const i=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],u={done:!1,value:i},{stiffness:f,damping:h,mass:p,duration:g,velocity:x,isResolvedFromDuration:b}=XU({...s,velocity:-Xr(s.velocity||0)}),j=x||0,w=h/(2*Math.sqrt(f*p)),N=c-i,E=Xr(Math.sqrt(f/p)),C=Math.abs(N)<5;a||(a=C?es.restSpeed.granular:es.restSpeed.default),n||(n=C?es.restDelta.granular:es.restDelta.default);let S;if(w<1){const R=kv(E,w);S=D=>{const $=Math.exp(-w*E*D);return c-$*((j+w*E*N)/R*Math.sin(R*D)+N*Math.cos(R*D))}}else if(w===1)S=R=>c-Math.exp(-E*R)*(N+(j+E*N)*R);else{const R=E*Math.sqrt(w*w-1);S=D=>{const $=Math.exp(-w*E*D),k=Math.min(R*D,300);return c-$*((j+w*E*N)*Math.sinh(k)+R*N*Math.cosh(k))/R}}const P={calculatedDuration:b&&g||null,next:R=>{const D=S(R);if(b)u.done=R>=g;else{let $=R===0?j:0;w<1&&($=R===0?Gr(j):SA(S,R,D));const k=Math.abs($)<=a,M=Math.abs(c-D)<=n;u.done=k&&M}return u.value=u.done?c:D,u},toString:()=>{const R=Math.min(Zy(P),vm),D=NA($=>P.next(R*$).value,R,30);return R+"ms "+D},toTransition:()=>{}};return P}ym.applyToOptions=t=>{const e=VU(t,100,ym);return t.ease=e.ease,t.duration=Gr(e.duration),t.type="keyframes",t};function Av({keyframes:t,velocity:e=0,power:s=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:c,min:u,max:f,restDelta:h=.5,restSpeed:p}){const g=t[0],x={done:!1,value:g},b=k=>u!==void 0&&k<u||f!==void 0&&k>f,j=k=>u===void 0?f:f===void 0||Math.abs(u-k)<Math.abs(f-k)?u:f;let w=s*e;const N=g+w,E=c===void 0?N:c(N);E!==N&&(w=E-g);const C=k=>-w*Math.exp(-k/a),S=k=>E+C(k),P=k=>{const M=C(k),V=S(k);x.done=Math.abs(M)<=h,x.value=x.done?E:V};let R,D;const $=k=>{b(x.value)&&(R=k,D=ym({keyframes:[x.value,j(x.value)],velocity:SA(S,k,x.value),damping:n,stiffness:i,restDelta:h,restSpeed:p}))};return $(0),{calculatedDuration:null,next:k=>{let M=!1;return!D&&R===void 0&&(M=!0,P(k),$(k)),R!==void 0&&k>=R?D.next(k-R):(!M&&P(k),x)}}}function YU(t,e,s){const a=[],n=s||kn.mix||jA,i=t.length-1;for(let c=0;c<i;c++){let u=n(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||rr:e;u=Id(f,u)}a.push(u)}return a}function KU(t,e,{clamp:s=!0,ease:a,mixer:n}={}){const i=t.length;if(qy(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=YU(e,a,n),f=u.length,h=p=>{if(c&&p<t[0])return e[0];let g=0;if(f>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const x=jd(t[g],t[g+1],p);return u[g](x)};return s?p=>h(Cn(t[0],t[i-1],p)):h}function WU(t,e){const s=t[t.length-1];for(let a=1;a<=e;a++){const n=jd(0,e,a);t.push(Wt(s,1,n))}}function ZU(t){const e=[0];return WU(e,t.length-1),e}function QU(t,e){return t.map(s=>s*e)}function JU(t,e){return t.map(()=>e||hA).splice(0,t.length-1)}function dd({duration:t=300,keyframes:e,times:s,ease:a="easeInOut"}){const n=uU(a)?a.map(LS):LS(a),i={done:!1,value:e[0]},c=QU(s&&s.length===e.length?s:ZU(e),t),u=KU(c,e,{ease:Array.isArray(n)?n:JU(e,n)});return{calculatedDuration:t,next:f=>(i.value=u(f),i.done=f>=t,i)}}const ez=t=>t!==null;function Qy(t,{repeat:e,repeatType:s="loop"},a,n=1){const i=t.filter(ez),u=n<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!u||a===void 0?i[u]:a}const tz={decay:Av,inertia:Av,tween:dd,keyframes:dd,spring:ym};function EA(t){typeof t.type=="string"&&(t.type=tz[t.type])}class Jy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const sz=t=>t/100;class eb extends Jy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,n;const{motionValue:s}=this.options;s&&s.updatedAt!==ja.now()&&this.tick(ja.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;EA(e);const{type:s=dd,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:c=0}=e;let{keyframes:u}=e;const f=s||dd;f!==dd&&typeof u[0]!="number"&&(this.mixKeyframes=Id(sz,jA(u[0],u[1])),u=[0,100]);const h=f({...e,keyframes:u});i==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-c})),h.calculatedDuration===null&&(h.calculatedDuration=Zy(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:p,repeat:g,repeatType:x,repeatDelay:b,type:j,onUpdate:w,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?E<0:E>n;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let S=this.currentTime,P=a;if(g){const k=Math.min(this.currentTime,n)/u;let M=Math.floor(k),V=k%1;!V&&k>=1&&(V=1),V===1&&M--,M=Math.min(M,g+1),!!(M%2)&&(x==="reverse"?(V=1-V,b&&(V-=b/u)):x==="mirror"&&(P=c)),S=Cn(0,1,V)*u}const R=C?{done:!1,value:p[0]}:P.next(S);i&&(R.value=i(R.value));let{done:D}=R;!C&&f!==null&&(D=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return $&&j!==Av&&(R.value=Qy(p,this.options,N,this.speed)),w&&w(R.value),$&&this.finish(),R}then(e,s){return this.finished.then(e,s)}get duration(){return Xr(this.calculatedDuration)}get time(){return Xr(this.currentTime)}set time(e){var s;e=Gr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ja.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Xr(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:e=BU,startTime:s}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(i=(n=this.options).onPlay)==null||i.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=s??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ja.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function az(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const _i=t=>t*180/Math.PI,Tv=t=>{const e=_i(Math.atan2(t[1],t[0]));return Rv(e)},rz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Tv,rotateZ:Tv,skewX:t=>_i(Math.atan(t[1])),skewY:t=>_i(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Rv=t=>(t=t%360,t<0&&(t+=360),t),FS=Tv,HS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),GS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),nz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:HS,scaleY:GS,scale:t=>(HS(t)+GS(t))/2,rotateX:t=>Rv(_i(Math.atan2(t[6],t[5]))),rotateY:t=>Rv(_i(Math.atan2(-t[2],t[0]))),rotateZ:FS,rotate:FS,skewX:t=>_i(Math.atan(t[4])),skewY:t=>_i(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Mv(t){return t.includes("scale")?1:0}function Pv(t,e){if(!t||t==="none")return Mv(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(s)a=nz,n=s;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=rz,n=u}if(!n)return Mv(e);const i=a[e],c=n[1].split(",").map(iz);return typeof i=="function"?i(c):c[i]}const oz=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Pv(s,e)};function iz(t){return parseFloat(t.trim())}const Cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kc=new Set(Cc),XS=t=>t===Ec||t===Je,lz=new Set(["x","y","z"]),cz=Cc.filter(t=>!lz.has(t));function uz(t){const e=[];return cz.forEach(s=>{const a=t.getValue(s);a!==void 0&&(e.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),e}const Si={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Pv(e,"x"),y:(t,{transform:e})=>Pv(e,"y")};Si.translateX=Si.x;Si.translateY=Si.y;const Ei=new Set;let Dv=!1,Ov=!1,$v=!1;function CA(){if(Ov){const t=Array.from(Ei).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),s=new Map;e.forEach(a=>{const n=uz(a);n.length&&(s.set(a,n),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const n=s.get(a);n&&n.forEach(([i,c])=>{var u;(u=a.getValue(i))==null||u.set(c)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}Ov=!1,Dv=!1,Ei.forEach(t=>t.complete($v)),Ei.clear()}function kA(){Ei.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ov=!0)})}function dz(){$v=!0,kA(),CA(),$v=!1}class tb{constructor(e,s,a,n,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=a,this.motionValue=n,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ei.add(this),Dv||(Dv=!0,Zt.read(kA),Zt.resolveKeyframes(CA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:a,motionValue:n}=this;if(e[0]===null){const i=n==null?void 0:n.get(),c=e[e.length-1];if(i!==void 0)e[0]=i;else if(a&&s){const u=a.readValue(s,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),n&&i===void 0&&n.set(e[0])}az(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ei.delete(this)}cancel(){this.state==="scheduled"&&(Ei.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fz=t=>t.startsWith("--");function hz(t,e,s){fz(e)?t.style.setProperty(e,s):t.style[e]=s}const mz=Uy(()=>window.ScrollTimeline!==void 0),pz={};function gz(t,e){const s=Uy(t);return()=>pz[e]??s()}const AA=gz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zu=([t,e,s,a])=>`cubic-bezier(${t}, ${e}, ${s}, ${a})`,YS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zu([0,.65,.55,1]),circOut:Zu([.55,0,1,.45]),backIn:Zu([.31,.01,.66,-.59]),backOut:Zu([.33,1.53,.69,.99])};function TA(t,e){if(t)return typeof t=="function"?AA()?NA(t,e):"ease-out":mA(t)?Zu(t):Array.isArray(t)?t.map(s=>TA(s,e)||YS.easeOut):YS[t]}function xz(t,e,s,{delay:a=0,duration:n=300,repeat:i=0,repeatType:c="loop",ease:u="easeOut",times:f}={},h=void 0){const p={[e]:s};f&&(p.offset=f);const g=TA(u,n);Array.isArray(g)&&(p.easing=g);const x={delay:a,duration:n,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(p,x)}function RA(t){return typeof t=="function"&&"applyToOptions"in t}function vz({type:t,...e}){return RA(t)&&AA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class yz extends Jy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:a,keyframes:n,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=e,qy(typeof e.type!="string");const h=vz(e);this.animation=xz(s,a,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=Qy(n,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):hz(s,a,p),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,a;const e=((a=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:a.call(s).duration)||0;return Xr(Number(e))}get time(){return Xr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&mz()?(this.animation.timeline=e,rr):s(this)}}const MA={anticipate:uA,backInOut:cA,circInOut:fA};function bz(t){return t in MA}function _z(t){typeof t.ease=="string"&&bz(t.ease)&&(t.ease=MA[t.ease])}const KS=10;class wz extends yz{constructor(e){_z(e),EA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:a,onComplete:n,element:i,...c}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const u=new eb({...c,autoplay:!1}),f=Gr(this.finishedTime??this.time);s.setWithVelocity(u.sample(f-KS).value,u.sample(f).value,KS),u.stop()}}const WS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Po.test(t)||t==="0")&&!t.startsWith("url("));function jz(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function Nz(t,e,s,a){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],c=WS(n,e),u=WS(i,e);return!c||!u?!1:jz(t)||(s==="spring"||RA(s))&&a}function sb(t){return sA(t)&&"offsetHeight"in t}const Sz=new Set(["opacity","clipPath","filter","transform"]),Ez=Uy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Cz(t){var h;const{motionValue:e,name:s,repeatDelay:a,repeatType:n,damping:i,type:c}=t;if(!sb((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return Ez()&&s&&Sz.has(s)&&(s!=="transform"||!f)&&!u&&!a&&n!=="mirror"&&i!==0&&c!=="inertia"}const kz=40;class Az extends Jy{constructor({autoplay:e=!0,delay:s=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:c="loop",keyframes:u,name:f,motionValue:h,element:p,...g}){var j;super(),this.stop=()=>{var w,N;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=ja.now();const x={autoplay:e,delay:s,type:a,repeat:n,repeatDelay:i,repeatType:c,name:f,motionValue:h,element:p,...g},b=(p==null?void 0:p.KeyframeResolver)||tb;this.keyframeResolver=new b(u,(w,N,E)=>this.onKeyframesResolved(w,N,x,!E),f,h,p),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(e,s,a,n){this.keyframeResolver=void 0;const{name:i,type:c,velocity:u,delay:f,isHandoff:h,onUpdate:p}=a;this.resolvedAt=ja.now(),Nz(e,i,c,u)||((kn.instantAnimations||!f)&&(p==null||p(Qy(e,a,s))),e[0]=e[e.length-1],a.duration=0,a.repeat=0);const x={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>kz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...a,keyframes:e},b=!h&&Cz(x)?new wz({...x,element:x.motionValue.owner.current}):new eb(x);b.finished.then(()=>this.notifyFinished()).catch(rr),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),dz()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Tz=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rz(t){const e=Tz.exec(t);if(!e)return[,];const[,s,a,n]=e;return[`--${s??a}`,n]}function PA(t,e,s=1){const[a,n]=Rz(t);if(!a)return;const i=window.getComputedStyle(e).getPropertyValue(a);if(i){const c=i.trim();return tA(c)?parseFloat(c):c}return Xy(n)?PA(n,e,s+1):n}function ab(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const DA=new Set(["width","height","top","left","right","bottom",...Cc]),Mz={test:t=>t==="auto",parse:t=>t},OA=t=>e=>e.test(t),$A=[Ec,Je,Yr,io,jU,wU,Mz],ZS=t=>$A.find(OA(t));function Pz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aA(t):!0}const Dz=new Set(["brightness","contrast","saturate","opacity"]);function Oz(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=s.match(Yy)||[];if(!a)return t;const n=s.replace(a,"");let i=Dz.has(e)?1:0;return a!==s&&(i*=100),e+"("+i+n+")"}const $z=/\b([a-z-]*)\(.*?\)/gu,Lv={...Po,getAnimatableNone:t=>{const e=t.match($z);return e?e.map(Oz).join(" "):t}},QS={...Ec,transform:Math.round},Lz={rotate:io,rotateX:io,rotateY:io,rotateZ:io,scale:jh,scaleX:jh,scaleY:jh,scaleZ:jh,skew:io,skewX:io,skewY:io,distance:Je,translateX:Je,translateY:Je,translateZ:Je,x:Je,y:Je,z:Je,perspective:Je,transformPerspective:Je,opacity:Nd,originX:BS,originY:BS,originZ:Je},rb={borderWidth:Je,borderTopWidth:Je,borderRightWidth:Je,borderBottomWidth:Je,borderLeftWidth:Je,borderRadius:Je,radius:Je,borderTopLeftRadius:Je,borderTopRightRadius:Je,borderBottomRightRadius:Je,borderBottomLeftRadius:Je,width:Je,maxWidth:Je,height:Je,maxHeight:Je,top:Je,right:Je,bottom:Je,left:Je,padding:Je,paddingTop:Je,paddingRight:Je,paddingBottom:Je,paddingLeft:Je,margin:Je,marginTop:Je,marginRight:Je,marginBottom:Je,marginLeft:Je,backgroundPositionX:Je,backgroundPositionY:Je,...Lz,zIndex:QS,fillOpacity:Nd,strokeOpacity:Nd,numOctaves:QS},Iz={...rb,color:Ks,backgroundColor:Ks,outlineColor:Ks,fill:Ks,stroke:Ks,borderColor:Ks,borderTopColor:Ks,borderRightColor:Ks,borderBottomColor:Ks,borderLeftColor:Ks,filter:Lv,WebkitFilter:Lv},LA=t=>Iz[t];function IA(t,e){let s=LA(t);return s!==Lv&&(s=Po),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Bz=new Set(["auto","none","0"]);function Vz(t,e,s){let a=0,n;for(;a<t.length&&!n;){const i=t[a];typeof i=="string"&&!Bz.has(i)&&Sd(i).values.length&&(n=t[a]),a++}if(n&&s)for(const i of e)t[i]=IA(s,n)}class qz extends tb{constructor(e,s,a,n,i){super(e,s,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),Xy(h))){const p=PA(h,s.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!DA.has(a)||e.length!==2)return;const[n,i]=e,c=ZS(n),u=ZS(i);if(c!==u)if(XS(c)&&XS(u))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else Si[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,a=[];for(let n=0;n<e.length;n++)(e[n]===null||Pz(e[n]))&&a.push(n);a.length&&Vz(e,a,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Si[a](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&e.getValue(a,n).jump(n,!1)}measureEndState(){var u;const{element:e,name:s,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const n=e.getValue(s);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,c=a[i];a[i]=Si[s](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([f,h])=>{e.getValue(f).set(h)}),this.resolveNoneKeyframes()}}function Uz(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const n=(s==null?void 0:s[t])??a.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}const BA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,JS=30,zz=t=>!isNaN(parseFloat(t));class Fz{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,n=!0)=>{var c,u;const i=ja.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty();n&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=ja.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new zy);const a=this.events[e].add(s);return e==="change"?()=>{a(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ja.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>JS)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,JS);return rA(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pc(t,e){return new Fz(t,e)}const{schedule:nb}=pA(queueMicrotask,!1),mr={x:!1,y:!1};function VA(){return mr.x||mr.y}function Hz(t){return t==="x"||t==="y"?mr[t]?null:(mr[t]=!0,()=>{mr[t]=!1}):mr.x||mr.y?null:(mr.x=mr.y=!0,()=>{mr.x=mr.y=!1})}function qA(t,e){const s=Uz(t),a=new AbortController,n={passive:!0,...e,signal:a.signal};return[s,n,()=>a.abort()]}function e2(t){return!(t.pointerType==="touch"||VA())}function Gz(t,e,s={}){const[a,n,i]=qA(t,s),c=u=>{if(!e2(u))return;const{target:f}=u,h=e(f,u);if(typeof h!="function"||!f)return;const p=g=>{e2(g)&&(h(g),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,n)};return a.forEach(u=>{u.addEventListener("pointerenter",c,n)}),i}const UA=(t,e)=>e?t===e?!0:UA(t,e.parentElement):!1,ob=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Xz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Yz(t){return Xz.has(t.tagName)||t.tabIndex!==-1}const Bh=new WeakSet;function t2(t){return e=>{e.key==="Enter"&&t(e)}}function Cx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Kz=(t,e)=>{const s=t.currentTarget;if(!s)return;const a=t2(()=>{if(Bh.has(s))return;Cx(s,"down");const n=t2(()=>{Cx(s,"up")}),i=()=>Cx(s,"cancel");s.addEventListener("keyup",n,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",a,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),e)};function s2(t){return ob(t)&&!VA()}function Wz(t,e,s={}){const[a,n,i]=qA(t,s),c=u=>{const f=u.currentTarget;if(!s2(u))return;Bh.add(f);const h=e(f,u),p=(b,j)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),Bh.has(f)&&Bh.delete(f),s2(b)&&typeof h=="function"&&h(b,{success:j})},g=b=>{p(b,f===window||f===document||s.useGlobalTarget||UA(f,b.target))},x=b=>{p(b,!1)};window.addEventListener("pointerup",g,n),window.addEventListener("pointercancel",x,n)};return a.forEach(u=>{(s.useGlobalTarget?window:u).addEventListener("pointerdown",c,n),sb(u)&&(u.addEventListener("focus",h=>Kz(h,n)),!Yz(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),i}function zA(t){return sA(t)&&"ownerSVGElement"in t}function Zz(t){return zA(t)&&t.tagName==="svg"}const sa=t=>!!(t&&t.getVelocity),Qz=[...$A,Ks,Po],Jz=t=>Qz.find(OA(t)),ib=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class e9 extends y.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const a=s.offsetParent,n=sb(a)&&a.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function t9({children:t,isPresent:e,anchorX:s}){const a=y.useId(),n=y.useRef(null),i=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=y.useContext(ib);return y.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:p,right:g}=i.current;if(e||!n.current||!u||!f)return;const x=s==="left"?`left: ${p}`:`right: ${g}`;n.current.dataset.motionPopId=a;const b=document.createElement("style");return c&&(b.nonce=c),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[e]),r.jsx(e9,{isPresent:e,childRef:n,sizeRef:i,children:y.cloneElement(t,{ref:n})})}const s9=({children:t,initial:e,isPresent:s,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:c,anchorX:u})=>{const f=Ly(a9),h=y.useId();let p=!0,g=y.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:s,custom:n,onExitComplete:x=>{f.set(x,!0);for(const b of f.values())if(!b)return;a&&a()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[s,f,a]);return i&&p&&(g={...g}),y.useMemo(()=>{f.forEach((x,b)=>f.set(b,!1))},[s]),y.useEffect(()=>{!s&&!f.size&&a&&a()},[s]),c==="popLayout"&&(t=r.jsx(t9,{isPresent:s,anchorX:u,children:t})),r.jsx(rp.Provider,{value:g,children:t})};function a9(){return new Map}function FA(t=!0){const e=y.useContext(rp);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:n}=e,i=y.useId();y.useEffect(()=>{if(t)return n(i)},[t]);const c=y.useCallback(()=>t&&a&&a(i),[i,a,t]);return!s&&a?[!1,c]:[!0]}const Nh=t=>t.key||"";function a2(t){const e=[];return y.Children.forEach(t,s=>{y.isValidElement(s)&&e.push(s)}),e}const HA=({children:t,custom:e,initial:s=!0,onExitComplete:a,presenceAffectsLayout:n=!0,mode:i="sync",propagate:c=!1,anchorX:u="left"})=>{const[f,h]=FA(c),p=y.useMemo(()=>a2(t),[t]),g=c&&!f?[]:p.map(Nh),x=y.useRef(!0),b=y.useRef(p),j=Ly(()=>new Map),[w,N]=y.useState(p),[E,C]=y.useState(p);eA(()=>{x.current=!1,b.current=p;for(let R=0;R<E.length;R++){const D=Nh(E[R]);g.includes(D)?j.delete(D):j.get(D)!==!0&&j.set(D,!1)}},[E,g.length,g.join("-")]);const S=[];if(p!==w){let R=[...p];for(let D=0;D<E.length;D++){const $=E[D],k=Nh($);g.includes(k)||(R.splice(D,0,$),S.push($))}return i==="wait"&&S.length&&(R=S),C(a2(R)),N(p),null}const{forceRender:P}=y.useContext($y);return r.jsx(r.Fragment,{children:E.map(R=>{const D=Nh(R),$=c&&!f?!1:p===E||g.includes(D),k=()=>{if(j.has(D))j.set(D,!0);else return;let M=!0;j.forEach(V=>{V||(M=!1)}),M&&(P==null||P(),C(b.current),c&&(h==null||h()),a&&a())};return r.jsx(s9,{isPresent:$,initial:!x.current||s?void 0:!1,custom:e,presenceAffectsLayout:n,mode:i,onExitComplete:$?void 0:k,anchorX:u,children:R},D)})})},GA=y.createContext({strict:!1}),r2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gc={};for(const t in r2)gc[t]={isEnabled:e=>r2[t].some(s=>!!e[s])};function r9(t){for(const e in t)gc[e]={...gc[e],...t[e]}}const n9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||n9.has(t)}let XA=t=>!bm(t);function o9(t){t&&(XA=e=>e.startsWith("on")?!bm(e):t(e))}try{o9(require("@emotion/is-prop-valid").default)}catch{}function i9(t,e,s){const a={};for(const n in t)n==="values"&&typeof t.values=="object"||(XA(n)||s===!0&&bm(n)||!e&&!bm(n)||t.draggable&&n.startsWith("onDrag"))&&(a[n]=t[n]);return a}function l9(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...a)=>t(...a);return new Proxy(s,{get:(a,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}const np=y.createContext({});function op(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ed(t){return typeof t=="string"||Array.isArray(t)}const lb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cb=["initial",...lb];function ip(t){return op(t.animate)||cb.some(e=>Ed(t[e]))}function YA(t){return!!(ip(t)||t.variants)}function c9(t,e){if(ip(t)){const{initial:s,animate:a}=t;return{initial:s===!1||Ed(s)?s:void 0,animate:Ed(a)?a:void 0}}return t.inherit!==!1?e:{}}function u9(t){const{initial:e,animate:s}=c9(t,y.useContext(np));return y.useMemo(()=>({initial:e,animate:s}),[n2(e),n2(s)])}function n2(t){return Array.isArray(t)?t.join(" "):t}const d9=Symbol.for("motionComponentSymbol");function Kl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function f9(t,e,s){return y.useCallback(a=>{a&&t.onMount&&t.onMount(a),e&&(a?e.mount(a):e.unmount()),s&&(typeof s=="function"?s(a):Kl(s)&&(s.current=a))},[e])}const ub=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),h9="framerAppearId",KA="data-"+ub(h9),WA=y.createContext({});function m9(t,e,s,a,n){var w,N;const{visualElement:i}=y.useContext(np),c=y.useContext(GA),u=y.useContext(rp),f=y.useContext(ib).reducedMotion,h=y.useRef(null);a=a||c.renderer,!h.current&&a&&(h.current=a(t,{visualState:e,parent:i,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,g=y.useContext(WA);p&&!p.projection&&n&&(p.type==="html"||p.type==="svg")&&p9(h.current,s,n,g);const x=y.useRef(!1);y.useInsertionEffect(()=>{p&&x.current&&p.update(s,u)});const b=s[KA],j=y.useRef(!!b&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,b))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,b)));return eA(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),nb.render(p.render),j.current&&p.animationState&&p.animationState.animateChanges())}),y.useEffect(()=>{p&&(!j.current&&p.animationState&&p.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,b)}),j.current=!1))}),p}function p9(t,e,s,a){const{layoutId:n,layout:i,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:ZA(t.parent)),t.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!c||u&&Kl(u),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:p,layoutScroll:f,layoutRoot:h})}function ZA(t){if(t)return t.options.allowProjection!==!1?t.projection:ZA(t.parent)}function g9({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:a,Component:n}){t&&r9(t);function i(u,f){let h;const p={...y.useContext(ib),...u,layoutId:x9(u)},{isStatic:g}=p,x=u9(u),b=a(u,g);if(!g&&Iy){v9();const j=y9(p);h=j.MeasureLayout,x.visualElement=m9(n,b,p,e,j.ProjectionNode)}return r.jsxs(np.Provider,{value:x,children:[h&&x.visualElement?r.jsx(h,{visualElement:x.visualElement,...p}):null,s(n,u,f9(b,x.visualElement,f),b,g,x.visualElement)]})}i.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=y.forwardRef(i);return c[d9]=n,c}function x9({layoutId:t}){const e=y.useContext($y).id;return e&&t!==void 0?e+"-"+t:t}function v9(t,e){y.useContext(GA).strict}function y9(t){const{drag:e,layout:s}=gc;if(!e&&!s)return{};const a={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Cd={};function b9(t){for(const e in t)Cd[e]=t[e],Gy(e)&&(Cd[e].isCSSVariable=!0)}function QA(t,{layout:e,layoutId:s}){return kc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Cd[t]||t==="opacity")}const _9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w9=Cc.length;function j9(t,e,s){let a="",n=!0;for(let i=0;i<w9;i++){const c=Cc[i],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(c.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||s){const h=BA(u,rb[c]);if(!f){n=!1;const p=_9[c]||c;a+=`${p}(${h}) `}s&&(e[c]=h)}}return a=a.trim(),s?a=s(e,n?"":a):n&&(a="none"),a}function db(t,e,s){const{style:a,vars:n,transformOrigin:i}=t;let c=!1,u=!1;for(const f in e){const h=e[f];if(kc.has(f)){c=!0;continue}else if(Gy(f)){n[f]=h;continue}else{const p=BA(h,rb[f]);f.startsWith("origin")?(u=!0,i[f]=p):a[f]=p}}if(e.transform||(c||s?a.transform=j9(e,t.transform,s):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=i;a.transformOrigin=`${f} ${h} ${p}`}}const fb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JA(t,e,s){for(const a in e)!sa(e[a])&&!QA(a,s)&&(t[a]=e[a])}function N9({transformTemplate:t},e){return y.useMemo(()=>{const s=fb();return db(s,e,t),Object.assign({},s.vars,s.style)},[e])}function S9(t,e){const s=t.style||{},a={};return JA(a,s,t),Object.assign(a,N9(t,e)),a}function E9(t,e){const s={},a=S9(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=a,s}const C9={offset:"stroke-dashoffset",array:"stroke-dasharray"},k9={offset:"strokeDashoffset",array:"strokeDasharray"};function A9(t,e,s=1,a=0,n=!0){t.pathLength=1;const i=n?C9:k9;t[i.offset]=Je.transform(-a);const c=Je.transform(e),u=Je.transform(s);t[i.array]=`${c} ${u}`}function eT(t,{attrX:e,attrY:s,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:c=0,...u},f,h,p){if(db(t,u,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x}=t;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),s!==void 0&&(g.y=s),a!==void 0&&(g.scale=a),n!==void 0&&A9(g,n,i,c,!1)}const tT=()=>({...fb(),attrs:{}}),sT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function T9(t,e,s,a){const n=y.useMemo(()=>{const i=tT();return eT(i,e,sT(a),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};JA(i,t.style,t),n.style={...i,...n.style}}return n}const R9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hb(t){return typeof t!="string"||t.includes("-")?!1:!!(R9.indexOf(t)>-1||/[A-Z]/u.test(t))}function M9(t=!1){return(s,a,n,{latestValues:i},c)=>{const f=(hb(s)?T9:E9)(a,i,c,s),h=i9(a,typeof s=="string",t),p=s!==y.Fragment?{...h,...f,ref:n}:{},{children:g}=a,x=y.useMemo(()=>sa(g)?g.get():g,[g]);return y.createElement(s,{...p,children:x})}}function o2(t){const e=[{},{}];return t==null||t.values.forEach((s,a)=>{e[0][a]=s.get(),e[1][a]=s.getVelocity()}),e}function mb(t,e,s,a){if(typeof e=="function"){const[n,i]=o2(a);e=e(s!==void 0?s:t.custom,n,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,i]=o2(a);e=e(s!==void 0?s:t.custom,n,i)}return e}function Vh(t){return sa(t)?t.get():t}function P9({scrapeMotionValuesFromProps:t,createRenderState:e},s,a,n){return{latestValues:D9(s,a,n,t),renderState:e()}}const aT=t=>(e,s)=>{const a=y.useContext(np),n=y.useContext(rp),i=()=>P9(t,e,a,n);return s?i():Ly(i)};function D9(t,e,s,a){const n={},i=a(t,{});for(const x in i)n[x]=Vh(i[x]);let{initial:c,animate:u}=t;const f=ip(t),h=YA(t);e&&h&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const g=p?u:c;if(g&&typeof g!="boolean"&&!op(g)){const x=Array.isArray(g)?g:[g];for(let b=0;b<x.length;b++){const j=mb(t,x[b]);if(j){const{transitionEnd:w,transition:N,...E}=j;for(const C in E){let S=E[C];if(Array.isArray(S)){const P=p?S.length-1:0;S=S[P]}S!==null&&(n[C]=S)}for(const C in w)n[C]=w[C]}}}return n}function pb(t,e,s){var i;const{style:a}=t,n={};for(const c in a)(sa(a[c])||e.style&&sa(e.style[c])||QA(c,t)||((i=s==null?void 0:s.getValue(c))==null?void 0:i.liveStyle)!==void 0)&&(n[c]=a[c]);return n}const O9={useVisualState:aT({scrapeMotionValuesFromProps:pb,createRenderState:fb})};function rT(t,e,s){const a=pb(t,e,s);for(const n in t)if(sa(t[n])||sa(e[n])){const i=Cc.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=t[n]}return a}const $9={useVisualState:aT({scrapeMotionValuesFromProps:rT,createRenderState:tT})};function L9(t,e){return function(a,{forwardMotionProps:n}={forwardMotionProps:!1}){const c={...hb(a)?$9:O9,preloadedFeatures:t,useRender:M9(n),createVisualElement:e,Component:a};return g9(c)}}function kd(t,e,s){const a=t.getProps();return mb(a,e,s!==void 0?s:a.custom,t)}const Iv=t=>Array.isArray(t);function I9(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,pc(s))}function B9(t){return Iv(t)?t[t.length-1]||0:t}function V9(t,e){const s=kd(t,e);let{transitionEnd:a={},transition:n={},...i}=s||{};i={...i,...a};for(const c in i){const u=B9(i[c]);I9(t,c,u)}}function q9(t){return!!(sa(t)&&t.add)}function Bv(t,e){const s=t.getValue("willChange");if(q9(s))return s.add(e);if(!s&&kn.WillChange){const a=new kn.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function nT(t){return t.props[KA]}const U9=t=>t!==null;function z9(t,{repeat:e,repeatType:s="loop"},a){const n=t.filter(U9),i=e&&s!=="loop"&&e%2===1?0:n.length-1;return n[i]}const F9={type:"spring",stiffness:500,damping:25,restSpeed:10},H9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),G9={type:"keyframes",duration:.8},X9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y9=(t,{keyframes:e})=>e.length>2?G9:kc.has(t)?t.startsWith("scale")?H9(e[1]):F9:X9;function K9({when:t,delay:e,delayChildren:s,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:c,repeatDelay:u,from:f,elapsed:h,...p}){return!!Object.keys(p).length}const gb=(t,e,s,a={},n,i)=>c=>{const u=ab(a,t)||{},f=u.delay||a.delay||0;let{elapsed:h=0}=a;h=h-Gr(f);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:i?void 0:n};K9(u)||Object.assign(p,Y9(t,p)),p.duration&&(p.duration=Gr(p.duration)),p.repeatDelay&&(p.repeatDelay=Gr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),(kn.instantAnimations||kn.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!i&&e.get()!==void 0){const x=z9(p.keyframes,u);if(x!==void 0){Zt.update(()=>{p.onUpdate(x),p.onComplete()});return}}return u.isSync?new eb(p):new Az(p)};function W9({protectedKeys:t,needsAnimating:e},s){const a=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,a}function oT(t,e,{delay:s=0,transitionOverride:a,type:n}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:c,...u}=e;a&&(i=a);const f=[],h=n&&t.animationState&&t.animationState.getState()[n];for(const p in u){const g=t.getValue(p,t.latestValues[p]??null),x=u[p];if(x===void 0||h&&W9(h,p))continue;const b={delay:s,...ab(i||{},p)},j=g.get();if(j!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===j&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const E=nT(t);if(E){const C=window.MotionHandoffAnimation(E,p,Zt);C!==null&&(b.startTime=C,w=!0)}}Bv(t,p),g.start(gb(p,g,x,t.shouldReduceMotion&&DA.has(p)?{type:!1}:b,t,w));const N=g.animation;N&&f.push(N)}return c&&Promise.all(f).then(()=>{Zt.update(()=>{c&&V9(t,c)})}),f}function Vv(t,e,s={}){var f;const a=kd(t,e,s.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:n=t.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(n=s.transitionOverride);const i=a?()=>Promise.all(oT(t,a,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:x}=n;return Z9(t,e,p+h,g,x,s)}:()=>Promise.resolve(),{when:u}=n;if(u){const[h,p]=u==="beforeChildren"?[i,c]:[c,i];return h().then(()=>p())}else return Promise.all([i(),c(s.delay)])}function Z9(t,e,s=0,a=0,n=1,i){const c=[],u=(t.variantChildren.size-1)*a,f=n===1?(h=0)=>h*a:(h=0)=>u-h*a;return Array.from(t.variantChildren).sort(Q9).forEach((h,p)=>{h.notify("AnimationStart",e),c.push(Vv(h,e,{...i,delay:s+f(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(c)}function Q9(t,e){return t.sortNodePosition(e)}function J9(t,e,s={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const n=e.map(i=>Vv(t,i,s));a=Promise.all(n)}else if(typeof e=="string")a=Vv(t,e,s);else{const n=typeof e=="function"?kd(t,e,s.custom):e;a=Promise.all(oT(t,n,s))}return a.then(()=>{t.notify("AnimationComplete",e)})}function iT(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let a=0;a<s;a++)if(e[a]!==t[a])return!1;return!0}const eF=cb.length;function lT(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?lT(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<eF;s++){const a=cb[s],n=t.props[a];(Ed(n)||n===!1)&&(e[a]=n)}return e}const tF=[...lb].reverse(),sF=lb.length;function aF(t){return e=>Promise.all(e.map(({animation:s,options:a})=>J9(t,s,a)))}function rF(t){let e=aF(t),s=i2(),a=!0;const n=f=>(h,p)=>{var x;const g=kd(t,p,f==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(g){const{transition:b,transitionEnd:j,...w}=g;h={...h,...w,...j}}return h};function i(f){e=f(t)}function c(f){const{props:h}=t,p=lT(t.parent)||{},g=[],x=new Set;let b={},j=1/0;for(let N=0;N<sF;N++){const E=tF[N],C=s[E],S=h[E]!==void 0?h[E]:p[E],P=Ed(S),R=E===f?C.isActive:null;R===!1&&(j=N);let D=S===p[E]&&S!==h[E]&&P;if(D&&a&&t.manuallyAnimateOnMount&&(D=!1),C.protectedKeys={...b},!C.isActive&&R===null||!S&&!C.prevProp||op(S)||typeof S=="boolean")continue;const $=nF(C.prevProp,S);let k=$||E===f&&C.isActive&&!D&&P||N>j&&P,M=!1;const V=Array.isArray(S)?S:[S];let Y=V.reduce(n(E),{});R===!1&&(Y={});const{prevResolvedValues:B={}}=C,z={...B,...Y},Q=I=>{k=!0,x.has(I)&&(M=!0,x.delete(I)),C.needsAnimating[I]=!0;const q=t.getValue(I);q&&(q.liveStyle=!1)};for(const I in z){const q=Y[I],K=B[I];if(b.hasOwnProperty(I))continue;let L=!1;Iv(q)&&Iv(K)?L=!iT(q,K):L=q!==K,L?q!=null?Q(I):x.add(I):q!==void 0&&x.has(I)?Q(I):C.protectedKeys[I]=!0}C.prevProp=S,C.prevResolvedValues=Y,C.isActive&&(b={...b,...Y}),a&&t.blockInitialAnimation&&(k=!1),k&&(!(D&&$)||M)&&g.push(...V.map(I=>({animation:I,options:{type:E}})))}if(x.size){const N={};if(typeof h.initial!="boolean"){const E=kd(t,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(N.transition=E.transition)}x.forEach(E=>{const C=t.getBaseTarget(E),S=t.getValue(E);S&&(S.liveStyle=!0),N[E]=C??null}),g.push({animation:N})}let w=!!g.length;return a&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),a=!1,w?e(g):Promise.resolve()}function u(f,h){var g;if(s[f].isActive===h)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(x=>{var b;return(b=x.animationState)==null?void 0:b.setActive(f,h)}),s[f].isActive=h;const p=c(f);for(const x in s)s[x].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:i,getState:()=>s,reset:()=>{s=i2(),a=!0}}}function nF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iT(e,t):!1}function ui(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i2(){return{animate:ui(!0),whileInView:ui(),whileHover:ui(),whileTap:ui(),whileDrag:ui(),whileFocus:ui(),exit:ui()}}class Bo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oF extends Bo{constructor(e){super(e),e.animationState||(e.animationState=rF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();op(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let iF=0;class lF extends Bo{constructor(){super(...arguments),this.id=iF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const n=this.node.animationState.setActive("exit",!e);s&&!e&&n.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const cF={animation:{Feature:oF},exit:{Feature:lF}};function Ad(t,e,s,a={passive:!0}){return t.addEventListener(e,s,a),()=>t.removeEventListener(e,s)}function qd(t){return{point:{x:t.pageX,y:t.pageY}}}const uF=t=>e=>ob(e)&&t(e,qd(e));function fd(t,e,s,a){return Ad(t,e,uF(s),a)}function cT({top:t,left:e,right:s,bottom:a}){return{x:{min:e,max:s},y:{min:t,max:a}}}function dF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function fF(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}const uT=1e-4,hF=1-uT,mF=1+uT,dT=.01,pF=0-dT,gF=0+dT;function da(t){return t.max-t.min}function xF(t,e,s){return Math.abs(t-e)<=s}function l2(t,e,s,a=.5){t.origin=a,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=da(s)/da(e),t.translate=Wt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=hF&&t.scale<=mF||isNaN(t.scale))&&(t.scale=1),(t.translate>=pF&&t.translate<=gF||isNaN(t.translate))&&(t.translate=0)}function hd(t,e,s,a){l2(t.x,e.x,s.x,a?a.originX:void 0),l2(t.y,e.y,s.y,a?a.originY:void 0)}function c2(t,e,s){t.min=s.min+e.min,t.max=t.min+da(e)}function vF(t,e,s){c2(t.x,e.x,s.x),c2(t.y,e.y,s.y)}function u2(t,e,s){t.min=e.min-s.min,t.max=t.min+da(e)}function md(t,e,s){u2(t.x,e.x,s.x),u2(t.y,e.y,s.y)}const d2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:d2(),y:d2()}),f2=()=>({min:0,max:0}),os=()=>({x:f2(),y:f2()});function er(t){return[t("x"),t("y")]}function kx(t){return t===void 0||t===1}function qv({scale:t,scaleX:e,scaleY:s}){return!kx(t)||!kx(e)||!kx(s)}function hi(t){return qv(t)||fT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fT(t){return h2(t.x)||h2(t.y)}function h2(t){return t&&t!=="0%"}function _m(t,e,s){const a=t-s,n=e*a;return s+n}function m2(t,e,s,a,n){return n!==void 0&&(t=_m(t,n,a)),_m(t,s,a)+e}function Uv(t,e=0,s=1,a,n){t.min=m2(t.min,e,s,a,n),t.max=m2(t.max,e,s,a,n)}function hT(t,{x:e,y:s}){Uv(t.x,e.translate,e.scale,e.originPoint),Uv(t.y,s.translate,s.scale,s.originPoint)}const p2=.999999999999,g2=1.0000000000001;function yF(t,e,s,a=!1){const n=s.length;if(!n)return;e.x=e.y=1;let i,c;for(let u=0;u<n;u++){i=s[u],c=i.projectionDelta;const{visualElement:f}=i.options;f&&f.props.style&&f.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ql(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,hT(t,c)),a&&hi(i.latestValues)&&Ql(t,i.latestValues))}e.x<g2&&e.x>p2&&(e.x=1),e.y<g2&&e.y>p2&&(e.y=1)}function Zl(t,e){t.min=t.min+e,t.max=t.max+e}function x2(t,e,s,a,n=.5){const i=Wt(t.min,t.max,n);Uv(t,e,s,i,a)}function Ql(t,e){x2(t.x,e.x,e.scaleX,e.scale,e.originX),x2(t.y,e.y,e.scaleY,e.scale,e.originY)}function mT(t,e){return cT(fF(t.getBoundingClientRect(),e))}function bF(t,e,s){const a=mT(t,s),{scroll:n}=e;return n&&(Zl(a.x,n.offset.x),Zl(a.y,n.offset.y)),a}const pT=({current:t})=>t?t.ownerDocument.defaultView:null,v2=(t,e)=>Math.abs(t-e);function _F(t,e){const s=v2(t.x,e.x),a=v2(t.y,e.y);return Math.sqrt(s**2+a**2)}class gT{constructor(e,s,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Tx(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=_F(g.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:j}=g,{timestamp:w}=Us;this.history.push({...j,timestamp:w});const{onStart:N,onMove:E}=this.handlers;x||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ax(x,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Tx(g.type==="pointercancel"?this.lastMoveEventInfo:Ax(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,N),j&&j(g,N)},!ob(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=a,this.contextWindow=n||window;const c=qd(e),u=Ax(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=Us;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=s;p&&p(e,Tx(u,this.history)),this.removeListeners=Id(fd(this.contextWindow,"pointermove",this.handlePointerMove),fd(this.contextWindow,"pointerup",this.handlePointerUp),fd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mo(this.updatePoint)}}function Ax(t,e){return e?{point:e(t.point)}:t}function y2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tx({point:t},e){return{point:t,delta:y2(t,xT(e)),offset:y2(t,wF(e)),velocity:jF(e,.1)}}function wF(t){return t[0]}function xT(t){return t[t.length-1]}function jF(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,a=null;const n=xT(t);for(;s>=0&&(a=t[s],!(n.timestamp-a.timestamp>Gr(e)));)s--;if(!a)return{x:0,y:0};const i=Xr(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const c={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function NF(t,{min:e,max:s},a){return e!==void 0&&t<e?t=a?Wt(e,t,a.min):Math.max(t,e):s!==void 0&&t>s&&(t=a?Wt(s,t,a.max):Math.min(t,s)),t}function b2(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function SF(t,{top:e,left:s,bottom:a,right:n}){return{x:b2(t.x,s,n),y:b2(t.y,e,a)}}function _2(t,e){let s=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,a]=[a,s]),{min:s,max:a}}function EF(t,e){return{x:_2(t.x,e.x),y:_2(t.y,e.y)}}function CF(t,e){let s=.5;const a=da(t),n=da(e);return n>a?s=jd(e.min,e.max-a,t.min):a>n&&(s=jd(t.min,t.max-n,e.min)),Cn(0,1,s)}function kF(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const zv=.35;function AF(t=zv){return t===!1?t=0:t===!0&&(t=zv),{x:w2(t,"left","right"),y:w2(t,"top","bottom")}}function w2(t,e,s){return{min:j2(t,e),max:j2(t,s)}}function j2(t,e){return typeof t=="number"?t:t[e]||0}const TF=new WeakMap;class RF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=os(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(qd(p).point)},i=(p,g)=>{const{drag:x,dragPropagation:b,onDragStart:j}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Hz(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(N=>{let E=this.getAxisMotionValue(N).get()||0;if(Yr.test(E)){const{projection:C}=this.visualElement;if(C&&C.layout){const S=C.layout.layoutBox[N];S&&(E=da(S)*(parseFloat(E)/100))}}this.originPoint[N]=E}),j&&Zt.postRender(()=>j(p,g)),Bv(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},c=(p,g)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:j,onDrag:w}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=g;if(b&&this.currentDirection===null){this.currentDirection=MF(N),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>this.stop(p,g),f=()=>er(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new gT(e,{onSessionStart:n,onStart:i,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:pT(this.visualElement)})}stop(e,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Zt.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,a){const{drag:n}=this.getProps();if(!a||!Sh(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let c=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(c=NF(c,this.constraints[e],this.elastic[e])),i.set(c)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;e&&Kl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=SF(a.layoutBox,e):this.constraints=!1,this.elastic=AF(s),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&er(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=kF(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Kl(e))return!1;const a=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=bF(a,n.root,this.visualElement.getTransformPagePoint());let c=EF(n.layout.layoutBox,i);if(s){const u=s(dF(c));this.hasMutatedConstraints=!!u,u&&(c=cT(u))}return c}startAnimation(e){const{drag:s,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},h=er(p=>{if(!Sh(p,s,this.currentDirection))return;let g=f&&f[p]||{};c&&(g={min:0,max:0});const x=n?200:1e6,b=n?40:1e7,j={type:"inertia",velocity:a?e[p]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...i,...g};return this.startAxisValueAnimation(p,j)});return Promise.all(h).then(u)}startAxisValueAnimation(e,s){const a=this.getAxisMotionValue(e);return Bv(this.visualElement,e),a.start(gb(e,a,0,s,this.visualElement,!1))}stopAnimation(){er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){er(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),n=a[s];return n||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){er(s=>{const{drag:a}=this.getProps();if(!Sh(s,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:c,max:u}=n.layout.layoutBox[s];i.set(e[s]-Wt(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!Kl(s)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};er(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();n[c]=CF({min:f,max:f},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),er(c=>{if(!Sh(c,e,null))return;const u=this.getAxisMotionValue(c),{min:f,max:h}=this.constraints[c];u.set(Wt(f,h,n[c]))})}addListeners(){if(!this.visualElement.current)return;TF.set(this.visualElement,this);const e=this.visualElement.current,s=fd(e,"pointerdown",f=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(f)}),a=()=>{const{dragConstraints:f}=this.getProps();Kl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Zt.read(a);const c=Ad(window,"resize",()=>this.scalePositionWithinConstraints()),u=n.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(er(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=f[p].translate,g.set(g.get()+f[p].translate))}),this.visualElement.render())});return()=>{c(),s(),i(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:c=zv,dragMomentum:u=!0}=e;return{...e,drag:s,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:c,dragMomentum:u}}}function Sh(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function MF(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class PF extends Bo{constructor(e){super(e),this.removeGroupControls=rr,this.removeListeners=rr,this.controls=new RF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rr}unmount(){this.removeGroupControls(),this.removeListeners()}}const N2=t=>(e,s)=>{t&&Zt.postRender(()=>t(e,s))};class DF extends Bo{constructor(){super(...arguments),this.removePointerDownListener=rr}onPointerDown(e){this.session=new gT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:N2(e),onStart:N2(s),onMove:a,onEnd:(i,c)=>{delete this.session,n&&Zt.postRender(()=>n(i,c))}}}mount(){this.removePointerDownListener=fd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function S2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Je.test(t))t=parseFloat(t);else return t;const s=S2(t,e.target.x),a=S2(t,e.target.y);return`${s}% ${a}%`}},OF={correct:(t,{treeScale:e,projectionDelta:s})=>{const a=t,n=Po.parse(t);if(n.length>5)return a;const i=Po.createTransformer(t),c=typeof n[0]!="number"?1:0,u=s.x.scale*e.x,f=s.y.scale*e.y;n[0+c]/=u,n[1+c]/=f;const h=Wt(u,f,.5);return typeof n[2+c]=="number"&&(n[2+c]/=h),typeof n[3+c]=="number"&&(n[3+c]/=h),i(n)}};class $F extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=e;b9(LF),i&&(s.group&&s.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:a,drag:n,isPresent:i}=this.props,{projection:c}=a;return c&&(c.isPresent=i,n||e.layoutDependency!==s||s===void 0||e.isPresent!==i?c.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?c.promote():c.relegate()||Zt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vT(t){const[e,s]=FA(),a=y.useContext($y);return r.jsx($F,{...t,layoutGroup:a,switchLayoutGroup:y.useContext(WA),isPresent:e,safeToRemove:s})}const LF={borderRadius:{...Lu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lu,borderTopRightRadius:Lu,borderBottomLeftRadius:Lu,borderBottomRightRadius:Lu,boxShadow:OF};function IF(t,e,s){const a=sa(t)?t:pc(t);return a.start(gb("",a,e,s)),a.animation}const BF=(t,e)=>t.depth-e.depth;class VF{constructor(){this.children=[],this.isDirty=!1}add(e){By(this.children,e),this.isDirty=!0}remove(e){Vy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(BF),this.isDirty=!1,this.children.forEach(e)}}function qF(t,e){const s=ja.now(),a=({timestamp:n})=>{const i=n-s;i>=e&&(Mo(a),t(i-e))};return Zt.setup(a,!0),()=>Mo(a)}const yT=["TopLeft","TopRight","BottomLeft","BottomRight"],UF=yT.length,E2=t=>typeof t=="string"?parseFloat(t):t,C2=t=>typeof t=="number"||Je.test(t);function zF(t,e,s,a,n,i){n?(t.opacity=Wt(0,s.opacity??1,FF(a)),t.opacityExit=Wt(e.opacity??1,0,HF(a))):i&&(t.opacity=Wt(e.opacity??1,s.opacity??1,a));for(let c=0;c<UF;c++){const u=`border${yT[c]}Radius`;let f=k2(e,u),h=k2(s,u);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||C2(f)===C2(h)?(t[u]=Math.max(Wt(E2(f),E2(h),a),0),(Yr.test(h)||Yr.test(f))&&(t[u]+="%")):t[u]=h}(e.rotate||s.rotate)&&(t.rotate=Wt(e.rotate||0,s.rotate||0,a))}function k2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const FF=bT(0,.5,dA),HF=bT(.5,.95,rr);function bT(t,e,s){return a=>a<t?0:a>e?1:s(jd(t,e,a))}function A2(t,e){t.min=e.min,t.max=e.max}function Qa(t,e){A2(t.x,e.x),A2(t.y,e.y)}function T2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function R2(t,e,s,a,n){return t-=e,t=_m(t,1/s,a),n!==void 0&&(t=_m(t,1/n,a)),t}function GF(t,e=0,s=1,a=.5,n,i=t,c=t){if(Yr.test(e)&&(e=parseFloat(e),e=Wt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=Wt(i.min,i.max,a);t===i&&(u-=e),t.min=R2(t.min,e,s,u,n),t.max=R2(t.max,e,s,u,n)}function M2(t,e,[s,a,n],i,c){GF(t,e[s],e[a],e[n],e.scale,i,c)}const XF=["x","scaleX","originX"],YF=["y","scaleY","originY"];function P2(t,e,s,a){M2(t.x,e,XF,s?s.x:void 0,a?a.x:void 0),M2(t.y,e,YF,s?s.y:void 0,a?a.y:void 0)}function D2(t){return t.translate===0&&t.scale===1}function _T(t){return D2(t.x)&&D2(t.y)}function O2(t,e){return t.min===e.min&&t.max===e.max}function KF(t,e){return O2(t.x,e.x)&&O2(t.y,e.y)}function $2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wT(t,e){return $2(t.x,e.x)&&$2(t.y,e.y)}function L2(t){return da(t.x)/da(t.y)}function I2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WF{constructor(){this.members=[]}add(e){By(this.members,e),e.scheduleRender()}remove(e){if(Vy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(n=>e===n);if(s===0)return!1;let a;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(e,s){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,s&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:a}=e;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ZF(t,e,s){let a="";const n=t.x.translate/e.x,i=t.y.translate/e.y,c=(s==null?void 0:s.z)||0;if((n||i||c)&&(a=`translate3d(${n}px, ${i}px, ${c}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:x,skewX:b,skewY:j}=s;h&&(a=`perspective(${h}px) ${a}`),p&&(a+=`rotate(${p}deg) `),g&&(a+=`rotateX(${g}deg) `),x&&(a+=`rotateY(${x}deg) `),b&&(a+=`skewX(${b}deg) `),j&&(a+=`skewY(${j}deg) `)}const u=t.x.scale*e.x,f=t.y.scale*e.y;return(u!==1||f!==1)&&(a+=`scale(${u}, ${f})`),a||"none"}const Rx=["","X","Y","Z"],QF={visibility:"hidden"},JF=1e3;let e7=0;function Mx(t,e,s,a){const{latestValues:n}=e;n[t]&&(s[t]=n[t],e.setStaticValue(t,0),a&&(a[t]=0))}function jT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=nT(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Zt,!(n||i))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&jT(a)}function NT({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(c={},u=e==null?void 0:e()){this.id=e7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(a7),this.nodes.forEach(l7),this.nodes.forEach(c7),this.nodes.forEach(r7)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new VF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new zy),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=zA(c)&&!Zz(c),this.instance=c;const{layoutId:u,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=qF(g,250),qh.hasAnimatedSinceResize&&(qh.hasAnimatedSinceResize=!1,this.nodes.forEach(V2))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||h.getDefaultTransition()||m7,{onLayoutAnimationStart:w,onLayoutAnimationComplete:N}=h.getProps(),E=!this.targetLayout||!wT(this.targetLayout,b),C=!g&&x;if(this.options.layoutRoot||this.resumeFrom||C||g&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...ab(j,"layout"),onPlay:w,onComplete:N};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(p,C)}else g||V2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(B2);return}this.isUpdating||this.nodes.forEach(o7),this.isUpdating=!1,this.nodes.forEach(i7),this.nodes.forEach(t7),this.nodes.forEach(s7),this.clearAllSnapshots();const u=ja.now();Us.delta=Cn(0,1e3/60,u-Us.timestamp),Us.timestamp=u,Us.isProcessing=!0,wx.update.process(Us),wx.preRender.process(Us),wx.render.process(Us),Us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n7),this.sharedNodes.forEach(d7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!da(this.snapshot.measuredBox.x)&&!da(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=a(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!n)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!_T(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;c&&this.instance&&(u||hi(this.latestValues)||p)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),p7(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:c}=this.options;if(!c)return os();const u=c.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(g7))){const{scroll:p}=this.root;p&&(Zl(u.x,p.offset.x),Zl(u.y,p.offset.y))}return u}removeElementScroll(c){var f;const u=os();if(Qa(u,c),(f=this.scroll)!=null&&f.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:x}=p;p!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&Qa(u,c),Zl(u.x,g.offset.x),Zl(u.y,g.offset.y))}return u}applyTransform(c,u=!1){const f=os();Qa(f,c);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ql(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),hi(p.latestValues)&&Ql(f,p.latestValues)}return hi(this.latestValues)&&Ql(f,this.latestValues),f}removeTransform(c){const u=os();Qa(u,c);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!hi(h.latestValues))continue;qv(h.latestValues)&&h.updateSnapshot();const p=os(),g=h.measurePageBox();Qa(p,g),P2(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return hi(this.latestValues)&&P2(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=Us.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),md(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Qa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=os(),this.targetWithTransforms=os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qa(this.target,this.layout.layoutBox),hT(this.target,this.targetDelta)):Qa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),md(this.relativeTargetOrigin,this.target,b.target),Qa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qv(this.parent.latestValues)||fT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var j;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Us.timestamp&&(f=!1),f)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Qa(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;yF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=os());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(T2(this.prevProjectionDelta.x,this.projectionDelta.x),T2(this.prevProjectionDelta.y,this.projectionDelta.y)),hd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!I2(this.projectionDelta.x,this.prevProjectionDelta.x)||!I2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(c,u=!1){const f=this.snapshot,h=f?f.latestValues:{},p={...this.latestValues},g=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=os(),b=f?f.source:void 0,j=this.layout?this.layout.source:void 0,w=b!==j,N=this.getStack(),E=!N||N.members.length<=1,C=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(h7));this.animationProgress=0;let S;this.mixTargetDelta=P=>{const R=P/1e3;q2(g.x,c.x,R),q2(g.y,c.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(md(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f7(this.relativeTarget,this.relativeTargetOrigin,x,R),S&&KF(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=os()),Qa(S,this.relativeTarget)),w&&(this.animationValues=p,zF(p,h,this.latestValues,R,C,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,f,h;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(h=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Mo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{qh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pc(0)),this.currentAnimation=IF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:h,latestValues:p}=c;if(!(!u||!f||!h)){if(this!==c&&this.layout&&h&&ST(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||os();const g=da(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+g;const x=da(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+x}Qa(u,f),Ql(u,p),hd(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new WF),this.sharedNodes.get(c).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const h={};f.z&&Mx("z",c,h,this.animationValues);for(let p=0;p<Rx.length;p++)Mx(`rotate${Rx[p]}`,c,h,this.animationValues),Mx(`skew${Rx[p]}`,c,h,this.animationValues);c.render();for(const p in h)c.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return QF;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Vh(c==null?void 0:c.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Vh(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!hi(this.latestValues)&&(b.transform=f?f({},""):"none",this.hasProjected=!1),b}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=ZF(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const b in Cd){if(p[b]===void 0)continue;const{correct:j,applyTo:w,isCSSVariable:N}=Cd[b],E=u.transform==="none"?p[b]:j(p[b],h);if(w){const C=w.length;for(let S=0;S<C;S++)u[w[S]]=E}else N?this.options.visualElement.renderState.vars[b]=E:u[b]=E}return this.options.layoutId&&(u.pointerEvents=h===this?Vh(c==null?void 0:c.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(B2),this.root.sharedNodes.clear()}}}function t7(t){t.updateLayout()}function s7(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,c=e.source!==t.layout.source;i==="size"?er(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],b=da(x);x.min=a[g].min,x.max=x.min+b}):ST(i,e.layoutBox,a)&&er(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],b=da(a[g]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+b)});const u=Wl();hd(u,a,e.layoutBox);const f=Wl();c?hd(f,t.applyTransform(n,!0),e.measuredBox):hd(f,a,e.layoutBox);const h=!_T(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:b}=g;if(x&&b){const j=os();md(j,e.layoutBox,x.layoutBox);const w=os();md(w,a,b.layoutBox),wT(j,w)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=j,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:f,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function a7(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function r7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function n7(t){t.clearSnapshot()}function B2(t){t.clearMeasurements()}function o7(t){t.isLayoutDirty=!1}function i7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function V2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l7(t){t.resolveTargetDelta()}function c7(t){t.calcProjection()}function u7(t){t.resetSkewAndRotation()}function d7(t){t.removeLeadSnapshot()}function q2(t,e,s){t.translate=Wt(e.translate,0,s),t.scale=Wt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function U2(t,e,s,a){t.min=Wt(e.min,s.min,a),t.max=Wt(e.max,s.max,a)}function f7(t,e,s,a){U2(t.x,e.x,s.x,a),U2(t.y,e.y,s.y,a)}function h7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const m7={duration:.45,ease:[.4,0,.1,1]},z2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),F2=z2("applewebkit/")&&!z2("chrome/")?Math.round:rr;function H2(t){t.min=F2(t.min),t.max=F2(t.max)}function p7(t){H2(t.x),H2(t.y)}function ST(t,e,s){return t==="position"||t==="preserve-aspect"&&!xF(L2(e),L2(s),.2)}function g7(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const x7=NT({attachResizeListener:(t,e)=>Ad(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Px={current:void 0},ET=NT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Px.current){const t=new x7({});t.mount(window),t.setOptions({layoutScroll:!0}),Px.current=t}return Px.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v7={pan:{Feature:DF},drag:{Feature:PF,ProjectionNode:ET,MeasureLayout:vT}};function G2(t,e,s){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,i=a[n];i&&Zt.postRender(()=>i(e,qd(e)))}class y7 extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=Gz(e,(s,a)=>(G2(this.node,a,"Start"),n=>G2(this.node,n,"End"))))}unmount(){}}class b7 extends Bo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Id(Ad(this.node.current,"focus",()=>this.onFocus()),Ad(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function X2(t,e,s){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),i=a[n];i&&Zt.postRender(()=>i(e,qd(e)))}class _7 extends Bo{mount(){const{current:e}=this.node;e&&(this.unmount=Wz(e,(s,a)=>(X2(this.node,a,"Start"),(n,{success:i})=>X2(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fv=new WeakMap,Dx=new WeakMap,w7=t=>{const e=Fv.get(t.target);e&&e(t)},j7=t=>{t.forEach(w7)};function N7({root:t,...e}){const s=t||document;Dx.has(s)||Dx.set(s,{});const a=Dx.get(s),n=JSON.stringify(e);return a[n]||(a[n]=new IntersectionObserver(j7,{root:t,...e})),a[n]}function S7(t,e,s){const a=N7(e);return Fv.set(t,s),a.observe(t),()=>{Fv.delete(t),a.unobserve(t)}}const E7={some:0,all:1};class C7 extends Bo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:a,amount:n="some",once:i}=e,c={root:s?s.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:E7[n]},u=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),x=h?p:g;x&&x(f)};return S7(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(k7(e,s))&&this.startObserver()}unmount(){}}function k7({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const A7={inView:{Feature:C7},tap:{Feature:_7},focus:{Feature:b7},hover:{Feature:y7}},T7={layout:{ProjectionNode:ET,MeasureLayout:vT}},Hv={current:null},CT={current:!1};function R7(){if(CT.current=!0,!!Iy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Hv.current=t.matches;t.addListener(e),e()}else Hv.current=!1}const M7=new WeakMap;function P7(t,e,s){for(const a in e){const n=e[a],i=s[a];if(sa(n))t.addValue(a,n);else if(sa(i))t.addValue(a,pc(n,{owner:t}));else if(i!==n)if(t.hasValue(a)){const c=t.getValue(a);c.liveStyle===!0?c.jump(n):c.hasAnimated||c.set(n)}else{const c=t.getStaticValue(a);t.addValue(a,pc(c!==void 0?c:n,{owner:t}))}}for(const a in s)e[a]===void 0&&t.removeValue(a);return e}const Y2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D7{scrapeMotionValuesFromProps(e,s,a){return{}}constructor({parent:e,props:s,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=tb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ja.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Zt.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=u,this.blockInitialAnimation=!!i,this.isControllingVariants=ip(s),this.isVariantNode=YA(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in g){const b=g[x];f[x]!==void 0&&sa(b)&&b.set(f[x],!1)}}mount(e){this.current=e,M7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),CT.current||R7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mo(this.notifyUpdate),Mo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const a=kc.has(e);a&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Zt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{n(),i(),c&&c(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gc){const s=gc[e];if(!s)continue;const{isEnabled:a,Feature:n}=s;if(!this.features[e]&&n&&a(this.props)&&(this.features[e]=new n(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):os()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<Y2.length;a++){const n=Y2[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,c=e[i];c&&(this.propEventSubscriptions[n]=this.on(n,c))}this.prevMotionValues=P7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const a=this.values.get(e);s!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&s!==void 0&&(a=pc(s===null?void 0:s,{owner:this}),this.addValue(e,a)),a}readValue(e,s){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(tA(a)||aA(a))?a=parseFloat(a):!Jz(a)&&Po.test(s)&&(a=IA(e,s)),this.setBaseTarget(e,sa(a)?a.get():a)),sa(a)?a.get():a}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const c=mb(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);c&&(a=c[e])}if(s&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!sa(n)?n:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new zy),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class kT extends D7{constructor(){super(...arguments),this.KeyframeResolver=qz}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:a}){delete s[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sa(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function AT(t,{style:e,vars:s},a,n){Object.assign(t.style,e,n&&n.getProjectionStyles(a));for(const i in s)t.style.setProperty(i,s[i])}function O7(t){return window.getComputedStyle(t)}class $7 extends kT{constructor(){super(...arguments),this.type="html",this.renderInstance=AT}readValueFromInstance(e,s){var a;if(kc.has(s))return(a=this.projection)!=null&&a.isProjecting?Mv(s):oz(e,s);{const n=O7(e),i=(Gy(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return mT(e,s)}build(e,s,a){db(e,s,a.transformTemplate)}scrapeMotionValuesFromProps(e,s,a){return pb(e,s,a)}}const TT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L7(t,e,s,a){AT(t,e,void 0,a);for(const n in e.attrs)t.setAttribute(TT.has(n)?n:ub(n),e.attrs[n])}class I7 extends kT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=os}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(kc.has(s)){const a=LA(s);return a&&a.default||0}return s=TT.has(s)?s:ub(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,a){return rT(e,s,a)}build(e,s,a){eT(e,s,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,s,a,n){L7(e,s,a,n)}mount(e){this.isSVGTag=sT(e.tagName),super.mount(e)}}const B7=(t,e)=>hb(t)?new I7(e):new $7(e,{allowProjection:t!==y.Fragment}),V7=L9({...cF,...A7,...v7,...T7},B7),Rs=l9(V7);function q7({children:t,className:e,...s}){return r.jsx(Rs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:Ve("relative overflow-hidden rounded-2xl border bg-card p-8 shadow-xl",'before:absolute before:-left-80 before:-top-80 before:h-[500px] before:w-[500px] before:rounded-full before:bg-primary/20 before:blur-3xl before:content-[""]','after:absolute after:-right-80 after:-top-80 after:h-[500px] after:w-[500px] after:rounded-full after:bg-secondary/20 after:blur-3xl after:content-[""]',e),...s,children:t})}const RT=Yt("/_public/auth")({component:U7,validateSearch:t=>({auth:t.auth||""})});function U7(){const[t,e]=y.useState(!0),{signInWithEmail:s,signUpWithEmail:a,loading:n,isAuthenticated:i}=zs(),c=Pt(),{auth:u}=RT.useSearch();y.useEffect(()=>{if(i){let p="/game";if(u&&typeof u=="string"&&u.trim()!==""&&u!=="true")try{const g=decodeURIComponent(u);g&&g.startsWith("/")&&!g.includes("[object")&&!g.startsWith("/auth")&&(p=g)}catch(g){console.warn("Erro ao decodificar parâmetro auth:",g),p="/game"}c({to:p})}},[i,u,c]);const f=async p=>{try{const g=await s(p);g.success||pe.error("Erro ao fazer login",{description:g.error||"Ocorreu um erro inesperado"})}catch(g){pe.error("Erro ao fazer login",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}},h=async p=>{try{const g={email:p.email,password:p.password,username:p.email.split("@")[0]},x=await a(g);x.success?(pe.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):x.error&&x.error.includes("Email rate limit")?(pe.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):pe.error("Erro ao criar conta",{description:x.error||"Ocorreu um erro inesperado"})}catch(g){pe.error("Erro ao criar conta",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-background via-background/95 to-background/90 transition-colors duration-300",children:r.jsx(q7,{className:"w-full max-w-md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t?"Login":"Criar Conta"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Entre com suas credenciais para acessar o sistema":"Preencha os dados abaixo para criar sua conta"})]}),t?r.jsx(sU,{onSubmit:f,isLoading:n.signIn}):r.jsx(aU,{onSubmit:h,isLoading:n.signUp}),r.jsx(de,{type:"button",variant:"ghost",className:"w-full",onClick:()=>e(!t),disabled:n.signIn||n.signUp,children:t?"Não tem uma conta? Criar conta":"Já tem uma conta? Fazer login"})]})})})}class z7{async getUserProfile(){try{const{data:{user:e},error:s}=await _e.auth.getUser();if(s)throw s;if(!e)return{data:null,error:"Usuário não autenticado"};const{data:a,error:n}=await _e.from("users").select("*").eq("uid",e.id).maybeSingle();if(n)throw n;return{data:a,error:null}}catch(e){return console.error("Erro ao buscar perfil:",e),{data:null,error:e instanceof Error?e.message:"Erro ao buscar perfil"}}}async searchUsers(e){try{let s=_e.from("users").select("id",{count:"exact"});e.nome&&(s=s.ilike("nome",`%${e.nome}%`)),e.email&&(s=s.ilike("email",`%${e.email}%`)),e.role&&(s=s.eq("role",e.role)),e.ativo!==void 0&&(s=s.eq("ativo",e.ativo));const{count:a,error:n}=await s;if(n)throw n;let i=_e.from("users").select("*").order("created_at",{ascending:!1});e.nome&&(i=i.ilike("nome",`%${e.nome}%`)),e.email&&(i=i.ilike("email",`%${e.email}%`)),e.role&&(i=i.eq("role",e.role)),e.ativo!==void 0&&(i=i.eq("ativo",e.ativo));const{data:c,error:u}=await i.range((e.page-1)*e.limit,e.page*e.limit-1);if(u)throw u;return{data:c,count:a||0,error:null}}catch(s){return console.error("Erro ao buscar usuários:",s),{data:null,count:0,error:s instanceof Error?s.message:"Erro ao buscar usuários"}}}async updateUser(e,s){try{let a;if(s.imagemPerfil){const i=s.imagemPerfil.name.split(".").pop(),c=`${e}-${Date.now()}.${i}`,{error:u}=await _e.storage.from("profile-images").upload(c,s.imagemPerfil,{cacheControl:"3600",upsert:!0});if(u)throw u;const{data:{publicUrl:f}}=_e.storage.from("profile-images").getPublicUrl(c);a=f,delete s.imagemPerfil}const{error:n}=await _e.from("users").update({...s,...a&&{imagem_perfil_url:a},updated_at:new Date().toISOString()}).eq("uid",e);if(n)throw n;return{error:null}}catch(a){return console.error("Erro ao atualizar usuário:",a),{error:a instanceof Error?a.message:"Erro ao atualizar usuário"}}}}const oc=new z7;function F7(){const[t,e]=y.useState(!1),[s,a]=y.useState(null),[n,i]=y.useState(null),[c,u]=y.useState([]),f=y.useCallback(async()=>{try{e(!0),a(null);const{data:p,error:g}=await oc.getUserProfile();if(g)throw new Error(g);return p&&i(p),p}catch(p){const g=p instanceof Error?p.message:"Erro ao buscar perfil";return a(g),null}finally{e(!1)}},[]),h=y.useCallback(async p=>{try{e(!0),a(null);const{data:g,error:x}=await oc.searchUsers(p);if(x)throw new Error(x);g&&u(g)}catch(g){const x=g instanceof Error?g.message:"Erro ao buscar usuários";a(x)}finally{e(!1)}},[]);return{user:n,users:c,loading:t,error:s,getUserProfile:f,searchUsers:h}}const lp=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:Ve("w-full caption-bottom text-sm",t),...e})}));lp.displayName="Table";const cp=y.forwardRef(({className:t,...e},s)=>r.jsx("thead",{ref:s,className:Ve("[&_tr]:border-b",t),...e}));cp.displayName="TableHeader";const up=y.forwardRef(({className:t,...e},s)=>r.jsx("tbody",{ref:s,className:Ve("[&_tr:last-child]:border-0",t),...e}));up.displayName="TableBody";const H7=y.forwardRef(({className:t,...e},s)=>r.jsx("tfoot",{ref:s,className:Ve("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));H7.displayName="TableFooter";const qr=y.forwardRef(({className:t,...e},s)=>r.jsx("tr",{ref:s,className:Ve("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));qr.displayName="TableRow";const ca=y.forwardRef(({className:t,...e},s)=>r.jsx("th",{ref:s,className:Ve("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));ca.displayName="TableHead";const Ms=y.forwardRef(({className:t,...e},s)=>r.jsx("td",{ref:s,className:Ve("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));Ms.displayName="TableCell";const G7=y.forwardRef(({className:t,...e},s)=>r.jsx("caption",{ref:s,className:Ve("mt-4 text-sm text-muted-foreground",t),...e}));G7.displayName="TableCaption";function Gv(t,[e,s]){return Math.min(s,Math.max(e,t))}function MT(t){const e=t+"CollectionProvider",[s,a]=or(e),[n,i]=s(e,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:N,children:E}=w,C=he.useRef(null),S=he.useRef(new Map).current;return r.jsx(n,{scope:N,itemMap:S,collectionRef:C,children:E})};c.displayName=e;const u=t+"CollectionSlot",f=Ti(u),h=he.forwardRef((w,N)=>{const{scope:E,children:C}=w,S=i(u,E),P=_t(N,S.collectionRef);return r.jsx(f,{ref:P,children:C})});h.displayName=u;const p=t+"CollectionItemSlot",g="data-radix-collection-item",x=Ti(p),b=he.forwardRef((w,N)=>{const{scope:E,children:C,...S}=w,P=he.useRef(null),R=_t(N,P),D=i(p,E);return he.useEffect(()=>(D.itemMap.set(P,{ref:P,...S}),()=>void D.itemMap.delete(P))),r.jsx(x,{[g]:"",ref:R,children:C})});b.displayName=p;function j(w){const N=i(t+"CollectionConsumer",w);return he.useCallback(()=>{const C=N.collectionRef.current;if(!C)return[];const S=Array.from(C.querySelectorAll(`[${g}]`));return Array.from(N.itemMap.values()).sort((D,$)=>S.indexOf(D.ref.current)-S.indexOf($.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:h,ItemSlot:b},j,a]}var X7=y.createContext(void 0);function dp(t){const e=y.useContext(X7);return t||e||"ltr"}const Y7=["top","right","bottom","left"],Do=Math.min,Oa=Math.max,wm=Math.round,Eh=Math.floor,Kr=t=>({x:t,y:t}),K7={left:"right",right:"left",bottom:"top",top:"bottom"},W7={start:"end",end:"start"};function Xv(t,e,s){return Oa(t,Do(e,s))}function An(t,e){return typeof t=="function"?t(e):t}function Tn(t){return t.split("-")[0]}function Ac(t){return t.split("-")[1]}function xb(t){return t==="x"?"y":"x"}function vb(t){return t==="y"?"height":"width"}function Ur(t){return["top","bottom"].includes(Tn(t))?"y":"x"}function yb(t){return xb(Ur(t))}function Z7(t,e,s){s===void 0&&(s=!1);const a=Ac(t),n=yb(t),i=vb(n);let c=n==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(c=jm(c)),[c,jm(c)]}function Q7(t){const e=jm(t);return[Yv(t),e,Yv(e)]}function Yv(t){return t.replace(/start|end/g,e=>W7[e])}function J7(t,e,s){const a=["left","right"],n=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return s?e?n:a:e?a:n;case"left":case"right":return e?i:c;default:return[]}}function eH(t,e,s,a){const n=Ac(t);let i=J7(Tn(t),s==="start",a);return n&&(i=i.map(c=>c+"-"+n),e&&(i=i.concat(i.map(Yv)))),i}function jm(t){return t.replace(/left|right|bottom|top/g,e=>K7[e])}function tH(t){return{top:0,right:0,bottom:0,left:0,...t}}function PT(t){return typeof t!="number"?tH(t):{top:t,right:t,bottom:t,left:t}}function Nm(t){const{x:e,y:s,width:a,height:n}=t;return{width:a,height:n,top:s,left:e,right:e+a,bottom:s+n,x:e,y:s}}function K2(t,e,s){let{reference:a,floating:n}=t;const i=Ur(e),c=yb(e),u=vb(c),f=Tn(e),h=i==="y",p=a.x+a.width/2-n.width/2,g=a.y+a.height/2-n.height/2,x=a[u]/2-n[u]/2;let b;switch(f){case"top":b={x:p,y:a.y-n.height};break;case"bottom":b={x:p,y:a.y+a.height};break;case"right":b={x:a.x+a.width,y:g};break;case"left":b={x:a.x-n.width,y:g};break;default:b={x:a.x,y:a.y}}switch(Ac(e)){case"start":b[c]-=x*(s&&h?-1:1);break;case"end":b[c]+=x*(s&&h?-1:1);break}return b}const sH=async(t,e,s)=>{const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:c}=s,u=i.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:g}=K2(h,a,f),x=a,b={},j=0;for(let w=0;w<u.length;w++){const{name:N,fn:E}=u[w],{x:C,y:S,data:P,reset:R}=await E({x:p,y:g,initialPlacement:a,placement:x,strategy:n,middlewareData:b,rects:h,platform:c,elements:{reference:t,floating:e}});p=C??p,g=S??g,b={...b,[N]:{...b[N],...P}},R&&j<=50&&(j++,typeof R=="object"&&(R.placement&&(x=R.placement),R.rects&&(h=R.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:n}):R.rects),{x:p,y:g}=K2(h,x,f)),w=-1)}return{x:p,y:g,placement:x,strategy:n,middlewareData:b}};async function Td(t,e){var s;e===void 0&&(e={});const{x:a,y:n,platform:i,rects:c,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:x=!1,padding:b=0}=An(e,t),j=PT(b),N=u[x?g==="floating"?"reference":"floating":g],E=Nm(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(N)))==null||s?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:f})),C=g==="floating"?{x:a,y:n,width:c.floating.width,height:c.floating.height}:c.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),P=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Nm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:S,strategy:f}):C);return{top:(E.top-R.top+j.top)/P.y,bottom:(R.bottom-E.bottom+j.bottom)/P.y,left:(E.left-R.left+j.left)/P.x,right:(R.right-E.right+j.right)/P.x}}const aH=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:a,placement:n,rects:i,platform:c,elements:u,middlewareData:f}=e,{element:h,padding:p=0}=An(t,e)||{};if(h==null)return{};const g=PT(p),x={x:s,y:a},b=yb(n),j=vb(b),w=await c.getDimensions(h),N=b==="y",E=N?"top":"left",C=N?"bottom":"right",S=N?"clientHeight":"clientWidth",P=i.reference[j]+i.reference[b]-x[b]-i.floating[j],R=x[b]-i.reference[b],D=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let $=D?D[S]:0;(!$||!await(c.isElement==null?void 0:c.isElement(D)))&&($=u.floating[S]||i.floating[j]);const k=P/2-R/2,M=$/2-w[j]/2-1,V=Do(g[E],M),Y=Do(g[C],M),B=V,z=$-w[j]-Y,Q=$/2-w[j]/2+k,H=Xv(B,Q,z),A=!f.arrow&&Ac(n)!=null&&Q!==H&&i.reference[j]/2-(Q<B?V:Y)-w[j]/2<0,I=A?Q<B?Q-B:Q-z:0;return{[b]:x[b]+I,data:{[b]:H,centerOffset:Q-H-I,...A&&{alignmentOffset:I}},reset:A}}}),rH=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,a;const{placement:n,middlewareData:i,rects:c,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:w=!0,...N}=An(t,e);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const E=Tn(n),C=Ur(u),S=Tn(u)===u,P=await(f.isRTL==null?void 0:f.isRTL(h.floating)),R=x||(S||!w?[jm(u)]:Q7(u)),D=j!=="none";!x&&D&&R.push(...eH(u,w,j,P));const $=[u,...R],k=await Td(e,N),M=[];let V=((a=i.flip)==null?void 0:a.overflows)||[];if(p&&M.push(k[E]),g){const Q=Z7(n,c,P);M.push(k[Q[0]],k[Q[1]])}if(V=[...V,{placement:n,overflows:M}],!M.every(Q=>Q<=0)){var Y,B;const Q=(((Y=i.flip)==null?void 0:Y.index)||0)+1,H=$[Q];if(H&&(!(g==="alignment"?C!==Ur(H):!1)||V.every(q=>q.overflows[0]>0&&Ur(q.placement)===C)))return{data:{index:Q,overflows:V},reset:{placement:H}};let A=(B=V.filter(I=>I.overflows[0]<=0).sort((I,q)=>I.overflows[1]-q.overflows[1])[0])==null?void 0:B.placement;if(!A)switch(b){case"bestFit":{var z;const I=(z=V.filter(q=>{if(D){const K=Ur(q.placement);return K===C||K==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(K=>K>0).reduce((K,L)=>K+L,0)]).sort((q,K)=>q[1]-K[1])[0])==null?void 0:z[0];I&&(A=I);break}case"initialPlacement":A=u;break}if(n!==A)return{reset:{placement:A}}}return{}}}};function W2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Z2(t){return Y7.some(e=>t[e]>=0)}const nH=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:a="referenceHidden",...n}=An(t,e);switch(a){case"referenceHidden":{const i=await Td(e,{...n,elementContext:"reference"}),c=W2(i,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Z2(c)}}}case"escaped":{const i=await Td(e,{...n,altBoundary:!0}),c=W2(i,s.floating);return{data:{escapedOffsets:c,escaped:Z2(c)}}}default:return{}}}}};async function oH(t,e){const{placement:s,platform:a,elements:n}=t,i=await(a.isRTL==null?void 0:a.isRTL(n.floating)),c=Tn(s),u=Ac(s),f=Ur(s)==="y",h=["left","top"].includes(c)?-1:1,p=i&&f?-1:1,g=An(e,t);let{mainAxis:x,crossAxis:b,alignmentAxis:j}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof j=="number"&&(b=u==="end"?j*-1:j),f?{x:b*p,y:x*h}:{x:x*h,y:b*p}}const iH=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,a;const{x:n,y:i,placement:c,middlewareData:u}=e,f=await oH(e,t);return c===((s=u.offset)==null?void 0:s.placement)&&(a=u.arrow)!=null&&a.alignmentOffset?{}:{x:n+f.x,y:i+f.y,data:{...f,placement:c}}}}},lH=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:a,placement:n}=e,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:N=>{let{x:E,y:C}=N;return{x:E,y:C}}},...f}=An(t,e),h={x:s,y:a},p=await Td(e,f),g=Ur(Tn(n)),x=xb(g);let b=h[x],j=h[g];if(i){const N=x==="y"?"top":"left",E=x==="y"?"bottom":"right",C=b+p[N],S=b-p[E];b=Xv(C,b,S)}if(c){const N=g==="y"?"top":"left",E=g==="y"?"bottom":"right",C=j+p[N],S=j-p[E];j=Xv(C,j,S)}const w=u.fn({...e,[x]:b,[g]:j});return{...w,data:{x:w.x-s,y:w.y-a,enabled:{[x]:i,[g]:c}}}}}},cH=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:a,placement:n,rects:i,middlewareData:c}=e,{offset:u=0,mainAxis:f=!0,crossAxis:h=!0}=An(t,e),p={x:s,y:a},g=Ur(n),x=xb(g);let b=p[x],j=p[g];const w=An(u,e),N=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(f){const S=x==="y"?"height":"width",P=i.reference[x]-i.floating[S]+N.mainAxis,R=i.reference[x]+i.reference[S]-N.mainAxis;b<P?b=P:b>R&&(b=R)}if(h){var E,C;const S=x==="y"?"width":"height",P=["top","left"].includes(Tn(n)),R=i.reference[g]-i.floating[S]+(P&&((E=c.offset)==null?void 0:E[g])||0)+(P?0:N.crossAxis),D=i.reference[g]+i.reference[S]+(P?0:((C=c.offset)==null?void 0:C[g])||0)-(P?N.crossAxis:0);j<R?j=R:j>D&&(j=D)}return{[x]:b,[g]:j}}}},uH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,a;const{placement:n,rects:i,platform:c,elements:u}=e,{apply:f=()=>{},...h}=An(t,e),p=await Td(e,h),g=Tn(n),x=Ac(n),b=Ur(n)==="y",{width:j,height:w}=i.floating;let N,E;g==="top"||g==="bottom"?(N=g,E=x===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(E=g,N=x==="end"?"top":"bottom");const C=w-p.top-p.bottom,S=j-p.left-p.right,P=Do(w-p[N],C),R=Do(j-p[E],S),D=!e.middlewareData.shift;let $=P,k=R;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(k=S),(a=e.middlewareData.shift)!=null&&a.enabled.y&&($=C),D&&!x){const V=Oa(p.left,0),Y=Oa(p.right,0),B=Oa(p.top,0),z=Oa(p.bottom,0);b?k=j-2*(V!==0||Y!==0?V+Y:Oa(p.left,p.right)):$=w-2*(B!==0||z!==0?B+z:Oa(p.top,p.bottom))}await f({...e,availableWidth:k,availableHeight:$});const M=await c.getDimensions(u.floating);return j!==M.width||w!==M.height?{reset:{rects:!0}}:{}}}};function fp(){return typeof window<"u"}function Tc(t){return DT(t)?(t.nodeName||"").toLowerCase():"#document"}function $a(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function en(t){var e;return(e=(DT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function DT(t){return fp()?t instanceof Node||t instanceof $a(t).Node:!1}function kr(t){return fp()?t instanceof Element||t instanceof $a(t).Element:!1}function Zr(t){return fp()?t instanceof HTMLElement||t instanceof $a(t).HTMLElement:!1}function Q2(t){return!fp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $a(t).ShadowRoot}function Ud(t){const{overflow:e,overflowX:s,overflowY:a,display:n}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+s)&&!["inline","contents"].includes(n)}function dH(t){return["table","td","th"].includes(Tc(t))}function hp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function bb(t){const e=_b(),s=kr(t)?Ar(t):t;return["transform","translate","scale","rotate","perspective"].some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(s.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(s.contain||"").includes(a))}function fH(t){let e=Oo(t);for(;Zr(e)&&!xc(e);){if(bb(e))return e;if(hp(e))return null;e=Oo(e)}return null}function _b(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xc(t){return["html","body","#document"].includes(Tc(t))}function Ar(t){return $a(t).getComputedStyle(t)}function mp(t){return kr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Oo(t){if(Tc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Q2(t)&&t.host||en(t);return Q2(e)?e.host:e}function OT(t){const e=Oo(t);return xc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Zr(e)&&Ud(e)?e:OT(e)}function Rd(t,e,s){var a;e===void 0&&(e=[]),s===void 0&&(s=!0);const n=OT(t),i=n===((a=t.ownerDocument)==null?void 0:a.body),c=$a(n);if(i){const u=Kv(c);return e.concat(c,c.visualViewport||[],Ud(n)?n:[],u&&s?Rd(u):[])}return e.concat(n,Rd(n,[],s))}function Kv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $T(t){const e=Ar(t);let s=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const n=Zr(t),i=n?t.offsetWidth:s,c=n?t.offsetHeight:a,u=wm(s)!==i||wm(a)!==c;return u&&(s=i,a=c),{width:s,height:a,$:u}}function wb(t){return kr(t)?t:t.contextElement}function ic(t){const e=wb(t);if(!Zr(e))return Kr(1);const s=e.getBoundingClientRect(),{width:a,height:n,$:i}=$T(e);let c=(i?wm(s.width):s.width)/a,u=(i?wm(s.height):s.height)/n;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const hH=Kr(0);function LT(t){const e=$a(t);return!_b()||!e.visualViewport?hH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mH(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==$a(t)?!1:e}function Mi(t,e,s,a){e===void 0&&(e=!1),s===void 0&&(s=!1);const n=t.getBoundingClientRect(),i=wb(t);let c=Kr(1);e&&(a?kr(a)&&(c=ic(a)):c=ic(t));const u=mH(i,s,a)?LT(i):Kr(0);let f=(n.left+u.x)/c.x,h=(n.top+u.y)/c.y,p=n.width/c.x,g=n.height/c.y;if(i){const x=$a(i),b=a&&kr(a)?$a(a):a;let j=x,w=Kv(j);for(;w&&a&&b!==j;){const N=ic(w),E=w.getBoundingClientRect(),C=Ar(w),S=E.left+(w.clientLeft+parseFloat(C.paddingLeft))*N.x,P=E.top+(w.clientTop+parseFloat(C.paddingTop))*N.y;f*=N.x,h*=N.y,p*=N.x,g*=N.y,f+=S,h+=P,j=$a(w),w=Kv(j)}}return Nm({width:p,height:g,x:f,y:h})}function jb(t,e){const s=mp(t).scrollLeft;return e?e.left+s:Mi(en(t)).left+s}function IT(t,e,s){s===void 0&&(s=!1);const a=t.getBoundingClientRect(),n=a.left+e.scrollLeft-(s?0:jb(t,a)),i=a.top+e.scrollTop;return{x:n,y:i}}function pH(t){let{elements:e,rect:s,offsetParent:a,strategy:n}=t;const i=n==="fixed",c=en(a),u=e?hp(e.floating):!1;if(a===c||u&&i)return s;let f={scrollLeft:0,scrollTop:0},h=Kr(1);const p=Kr(0),g=Zr(a);if((g||!g&&!i)&&((Tc(a)!=="body"||Ud(c))&&(f=mp(a)),Zr(a))){const b=Mi(a);h=ic(a),p.x=b.x+a.clientLeft,p.y=b.y+a.clientTop}const x=c&&!g&&!i?IT(c,f,!0):Kr(0);return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-f.scrollLeft*h.x+p.x+x.x,y:s.y*h.y-f.scrollTop*h.y+p.y+x.y}}function gH(t){return Array.from(t.getClientRects())}function xH(t){const e=en(t),s=mp(t),a=t.ownerDocument.body,n=Oa(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),i=Oa(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-s.scrollLeft+jb(t);const u=-s.scrollTop;return Ar(a).direction==="rtl"&&(c+=Oa(e.clientWidth,a.clientWidth)-n),{width:n,height:i,x:c,y:u}}function vH(t,e){const s=$a(t),a=en(t),n=s.visualViewport;let i=a.clientWidth,c=a.clientHeight,u=0,f=0;if(n){i=n.width,c=n.height;const h=_b();(!h||h&&e==="fixed")&&(u=n.offsetLeft,f=n.offsetTop)}return{width:i,height:c,x:u,y:f}}function yH(t,e){const s=Mi(t,!0,e==="fixed"),a=s.top+t.clientTop,n=s.left+t.clientLeft,i=Zr(t)?ic(t):Kr(1),c=t.clientWidth*i.x,u=t.clientHeight*i.y,f=n*i.x,h=a*i.y;return{width:c,height:u,x:f,y:h}}function J2(t,e,s){let a;if(e==="viewport")a=vH(t,s);else if(e==="document")a=xH(en(t));else if(kr(e))a=yH(e,s);else{const n=LT(t);a={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Nm(a)}function BT(t,e){const s=Oo(t);return s===e||!kr(s)||xc(s)?!1:Ar(s).position==="fixed"||BT(s,e)}function bH(t,e){const s=e.get(t);if(s)return s;let a=Rd(t,[],!1).filter(u=>kr(u)&&Tc(u)!=="body"),n=null;const i=Ar(t).position==="fixed";let c=i?Oo(t):t;for(;kr(c)&&!xc(c);){const u=Ar(c),f=bb(c);!f&&u.position==="fixed"&&(n=null),(i?!f&&!n:!f&&u.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Ud(c)&&!f&&BT(t,c))?a=a.filter(p=>p!==c):n=u,c=Oo(c)}return e.set(t,a),a}function _H(t){let{element:e,boundary:s,rootBoundary:a,strategy:n}=t;const c=[...s==="clippingAncestors"?hp(e)?[]:bH(e,this._c):[].concat(s),a],u=c[0],f=c.reduce((h,p)=>{const g=J2(e,p,n);return h.top=Oa(g.top,h.top),h.right=Do(g.right,h.right),h.bottom=Do(g.bottom,h.bottom),h.left=Oa(g.left,h.left),h},J2(e,u,n));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function wH(t){const{width:e,height:s}=$T(t);return{width:e,height:s}}function jH(t,e,s){const a=Zr(e),n=en(e),i=s==="fixed",c=Mi(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const f=Kr(0);function h(){f.x=jb(n)}if(a||!a&&!i)if((Tc(e)!=="body"||Ud(n))&&(u=mp(e)),a){const b=Mi(e,!0,i,e);f.x=b.x+e.clientLeft,f.y=b.y+e.clientTop}else n&&h();i&&!a&&n&&h();const p=n&&!a&&!i?IT(n,u):Kr(0),g=c.left+u.scrollLeft-f.x-p.x,x=c.top+u.scrollTop-f.y-p.y;return{x:g,y:x,width:c.width,height:c.height}}function Ox(t){return Ar(t).position==="static"}function eE(t,e){if(!Zr(t)||Ar(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return en(t)===s&&(s=s.ownerDocument.body),s}function VT(t,e){const s=$a(t);if(hp(t))return s;if(!Zr(t)){let n=Oo(t);for(;n&&!xc(n);){if(kr(n)&&!Ox(n))return n;n=Oo(n)}return s}let a=eE(t,e);for(;a&&dH(a)&&Ox(a);)a=eE(a,e);return a&&xc(a)&&Ox(a)&&!bb(a)?s:a||fH(t)||s}const NH=async function(t){const e=this.getOffsetParent||VT,s=this.getDimensions,a=await s(t.floating);return{reference:jH(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function SH(t){return Ar(t).direction==="rtl"}const EH={convertOffsetParentRelativeRectToViewportRelativeRect:pH,getDocumentElement:en,getClippingRect:_H,getOffsetParent:VT,getElementRects:NH,getClientRects:gH,getDimensions:wH,getScale:ic,isElement:kr,isRTL:SH};function qT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function CH(t,e){let s=null,a;const n=en(t);function i(){var u;clearTimeout(a),(u=s)==null||u.disconnect(),s=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),i();const h=t.getBoundingClientRect(),{left:p,top:g,width:x,height:b}=h;if(u||e(),!x||!b)return;const j=Eh(g),w=Eh(n.clientWidth-(p+x)),N=Eh(n.clientHeight-(g+b)),E=Eh(p),S={rootMargin:-j+"px "+-w+"px "+-N+"px "+-E+"px",threshold:Oa(0,Do(1,f))||1};let P=!0;function R(D){const $=D[0].intersectionRatio;if($!==f){if(!P)return c();$?c(!1,$):a=setTimeout(()=>{c(!1,1e-7)},1e3)}$===1&&!qT(h,t.getBoundingClientRect())&&c(),P=!1}try{s=new IntersectionObserver(R,{...S,root:n.ownerDocument})}catch{s=new IntersectionObserver(R,S)}s.observe(t)}return c(!0),i}function kH(t,e,s,a){a===void 0&&(a={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=a,h=wb(t),p=n||i?[...h?Rd(h):[],...Rd(e)]:[];p.forEach(E=>{n&&E.addEventListener("scroll",s,{passive:!0}),i&&E.addEventListener("resize",s)});const g=h&&u?CH(h,s):null;let x=-1,b=null;c&&(b=new ResizeObserver(E=>{let[C]=E;C&&C.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var S;(S=b)==null||S.observe(e)})),s()}),h&&!f&&b.observe(h),b.observe(e));let j,w=f?Mi(t):null;f&&N();function N(){const E=Mi(t);w&&!qT(w,E)&&s(),w=E,j=requestAnimationFrame(N)}return s(),()=>{var E;p.forEach(C=>{n&&C.removeEventListener("scroll",s),i&&C.removeEventListener("resize",s)}),g==null||g(),(E=b)==null||E.disconnect(),b=null,f&&cancelAnimationFrame(j)}}const AH=iH,TH=lH,RH=rH,MH=uH,PH=nH,tE=aH,DH=cH,OH=(t,e,s)=>{const a=new Map,n={platform:EH,...s},i={...n.platform,_c:a};return sH(t,e,{...n,platform:i})};var $H=typeof document<"u",LH=function(){},Uh=$H?y.useLayoutEffect:LH;function Sm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,a,n;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(a=s;a--!==0;)if(!Sm(t[a],e[a]))return!1;return!0}if(n=Object.keys(t),s=n.length,s!==Object.keys(e).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(e,n[a]))return!1;for(a=s;a--!==0;){const i=n[a];if(!(i==="_owner"&&t.$$typeof)&&!Sm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function UT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sE(t,e){const s=UT(t);return Math.round(e*s)/s}function $x(t){const e=y.useRef(t);return Uh(()=>{e.current=t}),e}function IH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:a=[],platform:n,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:f,open:h}=t,[p,g]=y.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[x,b]=y.useState(a);Sm(x,a)||b(a);const[j,w]=y.useState(null),[N,E]=y.useState(null),C=y.useCallback(q=>{q!==D.current&&(D.current=q,w(q))},[]),S=y.useCallback(q=>{q!==$.current&&($.current=q,E(q))},[]),P=i||j,R=c||N,D=y.useRef(null),$=y.useRef(null),k=y.useRef(p),M=f!=null,V=$x(f),Y=$x(n),B=$x(h),z=y.useCallback(()=>{if(!D.current||!$.current)return;const q={placement:e,strategy:s,middleware:x};Y.current&&(q.platform=Y.current),OH(D.current,$.current,q).then(K=>{const L={...K,isPositioned:B.current!==!1};Q.current&&!Sm(k.current,L)&&(k.current=L,Oi.flushSync(()=>{g(L)}))})},[x,e,s,Y,B]);Uh(()=>{h===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,g(q=>({...q,isPositioned:!1})))},[h]);const Q=y.useRef(!1);Uh(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Uh(()=>{if(P&&(D.current=P),R&&($.current=R),P&&R){if(V.current)return V.current(P,R,z);z()}},[P,R,z,V,M]);const H=y.useMemo(()=>({reference:D,floating:$,setReference:C,setFloating:S}),[C,S]),A=y.useMemo(()=>({reference:P,floating:R}),[P,R]),I=y.useMemo(()=>{const q={position:s,left:0,top:0};if(!A.floating)return q;const K=sE(A.floating,p.x),L=sE(A.floating,p.y);return u?{...q,transform:"translate("+K+"px, "+L+"px)",...UT(A.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:K,top:L}},[s,u,A.floating,p.x,p.y]);return y.useMemo(()=>({...p,update:z,refs:H,elements:A,floatingStyles:I}),[p,z,H,A,I])}const BH=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:a,padding:n}=typeof t=="function"?t(s):t;return a&&e(a)?a.current!=null?tE({element:a.current,padding:n}).fn(s):{}:a?tE({element:a,padding:n}).fn(s):{}}}},VH=(t,e)=>({...AH(t),options:[t,e]}),qH=(t,e)=>({...TH(t),options:[t,e]}),UH=(t,e)=>({...DH(t),options:[t,e]}),zH=(t,e)=>({...RH(t),options:[t,e]}),FH=(t,e)=>({...MH(t),options:[t,e]}),HH=(t,e)=>({...PH(t),options:[t,e]}),GH=(t,e)=>({...BH(t),options:[t,e]});var XH="Arrow",zT=y.forwardRef((t,e)=>{const{children:s,width:a=10,height:n=5,...i}=t;return r.jsx(We.svg,{...i,ref:e,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});zT.displayName=XH;var YH=zT;function FT(t){const[e,s]=y.useState(void 0);return gs(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let c,u;if("borderBoxSize"in i){const f=i.borderBoxSize,h=Array.isArray(f)?f[0]:f;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;s({width:c,height:u})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else s(void 0)},[t]),e}var Nb="Popper",[HT,Rc]=or(Nb),[KH,GT]=HT(Nb),XT=t=>{const{__scopePopper:e,children:s}=t,[a,n]=y.useState(null);return r.jsx(KH,{scope:e,anchor:a,onAnchorChange:n,children:s})};XT.displayName=Nb;var YT="PopperAnchor",KT=y.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:a,...n}=t,i=GT(YT,s),c=y.useRef(null),u=_t(e,c);return y.useEffect(()=>{i.onAnchorChange((a==null?void 0:a.current)||c.current)}),a?null:r.jsx(We.div,{...n,ref:u})});KT.displayName=YT;var Sb="PopperContent",[WH,ZH]=HT(Sb),WT=y.forwardRef((t,e)=>{var ue,ce,we,Se,je,Ce;const{__scopePopper:s,side:a="bottom",sideOffset:n=0,align:i="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:x=!1,updatePositionStrategy:b="optimized",onPlaced:j,...w}=t,N=GT(Sb,s),[E,C]=y.useState(null),S=_t(e,ve=>C(ve)),[P,R]=y.useState(null),D=FT(P),$=(D==null?void 0:D.width)??0,k=(D==null?void 0:D.height)??0,M=a+(i!=="center"?"-"+i:""),V=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},Y=Array.isArray(h)?h:[h],B=Y.length>0,z={padding:V,boundary:Y.filter(JH),altBoundary:B},{refs:Q,floatingStyles:H,placement:A,isPositioned:I,middlewareData:q}=IH({strategy:"fixed",placement:M,whileElementsMounted:(...ve)=>kH(...ve,{animationFrame:b==="always"}),elements:{reference:N.anchor},middleware:[VH({mainAxis:n+k,alignmentAxis:c}),f&&qH({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?UH():void 0,...z}),f&&zH({...z}),FH({...z,apply:({elements:ve,rects:Pe,availableWidth:fe,availableHeight:Re})=>{const{width:Te,height:et}=Pe.reference,Ae=ve.floating.style;Ae.setProperty("--radix-popper-available-width",`${fe}px`),Ae.setProperty("--radix-popper-available-height",`${Re}px`),Ae.setProperty("--radix-popper-anchor-width",`${Te}px`),Ae.setProperty("--radix-popper-anchor-height",`${et}px`)}}),P&&GH({element:P,padding:u}),eG({arrowWidth:$,arrowHeight:k}),x&&HH({strategy:"referenceHidden",...z})]}),[K,L]=JT(A),X=ea(j);gs(()=>{I&&(X==null||X())},[I,X]);const ne=(ue=q.arrow)==null?void 0:ue.x,te=(ce=q.arrow)==null?void 0:ce.y,ie=((we=q.arrow)==null?void 0:we.centerOffset)!==0,[le,ae]=y.useState();return gs(()=>{E&&ae(window.getComputedStyle(E).zIndex)},[E]),r.jsx("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:I?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(Se=q.transformOrigin)==null?void 0:Se.x,(je=q.transformOrigin)==null?void 0:je.y].join(" "),...((Ce=q.hide)==null?void 0:Ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:r.jsx(WH,{scope:s,placedSide:K,onArrowChange:R,arrowX:ne,arrowY:te,shouldHideArrow:ie,children:r.jsx(We.div,{"data-side":K,"data-align":L,...w,ref:S,style:{...w.style,animation:I?void 0:"none"}})})})});WT.displayName=Sb;var ZT="PopperArrow",QH={top:"bottom",right:"left",bottom:"top",left:"right"},QT=y.forwardRef(function(e,s){const{__scopePopper:a,...n}=e,i=ZH(ZT,a),c=QH[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(YH,{...n,ref:s,style:{...n.style,display:"block"}})})});QT.displayName=ZT;function JH(t){return t!==null}var eG=t=>({name:"transformOrigin",options:t,fn(e){var N,E,C;const{placement:s,rects:a,middlewareData:n}=e,c=((N=n.arrow)==null?void 0:N.centerOffset)!==0,u=c?0:t.arrowWidth,f=c?0:t.arrowHeight,[h,p]=JT(s),g={start:"0%",center:"50%",end:"100%"}[p],x=(((E=n.arrow)==null?void 0:E.x)??0)+u/2,b=(((C=n.arrow)==null?void 0:C.y)??0)+f/2;let j="",w="";return h==="bottom"?(j=c?g:`${x}px`,w=`${-f}px`):h==="top"?(j=c?g:`${x}px`,w=`${a.floating.height+f}px`):h==="right"?(j=`${-f}px`,w=c?g:`${b}px`):h==="left"&&(j=`${a.floating.width+f}px`,w=c?g:`${b}px`),{data:{x:j,y:w}}}});function JT(t){const[e,s="center"]=t.split("-");return[e,s]}var Eb=XT,pp=KT,Cb=WT,kb=QT;function e4(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var t4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tG="VisuallyHidden",Ab=y.forwardRef((t,e)=>r.jsx(We.span,{...t,ref:e,style:{...t4,...t.style}}));Ab.displayName=tG;var sG=Ab,aG=[" ","Enter","ArrowUp","ArrowDown"],rG=[" ","Enter"],Pi="Select",[gp,xp,nG]=MT(Pi),[Mc,YW]=or(Pi,[nG,Rc]),vp=Rc(),[oG,Vo]=Mc(Pi),[iG,lG]=Mc(Pi),s4=t=>{const{__scopeSelect:e,children:s,open:a,defaultOpen:n,onOpenChange:i,value:c,defaultValue:u,onValueChange:f,dir:h,name:p,autoComplete:g,disabled:x,required:b,form:j}=t,w=vp(e),[N,E]=y.useState(null),[C,S]=y.useState(null),[P,R]=y.useState(!1),D=dp(h),[$,k]=Ro({prop:a,defaultProp:n??!1,onChange:i,caller:Pi}),[M,V]=Ro({prop:c,defaultProp:u,onChange:f,caller:Pi}),Y=y.useRef(null),B=N?j||!!N.closest("form"):!0,[z,Q]=y.useState(new Set),H=Array.from(z).map(A=>A.props.value).join(";");return r.jsx(Eb,{...w,children:r.jsxs(oG,{required:b,scope:e,trigger:N,onTriggerChange:E,valueNode:C,onValueNodeChange:S,valueNodeHasChildren:P,onValueNodeHasChildrenChange:R,contentId:Hr(),value:M,onValueChange:V,open:$,onOpenChange:k,dir:D,triggerPointerDownPosRef:Y,disabled:x,children:[r.jsx(gp.Provider,{scope:e,children:r.jsx(iG,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(A=>{Q(I=>new Set(I).add(A))},[]),onNativeOptionRemove:y.useCallback(A=>{Q(I=>{const q=new Set(I);return q.delete(A),q})},[]),children:s})}),B?r.jsxs(E4,{"aria-hidden":!0,required:b,tabIndex:-1,name:p,autoComplete:g,value:M,onChange:A=>V(A.target.value),disabled:x,form:j,children:[M===void 0?r.jsx("option",{value:""}):null,Array.from(z)]},H):null]})})};s4.displayName=Pi;var a4="SelectTrigger",r4=y.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:a=!1,...n}=t,i=vp(s),c=Vo(a4,s),u=c.disabled||a,f=_t(e,c.onTriggerChange),h=xp(s),p=y.useRef("touch"),[g,x,b]=k4(w=>{const N=h().filter(S=>!S.disabled),E=N.find(S=>S.value===c.value),C=A4(N,w,E);C!==void 0&&c.onValueChange(C.value)}),j=w=>{u||(c.onOpenChange(!0),b()),w&&(c.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return r.jsx(pp,{asChild:!0,...i,children:r.jsx(We.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":C4(c.value)?"":void 0,...n,ref:f,onClick:Ge(n.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&j(w)}),onPointerDown:Ge(n.onPointerDown,w=>{p.current=w.pointerType;const N=w.target;N.hasPointerCapture(w.pointerId)&&N.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(j(w),w.preventDefault())}),onKeyDown:Ge(n.onKeyDown,w=>{const N=g.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&x(w.key),!(N&&w.key===" ")&&aG.includes(w.key)&&(j(),w.preventDefault())})})})});r4.displayName=a4;var n4="SelectValue",o4=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:a,style:n,children:i,placeholder:c="",...u}=t,f=Vo(n4,s),{onValueNodeHasChildrenChange:h}=f,p=i!==void 0,g=_t(e,f.onValueNodeChange);return gs(()=>{h(p)},[h,p]),r.jsx(We.span,{...u,ref:g,style:{pointerEvents:"none"},children:C4(f.value)?r.jsx(r.Fragment,{children:c}):i})});o4.displayName=n4;var cG="SelectIcon",i4=y.forwardRef((t,e)=>{const{__scopeSelect:s,children:a,...n}=t;return r.jsx(We.span,{"aria-hidden":!0,...n,ref:e,children:a||"▼"})});i4.displayName=cG;var uG="SelectPortal",l4=t=>r.jsx(Ym,{asChild:!0,...t});l4.displayName=uG;var Di="SelectContent",c4=y.forwardRef((t,e)=>{const s=Vo(Di,t.__scopeSelect),[a,n]=y.useState();if(gs(()=>{n(new DocumentFragment)},[]),!s.open){const i=a;return i?Oi.createPortal(r.jsx(u4,{scope:t.__scopeSelect,children:r.jsx(gp.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),i):null}return r.jsx(d4,{...t,ref:e})});c4.displayName=Di;var pr=10,[u4,qo]=Mc(Di),dG="SelectContentImpl",fG=Ti("SelectContent.RemoveScroll"),d4=y.forwardRef((t,e)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:c,side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:w,avoidCollisions:N,...E}=t,C=Vo(Di,s),[S,P]=y.useState(null),[R,D]=y.useState(null),$=_t(e,ue=>P(ue)),[k,M]=y.useState(null),[V,Y]=y.useState(null),B=xp(s),[z,Q]=y.useState(!1),H=y.useRef(!1);y.useEffect(()=>{if(S)return jy(S)},[S]),wy();const A=y.useCallback(ue=>{const[ce,...we]=B().map(Ce=>Ce.ref.current),[Se]=we.slice(-1),je=document.activeElement;for(const Ce of ue)if(Ce===je||(Ce==null||Ce.scrollIntoView({block:"nearest"}),Ce===ce&&R&&(R.scrollTop=0),Ce===Se&&R&&(R.scrollTop=R.scrollHeight),Ce==null||Ce.focus(),document.activeElement!==je))return},[B,R]),I=y.useCallback(()=>A([k,S]),[A,k,S]);y.useEffect(()=>{z&&I()},[z,I]);const{onOpenChange:q,triggerPointerDownPosRef:K}=C;y.useEffect(()=>{if(S){let ue={x:0,y:0};const ce=Se=>{var je,Ce;ue={x:Math.abs(Math.round(Se.pageX)-(((je=K.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((Ce=K.current)==null?void 0:Ce.y)??0))}},we=Se=>{ue.x<=10&&ue.y<=10?Se.preventDefault():S.contains(Se.target)||q(!1),document.removeEventListener("pointermove",ce),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",we,{capture:!0})}}},[S,q,K]),y.useEffect(()=>{const ue=()=>q(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[q]);const[L,X]=k4(ue=>{const ce=B().filter(je=>!je.disabled),we=ce.find(je=>je.ref.current===document.activeElement),Se=A4(ce,ue,we);Se&&setTimeout(()=>Se.ref.current.focus())}),ne=y.useCallback((ue,ce,we)=>{const Se=!H.current&&!we;(C.value!==void 0&&C.value===ce||Se)&&(M(ue),Se&&(H.current=!0))},[C.value]),te=y.useCallback(()=>S==null?void 0:S.focus(),[S]),ie=y.useCallback((ue,ce,we)=>{const Se=!H.current&&!we;(C.value!==void 0&&C.value===ce||Se)&&Y(ue)},[C.value]),le=a==="popper"?Wv:f4,ae=le===Wv?{side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:b,sticky:j,hideWhenDetached:w,avoidCollisions:N}:{};return r.jsx(u4,{scope:s,content:S,viewport:R,onViewportChange:D,itemRefCallback:ne,selectedItem:k,onItemLeave:te,itemTextRefCallback:ie,focusSelectedItem:I,selectedItemText:V,position:a,isPositioned:z,searchRef:L,children:r.jsx(Wm,{as:fG,allowPinchZoom:!0,children:r.jsx(Xm,{asChild:!0,trapped:C.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:Ge(n,ue=>{var ce;(ce=C.trigger)==null||ce.focus({preventScroll:!0}),ue.preventDefault()}),children:r.jsx($d,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:r.jsx(le,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ue=>ue.preventDefault(),...E,...ae,onPlaced:()=>Q(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Ge(E.onKeyDown,ue=>{const ce=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ce&&ue.key.length===1&&X(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let Se=B().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const je=ue.target,Ce=Se.indexOf(je);Se=Se.slice(Ce+1)}setTimeout(()=>A(Se)),ue.preventDefault()}})})})})})})});d4.displayName=dG;var hG="SelectItemAlignedPosition",f4=y.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:a,...n}=t,i=Vo(Di,s),c=qo(Di,s),[u,f]=y.useState(null),[h,p]=y.useState(null),g=_t(e,$=>p($)),x=xp(s),b=y.useRef(!1),j=y.useRef(!0),{viewport:w,selectedItem:N,selectedItemText:E,focusSelectedItem:C}=c,S=y.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&w&&N&&E){const $=i.trigger.getBoundingClientRect(),k=h.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),V=E.getBoundingClientRect();if(i.dir!=="rtl"){const je=V.left-k.left,Ce=M.left-je,ve=$.left-Ce,Pe=$.width+ve,fe=Math.max(Pe,k.width),Re=window.innerWidth-pr,Te=Gv(Ce,[pr,Math.max(pr,Re-fe)]);u.style.minWidth=Pe+"px",u.style.left=Te+"px"}else{const je=k.right-V.right,Ce=window.innerWidth-M.right-je,ve=window.innerWidth-$.right-Ce,Pe=$.width+ve,fe=Math.max(Pe,k.width),Re=window.innerWidth-pr,Te=Gv(Ce,[pr,Math.max(pr,Re-fe)]);u.style.minWidth=Pe+"px",u.style.right=Te+"px"}const Y=x(),B=window.innerHeight-pr*2,z=w.scrollHeight,Q=window.getComputedStyle(h),H=parseInt(Q.borderTopWidth,10),A=parseInt(Q.paddingTop,10),I=parseInt(Q.borderBottomWidth,10),q=parseInt(Q.paddingBottom,10),K=H+A+z+q+I,L=Math.min(N.offsetHeight*5,K),X=window.getComputedStyle(w),ne=parseInt(X.paddingTop,10),te=parseInt(X.paddingBottom,10),ie=$.top+$.height/2-pr,le=B-ie,ae=N.offsetHeight/2,ue=N.offsetTop+ae,ce=H+A+ue,we=K-ce;if(ce<=ie){const je=Y.length>0&&N===Y[Y.length-1].ref.current;u.style.bottom="0px";const Ce=h.clientHeight-w.offsetTop-w.offsetHeight,ve=Math.max(le,ae+(je?te:0)+Ce+I),Pe=ce+ve;u.style.height=Pe+"px"}else{const je=Y.length>0&&N===Y[0].ref.current;u.style.top="0px";const ve=Math.max(ie,H+w.offsetTop+(je?ne:0)+ae)+we;u.style.height=ve+"px",w.scrollTop=ce-ie+w.offsetTop}u.style.margin=`${pr}px 0`,u.style.minHeight=L+"px",u.style.maxHeight=B+"px",a==null||a(),requestAnimationFrame(()=>b.current=!0)}},[x,i.trigger,i.valueNode,u,h,w,N,E,i.dir,a]);gs(()=>S(),[S]);const[P,R]=y.useState();gs(()=>{h&&R(window.getComputedStyle(h).zIndex)},[h]);const D=y.useCallback($=>{$&&j.current===!0&&(S(),C==null||C(),j.current=!1)},[S,C]);return r.jsx(pG,{scope:s,contentWrapper:u,shouldExpandOnScrollRef:b,onScrollButtonChange:D,children:r.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:r.jsx(We.div,{...n,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});f4.displayName=hG;var mG="SelectPopperPosition",Wv=y.forwardRef((t,e)=>{const{__scopeSelect:s,align:a="start",collisionPadding:n=pr,...i}=t,c=vp(s);return r.jsx(Cb,{...c,...i,ref:e,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Wv.displayName=mG;var[pG,Tb]=Mc(Di,{}),Zv="SelectViewport",h4=y.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:a,...n}=t,i=qo(Zv,s),c=Tb(Zv,s),u=_t(e,i.onViewportChange),f=y.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(gp.Slot,{scope:s,children:r.jsx(We.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Ge(n.onScroll,h=>{const p=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:x}=c;if(x!=null&&x.current&&g){const b=Math.abs(f.current-p.scrollTop);if(b>0){const j=window.innerHeight-pr*2,w=parseFloat(g.style.minHeight),N=parseFloat(g.style.height),E=Math.max(w,N);if(E<j){const C=E+b,S=Math.min(j,C),P=C-S;g.style.height=S+"px",g.style.bottom==="0px"&&(p.scrollTop=P>0?P:0,g.style.justifyContent="flex-end")}}}f.current=p.scrollTop})})})]})});h4.displayName=Zv;var m4="SelectGroup",[gG,xG]=Mc(m4),vG=y.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=Hr();return r.jsx(gG,{scope:s,id:n,children:r.jsx(We.div,{role:"group","aria-labelledby":n,...a,ref:e})})});vG.displayName=m4;var p4="SelectLabel",g4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=xG(p4,s);return r.jsx(We.div,{id:n.id,...a,ref:e})});g4.displayName=p4;var Em="SelectItem",[yG,x4]=Mc(Em),v4=y.forwardRef((t,e)=>{const{__scopeSelect:s,value:a,disabled:n=!1,textValue:i,...c}=t,u=Vo(Em,s),f=qo(Em,s),h=u.value===a,[p,g]=y.useState(i??""),[x,b]=y.useState(!1),j=_t(e,C=>{var S;return(S=f.itemRefCallback)==null?void 0:S.call(f,C,a,n)}),w=Hr(),N=y.useRef("touch"),E=()=>{n||(u.onValueChange(a),u.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(yG,{scope:s,value:a,disabled:n,textId:w,isSelected:h,onItemTextChange:y.useCallback(C=>{g(S=>S||((C==null?void 0:C.textContent)??"").trim())},[]),children:r.jsx(gp.ItemSlot,{scope:s,value:a,disabled:n,textValue:p,children:r.jsx(We.div,{role:"option","aria-labelledby":w,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...c,ref:j,onFocus:Ge(c.onFocus,()=>b(!0)),onBlur:Ge(c.onBlur,()=>b(!1)),onClick:Ge(c.onClick,()=>{N.current!=="mouse"&&E()}),onPointerUp:Ge(c.onPointerUp,()=>{N.current==="mouse"&&E()}),onPointerDown:Ge(c.onPointerDown,C=>{N.current=C.pointerType}),onPointerMove:Ge(c.onPointerMove,C=>{var S;N.current=C.pointerType,n?(S=f.onItemLeave)==null||S.call(f):N.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(c.onPointerLeave,C=>{var S;C.currentTarget===document.activeElement&&((S=f.onItemLeave)==null||S.call(f))}),onKeyDown:Ge(c.onKeyDown,C=>{var P;((P=f.searchRef)==null?void 0:P.current)!==""&&C.key===" "||(rG.includes(C.key)&&E(),C.key===" "&&C.preventDefault())})})})})});v4.displayName=Em;var Qu="SelectItemText",y4=y.forwardRef((t,e)=>{const{__scopeSelect:s,className:a,style:n,...i}=t,c=Vo(Qu,s),u=qo(Qu,s),f=x4(Qu,s),h=lG(Qu,s),[p,g]=y.useState(null),x=_t(e,E=>g(E),f.onItemTextChange,E=>{var C;return(C=u.itemTextRefCallback)==null?void 0:C.call(u,E,f.value,f.disabled)}),b=p==null?void 0:p.textContent,j=y.useMemo(()=>r.jsx("option",{value:f.value,disabled:f.disabled,children:b},f.value),[f.disabled,f.value,b]),{onNativeOptionAdd:w,onNativeOptionRemove:N}=h;return gs(()=>(w(j),()=>N(j)),[w,N,j]),r.jsxs(r.Fragment,{children:[r.jsx(We.span,{id:f.textId,...i,ref:x}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Oi.createPortal(i.children,c.valueNode):null]})});y4.displayName=Qu;var b4="SelectItemIndicator",_4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t;return x4(b4,s).isSelected?r.jsx(We.span,{"aria-hidden":!0,...a,ref:e}):null});_4.displayName=b4;var Qv="SelectScrollUpButton",w4=y.forwardRef((t,e)=>{const s=qo(Qv,t.__scopeSelect),a=Tb(Qv,t.__scopeSelect),[n,i]=y.useState(!1),c=_t(e,a.onScrollButtonChange);return gs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollTop>0;i(h)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?r.jsx(N4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});w4.displayName=Qv;var Jv="SelectScrollDownButton",j4=y.forwardRef((t,e)=>{const s=qo(Jv,t.__scopeSelect),a=Tb(Jv,t.__scopeSelect),[n,i]=y.useState(!1),c=_t(e,a.onScrollButtonChange);return gs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollHeight-f.clientHeight,p=Math.ceil(f.scrollTop)<h;i(p)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?r.jsx(N4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});j4.displayName=Jv;var N4=y.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:a,...n}=t,i=qo("SelectScrollButton",s),c=y.useRef(null),u=xp(s),f=y.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return y.useEffect(()=>()=>f(),[f]),gs(()=>{var p;const h=u().find(g=>g.ref.current===document.activeElement);(p=h==null?void 0:h.ref.current)==null||p.scrollIntoView({block:"nearest"})},[u]),r.jsx(We.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:Ge(n.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:Ge(n.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:Ge(n.onPointerLeave,()=>{f()})})}),bG="SelectSeparator",S4=y.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t;return r.jsx(We.div,{"aria-hidden":!0,...a,ref:e})});S4.displayName=bG;var ey="SelectArrow",_G=y.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=vp(s),i=Vo(ey,s),c=qo(ey,s);return i.open&&c.position==="popper"?r.jsx(kb,{...n,...a,ref:e}):null});_G.displayName=ey;var wG="SelectBubbleInput",E4=y.forwardRef(({__scopeSelect:t,value:e,...s},a)=>{const n=y.useRef(null),i=_t(a,n),c=e4(e);return y.useEffect(()=>{const u=n.current;if(!u)return;const f=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==e&&p){const g=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(g)}},[c,e]),r.jsx(We.select,{...s,style:{...t4,...s.style},ref:i,defaultValue:e})});E4.displayName=wG;function C4(t){return t===""||t===void 0}function k4(t){const e=ea(t),s=y.useRef(""),a=y.useRef(0),n=y.useCallback(c=>{const u=s.current+c;e(u),function f(h){s.current=h,window.clearTimeout(a.current),h!==""&&(a.current=window.setTimeout(()=>f(""),1e3))}(u)},[e]),i=y.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,n,i]}function A4(t,e,s){const n=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=s?t.indexOf(s):-1;let c=jG(t,Math.max(i,0));n.length===1&&(c=c.filter(h=>h!==s));const f=c.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return f!==s?f:void 0}function jG(t,e){return t.map((s,a)=>t[(e+a)%t.length])}var NG=s4,T4=r4,SG=o4,EG=i4,CG=l4,R4=c4,kG=h4,M4=g4,P4=v4,AG=y4,TG=_4,D4=w4,O4=j4,$4=S4;const pi=NG,gi=SG,mo=y.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(T4,{ref:a,className:Ve("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,r.jsx(EG,{asChild:!0,children:r.jsx(To,{className:"h-4 w-4 opacity-50"})})]}));mo.displayName=T4.displayName;const L4=y.forwardRef(({className:t,...e},s)=>r.jsx(D4,{ref:s,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(mc,{className:"h-4 w-4"})}));L4.displayName=D4.displayName;const I4=y.forwardRef(({className:t,...e},s)=>r.jsx(O4,{ref:s,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(To,{className:"h-4 w-4"})}));I4.displayName=O4.displayName;const po=y.forwardRef(({className:t,children:e,position:s="popper",...a},n)=>r.jsx(CG,{children:r.jsxs(R4,{ref:n,className:Ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[r.jsx(L4,{}),r.jsx(kG,{className:Ve("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),r.jsx(I4,{})]})}));po.displayName=R4.displayName;const RG=y.forwardRef(({className:t,...e},s)=>r.jsx(M4,{ref:s,className:Ve("px-2 py-1.5 text-sm font-semibold",t),...e}));RG.displayName=M4.displayName;const It=y.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(P4,{ref:a,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[r.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(TG,{children:r.jsx(xy,{className:"h-4 w-4"})})}),r.jsx(AG,{children:e})]}));It.displayName=P4.displayName;const MG=y.forwardRef(({className:t,...e},s)=>r.jsx($4,{ref:s,className:Ve("-mx-1 my-1 h-px bg-muted",t),...e}));MG.displayName=$4.displayName;const $e=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("w-full max-w-full overflow-hidden rounded-xl border bg-card text-card-foreground shadow",t),...e}));$e.displayName="Card";const ft=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("flex flex-col space-y-1.5 p-4 sm:p-6",t),...e}));ft.displayName="CardHeader";const pt=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("break-words font-semibold leading-none tracking-tight",t),...e}));pt.displayName="CardTitle";const Cm=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("break-words text-sm text-muted-foreground",t),...e}));Cm.displayName="CardDescription";const He=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("w-full p-4 sm:p-6",t),...e}));He.displayName="CardContent";const Rb=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("flex flex-wrap items-center gap-2 p-4 pt-0 sm:p-6 sm:pt-0",t),...e}));Rb.displayName="CardFooter";function B4({children:t}){const e=Pt(),{user:s,loading:a}=zs();return y.useEffect(()=>{!a.onAuthUserChanged&&s&&s.role!=="ADMIN"&&(pe.error("Você não tem permissão para acessar esta página"),e({to:"/403"}))},[s,a.onAuthUserChanged,e]),a.onAuthUserChanged||!s?r.jsx(Ai,{}):s.role!=="ADMIN"?r.jsx(r.Fragment,{}):t}const PG=Od("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:e,...s}){return r.jsx("div",{className:Ve(PG({variant:e}),t),...s})}const DG={ADMIN:"Administrador",PLAYER:"Jogador"},OG=Yt("/_authenticated/users")({component:$G});function $G(){const t=Pt(),{users:e,loading:s,searchUsers:a}=F7(),[n,i]=y.useState({page:1,limit:10});y.useEffect(()=>{a(n)},[n,a]);const c=u=>{switch(u){case"ADMIN":return"bg-red-500";case"PLAYER":return"bg-blue-500";default:return"bg-gray-500"}};return r.jsx(B4,{children:r.jsx("div",{className:"container mx-auto py-8",children:r.jsxs($e,{children:[r.jsx(ft,{children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(pt,{children:"Usuários"})})}),r.jsxs(He,{children:[r.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[r.jsx(Ps,{placeholder:"Nome",value:n.nome||"",onChange:u=>i({...n,nome:u.target.value})}),r.jsx(Ps,{placeholder:"Email",value:n.email||"",onChange:u=>i({...n,email:u.target.value})}),r.jsxs(pi,{value:n.role,onValueChange:u=>i({...n,role:u}),children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Tipo de Usuário"})}),r.jsxs(po,{children:[r.jsx(It,{value:"ADMIN",children:"Administrador"}),r.jsx(It,{value:"PLAYER",children:"Jogador"})]})]})]}),r.jsx("div",{className:"rounded-md border",children:r.jsxs(lp,{children:[r.jsx(cp,{children:r.jsxs(qr,{children:[r.jsx(ca,{children:"Nome"}),r.jsx(ca,{children:"Email"}),r.jsx(ca,{children:"Tipo"}),r.jsx(ca,{children:"Maior Andar"}),r.jsx(ca,{children:"Total de Jogos"}),r.jsx(ca,{children:"Vitórias"}),r.jsx(ca,{children:"Ações"})]})}),r.jsx(up,{children:s?r.jsx(qr,{children:r.jsx(Ms,{colSpan:7,className:"text-center",children:"Carregando..."})}):e.length===0?r.jsx(qr,{children:r.jsx(Ms,{colSpan:7,className:"text-center",children:"Nenhum usuário encontrado"})}):e.map(u=>r.jsxs(qr,{children:[r.jsx(Ms,{children:u.nome}),r.jsx(Ms,{children:u.email}),r.jsx(Ms,{children:r.jsx(ze,{className:c(u.role),children:DG[u.role]})}),r.jsx(Ms,{children:u.highest_floor}),r.jsx(Ms,{children:u.total_games}),r.jsx(Ms,{children:u.total_victories}),r.jsx(Ms,{children:r.jsx(de,{variant:"ghost",onClick:()=>t({to:`/users/${u.id}`}),children:"Visualizar"})})]},u.id))})]})})]})]})})})}var LG=NE();function IG(){return LG.useSyncExternalStore(BG,()=>!0,()=>!1)}function BG(){return()=>{}}var Mb="Avatar",[VG,KW]=or(Mb),[qG,V4]=VG(Mb),q4=y.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[n,i]=y.useState("idle");return r.jsx(qG,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:r.jsx(We.span,{...a,ref:e})})});q4.displayName=Mb;var U4="AvatarImage",z4=y.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:n=()=>{},...i}=t,c=V4(U4,s),u=UG(a,i),f=ea(h=>{n(h),c.onImageLoadingStatusChange(h)});return gs(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?r.jsx(We.img,{...i,ref:e,src:a}):null});z4.displayName=U4;var F4="AvatarFallback",H4=y.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...n}=t,i=V4(F4,s),[c,u]=y.useState(a===void 0);return y.useEffect(()=>{if(a!==void 0){const f=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(f)}},[a]),c&&i.imageLoadingStatus!=="loaded"?r.jsx(We.span,{...n,ref:e}):null});H4.displayName=F4;function aE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function UG(t,{referrerPolicy:e,crossOrigin:s}){const a=IG(),n=y.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[c,u]=y.useState(()=>aE(i,t));return gs(()=>{u(aE(i,t))},[i,t]),gs(()=>{const f=g=>()=>{u(g)};if(!i)return;const h=f("loaded"),p=f("error");return i.addEventListener("load",h),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",h),i.removeEventListener("error",p)}},[i,s,e]),c}var G4=q4,X4=z4,Y4=H4;const K4=y.forwardRef(({className:t,...e},s)=>r.jsx(G4,{ref:s,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));K4.displayName=G4.displayName;const W4=y.forwardRef(({className:t,...e},s)=>r.jsx(X4,{ref:s,className:Ve("aspect-square h-full w-full",t),...e}));W4.displayName=X4.displayName;const Z4=y.forwardRef(({className:t,...e},s)=>r.jsx(Y4,{ref:s,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Z4.displayName=Y4.displayName;function zG(){const{isInstalled:t,canInstall:e}=KC(),[s,a]=y.useState(!0),[n,i]=y.useState(!1);y.useEffect(()=>{const u=()=>a(navigator.onLine);return window.addEventListener("online",u),window.addEventListener("offline",u),(()=>{const h=window.matchMedia("(display-mode: standalone)").matches,p=window.matchMedia("(display-mode: fullscreen)").matches;i(h||p)})(),()=>{window.removeEventListener("online",u),window.removeEventListener("offline",u)}},[]);const c=[{name:"Modo Offline",status:"serviceWorker"in navigator,icon:s?H8:z8,description:s?"Online":"Offline"},{name:"PWA Instalado",status:t,icon:t?fv:NC,description:t?"Instalado":e?"Disponível":"Não disponível"},{name:"Modo Tela Cheia",status:n,icon:eS,description:n?"Ativo":"Navegador"},{name:"Service Worker",status:"serviceWorker"in navigator,icon:"serviceWorker"in navigator?fv:lm,description:"serviceWorker"in navigator?"Suportado":"Não suportado"}];return r.jsxs($e,{className:"w-full max-w-md",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(eS,{className:"h-5 w-5"}),"Status PWA"]})}),r.jsxs(He,{className:"space-y-3",children:[c.map(u=>{const f=u.icon;return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(f,{className:`h-4 w-4 ${u.status?"text-green-500":"text-red-500"}`}),r.jsx("span",{className:"text-sm font-medium",children:u.name})]}),r.jsx(ze,{variant:u.status?"default":"secondary",children:u.description})]},u.name)}),!s&&r.jsx("div",{className:"mt-4 p-3 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-md",children:r.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"🌐 Você está offline! O jogo ainda pode funcionar com recursos em cache."})})]})]})}const FG=Bm({nome:Ws().min(3,"Nome deve ter no mínimo 3 caracteres"),tipo_pessoa:DO(["PF","PJ"]),documento:Ws().optional(),telefone:Ws().optional(),data_nascimento:Ws().optional()}),HG=Yt("/_authenticated/profile")({component:GG});function GG(){var x;const{user:t}=zs(),e=Pt(),[s,a]=y.useState(null),[n,i]=y.useState(!0),c=y.useRef(null),[u,f]=y.useState(null),h=Py({resolver:Dy(FG),defaultValues:{nome:"",tipo_pessoa:"PF"}});y.useEffect(()=>{(async()=>{try{i(!0);const{data:j,error:w}=await oc.getUserProfile();if(w){pe.error("Erro",{description:w});return}j&&(a(j),h.reset({nome:j.nome,tipo_pessoa:j.tipo_pessoa,documento:j.documento,telefone:j.telefone,data_nascimento:j.data_nascimento}))}catch(j){pe.error("Erro",{description:j instanceof Error?j.message:"Não foi possível carregar seu perfil"})}finally{i(!1)}})()},[h]);const p=async b=>{if(!(!(t!=null&&t.id)||!s))try{const{error:j}=await oc.updateUser(t.id,{...b,data_nascimento:b.data_nascimento?new Date(b.data_nascimento):void 0,imagemPerfil:u||void 0});if(j)throw new Error(j);const{data:w,error:N}=await oc.getUserProfile();if(N)throw new Error(N);w&&a(w),pe.success("Sucesso",{description:"Perfil atualizado com sucesso!"}),f(null)}catch(j){pe.error("Erro",{description:j instanceof Error?j.message:"Erro ao atualizar perfil"})}},g=b=>{var w;const j=(w=b.target.files)==null?void 0:w[0];j&&f(j)};return n?r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsx($e,{children:r.jsx(ft,{children:r.jsx(pt,{children:"Carregando..."})})})}):r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>e({to:"/game"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Perfil"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie suas informações pessoais"})]})]})}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs($e,{children:[r.jsxs(ft,{children:[r.jsx(pt,{children:"Foto de Perfil"}),r.jsx(Cm,{children:"Atualize sua foto de perfil"})]}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(K4,{className:"h-24 w-24",children:[r.jsx(W4,{src:s==null?void 0:s.imagem_perfil_url}),r.jsx(Z4,{children:(x=s==null?void 0:s.nome)==null?void 0:x.charAt(0)})]}),r.jsx(Ps,{type:"file",ref:c,accept:"image/*",onChange:g,className:"max-w-xs"})]})})]}),r.jsxs($e,{children:[r.jsxs(ft,{children:[r.jsx(pt,{children:"Informações Pessoais"}),r.jsx(Cm,{children:"Atualize suas informações pessoais"})]}),r.jsx(He,{children:r.jsx(Oy,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(p),className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(Br,{control:h.control,name:"nome",render:({field:b})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Nome *"}),r.jsx(jr,{children:r.jsx(Ps,{...b})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:h.control,name:"tipo_pessoa",render:({field:b})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Tipo de Pessoa *"}),r.jsxs(pi,{onValueChange:b.onChange,defaultValue:b.value,children:[r.jsx(jr,{children:r.jsx(mo,{children:r.jsx(gi,{placeholder:"Selecione o tipo de pessoa"})})}),r.jsxs(po,{children:[r.jsx(It,{value:"PF",children:"Pessoa Física"}),r.jsx(It,{value:"PJ",children:"Pessoa Jurídica"})]})]}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:h.control,name:"documento",render:({field:b})=>r.jsxs(_r,{children:[r.jsx(wr,{children:h.watch("tipo_pessoa")==="PF"?"CPF":"CNPJ"}),r.jsx(jr,{children:r.jsx(Ps,{...b,value:b.value||""})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:h.control,name:"telefone",render:({field:b})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Telefone"}),r.jsx(jr,{children:r.jsx(Ps,{...b,value:b.value||""})}),r.jsx(Nr,{})]})}),r.jsx(Br,{control:h.control,name:"data_nascimento",render:({field:b})=>r.jsxs(_r,{children:[r.jsx(wr,{children:"Data de Nascimento"}),r.jsx(jr,{children:r.jsx(Ps,{type:"date",...b,value:b.value||""})}),r.jsx(Nr,{})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(de,{type:"submit",children:"Salvar"})})]})})})]}),r.jsx(zG,{})]})]})}function XG(){return r.jsxs($e,{className:"w-full max-w-md",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(dI,{className:"h-5 w-5 text-primary"}),"Sobre Tower Trials"]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Um jogo de aventura em que você sobe uma torre mágica, enfrentando inimigos cada vez mais fortes em cada andar. Quanto mais alto você chegar, melhor será sua posição no ranking."}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(Z6,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Progressão na Torre"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Cada andar apresenta um inimigo mais forte. A dificuldade aumenta conforme você sobe, mas você recupera um pouco de HP a cada inimigo derrotado."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(At,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Ataque"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ataque direto ao inimigo, causando dano baseado no seu valor de ataque menos a defesa do inimigo."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(yt,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Defesa"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aumenta temporariamente sua defesa, reduzindo o dano recebido no próximo ataque do inimigo."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(Ct,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Habilidade Especial"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Causa o dobro do seu dano de ataque, mas tem um cooldown de 3 turnos antes de poder ser usada novamente."})]})]})]})]})]})}const YG=Yt("/_authenticated/game")({component:KG});function KG(){return $i().pathname==="/game"?r.jsx(WG,{}):r.jsx($o,{})}function WG(){const t=Pt(),{user:e}=zs(),[s,a]=y.useState(!1),n=()=>{if(!e){t({to:"/auth",search:{auth:"true"}});return}t({to:"/game/play"})},i=()=>{t({to:"/game/ranking"})},c=()=>{t({to:"/game/play/hub/cemetery",search:{character:""}})};return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:[r.jsxs("div",{className:"w-full max-w-md text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"Tower Trials"}),r.jsx("p",{className:"text-foreground/80",children:"Suba a torre mágica, derrote inimigos e alcance o andar mais alto possível!"})]}),s?r.jsxs("div",{className:"w-full max-w-md mb-4",children:[r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx(de,{variant:"ghost",size:"sm",className:"p-1 h-8 w-8",onClick:()=>a(!1),children:r.jsx(Bi,{className:"h-5 w-5"})})}),r.jsx(XG,{})]}):r.jsxs($e,{className:"w-full max-w-md mb-4",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-center",children:"Menu Principal"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx(de,{onClick:n,className:"w-full py-6 text-lg",size:"lg",children:e?"Jogar":"Entrar para Jogar"}),r.jsx(de,{onClick:i,className:"w-full py-6 text-lg",variant:"outline",size:"lg",children:"Ranking"}),e&&r.jsxs(de,{onClick:c,className:"w-full py-4 text-base border border-red-500/20 bg-red-500/5 hover:bg-red-500/10 text-red-400 hover:text-red-300",variant:"ghost",size:"lg",children:[r.jsx(Js,{className:"h-5 w-5 mr-2"}),"Cemitério"]})]}),r.jsxs(Rb,{className:"flex justify-between",children:[r.jsxs(de,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>a(!0),children:[r.jsx(GI,{className:"h-4 w-4"}),r.jsx("span",{children:"Como Jogar"})]}),e?r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:e.username||e.email})," |",r.jsx(_o,{to:"/logout",className:"text-primary ml-1 hover:underline",children:"Sair"})]}):r.jsx(_o,{to:"/auth",search:{auth:"true"},children:r.jsx(de,{variant:"ghost",size:"sm",children:"Entrar / Criar Conta"})})]})]})]})}const ZG=Yt("/_authenticated/403")({component:QG});function QG(){return r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("h1",{children:"A página que você tentou acessar não existe ou você não possui a permissão necessária."})})}const JG=Yt("/_public/auth/verify-email")({component:eX,validateSearch:t=>({auth:t.auth||""})});function eX(){const{user:t}=zs();return r.jsx("div",{className:"container mx-auto flex min-h-screen items-center justify-center px-4",children:r.jsxs($e,{className:"w-full max-w-md",children:[r.jsx(ft,{children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(t8,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx(pt,{children:"Verifique seu Email"}),r.jsx(Cm,{children:"Enviamos um link de confirmação para seu email"})]})]})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[r.jsxs("p",{className:"mb-2",children:["Olá ",r.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email}),","]}),r.jsx("p",{className:"mb-2",children:"Para sua segurança, enviamos um email de confirmação para o endereço fornecido."}),r.jsx("p",{children:"Por favor, siga estas etapas:"}),r.jsxs("ol",{className:"ml-4 mt-2 list-decimal space-y-1",children:[r.jsx("li",{children:"Verifique sua caixa de entrada"}),r.jsx("li",{children:"Clique no link de confirmação no email"}),r.jsx("li",{children:"Retorne aqui para fazer login"})]})]}),r.jsx("div",{className:"space-y-4 text-sm text-muted-foreground",children:r.jsx("p",{children:"Não recebeu o email? Verifique sua pasta de spam ou aguarde alguns minutos."})}),r.jsx("div",{className:"flex flex-col space-y-2",children:r.jsx(_o,{to:"/auth",search:{auth:"true"},children:r.jsxs(de,{variant:"outline",className:"w-full",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),"Voltar para o Login"]})})})]})]})})}class Jl{static async saveScore(e){try{const{data:s,error:a}=await _e.rpc("save_ranking_entry",{p_user_id:e.user_id,p_player_name:e.player_name,p_floor:e.floor,p_character_level:e.character_level||1,p_character_gold:e.character_gold||0,p_character_alive:e.character_alive??!0});if(a)throw a;return{data:s,error:null}}catch(s){return console.error("Erro ao salvar no ranking:",s),{data:"",error:s instanceof Error?s.message:"Erro ao salvar no ranking"}}}static async getGlobalRanking(e="floor",s=10,a="all",n="",i=1){try{const c=(i-1)*s;console.log(`[RankingService] Buscando ranking global - modo: ${e}, filtro: ${a}, nome: ${n}, página: ${i}, limite: ${s}`);let u;switch(e){case"floor":u="get_dynamic_ranking_by_highest_floor";break;case"level":u="get_dynamic_ranking_by_level";break;case"gold":u="get_dynamic_ranking_by_gold";break;default:u="get_dynamic_ranking_by_floor"}console.log(`[RankingService] Chamando função: ${u}`);const{data:f,error:h}=await _e.rpc(u,{p_limit:s,p_status_filter:a,p_name_filter:n,p_offset:c});if(h)throw console.error(`[RankingService] Erro na função ${u}:`,h),h;return console.log("[RankingService] Dados recebidos:",(f==null?void 0:f.length)||0,"entradas"),console.log("[RankingService] Primeiras 3 entradas:",f==null?void 0:f.slice(0,3)),{data:f||[],error:null}}catch(c){return console.error("Erro ao buscar ranking global:",c),{data:[],error:c instanceof Error?c.message:"Erro ao buscar ranking"}}}static async countRankingEntries(e="all",s=""){try{console.log(`[RankingService] Contando entradas - filtro: ${e}, nome: ${s}`);const{data:a,error:n}=await _e.rpc("count_ranking_entries",{p_status_filter:e,p_name_filter:s});if(n)throw console.error("[RankingService] Erro ao contar entradas:",n),n;return console.log(`[RankingService] Total de entradas: ${a}`),{data:a||0,error:null}}catch(a){return console.error("Erro ao contar entradas do ranking:",a),{data:0,error:a instanceof Error?a.message:"Erro ao contar entradas"}}}static async getUserRanking(e,s=10){try{console.log(`[RankingService] Buscando histórico do usuário: ${e}, limite: ${s}`);const{data:a,error:n}=await _e.rpc("get_dynamic_user_ranking_history",{p_user_id:e,p_limit:s});if(n)throw console.error("[RankingService] Erro no histórico do usuário:",n),n;return console.log("[RankingService] Histórico do usuário recebido:",(a==null?void 0:a.length)||0,"entradas"),{data:a||[],error:null}}catch(a){return console.error("Erro ao buscar ranking do usuário:",a),{data:[],error:a instanceof Error?a.message:"Erro ao buscar ranking do usuário"}}}static async getUserStats(e){try{console.log(`[RankingService] Buscando estatísticas do usuário: ${e}`);const{data:s,error:a}=await _e.rpc("get_dynamic_user_stats",{p_user_id:e}).single();if(a)throw console.error("[RankingService] Erro nas estatísticas do usuário:",a),a;const n=s,i={bestFloor:(n==null?void 0:n.best_floor)||0,bestLevel:(n==null?void 0:n.best_level)||1,bestGold:(n==null?void 0:n.best_gold)||0,totalRuns:(n==null?void 0:n.total_runs)||0,aliveCharacters:(n==null?void 0:n.alive_characters)||0};return console.log("[RankingService] Estatísticas do usuário recebidas:",i),{data:i,error:null}}catch(s){return console.error("Erro ao buscar estatísticas do usuário:",s),{data:{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0},error:s instanceof Error?s.message:"Erro ao buscar estatísticas"}}}static async testRankingSystem(e){try{const{data:s,error:a}=await _e.rpc("test_ranking_system",{p_user_id:e||null});if(a)throw a;return{data:s||[],error:null}}catch(s){return console.error("Erro ao testar sistema de ranking:",s),{data:[],error:s instanceof Error?s.message:"Erro ao testar ranking"}}}static async syncAllRankings(){try{const{data:e,error:s}=await _e.rpc("refresh_all_rankings");if(s)throw s;return{data:e||"Sincronização concluída",error:null}}catch(e){return console.error("Erro ao sincronizar rankings:",e),{data:"",error:e instanceof Error?e.message:"Erro ao sincronizar rankings"}}}}const tX={ADMIN:"Administrador",PLAYER:"Jogador"},Q4=Yt("/_authenticated/users/$id")({component:sX});function sX(){const{id:t}=Q4.useParams(),[e,s]=y.useState(null),[a,n]=y.useState([]),[i,c]=y.useState(!0),[u,f]=y.useState(null);return y.useEffect(()=>{(async()=>{try{c(!0),f(null);const{data:p,error:g}=await oc.searchUsers({page:1,limit:1,email:t});if(g){f(`Erro ao buscar usuário: ${g}`);return}if(!p||p.length===0){f("Usuário não encontrado");return}const x=p[0];s(x);const{data:b}=await Jl.getUserRanking(x.uid);n(b||[])}catch(p){console.error("Erro ao carregar dados:",p),f("Erro ao carregar dados do usuário")}finally{c(!1)}})()},[t]),i?r.jsx("div",{children:"Carregando..."}):u?r.jsx("div",{className:"text-red-500",children:u}):e?r.jsx(B4,{children:r.jsxs("div",{className:"container mx-auto py-8",children:[r.jsxs($e,{className:"mb-8",children:[r.jsx(ft,{children:r.jsx(pt,{children:"Detalhes do Usuário"})}),r.jsx(He,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Nome"}),r.jsx("p",{className:"text-lg",children:e.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Email"}),r.jsx("p",{className:"text-lg",children:e.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Tipo"}),r.jsx(ze,{className:e.role==="ADMIN"?"bg-red-500":"bg-blue-500",children:tX[e.role]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Status"}),r.jsx(ze,{variant:e.ativo?"default":"destructive",children:e.ativo?"Ativo":"Inativo"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Maior Andar Alcançado"}),r.jsx("p",{className:"text-lg",children:e.highest_floor})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Total de Jogos"}),r.jsx("p",{className:"text-lg",children:e.total_games})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Vitórias"}),r.jsx("p",{className:"text-lg",children:e.total_victories})]})]})})]}),r.jsxs($e,{children:[r.jsx(ft,{children:r.jsx(pt,{children:"Histórico de Rankings"})}),r.jsx(He,{children:r.jsx("div",{className:"rounded-md border",children:r.jsxs(lp,{children:[r.jsx(cp,{children:r.jsxs(qr,{children:[r.jsx(ca,{children:"Andar Alcançado"}),r.jsx(ca,{children:"Data"})]})}),r.jsx(up,{children:a.length===0?r.jsx(qr,{children:r.jsx(Ms,{colSpan:2,className:"text-center",children:"Nenhum ranking encontrado"})}):a.map(h=>r.jsxs(qr,{children:[r.jsx(Ms,{children:h.highest_floor}),r.jsx(Ms,{children:h.created_at?new Date(h.created_at).toLocaleDateString("pt-BR"):"-"})]},h.id))})]})})})]})]})}):r.jsx("div",{children:"Usuário não encontrado"})}const aX=({activeMode:t,onModeChange:e,statusFilter:s,onStatusFilterChange:a,nameFilter:n,onNameFilterChange:i,currentPage:c,totalPages:u,onPageChange:f,isLoading:h=!1})=>{const p=[{key:"floor",label:"Andar Mais Alto",icon:Er,color:"text-yellow-500"},{key:"level",label:"Maior Nível",icon:Ba,color:"text-blue-500"},{key:"gold",label:"Mais Rico",icon:wa,color:"text-amber-500"}],g=[{key:"all",label:"Todos",shortLabel:"Todos",icon:AC,color:"text-gray-500"},{key:"alive",label:"Apenas Vivos",shortLabel:"Vivos",icon:cs,color:"text-green-500"},{key:"dead",label:"Apenas Mortos",shortLabel:"Mortos",icon:Js,color:"text-red-500"}];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Modalidade"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(x=>{const b=x.icon,j=t===x.key;return r.jsxs(de,{variant:j?"default":"outline",size:"sm",onClick:()=>e(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${j?"":"hover:bg-muted"}`,children:[r.jsx(b,{className:`h-3 w-3 ${j?"text-white":"text-muted-foreground"}`}),r.jsx("span",{className:"hidden sm:inline",children:x.label}),r.jsx("span",{className:"sm:hidden",children:x.key==="floor"?"Andar":x.key==="level"?"Nível":"Ouro"})]},x.key)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Status"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(x=>{const b=x.icon,j=s===x.key;return r.jsxs(de,{variant:j?"default":"outline",size:"sm",onClick:()=>a(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${j?"":"hover:bg-muted"}`,children:[r.jsx(b,{className:`h-3 w-3 ${j?"text-white":"text-muted-foreground"}`}),r.jsx("span",{className:"hidden sm:inline",children:x.label}),r.jsx("span",{className:"sm:hidden",children:x.shortLabel})]},x.key)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Buscar Jogador"}),r.jsxs("div",{className:"relative",children:[r.jsx(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ps,{type:"text",placeholder:"Digite o nome do jogador...",value:n,onChange:x=>i(x.target.value),disabled:h,className:"pl-10 text-sm"})]})]}),u>1&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Páginas"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>f(c-1),disabled:c<=1||h,className:"flex items-center gap-2",children:[r.jsx(dv,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Página ",c," de ",u]})}),r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>f(c+1),disabled:c>=u||h,className:"flex items-center gap-2",children:[r.jsx("span",{className:"hidden sm:inline",children:"Próxima"}),r.jsx(_C,{className:"h-4 w-4"})]})]})]})]})},La=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),rX=({entries:t,mode:e,currentUserId:s})=>{const a=f=>{switch(f){case 0:return"text-yellow-500";case 1:return"text-gray-400";case 2:return"text-amber-700";default:return"text-gray-300"}},n=(f,h)=>{switch(h){case"floor":return`Andar ${f.highest_floor}`;case"level":return`Nível ${f.character_level}`;case"gold":return`${La(f.character_gold)} Gold`;default:return`Andar ${f.highest_floor}`}},i=(f,h)=>{switch(h){case"floor":return`Nível ${f.character_level} • ${La(f.character_gold)} Gold`;case"level":return`Andar ${f.highest_floor} • ${La(f.character_gold)} Gold`;case"gold":return`Andar ${f.highest_floor} • Nível ${f.character_level}`;default:return`Nível ${f.character_level}`}},u=(f=>{switch(f){case"floor":return Er;case"level":return Ba;case"gold":return wa;default:return Er}})(e);return t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Nenhum registro encontrado para esta modalidade."})]}):r.jsxs(lp,{children:[r.jsx(cp,{children:r.jsxs(qr,{children:[r.jsx(ca,{className:"w-12 text-center",children:"Pos."}),r.jsx(ca,{children:"Jogador"}),r.jsx(ca,{className:"text-right",children:"Valor Principal"}),r.jsx(ca,{className:"text-right hidden sm:table-cell",children:"Detalhes"}),r.jsx(ca,{className:"text-right",children:"Data"})]})}),r.jsx(up,{children:t.map((f,h)=>r.jsxs(qr,{className:f.user_id===s?"bg-primary/5":"",children:[r.jsx(Ms,{className:"text-center font-medium",children:h<3?r.jsx(Er,{className:`inline h-4 w-4 ${a(h)}`}):r.jsx("span",{className:"text-muted-foreground",children:h+1})}),r.jsx(Ms,{children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:f.player_name}),f.character_alive?r.jsx(cs,{className:"h-3 w-3 text-green-500"}):r.jsx(Js,{className:"h-3 w-3 text-red-500"}),f.user_id===s&&r.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Você"})]}),r.jsx("div",{className:"text-xs text-muted-foreground sm:hidden",children:i(f,e)})]})})}),r.jsx(Ms,{className:"text-right font-medium",children:n(f,e)}),r.jsx(Ms,{className:"text-right text-muted-foreground hidden sm:table-cell",children:i(f,e)}),r.jsx(Ms,{className:"text-right text-muted-foreground",children:f.created_at?new Date(f.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]},f.id))})]})},nX=({stats:t,userRanking:e})=>{const[s,a]=y.useState(!0),[n,i]=y.useState(!1),c=e[0];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs($e,{children:[r.jsx(ft,{className:"pb-3",children:r.jsxs(de,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>a(!s),children:[r.jsx(pt,{className:"text-lg font-medium",children:"Suas Conquistas"}),s?r.jsx(mc,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]})}),s&&r.jsx(He,{className:"pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(Er,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestFloor}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Melhor Andar"})]}),r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(Ba,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestLevel}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Maior Nível"})]}),r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(wa,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold mb-1",title:`${t.bestGold.toLocaleString("pt-BR")} Gold`,children:La(t.bestGold)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Mais Rico"})]})]})})]}),c&&r.jsxs($e,{children:[r.jsx(ft,{className:"pb-3",children:r.jsxs(de,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>i(!n),children:[r.jsxs(pt,{className:"text-lg font-medium flex items-center gap-2",children:[r.jsx(bC,{className:"h-4 w-4"}),"Última Tentativa"]}),n?r.jsx(mc,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(To,{className:"h-4 w-4 text-muted-foreground"})]})}),n&&r.jsx(He,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[c.character_alive?r.jsx("span",{className:"text-sm",children:"❤️"}):r.jsx("span",{className:"text-sm",children:"💀"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:c.character_alive?"Vivo":"Morto"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(c.created_at).toLocaleDateString("pt-BR")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold",children:["Andar ",c.highest_floor]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Nível ",c.character_level]})]})]})})]}),r.jsx($e,{children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total de Tentativas:"}),r.jsx("span",{className:"font-medium",children:t.totalRuns})]})})})]})},rE=20,oX=Yt("/_authenticated/game/ranking")({component:iX});function iX(){const t=Pt(),{user:e}=zs(),[s,a]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),[f,h]=y.useState(!0),[p,g]=y.useState("floor"),[x,b]=y.useState("all"),[j,w]=y.useState(""),[N,E]=y.useState(1),[C,S]=y.useState(1),[P,R]=y.useState("");y.useEffect(()=>{const B=setTimeout(()=>{R(j)},500);return()=>clearTimeout(B)},[j]),y.useEffect(()=>{E(1)},[p,x,P]),y.useEffect(()=>{k()},[e==null?void 0:e.id,p,x,P,N]);const D=y.useCallback(async()=>{try{const B=await Jl.countRankingEntries(x,P);if(B.data!==null){const z=B.data,Q=Math.max(1,Math.ceil(z/rE));S(Q),console.log(`[RankingPage] Total de entradas: ${z}, páginas: ${Q}`)}}catch(B){console.error("Erro ao contar entradas:",B),S(1)}},[x,P]),$=async()=>{console.log("[RankingPage] Forçando atualização do ranking..."),await k()},k=async()=>{var B,z,Q;try{h(!0),console.log(`[RankingPage] Iniciando busca de dados - modo: ${p}, filtro: ${x}, nome: ${P}, página: ${N}`),await D();const H=await Jl.getGlobalRanking(p,rE,x,P,N);if(console.log("[RankingPage] Resposta do ranking global:",{success:!H.error,error:H.error,dataLength:((B=H.data)==null?void 0:B.length)||0,data:H.data}),H.error?(console.error("Erro ao buscar ranking global:",H.error),a([])):(a(H.data||[]),console.log(`[RankingPage] Ranking global carregado: ${((z=H.data)==null?void 0:z.length)||0} entradas`),H.data&&H.data.length>0&&console.log("[RankingPage] Primeiros 5 personagens do ranking:",H.data.slice(0,5).map(A=>({name:A.player_name,highest_floor:A.highest_floor,level:A.character_level,alive:A.character_alive,user_id:A.user_id})))),e!=null&&e.id){const[A,I]=await Promise.all([Jl.getUserRanking(e.id,15),Jl.getUserStats(e.id)]);A.error?(console.error("Erro ao buscar ranking do usuário:",A.error),i([])):(i(A.data||[]),console.log(`[RankingPage] Ranking do usuário carregado: ${((Q=A.data)==null?void 0:Q.length)||0} entradas`)),I.error?(console.error("Erro ao buscar estatísticas do usuário:",I.error),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})):(u(I.data||{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),console.log("[RankingPage] Estatísticas do usuário carregadas:",I.data))}}catch(H){console.error("Erro ao buscar dados do ranking:",H),a([]),i([]),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})}finally{h(!1)}},M=B=>{switch(B){case"floor":return"Ranking por Andar Mais Alto";case"level":return"Ranking por Nível Mais Alto";case"gold":return"Ranking por Mais Ouro";default:return"Ranking"}},V=B=>{E(B)},Y=()=>{const B=[];return x!=="all"&&B.push(x==="alive"?"vivos":"mortos"),P&&B.push(`nome: "${P}"`),B.length>0?` (${B.join(", ")})`:""};return r.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:M(p)}),r.jsxs("p",{className:"text-muted-foreground",children:["Veja os melhores jogadores",Y()]})]})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx(de,{variant:"outline",size:"sm",onClick:$,disabled:f,children:"Atualizar"})})]}),r.jsx($e,{className:"mb-6",children:r.jsx(ft,{children:r.jsx(aX,{activeMode:p,onModeChange:g,statusFilter:x,onStatusFilterChange:b,nameFilter:j,onNameFilterChange:w,currentPage:N,totalPages:C,onPageChange:V,isLoading:f})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e&&r.jsx("div",{className:"lg:col-span-1",children:r.jsx(nX,{stats:c,userRanking:n.map(B=>({highest_floor:B.highest_floor,character_level:B.character_level,character_gold:B.character_gold,character_alive:B.character_alive,created_at:B.created_at}))})}),r.jsx("div",{className:e?"lg:col-span-3":"lg:col-span-4",children:r.jsxs($e,{children:[r.jsx(He,{className:"p-0",children:r.jsx(rX,{entries:s,mode:p,currentUserId:e==null?void 0:e.id})}),C>1&&r.jsxs(Rb,{className:"flex justify-center gap-2",children:[r.jsx(de,{variant:"outline",size:"sm",onClick:()=>V(N-1),disabled:N<=1||f,children:"Anterior"}),r.jsxs("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Página ",N," de ",C]}),r.jsx(de,{variant:"outline",size:"sm",onClick:()=>V(N+1),disabled:N>=C||f,children:"Próxima"})]})]})})]})]})}const Rn=jk,lX=Nk,J4=y.forwardRef(({className:t,...e},s)=>r.jsx(Qm,{ref:s,className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));J4.displayName=Qm.displayName;const Qr=y.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(lX,{children:[r.jsx(J4,{}),r.jsxs(Jm,{ref:a,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,r.jsxs(Ek,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Bi,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qr.displayName=Jm.displayName;const Mn=({className:t,...e})=>r.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Mn.displayName="DialogHeader";const eR=({className:t,...e})=>r.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});eR.displayName="DialogFooter";const Jr=y.forwardRef(({className:t,...e},s)=>r.jsx(ep,{ref:s,className:Ve("text-lg font-semibold leading-none tracking-tight",t),...e}));Jr.displayName=ep.displayName;const vc=y.forwardRef(({className:t,...e},s)=>r.jsx(Sk,{ref:s,className:Ve("text-sm text-muted-foreground",t),...e}));vc.displayName=Sk.displayName;var Pb="Progress",Db=100,[cX,WW]=or(Pb),[uX,dX]=cX(Pb),tR=y.forwardRef((t,e)=>{const{__scopeProgress:s,value:a=null,max:n,getValueLabel:i=fX,...c}=t;(n||n===0)&&!nE(n)&&console.error(hX(`${n}`,"Progress"));const u=nE(n)?n:Db;a!==null&&!oE(a,u)&&console.error(mX(`${a}`,"Progress"));const f=oE(a,u)?a:null,h=km(f)?i(f,u):void 0;return r.jsx(uX,{scope:s,value:f,max:u,children:r.jsx(We.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":km(f)?f:void 0,"aria-valuetext":h,role:"progressbar","data-state":rR(f,u),"data-value":f??void 0,"data-max":u,...c,ref:e})})});tR.displayName=Pb;var sR="ProgressIndicator",aR=y.forwardRef((t,e)=>{const{__scopeProgress:s,...a}=t,n=dX(sR,s);return r.jsx(We.div,{"data-state":rR(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:e})});aR.displayName=sR;function fX(t,e){return`${Math.round(t/e*100)}%`}function rR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function km(t){return typeof t=="number"}function nE(t){return km(t)&&!isNaN(t)&&t>0}function oE(t,e){return km(t)&&!isNaN(t)&&t<=e&&t>=0}function hX(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Db}\`.`}function mX(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Db} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nR=tR,pX=aR;const zr=y.forwardRef(({className:t,value:e,...s},a)=>r.jsx(nR,{ref:a,className:Ve("relative h-2 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:r.jsx(pX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));zr.displayName=nR.displayName;const gX=Od("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ju=y.forwardRef(({className:t,variant:e,...s},a)=>r.jsx("div",{ref:a,role:"alert",className:Ve(gX({variant:e}),t),...s}));Ju.displayName="Alert";const xX=y.forwardRef(({className:t,...e},s)=>r.jsx("h5",{ref:s,className:Ve("mb-1 font-medium leading-none tracking-tight",t),...e}));xX.displayName="AlertTitle";const ed=y.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ve("text-sm [&_p]:leading-relaxed",t),...e}));ed.displayName="AlertDescription";const iE=20,vX=Yt("/_authenticated/game/play")({component:yX});function yX(){return $i().pathname==="/game/play"?r.jsx(bX,{}):r.jsx($o,{})}function bX(){const t=Pt(),{user:e}=zs(),[s,a]=y.useState([]),[n,i]=y.useState(null),[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(!1),[x,b]=y.useState(""),[j,w]=y.useState({isValid:!0}),[N,E]=y.useState(!1),[C,S]=y.useState(!1),[P,R]=y.useState(null);y.useEffect(()=>{e!=null&&e.id&&D()},[e==null?void 0:e.id]),y.useEffect(()=>{if(x.trim()){const A=sr.validateCharacterName(x);if(A.isValid&&s.length>0){const I=s.map(K=>K.name),q=sr.formatCharacterName(x);if(sr.isTooSimilar(q,I)){const K=sr.generateNameSuggestions(q);w({isValid:!1,error:"Nome muito similar a um personagem existente",suggestions:K})}else w(A)}else w(A)}else w({isValid:!0})},[x,s]);const D=async()=>{try{h(!0);const A=await tt.getUserCharacters(e.id);A.success&&A.data&&a(A.data);const I=await tt.getUserCharacterProgression(e.id);I.success&&I.data&&i(I.data)}catch(A){console.error("Erro ao carregar dados:",A),pe.error("Erro ao carregar dados dos personagens")}finally{h(!1)}};y.useEffect(()=>{if(n&&s!==void 0){const A=[];for(let I=1;I<=iE;I++){const q=s.find(X=>s.indexOf(X)+1===I)||null,K=I<=n.max_character_slots,L=$(I);A.push({slotNumber:I,character:q,isUnlocked:K,requiredTotalLevel:L})}u(A)}},[n,s]);const $=A=>A<=3?0:(A-3)*15,k=async()=>{if(!(!(e!=null&&e.id)||!x.trim()||!j.isValid)){E(!0);try{const A=await tt.createCharacter({user_id:e.id,name:x.trim()});A.success&&A.data?(pe.success("Personagem criado com sucesso!",{description:`${sr.formatCharacterName(x)} foi criado!`}),await D(),B()):pe.error("Erro ao criar personagem",{description:A.error})}catch(A){console.error("Erro ao criar personagem:",A),pe.error("Erro ao criar personagem")}finally{E(!1)}}},M=A=>{R(A),S(!0)},V=async()=>{if(P)try{const A=await tt.getCharacter(P.id);A.success&&A.data?t({to:"/game/play/hub",search:{character:P.id}}):pe.error("Erro ao selecionar personagem",{description:A.error})}catch(A){console.error("Erro ao selecionar personagem:",A),pe.error("Erro ao selecionar personagem")}},Y=()=>{g(!0)},B=()=>{g(!1),b(""),w({isValid:!0})},z=A=>{b(A)},Q=A=>{const q=(L=>Math.floor(100*Math.pow(1.1,L-1)))(A.level),K=A.xp/q*100;return r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Nível:"}),r.jsx("span",{className:"font-medium",children:A.level})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"XP:"}),r.jsxs("span",{className:"font-medium",children:[A.xp,"/",q]})]}),r.jsx(zr,{value:K,className:"h-2"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Andar Máximo:"}),r.jsx("span",{className:"font-medium",children:A.floor})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ouro:"}),r.jsx("span",{className:"font-medium text-yellow-600",children:A.gold})]})]})},H=A=>{if(!A.isUnlocked)return r.jsx($e,{className:"opacity-50",children:r.jsxs(He,{className:"p-4 text-center",children:[r.jsx(ZI,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slot ",A.slotNumber]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requer nível total ",A.requiredTotalLevel]})]})},A.slotNumber);if(!A.character)return r.jsx($e,{className:"cursor-pointer hover:bg-accent/50 border-dashed",children:r.jsxs(He,{className:"p-4 text-center",onClick:()=>Y(),children:[r.jsx(Io,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Criar Personagem"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Slot ",A.slotNumber]})]})},A.slotNumber);const I=A.character,q=I.hp>0;return r.jsxs($e,{className:`cursor-pointer hover:bg-accent/50 ${q?"":"border-red-500/50 bg-red-500/5"}`,onClick:()=>q&&M(I),children:[r.jsx(ft,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(pt,{className:"text-base flex items-center gap-2",children:[I.name,!q&&r.jsx(Js,{className:"h-4 w-4 text-red-500"}),I.floor>=100&&r.jsx(ki,{className:"h-4 w-4 text-yellow-500"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",A.slotNumber]})]})}),r.jsxs(He,{className:"pt-0",children:[Q(I),!q&&r.jsxs(Ju,{className:"mt-3 border-red-500/50 bg-red-500/10",children:[r.jsx(Js,{className:"h-4 w-4 text-red-500"}),r.jsx(ed,{className:"text-red-700",children:"Este personagem morreu permanentemente"})]})]})]},A.slotNumber)};return f?r.jsx("div",{className:"container mx-auto p-4",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Carregando personagens..."})]})})}):r.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Selecionar Personagem"}),r.jsx("p",{className:"text-muted-foreground",children:"Escolha um personagem para jogar"})]})]}),n&&r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Progressão Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(AC,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:n.total_character_level}),r.jsx("span",{className:"text-muted-foreground",children:"nível"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.max_character_slots,"/",iE," slots"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(H)}),r.jsx(Rn,{open:p,onOpenChange:g,children:r.jsxs(Qr,{children:[r.jsxs(Mn,{children:[r.jsx(Jr,{children:"Criar Novo Personagem"}),r.jsx(vc,{children:"Escolha um nome para seu novo personagem. Lembre-se: a morte é permanente!"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ps,{placeholder:"Nome do personagem",value:x,onChange:A=>b(A.target.value),className:j.isValid?"":"border-red-500"}),!j.isValid&&j.error&&r.jsxs(Ju,{className:"mt-2 border-red-500/50 bg-red-500/10",children:[r.jsx(wC,{className:"h-4 w-4 text-red-500"}),r.jsx(ed,{className:"text-red-700",children:j.error})]}),j.suggestions&&j.suggestions.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Sugestões:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:j.suggestions.map((A,I)=>r.jsx(de,{variant:"outline",size:"sm",onClick:()=>z(A),children:A},I))})]})]}),r.jsxs(Ju,{children:[r.jsx(Js,{className:"h-4 w-4"}),r.jsxs(ed,{children:[r.jsx("strong",{children:"Aviso:"})," Este jogo possui morte permanente (permadeath). Se seu personagem morrer, ele será perdido para sempre!"]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(de,{variant:"outline",onClick:B,children:"Cancelar"}),r.jsx(de,{onClick:k,disabled:!x.trim()||!j.isValid||N,children:N?"Criando...":"Criar Personagem"})]})]})]})}),r.jsx(Rn,{open:C,onOpenChange:S,children:r.jsxs(Qr,{children:[r.jsxs(Mn,{children:[r.jsx(Jr,{children:"Confirmar Seleção"}),r.jsxs(vc,{children:["Você está prestes a jogar com ",P==null?void 0:P.name]})]}),r.jsxs(Ju,{children:[r.jsx(yy,{className:"h-4 w-4"}),r.jsxs(ed,{children:[r.jsx("strong",{children:"Lembrete:"})," Este jogo possui morte permanente. Se seu personagem morrer durante a aventura, ele será perdido para sempre!"]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(de,{variant:"outline",onClick:()=>S(!1),children:"Cancelar"}),r.jsxs(de,{onClick:V,children:[r.jsx(fv,{className:"h-4 w-4 mr-2"}),"Confirmar e Jogar"]})]})]})})]})}var Lx="rovingFocusGroup.onEntryFocus",_X={bubbles:!1,cancelable:!0},zd="RovingFocusGroup",[ty,oR,wX]=MT(zd),[jX,iR]=or(zd,[wX]),[NX,SX]=jX(zd),lR=y.forwardRef((t,e)=>r.jsx(ty.Provider,{scope:t.__scopeRovingFocusGroup,children:r.jsx(ty.Slot,{scope:t.__scopeRovingFocusGroup,children:r.jsx(EX,{...t,ref:e})})}));lR.displayName=zd;var EX=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:a,loop:n=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...g}=t,x=y.useRef(null),b=_t(e,x),j=dp(i),[w,N]=Ro({prop:c,defaultProp:u??null,onChange:f,caller:zd}),[E,C]=y.useState(!1),S=ea(h),P=oR(s),R=y.useRef(!1),[D,$]=y.useState(0);return y.useEffect(()=>{const k=x.current;if(k)return k.addEventListener(Lx,S),()=>k.removeEventListener(Lx,S)},[S]),r.jsx(NX,{scope:s,orientation:a,dir:j,loop:n,currentTabStopId:w,onItemFocus:y.useCallback(k=>N(k),[N]),onItemShiftTab:y.useCallback(()=>C(!0),[]),onFocusableItemAdd:y.useCallback(()=>$(k=>k+1),[]),onFocusableItemRemove:y.useCallback(()=>$(k=>k-1),[]),children:r.jsx(We.div,{tabIndex:E||D===0?-1:0,"data-orientation":a,...g,ref:b,style:{outline:"none",...t.style},onMouseDown:Ge(t.onMouseDown,()=>{R.current=!0}),onFocus:Ge(t.onFocus,k=>{const M=!R.current;if(k.target===k.currentTarget&&M&&!E){const V=new CustomEvent(Lx,_X);if(k.currentTarget.dispatchEvent(V),!V.defaultPrevented){const Y=P().filter(A=>A.focusable),B=Y.find(A=>A.active),z=Y.find(A=>A.id===w),H=[B,z,...Y].filter(Boolean).map(A=>A.ref.current);dR(H,p)}}R.current=!1}),onBlur:Ge(t.onBlur,()=>C(!1))})})}),cR="RovingFocusGroupItem",uR=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:n=!1,tabStopId:i,children:c,...u}=t,f=Hr(),h=i||f,p=SX(cR,s),g=p.currentTabStopId===h,x=oR(s),{onFocusableItemAdd:b,onFocusableItemRemove:j,currentTabStopId:w}=p;return y.useEffect(()=>{if(a)return b(),()=>j()},[a,b,j]),r.jsx(ty.ItemSlot,{scope:s,id:h,focusable:a,active:n,children:r.jsx(We.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:Ge(t.onMouseDown,N=>{a?p.onItemFocus(h):N.preventDefault()}),onFocus:Ge(t.onFocus,()=>p.onItemFocus(h)),onKeyDown:Ge(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){p.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const E=AX(N,p.orientation,p.dir);if(E!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let S=x().filter(P=>P.focusable).map(P=>P.ref.current);if(E==="last")S.reverse();else if(E==="prev"||E==="next"){E==="prev"&&S.reverse();const P=S.indexOf(N.currentTarget);S=p.loop?TX(S,P+1):S.slice(P+1)}setTimeout(()=>dR(S))}}),children:typeof c=="function"?c({isCurrentTabStop:g,hasTabStop:w!=null}):c})})});uR.displayName=cR;var CX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function AX(t,e,s){const a=kX(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return CX[a]}function dR(t,e=!1){const s=document.activeElement;for(const a of t)if(a===s||(a.focus({preventScroll:e}),document.activeElement!==s))return}function TX(t,e){return t.map((s,a)=>t[(e+a)%t.length])}var RX=lR,MX=uR,yp="Tabs",[PX,ZW]=or(yp,[iR]),fR=iR(),[DX,Ob]=PX(yp),hR=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:c="horizontal",dir:u,activationMode:f="automatic",...h}=t,p=dp(u),[g,x]=Ro({prop:a,onChange:n,defaultProp:i??"",caller:yp});return r.jsx(DX,{scope:s,baseId:Hr(),value:g,onValueChange:x,orientation:c,dir:p,activationMode:f,children:r.jsx(We.div,{dir:p,"data-orientation":c,...h,ref:e})})});hR.displayName=yp;var mR="TabsList",pR=y.forwardRef((t,e)=>{const{__scopeTabs:s,loop:a=!0,...n}=t,i=Ob(mR,s),c=fR(s);return r.jsx(RX,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:a,children:r.jsx(We.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:e})})});pR.displayName=mR;var gR="TabsTrigger",xR=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,disabled:n=!1,...i}=t,c=Ob(gR,s),u=fR(s),f=bR(c.baseId,a),h=_R(c.baseId,a),p=a===c.value;return r.jsx(MX,{asChild:!0,...u,focusable:!n,active:p,children:r.jsx(We.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:f,...i,ref:e,onMouseDown:Ge(t.onMouseDown,g=>{!n&&g.button===0&&g.ctrlKey===!1?c.onValueChange(a):g.preventDefault()}),onKeyDown:Ge(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(a)}),onFocus:Ge(t.onFocus,()=>{const g=c.activationMode!=="manual";!p&&!n&&g&&c.onValueChange(a)})})})});xR.displayName=gR;var vR="TabsContent",yR=y.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,forceMount:n,children:i,...c}=t,u=Ob(vR,s),f=bR(u.baseId,a),h=_R(u.baseId,a),p=a===u.value,g=y.useRef(p);return y.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),r.jsx(Va,{present:n||p,children:({present:x})=>r.jsx(We.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!x,id:h,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:x&&i})})});yR.displayName=vR;function bR(t,e){return`${t}-trigger-${e}`}function _R(t,e){return`${t}-content-${e}`}var OX=hR,wR=pR,jR=xR,NR=yR;const SR=OX,$b=y.forwardRef(({className:t,...e},s)=>r.jsx(wR,{ref:s,className:Ve("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));$b.displayName=wR.displayName;const vo=y.forwardRef(({className:t,...e},s)=>r.jsx(jR,{ref:s,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));vo.displayName=jR.displayName;const yo=y.forwardRef(({className:t,...e},s)=>r.jsx(NR,{ref:s,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));yo.displayName=NR.displayName;function $X(t,e){return y.useReducer((s,a)=>e[s][a]??s,t)}var Lb="ScrollArea",[ER,QW]=or(Lb),[LX,ir]=ER(Lb),CR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:a="hover",dir:n,scrollHideDelay:i=600,...c}=t,[u,f]=y.useState(null),[h,p]=y.useState(null),[g,x]=y.useState(null),[b,j]=y.useState(null),[w,N]=y.useState(null),[E,C]=y.useState(0),[S,P]=y.useState(0),[R,D]=y.useState(!1),[$,k]=y.useState(!1),M=_t(e,Y=>f(Y)),V=dp(n);return r.jsx(LX,{scope:s,type:a,dir:V,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:p,content:g,onContentChange:x,scrollbarX:b,onScrollbarXChange:j,scrollbarXEnabled:R,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:N,scrollbarYEnabled:$,onScrollbarYEnabledChange:k,onCornerWidthChange:C,onCornerHeightChange:P,children:r.jsx(We.div,{dir:V,...c,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});CR.displayName=Lb;var kR="ScrollAreaViewport",AR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:a,nonce:n,...i}=t,c=ir(kR,s),u=y.useRef(null),f=_t(e,u,c.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(We.div,{"data-radix-scroll-area-viewport":"",...i,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:r.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});AR.displayName=kR;var tn="ScrollAreaScrollbar",TR=y.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=ir(tn,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=n,u=t.orientation==="horizontal";return y.useEffect(()=>(u?i(!0):c(!0),()=>{u?i(!1):c(!1)}),[u,i,c]),n.type==="hover"?r.jsx(IX,{...a,ref:e,forceMount:s}):n.type==="scroll"?r.jsx(BX,{...a,ref:e,forceMount:s}):n.type==="auto"?r.jsx(RR,{...a,ref:e,forceMount:s}):n.type==="always"?r.jsx(Ib,{...a,ref:e}):null});TR.displayName=tn;var IX=y.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=ir(tn,t.__scopeScrollArea),[i,c]=y.useState(!1);return y.useEffect(()=>{const u=n.scrollArea;let f=0;if(u){const h=()=>{window.clearTimeout(f),c(!0)},p=()=>{f=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),r.jsx(Va,{present:s||i,children:r.jsx(RR,{"data-state":i?"visible":"hidden",...a,ref:e})})}),BX=y.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=ir(tn,t.__scopeScrollArea),i=t.orientation==="horizontal",c=_p(()=>f("SCROLL_END"),100),[u,f]=$X("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return y.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>f("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,n.scrollHideDelay,f]),y.useEffect(()=>{const h=n.viewport,p=i?"scrollLeft":"scrollTop";if(h){let g=h[p];const x=()=>{const b=h[p];g!==b&&(f("SCROLL"),c()),g=b};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[n.viewport,i,f,c]),r.jsx(Va,{present:s||u!=="hidden",children:r.jsx(Ib,{"data-state":u==="hidden"?"hidden":"visible",...a,ref:e,onPointerEnter:Ge(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Ge(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),RR=y.forwardRef((t,e)=>{const s=ir(tn,t.__scopeScrollArea),{forceMount:a,...n}=t,[i,c]=y.useState(!1),u=t.orientation==="horizontal",f=_p(()=>{if(s.viewport){const h=s.viewport.offsetWidth<s.viewport.scrollWidth,p=s.viewport.offsetHeight<s.viewport.scrollHeight;c(u?h:p)}},10);return yc(s.viewport,f),yc(s.content,f),r.jsx(Va,{present:a||i,children:r.jsx(Ib,{"data-state":i?"visible":"hidden",...n,ref:e})})}),Ib=y.forwardRef((t,e)=>{const{orientation:s="vertical",...a}=t,n=ir(tn,t.__scopeScrollArea),i=y.useRef(null),c=y.useRef(0),[u,f]=y.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=$R(u.viewport,u.content),p={...a,sizes:u,onSizesChange:f,hasThumb:h>0&&h<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:x=>c.current=x};function g(x,b){return HX(x,c.current,u,b)}return s==="horizontal"?r.jsx(VX,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollLeft,b=lE(x,u,n.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=g(x,n.dir))}}):s==="vertical"?r.jsx(qX,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollTop,b=lE(x,u);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=g(x))}}):null}),VX=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:a,...n}=t,i=ir(tn,t.__scopeScrollArea),[c,u]=y.useState(),f=y.useRef(null),h=_t(e,f,i.onScrollbarXChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),r.jsx(PR,{"data-orientation":"horizontal",...n,ref:h,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":bp(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollLeft+p.deltaX;t.onWheelScroll(x),IR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Tm(c.paddingLeft),paddingEnd:Tm(c.paddingRight)}})}})}),qX=y.forwardRef((t,e)=>{const{sizes:s,onSizesChange:a,...n}=t,i=ir(tn,t.__scopeScrollArea),[c,u]=y.useState(),f=y.useRef(null),h=_t(e,f,i.onScrollbarYChange);return y.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),r.jsx(PR,{"data-orientation":"vertical",...n,ref:h,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":bp(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollTop+p.deltaY;t.onWheelScroll(x),IR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Tm(c.paddingTop),paddingEnd:Tm(c.paddingBottom)}})}})}),[UX,MR]=ER(tn),PR=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:p,onResize:g,...x}=t,b=ir(tn,s),[j,w]=y.useState(null),N=_t(e,M=>w(M)),E=y.useRef(null),C=y.useRef(""),S=b.viewport,P=a.content-a.viewport,R=ea(p),D=ea(f),$=_p(g,10);function k(M){if(E.current){const V=M.clientX-E.current.left,Y=M.clientY-E.current.top;h({x:V,y:Y})}}return y.useEffect(()=>{const M=V=>{const Y=V.target;(j==null?void 0:j.contains(Y))&&R(V,P)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[S,j,P,R]),y.useEffect(D,[a,D]),yc(j,$),yc(b.content,$),r.jsx(UX,{scope:s,scrollbar:j,hasThumb:n,onThumbChange:ea(i),onThumbPointerUp:ea(c),onThumbPositionChange:D,onThumbPointerDown:ea(u),children:r.jsx(We.div,{...x,ref:N,style:{position:"absolute",...x.style},onPointerDown:Ge(t.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),E.current=j.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),k(M))}),onPointerMove:Ge(t.onPointerMove,k),onPointerUp:Ge(t.onPointerUp,M=>{const V=M.target;V.hasPointerCapture(M.pointerId)&&V.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=C.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),Am="ScrollAreaThumb",DR=y.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=MR(Am,t.__scopeScrollArea);return r.jsx(Va,{present:s||n.hasThumb,children:r.jsx(zX,{ref:e,...a})})}),zX=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:a,...n}=t,i=ir(Am,s),c=MR(Am,s),{onThumbPositionChange:u}=c,f=_t(e,g=>c.onThumbChange(g)),h=y.useRef(void 0),p=_p(()=>{h.current&&(h.current(),h.current=void 0)},100);return y.useEffect(()=>{const g=i.viewport;if(g){const x=()=>{if(p(),!h.current){const b=GX(g,u);h.current=b,u()}};return u(),g.addEventListener("scroll",x),()=>g.removeEventListener("scroll",x)}},[i.viewport,p,u]),r.jsx(We.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:Ge(t.onPointerDownCapture,g=>{const b=g.target.getBoundingClientRect(),j=g.clientX-b.left,w=g.clientY-b.top;c.onThumbPointerDown({x:j,y:w})}),onPointerUp:Ge(t.onPointerUp,c.onThumbPointerUp)})});DR.displayName=Am;var Bb="ScrollAreaCorner",OR=y.forwardRef((t,e)=>{const s=ir(Bb,t.__scopeScrollArea),a=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&a?r.jsx(FX,{...t,ref:e}):null});OR.displayName=Bb;var FX=y.forwardRef((t,e)=>{const{__scopeScrollArea:s,...a}=t,n=ir(Bb,s),[i,c]=y.useState(0),[u,f]=y.useState(0),h=!!(i&&u);return yc(n.scrollbarX,()=>{var g;const p=((g=n.scrollbarX)==null?void 0:g.offsetHeight)||0;n.onCornerHeightChange(p),f(p)}),yc(n.scrollbarY,()=>{var g;const p=((g=n.scrollbarY)==null?void 0:g.offsetWidth)||0;n.onCornerWidthChange(p),c(p)}),h?r.jsx(We.div,{...a,ref:e,style:{width:i,height:u,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Tm(t){return t?parseInt(t,10):0}function $R(t,e){const s=t/e;return isNaN(s)?0:s}function bp(t){const e=$R(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-s)*e;return Math.max(a,18)}function HX(t,e,s,a="ltr"){const n=bp(s),i=n/2,c=e||i,u=n-c,f=s.scrollbar.paddingStart+c,h=s.scrollbar.size-s.scrollbar.paddingEnd-u,p=s.content-s.viewport,g=a==="ltr"?[0,p]:[p*-1,0];return LR([f,h],g)(t)}function lE(t,e,s="ltr"){const a=bp(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-n,c=e.content-e.viewport,u=i-a,f=s==="ltr"?[0,c]:[c*-1,0],h=Gv(t,f);return LR([0,c],[0,u])(h)}function LR(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(t[1]-t[0]);return e[0]+a*(s-t[0])}}function IR(t,e){return t>0&&t<e}var GX=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},a=0;return function n(){const i={left:t.scrollLeft,top:t.scrollTop},c=s.left!==i.left,u=s.top!==i.top;(c||u)&&e(),s=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function _p(t,e){const s=ea(t),a=y.useRef(0);return y.useEffect(()=>()=>window.clearTimeout(a.current),[]),y.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(s,e)},[s,e])}function yc(t,e){const s=ea(e);gs(()=>{let a=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(s)});return n.observe(t),()=>{window.cancelAnimationFrame(a),n.unobserve(t)}}},[t,s])}var XX=CR,YX=AR,KX=OR;function ec({className:t,children:e,...s}){return r.jsxs(XX,{"data-slot":"scroll-area",className:Ve("relative",t),...s,children:[r.jsx(YX,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),r.jsx(WX,{}),r.jsx(KX,{})]})}function WX({className:t,orientation:e="vertical",...s}){return r.jsx(TR,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Ve("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:r.jsx(DR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const ZX=Yt("/_authenticated/game/guide")({component:QX});function QX(){const t=Pt();return r.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Guia do Tower Trials"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Aprenda tudo sobre o jogo"})]})]})}),r.jsxs(SR,{defaultValue:"basics",className:"w-full",children:[r.jsxs($b,{className:"grid w-full grid-cols-2 lg:grid-cols-4",children:[r.jsx(vo,{value:"basics",children:"Básico"}),r.jsx(vo,{value:"combat",children:"Combate"}),r.jsx(vo,{value:"progression",children:"Progressão"}),r.jsx(vo,{value:"items",children:"Itens"})]}),r.jsx(yo,{value:"basics",children:r.jsx($e,{className:"p-6",children:r.jsx(ec,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Conceitos Básicos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Sobre o Jogo"}),r.jsx("p",{children:"Tower Trials é um jogo de RPG roguelike onde você sobe uma torre misteriosa, enfrentando monstros cada vez mais fortes a cada andar. Sua missão é subir o máximo possível, fortalecendo seu personagem e coletando equipamentos poderosos."}),r.jsx("h3",{className:"text-xl font-semibold",children:"Personagens"}),r.jsx("p",{children:"Cada jogador pode ter até 3 personagens ativos. Quando um personagem morre, ele é permanentemente deletado (sistema Permadeath). Os personagens possuem os seguintes atributos base:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"HP (Pontos de Vida):"})," Determina quanto dano você pode receber"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Mana:"})," Recurso usado para lançar magias"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"ATK (Ataque):"})," Determina o dano base dos seus ataques"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"DEF (Defesa):"})," Reduz o dano recebido"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Speed (Velocidade):"})," Afeta suas chances de fuga e ordem de ações"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"A Torre"}),r.jsx("p",{children:"A torre é dividida em andares com diferentes características:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Andares Comuns:"})," Encontros normais com monstros"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Elite (a cada 5 andares):"})," Monstros mais fortes com melhores recompensas"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Evento (a cada 7 andares):"})," Eventos especiais e encontros únicos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Chefe (a cada 10 andares):"})," Batalhas desafiadoras contra chefes poderosos"]})]})]})]})})})}),r.jsx(yo,{value:"combat",children:r.jsx($e,{className:"p-6",children:r.jsx(ec,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Sistema de Combate"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Ações de Combate"}),r.jsx("p",{children:"Durante o combate, você pode realizar as seguintes ações:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Ataque:"})," Causa dano baseado no seu ATK menos a DEF do inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Defesa:"})," Aumenta temporariamente sua DEF por um turno"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Magias:"})," Efeitos variados que consomem Mana"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Itens:"})," Usar poções e outros consumíveis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Fuga:"})," Tenta escapar do combate (chance baseada na velocidade)"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Magias"}),r.jsx("p",{children:"As magias são divididas em diferentes tipos de efeito:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Dano (Damage):"})," Causa dano direto ao inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cura (Heal):"})," Recupera HP"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Buff:"})," Aumenta temporariamente seus atributos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Debuff:"})," Reduz temporariamente os atributos do inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"DoT (Damage over Time):"})," Causa dano ao longo do tempo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"HoT (Heal over Time):"})," Cura ao longo do tempo"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Comportamento dos Monstros"}),r.jsx("p",{children:"Os monstros possuem diferentes padrões de comportamento:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Agressivo:"})," Foca em causar dano"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Defensivo:"})," Alterna entre ataques e defesa"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Balanceado:"})," Mistura diferentes estratégias"]})]})]})]})})})}),r.jsx(yo,{value:"progression",children:r.jsx($e,{className:"p-6",children:r.jsx(ec,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Progressão"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Níveis"}),r.jsx("p",{children:"Ao derrotar monstros, você ganha XP. A quantidade de XP necessária para subir de nível aumenta em 50% a cada nível. Ao subir de nível:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Seus atributos base aumentam"}),r.jsx("li",{children:"HP e Mana são completamente restaurados"}),r.jsx("li",{children:"Você pode desbloquear novas magias"})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Recompensas"}),r.jsx("p",{children:"Ao derrotar monstros, você pode receber:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Gold:"})," Usado para comprar equipamentos e consumíveis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Drops:"})," Itens que podem ser usados para crafting"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"XP:"})," Para subir de nível"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Checkpoints"}),r.jsx("p",{children:"A cada 10 andares existe um checkpoint. Estes são pontos seguros onde você pode:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Salvar seu progresso"}),r.jsx("li",{children:"Retornar ao hub para comprar itens"}),r.jsx("li",{children:"Reorganizar seu equipamento"})]})]})]})})})}),r.jsx(yo,{value:"items",children:r.jsx($e,{className:"p-6",children:r.jsx(ec,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Itens e Equipamentos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Equipamentos"}),r.jsx("p",{children:"Os equipamentos são divididos em três categorias:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Armas (Weapons):"})," Aumentam principalmente ATK"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Armaduras (Armor):"})," Aumentam principalmente DEF"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Acessórios (Accessory):"})," Efeitos variados"]})]}),r.jsx("p",{children:"E em cinco raridades:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Comum (Common):"})," Equipamentos básicos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Incomum (Uncommon):"})," Melhorias moderadas"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Raro (Rare):"})," Requer pergaminho especial para desbloquear"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Épico (Epic):"})," Requer pergaminho épico para desbloquear"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Lendário (Legendary):"})," Os mais poderosos do jogo"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Consumíveis"}),r.jsx("p",{children:"Existem diferentes tipos de consumíveis:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Poções:"})," Recuperam HP ou Mana"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Antídotos:"})," Removem efeitos negativos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Elixires:"})," Proporcionam buffs temporários"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pergaminhos:"})," Desbloqueiam equipamentos especiais"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Crafting"}),r.jsx("p",{children:"Você pode criar itens usando materiais obtidos como drops dos monstros. Alguns consumíveis e equipamentos só podem ser obtidos através de crafting."})]})]})})})})]})]})}function Pc(){const t=Um(),e=zm(),s=gy(),a=$6(),n=I6();return{gameState:t.gameState,loading:t.loading,error:t.error,setGameState:t.setGameState,updateLoading:t.updateLoading,setError:t.setError,resetError:t.resetError,gameMessage:e.gameMessage,gameLog:e.gameLog,addGameLogMessage:e.addGameLogMessage,setGameMessage:e.setGameMessage,characters:s.characters,selectedCharacter:s.selectedCharacter,createCharacter:s.createCharacter,selectCharacter:s.selectCharacter,loadCharacterForHub:s.loadCharacterForHub,initializeBattle:s.initializeBattle,updatePlayerStats:s.updatePlayerStats,reloadCharacters:s.reloadCharacters,performAction:a.performAction,interactWithEvent:n.interactWithEvent,startGame:s.createCharacter,clearGameState:()=>{t.setGameState({mode:"menu",player:{id:"",user_id:"",name:"",level:1,xp:0,xp_next_level:150,gold:0,hp:50,max_hp:50,mana:20,max_mana:20,atk:10,def:5,speed:10,created_at:"",updated_at:"",isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:1,spells:[],consumables:[],potionUsedThisTurn:!1,active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},strength:10,dexterity:10,intelligence:10,wisdom:10,vitality:10,luck:10,critical_chance:0,critical_damage:110,double_attack_chance:0,magic_attack:0,magic_mastery:1,magic_damage_bonus:0},currentEnemy:null,currentFloor:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:1,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1})},returnToMenu:()=>{t.setGameState({...t.gameState,mode:"menu"})},saveProgress:async()=>{},updatePlayerConsumables:i=>{t.setGameState({...t.gameState,player:{...t.gameState.player,consumables:i}})}}}const JX=({isOpen:t,onClose:e,character:s,onStartFromCheckpoint:a})=>{const[n,i]=y.useState([]),[c,u]=y.useState(!1),[f,h]=y.useState(null);y.useEffect(()=>{t&&p()},[t,s.id]);const p=async()=>{u(!0);try{console.log(`[MapModal] Carregando checkpoints para personagem ${s.name} (ID: ${s.id})`),console.log(`[MapModal] Andar atual do personagem: ${s.floor}`);const w=await tt.getUnlockedCheckpoints(s.id);if(console.log("[MapModal] Resposta do CharacterService:",w),w.success&&w.data){if(console.log("[MapModal] Checkpoints carregados:",w.data),i(w.data),w.data.length>0){const N=w.data.find(C=>C.floor===s.floor),E=N?N.floor:w.data[w.data.length-1].floor;h(E),console.log(`[MapModal] Checkpoint selecionado por padrão: ${E}`)}}else console.error("[MapModal] Erro ao carregar checkpoints:",w.error),pe.error("Erro ao carregar checkpoints",{description:w.error})}catch(w){console.error("[MapModal] Erro ao carregar checkpoints:",w),pe.error("Erro ao carregar checkpoints")}finally{u(!1)}},g=async()=>{if(f===null){pe.error("Selecione um checkpoint");return}try{u(!0),a(f),e()}catch(w){console.error("Erro ao iniciar aventura:",w),pe.error("Erro ao iniciar aventura")}finally{u(!1)}},x=w=>w===1?r.jsx(pv,{className:"h-5 w-5"}):w>1&&(w-1)%10===0?r.jsx(ki,{className:"h-5 w-5"}):r.jsx(mv,{className:"h-5 w-5"}),b=w=>w===1?"bg-green-500":w>1&&(w-1)%10===0?"bg-yellow-500":"bg-blue-500",j=w=>w===1?"Início da aventura":w>1&&(w-1)%10===0?"Santuário Pós-Boss":"Checkpoint";return r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Qr,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(Mn,{children:[r.jsxs(Jr,{className:"flex items-center gap-2",children:[r.jsx(mv,{className:"h-6 w-6"}),"Mapa da Torre - Checkpoints Desbloqueados"]}),r.jsx(vc,{children:"Escolha de qual andar você deseja iniciar sua aventura. Você só pode acessar checkpoints que já alcançou antes."})]}),r.jsx("div",{className:"space-y-4",children:c?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(w=>r.jsxs($e,{className:`cursor-pointer transition-all hover:shadow-md ${f===w.floor?"ring-2 ring-primary bg-primary/5":"hover:bg-accent/50"}`,onClick:()=>h(w.floor),children:[r.jsx(ft,{className:"pb-2",children:r.jsxs(pt,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded-full text-white ${b(w.floor)}`,children:x(w.floor)}),w.description,f===w.floor&&r.jsx(xy,{className:"h-4 w-4 text-primary ml-auto"})]})}),r.jsxs(He,{className:"pt-0",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:j(w.floor)}),s.floor===w.floor&&r.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:"Posição Atual"})]})]},w.floor))}),r.jsx($e,{className:"bg-muted/30",children:r.jsxs(He,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Andar Atual:"}),r.jsx("span",{className:"font-bold",children:s.floor})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[r.jsx("span",{children:"Checkpoints Desbloqueados:"}),r.jsx("span",{className:"font-bold",children:n.length})]})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(de,{variant:"outline",onClick:e,className:"flex-1",disabled:c,children:"Cancelar"}),r.jsxs(de,{onClick:g,className:"flex-1",disabled:c||f===null,children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):r.jsx(pv,{className:"h-4 w-4 mr-2"}),"Iniciar Aventura"]})]})]})})]})})};var[wp,JW]=or("Tooltip",[Rc]),jp=Rc(),BR="TooltipProvider",eY=700,sy="tooltip.open",[tY,Vb]=wp(BR),VR=t=>{const{__scopeTooltip:e,delayDuration:s=eY,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=t,c=y.useRef(!0),u=y.useRef(!1),f=y.useRef(0);return y.useEffect(()=>{const h=f.current;return()=>window.clearTimeout(h)},[]),r.jsx(tY,{scope:e,isOpenDelayedRef:c,delayDuration:s,onOpen:y.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:y.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:y.useCallback(h=>{u.current=h},[]),disableHoverableContent:n,children:i})};VR.displayName=BR;var Md="Tooltip",[sY,Np]=wp(Md),qR=t=>{const{__scopeTooltip:e,children:s,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=t,f=Vb(Md,t.__scopeTooltip),h=jp(e),[p,g]=y.useState(null),x=Hr(),b=y.useRef(0),j=c??f.disableHoverableContent,w=u??f.delayDuration,N=y.useRef(!1),[E,C]=Ro({prop:a,defaultProp:n??!1,onChange:$=>{$?(f.onOpen(),document.dispatchEvent(new CustomEvent(sy))):f.onClose(),i==null||i($)},caller:Md}),S=y.useMemo(()=>E?N.current?"delayed-open":"instant-open":"closed",[E]),P=y.useCallback(()=>{window.clearTimeout(b.current),b.current=0,N.current=!1,C(!0)},[C]),R=y.useCallback(()=>{window.clearTimeout(b.current),b.current=0,C(!1)},[C]),D=y.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{N.current=!0,C(!0),b.current=0},w)},[w,C]);return y.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),r.jsx(Eb,{...h,children:r.jsx(sY,{scope:e,contentId:x,open:E,stateAttribute:S,trigger:p,onTriggerChange:g,onTriggerEnter:y.useCallback(()=>{f.isOpenDelayedRef.current?D():P()},[f.isOpenDelayedRef,D,P]),onTriggerLeave:y.useCallback(()=>{j?R():(window.clearTimeout(b.current),b.current=0)},[R,j]),onOpen:P,onClose:R,disableHoverableContent:j,children:s})})};qR.displayName=Md;var ay="TooltipTrigger",UR=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,n=Np(ay,s),i=Vb(ay,s),c=jp(s),u=y.useRef(null),f=_t(e,u,n.onTriggerChange),h=y.useRef(!1),p=y.useRef(!1),g=y.useCallback(()=>h.current=!1,[]);return y.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),r.jsx(pp,{asChild:!0,...c,children:r.jsx(We.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:f,onPointerMove:Ge(t.onPointerMove,x=>{x.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ge(t.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:Ge(t.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Ge(t.onFocus,()=>{h.current||n.onOpen()}),onBlur:Ge(t.onBlur,n.onClose),onClick:Ge(t.onClick,n.onClose)})})});UR.displayName=ay;var aY="TooltipPortal",[eZ,rY]=wp(aY,{forceMount:void 0}),bc="TooltipContent",zR=y.forwardRef((t,e)=>{const s=rY(bc,t.__scopeTooltip),{forceMount:a=s.forceMount,side:n="top",...i}=t,c=Np(bc,t.__scopeTooltip);return r.jsx(Va,{present:a||c.open,children:c.disableHoverableContent?r.jsx(FR,{side:n,...i,ref:e}):r.jsx(nY,{side:n,...i,ref:e})})}),nY=y.forwardRef((t,e)=>{const s=Np(bc,t.__scopeTooltip),a=Vb(bc,t.__scopeTooltip),n=y.useRef(null),i=_t(e,n),[c,u]=y.useState(null),{trigger:f,onClose:h}=s,p=n.current,{onPointerInTransitChange:g}=a,x=y.useCallback(()=>{u(null),g(!1)},[g]),b=y.useCallback((j,w)=>{const N=j.currentTarget,E={x:j.clientX,y:j.clientY},C=uY(E,N.getBoundingClientRect()),S=dY(E,C),P=fY(w.getBoundingClientRect()),R=mY([...S,...P]);u(R),g(!0)},[g]);return y.useEffect(()=>()=>x(),[x]),y.useEffect(()=>{if(f&&p){const j=N=>b(N,p),w=N=>b(N,f);return f.addEventListener("pointerleave",j),p.addEventListener("pointerleave",w),()=>{f.removeEventListener("pointerleave",j),p.removeEventListener("pointerleave",w)}}},[f,p,b,x]),y.useEffect(()=>{if(c){const j=w=>{const N=w.target,E={x:w.clientX,y:w.clientY},C=(f==null?void 0:f.contains(N))||(p==null?void 0:p.contains(N)),S=!hY(E,c);C?x():S&&(x(),h())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[f,p,c,h,x]),r.jsx(FR,{...t,ref:i})}),[oY,iY]=wp(Md,{isInside:!1}),lY=Z8("TooltipContent"),FR=y.forwardRef((t,e)=>{const{__scopeTooltip:s,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=t,f=Np(bc,s),h=jp(s),{onClose:p}=f;return y.useEffect(()=>(document.addEventListener(sy,p),()=>document.removeEventListener(sy,p)),[p]),y.useEffect(()=>{if(f.trigger){const g=x=>{const b=x.target;b!=null&&b.contains(f.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[f.trigger,p]),r.jsx($d,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:r.jsxs(Cb,{"data-state":f.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(lY,{children:a}),r.jsx(oY,{scope:s,isInside:!0,children:r.jsx(sG,{id:f.contentId,role:"tooltip",children:n||a})})]})})});zR.displayName=bc;var HR="TooltipArrow",cY=y.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,n=jp(s);return iY(HR,s).isInside?null:r.jsx(kb,{...n,...a,ref:e})});cY.displayName=HR;function uY(t,e){const s=Math.abs(e.top-t.y),a=Math.abs(e.bottom-t.y),n=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,a,n,i)){case i:return"left";case n:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function dY(t,e,s=5){const a=[];switch(e){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function fY(t){const{top:e,right:s,bottom:a,left:n}=t;return[{x:n,y:e},{x:s,y:e},{x:s,y:a},{x:n,y:a}]}function hY(t,e){const{x:s,y:a}=t;let n=!1;for(let i=0,c=e.length-1;i<e.length;c=i++){const u=e[i],f=e[c],h=u.x,p=u.y,g=f.x,x=f.y;p>a!=x>a&&s<(g-h)*(a-p)/(x-p)+h&&(n=!n)}return n}function mY(t){const e=t.slice();return e.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),pY(e)}function pY(t){if(t.length<=1)return t.slice();const e=[];for(let a=0;a<t.length;a++){const n=t[a];for(;e.length>=2;){const i=e[e.length-1],c=e[e.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))e.pop();else break}e.push(n)}e.pop();const s=[];for(let a=t.length-1;a>=0;a--){const n=t[a];for(;s.length>=2;){const i=s[s.length-1],c=s[s.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var gY=VR,xY=qR,vY=UR,GR=zR;const yY=gY,bY=xY,_Y=vY,XR=y.forwardRef(({className:t,sideOffset:e=4,...s},a)=>r.jsx(GR,{ref:a,sideOffset:e,className:Ve("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));XR.displayName=GR.displayName;function jn({value:t,baseValue:e,equipmentBonus:s=0,modifications:a=[],size:n="md",showTooltip:i=!1,label:c,icon:u,className:f=""}){const h=isNaN(t)||t===void 0||t===null?0:t,p=isNaN(e||0)||e===void 0||e===null?0:e||0,g=isNaN(s)||s===void 0?0:s,x=a.reduce((N,E)=>E.type==="flat"?N+(isNaN(E.value)?0:E.value):N+(p||h)*((isNaN(E.value)?0:E.value)/100),0),b=a.length>0,j={sm:"text-xs",md:"text-sm",lg:"text-base"},w=r.jsxs("div",{className:`inline-flex items-center gap-1 ${j[n]} ${f}`,children:[u&&r.jsx("span",{className:"inline-flex",children:u}),r.jsx("span",{className:`font-bold transition-all duration-300 ${b?"text-purple-400 animate-pulse drop-shadow-[0_0_6px_rgba(168,85,247,0.4)]":g>0?"text-green-400":""}`,children:Math.round(h)}),b&&r.jsxs("div",{className:"inline-flex items-center",children:[r.jsx("div",{className:"w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),r.jsxs("div",{className:"ml-1 text-purple-300 text-xs animate-bounce",children:[x>0?"+":"",Math.round(x)]})]}),c&&r.jsx("span",{className:"text-muted-foreground ml-1",children:c})]});return i?r.jsx(yY,{children:r.jsxs(bY,{children:[r.jsx(_Y,{asChild:!0,children:w}),r.jsx(XR,{className:"max-w-xs p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"font-semibold text-sm",children:"Detalhes da Estatística"}),e!==void 0&&!isNaN(p)&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Base:"}),r.jsx("span",{children:Math.round(p)})]}),g>0&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Equipamentos:"}),r.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[r.jsx(Io,{className:"h-3 w-3"}),Math.round(g)]})]}),a.length>0&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-medium text-purple-400 border-t border-border pt-2",children:"Efeitos Mágicos:"}),a.map((N,E)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-purple-300 flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),N.source_spell]}),r.jsxs("span",{className:"text-purple-400 flex items-center gap-1",children:[N.value>0?r.jsx(Ba,{className:"h-3 w-3"}):r.jsx(vv,{className:"h-3 w-3"}),N.value>0?"+":"",N.value,N.type==="percentage"?"%":""]})]},E)),r.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-purple-500/20",children:[r.jsx("span",{className:"text-purple-300",children:"Total Mágico:"}),r.jsxs("span",{className:"text-purple-400 font-medium",children:[x>0?"+":"",Math.round(x)]})]})]}),r.jsxs("div",{className:"flex justify-between text-xs font-medium pt-2 border-t border-border",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{className:`${b?"text-purple-400":"text-foreground"}`,children:Math.round(h)})]})]})})]})}):w}function wY({player:t}){const e=Pt(),[s,a]=y.useState(!1),[n,i]=y.useState(!1),c=async()=>{try{i(!0);const R=await tt.getUnlockedCheckpoints(t.id);if(!R.success||!R.data||R.data.length===0){console.error("Nenhum checkpoint encontrado");return}const $=R.data.sort((M,V)=>V.floor-M.floor)[0];console.log(`[QuickPlay] Iniciando do checkpoint: Andar ${$.floor} - ${$.description}`);const k=await tt.startFromCheckpoint(t.id,$.floor);if(!k.success){console.error("Erro ao iniciar do checkpoint:",k.error);return}console.log("[QuickPlay] Checkpoint configurado com sucesso. Redirecionando para batalha..."),e({to:"/game/play/hub/battle/$character",params:{character:t.id},search:{character:t.id}})}catch(R){console.error("Erro no início rápido:",R)}finally{i(!1)}},f=(R=>R<=1?0:Math.floor(100*Math.pow(1.5,R-2)))(t.level),h=t.xp_next_level,p=t.xp-f,g=h-f,x=Math.max(0,Math.min(100,p/g*100)),b=t.hp/t.max_hp*100,j=t.mana/t.max_mana*100,w=[{name:"FOR",fullName:"Força",value:t.strength||10,icon:At,color:"text-red-400"},{name:"AGI",fullName:"Agilidade",value:t.dexterity||10,icon:Ct,color:"text-green-400"},{name:"INT",fullName:"Inteligência",value:t.intelligence||10,icon:lt,color:"text-blue-400"},{name:"SAB",fullName:"Sabedoria",value:t.wisdom||10,icon:jt,color:"text-purple-400"},{name:"VIT",fullName:"Vitalidade",value:t.vitality||10,icon:cs,color:"text-pink-400"},{name:"SOR",fullName:"Sorte",value:t.luck||10,icon:ki,color:"text-yellow-400"}],N=()=>b>=70?"bg-green-500":b>=40?"bg-yellow-500":b>=20?"bg-orange-500":"bg-red-500",E=()=>j>=70?"bg-blue-500":j>=40?"bg-cyan-500":j>=20?"bg-indigo-500":"bg-purple-500",C=R=>{switch(R){case"sword_mastery":return r.jsx(At,{className:"h-4 w-4 text-red-400"});case"axe_mastery":return r.jsx(tI,{className:"h-4 w-4 text-orange-400"});case"blunt_mastery":return r.jsx(Ni,{className:"h-4 w-4 text-yellow-400"});case"defense_mastery":return r.jsx(yt,{className:"h-4 w-4 text-blue-400"});case"magic_mastery":return r.jsx(lt,{className:"h-4 w-4 text-purple-400"});default:return r.jsx(ta,{className:"h-4 w-4 text-gray-400"})}},S=R=>{switch(R){case"sword_mastery":return"Maestria com Espadas";case"axe_mastery":return"Maestria com Machados";case"blunt_mastery":return"Maestria com Armas Pesadas";case"defense_mastery":return"Maestria em Defesa";case"magic_mastery":return"Maestria Mágica";default:return R}},P=[{key:"sword_mastery",level:t.sword_mastery||1,xp:t.sword_mastery_xp||0},{key:"axe_mastery",level:t.axe_mastery||1,xp:t.axe_mastery_xp||0},{key:"blunt_mastery",level:t.blunt_mastery||1,xp:t.blunt_mastery_xp||0},{key:"defense_mastery",level:t.defense_mastery||1,xp:t.defense_mastery_xp||0},{key:"magic_mastery",level:t.magic_mastery||1,xp:t.magic_mastery_xp||0}].filter(R=>R.level>1||R.xp>0);return r.jsxs($e,{className:"w-full bg-slate-900/80 border-slate-700 shadow-xl",children:[r.jsx(ft,{className:"pb-3",children:r.jsxs(pt,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-slate-700 rounded-lg",children:r.jsx(dm,{className:"h-5 w-5 text-slate-300"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:t.name}),r.jsx("p",{className:"text-sm text-slate-400",children:"Aventureiro"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[r.jsxs(de,{onClick:c,disabled:n,size:"sm",className:"quick-play-button relative overflow-hidden bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 hover:from-violet-500 hover:via-purple-500 hover:to-indigo-500 text-white border border-violet-500/20 shadow-lg transition-all duration-300 hover:shadow-violet-500/25 hover:shadow-xl hover:-translate-y-0.5 flex-shrink-0 group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:transform-none",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600/50 via-purple-600/50 to-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),!n&&r.jsx("div",{className:"quick-start-indicator absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full shadow-sm shadow-amber-400/50"}),r.jsx(pv,{className:`h-3 w-3 mr-1.5 relative z-10 transition-transform duration-300 ${n?"animate-spin":"group-hover:scale-110 group-hover:drop-shadow-lg"}`}),r.jsx("span",{className:"relative z-10 font-medium tracking-wide",children:n?"Iniciando...":"Jogar"}),!n&&r.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-500",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 group-hover:animate-pulse"})})]}),r.jsxs(ze,{variant:"outline",className:"border-amber-500 text-amber-400 bg-amber-500/10 flex-shrink-0",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Nível ",t.level]}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"text-slate-400 hover:text-slate-200 flex-shrink-0",children:s?r.jsx(mc,{className:"h-4 w-4"}):r.jsx(To,{className:"h-4 w-4"})})]})]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Status"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(cs,{className:"h-4 w-4 text-red-400"}),"HP",t.hp<t.max_hp&&r.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"})]}),r.jsxs("span",{className:"text-slate-400",children:[t.hp,"/",t.max_hp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:b,className:"h-2"}),r.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${N()}`,style:{width:`${b}%`}})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(lt,{className:"h-4 w-4 text-blue-400"}),"Mana"]}),r.jsxs("span",{className:"text-slate-400",children:[t.mana,"/",t.max_mana]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:j,className:"h-2"}),r.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${E()}`,style:{width:`${j}%`}})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(jt,{className:"h-4 w-4 text-yellow-400"}),"XP"]}),r.jsxs("span",{className:"text-slate-400",children:[p.toLocaleString(),"/",g.toLocaleString()]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:x,className:"h-2"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${x}%`}})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Combat Stats"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(At,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-muted-foreground",children:"ATK"})]}),r.jsx("span",{className:"font-bold text-red-400",children:r.jsx(jn,{value:t.atk,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,className:"text-red-400",size:"sm",showTooltip:!0})})]}),t.magic_attack&&t.magic_attack>0&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-muted-foreground",children:"M.ATK"})]}),r.jsx("span",{className:"font-bold text-purple-400",children:t.magic_attack})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-muted-foreground",children:"DEF"})]}),r.jsx("span",{className:"font-bold text-blue-400",children:r.jsx(jn,{value:t.def,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,className:"text-blue-400",size:"sm",showTooltip:!0})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-muted-foreground",children:"SPD"})]}),r.jsx("span",{className:"font-bold text-yellow-400",children:r.jsx(jn,{value:t.speed,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,className:"text-yellow-400",size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-muted-foreground",children:"CRIT"})]}),r.jsxs("span",{className:"font-bold text-amber-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})]})]}),r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ar,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Gold"})]}),r.jsx("p",{className:"text-lg font-bold text-yellow-400",children:t.gold.toLocaleString("pt-BR")})]})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Atributos"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map(R=>{const D=R.icon;return r.jsx("div",{className:"bg-slate-800/50 p-2 rounded-lg border border-slate-700 hover:bg-slate-700/50 transition-colors",title:R.fullName,children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx(D,{className:`h-3 w-3 ${R.color}`}),r.jsx("span",{className:"text-xs font-medium text-slate-400",children:R.name}),r.jsx("span",{className:`text-sm font-bold ${R.color}`,children:R.value})]})},R.name)})}),!!(t.critical_chance||t.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[!!t.critical_chance&&r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-orange-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Chance Crítica"})]}),r.jsxs("p",{className:"text-sm font-bold text-orange-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})}),t.critical_damage&&r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ta,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Dano Crítico"})]}),r.jsxs("p",{className:"text-sm font-bold text-red-400",children:[(t.critical_damage||0).toFixed(0),"%"]})]})})]})]})]}),s&&r.jsxs("div",{className:"border-t border-slate-700 pt-4 space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Habilidades de Combate"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:P.map(R=>{const D=R.level*100,$=(R.level-1)*100,k=R.xp-$,M=D-$,V=Math.max(0,Math.min(100,k/M*100));return r.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"flex items-center justify-center",children:C(R.key)}),r.jsx("span",{className:"text-xs font-medium text-slate-400 text-center",children:S(R.key)}),r.jsxs(ze,{variant:"outline",className:"border-current bg-transparent text-xs",children:["Nv. ",R.level]}),R.xp>0&&r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"w-full h-1 bg-slate-600 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${V}%`}})}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:[k,"/",M," XP"]})]})]})},R.key)})})]})]})]})}function jY({title:t,description:e,icon:s,onClick:a,badge:n,badgeColor:i="secondary",accent:c,isPrimary:u=!1}){return r.jsx($e,{className:`group relative overflow-hidden border-slate-700 bg-slate-900/80 hover:bg-slate-800/80 transition-all duration-300 hover:border-slate-600 ${u?"ring-2 ring-red-600/30":""}`,children:r.jsxs(de,{variant:"ghost",className:"w-full h-full p-3 flex flex-col items-center justify-center space-y-2 hover:bg-transparent min-h-[120px]",onClick:a,children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`p-3 rounded-lg bg-slate-800 group-hover:bg-slate-700 transition-colors duration-300 ${c}`,children:r.jsx(s,{className:"h-5 w-5 text-slate-300 group-hover:text-white transition-colors duration-300"})}),n&&r.jsx(ze,{variant:i,className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs font-bold bg-red-600 text-white border-red-500",children:n})]}),r.jsxs("div",{className:"text-center space-y-1 max-w-full",children:[r.jsx("h3",{className:"font-semibold text-sm text-slate-200 group-hover:text-white transition-colors duration-300 leading-tight",children:t}),r.jsx("p",{className:"text-xs text-slate-400 group-hover:text-slate-300 transition-colors duration-300 leading-tight px-1 break-words",children:e})]})]})})}function NY({player:t,onStartAdventure:e,onOpenMap:s,onOpenCharacterStats:a,onOpenShop:n,onOpenInventory:i,onOpenEquipment:c,onOpenSpells:u,onOpenCrafting:f,onOpenCemetery:h,onReturnToSelection:p}){const g=[{title:"Entrar na Torre",description:"Nova aventura",icon:yy,onClick:e,accent:"border-red-600/30",isPrimary:!0},{title:"Mapa da Torre",description:"Usar checkpoint",icon:mv,onClick:s,accent:"border-blue-600/30"},{title:"Atributos",description:"Evoluir personagem",icon:Ba,onClick:a,badge:t.attribute_points&&t.attribute_points>0?t.attribute_points:void 0,badgeColor:"destructive",accent:"border-purple-600/30"},{title:"Grimório",description:"Gerenciar magias",icon:lt,onClick:u,accent:"border-violet-600/30"},{title:"Loja",description:"Comprar itens",icon:um,onClick:n,accent:"border-green-600/30"},{title:"Inventário",description:"Consumíveis",icon:aI,onClick:i,accent:"border-orange-600/30"},{title:"Equipamentos",description:"Armas e armaduras",icon:yt,onClick:c,accent:"border-amber-600/30"},{title:"Forja",description:"Crafting de itens",icon:Ni,onClick:f,accent:"border-cyan-600/30"},{title:"Cemitério",description:"Personagens mortos",icon:Js,onClick:h,accent:"border-red-600/30"},{title:"Trocar",description:"Outro personagem",icon:ds,onClick:p,accent:"border-slate-600/30"}];return r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-10 gap-3",children:g.map((x,b)=>r.jsx(jY,{title:x.title,description:x.description,icon:x.icon,onClick:x.onClick,badge:x.badge,badgeColor:x.badgeColor,accent:x.accent,isPrimary:x.isPrimary},b))})}function SY({player:t,showHealNotification:e,healInfo:s,onDismissHealNotification:a}){const n=t.attribute_points&&t.attribute_points>0;return!e&&!n?null:r.jsxs("div",{className:"space-y-3",children:[n&&r.jsx($e,{className:"bg-amber-950/50 border-amber-700/50 shadow-lg backdrop-blur-sm",children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-600/20 rounded-lg",children:r.jsx(jt,{className:"h-4 w-4 text-amber-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-amber-200 text-sm",children:"Pontos de Atributo Disponíveis"}),r.jsxs("div",{className:"text-xs text-amber-300/80",children:["Você tem"," ",r.jsx(ze,{variant:"outline",className:"mx-1 text-amber-200 bg-amber-600/20 border-amber-500/50 text-xs px-1.5 py-0.5",children:t.attribute_points}),'ponto(s) para distribuir em "Atributos".']})]}),r.jsx(wC,{className:"h-4 w-4 text-amber-500 animate-pulse"})]})})}),e&&s&&r.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in slide-in-from-top-2 duration-500",children:r.jsx($e,{className:"bg-emerald-950/80 border-emerald-700/50 shadow-xl backdrop-blur-md",children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-600/20 rounded-lg",children:r.jsx(cs,{className:"h-4 w-4 text-emerald-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"font-semibold text-emerald-200 text-sm",children:[s.character," foi curado!"]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-300",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"font-mono bg-emerald-900/50 px-2 py-0.5 rounded text-xs",children:[s.oldHp," → ",s.newHp]}),r.jsxs(ze,{variant:"outline",className:"text-emerald-300 border-emerald-500/50 bg-emerald-600/20 text-xs px-1.5 py-0.5",children:["+",s.newHp-s.oldHp]})]})]}),r.jsx(de,{variant:"ghost",size:"sm",onClick:a,className:"h-6 w-6 p-0 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-800/50",children:r.jsx(Bi,{className:"h-3 w-3"})})]})})})})]})}const YR=Yt("/_authenticated/game/play/hub")({component:EY,validateSearch:t=>({character:t.character||""})});function EY(){const t=$i(),{character:e}=YR.useSearch();return t.pathname==="/game/play/hub"?r.jsx(CY,{characterId:e}):r.jsx($o,{})}function CY({characterId:t}){const e=Pt(),s=Pc(),{gameState:a,loadCharacterForHub:n}=s,{player:i}=a,[c,u]=y.useState(!0),[f,h]=y.useState(!1),[p,g]=y.useState(!1),[x,b]=y.useState(!1),[j,w]=y.useState(null);if(console.log("[GameHub] Estado atual completo:",{player:{id:i.id,name:i.name,level:i.level,gold:i.gold,floor:i.floor,hp:i.hp,max_hp:i.max_hp},characterId:t,gameMode:a.mode,hasLoadCharacterForHub:typeof n=="function",gameContextKeys:Object.keys(s)}),y.useEffect(()=>{(async()=>{if(!t){console.log("[GameHub] Sem characterId, redirecionando..."),e({to:"/game/play"});return}if(f&&i.id===t&&i.name&&i.level>0){console.log("[GameHub] Personagem já carregado corretamente:",i.name),u(!1);return}try{console.log("[GameHub] Carregando personagem:",t),u(!0);const S=await tt.getCharacterForGame(t);if(S.success&&S.data){console.log("[GameHub] Personagem carregado com sucesso:",{name:S.data.name,level:S.data.level,gold:S.data.gold,floor:S.data.floor,hp:S.data.hp,max_hp:S.data.max_hp});const P=sessionStorage.getItem(`player_${t}`);if(P)try{const R=JSON.parse(P),D=S.data.hp-R.hp,$=D/S.data.max_hp*100;D>0&&$>=5&&(w({oldHp:R.hp,newHp:S.data.hp,character:S.data.name}),b(!0),setTimeout(()=>{b(!1)},5e3))}catch(R){console.warn("[GameHub] Erro ao processar cache:",R)}sessionStorage.setItem(`player_${t}`,JSON.stringify(S.data)),await n(S.data),h(!0),console.log("[GameHub] loadCharacterForHub executado, estado após carregamento:",a.player)}else console.error("[GameHub] Erro na resposta do serviço:",S.error),pe.error("Erro ao carregar personagem",{description:S.error}),e({to:"/game/play"})}catch(S){console.error("[GameHub] Erro ao carregar personagem:",S),pe.error("Erro ao carregar personagem"),e({to:"/game/play"})}finally{u(!1)}})()},[t]),c)return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-950",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-500"})});const N=async()=>{try{await tt.updateCharacterFloor(i.id,1),e({to:"/game/play/hub/battle/$character",params:{character:i.id},search:{character:i.id}})}catch(C){console.error("Erro ao iniciar do começo:",C),pe.error("Erro ao iniciar aventura")}},E=async C=>{try{const S=await tt.startFromCheckpoint(i.id,C);S.success?e({to:"/game/play/hub/battle/$character",params:{character:i.id},search:{character:i.id}}):pe.error("Erro ao iniciar do checkpoint",{description:S.error})}catch(S){console.error("Erro ao iniciar do checkpoint:",S),pe.error("Erro ao iniciar do checkpoint")}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 to-slate-900 p-4",children:r.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-4",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>e({to:"/game/play"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Trocar Personagem"}),r.jsx("span",{className:"sm:hidden",children:"Trocar"})]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:["Hub de ",i.name||"Carregando..."]}),r.jsxs("p",{className:"text-sm sm:text-base text-slate-300",children:["Andar ",Math.max(1,i.floor||1)," • Nível ",i.level||1," •"," ",(i.gold||0).toLocaleString("pt-BR")," Gold"]})]})]})}),r.jsx(SY,{player:i,showHealNotification:x,healInfo:j,onDismissHealNotification:()=>b(!1)}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(wY,{player:i}),r.jsx(NY,{player:i,onStartAdventure:N,onOpenMap:()=>g(!0),onOpenCharacterStats:()=>window.location.href=`/game/play/hub/character-stats?character=${i.id}`,onOpenShop:()=>window.location.href=`/game/play/hub/shop?character=${i.id}`,onOpenInventory:()=>window.location.href=`/game/play/hub/inventory?character=${i.id}`,onOpenEquipment:()=>window.location.href=`/game/play/hub/equipment?character=${i.id}`,onOpenSpells:()=>window.location.href=`/game/play/hub/spells?character=${i.id}`,onOpenCrafting:()=>window.location.href=`/game/play/hub/crafting?character=${i.id}`,onOpenCemetery:()=>window.location.href="/game/play/hub/cemetery",onReturnToSelection:()=>e({to:"/game/play"})})]}),r.jsx(JX,{isOpen:p,onClose:()=>g(!1),character:{id:i.id,floor:i.floor},onStartFromCheckpoint:E})]})})}const KR=Yt("/_authenticated/game/play/hub/spells")({component:kY,validateSearch:t=>({character:t.character||""})});function kY(){const t=Pt(),{character:e}=KR.useSearch(),[s,a]=y.useState(null),[n,i]=y.useState([]),[c,u]=y.useState(null),[f,h]=y.useState({slot1:null,slot2:null,slot3:null}),[p,g]=y.useState({slot1:null,slot2:null,slot3:null}),[x,b]=y.useState(!0),[j,w]=y.useState(!1),[N,E]=y.useState(""),[C,S]=y.useState("all"),[P,R]=y.useState("all");y.useEffect(()=>{if(!e){pe.error("Personagem não especificado"),t({to:"/game/play"});return}D()},[e]);const D=async()=>{if(e){b(!0);try{const A=await tt.getCharacter(e);if(!A.success||!A.data)throw new Error("Erro ao carregar personagem");a(A.data);const I=await Zs.getCharacterAvailableSpells(e);if(!I.success||!I.data)throw new Error("Erro ao carregar magias");i(I.data);const q=await Zs.getCharacterSpellStats(e);q.success&&q.data&&u(q.data);const K=I.data.filter(X=>X.is_equipped),L={slot1:K.find(X=>X.slot_position===1)||null,slot2:K.find(X=>X.slot_position===2)||null,slot3:K.find(X=>X.slot_position===3)||null};h(L),g(L)}catch(A){console.error("Erro ao carregar dados:",A),pe.error("Erro ao carregar dados das magias")}finally{b(!1)}}},$=(A,I)=>{h(q=>{const K={...q};return Object.keys(K).forEach(L=>{var ne;const X=L;((ne=K[X])==null?void 0:ne.id)===A.id&&(K[X]=null)}),K[I]=A,K})},k=A=>{h(I=>({...I,[A]:null}))},M=async()=>{var A,I,q;if(e){w(!0);try{const K=[((A=f.slot1)==null?void 0:A.id)||null,((I=f.slot2)==null?void 0:I.id)||null,((q=f.slot3)==null?void 0:q.id)||null],L=await Zs.setCharacterSpells(e,K);if(!L.success)throw new Error(L.error||"Erro ao salvar seleção");g({...f}),pe.success("Seleção de magias salva com sucesso!"),await D()}catch(K){console.error("Erro ao salvar seleção:",K),pe.error("Erro ao salvar seleção de magias")}finally{w(!1)}}},V=A=>({damage:r.jsx(ta,{className:"h-5 w-5"}),heal:r.jsx(cs,{className:"h-5 w-5"}),buff:r.jsx(yt,{className:"h-5 w-5"}),debuff:r.jsx(Js,{className:"h-5 w-5"}),dot:r.jsx(Hm,{className:"h-5 w-5"}),hot:r.jsx(lt,{className:"h-5 w-5"})})[A]||r.jsx(Ct,{className:"h-5 w-5"}),Y=A=>({damage:"text-red-500 border-red-500/30 bg-red-500/5",heal:"text-green-500 border-green-500/30 bg-green-500/5",buff:"text-blue-500 border-blue-500/30 bg-blue-500/5",debuff:"text-purple-500 border-purple-500/30 bg-purple-500/5",dot:"text-orange-500 border-orange-500/30 bg-orange-500/5",hot:"text-emerald-500 border-emerald-500/30 bg-emerald-500/5"})[A]||"text-gray-500 border-gray-500/30 bg-gray-500/5",B=A=>A<=15?"early":A<=35?"mid":"high",z=A=>{const I=B(A);return{early:"text-green-400",mid:"text-yellow-400",high:"text-red-400"}[I]},Q=n.filter(A=>{const I=A.name.toLowerCase().includes(N.toLowerCase())||A.description.toLowerCase().includes(N.toLowerCase()),q=C==="all"||A.effect_type===C,K=P==="all"||B(A.unlocked_at_level)===P;return I&&q&&K}),H=JSON.stringify(f)!==JSON.stringify(p);return x?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Carregando magias..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(lt,{className:"h-8 w-8 text-purple-500"}),"Grimório de Magias"]}),r.jsxs("p",{className:"text-muted-foreground",children:["Gerencie as magias de"," ",r.jsx("span",{className:"font-medium text-primary",children:s.name})]})]})]}),H&&r.jsx(de,{onClick:M,disabled:j,size:"lg",className:"bg-purple-600 hover:bg-purple-700",children:j?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(vy,{className:"h-4 w-4 mr-2"}),"Salvar Seleção"]})})]}),c&&r.jsxs($e,{className:"mb-6",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"h-5 w-5"}),"Estatísticas de Magia"]})}),r.jsx(He,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-500",children:c.total_available}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Disponíveis"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:[c.total_equipped,"/3"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Equipadas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:s.level}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Nível Atual"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-500",children:c.highest_level_unlocked}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Máximo Desbloqueado"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs($e,{className:"lg:col-span-2",children:[r.jsxs(ft,{children:[r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(ki,{className:"h-5 w-5"}),"Seleção de Magias (Máximo 3)"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ps,{placeholder:"Buscar magias...",value:N,onChange:A=>E(A.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:C,onChange:A=>S(A.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Tipos"}),r.jsx("option",{value:"damage",children:"Dano"}),r.jsx("option",{value:"heal",children:"Cura"}),r.jsx("option",{value:"buff",children:"Benefício"}),r.jsx("option",{value:"debuff",children:"Maldição"}),r.jsx("option",{value:"dot",children:"Dano Contínuo"}),r.jsx("option",{value:"hot",children:"Cura Contínua"})]}),r.jsxs("select",{value:P,onChange:A=>R(A.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Níveis"}),r.jsx("option",{value:"early",children:"Iniciante (1-15)"}),r.jsx("option",{value:"mid",children:"Intermediário (16-35)"}),r.jsx("option",{value:"high",children:"Avançado (36-50)"})]})]})]})]}),r.jsx(He,{children:r.jsx(ec,{className:"h-[600px]",children:r.jsxs("div",{className:"grid gap-3",children:[Q.map(A=>{const I=Object.values(f).some(K=>(K==null?void 0:K.id)===A.id),q=A.unlocked_at_level<=s.level;return r.jsx($e,{className:`transition-all cursor-pointer ${I?"ring-2 ring-purple-500 bg-purple-500/10":q?"hover:bg-accent/50":"opacity-50 cursor-not-allowed"} ${Y(A.effect_type)}`,onClick:()=>{if(q){if(I){Object.keys(f).forEach(K=>{var X;const L=K;((X=f[L])==null?void 0:X.id)===A.id&&k(L)});return}f.slot1?f.slot2?f.slot3?pe.warning("Você já selecionou 3 magias! Remova uma para adicionar outra."):$(A,"slot3"):$(A,"slot2"):$(A,"slot1")}},children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${Y(A.effect_type)}`,children:V(A.effect_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold truncate",children:A.name}),I&&r.jsx(ze,{variant:"secondary",className:"bg-purple-500/20 text-purple-400",children:"Selecionada"}),!q&&r.jsxs(ze,{variant:"destructive",className:"text-xs",children:["Nível ",A.unlocked_at_level]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:A.description}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(hv,{className:"h-3 w-3"}),A.mana_cost," Mana"]}),r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(cm,{className:"h-3 w-3"}),A.cooldown,"T CD"]}),r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(ta,{className:"h-3 w-3"}),A.effect_value]}),r.jsxs(ze,{variant:"outline",className:`flex items-center gap-1 ${z(A.unlocked_at_level)}`,children:[r.jsx(jt,{className:"h-3 w-3"}),"Nível ",A.unlocked_at_level]})]})]})]})})},A.id)}),Q.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(lt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Nenhuma magia encontrada com os filtros selecionados"})]})]})})})]}),r.jsxs($e,{children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"Magias Selecionadas"]})}),r.jsxs(He,{className:"space-y-4",children:[[1,2,3].map(A=>{const I=`slot${A}`,q=f[I];return r.jsxs($e,{className:`p-4 border-2 border-dashed transition-all ${q?`border-solid ${Y(q.effect_type)}`:"border-muted-foreground/20 hover:border-muted-foreground/40"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Slot ",A," (Tecla ",A,")"]}),q&&r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>k(I),className:"h-6 w-6 p-0 hover:bg-red-500/10 hover:text-red-500",children:r.jsx(Bi,{className:"h-3 w-3"})})]}),q?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded ${Y(q.effect_type)}`,children:V(q.effect_type)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:q.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:Zs.translateEffectType(q.effect_type)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(hv,{className:"h-3 w-3"}),r.jsx("span",{children:q.mana_cost})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cm,{className:"h-3 w-3"}),r.jsxs("span",{children:[q.cooldown,"T"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ta,{className:"h-3 w-3"}),r.jsx("span",{children:q.effect_value})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3"}),r.jsxs("span",{children:["Nv ",q.unlocked_at_level]})]})]})]}):r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(lt,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),r.jsx("p",{className:"text-xs",children:"Clique em uma magia para equipar"})]})]},A)}),H&&r.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-400 flex items-center gap-2",children:[r.jsx("span",{className:"h-2 w-2 bg-yellow-400 rounded-full animate-pulse"}),"Você tem alterações não salvas"]})})]})]})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground",children:"Personagem não encontrado"}),r.jsx(de,{onClick:()=>t({to:"/game/play"}),className:"mt-4",children:"Voltar"})]})})}var AY="Separator",cE="horizontal",TY=["horizontal","vertical"],WR=y.forwardRef((t,e)=>{const{decorative:s,orientation:a=cE,...n}=t,i=RY(a)?a:cE,u=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(We.div,{"data-orientation":i,...u,...n,ref:e})});WR.displayName=AY;function RY(t){return TY.includes(t)}var ZR=WR;const ry=y.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...a},n)=>r.jsx(ZR,{ref:n,decorative:s,orientation:e,className:Ve("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));ry.displayName=ZR.displayName;var QR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uE=he.createContext&&he.createContext(QR),MY=["attr","size","title"];function PY(t,e){if(t==null)return{};var s=DY(t,e),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function DY(t,e){if(t==null)return{};var s={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;s[a]=t[a]}return s}function Rm(){return Rm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Rm.apply(this,arguments)}function dE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,a)}return s}function Mm(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?dE(Object(s),!0).forEach(function(a){OY(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):dE(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}function OY(t,e,s){return e=$Y(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function $Y(t){var e=LY(t,"string");return typeof e=="symbol"?e:e+""}function LY(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JR(t){return t&&t.map((e,s)=>he.createElement(e.tag,Mm({key:s},e.attr),JR(e.child)))}function Sp(t){return e=>he.createElement(IY,Rm({attr:Mm({},t.attr)},e),JR(t.child))}function IY(t){var e=s=>{var{attr:a,size:n,title:i}=t,c=PY(t,MY),u=n||s.size||"1em",f;return s.className&&(f=s.className),t.className&&(f=(f?f+" ":"")+t.className),he.createElement("svg",Rm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,c,{className:f,style:Mm(Mm({color:t.color||s.color},s.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&he.createElement("title",null,i),t.children)};return uE!==void 0?he.createElement(uE.Consumer,null,s=>e(s)):e(QR)}function fE(t){return Sp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(t)}function hE(t){return Sp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(t)}function mE(t){return Sp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function BY(t){return Sp({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const qb=({characterId:t,newEquipment:e,slotType:s,currentEquipment:a,showTitle:n=!0,compact:i=!1})=>{const[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(null);y.useEffect(()=>{(async()=>{h(!0),g(null);try{if(a!==void 0){const N=YL(a,e);u(N)}else{const N=await Ft.compareEquipmentStats(t,e.id,s);if(N.success&&N.data){const E=N.data.map(C=>({stat_name:C.stat_name,current_value:C.current_value,new_value:C.new_value,difference:C.difference,is_improvement:C.is_improvement}));u(E)}else g(N.error||"Erro ao comparar equipamentos")}}catch(N){console.error("Erro ao carregar comparação:",N),g("Erro ao carregar comparação")}finally{h(!1)}})()},[t,e.id,s,a]);const x=(w,N)=>N===0?r.jsx(mE,{className:"text-gray-400"}):w?r.jsx(hE,{className:"text-green-500"}):r.jsx(fE,{className:"text-red-500"}),b=(w,N)=>w===0?"":`${N?"+":""}${w.toFixed(w%1===0?0:2)}`,j=(w,N)=>N===0?"text-gray-400":w?"text-green-500":"text-red-500";return f?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(BY,{className:"animate-spin text-blue-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Carregando comparação..."})]})}):p?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-red-50 border-red-200`,children:r.jsx("p",{className:"text-sm text-red-600",children:p})}):c.length===0?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:r.jsx("p",{className:"text-sm text-gray-600",children:a===null?"Nenhum equipamento equipado atualmente":"Nenhuma mudança nos atributos"})}):r.jsxs("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-white`,children:[n&&r.jsx("h4",{className:`${i?"text-sm":"text-base"} font-semibold text-gray-800 mb-2`,children:"Comparação de Atributos"}),r.jsx("div",{className:"space-y-1",children:c.map((w,N)=>r.jsxs("div",{className:`flex items-center justify-between ${i?"text-xs":"text-sm"} py-1`,children:[r.jsxs("span",{className:"text-gray-700 font-medium",children:[w.stat_name,":"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-gray-600",children:w.current_value.toFixed(w.current_value%1===0?0:2)}),r.jsxs("div",{className:"flex items-center space-x-1",children:[x(w.is_improvement,w.difference),r.jsx("span",{className:j(w.is_improvement,w.difference),children:b(w.difference,w.is_improvement)})]}),r.jsx("span",{className:"text-gray-800 font-semibold",children:w.new_value.toFixed(w.new_value%1===0?0:2)})]})]},N))}),!i&&r.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(hE,{className:"text-green-500"}),r.jsx("span",{children:"Melhoria"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(fE,{className:"text-red-500"}),r.jsx("span",{children:"Redução"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(mE,{className:"text-gray-400"}),r.jsx("span",{children:"Sem mudança"})]})]})})]})},VY=({character:t,availableEquipment:e,availableConsumables:s,onEquipmentPurchase:a,onConsumablePurchase:n,onOpenInventory:i})=>{const[c,u]=y.useState("equipment"),[f,h]=y.useState(null),[p,g]=y.useState("all"),[x,b]=y.useState("all"),j=e.filter(D=>p==="all"?!0:D.type===p),w=s.filter(D=>x==="all"?!0:D.type===x),N=D=>{const $={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return $[D]||$.common},E=D=>{switch(D){case"weapon":return r.jsx(At,{className:"h-4 w-4 text-red-400"});case"armor":return r.jsx(yt,{className:"h-4 w-4 text-blue-400"});case"accessory":return r.jsx(ar,{className:"h-4 w-4 text-purple-400"});default:return r.jsx(ua,{className:"h-4 w-4 text-slate-400"})}},C=D=>{switch(D){case"potion":return r.jsx(lt,{className:"h-4 w-4 text-blue-500"});case"antidote":return r.jsx(yt,{className:"h-4 w-4 text-green-500"});case"buff":return r.jsx(Ct,{className:"h-4 w-4 text-purple-500"});default:return r.jsx(ua,{className:"h-4 w-4"})}},S=D=>{const $=t.gold>=D.price,k=t.level>=D.level_requirement,M=$&&k&&D.is_unlocked,V=(f==null?void 0:f.id)===D.id;return r.jsx($e,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${V?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${M?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(D),children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:E(D.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:D.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ze,{variant:"outline",className:`text-xs border ${N(D.rarity)}`,children:D.rarity}),D.rarity==="legendary"&&r.jsx(jt,{className:"h-3 w-3 text-amber-400 animate-pulse"}),D.rarity==="epic"&&r.jsx(lt,{className:"h-3 w-3 text-purple-400"})]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:"text-xs font-medium text-amber-300",children:D.price})]})]})]})})},D.id)},P=D=>{const $=t.gold>=D.price,k=t.level>=(D.level_requirement||1),M=$&&k,V=(f==null?void 0:f.id)===D.id;return r.jsx($e,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${V?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${M?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(D),children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:C(D.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:D.name}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:D.type==="potion"?`+${D.effect_value}`:D.type==="antidote"?"Remove debuffs":`+${D.effect_value} por 3 turnos`}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:"text-xs font-medium text-amber-300",children:D.price})]})]})]})})},D.id)},R=()=>{if(!f)return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ua,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um item para ver os detalhes"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em qualquer item da lista para visualizar suas informações completas"})]})});const D="atk_bonus"in f,$=f;if(D){const k=$,M=t.gold>=k.price,V=t.level>=k.level_requirement,Y=M&&V&&k.is_unlocked;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:E(k.type)}),r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:k.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ze,{className:`border ${N(k.rarity)}`,children:k.rarity}),r.jsx("span",{className:"text-sm text-slate-400",children:k.type==="weapon"?"Arma":k.type==="armor"?"Armadura":"Acessório"})]})]}),r.jsx(ry,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrição"}),r.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:k.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3 text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.atk_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-900/30 border border-red-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(At,{className:"h-4 w-4 text-red-400"}),r.jsxs("span",{className:"text-sm text-red-300 font-medium",children:["+",k.atk_bonus]})]}),k.def_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-900/30 border border-blue-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(yt,{className:"h-4 w-4 text-blue-400"}),r.jsxs("span",{className:"text-sm text-blue-300 font-medium",children:["+",k.def_bonus]})]}),k.mana_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-900/30 border border-purple-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(ar,{className:"h-4 w-4 text-purple-400"}),r.jsxs("span",{className:"text-sm text-purple-300 font-medium",children:["+",k.mana_bonus]})]}),k.speed_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-900/30 border border-amber-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(Ct,{className:"h-4 w-4 text-amber-400"}),r.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["+",k.speed_bonus]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Comparação com Equipamento Atual"}),r.jsx(qb,{characterId:t.id,newEquipment:k,slotType:k.type,showTitle:!1,compact:!0})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Requisitos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Nível:"}),r.jsx("span",{className:`text-sm font-medium ${V?"text-emerald-400":"text-red-400"}`,children:k.level_requirement})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Preço:"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:`text-sm font-medium ${M?"text-emerald-400":"text-red-400"}`,children:k.price})]})]})]})]}),r.jsx(de,{onClick:()=>a(k),disabled:!Y,className:`w-full font-semibold ${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg shadow-primary/25":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:k.is_unlocked?V?M?"Comprar":"Gold Insuficiente":`Requer Nível ${k.level_requirement}`:"Item Bloqueado"})]})}else{const k=$,M=t.gold>=k.price,V=t.level>=(k.level_requirement||1),Y=M&&V;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:C(k.type)}),r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:k.name})]}),r.jsx("span",{className:"text-sm text-slate-400",children:k.type==="potion"?"Poção":k.type==="antidote"?"Antídoto":"Fortalecimento"})]}),r.jsx(ry,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrição"}),r.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:k.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Efeito"}),r.jsx("div",{className:"p-3 bg-emerald-900/30 border border-emerald-800/50 rounded-lg backdrop-blur-sm",children:r.jsx("span",{className:"text-sm text-emerald-300",children:k.type==="potion"?`Restaura ${k.effect_value} pontos`:k.type==="antidote"?"Remove todos os efeitos negativos":`Aumenta atributo em ${k.effect_value} por 3 turnos`})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Preço"}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600/30",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsxs("span",{className:`font-medium ${M?"text-emerald-400":"text-red-400"}`,children:[k.price," gold cada"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-semibold text-slate-200",children:"Comprar"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(de,{onClick:()=>n(k,1),disabled:!Y,size:"sm",className:`${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-md shadow-primary/20":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:"1x"}),r.jsx(de,{onClick:()=>n(k,5),disabled:!Y||t.gold<k.price*5,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<k.price*5?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"5x"}),r.jsx(de,{onClick:()=>n(k,10),disabled:!Y||t.gold<k.price*10,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<k.price*10?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"10x"})]})]})]})}};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-amber-900/50 to-amber-800/50 border border-amber-700/50 px-4 py-2 rounded-lg backdrop-blur-sm",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"font-semibold text-amber-300",children:t.gold})]}),r.jsxs(de,{variant:"outline",size:"sm",onClick:i,className:"border-slate-600 bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-slate-100",children:[r.jsx(ua,{className:"h-4 w-4 mr-2"}),"Inventário"]})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[r.jsx(de,{variant:c==="equipment"?"default":"ghost",size:"sm",onClick:()=>{u("equipment"),h(null)},className:`flex-1 ${c==="equipment"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:r.jsx(w8,{className:"h-4 w-4"})}),r.jsx(de,{variant:c==="consumables"?"default":"ghost",size:"sm",onClick:()=>{u("consumables"),h(null)},className:`flex-1 ${c==="consumables"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:r.jsx(um,{className:"h-4 w-4"})})]}),c==="equipment"&&r.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("all"),className:`${p==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:r.jsx(wd,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("weapon"),className:`${p==="weapon"?"bg-red-900/30 text-red-400 border border-red-800/50":"text-slate-500 hover:text-red-400 hover:bg-red-900/20"}`,children:r.jsx(At,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("armor"),className:`${p==="armor"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:r.jsx(yt,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>g("accessory"),className:`${p==="accessory"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:r.jsx(ar,{className:"h-3 w-3"})})]}),c==="consumables"&&r.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("all"),className:`${x==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:r.jsx(wd,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("potion"),className:`${x==="potion"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:r.jsx(lt,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("antidote"),className:`${x==="antidote"?"bg-emerald-900/30 text-emerald-400 border border-emerald-800/50":"text-slate-500 hover:text-emerald-400 hover:bg-emerald-900/20"}`,children:r.jsx(yt,{className:"h-3 w-3"})}),r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>b("buff"),className:`${x==="buff"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:r.jsx(Ct,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-track-slate-800 scrollbar-thumb-slate-600",children:c==="equipment"?j.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(ua,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum equipamento encontrado"})]}):j.map(S):w.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(um,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum consumível encontrado"})]}):w.map(P)})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx($e,{className:"h-full border-slate-700/50 bg-slate-800/30 backdrop-blur-sm",children:r.jsx(He,{className:"p-6 h-full",children:R()})})})]})},qY=({character:t,isOpen:e,onClose:s,onItemSold:a})=>{const[n,i]=y.useState([]),[c,u]=y.useState([]),[f,h]=y.useState([]),[p,g]=y.useState(!1),[x,b]=y.useState(null);y.useEffect(()=>{e&&t.id&&j()},[e,t.id]);const j=async()=>{g(!0);try{const[k,M,V]=await Promise.all([Ft.getCharacterEquipment(t.id),zt.getCharacterConsumables(t.id),zt.getCharacterDrops(t.id)]);i(k||[]),u(M.success?M.data||[]:[]),h(V.success?V.data||[]:[])}catch(k){console.error("Erro ao carregar inventário:",k),pe.error("Erro ao carregar inventário")}finally{g(!1)}},w=async(k,M)=>{var V;if(k.equipment){try{if(M==="toggle")(await Ft.toggleEquipment(t.id,k.equipment.id,!k.is_equipped)).success&&(pe.success(k.is_equipped?"Item desequipado!":"Item equipado!"),j());else if(M==="sell"){const Y=await Ft.sellEquipment(t.id,k.equipment.id);Y.success&&((V=Y.data)==null?void 0:V.newGold)!==void 0?(pe.success(`${k.equipment.name} vendido!`),a(Y.data.newGold),j()):pe.error(Y.error||"Erro ao vender equipamento")}}catch(Y){console.error("Erro na ação:",Y),pe.error("Erro ao executar ação")}b(null)}},N=async k=>{if(k.consumable){try{const M=await zt.consumeItem(t.id,k.consumable_id,t);M.success?(pe.success("Item usado com sucesso!"),j(),a(t.gold)):pe.error(M.error||"Erro ao usar item")}catch(M){console.error("Erro ao usar item:",M),pe.error("Erro ao usar item")}b(null)}},E=k=>{const M={common:"text-slate-400",uncommon:"text-emerald-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"};return M[k]||M.common},C=k=>k==="weapon"?r.jsx(At,{className:"h-4 w-4"}):k==="armor"?r.jsx(yt,{className:"h-4 w-4"}):k==="accessory"?r.jsx(ar,{className:"h-4 w-4"}):k==="potion"?r.jsx(cs,{className:"h-4 w-4"}):r.jsx(ua,{className:"h-4 w-4"}),S=k=>{const M={common:.3,uncommon:.35,rare:.4,epic:.45,legendary:.5};return Math.floor(k.price*M[k.rarity])},P=k=>!(!k.consumable||k.consumable.type==="potion"&&(k.consumable.description.includes("HP")&&t.hp>=t.max_hp||k.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),R=k=>{if(!k.equipment)return null;const M=x===k.id;return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${k.is_equipped?"bg-primary/10 border-primary/30":"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30"} ${M?"ring-2 ring-primary/50":""}`,onClick:()=>b(M?null:k.id),children:[r.jsx("div",{className:"flex-shrink-0",children:C(k.equipment.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.equipment.name}),k.is_equipped&&r.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Equipado"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[r.jsx("span",{className:E(k.equipment.rarity),children:k.equipment.rarity}),k.equipment.atk_bonus>0&&r.jsxs("span",{className:"text-red-400",children:["+",k.equipment.atk_bonus," ATK"]}),k.equipment.def_bonus>0&&r.jsxs("span",{className:"text-blue-400",children:["+",k.equipment.def_bonus," DEF"]})]})]}),r.jsxs("div",{className:"text-xs text-amber-400",children:[r.jsx(wa,{className:"h-3 w-3 inline mr-1"}),S(k.equipment)]})]}),M&&r.jsxs("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-3 shadow-lg space-y-3",children:[!k.is_equipped&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-slate-200 mb-2",children:"Comparação se Equipado"}),r.jsx(qb,{characterId:t.id,newEquipment:k.equipment,slotType:k.equipment.type,showTitle:!1,compact:!0})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(de,{size:"sm",variant:k.is_equipped?"secondary":"default",onClick:()=>w(k,"toggle"),className:"flex-1 text-xs",children:k.is_equipped?"Desequipar":"Equipar"}),r.jsx(de,{size:"sm",variant:"destructive",onClick:()=>w(k,"sell"),className:"flex-1 text-xs",children:"Vender"})]})]})]},k.id)},D=k=>{if(!k.consumable)return null;const M=x===k.id,V=P(k);return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${V?"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30":"bg-slate-800/20 border-slate-700/20 opacity-60"} ${M?"ring-2 ring-primary/50":""}`,onClick:()=>V&&b(M?null:k.id),children:[r.jsx("div",{className:"flex-shrink-0",children:k.consumable.type==="potion"&&k.consumable.description.includes("HP")?r.jsx(cs,{className:"h-4 w-4 text-red-400"}):k.consumable.type==="potion"&&k.consumable.description.includes("Mana")?r.jsx(Ct,{className:"h-4 w-4 text-blue-400"}):r.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.consumable.name}),r.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",k.quantity]})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["+",k.consumable.effect_value," ",k.consumable.type]})]})]}),M&&V&&r.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-2 shadow-lg",children:r.jsx(de,{size:"sm",onClick:()=>N(k),className:"w-full text-xs",children:"Usar Agora"})})]},k.id)},$=k=>k.drop?r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(jt,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.drop.name}),r.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",k.quantity]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("span",{className:E(k.drop.rarity),children:k.drop.rarity}),r.jsxs("span",{className:"text-amber-400",children:[k.drop.value," gold cada"]})]})]})]},k.id):null;return p?r.jsx(Rn,{open:e,onOpenChange:s,children:r.jsxs(Qr,{className:"max-w-md",children:[r.jsx(Ab,{children:r.jsx(Jr,{children:"Carregando Inventário"})}),r.jsxs("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"}),r.jsx("span",{className:"ml-2 text-slate-300",children:"Carregando..."})]})]})}):r.jsx(Rn,{open:e,onOpenChange:s,children:r.jsxs(Qr,{className:"max-w-md max-h-[80vh] bg-slate-900/95 border-slate-700/50",onClick:k=>{k.target===k.currentTarget&&b(null)},children:[r.jsx(Mn,{className:"pb-2",children:r.jsxs(Jr,{className:"flex items-center justify-between text-slate-100",children:[r.jsx("span",{children:"Inventário"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-amber-300",children:t.gold})]})]})}),r.jsxs(SR,{defaultValue:"equipment",className:"w-full",children:[r.jsxs($b,{className:"grid w-full grid-cols-3 bg-slate-800/50",children:[r.jsxs(vo,{value:"equipment",className:"text-xs",children:["Equipamentos (",n.length,")"]}),r.jsxs(vo,{value:"consumables",className:"text-xs",children:["Consumíveis (",c.length,")"]}),r.jsxs(vo,{value:"drops",className:"text-xs",children:["Materiais (",f.length,")"]})]}),r.jsx(yo,{value:"equipment",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:n.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(ua,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum equipamento"})]}):n.map(R)})}),r.jsx(yo,{value:"consumables",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(lt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum consumível"})]}):c.filter(k=>k.quantity>0).map(D)})}),r.jsx(yo,{value:"drops",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:f.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(jt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum material"})]}):f.filter(k=>k.quantity>0).map($)})})]})]})})},UY=({character:t,onPurchase:e})=>{const[s,a]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState(!0),[f,h]=y.useState(!1);y.useEffect(()=>{p()},[t.level]);const p=async(j=!1)=>{try{let w=0;j?w=window.scrollY||document.documentElement.scrollTop:u(!0);const N=await Ft.getAvailableEquipment(t.level);a(N);const E=await zt.getAvailableConsumables();if(E.success&&E.data){const C=E.data.filter(S=>S.price>0&&!S.name.includes("Elixir"));i(C)}j&&requestAnimationFrame(()=>{window.scrollTo(0,w)})}catch(w){console.error("Erro ao carregar itens da loja:",w),pe.error("Erro ao carregar itens da loja")}finally{j||u(!1)}},g=async j=>{var w;if(t.gold<j.price){pe.error("Gold insuficiente para comprar este item!");return}try{const N=await Ft.buyEquipment(t.id,j.id);N.success&&((w=N.data)==null?void 0:w.newGold)!==void 0?(pe.success(`${j.name} comprado com sucesso!`),e(N.data.newGold)):pe.error(N.error||"Erro ao comprar equipamento!")}catch(N){console.error("Erro ao comprar equipamento:",N),pe.error("Erro ao comprar equipamento!")}},x=async(j,w=1)=>{const N=j.price*w;if(t.gold<N){pe.error("Gold insuficiente para comprar este item!");return}try{const E=await zt.buyConsumable(t.id,j.id,w);E.success&&E.data?(pe.success(`${w}x ${j.name} comprado com sucesso!`),e(E.data.newGold)):pe.error(E.error||"Erro ao comprar consumível!")}catch(E){console.error("Erro ao comprar consumível:",E),pe.error("Erro ao comprar consumível!")}},b=j=>{e(j)};return c?r.jsxs("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mr-4"}),r.jsx("span",{children:"Carregando loja..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(VY,{character:t,availableEquipment:s,availableConsumables:n,onEquipmentPurchase:g,onConsumablePurchase:x,onOpenInventory:()=>h(!0)}),r.jsx(qY,{character:t,isOpen:f,onClose:()=>h(!1),onItemSold:b})]})};function zY(){const t=Pt(),{character:e}=eM.useSearch(),[s,a]=y.useState(null),[n,i]=y.useState(!0),[c,u]=y.useState(null);y.useEffect(()=>{f()},[e]);const f=async()=>{if(!e){t({to:"/game/play"});return}try{i(!0),u(null);const g=await tt.getCharacter(e);if(g.success&&g.data)a(g.data);else{const x=g.error||"Erro desconhecido ao carregar personagem";u(x),pe.error("Erro ao carregar personagem",{description:x})}}catch(g){const x=g instanceof Error?g.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",g),u(x),pe.error("Erro ao carregar personagem",{description:x})}finally{i(!1)}},h=async g=>{s&&a(x=>({...x,gold:g}))},p=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return n?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Carregando Loja"}),r.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto carregamos os itens..."})]})}):c||!s?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsx("div",{className:"w-full max-w-md text-center",children:r.jsxs($e,{className:"p-6",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-red-500",children:"Erro ao Carregar Loja"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-muted-foreground",children:c||"Não foi possível carregar o personagem selecionado."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(de,{onClick:f,className:"flex-1",children:[r.jsx(gv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),r.jsxs(de,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-7xl",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:p,className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Loja"}),r.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground",children:[s.name," • Nível ",s.level," • Andar ",s.floor]})]})]})}),r.jsx(UY,{character:s,onPurchase:h})]})})}const eM=Yt("/_authenticated/game/play/hub/shop")({component:zY,validateSearch:t=>({character:t.character||""})});class No{static async getCharacterPotionSlots(e){try{const{data:s,error:a}=await _e.rpc("get_character_potion_slots",{p_character_id:e});if(a)throw a;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,consumable_id:null,consumable_name:null,consumable_description:null,effect_value:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de poção:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de poção",success:!1}}}static async getCharacterSpellSlots(e){try{const{data:s,error:a}=await _e.rpc("get_character_spell_slots",{p_character_id:e});if(a)throw a;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,spell_id:null,spell_name:null,spell_description:null,mana_cost:null,damage:null,spell_type:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de spell:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de spell",success:!1}}}static async setPotionSlot(e,s,a){try{console.log(`[SlotService] Configurando slot ${s} com consumível ${a}`);const{data:n,error:i}=await _e.rpc("set_potion_slot",{p_character_id:e,p_slot_position:s,p_consumable_id:a}).single();if(i)throw console.error("[SlotService] Erro no RPC set_potion_slot:",i.message),i;const c=n;return c.success?(console.log(`[SlotService] Slot ${s} configurado com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Operação falhou: ${c.error}`),{data:null,error:c.error||"Erro ao configurar slot de poção",success:!1})}catch(n){return console.error("Erro ao configurar slot de poção:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de poção",success:!1}}}static async clearPotionSlot(e,s){try{console.log(`[SlotService] Limpando slot ${s}`);const{data:a,error:n}=await _e.rpc("clear_potion_slot",{p_character_id:e,p_slot_position:s}).single();if(n)throw console.error("[SlotService] Erro no RPC clear_potion_slot:",n.message),n;const i=a;return i.success?(console.log(`[SlotService] Slot ${s} limpo com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Falha ao limpar slot: ${i.error}`),{data:null,error:i.error||"Erro ao limpar slot de poção",success:!1})}catch(a){return console.error("Erro ao limpar slot de poção:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao limpar slot de poção",success:!1}}}static async setSpellSlot(e,s,a){try{const{error:n}=await _e.rpc("set_spell_slot",{p_character_id:e,p_slot_position:s,p_spell_id:a});if(n)throw n;return{data:null,error:null,success:!0}}catch(n){return console.error("Erro ao configurar slot de spell:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de spell",success:!1}}}static async consumePotionFromSlot(e,s){try{if(!e)return{success:!1,error:"ID do personagem é obrigatório",data:null};if(s<1||s>3)return{success:!1,error:"Posição do slot inválida (1-3)",data:null};const{supabaseAdmin:a}=await ws(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>od);return{supabaseAdmin:u}},void 0),{data:n,error:i}=await a.rpc("consume_potion_from_slot",{p_character_id:e,p_slot_position:s});return i?(console.error("Erro ao consumir poção do slot:",i),{success:!1,error:i.message||"Erro ao usar poção",data:null}):n?{success:!0,error:null,data:{success:n.success,message:n.message,new_hp:Math.floor(Number(n.new_hp)),new_mana:Math.floor(Number(n.new_mana))}}:{success:!1,error:"Nenhum resultado retornado",data:null}}catch(a){return console.error("Erro ao consumir poção do slot:",a),{success:!1,error:a instanceof Error?a.message:"Erro desconhecido",data:null}}}static async clearSpellSlot(e,s){return this.setSpellSlot(e,s,null)}}const FY=({character:t,onInventoryChange:e})=>{const[s,a]=y.useState([]),[n,i]=y.useState([]),[c,u]=y.useState([]),[f,h]=y.useState(!0),[p,g]=y.useState(null),[x,b]=y.useState(null),[j,w]=y.useState(null),[N,E]=y.useState(null),C=y.useCallback(async()=>{try{h(!0);const[H,A,I]=await Promise.all([zt.getCharacterConsumables(t.id),zt.getCharacterDrops(t.id),No.getCharacterPotionSlots(t.id)]);a(H.success?H.data||[]:[]),i(A.success?A.data||[]:[]),u(I.success?I.data||[]:[])}catch(H){console.error("Erro ao carregar inventário:",H),pe.error("Erro ao carregar inventário"),a([]),i([]),u([])}finally{h(!1)}},[t.id]);y.useEffect(()=>{C()},[C]);const S=async H=>{if(!H.consumable||H.quantity<=0){pe.error("Consumível não disponível");return}w(H.consumable_id);try{const A=await zt.consumeItem(t.id,H.consumable_id,t);A.success&&A.data?(await C(),e(),pe.success(A.data.message)):pe.error(A.error||"Erro ao usar consumível")}catch(A){console.error("Erro ao usar consumível:",A),pe.error("Erro ao usar consumível")}finally{w(null)}},P=async(H,A)=>{E(A);try{const I=await No.setPotionSlot(t.id,A,H);I.success?(await C(),pe.success(`Poção atribuída ao slot ${D(A)}!`)):pe.error(I.error||"Erro ao atribuir poção")}catch(I){console.error("Erro ao atribuir poção:",I),pe.error("Erro ao atribuir poção")}finally{E(null)}},R=async H=>{try{const A=await No.clearPotionSlot(t.id,H);A.success?(await C(),pe.success("Slot limpo!")):pe.error(A.error||"Erro ao limpar slot")}catch(A){console.error("Erro ao limpar slot:",A),pe.error("Erro ao limpar slot")}},D=H=>{switch(H){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},$=H=>!(!H.consumable||H.consumable.type==="potion"&&(H.consumable.description.includes("HP")&&t.hp>=t.max_hp||H.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),k=H=>{if(!H.consumable)return r.jsx(ua,{className:"h-6 w-6 text-slate-400"});if(H.consumable.type==="potion"){if(H.consumable.description.includes("HP"))return r.jsx(cs,{className:"h-6 w-6 text-red-400"});if(H.consumable.description.includes("Mana"))return r.jsx(Ct,{className:"h-6 w-6 text-blue-400"})}return r.jsx(lt,{className:"h-6 w-6 text-purple-400"})},M=()=>r.jsx(jt,{className:"h-6 w-6 text-amber-400"}),V=H=>{const A={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return A[H]||A.common},Y=()=>r.jsxs("div",{className:"flex gap-2 mb-4",children:[c.map(H=>{const A=D(H.slot_position),I=!H.consumable_id;return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`w-12 h-12 border-2 rounded-lg flex items-center justify-center cursor-pointer transition-all duration-200 ${I?"border-dashed border-slate-600 bg-slate-800/30 hover:border-slate-500":"border-solid border-blue-600 bg-blue-900/30 hover:brightness-110"}`,title:I?`Slot ${A} vazio`:H.consumable_name||"Poção",children:I?r.jsx(Io,{className:"h-4 w-4 text-slate-500"}):r.jsx("span",{className:"text-lg",children:"🧪"})}),r.jsx(ze,{className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center bg-blue-600 text-white text-xs",children:A}),!I&&r.jsx(de,{variant:"destructive",size:"sm",className:"absolute -top-1 -left-1 h-4 w-4 p-0 rounded-full",onClick:()=>R(H.slot_position),children:r.jsx(Bi,{className:"h-2 w-2"})})]},H.slot_position)}),r.jsx("div",{className:"flex items-center ml-2",children:r.jsx("span",{className:"text-xs text-slate-500",children:"Slots de Poções (Q, W, E)"})})]}),B=()=>{const H=s.filter(A=>A.consumable&&A.quantity>0);return H.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ua,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum consumível disponível"})]}):r.jsx("div",{className:"grid grid-cols-8 gap-2",children:H.map(A=>{const I=(p==null?void 0:p.id)===A.id,q=$(A);return r.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${I?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":"border-slate-600 bg-slate-800/30 hover:border-slate-400"} ${q?"":"opacity-50"}`,onClick:()=>{g(A),b(null)},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:k(A)}),A.quantity>1&&r.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:A.quantity}),!q&&r.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-red-500 rounded-full"})]},`consumable-${A.id}`)})})},z=()=>{const H=n.filter(A=>A.drop&&A.quantity>0);return H.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ua,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum material disponível"})]}):r.jsx("div",{className:"grid grid-cols-8 gap-2",children:H.map(A=>{var K;const I=(x==null?void 0:x.id)===A.id,q=((K=A.drop)==null?void 0:K.rarity)||"common";return r.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${I?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":`${V(q)} hover:border-slate-400`}`,onClick:()=>{b(A),g(null)},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:M()}),A.quantity>1&&r.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:A.quantity})]},`drop-${A.id}`)})})},Q=()=>{if(p!=null&&p.consumable){const H=p,A=H.consumable,I=$(H),q=A.type==="potion";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-4 rounded-lg border-2 border-slate-600 bg-slate-800/30",children:k(H)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:A.name}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{className:"bg-slate-700/50 text-slate-200 border-0",children:A.type}),r.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",H.quantity]})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:A.description})}),A.effect_value>0&&r.jsxs("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(lt,{className:"h-4 w-4 text-emerald-400"}),r.jsx("span",{className:"text-emerald-300 font-medium",children:"Efeito"})]}),r.jsxs("p",{className:"text-emerald-200",children:["+",A.effect_value," ",A.type]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(de,{onClick:()=>S(H),disabled:!I||j===H.consumable_id,className:`w-full ${I?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:j===H.consumable_id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Usando..."]}):I?"Usar Item":A.type==="potion"&&A.description.includes("HP")&&t.hp>=t.max_hp?"HP já está no máximo":A.type==="potion"&&A.description.includes("Mana")&&t.mana>=t.max_mana?"Mana já está no máximo":"Não pode ser usado agora"}),q&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-300",children:"Atribuir ao slot:"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:c.map(K=>{const L=D(K.slot_position),X=N===K.slot_position,ne=!!K.consumable_id;return r.jsx(de,{variant:"outline",size:"sm",disabled:X,onClick:()=>P(H.consumable_id,K.slot_position),className:`${ne?"border-blue-600 bg-blue-900/20":"border-slate-600"}`,children:X?r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-t border-b border-current"}):r.jsxs(r.Fragment,{children:["Slot ",L,ne&&r.jsx("span",{className:"ml-1 text-xs",children:"(ocupado)"})]})},K.slot_position)})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Poções atribuídas aos slots podem ser usadas rapidamente durante batalhas"})]})]})]})}if(x!=null&&x.drop){const H=x,A=H.drop;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${V(A.rarity)}`,children:M()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:A.name}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{className:`${V(A.rarity)} border-0 text-slate-200`,children:A.rarity}),r.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",H.quantity]})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:A.description})}),r.jsxs("div",{className:"bg-amber-900/30 border border-amber-700/50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-amber-300 font-medium",children:"Valor"})]}),r.jsxs("p",{className:"text-amber-200",children:[A.value," gold por unidade"]})]})]})}return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ua,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um item"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})})};return f?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[70vh]",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsx($e,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsx(He,{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-slate-700 rounded w-32"}),r.jsx("div",{className:"grid grid-cols-8 gap-2",children:Array.from({length:16}).map((H,A)=>r.jsx("div",{className:"aspect-square bg-slate-700 rounded"},A))})]})})})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx($e,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:r.jsx(He,{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-slate-700 rounded w-24"}),r.jsx("div",{className:"h-32 bg-slate-700 rounded"})]})})})})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Inventário"}),r.jsxs("div",{className:"flex items-center gap-2 text-amber-400 bg-slate-800/30 px-3 py-1 rounded-lg border border-slate-700/50",children:[r.jsx(wa,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:t.gold.toLocaleString()})]})]}),r.jsx($e,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsxs(He,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5 text-purple-400"}),"Consumíveis (",s.filter(H=>H.quantity>0).length,")"]}),Y(),B()]})}),r.jsx($e,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsxs(He,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5 text-amber-400"}),"Materiais (",n.filter(H=>H.quantity>0).length,")"]}),z()]})})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx($e,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:r.jsx(He,{className:"p-6 h-full",children:Q()})})})]})},tM=Yt("/_authenticated/game/play/hub/inventory")({component:HY,validateSearch:t=>({character:t.character||""})});function HY(){const t=Pt(),{character:e}=tM.useSearch(),{loadCharacterForHub:s}=Pc(),[a,n]=y.useState(null),[i,c]=y.useState(!0),[u,f]=y.useState(null),[h,p]=y.useState(!1),[g,x]=y.useState(!1),b=async(E=!0,C=!1)=>{if(!e){t({to:"/game/play"});return}if(!(!C&&g&&(a==null?void 0:a.id)===e&&!E)){E?c(!0):p(!0),f(null);try{const S=await tt.getCharacter(e);if(S.success&&S.data)n(S.data),await s(S.data),x(!0);else{const P=S.error||"Erro desconhecido ao carregar personagem";f(P),pe.error("Erro ao carregar personagem",{description:P})}}catch(S){const P=S instanceof Error?S.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",S),f(P),pe.error("Erro ao carregar personagem",{description:P})}finally{c(!1),p(!1)}}};y.useEffect(()=>{b(!0)},[e]);const j=()=>{b(!1,!0)},w=()=>{b(!1,!0)},N=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return i?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-400 mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-100",children:"Carregando Inventário"}),r.jsx("p",{className:"text-slate-400",children:"Aguarde enquanto carregamos seus itens..."})]})}):u||!a?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:r.jsx("div",{className:"w-full max-w-md text-center",children:r.jsxs($e,{className:"p-6 bg-slate-800/50 border-slate-700/50",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-red-400",children:"Erro ao Carregar Inventário"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-slate-400",children:u||"Não foi possível carregar o personagem selecionado."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(de,{onClick:()=>b(),className:"flex-1 bg-amber-600 hover:bg-amber-700",children:[r.jsx(gv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),r.jsxs(de,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1 border-slate-600 text-slate-300",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-black",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:N,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Inventário"}),r.jsxs("p",{className:"text-slate-400",children:[a.name," • Nível ",a.level]})]})]}),r.jsxs(de,{variant:"outline",size:"sm",onClick:w,disabled:h,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(gv,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Atualizando...":"Atualizar"]})]}),r.jsx(FY,{character:a,onInventoryChange:j})]})})}function GY({characterId:t,consumables:e,onSlotsUpdate:s}){const[a,n]=y.useState([]),[i,c]=y.useState(!0),[u,f]=y.useState(null),[h,p]=y.useState(null),g=y.useRef(null),x=y.useRef({}),b=async()=>{try{const R=await No.getCharacterPotionSlots(t);R.success&&R.data&&n(R.data)}catch(R){console.error("Erro ao carregar slots de poção:",R)}finally{c(!1)}};y.useEffect(()=>{t&&b()},[t]),y.useEffect(()=>{const R=$=>{g.current&&!g.current.contains($.target)&&(f(null),p(null))},D=()=>{f(null),p(null)};return document.addEventListener("mousedown",R),window.addEventListener("scroll",D,!0),()=>{document.removeEventListener("mousedown",R),window.removeEventListener("scroll",D,!0)}},[]),y.useEffect(()=>{if(u!==null&&x.current[u]){const R=x.current[u];if(R){const D=R.getBoundingClientRect(),$=window.innerHeight,k=250;let M=D.bottom+8,V=D.left;M+k>$&&(M=D.top-k-8),V+256>window.innerWidth&&(V=window.innerWidth-256-16),V<16&&(V=16),p({top:M,left:V})}}},[u]);const j=async(R,D)=>{try{const $=await No.setPotionSlot(t,R,D);$.success?(await b(),s==null||s(),pe.success("Poção atribuída ao slot!"),f(null),p(null)):pe.error($.error||"Erro ao atribuir poção")}catch($){console.error("Erro ao configurar slot:",$),pe.error("Erro ao configurar slot")}},w=async R=>{try{const D=await No.clearPotionSlot(t,R);D.success?(await b(),s==null||s(),pe.success("Slot limpo!")):pe.error(D.error||"Erro ao limpar slot")}catch(D){console.error("Erro ao limpar slot:",D),pe.error("Erro ao limpar slot")}},N=R=>{u===R?(f(null),p(null)):f(R)},E=R=>{switch(R){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},C=R=>R.consumable_description?R.consumable_description.includes("HP")||R.consumable_description.includes("Vida")?r.jsx(cs,{className:"h-8 w-8 text-red-400"}):R.consumable_description.includes("Mana")?r.jsx(Ct,{className:"h-8 w-8 text-blue-400"}):r.jsx(dx,{className:"h-8 w-8 text-purple-400"}):r.jsx(dx,{className:"h-8 w-8 text-slate-500"}),S=R=>{const D=a.filter(k=>k.consumable_id&&k.slot_position!==R).map(k=>k.consumable_id);console.log("[PotionSlotManager] Slots ocupados (excluindo atual):",D);const $=e.filter(k=>{var Y;const M=k.consumable&&k.consumable.type==="potion"&&k.quantity>0,V=!D.includes(k.consumable_id);return M&&!V&&console.log(`[PotionSlotManager] Poção ${(Y=k.consumable)==null?void 0:Y.name} filtrada (já está em outro slot)`),M&&V});return console.log(`[PotionSlotManager] Poções disponíveis para slot ${R}:`,$.length),$};if(i)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(ZN,{className:"h-4 w-4"}),r.jsx("span",{children:"Atalhos: Q, W, E"})]})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(R=>r.jsx("div",{className:"w-full h-20 bg-slate-700/30 rounded-lg animate-pulse"},`loading-slot-${R}`))})]});const P=({slot:R})=>{const D=S(R.slot_position);return r.jsx("div",{ref:g,className:"fixed w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:(h==null?void 0:h.top)||0,left:(h==null?void 0:h.left)||0,zIndex:9999},children:D.length>0?r.jsxs("div",{className:"p-2 space-y-1",children:[r.jsx("div",{className:"text-xs text-slate-400 px-2 py-1",children:"Selecione uma poção:"}),D.map($=>r.jsxs("button",{className:"w-full text-left px-3 py-2 rounded-md hover:bg-slate-700 transition-colors flex items-center gap-3",onClick:()=>j(R.slot_position,$.consumable_id),children:[r.jsx("div",{className:"flex-shrink-0",children:$.consumable.description.includes("HP")||$.consumable.description.includes("Vida")?r.jsx(cs,{className:"h-4 w-4 text-red-400"}):$.consumable.description.includes("Mana")?r.jsx(Ct,{className:"h-4 w-4 text-blue-400"}):r.jsx(dx,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 truncate",children:$.consumable.name}),r.jsxs("div",{className:"text-xs text-slate-400",children:["+",$.consumable.effect_value," • x",$.quantity]})]})]},`dropdown-${$.id}`))]}):r.jsxs("div",{className:"p-4 text-center",children:[r.jsx("div",{className:"text-slate-400 text-sm",children:"Nenhuma poção disponível"}),r.jsx("div",{className:"text-slate-500 text-xs mt-1",children:e.filter($=>$.consumable&&$.consumable.type==="potion"&&$.quantity>0).length>0?"Todas as poções já estão equipadas":"Compre poções na loja"})]})})};return r.jsxs("div",{className:"space-y-4 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(ZN,{className:"h-4 w-4"}),r.jsx("span",{children:"Atalhos: Q, W, E"})]}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Clique para configurar • ",e.length," consumíveis"]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:a.map(R=>{const D=E(R.slot_position),$=!R.consumable_id,k=u===R.slot_position;return r.jsx("div",{className:"relative",ref:M=>{x.current[R.slot_position]=M},children:r.jsxs("div",{className:"relative group",children:[r.jsx(de,{variant:"outline",className:`w-full h-20 p-3 border-2 transition-all duration-300 ${$?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":"border-solid border-blue-600 bg-gradient-to-br from-blue-900/30 to-blue-800/40 hover:brightness-110 shadow-lg shadow-blue-400/20"} hover:scale-[1.02] active:scale-[0.98] ${k?"ring-2 ring-blue-500":""}`,onClick:()=>{$&&N(R.slot_position)},children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${$?"bg-slate-700/30":"bg-black/20"}`,children:$?r.jsxs("div",{className:"flex items-center",children:[r.jsx(Io,{className:"h-6 w-6 text-slate-500"}),r.jsx(To,{className:`h-4 w-4 text-slate-500 transition-transform ${k?"rotate-180":""}`})]}):C(R)}),!$&&R.effect_value&&r.jsxs("div",{className:"text-xs font-bold text-slate-200 bg-slate-800/50 px-2 py-1 rounded",children:["+",R.effect_value]}),$&&r.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"Vazio"})]})}),r.jsx(ze,{className:"absolute -top-2 -right-2 h-6 w-6 p-0 flex items-center justify-center bg-blue-600 text-white text-xs font-bold border-2 border-slate-800 shadow-lg",children:D}),!$&&r.jsx(de,{variant:"destructive",size:"sm",className:"absolute -top-2 -left-2 h-6 w-6 p-0 rounded-full shadow-lg",onClick:M=>{M.stopPropagation(),w(R.slot_position)},children:r.jsx(Bi,{className:"h-3 w-3"})}),r.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/95 text-slate-300 text-xs px-3 py-2 rounded border border-slate-700/50 whitespace-nowrap shadow-lg",children:$?`Slot ${D} vazio`:R.consumable_name||"Poção"})})]})},`potion-slot-${R.slot_position}`)})}),r.jsx("div",{className:"text-xs text-slate-500 bg-slate-800/30 p-3 rounded-lg border border-slate-700/30",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-medium text-slate-400",children:"Como usar:"}),r.jsx("p",{children:"• Clique em slots vazios para adicionar poções"}),r.jsx("p",{children:"• Use Q, W, E durante batalhas para consumir rapidamente"}),r.jsx("p",{children:"• Cada tipo de poção pode estar em apenas um slot"})]})}),u!==null&&h&&typeof document<"u"&&Oi.createPortal(r.jsx(P,{slot:a.find(R=>R.slot_position===u)}),document.body)]})}const XY=({selectedItem:t,selectedSlot:e,character:s,onEquipmentChange:a})=>{const n=f=>{switch(f.type){case"weapon":return r.jsx(At,{className:"h-12 w-12 text-red-400"});case"armor":return r.jsx(id,{className:"h-12 w-12 text-blue-400"});case"accessory":return r.jsx(ar,{className:"h-12 w-12 text-purple-400"});default:return r.jsx(yt,{className:"h-12 w-12 text-slate-400"})}},i=f=>{const h={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return h[f]||h.common},c=f=>{switch(f){case"main_hand":return"Mão Principal";case"off_hand":return"Mão Secundária";case"armor":return"Armadura";case"accessory":return"Acessório";default:return f}},u=async()=>{if(!(!t||!e))try{const f=await Ft.toggleEquipment(s.id,t.id,!1);f.success?(pe.success("Item desequipado com sucesso!"),a()):pe.error(f.error||"Erro ao desequipar item")}catch(f){console.error("Erro ao desequipar item:",f),pe.error("Erro ao desequipar item")}};return t?r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-slate-100",children:"Detalhes do Item"})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${i(t.rarity)}`,children:n(t)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ze,{className:`border ${i(t.rarity)}`,children:t.rarity}),r.jsx(ze,{variant:"outline",className:"text-slate-300",children:t.type}),t.rarity==="legendary"&&r.jsx(jt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]}),e&&r.jsxs("p",{className:"text-sm text-slate-400",children:["Equipado em: ",c(e)]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:t.description})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.atk_bonus>0&&r.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(At,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),r.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",t.atk_bonus]})]}),t.def_bonus>0&&r.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),r.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",t.def_bonus]})]}),t.mana_bonus>0&&r.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),r.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",t.mana_bonus]})]}),t.speed_bonus&&t.speed_bonus>0&&r.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),r.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",t.speed_bonus]})]})]})]}),t.level_requirement&&t.level_requirement>1&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-400",children:"Nível mínimo:"}),r.jsx("span",{className:`font-bold ${s.level>=t.level_requirement?"text-green-400":"text-red-400"}`,children:t.level_requirement})]})]}),t.weapon_subtype&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),r.jsx("p",{className:"text-slate-400 capitalize",children:t.weapon_subtype})]}),e&&r.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:r.jsx(de,{onClick:u,variant:"outline",className:"w-full border-red-600 text-red-400 hover:bg-red-900/30",children:"Desequipar Item"})})]})]}):r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-slate-100",children:"Detalhes do Item"})}),r.jsx(He,{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center text-slate-500",children:[r.jsx(ua,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Nenhum item selecionado"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um slot para ver os detalhes do equipamento"})]})})]})},YY=({equippedSlots:t,onSlotClick:e,onSlotLongPress:s})=>{const[a,n]=y.useState(null),[i,c]=y.useState(!1),u=y.useCallback(w=>{c(!1);const N=setTimeout(()=>{c(!0),s(w)},800);n(N)},[s]),f=y.useCallback((w,N)=>{a&&(clearTimeout(a),n(null)),i||e(w,N),setTimeout(()=>c(!1),100)},[a,i,e]),h=y.useCallback(()=>{a&&(clearTimeout(a),n(null)),c(!1)},[a]),p=(w,N)=>{if(N)switch(N.type){case"weapon":return r.jsx(At,{className:"h-8 w-8 text-red-400"});case"armor":return r.jsx(id,{className:"h-8 w-8 text-blue-400"});case"accessory":return r.jsx(ar,{className:"h-8 w-8 text-purple-400"});default:return r.jsx(yt,{className:"h-8 w-8 text-slate-400"})}switch(w){case"main_hand":case"off_hand":return r.jsx(At,{className:"h-8 w-8 text-slate-500"});case"armor":return r.jsx(id,{className:"h-8 w-8 text-slate-500"});case"accessory":return r.jsx(ar,{className:"h-8 w-8 text-slate-500"});default:return r.jsx(Io,{className:"h-8 w-8 text-slate-500"})}},g=w=>{if(!w)return"border-slate-600 bg-slate-800/30";const N={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return N[w]||N.common},x=(w,N)=>{const E=t[w],C=!E;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:N}),r.jsxs("div",{className:"relative group",children:[r.jsx(de,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${C?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":`${g(E.rarity)} hover:brightness-110 shadow-lg`} hover:scale-[1.02] active:scale-[0.98] select-none`,onMouseDown:()=>u(w),onMouseUp:()=>f(w,E??null),onMouseLeave:h,onTouchStart:()=>u(w),onTouchEnd:()=>f(w,E??null),onTouchCancel:h,onContextMenu:S=>S.preventDefault(),children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:`p-3 rounded-lg ${C?"bg-slate-700/30":"bg-black/20"}`,children:p(w,E??null)}),E?r.jsxs("div",{className:"text-center space-y-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:E.name.length>12?`${E.name.substring(0,12)}...`:E.name}),r.jsx(ze,{variant:"outline",className:"text-xs px-2 py-0.5",children:E.rarity})]}):r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Vazio"})]})}),r.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),r.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:C?"Toque e segure para equipar":"Toque para detalhes"})})]})]})},b=w=>{const N=w===0,E=w===0?"Peitoral":w===1?"Capacete":w===2?"Pernas":"Botas";return N?x("armor",E):r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:E}),r.jsx("div",{className:"relative group",children:r.jsx(de,{variant:"outline",className:"w-full h-32 p-4 border-2 border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 transition-all duration-300 opacity-60",disabled:!0,children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/20",children:r.jsx(id,{className:"h-8 w-8 text-slate-500"})}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Em breve"})]})})})]})},j=w=>{const N=w===0&&t.accessory,E=w>0;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:w===0?"Anel 1":w===1?"Anel 2":w===2?"Colar":"Amuleto"}),r.jsxs("div",{className:"relative group",children:[r.jsx(de,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${N?`${g(t.accessory.rarity)} hover:brightness-110 shadow-lg hover:scale-[1.02]`:E?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 opacity-60":"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70 hover:scale-[1.02]"} active:scale-[0.98] select-none`,onMouseDown:()=>w===0&&u("accessory"),onMouseUp:()=>w===0&&f("accessory",t.accessory??null),onMouseLeave:h,onTouchStart:()=>w===0&&u("accessory"),onTouchEnd:()=>w===0&&f("accessory",t.accessory??null),onTouchCancel:h,onContextMenu:C=>C.preventDefault(),disabled:E,children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:`p-3 rounded-lg ${N?"bg-black/20":"bg-slate-700/30"}`,children:r.jsx(ar,{className:"h-8 w-8 text-slate-500"})}),N?r.jsxs("div",{className:"text-center space-y-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:t.accessory.name.length>12?`${t.accessory.name.substring(0,12)}...`:t.accessory.name}),r.jsx(ze,{variant:"outline",className:"text-xs px-2 py-0.5",children:t.accessory.rarity})]}):r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:w===0?"Vazio":"Em breve"})]})}),!E&&r.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),!E&&r.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:N?"Toque para detalhes":"Toque e segure para equipar"})})]})]})};return r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"text-slate-100 flex items-center gap-2",children:[r.jsx(yt,{className:"h-5 w-5 text-amber-400"}),"Equipamentos"]})}),r.jsxs(He,{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armas"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[x("main_hand","Mão Principal"),x("off_hand","Mão Secundária")]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armaduras"}),r.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(w=>r.jsx("div",{children:b(w)},`armor-slot-${w}`))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Acessórios"}),r.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(w=>r.jsx("div",{children:j(w)},`accessory-slot-${w}`))})]}),r.jsx("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Toque para ver detalhes • Toque e segure para equipar/trocar"})})]})]})},sM=Yt("/_authenticated/game/play/hub/equipment")({component:KY,validateSearch:t=>({character:t.character||""})});function KY(){return $i().pathname==="/game/play/hub/equipment"?r.jsx(WY,{}):r.jsx($o,{})}function WY(){const t=Pt(),{character:e}=sM.useSearch(),[s,a]=y.useState(null),[n,i]=y.useState({}),[,c]=y.useState([]),[u,f]=y.useState([]),[h,p]=y.useState(null),[g,x]=y.useState(null),[b,j]=y.useState(!0);y.useEffect(()=>{(async()=>{if(e)try{j(!0);const P=await tt.getCharacter(e);P.success&&P.data&&a(P.data);const R=await Ft.getEquippedItems(e);i(R);const D=await Ft.getCharacterEquipment(e);c(D),console.log("[EquipmentPage] Carregando consumíveis para personagem:",e);const $=await zt.getCharacterConsumables(e);console.log("[EquipmentPage] Resposta dos consumíveis:",$),$.success&&$.data?(console.log("[EquipmentPage] Consumíveis carregados com sucesso:",$.data),console.log("[EquipmentPage] Total de consumíveis:",$.data.length),$.data.forEach((k,M)=>{var V,Y;console.log(`[EquipmentPage] Consumível ${M+1}:`,{id:k.id,consumable_id:k.consumable_id,quantity:k.quantity,consumable_name:(V=k.consumable)==null?void 0:V.name,consumable_type:(Y=k.consumable)==null?void 0:Y.type,hasConsumableData:!!k.consumable})}),f($.data)):(console.error("[EquipmentPage] Erro ao carregar consumíveis:",$.error),f([]))}catch(P){console.error("Erro ao carregar dados do equipamento:",P),pe.error("Erro ao carregar equipamentos")}finally{j(!1)}})()},[e]);const w=(S,P)=>{p(S),x(P)},N=S=>{t({to:"/game/play/hub/equipment/select",search:{character:e,slot:S}})},E=async()=>{if(e)try{const S=await Ft.getEquippedItems(e);i(S);const P=await Ft.getCharacterEquipment(e);c(P)}catch(S){console.error("Erro ao atualizar equipamentos:",S)}},C=async()=>{if(e)try{console.log("[EquipmentPage] Recarregando consumíveis...");const S=await zt.getCharacterConsumables(e);S.success&&S.data?(console.log("[EquipmentPage] Consumíveis recarregados:",S.data.length),f(S.data)):console.error("[EquipmentPage] Erro ao recarregar consumíveis:",S.error)}catch(S){console.error("Erro ao recarregar consumíveis:",S)}};return b?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx("div",{className:"h-96 bg-slate-700 rounded"}),r.jsx("div",{className:"h-96 bg-slate-700 rounded"})]})]})})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-100 flex items-center gap-2",children:[r.jsx(yt,{className:"h-8 w-8 text-amber-400"}),"Equipamentos"]}),r.jsxs("p",{className:"text-slate-400",children:[s.name," - Nível ",s.level]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(YY,{equippedSlots:n,onSlotClick:w,onSlotLongPress:N}),r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"text-slate-100 flex items-center gap-2",children:[r.jsx(At,{className:"h-5 w-5 text-blue-400"}),"Slots de Poções"]})}),r.jsx(He,{children:r.jsx(GY,{characterId:e,consumables:u,onSlotsUpdate:C})})]})]}),r.jsx("div",{children:r.jsx(XY,{selectedItem:g,selectedSlot:h,character:s,onEquipmentChange:E})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem não encontrado"}),r.jsxs(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}const ZY=({recipe:t,onCraft:e,isCrafting:s,selectedCharacter:a})=>{if(!t)return r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 bg-muted/10 rounded-lg border-2 border-dashed border-muted",children:[r.jsx(ua,{className:"h-16 w-16 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Selecione uma Receita"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha uma receita da lista para ver os detalhes e ingredientes necessários."})]});const n=()=>{if(t.craftType==="equipment")switch(t.result.type){case"weapon":return r.jsx(At,{className:"h-6 w-6"});case"armor":return r.jsx(yt,{className:"h-6 w-6"});case"accessory":return r.jsx(ar,{className:"h-6 w-6"});default:return r.jsx(Ni,{className:"h-6 w-6"})}return r.jsx(lt,{className:"h-6 w-6"})},i=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"text-orange-400 bg-orange-500/10 border-orange-500/20";case"epic":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"rare":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"uncommon":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-gray-400 bg-gray-500/10 border-gray-500/20"}else switch(t.result.type){case"elixir":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"potion":return"text-red-400 bg-red-500/10 border-red-500/20";case"antidote":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}},c=async()=>{!t.canCraft||s||await e(t.id,t.craftType)};return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex items-start gap-4 p-6 border-b shrink-0",children:[r.jsx("div",{className:Ve("p-3 rounded-lg border",i()),children:n()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx("h2",{className:"text-xl font-bold truncate",children:t.result.name}),r.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[r.jsx(ze,{className:Ve("",i()),children:t.craftType==="equipment"?t.result.rarity:t.result.type}),t.craftType==="equipment"&&t.result.level_requirement&&r.jsxs(ze,{variant:"outline",children:["Nível ",t.result.level_requirement]})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-3",children:t.result.description}),t.craftType==="equipment"&&r.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:r.jsx(ze,{variant:"secondary",className:"text-xs",children:(()=>{const u=t,f=u.result.type,h=u.result.weapon_subtype;if(f==="weapon"&&h)switch(h){case"sword":return"Espada";case"axe":return"Machado";case"blunt":return"Maça";case"staff":return"Cajado";case"dagger":return"Adaga";default:return"Arma"}else{if(f==="armor")return"Armadura";if(f==="accessory")return"Acessório"}return f})()})})]})]}),t.craftType==="equipment"&&(()=>{const u=t;return(u.result.atk_bonus||0)>0||(u.result.def_bonus||0)>0||(u.result.mana_bonus||0)>0||(u.result.speed_bonus||0)>0||(u.result.hp_bonus||0)>0?r.jsxs("div",{className:"p-6 border-b bg-muted/20 shrink-0",children:[r.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center gap-2",children:[r.jsx(Ba,{className:"h-4 w-4"}),"Atributos do Equipamento"]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[(u.result.atk_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg",children:[r.jsx(At,{className:"w-4 h-4 text-red-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.atk_bonus," ATK"]})]}),(u.result.def_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[r.jsx(yt,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.def_bonus," DEF"]})]}),(u.result.mana_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[r.jsx(lt,{className:"w-4 h-4 text-purple-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.mana_bonus," MANA"]})]}),(u.result.speed_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-500/10 border border-green-500/20 rounded-lg",children:[r.jsx(Ct,{className:"w-4 h-4 text-green-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.speed_bonus," VEL"]})]}),(u.result.hp_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-pink-500/10 border border-pink-500/20 rounded-lg",children:[r.jsx(cs,{className:"w-4 h-4 text-pink-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.hp_bonus," HP"]})]})]})]}):null})(),t.craftType==="equipment"&&(()=>{const u=t,f={id:u.result_equipment_id,name:u.result.name,description:u.result.description,type:u.result.type,rarity:u.result.rarity,weapon_subtype:u.result.weapon_subtype,atk_bonus:u.result.atk_bonus||0,def_bonus:u.result.def_bonus||0,mana_bonus:u.result.mana_bonus||0,speed_bonus:u.result.speed_bonus||0,hp_bonus:u.result.hp_bonus||0,level_requirement:u.result.level_requirement||1,price:0,is_unlocked:!0};return r.jsxs("div",{className:"p-6 border-b bg-muted/10 shrink-0",children:[r.jsx("h3",{className:"text-base font-semibold mb-3",children:"Comparação com Equipamento Atual"}),r.jsx(qb,{characterId:(a==null?void 0:a.id)||"",newEquipment:f,slotType:u.result.type,showTitle:!1,compact:!0})]})})(),r.jsxs("div",{className:"flex-1 p-6 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:t.craftType==="equipment"?"Materiais Necessários":"Ingredientes Necessários"}),r.jsxs(ze,{variant:"outline",className:"ml-auto",children:[t.ingredients.length," itens"]})]}),r.jsx("div",{className:"space-y-3 overflow-y-auto max-h-96 pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.ingredients.map((u,f)=>{const h=u.have>=u.quantity;return r.jsxs("div",{className:Ve("flex items-center justify-between p-3 rounded-lg border transition-colors",h?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="equipment"&&r.jsx(Ni,{className:"h-4 w-4 text-blue-400"}),u.type==="drop"&&r.jsx(ar,{className:"h-4 w-4 text-orange-400"}),u.type==="consumable"&&r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"font-medium",children:u.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:Ve("text-sm font-mono",h?"text-green-400":"text-red-400"),children:[u.have,"/",u.quantity]}),h?r.jsx(jC,{className:"h-4 w-4 text-green-400"}):r.jsx(lm,{className:"h-4 w-4 text-red-400"})]})]},f)})})]}),r.jsx("div",{className:"p-6 border-t bg-card/50 shrink-0",children:r.jsx(de,{onClick:c,disabled:!t.canCraft||s,className:Ve("w-full h-12 text-base font-semibold transition-all",t.canCraft&&!s?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-muted text-muted-foreground cursor-not-allowed"),children:s?r.jsxs(r.Fragment,{children:[r.jsx(cm,{className:"h-4 w-4 mr-2 animate-spin"}),t.craftType==="equipment"?"Forjando...":"Criando..."]}):t.canCraft?r.jsxs(r.Fragment,{children:[r.jsx(Ni,{className:"h-4 w-4 mr-2"}),t.craftType==="equipment"?"Forjar Item":"Criar Item"]}):r.jsxs(r.Fragment,{children:[r.jsx(lm,{className:"h-4 w-4 mr-2"}),"Materiais Insuficientes"]})})})]})},QY=({recipe:t,isSelected:e,onClick:s})=>{const a=()=>t.craftType==="equipment"?r.jsx(Ni,{className:"h-4 w-4 text-blue-400"}):r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),n=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"border-l-orange-500 bg-orange-500/5";case"epic":return"border-l-purple-500 bg-purple-500/5";case"rare":return"border-l-blue-500 bg-blue-500/5";case"uncommon":return"border-l-green-500 bg-green-500/5";default:return"border-l-gray-500 bg-gray-500/5"}else switch(t.result.type){case"elixir":return"border-l-purple-500 bg-purple-500/5";case"potion":return"border-l-red-500 bg-red-500/5";case"antidote":return"border-l-green-500 bg-green-500/5";default:return"border-l-blue-500 bg-blue-500/5"}};return r.jsx("div",{onClick:s,className:Ve("p-4 border rounded-lg cursor-pointer transition-all border-l-4",n(),e?"ring-2 ring-primary border-primary bg-primary/5":"hover:bg-accent/50 hover:border-accent"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"shrink-0 mt-1",children:a()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold truncate",children:t.result.name}),t.canCraft?r.jsx(jC,{className:"h-4 w-4 text-green-400 shrink-0"}):r.jsx(lm,{className:"h-4 w-4 text-red-400 shrink-0"})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:t.result.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ze,{variant:"outline",className:"text-xs",children:t.craftType==="equipment"?t.result.rarity:t.result.type}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.ingredients.length," ingredientes"]})]})]})]})})};function JY(){const t=Pt(),{character:e}=aM.useSearch();console.log("[CraftingPage] Iniciando com characterId:",e);const{characters:s,selectedCharacter:a,selectCharacter:n}=Pc(),[i,c]=y.useState(!1),[u,f]=y.useState(!1),[h,p]=y.useState([]),[g,x]=y.useState([]),[b,j]=y.useState({consumables:[],drops:[],equipment:[]}),[w,N]=y.useState([]),[E,C]=y.useState([]),[S,P]=y.useState([]),[R,D]=y.useState([]),[$,k]=y.useState(null),[M,V]=y.useState(!1),[Y,B]=y.useState(""),[z,Q]=y.useState("all"),[H,A]=y.useState("all"),[I,q]=y.useState("all"),[K,L]=y.useState("all"),[X,ne]=y.useState("all");y.useEffect(()=>{V(!0)},[]),y.useEffect(()=>{if(!(!M||!e)&&s.length>0){const le=s.find(ae=>ae.id===e);le&&(!a||a.id!==e)&&n(le)}},[M,e,s.length]),y.useEffect(()=>{if(!M||!a)return;(async()=>{c(!0);try{const[ae,ue,ce,we,Se,je,Ce,ve]=await Promise.all([zt.getCraftingRecipes(),Ft.getEquipmentCraftingRecipes(),zt.getCharacterConsumables(a.id),zt.getCharacterDrops(a.id),Ft.getCharacterEquipment(a.id),zt.getAvailableConsumables(),zt.getMonsterDrops(),Ft.getAllEquipments()]);ae.success&&ae.data&&p(ae.data),ue.success&&ue.data&&x(ue.data),j({consumables:ce.success?ce.data||[]:[],drops:we.success?we.data||[]:[],equipment:Se||[]}),je.success&&je.data&&N(je.data),Ce.success&&Ce.data&&C(Ce.data),ve&&Array.isArray(ve)&&P(ve)}catch(ae){console.error("Erro ao carregar dados:",ae),pe.error("Erro ao carregar receitas e inventário")}finally{c(!1)}})()},[M,a]),y.useEffect(()=>{if(!M||!h.length&&!g.length||!a)return;(()=>{var ue;const ae=[];for(const ce of h)try{const we=(ue=b.consumables.find(ve=>ve.consumable_id===ce.result_id))==null?void 0:ue.consumable,Se={name:ce.name,description:ce.description,type:"potion"};we&&(Se.name=we.name,Se.description=we.description,Se.type=we.type);const je=ce.ingredients.map(ve=>{var Te,et,Ae,U;let Pe="",fe=0,Re="drop";if(ve.item_type==="monster_drop"){const G=b.drops.find(Z=>Z.drop_id===ve.item_id);if(fe=(G==null?void 0:G.quantity)||0,Re="drop",(Te=G==null?void 0:G.drop)!=null&&Te.name)Pe=G.drop.name;else{const Z=E.find(ye=>ye.id===ve.item_id);Pe=(Z==null?void 0:Z.name)||`Drop ID: ${ve.item_id}`}}else if(ve.item_type==="consumable"){const G=b.consumables.find(Z=>Z.consumable_id===ve.item_id);if(fe=(G==null?void 0:G.quantity)||0,Re="consumable",(et=G==null?void 0:G.consumable)!=null&&et.name)Pe=G.consumable.name;else{const Z=w.find(ye=>ye.id===ve.item_id);Pe=(Z==null?void 0:Z.name)||`Consumível ID: ${ve.item_id}`}}else if(ve.item_type==="equipment"){const G=b.equipment.filter(Z=>Z.equipment_id===ve.item_id&&!Z.is_equipped);if(fe=G.length,Re="equipment",(U=(Ae=G[0])==null?void 0:Ae.equipment)!=null&&U.name)Pe=G[0].equipment.name;else{const Z=S.find(ye=>ye.id===ve.item_id);Pe=(Z==null?void 0:Z.name)||`Equipamento ID: ${ve.item_id}`}}return{name:Pe,quantity:ve.quantity,have:fe,type:Re}}),Ce=je.every(ve=>ve.have>=ve.quantity);ae.push({id:ce.id,result_id:ce.result_id,result:Se,ingredients:je,canCraft:Ce,craftType:"consumable"})}catch(we){console.error("Erro ao processar receita de consumível:",we)}for(const ce of g)try{if(ce.equipment){const we=ce.ingredients.map(je=>{var fe,Re,Te,et;let Ce="",ve=0,Pe="drop";if(je.item_type==="monster_drop"){const Ae=b.drops.find(U=>U.drop_id===je.item_id);if(ve=(Ae==null?void 0:Ae.quantity)||0,Pe="drop",(fe=Ae==null?void 0:Ae.drop)!=null&&fe.name)Ce=Ae.drop.name;else{const U=E.find(G=>G.id===je.item_id);Ce=(U==null?void 0:U.name)||`Drop ID: ${je.item_id}`}}else if(je.item_type==="consumable"){const Ae=b.consumables.find(U=>U.consumable_id===je.item_id);if(ve=(Ae==null?void 0:Ae.quantity)||0,Pe="consumable",(Re=Ae==null?void 0:Ae.consumable)!=null&&Re.name)Ce=Ae.consumable.name;else{const U=w.find(G=>G.id===je.item_id);Ce=(U==null?void 0:U.name)||`Consumível ID: ${je.item_id}`}}else if(je.item_type==="equipment"){const Ae=b.equipment.filter(U=>U.equipment_id===je.item_id&&!U.is_equipped);if(ve=Ae.length,Pe="equipment",(et=(Te=Ae[0])==null?void 0:Te.equipment)!=null&&et.name)Ce=Ae[0].equipment.name;else{const U=S.find(G=>G.id===je.item_id);Ce=(U==null?void 0:U.name)||`Equipamento ID: ${je.item_id}`}}return{name:Ce,quantity:je.quantity,have:ve,type:Pe}}),Se=we.every(je=>je.have>=je.quantity);ae.push({id:ce.id,result_equipment_id:ce.result_equipment_id,result:{name:ce.equipment.name,description:ce.equipment.description,type:ce.equipment.type,rarity:ce.equipment.rarity,weapon_subtype:ce.equipment.weapon_subtype||void 0,atk_bonus:ce.equipment.atk_bonus||0,def_bonus:ce.equipment.def_bonus||0,mana_bonus:ce.equipment.mana_bonus||0,speed_bonus:ce.equipment.speed_bonus||0,hp_bonus:0,level_requirement:ce.equipment.level_requirement||1},ingredients:we,canCraft:Se,craftType:"equipment"})}}catch(we){console.error("Erro ao processar receita de equipamento:",we)}if(D(ae),$){const ce=ae.find(we=>we.id===$.id);ce&&k(ce)}})()},[M,h,g,b,a,$==null?void 0:$.id,w,E,S]);const te=y.useMemo(()=>{let le=R;return Y&&(le=le.filter(ae=>ae.result.name.toLowerCase().includes(Y.toLowerCase())||ae.result.description.toLowerCase().includes(Y.toLowerCase()))),z!=="all"&&(le=le.filter(ae=>ae.craftType===z)),I!=="all"&&(le=le.filter(ae=>ae.craftType==="equipment"?ae.result.type===I:!0)),K!=="all"&&(le=le.filter(ae=>ae.craftType==="equipment"?ae.result.weapon_subtype===K:!0)),X!=="all"&&(le=le.filter(ae=>ae.craftType==="equipment"?ae.result.rarity===X:ae.result.type===X)),H==="craftable"?le=le.filter(ae=>ae.canCraft):H==="missing"&&(le=le.filter(ae=>!ae.canCraft)),le},[R,Y,z,H,I,K,X]),ie=async(le,ae)=>{var ue;if(!(!a||u)){f(!0);try{let ce;if(ae==="consumable"?ce=await zt.craftItem(a.id,le):ce=await Ft.craftEquipment(a.id,le),ce.success){pe.success("Item criado com sucesso!",{description:(ue=ce.data)==null?void 0:ue.message});const[we,Se,je]=await Promise.all([zt.getCharacterConsumables(a.id),zt.getCharacterDrops(a.id),Ft.getCharacterEquipment(a.id)]);j({consumables:we.success?we.data||[]:b.consumables,drops:Se.success?Se.data||[]:b.drops,equipment:je||b.equipment})}else pe.error("Erro ao criar item",{description:ce.error})}catch(ce){console.error("Erro ao criar item:",ce),pe.error("Erro ao criar item")}finally{f(!1)}}};return M?!e||e.trim()===""?r.jsxs("div",{className:"container mx-auto py-6 text-center",children:[r.jsx("p",{children:"Redirecionando para seleção de personagem..."}),r.jsx(de,{onClick:()=>t({to:"/game/play"}),children:"Selecionar Personagem"})]}):a?r.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-7xl",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:a.id}}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Forja de Artefatos"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Crie poções, elixires e forje equipamentos únicos com materiais raros"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-5",children:r.jsxs($e,{className:"h-full max-h-[calc(100vh-280px)]",children:[r.jsxs(ft,{className:"pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Ni,{className:"h-5 w-5"}),"Receitas Disponíveis"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ze,{variant:"outline",children:[te.length," de ",R.length]}),(Y||z!=="all"||H!=="all"||I!=="all"||K!=="all"||X!=="all")&&r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>{B(""),Q("all"),A("all"),q("all"),L("all"),ne("all")},className:"h-6 px-2 text-xs",children:"Limpar Filtros"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ps,{placeholder:"Buscar receita...",value:Y,onChange:le=>B(le.target.value),className:"pl-9"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(pi,{value:z,onValueChange:le=>{Q(le),le!=="equipment"&&(q("all"),L("all"),ne("all"))},children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Tipo"})}),r.jsxs(po,{children:[r.jsx(It,{value:"all",children:"Todos os Tipos"}),r.jsx(It,{value:"equipment",children:"Equipamentos"}),r.jsx(It,{value:"consumable",children:"Consumíveis"})]})]}),r.jsxs(pi,{value:H,onValueChange:le=>A(le),children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Status"})}),r.jsxs(po,{children:[r.jsx(It,{value:"all",children:"Todos"}),r.jsx(It,{value:"craftable",children:"Criáveis"}),r.jsx(It,{value:"missing",children:"Faltam Materiais"})]})]})]}),z==="equipment"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(pi,{value:I,onValueChange:le=>{q(le),le!=="weapon"&&L("all")},children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Tipo de Equipamento"})}),r.jsxs(po,{children:[r.jsx(It,{value:"all",children:"Todos Equipamentos"}),r.jsx(It,{value:"weapon",children:"Armas"}),r.jsx(It,{value:"armor",children:"Armaduras"}),r.jsx(It,{value:"accessory",children:"Acessórios"})]})]}),r.jsxs(pi,{value:X,onValueChange:le=>ne(le),children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Raridade"})}),r.jsxs(po,{children:[r.jsx(It,{value:"all",children:"Todas Raridades"}),r.jsx(It,{value:"common",children:"Comum"}),r.jsx(It,{value:"uncommon",children:"Incomum"}),r.jsx(It,{value:"rare",children:"Raro"}),r.jsx(It,{value:"epic",children:"Épico"}),r.jsx(It,{value:"legendary",children:"Lendário"})]})]})]}),I==="weapon"&&r.jsxs(pi,{value:K,onValueChange:le=>L(le),children:[r.jsx(mo,{children:r.jsx(gi,{placeholder:"Tipo de Arma"})}),r.jsxs(po,{children:[r.jsx(It,{value:"all",children:"Todas as Armas"}),r.jsx(It,{value:"sword",children:"Espadas"}),r.jsx(It,{value:"axe",children:"Machados"}),r.jsx(It,{value:"blunt",children:"Maças"}),r.jsx(It,{value:"staff",children:"Cajados"}),r.jsx(It,{value:"dagger",children:"Adagas"})]})]})]})]})]}),r.jsx(He,{className:"flex-1 overflow-hidden",children:i?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"}),r.jsx("span",{className:"ml-2 text-muted-foreground",children:"Carregando receitas..."})]}):te.length>0?r.jsx("div",{className:"space-y-2 h-full max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:te.map(le=>r.jsx(QY,{recipe:le,isSelected:($==null?void 0:$.id)===le.id,onClick:()=>k(le)},le.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[r.jsx(wd,{className:"h-12 w-12 text-muted-foreground mb-3"}),r.jsx("p",{className:"text-muted-foreground text-lg",children:"Nenhuma receita encontrada"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Tente ajustar os filtros ou explore a torre para encontrar novas receitas"})]})})]})}),r.jsx("div",{className:"lg:col-span-7",children:r.jsx($e,{className:"h-full max-h-[calc(100vh-280px)]",children:r.jsx(ZY,{recipe:$,onCraft:ie,isCrafting:u,selectedCharacter:a})})})]})]}):r.jsx("div",{className:"container mx-auto py-6 text-center",children:r.jsx("p",{children:"Carregando personagem..."})}):r.jsx("div",{className:"container mx-auto py-6 text-center",children:r.jsx("p",{children:"Carregando..."})})}const aM=Yt("/_authenticated/game/play/hub/crafting")({component:JY,validateSearch:t=>{const e=t.character;return!e||typeof e!="string"?(console.warn("[CraftingRoute] Parâmetro character inválido:",e),{character:""}):{character:e.trim()}}});function eK(t){const[e,s]=y.useState(!1);return y.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia(t);s(a.matches);const n=i=>{s(i.matches)};return a.addEventListener?a.addEventListener("change",n):a.addListener(n),()=>{a.removeEventListener?a.removeEventListener("change",n):a.removeListener(n)}},[t]),e}function Ub(){const[t,e]=y.useState(!1);return y.useEffect(()=>{if(typeof window>"u")return;const s=()=>{const a=window.innerWidth,n=window.innerHeight,i=a>n,c=n<=500,u=a<=1024;e(i&&c&&u)};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",()=>{setTimeout(s,100)}),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),t}function tK(){const t=y.useRef(null),[e,s]=y.useState("right"),a=y.useCallback(()=>{if(!t.current)return;const n=t.current,i=n.getBoundingClientRect();let c=n.parentElement;for(;c&&!c.classList.contains("grid");)c=c.parentElement;if(!c){s("right");return}const u=c.getBoundingClientRect(),f=u.width,h=i.left+i.width/2,p=u.left,g=h-p,x=f/3,b=f*2/3;g<x?s("right"):g>b?s("left"):s("bottom")},[]);return y.useEffect(()=>{a();const n=()=>a();return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[a]),{elementRef:t,tooltipPosition:e,updatePosition:a}}function sK({icon:t,label:e,value:s,color:a,bgColor:n,borderColor:i,tooltipData:c}){const[u,f]=y.useState(!1),h=eK("(max-width: 768px)"),{elementRef:p,tooltipPosition:g,updatePosition:x}=tK(),b=()=>{h&&f(!0)},j=()=>{h||x()},w=()=>r.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 shadow-xl",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 mb-2",children:c.title}),r.jsxs("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[c.calculations.map((N,E)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:N.label}),r.jsx("span",{className:N.color,children:N.value})]},E)),r.jsxs("div",{className:"border-t border-slate-600 pt-1 mt-1 flex justify-between font-bold",children:[r.jsx("span",{children:c.total.label}),r.jsx("span",{className:c.total.color,children:c.total.value})]})]})]});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:p,className:`p-3 rounded-lg border ${n} ${i} ${h?"cursor-pointer":"cursor-help group"} relative`,onClick:b,onMouseEnter:j,title:h?`Toque para ver a fórmula de ${e}`:"Clique para ver a fórmula",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(t,{className:`h-4 w-4 ${a}`}),r.jsx("span",{className:`text-sm font-medium ${a}`,children:e})]}),r.jsx("div",{className:`text-2xl font-bold ${a}`,children:typeof s=="number"?s.toLocaleString():s}),!h&&r.jsx("div",{className:`absolute z-50 invisible group-hover:visible min-w-[280px] ${g==="left"?"right-full mr-2 -top-2":g==="right"?"left-full ml-2 -top-2":"top-full mt-2 left-1/2 transform -translate-x-1/2"}`,children:r.jsx(w,{})})]}),h&&r.jsx(Rn,{open:u,onOpenChange:f,children:r.jsxs(Qr,{className:"max-w-sm",children:[r.jsx(Mn,{children:r.jsxs(Jr,{className:"flex items-center gap-2",children:[r.jsx(t,{className:`h-5 w-5 ${a}`}),"Fórmula de ",e]})}),r.jsxs("div",{className:"space-y-2",children:[c.calculations.map((N,E)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:N.label}),r.jsx("span",{className:`font-mono ${N.color}`,children:N.value})]},E)),r.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[r.jsx("span",{children:c.total.label}),r.jsx("span",{className:`${c.total.color}`,children:c.total.value})]})]})]})})]})}function aK({characterStats:t}){const e=t.strength||10,s=t.dexterity||10,a=t.intelligence||10,n=t.wisdom||10,i=t.vitality||10,c=t.luck||10,u=t.level,f=e+s+a+n+i+c,h=1-(Math.abs(e/f-1/6)+Math.abs(s/f-1/6)+Math.abs(a/f-1/6)+Math.abs(n/f-1/6)+Math.abs(i/f-1/6)+Math.abs(c/f-1/6))/2,p=1+h*.2;let g=1;const x=Math.max(e/f,s/f,a/f,n/f,i/f,c/f);x>.8&&(g=.7);const b=Math.pow(e,1.2)*p*g,j=Math.pow(s,1.15)*p*g,w=Math.pow(a,1.25)*p*g,N=Math.pow(n,1.1)*p*g,E=Math.pow(i,1.3)*p*g,C=c*p*g,S=t.sword_mastery||1,P=t.axe_mastery||1,R=t.blunt_mastery||1,D=t.defense_mastery||1,$=t.magic_mastery||1,k=Math.pow(Math.max(S,P,R),1.1)*p,M=Math.pow(D,1.2)*p,V=Math.pow($,1.15)*p,Y=50+u*2,B=20+u*1,z=2+u,Q=1+u,H=3+u,A=Y,I=Math.floor(E*2.5),q=Math.floor(b*.3),K=A+I+q,L=B,X=Math.floor(w*1.5),ne=Math.floor(N*1),te=Math.floor(V*.8),ie=L+X+ne+te,le=z,ae=Math.floor(b*1.2),ue=Math.floor(k*.6),ce=Math.floor(j*.2),we=le+ae+ue+ce,Se=z,je=Math.floor(w*1.4),Ce=Math.floor(N*.8),ve=Math.floor(V*1),Pe=Se+je+Ce+ve,fe=Q,Re=Math.floor(E*.6),Te=Math.floor(N*.5),et=Math.floor(M*1),Ae=fe+Re+Te+et,U=H,G=Math.floor(j*1),Z=Math.floor(C*.2),ye=U+G+Z,Ne=j*.25,be=C*.35,De=b*.1,Xe=Math.min(75,Ne+be+De),ot=130,wt=b*.4,Fs=C*.6,Hs=k*.3,qa=Math.min(250,ot+wt+Fs+Hs),Na=w*1.2,Sa=N*.8,ra=V*1.5;let na=Na+Sa+ra;na>100&&(na=100+(na-100)*.7);const lr=Math.min(200,na),fa=(Os,ha)=>{const cr=ha||0,Ze=Os+cr;return cr>0?r.jsxs("span",{children:[Ze.toLocaleString(),r.jsxs("span",{className:"text-orange-400 text-sm ml-1 font-medium",children:["(+",cr,")"]})]}):r.jsx("span",{children:Ze.toLocaleString()})},ts=(Os,ha,cr,Ze)=>{const Bt=[...ha];return Bt.push({label:`Diversidade da Build: ${(h*100).toFixed(1)}%`,value:`Bônus: ${((p-1)*100).toFixed(1)}%`,color:h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}),g<1&&Bt.push({label:"Penalidade Mono-Build:",value:`-${((1-g)*100).toFixed(0)}%`,color:"text-red-400"}),cr>0&&Bt.push({label:"Bônus Equipamentos:",value:`+${cr}`,color:"text-orange-400"}),{title:Os,calculations:Bt,total:{label:"Total Final (Sistema):",value:Ze.toLocaleString(),color:"text-green-400"}}},Vi=[{icon:cs,label:"HP Máximo",value:fa(t.max_hp-(t.equipment_hp_bonus||0),t.equipment_hp_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:ts("Cálculo Exato do HP:",[{label:`Base (50 + 2×${u}):`,value:A,color:"text-blue-400"},{label:"Vitalidade^1.3 × 2.5:",value:`+${I} (${i}^1.3)`,color:"text-pink-400"},{label:"Força^1.2 × 0.3:",value:`+${q} (${e}^1.2)`,color:"text-red-400"},{label:"Subtotal Calculado:",value:K,color:"text-gray-300"}],t.equipment_hp_bonus||0,t.max_hp)},{icon:oI,label:"Mana Máxima",value:fa(t.max_mana-(t.equipment_mana_bonus||0),t.equipment_mana_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:ts("Cálculo Exato da Mana:",[{label:`Base (20 + 1×${u}):`,value:L,color:"text-blue-400"},{label:"Inteligência^1.25 × 1.5:",value:`+${X} (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 1.0:",value:`+${ne} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 0.8:",value:`+${te} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:ie,color:"text-gray-300"}],t.equipment_mana_bonus||0,t.max_mana)},{icon:At,label:"ATK Físico",value:fa(t.atk-(t.equipment_atk_bonus||0),t.equipment_atk_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:ts("Cálculo Exato do ATK Físico:",[{label:`Base (2 + ${u}):`,value:le,color:"text-blue-400"},{label:"Força^1.2 × 1.2:",value:`+${ae} (${e}^1.2)`,color:"text-red-400"},{label:"Maior Maestria^1.1 × 0.6:",value:`+${ue} (${Math.max(S,P,R)}^1.1)`,color:"text-orange-400"},{label:"Destreza^1.15 × 0.2:",value:`+${ce} (${s}^1.15)`,color:"text-green-400"},{label:"Subtotal Calculado:",value:we,color:"text-gray-300"}],t.equipment_atk_bonus||0,t.atk)},...t.magic_attack&&t.magic_attack>0?[{icon:lt,label:"ATK Mágico",value:r.jsx("span",{children:t.magic_attack.toLocaleString()}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:ts("Cálculo Exato do ATK Mágico:",[{label:`Base (2 + ${u}):`,value:Se,color:"text-blue-400"},{label:"Inteligência^1.25 × 1.4:",value:`+${je} (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 0.8:",value:`+${Ce} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 1.0:",value:`+${ve} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:Pe,color:"text-gray-300"}],0,t.magic_attack)}]:[],{icon:yt,label:"Defesa",value:fa(t.def-(t.equipment_def_bonus||0),t.equipment_def_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:ts("Cálculo Exato da Defesa:",[{label:`Base (1 + ${u}):`,value:fe,color:"text-blue-400"},{label:"Vitalidade^1.3 × 0.6:",value:`+${Re} (${i}^1.3)`,color:"text-pink-400"},{label:"Sabedoria^1.1 × 0.5:",value:`+${Te} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Defesa^1.2 × 1.0:",value:`+${et} (${D}^1.2)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:Ae,color:"text-gray-300"}],t.equipment_def_bonus||0,t.def)},{icon:Ct,label:"Velocidade",value:fa(t.speed-(t.equipment_speed_bonus||0),t.equipment_speed_bonus),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:ts("Cálculo Exato da Velocidade:",[{label:`Base (3 + ${u}):`,value:U,color:"text-blue-400"},{label:"Destreza^1.15 × 1.0:",value:`+${G} (${s}^1.15)`,color:"text-green-400"},{label:"Sorte × 0.2:",value:`+${Z} (${c})`,color:"text-yellow-300"},{label:"Subtotal Calculado:",value:ye,color:"text-gray-300"}],t.equipment_speed_bonus||0,t.speed)},{icon:jt,label:"Chance Crítica",value:r.jsxs("span",{children:[t.critical_chance.toFixed(1),"%"]}),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:ts("Cálculo Exato da Chance Crítica:",[{label:"Destreza^1.15 × 0.25:",value:`${Ne.toFixed(1)}% (${s}^1.15)`,color:"text-green-400"},{label:"Sorte × 0.35:",value:`+${be.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Força^1.2 × 0.1:",value:`+${De.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Cap Máximo: 75%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${Xe.toFixed(1)}%`,color:"text-gray-300"}],0,t.critical_chance)},{icon:ta,label:"Dano Crítico",value:r.jsxs("span",{children:[t.critical_damage.toFixed(0),"%"]}),color:"text-orange-400",bgColor:"bg-orange-500/5",borderColor:"border-orange-500/20",tooltipData:ts("Cálculo Exato do Dano Crítico:",[{label:"Base:",value:`${ot}%`,color:"text-blue-400"},{label:"Força^1.2 × 0.4:",value:`+${wt.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Sorte × 0.6:",value:`+${Fs.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Maior Maestria^1.1 × 0.3:",value:`+${Hs.toFixed(1)}% (${Math.max(S,P,R)}^1.1)`,color:"text-orange-400"},{label:"Cap Máximo: 250%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${qa.toFixed(0)}%`,color:"text-gray-300"}],0,t.critical_damage)},{icon:lt,label:"Bônus Mágico",value:r.jsxs("span",{children:["+",Math.round(t.magic_damage_bonus),"%"]}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:ts("Cálculo Exato do Bônus Mágico:",[{label:"Inteligência^1.25 × 1.2:",value:`${Na.toFixed(1)}% (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1 × 0.8:",value:`+${Sa.toFixed(1)}% (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mágica^1.15 × 1.5:",value:`+${ra.toFixed(1)}% (${$}^1.15)`,color:"text-cyan-400"},{label:"Diminishing Returns após 100%",value:"",color:"text-orange-400"},{label:"Cap Máximo: 200%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${lr.toFixed(1)}%`,color:"text-gray-300"}],0,t.magic_damage_bonus)}];return r.jsxs($e,{children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(J6,{className:"h-5 w-5"}),"Stats Derivados"]})}),r.jsxs(He,{className:"space-y-4 overflow-visible",children:[r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 overflow-visible",children:Vi.map((Os,ha)=>r.jsx(sK,{icon:Os.icon,label:Os.label,value:Os.value,color:Os.color,bgColor:Os.bgColor,borderColor:Os.borderColor,tooltipData:Os.tooltipData},ha))}),r.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 border border-slate-700 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-2",children:"Análise da Build:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Diversidade:"}),r.jsxs("span",{className:`ml-2 ${h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}`,children:[(h*100).toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Bônus:"}),r.jsxs("span",{className:"ml-2 text-green-400",children:["+",((p-1)*100).toFixed(1),"%"]})]}),g<1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Mono-Build:"}),r.jsxs("span",{className:"ml-2 text-red-400",children:["-",((1-g)*100).toFixed(0),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Dominante:"}),r.jsxs("span",{className:"ml-2 text-yellow-400",children:[(x*100).toFixed(0),"%"]})]})]})]})]})]})]})}const rM=Yt("/_authenticated/game/play/hub/character-stats")({component:rK,validateSearch:t=>{const e=t.character;return!e||typeof e!="string"||e.trim()===""?(console.warn("[CharacterStatsRoute] Parâmetro character inválido:",e),{character:""}):{character:e.trim()}}});function rK(){const t=Pt(),{character:e}=rM.useSearch();console.log("[CharacterStatsPage] Character ID recebido:",e);const[s,a]=y.useState(null),[n,i]=y.useState(!0),[c,u]=y.useState(!1),[f,h]=y.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0}),p=y.useCallback(async()=>{if(!e||e.trim()===""){console.warn("[CharacterStatsPage] Character ID não fornecido, redirecionando para seleção de personagem"),t({to:"/game/play"});return}try{i(!0);const S=await tt.getCharacterStats(e);S.success&&S.data?(console.log("[CharacterStatsPage] Stats recebidos:",{hp:{value:S.data.max_hp,base:S.data.base_max_hp,bonus:S.data.equipment_hp_bonus},atk:{value:S.data.atk,base:S.data.base_atk,bonus:S.data.equipment_atk_bonus}}),a(S.data)):(pe.error("Erro ao carregar stats do personagem",{description:S.error}),t({to:"/game/play/hub",search:{character:e}}))}catch(S){console.error("Erro ao carregar stats:",S),pe.error("Erro ao carregar stats do personagem"),t({to:"/game/play/hub",search:{character:e}})}finally{i(!1)}},[e,t]);y.useEffect(()=>{e&&p()},[e]);const g=Object.values(f).reduce((S,P)=>S+P,0),x=((s==null?void 0:s.attribute_points)||0)-g,b=S=>{x>0&&h(P=>({...P,[S]:P[S]+1}))},j=S=>{f[S]>0&&h(P=>({...P,[S]:P[S]-1}))},w=()=>{h({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},N=async()=>{if(!(g===0||!e)){u(!0);try{const S=await tt.distributeAttributePoints(e,f);S.success?(pe.success("Pontos distribuídos com sucesso!"),w(),await p()):pe.error("Erro ao distribuir pontos",{description:S.error})}catch(S){console.error("Erro ao distribuir pontos:",S),pe.error("Erro ao distribuir pontos")}finally{u(!1)}}},E={strength:{label:"Força",icon:Ba,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",description:"Aumenta dano físico e capacidade de carga"},dexterity:{label:"Destreza",icon:Ct,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",description:"Aumenta velocidade e chance de crítico"},intelligence:{label:"Inteligência",icon:lt,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",description:"Aumenta dano mágico e pontos de mana"},wisdom:{label:"Sabedoria",icon:jo,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",description:"Aumenta regeneração de mana e resistência"},vitality:{label:"Vitalidade",icon:cs,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",description:"Aumenta pontos de vida e regeneração"},luck:{label:"Sorte",icon:jt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",description:"Aumenta chance de drops raros e críticos"}},C=S=>{switch(S){case is.SWORD_MASTERY:return At;case is.AXE_MASTERY:return Ct;case is.BLUNT_MASTERY:return ta;case is.DEFENSE_MASTERY:return yt;case is.MAGIC_MASTERY:return lt}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4 overflow-visible",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col items-start gap-4",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-2 w-2 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Atributos & Habilidades"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie os stats do seu personagem"})]})]}),s.attribute_points>0&&r.jsxs(ze,{variant:"outline",className:"bg-yellow-500/10 border-yellow-500/30 text-yellow-400 px-3 py-1",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),x," pontos disponíveis"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 overflow-visible",children:[r.jsxs($e,{children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"h-5 w-5"}),"Atributos Primários"]})}),r.jsxs(He,{className:"space-y-4",children:[Object.entries(E).map(([S,P])=>{const R=S,D=s[R]||0,$=P.icon;return r.jsxs(Rs.div,{className:`flex items-center gap-4 p-4 rounded-lg border ${P.bgColor} ${P.borderColor}`,whileHover:{scale:1.01},children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx($,{className:`h-5 w-5 ${P.color}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-sm",children:P.label}),r.jsx("div",{className:"text-xs text-muted-foreground",children:P.description})]})]}),r.jsxs("div",{className:"text-center min-w-[80px]",children:[r.jsxs("div",{className:"text-lg font-bold",children:[D,f[R]>0&&r.jsxs("span",{className:"text-green-400 ml-1 text-sm",children:["+",f[R]]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[D+f[R],"/50"]})]}),s.attribute_points>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(de,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>j(R),disabled:f[R]===0,children:r.jsx(SC,{className:"h-4 w-4"})}),r.jsx("div",{className:"w-8 text-center text-sm font-mono",children:f[R]}),r.jsx(de,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>b(R),disabled:x===0,children:r.jsx(Io,{className:"h-4 w-4"})})]})]},R)}),s.attribute_points>0&&g>0&&r.jsx(HA,{children:r.jsxs(Rs.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-3 mb-4",children:[r.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-primary"}),"Preview dos Melhoramentos"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.vitality>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"text-green-400",children:["+",f.vitality*8]})]}),f.intelligence>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mana:"}),r.jsxs("span",{className:"text-blue-400",children:["+",f.intelligence*5]})]}),f.strength>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ataque:"}),r.jsxs("span",{className:"text-red-400",children:["+",f.strength*2]})]}),f.dexterity>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Velocidade:"}),r.jsxs("span",{className:"text-green-400",children:["+",Math.floor(f.dexterity*1.5)]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(de,{variant:"outline",onClick:w,className:"flex-1",children:[r.jsx(EC,{className:"h-4 w-4 mr-2"}),"Resetar"]}),r.jsxs(de,{onClick:N,disabled:c,className:"flex-1 bg-emerald-500 hover:bg-emerald-600",children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}):r.jsx(vy,{className:"h-4 w-4 mr-2"}),"Confirmar"]})]})]})})]})]}),r.jsx(aK,{characterStats:s}),r.jsxs($e,{className:"lg:col-span-2",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5"}),"Habilidades de Combate"]})}),r.jsx(He,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.values(is).map(S=>{const P=C(S),R=s[`${S}_mastery`],D=s[`${S}_mastery_xp`],$=WL(R),k=D/$*100;return r.jsxs("div",{className:"bg-card p-4 rounded-lg border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(P,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold capitalize",children:S.replace("_"," ")}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nível ",R]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:["XP: ",D,"/",$]}),r.jsxs("span",{children:[Math.round(k),"%"]})]}),r.jsx(zr,{value:k,className:"h-2"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:ZL(S)})]},S)})})})]})]})]})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro ao carregar"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"Não foi possível carregar os stats do personagem"}),r.jsx(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:"Voltar ao Hub"})]})})}function nK({className:t="",showHeader:e=!0,collapsible:s=!1}){const{user:a}=zs(),[n,i]=y.useState([]),[c,u]=y.useState(null),[f,h]=y.useState(!0),[p,g]=y.useState(1),[x,b]=y.useState(!1),[j,w]=y.useState(0),[N,E]=y.useState(!1),[C,S]=y.useState(null),P=6;y.useEffect(()=>{a!=null&&a.id&&R()},[a==null?void 0:a.id,p]);const R=async()=>{if(a!=null&&a.id){h(!0);try{const M=await Dh.getUserCemetery(a.id,{page:p,limit:P});M.success&&M.data?(i(M.data.characters),u(M.data.stats),w(M.data.total),b(M.data.hasMore)):pe.error("Erro ao carregar cemitério",{description:M.error||"Erro desconhecido"})}catch(M){console.error("Erro ao carregar cemitério:",M),pe.error("Erro ao carregar cemitério")}finally{h(!1)}}},D=M=>Dh.formatSurvivalTime(M),$=(M,V)=>Dh.formatDeathCause(M,V),k=M=>new Date(M).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return f&&n.length===0?r.jsxs($e,{className:t,children:[e&&r.jsx(ft,{className:"pb-4",children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-red-500"}),"Cemitério"]})}),r.jsx(He,{children:r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})})})]}):!c||c.total_deaths===0?r.jsxs($e,{className:t,children:[e&&r.jsx(ft,{className:"pb-4",children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-red-500"}),"Cemitério"]})}),r.jsx(He,{children:r.jsxs("div",{className:"text-center py-8 space-y-4",children:[r.jsx("div",{className:"text-6xl opacity-50",children:"⚰️"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Cemitério Vazio"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum personagem foi perdido ainda. Que a sorte continue com você!"})]})]})})]}):r.jsxs($e,{className:t,children:[e&&r.jsx(ft,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-red-500"}),"Cemitério",r.jsxs(ze,{variant:"destructive",className:"ml-2",children:[c.total_deaths," mort",c.total_deaths===1?"e":"es"]})]}),s&&r.jsx(de,{variant:"ghost",size:"sm",onClick:()=>E(!N),children:N?r.jsx(jo,{className:"h-4 w-4"}):r.jsx(dv,{className:"h-4 w-4"})})]})}),(!s||!N)&&r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-center",children:[r.jsx(Er,{className:"h-6 w-6 mx-auto mb-2 text-red-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Nível"}),r.jsx("div",{className:"text-xl font-bold text-red-400",children:c.highest_level_reached})]}),r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-3 text-center",children:[r.jsx(ta,{className:"h-6 w-6 mx-auto mb-2 text-orange-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Andar"}),r.jsx("div",{className:"text-xl font-bold text-orange-400",children:c.highest_floor_reached})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-center",children:[r.jsx(P8,{className:"h-6 w-6 mx-auto mb-2 text-blue-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Tempo Total"}),r.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[c.total_survival_time_hours,"h"]})]}),r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3 text-center",children:[r.jsx(kC,{className:"h-6 w-6 mx-auto mb-2 text-purple-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Ameaça"}),r.jsx("div",{className:"text-xs font-bold text-purple-400 truncate",title:c.deadliest_monster,children:c.deadliest_monster})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Personagens Perdidos"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," de ",j]})]}),f?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(M=>r.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mb-3"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-muted/30 rounded w-full"}),r.jsx("div",{className:"h-4 bg-muted/30 rounded w-3/4"})]})]},M))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(M=>r.jsx($e,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 bg-red-500/5 border-red-500/20",onClick:()=>S(M),children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-semibold text-lg truncate",children:M.name}),r.jsxs(ze,{variant:"outline",className:"bg-background/50",children:["Nv ",M.level]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(At,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-red-400 font-medium",children:M.atk})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(yt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-blue-400 font-medium",children:M.def})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-yellow-400 font-medium",children:M.speed})]})]}),r.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Andar alcançado:"}),r.jsx("span",{className:"font-medium text-orange-400",children:M.floor_reached})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Tempo de vida:"}),r.jsx("span",{className:"font-medium text-blue-400",children:D(M.survival_time_minutes)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Gold acumulado:"}),r.jsx("span",{className:"font-medium text-yellow-400",children:La(M.gold)})]})]}),r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2",children:[r.jsx("div",{className:"text-xs text-red-400 font-medium",children:$(M.death_cause,M.killed_by_monster)}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k(M.died_at)})]})]})})},M.id))})]}),j>P&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>g(M=>Math.max(1,M-1)),disabled:p===1||f,children:[r.jsx(dv,{className:"h-4 w-4 mr-1"}),"Anterior"]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Página ",p," de ",Math.ceil(j/P)]}),r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>g(M=>M+1),disabled:!x||f,children:["Próxima",r.jsx(_C,{className:"h-4 w-4 ml-1"})]})]})]}),C&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs($e,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsx(ft,{children:r.jsxs(pt,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-red-500"}),C.name,r.jsxs(ze,{variant:"outline",className:"ml-2",children:["Nível ",C.level]})]})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-3 text-center",children:[r.jsx(At,{className:"h-5 w-5 mx-auto mb-2 text-red-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Ataque"}),r.jsx("div",{className:"text-xl font-bold text-red-400",children:C.atk})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-3 text-center",children:[r.jsx(yt,{className:"h-5 w-5 mx-auto mb-2 text-blue-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Defesa"}),r.jsx("div",{className:"text-xl font-bold text-blue-400",children:C.def})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-3 text-center",children:[r.jsx(Ct,{className:"h-5 w-5 mx-auto mb-2 text-yellow-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Velocidade"}),r.jsx("div",{className:"text-xl font-bold text-yellow-400",children:C.speed})]}),r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded p-3 text-center",children:[r.jsx(jt,{className:"h-5 w-5 mx-auto mb-2 text-green-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"HP Máximo"}),r.jsx("div",{className:"text-xl font-bold text-green-400",children:C.max_hp})]}),r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-3 text-center",children:[r.jsx(jt,{className:"h-5 w-5 mx-auto mb-2 text-purple-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mana Máxima"}),r.jsx("div",{className:"text-xl font-bold text-purple-400",children:C.max_mana})]}),r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded p-3 text-center",children:[r.jsx(ta,{className:"h-5 w-5 mx-auto mb-2 text-orange-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Andar Alcançado"}),r.jsx("div",{className:"text-xl font-bold text-orange-400",children:C.floor_reached})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Atributos Primários"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Força"}),r.jsx("div",{className:"text-lg font-bold",children:C.strength})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Destreza"}),r.jsx("div",{className:"text-lg font-bold",children:C.dexterity})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Inteligência"}),r.jsx("div",{className:"text-lg font-bold",children:C.intelligence})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Sabedoria"}),r.jsx("div",{className:"text-lg font-bold",children:C.wisdom})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Vitalidade"}),r.jsx("div",{className:"text-lg font-bold",children:C.vitality})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Sorte"}),r.jsx("div",{className:"text-lg font-bold",children:C.luck})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Resumo da Jornada"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(cm,{className:"h-4 w-4 text-blue-400"}),"Tempo de sobrevivência"]}),r.jsx("span",{className:"font-medium text-blue-400",children:D(C.survival_time_minutes)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-yellow-400"}),"XP acumulado"]}),r.jsx("span",{className:"font-medium text-yellow-400",children:La(C.xp)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(wa,{className:"h-4 w-4 text-yellow-400"}),"Gold acumulado"]}),r.jsx("span",{className:"font-medium text-yellow-400",children:La(C.gold)})]})]})]}),r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-red-400",children:"Fim da Jornada"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"font-medium",children:$(C.death_cause,C.killed_by_monster)})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(bC,{className:"h-4 w-4"}),r.jsx("span",{children:k(C.died_at)})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(de,{onClick:()=>S(null),children:"Fechar"})})]})]})})]})}const oK=Yt("/_authenticated/game/play/hub/cemetery")({component:iK});function iK(){const t=Pt();return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary",children:r.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs(de,{variant:"ghost",onClick:()=>t({to:"/game/play"}),className:"mb-4",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar à Seleção de Personagens"]}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent",children:"Cemitério do Tower Trials"}),r.jsx("p",{className:"text-muted-foreground",children:"Honre a memória dos bravos aventureiros que caíram nas trevas da torre"})]})]}),r.jsx(nK,{className:"w-full",showHeader:!1,collapsible:!1})]})})}const nM=Yt("/_authenticated/game/play/hub/equipment/select")({component:lK,validateSearch:t=>({character:t.character||"",slot:t.slot||"main_hand"})});function lK(){const t=Pt(),{character:e,slot:s}=nM.useSearch(),[a,n]=y.useState(null),[i,c]=y.useState([]),[u,f]=y.useState([]),[h,p]=y.useState(null),[g,x]=y.useState(!0),[b,j]=y.useState(""),[w,N]=y.useState("all"),[E,C]=y.useState("name"),[S,P]=y.useState(!1);y.useEffect(()=>{(async()=>{if(!e||!s){t({to:"/game/play/hub",search:{character:e}});return}try{x(!0);const z=await tt.getCharacter(e);z.success&&z.data&&n(z.data);const Q=await Ft.getCharacterEquipment(e);c(Q)}catch(z){console.error("Erro ao carregar dados:",z),pe.error("Erro ao carregar equipamentos")}finally{x(!1)}})()},[e,s,t]),y.useEffect(()=>{const B=i.filter(z=>{if(!z.equipment)return!1;const Q=z.equipment;return!(!R(Q,s)||w!=="all"&&Q.type!==w||b&&!Q.name.toLowerCase().includes(b.toLowerCase()))});B.sort((z,Q)=>{const H=z.equipment,A=Q.equipment;switch(E){case"name":return H.name.localeCompare(A.name);case"level":return(A.level_requirement||0)-(H.level_requirement||0);case"rarity":{const I={common:1,uncommon:2,rare:3,epic:4,legendary:5};return(I[A.rarity]||0)-(I[H.rarity]||0)}case"attack":return A.atk_bonus-H.atk_bonus;case"defense":return A.def_bonus-H.def_bonus;default:return 0}}),f(B)},[i,b,w,E,s]);const R=(B,z)=>{switch(z){case"main_hand":case"off_hand":return B.type==="weapon";case"armor":return B.type==="armor";case"accessory":return B.type==="accessory";default:return!1}},D=B=>{switch(B){case"main_hand":return"Mão Principal";case"off_hand":return"Mão Secundária";case"armor":return"Armadura";case"accessory":return"Acessório";default:return B}},$=B=>{switch(B.type){case"weapon":return r.jsx(At,{className:"h-6 w-6 text-red-400"});case"armor":return r.jsx(id,{className:"h-6 w-6 text-blue-400"});case"accessory":return r.jsx(ar,{className:"h-6 w-6 text-purple-400"});default:return r.jsx(yt,{className:"h-6 w-6 text-slate-400"})}},k=B=>{const z={common:"border-slate-600 bg-slate-800/30 text-slate-300",uncommon:"border-emerald-600 bg-emerald-900/30 text-emerald-300",rare:"border-blue-600 bg-blue-900/30 text-blue-300",epic:"border-purple-600 bg-purple-900/30 text-purple-300",legendary:"border-amber-600 bg-amber-900/30 text-amber-300"};return z[B]||z.common},M=async B=>{if(!(!e||S))try{P(!0);const z=await Ft.toggleEquipment(e,B.id,!0,s);z.success?(pe.success(`${B.name} equipado com sucesso!`),t({to:"/game/play/hub/equipment",search:{character:e}})):pe.error(z.error||"Erro ao equipar item")}catch(z){console.error("Erro ao equipar item:",z),pe.error("Erro ao equipar item")}finally{P(!1)}},V=B=>{if(!B.equipment)return null;const z=B.equipment,Q=(h==null?void 0:h.id)===z.id;return r.jsx("div",{className:`relative cursor-pointer transition-all duration-200 ${Q?"transform scale-[1.02]":"hover:transform hover:scale-[1.01]"}`,onClick:()=>p(z),children:r.jsx($e,{className:`border-2 transition-all duration-200 ${Q?"border-amber-400 bg-amber-900/20 shadow-lg shadow-amber-400/20":`${k(z.rarity)} hover:brightness-110`}`,children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${k(z.rarity)}`,children:$(z)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-slate-200 truncate",children:z.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ze,{variant:"outline",className:"text-xs",children:z.rarity}),z.level_requirement&&z.level_requirement>1&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Nv. ",z.level_requirement]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-400",children:[z.atk_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(At,{className:"h-3 w-3 text-red-400"}),"+",z.atk_bonus]}),z.def_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"h-3 w-3 text-blue-400"}),"+",z.def_bonus]}),z.mana_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ct,{className:"h-3 w-3 text-purple-400"}),"+",z.mana_bonus]})]})]})]})})})},z.id)},Y=()=>{if(!h)return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ua,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um equipamento"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})});const B=a?a.level>=(h.level_requirement||1):!1;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${k(h.rarity)}`,children:$(h)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:h.name}),r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ze,{className:`border ${k(h.rarity)}`,children:h.rarity}),r.jsx(ze,{variant:"outline",className:"text-slate-300",children:h.type}),h.rarity==="legendary"&&r.jsx(jt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:h.description})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.atk_bonus>0&&r.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(At,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),r.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",h.atk_bonus]})]}),h.def_bonus>0&&r.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),r.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",h.def_bonus]})]}),h.mana_bonus>0&&r.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),r.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",h.mana_bonus]})]}),h.speed_bonus&&h.speed_bonus>0&&r.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),r.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",h.speed_bonus]})]})]})]}),h.level_requirement&&h.level_requirement>1&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-400",children:"Nível mínimo:"}),r.jsx("span",{className:`font-bold ${B?"text-green-400":"text-red-400"}`,children:h.level_requirement})]})]}),h.weapon_subtype&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),r.jsx("p",{className:"text-slate-400 capitalize",children:h.weapon_subtype})]}),r.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:r.jsx(de,{onClick:()=>M(h),disabled:!B||S,className:`w-full ${B?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:S?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Equipando..."]}):B?`Equipar em ${D(s)}`:`Nível ${h.level_requirement} necessário`})})]})};return g?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"h-96 bg-slate-700 rounded"}),r.jsx("div",{className:"lg:col-span-2 h-96 bg-slate-700 rounded"})]})]})})}):a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub/equipment",search:{character:e}}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-100 flex items-center gap-2",children:[r.jsx(At,{className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-400"}),r.jsx("span",{className:"hidden sm:inline",children:"Selecionar Equipamento"}),r.jsx("span",{className:"sm:hidden",children:"Equipamentos"})]}),r.jsxs("p",{className:"text-slate-400 text-sm sm:text-base",children:[a.name," - ",D(s)]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ft,{className:"pb-3",children:r.jsxs(pt,{className:"text-slate-100 flex items-center gap-2 text-lg",children:[r.jsx(wd,{className:"h-5 w-5 text-amber-400"}),"Filtros"]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Gm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500"}),r.jsx(Ps,{placeholder:"Buscar equipamento...",value:b,onChange:B=>j(B.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-slate-200"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Tipo"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-2 gap-2",children:[{value:"all",label:"Todos"},{value:"weapon",label:"Armas"},{value:"armor",label:"Armaduras"},{value:"accessory",label:"Acessórios"}].map(B=>r.jsx(de,{variant:w===B.value?"default":"outline",size:"sm",onClick:()=>N(B.value),className:"text-xs",children:B.label},B.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Ordenar por"}),r.jsxs("select",{value:E,onChange:B=>C(B.target.value),className:"w-full p-2 rounded-md bg-slate-700/50 border border-slate-600 text-slate-200 text-sm",children:[r.jsx("option",{value:"name",children:"Nome"}),r.jsx("option",{value:"level",children:"Nível"}),r.jsx("option",{value:"rarity",children:"Raridade"}),r.jsx("option",{value:"attack",children:"Ataque"}),r.jsx("option",{value:"defense",children:"Defesa"})]})]})]})]}),r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ft,{className:"pb-3",children:r.jsxs(pt,{className:"text-slate-100 text-lg",children:["Equipamentos (",u.length,")"]})}),r.jsx(He,{className:"space-y-3 max-h-[400px] sm:max-h-[500px] lg:max-h-[600px] overflow-y-auto",children:u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ua,{className:"h-12 w-12 mx-auto mb-3 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum equipamento encontrado"})]}):u.map(V)})]})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs($e,{className:"bg-slate-800/50 border-slate-700/50 h-full min-h-[400px]",children:[r.jsx(ft,{children:r.jsx(pt,{className:"text-slate-100",children:"Detalhes do Equipamento"})}),r.jsx(He,{className:"h-full",children:Y()})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem não encontrado"}),r.jsxs(de,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}const cK="/assets/thief-idle-01-Cg6afdQr.png",uK="/assets/thief-idle-02-Des9M6g7.png",dK="/assets/thief-idle-03-zEN7iEdx.png";function fK({className:t="",size:e=64}){const[s,a]=y.useState(1),n=[cK,uK,dK];return y.useEffect(()=>{const i=setInterval(()=>{a(c=>c%3+1)},600);return()=>clearInterval(i)},[]),r.jsx("div",{className:`relative ${t}`,style:{width:e,height:e},children:r.jsx("img",{src:n[s-1],alt:"Thief Idle Animation",className:"object-contain"})})}function hK({player:t,currentEnemy:e,playerHpPercentage:s,playerManaPercentage:a,enemyHpPercentage:n,isPlayerTurn:i}){var $,k,M,V,Y,B,z,Q,H,A,I,q;y.useEffect(()=>{console.log("[BattleArena] Props recebidas:"),console.log("- player:",t==null?void 0:t.name,`(andar: ${t==null?void 0:t.floor})`),console.log("- currentEnemy:",e==null?void 0:e.name,`(HP: ${e==null?void 0:e.hp}/${e==null?void 0:e.maxHp})`),console.log("- playerHpPercentage:",s),console.log("- enemyHpPercentage:",n),console.log("- isPlayerTurn:",i)},[t,e,s,n,i]);const[c,u]=y.useState(!1),[f,h]=y.useState(!1),[p,g]=y.useState([]),[x,b]=y.useState(!1),j=y.useRef(null);y.useEffect(()=>{const K=L=>{j.current&&!j.current.contains(L.target)&&b(!1)};return x&&(document.addEventListener("mousedown",K),document.addEventListener("touchstart",K)),()=>{document.removeEventListener("mousedown",K),document.removeEventListener("touchstart",K)}},[x]);const w=()=>{b(!x)},[N,E]=y.useState({playerHp:t.hp,enemyHp:e.hp,battleId:`${t.floor}-${e.name}-${Date.now()}`});y.useEffect(()=>{const K=`${t.floor}-${e.name}`;if(!N.battleId.includes(K)){E({playerHp:t.hp,enemyHp:e.hp,battleId:K});return}let L=!1;if(t.hp<N.playerHp&&N.playerHp-t.hp>=1){const X=N.playerHp-t.hp;console.log(`[BattleArena] Jogador recebeu ${X} de dano`),C(X,!0,!1,"physical"),L=!0}if(e.hp<N.enemyHp&&N.enemyHp-e.hp>=1){const X=N.enemyHp-e.hp,ne=X>t.atk*1.5;console.log(`[BattleArena] Inimigo recebeu ${X} de dano ${ne?"(CRÍTICO)":""}`),C(X,!1,ne,"physical"),L=!0}L&&E({playerHp:t.hp,enemyHp:e.hp,battleId:K})},[t.hp,e.hp,t.atk,t.floor,e.name]);const C=(K,L,X,ne)=>{const te=`${Date.now()}-${Math.random()}`,ie={id:te,damage:K,isPlayer:L,isCritical:X,damageType:ne,timestamp:Date.now()};g(le=>[...le,ie]),setTimeout(()=>{g(le=>le.filter(ae=>ae.id!==te))},2e3)},S=K=>({aggressive:"Agressivo",defensive:"Defensivo",balanced:"Equilibrado"})[K]||K,P=K=>{switch(K){case"aggressive":return"bg-red-500/20 text-red-400 border-red-500/30";case"defensive":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"balanced":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},R=K=>({armored:"Blindado",swift:"Veloz",magical:"Mágico",brutish:"Brutal",resilient:"Resistente",berserker:"Berserker",ethereal:"Etéreo",venomous:"Venenoso"})[K]||K,D=K=>{switch(K){case"armored":return r.jsx(yt,{className:"h-3 w-3"});case"swift":return r.jsx(Ct,{className:"h-3 w-3"});case"magical":return r.jsx(lt,{className:"h-3 w-3"});case"brutish":return r.jsx(At,{className:"h-3 w-3"});case"resilient":return r.jsx(xv,{className:"h-3 w-3"});case"berserker":return r.jsx(ta,{className:"h-3 w-3"});case"ethereal":return r.jsx(jo,{className:"h-3 w-3"});case"venomous":return r.jsx(Hm,{className:"h-3 w-3"});default:return r.jsx(UI,{className:"h-3 w-3"})}};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/30 via-transparent to-slate-900/30 rounded-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-red-500/5 rounded-xl"}),r.jsx($e,{className:`relative border-2 backdrop-blur-sm overflow-hidden transition-all duration-500 ${s>=70?"battle-card-healthy":s>=30?"battle-card-wounded":"battle-card-critical"}`,children:r.jsxs(He,{className:"p-3 md:p-6",children:[r.jsx("div",{className:"text-center mb-3 md:mb-6",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 mb-2",children:[r.jsxs(ze,{variant:"outline",className:"px-2 py-1 text-xs bg-background/50",children:[r.jsx(At,{className:"h-3 w-3 mr-1"}),"Andar ",t.floor]}),r.jsx("div",{className:"h-1.5 w-1.5 md:h-2 md:w-2 rounded-full bg-primary animate-pulse"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ze,{variant:i?"default":"secondary",className:`px-2 py-1 text-xs ${i?"bg-primary text-primary-foreground border-primary":"bg-secondary text-secondary-foreground border-secondary"}`,children:i?"Seu Turno":"Turno do Inimigo"}),i&&r.jsxs("div",{className:"relative",ref:j,children:[r.jsx("button",{className:"ml-1 text-muted-foreground hover:text-foreground transition-colors touch-manipulation",onClick:w,onTouchStart:w,"aria-label":"Mostrar atalhos de teclado",children:r.jsx(_I,{className:"h-3 w-3 md:h-4 md:w-4"})}),x&&r.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 z-50 bg-background border border-border rounded-lg shadow-xl p-4 w-72 md:w-80 max-w-[90vw]",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-semibold mb-3 text-center text-foreground",children:"Atalhos de Teclado"}),r.jsxs("div",{className:"space-y-2.5",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"A"}),r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"S"}),r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"D"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Atacar, Defender, Fugir"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"1"}),r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"2"}),r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"3"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Magias 1, 2, 3"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"Q"}),r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"W"}),r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"E"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Poções 1, 2, 3"})]})]})]}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-border"}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 translate-y-px w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-background"})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-8 items-start",children:[r.jsxs("div",{className:"space-y-2 md:space-y-4",children:[r.jsxs("div",{className:"text-center relative",children:[r.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[r.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 border-2 md:border-3 flex items-center justify-center transition-all duration-500 overflow-hidden ${i?"border-blue-500 shadow-xl md:shadow-2xl shadow-blue-500/40 scale-105 md:scale-110":"border-blue-500/30 scale-100"}`,children:r.jsx(fK,{size:64,className:"scale-75 md:scale-100 lg:scale-110"})}),i&&r.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[r.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full"})]}),t.isDefending&&r.jsx("div",{className:"absolute -bottom-1 -left-1 md:-bottom-2 md:-left-2",children:r.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-600/90 rounded-full flex items-center justify-center border-2 border-background",children:r.jsx(yt,{className:"h-3 w-3 md:h-4 md:w-4 text-white"})})})]}),r.jsxs("div",{className:"space-y-1 md:space-y-2",children:[r.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[r.jsx(ki,{className:"h-3 w-3 md:h-5 md:w-5 text-yellow-500"}),r.jsx("span",{className:"truncate",children:t.name})]}),r.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[r.jsx(jt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",t.level]}),r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-yellow-400 text-xs px-1 md:px-2",children:[t.gold.toLocaleString("pt-BR"),"G"]})]})]}),p.filter(K=>K.isPlayer).map(K=>r.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${K.isCritical?"text-red-400 text-2xl animate-damage-critical":"text-red-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",K.damage,K.isCritical&&r.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRÍTICO!"})]},K.id))]}),r.jsxs("div",{className:"space-y-2 md:space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.hp,"/",t.max_hp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:s,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${s>=70?"bg-green-500":s>=40?"bg-yellow-500":s>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${s}%`}})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 text-blue-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.mana,"/",t.max_mana]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:a,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${a>=70?"bg-blue-500":a>=40?"bg-cyan-500":a>=20?"bg-indigo-500":"bg-purple-500"}`,style:{width:`${a}%`}})]})]})]}),r.jsxs("div",{className:`grid gap-1 md:gap-2 ${t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0?"grid-cols-4":"grid-cols-3"}`,children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(At,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-xs text-red-300 mb-1",children:"ATK"}),r.jsx("div",{className:"text-xs font-bold text-red-400",children:r.jsx(jn,{value:t.atk||0,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,modifications:((k=($=t.active_effects)==null?void 0:$.attribute_modifications)==null?void 0:k.filter(K=>K.attribute==="atk"))||[],size:"sm",showTooltip:!0})})]}),t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0&&r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-xs text-purple-300 mb-1",children:"MAG"}),r.jsx("div",{className:"text-xs font-bold text-purple-400",children:r.jsx(jn,{value:t.magic_attack,modifications:((V=(M=t.active_effects)==null?void 0:M.attribute_modifications)==null?void 0:V.filter(K=>K.attribute==="magic_attack"))||[],size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(yt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-xs text-blue-300 mb-1",children:"DEF"}),r.jsx("div",{className:"text-xs font-bold text-blue-400",children:r.jsx(jn,{value:t.def||0,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,modifications:((B=(Y=t.active_effects)==null?void 0:Y.attribute_modifications)==null?void 0:B.filter(K=>K.attribute==="def"))||[],size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"SPD"}),r.jsx("div",{className:"text-xs font-bold text-yellow-400",children:r.jsx(jn,{value:t.speed||0,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,modifications:((Q=(z=t.active_effects)==null?void 0:z.attribute_modifications)==null?void 0:Q.filter(K=>K.attribute==="speed"))||[],size:"sm",showTooltip:!0})})]})]}),r.jsxs("div",{className:"hidden md:block",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[c?r.jsx(mc,{className:"h-3 w-3 mr-1"}):r.jsx(To,{className:"h-3 w-3 mr-1"}),c?"Menos":"Mais"," Detalhes"]}),c&&r.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[r.jsx("div",{className:"space-y-2",children:(()=>{const L=(le=>le<=1?0:Math.floor(100*Math.pow(1.5,le-2)))(t.level),X=t.xp_next_level,ne=t.xp-L,te=X-L,ie=Math.max(0,Math.min(100,ne/te*100));return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{className:"font-medium text-xs text-muted-foreground",children:"Experiência"})]}),r.jsxs("div",{className:"text-xs font-bold",children:[r.jsx("span",{className:"text-yellow-400",children:La(ne)}),r.jsx("span",{className:"text-muted-foreground mx-1",children:"/"}),r.jsx("span",{className:"text-muted-foreground",children:La(te)})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:ie,className:"h-2",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${ie}%`}})]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 via-yellow-500/5 to-yellow-500/10 rounded-full pointer-events-none"})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Nível ",t.level]}),r.jsxs("span",{className:"text-yellow-400 font-medium",children:[La(te-ne)," para nv"," ",t.level+1]})]})]})})()}),(t.strength||t.dexterity||t.intelligence||t.wisdom||t.vitality||t.luck)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primários:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[t.strength&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(Ba,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"FOR"}),r.jsx("div",{className:"font-medium",children:t.strength})]}),t.dexterity&&r.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),r.jsx("div",{className:"text-muted-foreground",children:"DES"}),r.jsx("div",{className:"font-medium",children:t.dexterity})]}),t.intelligence&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"INT"}),r.jsx("div",{className:"font-medium",children:t.intelligence})]}),t.wisdom&&r.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[r.jsx(jo,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-muted-foreground",children:"SAB"}),r.jsx("div",{className:"font-medium",children:t.wisdom})]}),t.vitality&&r.jsxs("div",{className:"bg-pink-500/10 rounded p-1 text-center",children:[r.jsx(cs,{className:"h-3 w-3 mx-auto mb-1 text-pink-400"}),r.jsx("div",{className:"text-muted-foreground",children:"VIT"}),r.jsx("div",{className:"font-medium",children:t.vitality})]}),t.luck&&r.jsxs("div",{className:"bg-yellow-500/10 rounded p-1 text-center",children:[r.jsx(jt,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-muted-foreground",children:"SOR"}),r.jsx("div",{className:"font-medium",children:t.luck})]})]})]}),(t.critical_chance||t.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avançado:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.critical_chance&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(WN,{className:"h-3 w-3"}),r.jsx("span",{children:"Crítico"})]}),r.jsx("div",{className:"font-medium text-yellow-400",children:r.jsx(jn,{value:t.critical_chance,modifications:((A=(H=t.active_effects)==null?void 0:H.attribute_modifications)==null?void 0:A.filter(K=>K.attribute==="critical_chance"))||[],size:"sm",showTooltip:!0,label:"%"})})]}),t.critical_damage&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(ta,{className:"h-3 w-3"}),r.jsx("span",{children:"Dano Crit"})]}),r.jsx("div",{className:"font-medium text-orange-400",children:r.jsx(jn,{value:t.critical_damage,modifications:((q=(I=t.active_effects)==null?void 0:I.attribute_modifications)==null?void 0:q.filter(K=>K.attribute==="critical_damage"))||[],size:"sm",showTooltip:!0,label:"%"})})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Habilidades:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(t.sword_mastery||0)>1&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(At,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Espada"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.sword_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.sword_mastery_xp||0," XP"]})]}),(t.axe_mastery||0)>1&&r.jsxs("div",{className:"bg-orange-500/10 rounded p-1 text-center",children:[r.jsx(ta,{className:"h-3 w-3 mx-auto mb-1 text-orange-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Machado"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.axe_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.axe_mastery_xp||0," XP"]})]}),(t.blunt_mastery||0)>1&&r.jsxs("div",{className:"bg-brown-500/10 rounded p-1 text-center",children:[r.jsx(uv,{className:"h-3 w-3 mx-auto mb-1 text-brown-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Concussão"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.blunt_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.blunt_mastery_xp||0," XP"]})]}),(t.defense_mastery||0)>1&&r.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[r.jsx(yt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Defesa"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.defense_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.defense_mastery_xp||0," XP"]})]}),(t.magic_mastery||0)>1&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Magia"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.magic_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.magic_mastery_xp||0," XP"]})]})]})]}),!!(t.attribute_points&&t.attribute_points>0)&&r.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openAttributeModal"))},className:"w-full bg-yellow-500/10 border border-yellow-500/20 rounded p-2 hover:bg-yellow-500/20 hover:border-yellow-500/40 transition-all duration-200 cursor-pointer relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/5 via-yellow-500/10 to-yellow-500/5 animate-pulse"}),r.jsxs("div",{className:"relative flex items-center gap-2 text-yellow-400",children:[r.jsx(jt,{className:"h-4 w-4 animate-pulse"}),r.jsxs("span",{className:"text-sm font-medium",children:[t.attribute_points," pontos de atributo disponíveis"]})]})]}),!!t.isDefending&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-400 bg-blue-500/10 rounded p-2",children:[r.jsx(yt,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Postura Defensiva Ativa"})]}),t.defenseCooldown>0&&r.jsxs("div",{className:"flex items-center gap-2 text-orange-400 bg-orange-500/10 rounded p-2",children:[r.jsx(uv,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:["Defesa em Cooldown: ",t.defenseCooldown," turnos"]})]})]})]})]}),r.jsxs("div",{className:"space-y-2 md:space-y-4",children:[r.jsxs("div",{className:"text-center relative",children:[r.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[r.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-red-500/20 to-orange-500/20 border-2 md:border-3 flex items-center justify-center text-2xl md:text-4xl lg:text-5xl transition-all duration-500 ${i?"border-red-500/30 scale-100":"border-red-500 shadow-xl md:shadow-2xl shadow-red-500/40 scale-105 md:scale-110"}`,children:e.image||"👾"}),!i&&r.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[r.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full"})]})]}),r.jsxs("div",{className:"space-y-1 md:space-y-2",children:[r.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[r.jsx(Js,{className:"h-3 w-3 md:h-5 md:w-5 text-red-500"}),r.jsx("span",{className:"truncate",children:e.name})]}),r.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[r.jsx(jo,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",e.level]}),e.tier&&e.tier>1&&r.jsxs(ze,{variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30 text-xs px-1 md:px-2",children:[r.jsx(jt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Tier ",e.tier]}),e.is_boss&&r.jsxs(ze,{className:"bg-red-500/20 text-red-400 border-red-500/30 text-xs px-1 md:px-2",children:[r.jsx(ki,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"BOSS"]}),r.jsx(ze,{className:`text-xs border px-1 md:px-2 ${P(e.behavior)}`,children:S(e.behavior)})]})]}),p.filter(K=>!K.isPlayer).map(K=>r.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${K.isCritical?"text-orange-400 text-2xl animate-damage-critical":"text-orange-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",K.damage,K.isCritical&&r.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRÍTICO!"})]},K.id))]}),r.jsxs("div",{className:"space-y-2 md:space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[e.hp,"/",e.maxHp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(zr,{value:n,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${n>=70?"bg-green-500":n>=40?"bg-yellow-500":n>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${n}%`}})]})]}),e.mana>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 text-purple-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),r.jsx("span",{className:"text-xs md:text-sm font-bold",children:e.mana})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-2 md:h-3 bg-black/20 rounded-full"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 md:h-3 bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.mana/Math.max(e.mana,100)*100)}%`}})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(At,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-xs font-bold text-red-400",children:e.attack})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(yt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-xs font-bold text-blue-400",children:e.defense})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-xs font-bold text-yellow-400",children:e.speed})]})]}),r.jsxs("div",{className:"hidden md:block",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>h(!f),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[f?r.jsx(mc,{className:"h-3 w-3 mr-1"}):r.jsx(To,{className:"h-3 w-3 mr-1"}),f?"Menos":"Mais"," Detalhes"]}),f&&r.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsx("div",{className:"text-muted-foreground",children:"Recompensa XP"}),r.jsx("div",{className:"font-medium text-blue-400",children:e.reward_xp})]}),r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsx("div",{className:"text-muted-foreground",children:"Recompensa Gold"}),r.jsx("div",{className:"font-medium text-yellow-400",children:e.reward_gold})]})]}),!!(e.strength||e.dexterity||e.intelligence)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primários:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[!!e.strength&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(Ba,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"FOR"}),r.jsx("div",{className:"font-medium",children:e.strength})]}),!!e.dexterity&&r.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),r.jsx("div",{className:"text-muted-foreground",children:"DES"}),r.jsx("div",{className:"font-medium",children:e.dexterity})]}),!!e.intelligence&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"INT"}),r.jsx("div",{className:"font-medium",children:e.intelligence})]})]})]}),!!(e.critical_chance||e.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avançado:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[!!e.critical_chance&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(WN,{className:"h-3 w-3"}),r.jsx("span",{children:"Crítico"})]}),r.jsxs("div",{className:"font-medium text-yellow-400",children:[(e.critical_chance||0).toFixed(1),"%"]})]}),!!e.critical_damage&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(ta,{className:"h-3 w-3"}),r.jsx("span",{children:"Dano Crit"})]}),r.jsxs("div",{className:"font-medium text-orange-400",children:[(e.critical_damage||0).toFixed(0),"%"]})]})]})]}),!!(e.physical_resistance||e.magical_resistance||e.debuff_resistance)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Resistências:"}),r.jsxs("div",{className:"space-y-1",children:[!!(e.physical_resistance&&e.physical_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"h-3 w-3 text-red-400"}),r.jsx("span",{children:"Física"})]}),r.jsxs("span",{className:"text-red-400",children:[((e.physical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.magical_resistance&&e.magical_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 text-blue-400"}),r.jsx("span",{children:"Mágica"})]}),r.jsxs("span",{className:"text-blue-400",children:[((e.magical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.debuff_resistance&&e.debuff_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xv,{className:"h-3 w-3 text-green-400"}),r.jsx("span",{children:"Debuffs"})]}),r.jsxs("span",{className:"text-green-400",children:[((e.debuff_resistance||0)*100).toFixed(0),"%"]})]})]})]}),!!(e.physical_vulnerability&&e.physical_vulnerability>1||e.magical_vulnerability&&e.magical_vulnerability>1)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Vulnerabilidades:"}),r.jsxs("div",{className:"space-y-1",children:[!!(e.physical_vulnerability&&e.physical_vulnerability>1)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(vv,{className:"h-3 w-3 text-red-400"}),r.jsx("span",{children:"Física"})]}),r.jsxs("span",{className:"text-red-400",children:["+",(((e.physical_vulnerability||1)-1)*100).toFixed(0),"%"]})]}),!!(e.magical_vulnerability&&e.magical_vulnerability>1)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(vv,{className:"h-3 w-3 text-blue-400"}),r.jsx("span",{children:"Mágica"})]}),r.jsxs("span",{className:"text-blue-400",children:["+",(((e.magical_vulnerability||1)-1)*100).toFixed(0),"%"]})]})]})]}),!!(e.primary_trait||e.secondary_trait)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Características:"}),r.jsxs("div",{className:"space-y-1",children:[!!e.primary_trait&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[D(e.primary_trait),r.jsx("span",{className:"text-purple-400",children:R(e.primary_trait)})]}),!!e.secondary_trait&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[D(e.secondary_trait),r.jsx("span",{className:"text-blue-400",children:R(e.secondary_trait)})]})]})]})]})]})]})]})]})})]})}const mK=t=>{const e=t.name.toLowerCase(),s=t.description.toLowerCase();return e.includes("bola de fogo")||e.includes("fireball")||s.includes("fogo")?r.jsx(Hm,{className:"h-4 w-4"}):e.includes("raio de gelo")||e.includes("ice")||s.includes("gelo")?r.jsx(CC,{className:"h-4 w-4"}):e.includes("cura")||e.includes("heal")||s.includes("restaura")?r.jsx(cs,{className:"h-4 w-4"}):e.includes("raio")||e.includes("bolt")||s.includes("raio")?r.jsx(Ct,{className:"h-4 w-4"}):e.includes("escudo")||e.includes("shield")||s.includes("defesa")?r.jsx(xv,{className:"h-4 w-4"}):e.includes("dano")||s.includes("damage")||s.includes("dano")?r.jsx(ta,{className:"h-4 w-4"}):s.includes("overtime")||s.includes("tempo")?r.jsx(uv,{className:"h-4 w-4"}):r.jsx(lt,{className:"h-4 w-4"})};function pK({handleAction:t,isPlayerTurn:e,loading:s,player:a,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i,currentEnemy:c,battleRewards:u}){const{performAction:f}=y.useContext(e6),[h,p]=y.useState([]),[g,x]=y.useState(!0),[b,j]=y.useState(null),[w,N]=y.useState(null),[E,C]=y.useState(null),[S,P]=y.useState(null),[R,D]=y.useState(!1),$=y.useRef(!1),k=y.useRef(0),M=300,V=y.useRef(null),Y=y.useCallback(async()=>{if(!(R||!u)){console.log("[CombinedBattleInterface] === BOTÃO FALLBACK ACIONADO ==="),console.log("[CombinedBattleInterface] Avançando para próximo andar via fallback..."),D(!0);try{f("continue"),pe.success("Avançando para o próximo andar!",{description:"Preparando nova batalha...",duration:2e3})}catch(fe){console.error("[CombinedBattleInterface] Erro ao avançar:",fe),pe.error("Erro ao avançar para o próximo andar"),D(!1)}}},[R,u,f]),B=!e||s.performAction,z=a.potionUsedThisTurn||!1,Q=a.hp<=0;y.useEffect(()=>{console.log("[CombinedBattleInterface] === ESTADO DETALHADO DO TURNO ==="),console.log(`[CombinedBattleInterface] isPlayerTurn: ${e}`),console.log(`[CombinedBattleInterface] loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] isDisabled: ${B}`),console.log("[CombinedBattleInterface] currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isAlive:c.hp>0}:"null"),console.log("[CombinedBattleInterface] battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp}:"null"),console.log("[CombinedBattleInterface] === FIM DO LOG DETALHADO ==="),c&&c.hp>0&&!e&&!s.performAction&&!u&&(console.warn("[CombinedBattleInterface] ⚠️  POSSÍVEL PROBLEMA: Turno travado no inimigo"),console.warn(`[CombinedBattleInterface] - Inimigo vivo: ${c.name} (${c.hp}/${c.maxHp})`),console.warn("[CombinedBattleInterface] - Não é turno do jogador"),console.warn("[CombinedBattleInterface] - Não está carregando"),console.warn("[CombinedBattleInterface] - Sem recompensas de batalha"))},[e,s.performAction,B,c==null?void 0:c.name,c==null?void 0:c.hp,u]);const H=!!(u&&!s.performAction&&!Q&&!R&&(!c||c.hp<=0)),A=s.performAction||Q;y.useEffect(()=>{var fe;console.log("[CombinedBattleInterface] === CONDIÇÕES DO BOTÃO FALLBACK ==="),console.log(`[CombinedBattleInterface] shouldShowNextFloorButton: ${H}`),console.log("[CombinedBattleInterface] - battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp,dropsCount:((fe=u.drops)==null?void 0:fe.length)||0}:"null/undefined"),console.log(`[CombinedBattleInterface] - loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] - isPlayerDead: ${Q}`),console.log(`[CombinedBattleInterface] - continuingAdventure: ${R}`),console.log("[CombinedBattleInterface] - currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isDead:c.hp<=0}:"null/undefined"),console.log("[CombinedBattleInterface] === FIM DAS CONDIÇÕES ===")},[H,u,s.performAction,Q,R,c==null?void 0:c.hp]);const I=async()=>{try{const fe=await No.getCharacterPotionSlots(a.id);fe.success&&fe.data&&p(fe.data)}catch(fe){console.error("Erro ao carregar slots de poção:",fe)}finally{x(!1)}};y.useEffect(()=>{a.id&&I()},[a.id]),y.useEffect(()=>{a.id&&a.consumables&&(console.log("[CombinedBattleInterface] Consumáveis mudaram, recarregando slots"),I())},[a.consumables]);const q=async fe=>{var et;if(Q||B||b!==null)return;const Re=h.find(Ae=>Ae.slot_position===fe);if(!(Re!=null&&Re.consumable_id)){pe.warning(`Slot ${K(fe)} está vazio`);return}if(z){pe.error("Você já usou uma poção neste turno!",{description:"Você só pode usar uma poção por turno",duration:3e3});return}const Te=(et=a.consumables)==null?void 0:et.find(Ae=>Ae.consumable_id===Re.consumable_id);if(!Te||Te.quantity<=0){pe.error("Poção não disponível!",{description:"Você não possui esta poção no inventário",duration:3e3});return}j(fe);try{console.log(`[CombinedBattleInterface] Usando poção do slot ${fe}`);const Ae=await No.consumePotionFromSlot(a.id,fe);if(Ae.success&&Ae.data){const{message:U,new_hp:G,new_mana:Z}=Ae.data;if(console.log(`[CombinedBattleInterface] Poção usada com sucesso: HP ${G}, Mana ${Z}`),n(G,Z),a.potionUsedThisTurn=!0,a.consumables&&Te){const ye=a.consumables.map(Ne=>Ne.consumable_id===Re.consumable_id?{...Ne,quantity:Math.max(0,Ne.quantity-1)}:Ne).filter(Ne=>Ne.quantity>0);console.log("[CombinedBattleInterface] Atualizando consumáveis via contexto:",ye.length),i(ye)}P(fe),setTimeout(()=>P(null),2e3),await I(),pe.success(U,{description:`HP: ${G} | Mana: ${Z}`,duration:4e3})}else console.error("[CombinedBattleInterface] Erro ao usar poção:",Ae.error),pe.error(Ae.error||"Erro ao usar poção")}catch(Ae){console.error("Erro ao usar poção:",Ae),pe.error("Erro ao usar poção")}finally{j(null)}};y.useEffect(()=>{const fe=Re=>{if(Q||b!==null)return;const Te=Re.target;if(Te.tagName==="INPUT"||Te.tagName==="TEXTAREA"||Te.contentEditable==="true")return;const et=Re.key.toLowerCase();switch(et){case"a":if(B)return;Re.preventDefault(),t("attack");return;case"s":if(B||a.defenseCooldown>0)return;Re.preventDefault(),t("defend");return;case"d":if(A)return;Re.preventDefault(),ie("flee");return}if(B)return;let Ae=0;switch(et){case"q":Ae=1;break;case"w":Ae=2;break;case"e":Ae=3;break;default:{const U=parseInt(et)-1;if(U>=0&&U<Math.min(3,a.spells.length)){const G=a.spells[U];a.mana>=G.mana_cost&&G.current_cooldown===0&&(Re.preventDefault(),t("spell",G.id))}return}}Ae>0&&(Re.preventDefault(),q(Ae))};return window.addEventListener("keydown",fe),()=>window.removeEventListener("keydown",fe)},[B,A,b,h,a.spells,a.mana,a.defenseCooldown,z,Q]);const K=fe=>{switch(fe){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},L=fe=>{var Re;return fe.consumable_id?(Re=fe.consumable_description)!=null&&Re.toLowerCase().includes("mana")?r.jsx(hv,{className:"h-5 w-5 text-blue-500"}):r.jsx(TI,{className:"h-5 w-5 text-red-500"}):null},X=(fe,Re)=>{N({...fe,position:Re})},ne=()=>{V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{N(null)},150)},te=y.useCallback(()=>{const Re=Date.now()-k.current;return $.current?(console.warn("[CombinedBattleInterface] Ação bloqueada - já processando"),!1):Re<M?(console.warn(`[CombinedBattleInterface] Ação bloqueada - cooldown (${Re}ms < ${M}ms)`),!1):!0},[]),ie=y.useCallback(async(fe,Re,Te)=>{var et;if(te()){(et=Te==null?void 0:Te.preventDefault)==null||et.call(Te),$.current=!0,k.current=Date.now();try{await t(fe,Re)}finally{setTimeout(()=>{$.current=!1},M)}}},[te,t]),le=fe=>{fe.preventDefault(),ie("attack",void 0,fe)},ae=fe=>{fe.preventDefault(),ie("defend",void 0,fe)},ue=fe=>{fe.preventDefault(),ie("flee")},ce=(fe,Re)=>{fe.preventDefault(),ie("spell",Re,fe)},we=(fe,Re)=>{const Te=Re.currentTarget.getBoundingClientRect(),et={x:Te.left+Te.width/2,y:Te.top-10},Ae=setTimeout(()=>{X(fe,et)},500);C(Ae)},Se=()=>{E&&(clearTimeout(E),C(null))},je=()=>{E&&(clearTimeout(E),C(null)),ne()},Ce=(fe,Re)=>{Re.preventDefault();const Te=Re.currentTarget.getBoundingClientRect(),et={x:Te.left+Te.width/2,y:Te.top-10},Ae=setTimeout(()=>{X(fe,et)},500);C(Ae)},ve=()=>{E&&(clearTimeout(E),C(null))},Pe=a.spells.slice(0,3);return r.jsxs(r.Fragment,{children:[Q&&r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center rounded-xl",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"text-red-400 text-2xl animate-pulse",children:"💀"}),r.jsx("div",{className:"text-red-400 font-bold text-lg",children:"Personagem Morto"}),r.jsx("div",{className:"text-muted-foreground text-sm",children:"Interface bloqueada"})]})}),r.jsx($e,{className:"border-0 bg-card/50 backdrop-blur-sm relative",children:r.jsxs(He,{className:"p-3 md:p-3 space-y-3 md:space-y-2",children:[H&&!Q&&r.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-teal-500/10 border border-green-500/20 rounded-xl animate-in slide-in-from-top-2 duration-500",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"text-lg",children:"⚔️"}),r.jsx("div",{className:"text-sm text-green-400 font-medium",children:"Inimigo derrotado - Pronto para avançar"}),r.jsx("div",{className:"text-lg",children:"⚔️"})]}),r.jsxs("div",{className:"bg-background/30 rounded-lg p-3 border border-green-500/10",children:[r.jsx("div",{className:"text-xs text-green-300 font-medium mb-1",children:"Recompensas Obtidas:"}),r.jsxs("div",{className:"flex justify-center items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-4 w-4 text-blue-400"}),r.jsxs("span",{className:"text-blue-400 font-semibold",children:["+",u==null?void 0:u.xp," XP"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-yellow-400 text-lg",children:"💰"}),r.jsxs("span",{className:"text-yellow-400 font-semibold",children:["+",u==null?void 0:u.gold," Gold"]})]}),(u==null?void 0:u.drops)&&u.drops.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-purple-400 text-lg",children:"📦"}),r.jsxs("span",{className:"text-purple-400 font-semibold",children:["+",u.drops.length," item",u.drops.length>1?"s":""]})]})]}),(u==null?void 0:u.leveledUp)&&r.jsx("div",{className:"mt-2 text-center",children:r.jsxs(ze,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse",children:["🎊 LEVEL UP! Nível ",u.newLevel]})})]}),r.jsx(de,{onClick:Y,disabled:s.performAction||Q||R,size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg shadow-green-500/20 transition-all duration-200 transform hover:scale-105 w-full md:w-auto",children:s.performAction||R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Avançando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(yC,{className:"h-4 w-4 mr-2"}),"Continuar Aventura"]})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Continue para o próximo andar da torre"})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:justify-center md:items-start gap-3 md:gap-4",children:[r.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-left",children:"Ações de Combate"}),r.jsxs("div",{className:"flex justify-center md:justify-start gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(de,{onClick:le,disabled:B||H||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-red-500/30 bg-red-500/5 hover:bg-red-500/10 hover:border-red-500/50 shadow-lg shadow-red-500/10 transition-all duration-200 ${Q?"opacity-30 cursor-not-allowed":""}`,children:r.jsx(At,{className:"h-4 w-4 md:h-5 md:w-5 text-red-500/80"})}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"A"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{onClick:ae,disabled:B||a.defenseCooldown>0||H||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-blue-500/30 bg-blue-500/5 hover:bg-blue-500/10 hover:border-blue-500/50 shadow-lg shadow-blue-500/10 transition-all duration-200 ${Q?"opacity-30 cursor-not-allowed":""}`,children:r.jsx(yt,{className:"h-4 w-4 md:h-5 md:w-5 text-blue-500/80"})}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",style:{display:a.defenseCooldown>0?"none":"flex"},children:"S"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{onClick:ue,disabled:A,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-amber-500/30 bg-amber-500/5 hover:bg-amber-500/10 hover:border-amber-500/50 shadow-lg shadow-amber-500/10 transition-all duration-200 ${Q?"opacity-30 cursor-not-allowed":s.performAction?"opacity-50 animate-pulse":""}`,children:r.jsx(ds,{className:"h-4 w-4 md:h-5 md:w-5 text-amber-500/80"})}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"D"})]})]})]}),r.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[r.jsxs("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-right",children:["Poções Rápidas",z&&r.jsx("span",{className:"ml-2 text-orange-400 text-xs",children:"• Poção usada neste turno"})]}),r.jsx("div",{className:"flex justify-center md:justify-end gap-2",children:g?[1,2,3].map(fe=>r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-muted/20 rounded-xl animate-pulse"},fe)):h.map(fe=>{var De;const Re=b===fe.slot_position,Te=!fe.consumable_id,et=K(fe.slot_position),Ae=z&&!Te,U=S===fe.slot_position,G=(De=a.consumables)==null?void 0:De.find(Xe=>Xe.consumable_id===fe.consumable_id),Z=(G==null?void 0:G.quantity)||0,ye=S===fe.slot_position&&Z>0?Math.max(0,Z-1):Z,Ne={title:fe.consumable_name||`Slot ${et}`,description:Te?"Slot vazio - Configure no inventário":ye===0?"Sem unidades disponíveis":z?"Poção já usada neste turno":fe.consumable_description||"Poção",stats:Te?[]:[{label:"Efeito",value:`+${fe.effect_value}`},{label:"Disponível",value:`x${ye}`},{label:"Tecla",value:et},...z?[{label:"Status",value:"Indisponível neste turno"}]:[]]},be=!Te&&ye===0;return r.jsxs("div",{className:"relative",children:[r.jsxs(de,{onClick:()=>q(fe.slot_position),disabled:B||Te||Re||H||Ae||be||Q,variant:"ghost",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-2 relative border-2 transition-all duration-200 ${Te?"border-dashed border-muted-foreground/20 bg-transparent hover:bg-muted/10 hover:border-muted-foreground/30":be?"border-red-500/30 bg-red-500/5 opacity-50 cursor-not-allowed":Ae?"border-orange-500/30 bg-orange-500/5 opacity-50 cursor-not-allowed":"border-emerald-500/30 bg-emerald-500/5 hover:bg-emerald-500/10 hover:border-emerald-500/50 shadow-lg shadow-emerald-500/10"} ${Re?"opacity-50":""} ${U?"animate-pulse scale-110":""} ${Q?"opacity-30 cursor-not-allowed":""}`,onMouseDown:Xe=>we(Ne,Xe),onMouseUp:Se,onMouseLeave:je,onTouchStart:Xe=>Ce(Ne,Xe),onTouchEnd:ve,children:[Te?r.jsx(Io,{className:"h-4 w-4 md:h-5 md:w-5 text-muted-foreground/40"}):r.jsxs("div",{className:"flex items-center justify-center",children:[L(fe),(Ae||be)&&r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx("div",{className:"w-6 h-0.5 bg-red-500 rotate-45 absolute"}),r.jsx("div",{className:"w-6 h-0.5 bg-red-500 -rotate-45 absolute"})]})]}),Re&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-xl",children:r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-2 border-primary border-t-transparent"})}),U&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"text-green-400 font-bold text-xs animate-bounce",children:"✓"})})]}),!Te&&r.jsx("div",{className:`absolute -bottom-1 -left-1 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center border border-background font-semibold ${be?"bg-red-500/90":ye<5?"bg-orange-500/90":"bg-emerald-500/90"}`,children:ye}),r.jsx(ze,{variant:"outline",className:`absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center border-muted-foreground/30 ${Ae?"bg-orange-500/20 text-orange-400 border-orange-500/30":be?"bg-red-500/20 text-red-400 border-red-500/30":"bg-background/90"}`,children:et}),Ae&&r.jsx("div",{className:"absolute top-0 left-0 bg-orange-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:"✗"}),be&&r.jsx("div",{className:"absolute top-0 left-0 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:"⚠"})]},fe.slot_position)})})]})]}),Pe.length>0&&r.jsx(r.Fragment,{children:r.jsxs("div",{className:"border-t border-border/50 pt-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center",children:"Magias"}),r.jsx("div",{className:"flex justify-center gap-2 md:max-w-md md:mx-auto",children:Pe.map((fe,Re)=>{const Te=a.mana>=fe.mana_cost&&fe.current_cooldown===0,et=mK(fe),Ae=(Re+1).toString(),U={title:fe.name,description:fe.description,stats:[{label:"Custo de Mana",value:`${fe.mana_cost}`},{label:"Cooldown",value:fe.current_cooldown>0?`${fe.current_cooldown} turnos`:"Disponível"},{label:"Dano/Efeito",value:`${fe.effect_value}`},{label:"Tecla",value:Ae}]};return r.jsxs("div",{className:"relative",children:[r.jsxs(de,{onClick:G=>ce(G,fe.id),onMouseDown:G=>we(U,G),onMouseUp:Se,onMouseLeave:je,onTouchStart:G=>Ce(U,G),onTouchEnd:ve,disabled:B||!Te||H||Q,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 relative border-2 transition-all duration-200 ${Te?"border-violet-500/30 bg-violet-500/5 hover:bg-violet-500/10 hover:border-violet-500/50 shadow-lg shadow-violet-500/10":"border-muted-foreground/10 bg-muted/5 opacity-50 cursor-not-allowed"} ${Q?"opacity-30 cursor-not-allowed":""}`,children:[r.jsx("div",{className:Te?"text-violet-500/80":"text-muted-foreground/50",children:et}),fe.current_cooldown>0&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500/90 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:fe.current_cooldown}),r.jsx("div",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background ${Te?"bg-blue-500/90":"bg-muted-foreground/70"}`,children:fe.mana_cost})]}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -left-1 md:-top-2 md:-left-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:Ae})]},fe.id)})})]})}),r.jsx("div",{className:"hidden md:block text-center",children:r.jsx("div",{className:"text-xs text-muted-foreground/60",children:Q?"Interface bloqueada - Personagem morto":"Atalhos: A/S/D (Combate) • Q/W/E (Poções) • 1/2/3 (Magias)"})})]})}),w&&r.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:w.position.x,top:w.position.y,transform:"translate(-50%, -100%)"},children:r.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border border-border/50 rounded-lg p-3 shadow-xl max-w-xs",children:[r.jsx("h4",{className:"font-medium text-sm mb-1",children:w.title}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2 leading-relaxed",children:w.description}),w.stats.length>0&&r.jsx("div",{className:"space-y-1",children:w.stats.map((fe,Re)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-muted-foreground",children:[fe.label,":"]}),r.jsx("span",{className:"font-medium",children:fe.value})]},Re))})]})})]})}function gK({isOpen:t,onContinue:e,onReturnToHub:s,onOpenAttributeModal:a,rewards:n,leveledUp:i,newLevel:c,hasAttributePoints:u}){const f=Ub();y.useEffect(()=>{if(f){const g=document.createElement("style");return g.textContent=`
        .victory-modal-landscape .scroll-area {
          max-height: calc(90vh - 140px);
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }
        .victory-modal-buttons {
          min-height: 24px !important;
          padding: 0.15rem 0.3rem !important;
          font-size: 0.65rem !important;
          font-weight: 600 !important;
          line-height: 1 !important;
        }
        .victory-modal-landscape [data-radix-dialog-content] {
          max-height: 90vh !important;
        }
      `,document.head.appendChild(g),()=>{document.head.removeChild(g)}}},[f]);const h=()=>{console.log("[VictoryModal] Botão Continuar clicado - chamando onContinue"),e()},p=()=>{console.log("[VictoryModal] Botão Voltar ao Hub clicado - chamando onReturnToHub"),s()};return r.jsx(HA,{children:t&&r.jsx(Rn,{open:t,children:r.jsxs(Qr,{className:`overflow-hidden ${f?"max-w-[98vw] max-h-[98vh] p-2 victory-modal-landscape w-[98vw]":"sm:max-w-[425px]"}`,children:[r.jsxs(Mn,{className:`relative ${f?"pb-2":""}`,children:[!f&&r.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"absolute -top-12 left-1/2 -translate-x-1/2 w-24 h-24 bg-yellow-500/20 rounded-full flex items-center justify-center",children:r.jsx(Er,{className:"h-12 w-12 text-yellow-500"})}),r.jsxs(Rs.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center pt-12"}`,children:[f&&r.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(Er,{className:"h-5 w-5 text-yellow-500"})}),r.jsxs("div",{className:f?"text-left":"text-center",children:[r.jsx(Jr,{className:`font-bold ${f?"text-base":"text-2xl"}`,children:"Vitória!"}),r.jsx(vc,{className:`${f?"text-xs":""}`,children:"Você derrotou o inimigo e avançou para o próximo andar!"})]})]})]}),r.jsx("div",{className:f?"scroll-area overflow-y-auto max-h-[calc(98vh-100px)]":"",children:r.jsxs(Rs.div,{className:`${f?"py-1 space-y-1":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[r.jsxs("div",{className:`${f?"grid grid-cols-2 gap-1 mb-1":"space-y-4"}`,children:[r.jsxs(Rs.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[r.jsx(jt,{className:`text-yellow-500 ${f?"h-3 w-3":"h-6 w-6"}`}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Experiência"}),r.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",n.xp," XP"]})]})]}),r.jsxs(Rs.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[r.jsx(wa,{className:`text-yellow-400 ${f?"h-3 w-3":"h-6 w-6"}`}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Ouro"}),r.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",La(n.gold)," Gold"]})]})]})]}),i&&c&&r.jsxs(Rs.div,{className:`rounded-lg bg-gradient-to-r from-primary/20 to-primary/30 text-center ${f?"p-2 mt-2":"p-4 mt-2"}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,type:"spring"},children:[r.jsxs("div",{className:`flex items-center gap-2 ${f?"justify-start mb-1":"justify-center mb-2"}`,children:[r.jsx(lt,{className:`text-primary ${f?"h-4 w-4":"h-6 w-6"}`}),r.jsxs("div",{className:`font-bold ${f?"text-sm":"text-xl"}`,children:["Nível ",c,"!"]})]}),r.jsx("div",{className:`opacity-80 ${f?"text-xs mb-1":"text-sm mb-2"}`,children:"Seu personagem evoluiu e ficou mais forte!"}),r.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-sm"}`,children:[r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"HP +10"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Mana +5"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Ataque +2"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Defesa +1"})]})]}),n.drops.length>0&&r.jsxs(Rs.div,{className:`bg-primary/10 rounded-lg ${f?"mt-2 p-2":"mt-4 p-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:[r.jsxs("h4",{className:`font-semibold flex items-center gap-2 ${f?"mb-1 text-xs":"mb-3"}`,children:[r.jsx(um,{className:f?"h-3 w-3":"h-5 w-5"}),"Itens Obtidos"]}),r.jsx("div",{className:`${f?"grid grid-cols-2 gap-1":"space-y-2"}`,children:n.drops.map((g,x)=>r.jsxs(Rs.div,{className:`flex items-center gap-2 bg-background/50 rounded ${f?"p-1 text-xs":"p-2"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:1+x*.1},children:[r.jsx("span",{className:f?"text-xs":"text-xl",children:"🎁"}),r.jsx("span",{className:"flex-1 truncate",children:g.name}),r.jsxs("span",{className:"font-mono flex-shrink-0",children:["x",g.quantity]})]},x))})]})]})}),r.jsx(eR,{className:`flex flex-col gap-1 ${f?"mt-1":"mt-4"}`,children:r.jsxs("div",{className:`w-full ${f?"grid grid-cols-3 gap-1":"flex flex-col gap-2"}`,children:[u&&r.jsxs(de,{onClick:a,className:`bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white shadow-lg ${f?"victory-modal-buttons text-xs":"w-full"}`,children:[r.jsx(Ba,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Pts":"Distribuir Pontos de Atributo"]}),r.jsxs(de,{onClick:p,variant:"outline",className:`items-center justify-center ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[r.jsx(FI,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"":"Voltar ao Hub"]}),r.jsxs(de,{onClick:h,className:`bg-emerald-500 hover:bg-emerald-600 ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[r.jsx(yC,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),"Continuar"]})]})})]})})})}function xK({isOpen:t,onClose:e,player:s,gameMessage:a=`${s.name} foi derrotado no Andar ${s.floor}...`,highestFloor:n=s.floor,isCharacterDeleted:i=!1,userId:c,onReturnToCharacterSelect:u,onViewCemetery:f}){const h=Pt(),[p,g]=y.useState(!1),[x,b]=y.useState(!1),j=Ub(),w=async()=>{if(!(!c||!s.id))try{g(!0),b(!0);const C=await Jl.saveScore({player_name:s.name,floor:s.floor-1,user_id:c,character_level:s.level,character_gold:s.gold,character_alive:!1});if(C.error)throw new Error(C.error);if(!i){const{error:S}=await tt.deleteCharacter(s.id);if(S)throw new Error(S)}pe.success("Fim de jogo",{description:"Pontuação salva e personagem deletado permanentemente."}),u()}catch(C){pe.error("Erro ao finalizar jogo",{description:C instanceof Error?C.message:"Erro desconhecido"}),console.error("Erro ao finalizar jogo:",C)}finally{g(!1),b(!1)}},N=()=>{f?f():h({to:"/game/play/hub/cemetery",search:{character:s.id}})},E=()=>{h({to:"/game/ranking"})};return r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Qr,{className:`overflow-hidden ${j?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-md"}`,children:[r.jsx(Mn,{className:`text-center ${j?"pb-2":""}`,children:r.jsxs(Jr,{className:`flex items-center justify-center gap-2 ${j?"text-lg":"text-2xl"}`,children:[r.jsx(Js,{className:`text-red-500 ${j?"h-5 w-5":"h-8 w-8"}`}),i?"Permadeath - Personagem Perdido":"Fim de Jogo"]})}),r.jsxs("div",{className:`${j?"space-y-2 max-h-[calc(95vh-140px)] overflow-y-auto":"space-y-4"}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`mb-2 ${j?"text-sm":"text-lg"}`,children:a}),r.jsxs("div",{className:`flex items-center justify-center gap-2 mb-2 ${j?"mb-2":"mb-4"}`,children:[r.jsx(Er,{className:`text-yellow-500 ${j?"h-4 w-4":"h-6 w-6"}`}),r.jsxs("span",{className:`font-bold ${j?"text-lg":"text-2xl"}`,children:["Andar ",s.floor-1]})]}),r.jsxs("p",{className:`text-muted-foreground ${j?"text-xs":"text-sm"}`,children:["Seu recorde atual: Andar ",n]})]}),r.jsxs("div",{className:j?"grid grid-cols-2 gap-2":"space-y-3",children:[r.jsxs("div",{className:`bg-muted rounded-lg ${j?"p-2":"p-4"}`,children:[r.jsx("h3",{className:`font-medium mb-2 ${j?"text-sm":""}`,children:"Estatísticas Finais"}),r.jsxs("div",{className:`grid grid-cols-2 gap-1 ${j?"text-xs":"gap-2 text-sm"}`,children:[r.jsx("div",{children:"Personagem:"}),r.jsx("div",{className:"font-medium truncate",children:s.name}),r.jsx("div",{children:"Andares:"}),r.jsx("div",{className:"font-medium",children:s.floor-1}),r.jsx("div",{children:"HP final:"}),r.jsxs("div",{className:"font-medium",children:[s.hp,"/",s.max_hp]}),r.jsx("div",{children:"Nível:"}),r.jsx("div",{className:"font-medium",children:s.level}),r.jsx("div",{children:"Gold:"}),r.jsx("div",{className:"font-medium",children:La(s.gold)}),r.jsx("div",{children:"XP total:"}),r.jsx("div",{className:"font-medium",children:La(s.xp)})]})]}),r.jsxs("div",{className:`bg-red-500/10 border border-red-500/20 rounded-lg ${j?"p-2":"p-4"}`,children:[r.jsxs("div",{className:`flex items-center gap-2 mb-2 ${j?"mb-1":""}`,children:[r.jsx(kC,{className:`text-red-400 ${j?"h-3 w-3":"h-5 w-5"}`}),r.jsx("span",{className:`font-medium text-red-400 ${j?"text-xs":"text-sm"}`,children:"Aviso de Permadeath"})]}),r.jsx("p",{className:`text-red-400 mb-2 ${j?"text-xs mb-1":"text-sm"}`,children:i?"Este personagem foi permanentemente deletado.":"Este personagem será permanentemente deletado ao continuar."}),r.jsx("p",{className:"text-red-300 text-xs",children:"Suas estatísticas serão salvas no ranking para comparação."})]})]}),i&&r.jsx("div",{className:`bg-blue-500/10 border border-blue-500/20 rounded-lg ${j?"p-2":"p-3"}`,children:r.jsxs("div",{className:"text-blue-400 text-xs",children:["💀 ",r.jsx("strong",{children:"Estatísticas da Jornada:"}),r.jsx("br",{}),r.jsxs("div",{className:`mt-1 ${j?"grid grid-cols-2 gap-1":""}`,children:[r.jsxs("div",{children:["• Nível alcançado: ",s.level]}),r.jsxs("div",{children:["• Andar mais alto: ",s.floor]}),r.jsxs("div",{children:["• Gold acumulado: ",s.gold]}),r.jsxs("div",{children:["• XP total: ",s.xp]})]})]})})]}),r.jsxs("div",{className:`flex gap-2 ${j?"flex-row pt-2":"flex-col pt-4"}`,children:[i&&r.jsxs(de,{variant:"outline",onClick:N,className:`border-blue-500/30 text-blue-400 hover:bg-blue-500/10 ${j?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[r.jsx(jo,{className:`mr-1 ${j?"h-3 w-3":"h-4 w-4 mr-2"}`}),j?"Cemitério":"Ver Cemitério"]}),r.jsx(de,{variant:"destructive",onClick:w,disabled:p||x,className:`${j?"flex-1 text-xs h-8":"w-full"}`,children:p||x?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:`animate-spin rounded-full border-t-2 border-b-2 border-white ${j?"h-3 w-3":"h-4 w-4"}`}),"Finalizando..."]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Js,{className:`${j?"h-3 w-3":"h-4 w-4"}`}),j?"Aceitar Derrota":i?"Criar Novo Personagem":"Aceitar Derrota e Salvar"]})}),r.jsxs(de,{variant:"outline",onClick:E,className:`${j?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[r.jsx(Er,{className:`mr-1 ${j?"h-3 w-3":"h-4 w-4 mr-2"}`}),j?"Ranking":"Ver Ranking"]})]})]})})}function vK(){const{gameState:t,performAction:e,loading:s}=Pc(),{currentSpecialEvent:a,player:n}=t;if(!a)return null;const i=()=>{e("interact_event")},c=cv.getEventIcon(a.type),u=cv.getEventColor(a.type),f=Math.ceil(n.max_hp*a.hp_restore_percent/100),h=Math.ceil(n.max_mana*a.mana_restore_percent/100),p=a.gold_reward_max>0?`${a.gold_reward_min}-${a.gold_reward_max}`:"0";return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:`text-8xl mb-4 ${u}`,children:c}),r.jsx("h1",{className:"text-4xl font-bold mb-2",children:a.name}),r.jsxs("p",{className:"text-xl text-muted-foreground",children:["Andar ",n.floor]})]}),r.jsxs($e,{className:"overflow-hidden border-2 border-primary/20 shadow-xl",children:[r.jsx(ft,{className:"bg-primary/10 text-center",children:r.jsx(pt,{className:"text-2xl",children:"Evento Especial"})}),r.jsxs(He,{className:"p-8",children:[r.jsx("div",{className:"text-center mb-8",children:r.jsx("p",{className:"text-lg leading-relaxed",children:a.description})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.hp_restore_percent>0&&r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-green-500 mb-2",children:"❤️"}),r.jsx("div",{className:"font-semibold text-green-600",children:"Restauração de HP"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Até ",f," HP (",a.hp_restore_percent,"%)"]})]}),a.mana_restore_percent>0&&r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-blue-500 mb-2",children:"💧"}),r.jsx("div",{className:"font-semibold text-blue-600",children:"Restauração de Mana"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Até ",h," Mana (",a.mana_restore_percent,"%)"]})]}),a.gold_reward_max>0&&r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-yellow-500 mb-2",children:"💰"}),r.jsx("div",{className:"font-semibold text-yellow-600",children:"Recompensa de Gold"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[p," Gold"]})]})]}),r.jsxs("div",{className:"bg-card border rounded-lg p-4 mb-8",children:[r.jsx("h3",{className:"font-semibold mb-3 text-center",children:"Status Atual"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-red-500",children:"❤️"}),r.jsx("div",{className:"text-sm font-medium",children:"HP"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.hp,"/",n.max_hp]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-blue-500",children:"💧"}),r.jsx("div",{className:"text-sm font-medium",children:"Mana"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.mana,"/",n.max_mana]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-yellow-500",children:"💰"}),r.jsx("div",{className:"text-sm font-medium",children:"Gold"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:n.gold})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-purple-500",children:"🏢"}),r.jsx("div",{className:"text-sm font-medium",children:"Andar"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:n.floor})]})]})]}),r.jsx("div",{className:"text-center",children:r.jsx(de,{onClick:i,disabled:s.performAction,size:"lg",className:"px-8 py-3 text-lg",children:s.performAction?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current mr-2"}),"Processando..."]}):r.jsxs(r.Fragment,{children:[c," Interagir"]})})})]})]}),t.gameMessage&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:r.jsx("p",{className:"text-lg",children:t.gameMessage})})})]})})}const yK=({isOpen:t,onClose:e,character:s,onAttributesUpdated:a})=>{const[n,i]=y.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0}),[c,u]=y.useState(!1),f=Ub(),h=Object.values(n).reduce((N,E)=>N+E,0),p=(s.attribute_points||0)-h,g=N=>{p>0&&i(E=>({...E,[N]:E[N]+1}))},x=N=>{n[N]>0&&i(E=>({...E,[N]:E[N]-1}))},b=()=>{i({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},j=async()=>{var N,E;if(h!==0){u(!0);try{const C=await tt.distributeAttributePoints(s.id,n);if(C.success&&((N=C.data)!=null&&N.new_stats)){if(pe.success("Pontos distribuídos com sucesso!"),a){const S={...s,...C.data.new_stats,attribute_points:C.data.new_stats.attribute_points};a(S)}b(),e()}else pe.error("Erro ao distribuir pontos",{description:C.error||((E=C.data)==null?void 0:E.message)})}catch(C){console.error("Erro ao distribuir pontos:",C),pe.error("Erro ao distribuir pontos")}finally{u(!1)}}},w={strength:{label:"Força",icon:Ba,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",benefit:"+2 Ataque + 0.5% Dano Crítico"},dexterity:{label:"Destreza",icon:Ct,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",benefit:"+1.5 Velocidade + 0.3% Crítico"},intelligence:{label:"Inteligência",icon:lt,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",benefit:"+5 Mana + 10% Dano Mágico"},wisdom:{label:"Sabedoria",icon:jo,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",benefit:"+1 Def + 5% Magia + 12% Cura"},vitality:{label:"Vitalidade",icon:cs,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",benefit:"+8 HP + 1 Defesa"},luck:{label:"Sorte",icon:jt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",benefit:"+0.5% Crítico + 1% Dano Crítico"}};return!t||!s.attribute_points||s.attribute_points===0?null:r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Qr,{className:`overflow-hidden ${f?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-2xl max-h-[90vh] overflow-y-auto"}`,children:[r.jsxs(Mn,{className:`${f?"pb-2":"text-center"}`,children:[!f&&r.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"mx-auto w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(jt,{className:"h-8 w-8 text-yellow-500"})}),r.jsxs(Rs.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center"}`,children:[f&&r.jsx(Rs.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(jt,{className:"h-5 w-5 text-yellow-500"})}),r.jsxs("div",{className:f?"text-left flex-1":"text-center",children:[r.jsx(Jr,{className:`font-bold ${f?"text-lg":"text-xl"}`,children:"Distribuir Pontos de Atributo"}),r.jsx(vc,{asChild:!0,children:r.jsxs("div",{className:`${f?"flex items-center justify-between mt-1":"text-center space-y-3"}`,children:[r.jsxs(ze,{variant:"outline",className:`bg-yellow-500/10 border-yellow-500/30 text-yellow-400 ${f?"px-2 py-1 text-xs":"px-3 py-1"}`,children:[r.jsx(jt,{className:`mr-2 ${f?"h-3 w-3":"h-4 w-4"}`}),p," pontos"]}),!f&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"Distribua seus pontos estrategicamente para fortalecer seu personagem na torre."})]})})]})]})]}),r.jsx("div",{className:`${f?"overflow-y-auto max-h-[calc(95vh-120px)]":""}`,children:r.jsxs(Rs.div,{className:`${f?"py-2":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[r.jsx("div",{className:`${f?"grid grid-cols-2 gap-2 mb-3":"space-y-3"}`,children:Object.entries(w).map(([N,E])=>{const C=N,S=s[C]||0,P=E.icon;return r.jsxs(Rs.div,{className:`flex items-center gap-2 rounded-lg border ${E.bgColor} ${E.borderColor} ${f?"p-2 text-xs":"gap-3 p-3"}`,whileHover:{scale:1.01},children:[r.jsxs("div",{className:`flex items-center gap-2 flex-1 ${f?"min-w-0":"gap-3"}`,children:[r.jsx(P,{className:`flex-shrink-0 ${E.color} ${f?"h-4 w-4":"h-5 w-5"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs truncate":"text-sm"}`,children:E.label}),!f&&r.jsx("div",{className:"text-xs text-muted-foreground",children:E.benefit})]})]}),r.jsx("div",{className:`text-center ${f?"min-w-[40px]":"min-w-[60px]"}`,children:r.jsxs("div",{className:`font-bold ${f?"text-xs":"text-sm"}`,children:[S,n[C]>0&&r.jsxs("span",{className:"text-green-400 ml-1",children:["+",n[C]]})]})}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(de,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>x(C),disabled:n[C]===0,children:r.jsx(SC,{className:f?"h-3 w-3":"h-4 w-4"})}),r.jsx("div",{className:`text-center font-mono ${f?"w-6 text-xs":"w-8 text-sm"}`,children:n[C]}),r.jsx(de,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>g(C),disabled:p===0,children:r.jsx(Io,{className:f?"h-3 w-3":"h-4 w-4"})})]})]},C)})}),h>0&&r.jsxs(Rs.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`bg-primary/5 border border-primary/20 rounded-lg ${f?"p-2 mt-2":"p-3"}`,children:[r.jsxs("div",{className:`font-medium mb-2 flex items-center gap-2 ${f?"text-xs":"text-sm"}`,children:[r.jsx(ta,{className:`text-primary ${f?"h-3 w-3":"h-4 w-4"}`}),"Preview dos Melhoramentos"]}),r.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-xs"}`,children:[n.vitality>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"text-green-400",children:["+",n.vitality*8]})]}),n.intelligence>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mana:"}),r.jsxs("span",{className:"text-blue-400",children:["+",n.intelligence*5]})]}),n.strength>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ataque:"}),r.jsxs("span",{className:"text-red-400",children:["+",n.strength*2]})]}),n.dexterity>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Velocidade:"}),r.jsxs("span",{className:"text-green-400",children:["+",Math.floor(n.dexterity*1.5)]})]})]})]})]})}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(de,{variant:"outline",onClick:e,className:`flex-1 ${f?"text-xs h-8":""}`,children:"Cancelar"}),h>0&&r.jsxs(de,{variant:"outline",onClick:b,className:`flex-1 ${f?"text-xs h-8":""}`,children:[r.jsx(EC,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Reset":"Resetar"]}),r.jsxs(de,{onClick:j,disabled:c||h===0,className:`flex-1 bg-emerald-500 hover:bg-emerald-600 ${f?"text-xs h-8":""}`,children:[c?r.jsx("div",{className:`animate-spin rounded-full border-2 border-white border-t-transparent mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}):r.jsx(vy,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?`OK (${h})`:`Confirmar (${h})`]})]})]})})};function bK({currentFloor:t,playerLevel:e}){he.useEffect(()=>{console.log("[BattleHeader] Props recebidas:"),console.log("- currentFloor:",t==null?void 0:t.description,`(tipo: ${t==null?void 0:t.type})`),console.log("- playerLevel:",e)},[t,e]);const s=f=>{switch(f){case"boss":return"👑";case"elite":return"⭐";case"event":return"❓";default:return"🗺️"}},a=t.floorNumber||1,n=Math.ceil(a/20),i=(a-1)%20+1,c=[5,10,15,20].includes(i),u=n>1;return r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 flex-wrap",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary",children:[s(t.type)," ",t.description]}),r.jsxs(ze,{variant:"outline",className:"bg-background/50",children:[r.jsx(lI,{className:"h-3 w-3 mr-1"}),"Andar ",a]}),u&&r.jsxs(ze,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:[r.jsx(ki,{className:"h-3 w-3 mr-1"}),"Tier ",n]}),c&&r.jsxs(ze,{className:"bg-red-500/20 text-red-400 border-red-500/30 animate-pulse",children:[r.jsx(ta,{className:"h-3 w-3 mr-1"}),"BOSS"]}),t.isCheckpoint&&r.jsxs(ze,{className:"bg-primary/20 text-primary",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Checkpoint"]})]}),u&&r.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:r.jsxs("span",{className:"bg-purple-500/10 px-2 py-1 rounded border border-purple-500/20",children:["Sistema Cíclico: Posição ",i,"/20 no Ciclo ",n,c&&" • Monstros Escalados"]})}),e<t.minLevel&&r.jsxs("div",{className:"text-yellow-500 text-sm",children:["⚠️ Nível recomendado: ",t.minLevel]}),u&&r.jsx("div",{className:"text-sm text-purple-400 mt-2",children:"Os monstros foram fortalecidos pelo poder ancestral da torre!"})]})})}var Ep="Popover",[oM,tZ]=or(Ep,[Rc]),Fd=Rc(),[_K,Uo]=oM(Ep),iM=t=>{const{__scopePopover:e,children:s,open:a,defaultOpen:n,onOpenChange:i,modal:c=!1}=t,u=Fd(e),f=y.useRef(null),[h,p]=y.useState(!1),[g,x]=Ro({prop:a,defaultProp:n??!1,onChange:i,caller:Ep});return r.jsx(Eb,{...u,children:r.jsx(_K,{scope:e,contentId:Hr(),triggerRef:f,open:g,onOpenChange:x,onOpenToggle:y.useCallback(()=>x(b=>!b),[x]),hasCustomAnchor:h,onCustomAnchorAdd:y.useCallback(()=>p(!0),[]),onCustomAnchorRemove:y.useCallback(()=>p(!1),[]),modal:c,children:s})})};iM.displayName=Ep;var lM="PopoverAnchor",wK=y.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Uo(lM,s),i=Fd(s),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=n;return y.useEffect(()=>(c(),()=>u()),[c,u]),r.jsx(pp,{...i,...a,ref:e})});wK.displayName=lM;var cM="PopoverTrigger",uM=y.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Uo(cM,s),i=Fd(s),c=_t(e,n.triggerRef),u=r.jsx(We.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":pM(n.open),...a,ref:c,onClick:Ge(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?u:r.jsx(pp,{asChild:!0,...i,children:u})});uM.displayName=cM;var zb="PopoverPortal",[jK,NK]=oM(zb,{forceMount:void 0}),dM=t=>{const{__scopePopover:e,forceMount:s,children:a,container:n}=t,i=Uo(zb,e);return r.jsx(jK,{scope:e,forceMount:s,children:r.jsx(Va,{present:s||i.open,children:r.jsx(Ym,{asChild:!0,container:n,children:a})})})};dM.displayName=zb;var _c="PopoverContent",fM=y.forwardRef((t,e)=>{const s=NK(_c,t.__scopePopover),{forceMount:a=s.forceMount,...n}=t,i=Uo(_c,t.__scopePopover);return r.jsx(Va,{present:a||i.open,children:i.modal?r.jsx(EK,{...n,ref:e}):r.jsx(CK,{...n,ref:e})})});fM.displayName=_c;var SK=Ti("PopoverContent.RemoveScroll"),EK=y.forwardRef((t,e)=>{const s=Uo(_c,t.__scopePopover),a=y.useRef(null),n=_t(e,a),i=y.useRef(!1);return y.useEffect(()=>{const c=a.current;if(c)return jy(c)},[]),r.jsx(Wm,{as:SK,allowPinchZoom:!0,children:r.jsx(hM,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(t.onCloseAutoFocus,c=>{var u;c.preventDefault(),i.current||(u=s.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Ge(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ge(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),CK=y.forwardRef((t,e)=>{const s=Uo(_c,t.__scopePopover),a=y.useRef(!1),n=y.useRef(!1);return r.jsx(hM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(a.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),hM=y.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,...g}=t,x=Uo(_c,s),b=Fd(s);return wy(),r.jsx(Xm,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:r.jsx($d,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:p,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:r.jsx(Cb,{"data-state":pM(x.open),role:"dialog",id:x.contentId,...b,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mM="PopoverClose",kK=y.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Uo(mM,s);return r.jsx(We.button,{type:"button",...a,ref:e,onClick:Ge(t.onClick,()=>n.onOpenChange(!1))})});kK.displayName=mM;var AK="PopoverArrow",TK=y.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Fd(s);return r.jsx(kb,{...n,...a,ref:e})});TK.displayName=AK;function pM(t){return t?"open":"closed"}var RK=iM,MK=uM,PK=dM,gM=fM;const DK=RK,OK=MK,xM=y.forwardRef(({className:t,align:e="center",sideOffset:s=4,...a},n)=>r.jsx(PK,{children:r.jsx(gM,{ref:n,align:e,sideOffset:s,className:Ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...a})}));xM.displayName=gM.displayName;var Cp="Checkbox",[$K,sZ]=or(Cp),[LK,Fb]=$K(Cp);function IK(t){const{__scopeCheckbox:e,checked:s,children:a,defaultChecked:n,disabled:i,form:c,name:u,onCheckedChange:f,required:h,value:p="on",internal_do_not_use_render:g}=t,[x,b]=Ro({prop:s,defaultProp:n??!1,onChange:f,caller:Cp}),[j,w]=y.useState(null),[N,E]=y.useState(null),C=y.useRef(!1),S=j?!!c||!!j.closest("form"):!0,P={checked:x,disabled:i,setChecked:b,control:j,setControl:w,name:u,form:c,value:p,hasConsumerStoppedPropagationRef:C,required:h,defaultChecked:So(n)?!1:n,isFormControl:S,bubbleInput:N,setBubbleInput:E};return r.jsx(LK,{scope:e,...P,children:BK(g)?g(P):a})}var vM="CheckboxTrigger",yM=y.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:s,...a},n)=>{const{control:i,value:c,disabled:u,checked:f,required:h,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:x,isFormControl:b,bubbleInput:j}=Fb(vM,t),w=_t(n,p),N=y.useRef(f);return y.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const C=()=>g(N.current);return E.addEventListener("reset",C),()=>E.removeEventListener("reset",C)}},[i,g]),r.jsx(We.button,{type:"button",role:"checkbox","aria-checked":So(f)?"mixed":f,"aria-required":h,"data-state":NM(f),"data-disabled":u?"":void 0,disabled:u,value:c,...a,ref:w,onKeyDown:Ge(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:Ge(s,E=>{g(C=>So(C)?!0:!C),j&&b&&(x.current=E.isPropagationStopped(),x.current||E.stopPropagation())})})});yM.displayName=vM;var Hb=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:a,checked:n,defaultChecked:i,required:c,disabled:u,value:f,onCheckedChange:h,form:p,...g}=t;return r.jsx(IK,{__scopeCheckbox:s,checked:n,defaultChecked:i,disabled:u,required:c,onCheckedChange:h,name:a,form:p,value:f,internal_do_not_use_render:({isFormControl:x})=>r.jsxs(r.Fragment,{children:[r.jsx(yM,{...g,ref:e,__scopeCheckbox:s}),x&&r.jsx(jM,{__scopeCheckbox:s})]})})});Hb.displayName=Cp;var bM="CheckboxIndicator",_M=y.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:a,...n}=t,i=Fb(bM,s);return r.jsx(Va,{present:a||So(i.checked)||i.checked===!0,children:r.jsx(We.span,{"data-state":NM(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...t.style}})})});_M.displayName=bM;var wM="CheckboxBubbleInput",jM=y.forwardRef(({__scopeCheckbox:t,...e},s)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:c,required:u,disabled:f,name:h,value:p,form:g,bubbleInput:x,setBubbleInput:b}=Fb(wM,t),j=_t(s,b),w=e4(i),N=FT(a);y.useEffect(()=>{const C=x;if(!C)return;const S=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(S,"checked").set,D=!n.current;if(w!==i&&R){const $=new Event("click",{bubbles:D});C.indeterminate=So(i),R.call(C,So(i)?!1:i),C.dispatchEvent($)}},[x,w,i,n]);const E=y.useRef(So(i)?!1:i);return r.jsx(We.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??E.current,required:u,disabled:f,name:h,value:p,form:g,...e,tabIndex:-1,ref:j,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jM.displayName=wM;function BK(t){return typeof t=="function"}function So(t){return t==="indeterminate"}function NM(t){return So(t)?"indeterminate":t?"checked":"unchecked"}const SM=y.forwardRef(({className:t,...e},s)=>r.jsx(Hb,{ref:s,className:Ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:r.jsx(_M,{className:Ve("flex items-center justify-center text-current"),children:r.jsx(xy,{className:"h-4 w-4"})})}));SM.displayName=Hb.displayName;function VK({gameLog:t}){const e=y.useRef(null),[s,a]=y.useState({system:!0,battle:!0,lore:!0,skill_xp:!0,level_up:!0,equipment:!0,enemy_action:!0,player_action:!0,damage:!0,healing:!0});y.useEffect(()=>{if(e.current){const g=e.current.querySelector("[data-radix-scroll-area-viewport]");g&&(g.scrollTop=g.scrollHeight)}},[t]);const n=(g,x)=>{a(b=>({...b,[g]:x}))},i=g=>{a({system:g,battle:g,lore:g,skill_xp:g,level_up:g,equipment:g,enemy_action:g,player_action:g,damage:g,healing:g})},c=t.filter(g=>s[g.type]),u=g=>{switch(g){case"system":return"text-blue-400";case"battle":return"text-foreground";case"lore":return"text-purple-400 italic";case"skill_xp":return"text-green-400";case"level_up":return"text-yellow-400 font-semibold";case"equipment":return"text-orange-400";case"enemy_action":return"text-red-400";case"player_action":return"text-blue-400";case"damage":return"text-red-300";case"healing":return"text-green-300";default:return"text-foreground"}},f=g=>{switch(g){case"enemy_action":return r.jsx(At,{className:"h-3 w-3 text-red-400 mr-2"});case"player_action":return r.jsx(yt,{className:"h-3 w-3 text-blue-400 mr-2"});case"damage":return r.jsx(Ct,{className:"h-3 w-3 text-red-300 mr-2"});case"healing":return r.jsx(lt,{className:"h-3 w-3 text-green-300 mr-2"});case"level_up":return r.jsx("span",{className:"mr-2",children:"🌟"});case"equipment":return r.jsx("span",{className:"mr-2",children:"⚔️"});case"skill_xp":return r.jsx("span",{className:"mr-2",children:"📈"});case"lore":return r.jsx("span",{className:"mr-2",children:"📜"});default:return null}},h=g=>{switch(g){case"system":return"Sistema";case"battle":return"Batalha";case"lore":return"História";case"skill_xp":return"XP de Habilidade";case"level_up":return"Level Up";case"equipment":return"Equipamentos";case"enemy_action":return"Ações do Inimigo";case"player_action":return"Ações do Jogador";case"damage":return"Dano";case"healing":return"Cura";default:return g}},p=g=>{let x=g.text;if(x.includes("causou")&&x.includes("de dano")){const b=x.match(/(\d+)\s+de dano/);if(b){const j=b[1];x=x.replace(`${j} de dano`,`**${j}** de dano`)}}if(x.includes("recuperou")&&x.includes("HP")){const b=x.match(/(\d+)\s+HP/);if(b){const j=b[1];x=x.replace(`${j} HP`,`**${j}** HP`)}}return x};return r.jsxs($e,{className:"mt-6",children:[r.jsxs(ft,{className:"pb-2 flex flex-row items-center justify-between",children:[r.jsxs(pt,{className:"text-lg flex items-center gap-2",children:[r.jsx(QN,{className:"h-5 w-5"}),"Log de Batalha"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.length,"/",t.length]}),r.jsxs(DK,{children:[r.jsx(OK,{asChild:!0,children:r.jsx(de,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(wd,{className:"h-4 w-4"})})}),r.jsx(xM,{className:"w-80",align:"end",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium",children:"Filtros do Log"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>i(!0),className:"h-6 px-2 text-xs",children:[r.jsx(jo,{className:"h-3 w-3 mr-1"}),"Todos"]}),r.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-6 px-2 text-xs",children:[r.jsx(MI,{className:"h-3 w-3 mr-1"}),"Nenhum"]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s).map(([g,x])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(SM,{id:g,checked:x,onCheckedChange:b=>n(g,!!b)}),r.jsx("label",{htmlFor:g,className:`text-xs font-medium cursor-pointer ${u(g)}`,children:h(g)})]},g))})]})})]})]})]}),r.jsx(He,{children:r.jsx(ec,{ref:e,className:"h-56 rounded border p-3 bg-card/50 backdrop-blur-sm",children:c.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:r.jsxs("div",{className:"text-center",children:[r.jsx(QN,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:t.length===0?"Nenhum evento ainda":"Nenhum evento corresponde aos filtros"})]})}):r.jsx("div",{className:"space-y-2",children:c.map((g,x)=>r.jsxs("div",{className:`flex items-start text-sm leading-relaxed ${u(g.type)} transition-all duration-200 hover:bg-muted/20 rounded p-2 -m-2`,children:[f(g.type),r.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:p(g).replace(/\*\*(.+?)\*\*/g,'<strong class="text-yellow-300">$1</strong>')}}),r.jsx("span",{className:"text-xs text-muted-foreground/60 ml-2 flex-shrink-0",children:new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},`${x}-${g.text.substring(0,20)}`))})})})]})}const qK=t=>{switch(t.effect_type){case"damage":return r.jsx(Hm,{className:"w-3 h-3"});case"heal":return r.jsx(cs,{className:"w-3 h-3"});case"buff":return r.jsx(lt,{className:"w-3 h-3"});case"debuff":return r.jsx(CC,{className:"w-3 h-3"});default:return r.jsx(Ct,{className:"w-3 h-3"})}},UK=t=>{switch(t.effect_type){case"damage":return"bg-red-500/20 hover:bg-red-500/30 border-red-500/50";case"heal":return"bg-green-500/20 hover:bg-green-500/30 border-green-500/50";case"buff":return"bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50";case"debuff":return"bg-purple-500/20 hover:bg-purple-500/30 border-purple-500/50";default:return"bg-slate-500/20 hover:bg-slate-500/30 border-slate-500/50"}};function pE({handleAction:t,isPlayerTurn:e,loading:s,player:a,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i}){var g;const[c,u]=y.useState([]),f=((g=a.spells)==null?void 0:g.slice(0,3))||[];y.useEffect(()=>{(async()=>{if(!a.consumables)return;const b=a.consumables.filter(j=>{var w;return((w=j.consumable)==null?void 0:w.type)==="potion"&&j.quantity>0}).slice(0,3).map(j=>({id:j.id,consumable_id:j.consumable_id,consumable:{id:j.consumable.id,name:j.consumable.name,type:j.consumable.type,effect_value:j.consumable.effect_value},quantity:j.quantity}));u(b)})()},[a.consumables]);const h=async x=>{if(!(!e||s.performAction||a.potionUsedThisTurn))try{if((await zt.consumeItem(a.id,x.consumable_id,a)).success){const j=x.consumable.effect_value,w=Math.min(a.max_hp,a.hp+j),N=Math.min(a.max_mana,a.mana);n(w,N);const E=a.consumables.map(C=>C.consumable_id===x.consumable_id?{...C,quantity:C.quantity-1}:C).filter(C=>C.quantity>0);i(E)}}catch(b){console.error("Erro ao usar poção:",b)}},p=!e||s.performAction;return r.jsxs("div",{className:"quick-action-panel flex flex-col gap-1 p-2 bg-slate-900/40 rounded-lg border border-slate-700/50 w-16 shadow-lg",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"relative",children:[r.jsx(de,{variant:"outline",size:"sm",onClick:()=>t("attack"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-red-500/20 hover:bg-red-500/30 border-red-500/50 text-red-400 transition-all duration-150",title:"Atacar (A)",children:r.jsx(At,{className:"w-4 h-4"})}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"A"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t("defend"),disabled:p||a.defenseCooldown>0,className:`quick-action-button w-12 h-12 p-0 bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50 text-blue-400 transition-all duration-150 relative ${a.defenseCooldown>0?"opacity-50":""}`,title:`Defender (S)${a.defenseCooldown>0?` - Cooldown: ${a.defenseCooldown}`:""}`,children:[r.jsx(yt,{className:"w-4 h-4"}),a.defenseCooldown>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:a.defenseCooldown})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"S"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(de,{variant:"outline",size:"sm",onClick:()=>t("flee"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-yellow-500/20 hover:bg-yellow-500/30 border-yellow-500/50 text-yellow-400 transition-all duration-150",title:"Fugir (D)",children:r.jsx(ds,{className:"w-4 h-4"})}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"D"})]})]}),r.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),r.jsx("div",{className:"flex flex-col gap-1",children:f.map((x,b)=>{const j=a.mana>=x.mana_cost&&x.current_cooldown===0;return r.jsxs("div",{className:"relative",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t("spell",x.id),disabled:p||!j,className:`quick-action-button w-12 h-12 p-0 ${UK(x)} relative transition-all duration-150 ${j?"":"opacity-50"}`,title:`${x.name} (${1+b}) - ${x.mana_cost} Mana${x.current_cooldown>0?` - Cooldown: ${x.current_cooldown}`:a.mana<x.mana_cost?" - Mana insuficiente":""}`,children:[qK(x),x.current_cooldown>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.current_cooldown}),r.jsx("span",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center ${a.mana>=x.mana_cost?"bg-blue-600":"bg-red-600"}`,children:x.mana_cost})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:1+b})]},x.id)})}),c.length>0&&r.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),r.jsx("div",{className:"flex flex-col gap-1",children:c.map((x,b)=>r.jsxs("div",{className:"relative",children:[r.jsxs(de,{variant:"outline",size:"sm",onClick:()=>h(x),disabled:p||a.potionUsedThisTurn,className:`quick-action-button w-12 h-12 p-0 bg-green-500/20 hover:bg-green-500/30 border-green-500/50 text-green-400 relative transition-all duration-150 ${a.potionUsedThisTurn?"opacity-50":""}`,title:`${x.consumable.name} (${["Q","W","E"][b]}) - Cura ${x.consumable.effect_value} HP${a.potionUsedThisTurn?" - Já usou poção neste turno":""}`,children:[r.jsx(cs,{className:"w-4 h-4"}),r.jsx("span",{className:"absolute -bottom-1 -right-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.quantity}),a.potionUsedThisTurn&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-orange-500/30 rounded-lg",children:r.jsx("span",{className:"text-orange-400 text-xs font-bold",children:"✗"})})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:["Q","W","E"][b]})]},x.id))})]})}const zK=({isVisible:t,isSuccess:e,playerName:s,enemyName:a,onComplete:n})=>{const[i,c]=y.useState(!1),[u,f]=y.useState(0);if(y.useEffect(()=>(c(!0),()=>c(!1)),[]),y.useEffect(()=>{if(!t)return;console.log(`[FleeOverlay] 🎭 Overlay ativado - Sucesso: ${e}, Jogador: ${s}, Inimigo: ${a}`);const g=setInterval(()=>{f(b=>Math.min(b+(e?2.5:3.3),100))},50),x=setTimeout(()=>{console.log("[FleeOverlay] ⏰ Tempo esgotado - Chamando onComplete"),n()},e?3e3:2500);return()=>{clearInterval(g),clearTimeout(x)}},[t,e,s,a,n]),!i||!t)return null;const p=e?{emoji:"🏃‍♂️",title:"Fuga Bem-Sucedida!",subtitle:"Redirecionando para o hub...",description:a?`${s} conseguiu fugir de ${a}!`:`${s} conseguiu escapar!`,bgColor:"bg-gradient-to-r from-green-500/20 via-emerald-500/20 to-teal-500/20",borderColor:"border-green-500/30",textColor:"text-green-400",accentColor:"border-green-400"}:{emoji:"⚔️",title:"Fuga Falhou!",subtitle:"Prepare-se para o contra-ataque...",description:a?`${a} impediu a fuga de ${s}!`:`O inimigo impediu a fuga de ${s}!`,bgColor:"bg-gradient-to-r from-red-500/20 via-orange-500/20 to-yellow-500/20",borderColor:"border-red-500/30",textColor:"text-red-400",accentColor:"border-red-400"};return r.jsxs("div",{className:"fixed inset-0 backdrop-blur-md z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40"}),r.jsxs("div",{className:`relative ${p.bgColor} border ${p.borderColor} rounded-2xl p-8 shadow-2xl max-w-md mx-4 transform transition-all duration-500 animate-in zoom-in-95 fade-in-0`,children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:`text-6xl ${e?"animate-bounce":"animate-pulse"} transition-all duration-300`,children:p.emoji}),r.jsx("div",{className:`font-bold text-2xl ${p.textColor}`,children:p.title}),r.jsx("div",{className:"text-muted-foreground text-base",children:p.subtitle}),r.jsx("div",{className:"w-full bg-background/30 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-150 ease-out ${e?"bg-green-400":"bg-red-400"}`,style:{width:`${u}%`}})}),r.jsx("div",{className:"text-sm text-muted-foreground/90 leading-relaxed px-2",children:p.description}),r.jsxs("div",{className:"flex items-center justify-center gap-3 pt-2",children:[r.jsx("div",{className:`animate-spin rounded-full h-5 w-5 border-2 border-t-transparent ${p.accentColor}`}),r.jsx("span",{className:`text-sm font-medium ${p.textColor}`,children:e?"Redirecionando...":"Retornando..."})]})]}),r.jsx("div",{className:`absolute inset-0 rounded-2xl border-2 ${p.borderColor} animate-pulse pointer-events-none`})]})]})};function FK(){const t=Pt(),{user:e}=zs(),{gameState:s,performAction:a,loading:n,initializeBattle:i,addGameLogMessage:c,updatePlayerStats:u,updatePlayerConsumables:f,gameLog:h}=Pc(),{player:p,currentEnemy:g,currentFloor:x,isPlayerTurn:b}=s,[j,w]=y.useState(!1),[N,E]=y.useState(!1),[C,S]=y.useState(!1),[P,R]=y.useState(!1),[D,$]=y.useState(!1),[k,M]=y.useState(!0),[V,Y]=y.useState(!1),[B,z]=y.useState({xp:0,gold:0,drops:[],leveledUp:!1,newLevel:0}),Q=y.useRef(!1),H=y.useRef(0),A=y.useRef(!1),I=y.useRef(!1),q=y.useRef(null),K=y.useRef(new Set),{character:L}=ly({from:"/_authenticated/game/play/hub/battle/$character"}),X=y.useMemo(()=>{const ve=g&&g.maxHp>0?Math.max(0,Math.min(100,g.hp/g.maxHp*100)):0,Pe=p.max_hp>0?Math.max(0,Math.min(100,p.hp/p.max_hp*100)):0,fe=p.max_mana>0?Math.max(0,Math.min(100,p.mana/p.max_mana*100)):0;return{enemyHpPercentage:ve,playerHpPercentage:Pe,playerManaPercentage:fe}},[g==null?void 0:g.hp,g==null?void 0:g.maxHp,p.hp,p.max_hp,p.mana,p.max_mana]);y.useEffect(()=>(I.current=!0,()=>{I.current=!1,A.current=!1,q.current=null}),[]),y.useEffect(()=>{if(!I.current||!(e!=null&&e.id)||!L||A.current&&q.current===L||n.loadProgress)return;const ve=async()=>{try{console.log(`[GameBattle] Inicializando batalha para personagem ${L}`),A.current=!0,q.current=L;const fe=await tt.getCharacter(L);if(!fe.success||!fe.data)throw new Error(fe.error||"Personagem não encontrado");await i(fe.data,L),M(!1),console.log("[GameBattle] Batalha inicializada com sucesso")}catch(fe){console.error("[GameBattle] Erro ao inicializar batalha:",fe),A.current=!1,q.current=null,pe.error("Erro ao inicializar batalha",{description:fe instanceof Error?fe.message:"Erro desconhecido"})}},Pe=setTimeout(()=>{I.current&&!A.current&&ve()},100);return()=>clearTimeout(Pe)},[e==null?void 0:e.id,L,i,n.loadProgress]),y.useEffect(()=>{if(!s.battleRewards||j)return;const ve=`${p.floor}-${(g==null?void 0:g.name)||"unknown"}-${s.battleRewards.xp}-${s.battleRewards.gold}`;if(K.current.has(ve)){console.log(`[GameBattle] Recompensa já processada: ${ve}`);return}K.current.add(ve),console.log("[GameBattle] Processando recompensa de vitória");const Pe=s.battleRewards;z({xp:Pe.xp,gold:Pe.gold,drops:Pe.drops||[],leveledUp:Pe.leveledUp,newLevel:Pe.newLevel}),w(!0),c(`Vitória! Você derrotou o inimigo e recebeu ${Pe.xp} XP e ${Pe.gold} Gold.`,"system"),Pe.leveledUp&&Pe.newLevel&&c(`Você subiu para o nível ${Pe.newLevel}!`,"system"),setTimeout(()=>{K.current.size>10&&K.current.clear()},5e3)},[s.battleRewards,j,p.floor,g==null?void 0:g.name,c]),y.useEffect(()=>{s.mode==="gameover"&&p.hp<=0&&!N&&(console.log("[GameBattle] Personagem morreu - exibindo modal de morte"),E(!0),s.characterDeleted&&c(`${p.name} foi perdido permanentemente. O sistema de Permadeath está ativo.`,"system"))},[s.mode,p.hp,s.characterDeleted,p.name,c,N]),y.useEffect(()=>{if((s.mode==="fled"||s.fleeSuccessful===!0)&&!P){console.log("[GameBattle] Fuga detectada - ativando overlay");const Pe=s.mode==="fled"||s.fleeSuccessful===!0;$(Pe),R(!0),Q.current=!0}},[s.mode,s.fleeSuccessful,P]),y.useEffect(()=>{const ve=()=>{const Pe=window.innerWidth<=768,fe=window.innerHeight>window.innerWidth;Y(Pe&&fe)};return ve(),window.addEventListener("resize",ve),window.addEventListener("orientationchange",ve),()=>{window.removeEventListener("resize",ve),window.removeEventListener("orientationchange",ve)}},[]),y.useEffect(()=>{const ve=()=>S(!0);return window.addEventListener("openAttributeModal",ve),()=>window.removeEventListener("openAttributeModal",ve)},[]);const ne=y.useCallback(async(ve,Pe,fe)=>{const Re=Date.now();if(console.log(`[GameBattle] Executando ação: ${ve}`),s.mode==="gameover"||p.hp<=0){console.warn("[GameBattle] Ação bloqueada - personagem está morto");return}if(!(ve==="consumable"||ve==="flee"||ve==="continue")&&!b){console.warn(`[GameBattle] Ação '${ve}' bloqueada - não é turno do jogador`);return}if(ve!=="consumable"&&Re-H.current<300){console.warn("[GameBattle] Debounce - aguardando");return}H.current=Re;try{console.log(`[GameBattle] Delegando ação '${ve}' para provider`),await a(ve,Pe,fe)}catch(et){console.error(`[GameBattle] Erro ao executar ação '${ve}':`,et),pe.error(`Erro ao executar ação: ${ve}`)}},[s.mode,p.hp,b,a]),te=y.useCallback(ve=>{console.log("[game-battle] Atualizando consumáveis do jogador:",ve.length),f(ve)},[f]),ie=y.useCallback((ve,Pe)=>{console.log(`[game-battle] Atualizando stats do jogador: HP ${ve}, Mana ${Pe}`),u(ve,Pe),s.player.id&&tt.updateCharacterHpMana(s.player.id,ve,Pe).then(fe=>{fe.success||(console.error("[game-battle] Erro ao atualizar stats no banco:",fe.error),pe.error("Erro ao atualizar status do personagem"))}).catch(fe=>{console.error("[game-battle] Erro ao atualizar stats:",fe),pe.error("Erro ao atualizar status do personagem")})},[u,s.player.id]),le=y.useCallback(async()=>{if(Q.current||n.performAction){console.warn("[GameBattle] Continuar aventura bloqueado - já processando ação");return}Q.current=!0,w(!1);try{console.log("[GameBattle] Chamando performAction('continue')..."),await ne("continue")}catch(ve){console.error("[GameBattle] Erro ao avançar:",ve),pe.error("Erro ao avançar para o próximo andar"),w(!0)}finally{Q.current=!1}},[n.performAction,ne]),ae=y.useCallback(()=>{t({to:"/game/play/hub",search:{character:s.player.id}})},[t,s.player.id]),ue=y.useCallback(()=>{t({to:"/game/play"})},[t]),ce=y.useCallback(()=>{S(!0),w(!1)},[]),we=y.useCallback(async()=>{if(console.log("[GameBattle] Overlay de fuga concluído, sucesso:",D),R(!1),Q.current=!1,D){console.log("[GameBattle] Fuga bem-sucedida - redirecionando"),pe.success("Fuga bem-sucedida!",{description:"Retornando ao hub...",duration:2e3});try{await tt.updateCharacterFloor(s.player.id,1),console.log("[GameBattle] Andar resetado para 1")}catch(ve){console.error("[GameBattle] Erro ao resetar andar:",ve)}t({to:"/game/play/hub",search:{character:s.player.id}})}else pe.warning("Fuga falhou!",{description:"Prepare-se para o contra-ataque...",duration:3e3})},[D,s.player.id,t]),Se=s.mode==="fled"||s.fleeSuccessful===!0||P;if(!Se&&k&&!A.current)return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Inicializando Batalha..."}),r.jsx("p",{className:"text-muted-foreground",children:"Preparando sua aventura..."})]})});if(s.mode==="special_event"||s.currentSpecialEvent)return r.jsx(vK,{});const je=x&&p.id;return!Se&&!je&&!s.battleRewards&&!P?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Carregando dados..."}),r.jsxs("p",{className:"text-muted-foreground",children:[!x&&"Carregando dados do andar...",!p.id&&"Carregando personagem..."]})]})}):r.jsxs(r.Fragment,{children:[n.performAction&&r.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-2 duration-200",children:r.jsx("div",{className:"bg-background/90 backdrop-blur-sm border rounded-lg px-3 py-2 shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-muted-foreground",children:"Processando..."})]})})}),r.jsxs("div",{className:"w-full max-w-6xl",children:[r.jsx(bK,{currentFloor:{floorNumber:p.floor,type:(x==null?void 0:x.type)||"common",description:(x==null?void 0:x.description)||`Andar ${p.floor}`,isCheckpoint:(x==null?void 0:x.isCheckpoint)||!1,minLevel:(x==null?void 0:x.minLevel)||1},playerLevel:p.level}),r.jsxs("div",{className:"mb-6 relative",children:[!V&&r.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-20 z-10 hidden lg:block",children:r.jsx(pE,{handleAction:ne,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:ie,onPlayerConsumablesUpdate:te})}),!V&&r.jsx("div",{className:"fixed bottom-4 left-4 z-20 block lg:hidden",children:r.jsx(pE,{handleAction:ne,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:ie,onPlayerConsumablesUpdate:te})}),r.jsx(hK,{player:p,currentEnemy:g||{id:"placeholder",name:s.battleRewards?"Inimigo derrotado!":"Preparando próximo inimigo...",level:1,hp:0,maxHp:1,attack:0,defense:0,speed:1,image:s.battleRewards?"💀":"⏳",behavior:"balanced",mana:0,reward_xp:0,reward_gold:0,possible_drops:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}},playerHpPercentage:X.playerHpPercentage,playerManaPercentage:X.playerManaPercentage,enemyHpPercentage:X.enemyHpPercentage,isPlayerTurn:b})]}),r.jsx("div",{className:"mb-6",children:r.jsx(pK,{handleAction:ne,isPlayerTurn:b,loading:n,player:p,onPlayerStatsUpdate:ie,onPlayerConsumablesUpdate:te,currentEnemy:g,battleRewards:s.battleRewards})}),r.jsx(VK,{gameLog:h})]}),r.jsx(gK,{isOpen:j,onContinue:le,onReturnToHub:ae,onOpenAttributeModal:ce,rewards:B,leveledUp:B.leveledUp,newLevel:B.newLevel,hasAttributePoints:(p.attribute_points||0)>0}),r.jsx(xK,{isOpen:N,onClose:()=>E(!1),player:{id:p.id,name:p.name,level:p.level,floor:p.floor,hp:p.hp,max_hp:p.max_hp,xp:p.xp,gold:p.gold},gameMessage:`${p.name} foi derrotado no Andar ${p.floor}...`,highestFloor:p.floor,isCharacterDeleted:s.characterDeleted,userId:e==null?void 0:e.id,onReturnToCharacterSelect:ue,onViewCemetery:()=>{t({to:"/game/play/hub/cemetery",search:{character:p.id}})}}),r.jsx(yK,{isOpen:C,onClose:()=>{S(!1),s.battleRewards&&!j&&w(!0)},character:p}),P&&r.jsx("div",{className:"fixed inset-0 z-50",children:r.jsx(zK,{isVisible:P,isSuccess:D,playerName:p.name,enemyName:g==null?void 0:g.name,onComplete:we})})]})}function HK(){const t=Pt(),{character:e}=EM.useParams(),{loading:s}=Pc(),[a,n]=y.useState(!0),i=y.useRef(!1),c=y.useRef(!1),u=y.useMemo(()=>({isGameLoading:s.loadProgress,shouldShowLoading:a||s.loadProgress}),[s.loadProgress,a]);return y.useEffect(()=>(c.current=!0,()=>{c.current=!1,i.current=!1}),[]),y.useEffect(()=>{if(!c.current)return;const f=u.isGameLoading;if(!f&&a){const h=setTimeout(()=>{c.current&&n(!1)},100);return()=>clearTimeout(h)}else f&&!a&&n(!0)},[u.isGameLoading,a]),y.useEffect(()=>{!c.current||i.current||(e?i.current=!0:(i.current=!0,pe.error("Personagem não especificado",{description:"Redirecionando para a seleção de personagens"}),t({to:"/game/play"})))},[e,t]),u.shouldShowLoading?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-6xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"h-8 w-64 bg-muted/50 animate-pulse rounded mx-auto mb-4"}),r.jsx("div",{className:"h-4 w-48 bg-muted/30 animate-pulse rounded mx-auto"})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(f=>r.jsxs("div",{className:"bg-card rounded-lg overflow-hidden shadow animate-pulse",children:[r.jsx("div",{className:"p-4 bg-muted/20",children:r.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mx-auto"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"aspect-square bg-muted/30 rounded-md mb-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-4 bg-muted/40 rounded w-full"}),r.jsx("div",{className:"h-2 bg-muted/30 rounded w-full"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"h-8 bg-muted/20 rounded"}),r.jsx("div",{className:"h-8 bg-muted/20 rounded"})]})]})]})]},f))}),r.jsxs("div",{className:"bg-card rounded-lg p-4 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-muted/40 rounded w-32 mx-auto mb-4"}),r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"})]})]})]})}):r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsx(FK,{})})}const EM=Yt("/_authenticated/game/play/hub/battle/$character")({component:HK}),Gb=$B.update({id:"/_public",getParentRoute:()=>Fm}),Hd=vq.update({id:"/_authenticated",getParentRoute:()=>Fm}),GK=_q.update({id:"/",path:"/",getParentRoute:()=>Fm}),XK=wq.update({id:"/logout",path:"/logout",getParentRoute:()=>Gb}),CM=RT.update({id:"/auth",path:"/auth",getParentRoute:()=>Gb}),kM=OG.update({id:"/users",path:"/users",getParentRoute:()=>Hd}),YK=HG.update({id:"/profile",path:"/profile",getParentRoute:()=>Hd}),kp=YG.update({id:"/game",path:"/game",getParentRoute:()=>Hd}),KK=ZG.update({id:"/403",path:"/403",getParentRoute:()=>Hd}),WK=JG.update({id:"/verify-email",path:"/verify-email",getParentRoute:()=>CM}),ZK=Q4.update({id:"/$id",path:"/$id",getParentRoute:()=>kM}),QK=oX.update({id:"/ranking",path:"/ranking",getParentRoute:()=>kp}),AM=vX.update({id:"/play",path:"/play",getParentRoute:()=>kp}),JK=ZX.update({id:"/guide",path:"/guide",getParentRoute:()=>kp}),Dn=YR.update({id:"/hub",path:"/hub",getParentRoute:()=>AM}),eW=KR.update({id:"/spells",path:"/spells",getParentRoute:()=>Dn}),tW=eM.update({id:"/shop",path:"/shop",getParentRoute:()=>Dn}),sW=tM.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Dn}),TM=sM.update({id:"/equipment",path:"/equipment",getParentRoute:()=>Dn}),aW=aM.update({id:"/crafting",path:"/crafting",getParentRoute:()=>Dn}),rW=rM.update({id:"/character-stats",path:"/character-stats",getParentRoute:()=>Dn}),nW=oK.update({id:"/cemetery",path:"/cemetery",getParentRoute:()=>Dn}),oW=nM.update({id:"/select",path:"/select",getParentRoute:()=>TM}),iW=EM.update({id:"/battle/$character",path:"/battle/$character",getParentRoute:()=>Dn}),lW={AuthenticatedGamePlayHubEquipmentSelectRoute:oW},cW=TM._addFileChildren(lW),uW={AuthenticatedGamePlayHubCemeteryRoute:nW,AuthenticatedGamePlayHubCharacterStatsRoute:rW,AuthenticatedGamePlayHubCraftingRoute:aW,AuthenticatedGamePlayHubEquipmentRoute:cW,AuthenticatedGamePlayHubInventoryRoute:sW,AuthenticatedGamePlayHubShopRoute:tW,AuthenticatedGamePlayHubSpellsRoute:eW,AuthenticatedGamePlayHubBattleCharacterRoute:iW},dW=Dn._addFileChildren(uW),fW={AuthenticatedGamePlayHubRoute:dW},hW=AM._addFileChildren(fW),mW={AuthenticatedGameGuideRoute:JK,AuthenticatedGamePlayRoute:hW,AuthenticatedGameRankingRoute:QK},pW=kp._addFileChildren(mW),gW={AuthenticatedUsersIdRoute:ZK},xW=kM._addFileChildren(gW),vW={Authenticated403Route:KK,AuthenticatedGameRoute:pW,AuthenticatedProfileRoute:YK,AuthenticatedUsersRoute:xW},yW=Hd._addFileChildren(vW),bW={PublicAuthVerifyEmailRoute:WK},_W=CM._addFileChildren(bW),wW={PublicAuthRoute:_W,PublicLogoutRoute:XK},jW=Gb._addFileChildren(wW),NW={IndexRoute:GK,AuthenticatedRoute:yW,PublicRoute:jW},SW=Fm._addFileChildren(NW)._addFileTypes(),EW=aD({routeTree:SW});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("🚀 Service Worker registrado com sucesso:",t.scope)}).catch(t=>{console.log("❌ Falha ao registrar Service Worker:",t)})});Q3.createRoot(document.getElementById("root")).render(r.jsx(y.StrictMode,{children:r.jsx(oD,{router:EW})}));export{tt as C,rO as D,Qs as F,aO as S,AW as a,ji as b,go as c,Sr as d,sN as e,UD as f,by as g,BD as h,YD as i,MW as j,IW as k,Nn as l,OW as m,GD as n,zD as o,DW as p,PW as q,LW as r,Hx as s,$W as t,gD as u,zt as v};
