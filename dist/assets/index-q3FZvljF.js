var R3=Object.defineProperty;var M3=(t,e,s)=>e in t?R3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var yt=(t,e,s)=>M3(t,typeof e!="symbol"?e+"":e,s);function P3(t,e){for(var s=0;s<e.length;s++){const a=e[s];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();function Tm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function D3(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function a(){return this instanceof a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(s,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}),s}var R0={exports:{}},Cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cj;function O3(){if(Cj)return Cu;Cj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(a,n,i){var c=null;if(i!==void 0&&(c=""+i),n.key!==void 0&&(c=""+n.key),"key"in n){i={};for(var u in n)u!=="key"&&(i[u]=n[u])}else i=n;return n=i.ref,{$$typeof:t,type:a,key:c,ref:n!==void 0?n:null,props:i}}return Cu.Fragment=e,Cu.jsx=s,Cu.jsxs=s,Cu}var Aj;function $3(){return Aj||(Aj=1,R0.exports=O3()),R0.exports}var r=$3(),M0={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kj;function L3(){if(kj)return it;kj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,j={};function N(L,F,ie){this.props=L,this.context=F,this.refs=j,this.updater=ie||y}N.prototype.isReactComponent={},N.prototype.setState=function(L,F){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,F,"setState")},N.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=N.prototype;function C(L,F,ie){this.props=L,this.context=F,this.refs=j,this.updater=ie||y}var E=C.prototype=new S;E.constructor=C,_(E,N.prototype),E.isPureReactComponent=!0;var M=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function $(L,F,ie,se,ue,le){return ie=le.ref,{$$typeof:t,type:L,key:F,ref:ie!==void 0?ie:null,props:le}}function k(L,F){return $(L.type,F,void 0,void 0,void 0,L.props)}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function H(L){var F={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ie){return F[ie]})}var Y=/\/+/g;function I(L,F){return typeof L=="object"&&L!==null&&L.key!=null?H(""+L.key):F.toString(36)}function z(){}function ee(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(z,z):(L.status="pending",L.then(function(F){L.status==="pending"&&(L.status="fulfilled",L.value=F)},function(F){L.status==="pending"&&(L.status="rejected",L.reason=F)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function G(L,F,ie,se,ue){var le=typeof L;(le==="undefined"||le==="boolean")&&(L=null);var re=!1;if(L===null)re=!0;else switch(le){case"bigint":case"string":case"number":re=!0;break;case"object":switch(L.$$typeof){case t:case e:re=!0;break;case p:return re=L._init,G(re(L._payload),F,ie,se,ue)}}if(re)return ue=ue(L),re=se===""?"."+I(L,0):se,M(ue)?(ie="",re!=null&&(ie=re.replace(Y,"$&/")+"/"),G(ue,F,ie,"",function(be){return be})):ue!=null&&(O(ue)&&(ue=k(ue,ie+(ue.key==null||L&&L.key===ue.key?"":(""+ue.key).replace(Y,"$&/")+"/")+re)),F.push(ue)),1;re=0;var de=se===""?".":se+":";if(M(L))for(var ce=0;ce<L.length;ce++)se=L[ce],le=de+I(se,ce),re+=G(se,F,ie,le,ue);else if(ce=x(L),typeof ce=="function")for(L=ce.call(L),ce=0;!(se=L.next()).done;)se=se.value,le=de+I(se,ce++),re+=G(se,F,ie,le,ue);else if(le==="object"){if(typeof L.then=="function")return G(ee(L),F,ie,se,ue);throw F=String(L),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return re}function A(L,F,ie){if(L==null)return L;var se=[],ue=0;return G(L,se,"","",function(le){return F.call(ie,le,ue++)}),se}function B(L){if(L._status===-1){var F=L._result;F=F(),F.then(function(ie){(L._status===0||L._status===-1)&&(L._status=1,L._result=ie)},function(ie){(L._status===0||L._status===-1)&&(L._status=2,L._result=ie)}),L._status===-1&&(L._status=0,L._result=F)}if(L._status===1)return L._result.default;throw L._result}var V=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function W(){}return it.Children={map:A,forEach:function(L,F,ie){A(L,function(){F.apply(this,arguments)},ie)},count:function(L){var F=0;return A(L,function(){F++}),F},toArray:function(L){return A(L,function(F){return F})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},it.Component=N,it.Fragment=s,it.Profiler=n,it.PureComponent=C,it.StrictMode=a,it.Suspense=f,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,it.__COMPILER_RUNTIME={__proto__:null,c:function(L){return R.H.useMemoCache(L)}},it.cache=function(L){return function(){return L.apply(null,arguments)}},it.cloneElement=function(L,F,ie){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var se=_({},L.props),ue=L.key,le=void 0;if(F!=null)for(re in F.ref!==void 0&&(le=void 0),F.key!==void 0&&(ue=""+F.key),F)!P.call(F,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&F.ref===void 0||(se[re]=F[re]);var re=arguments.length-2;if(re===1)se.children=ie;else if(1<re){for(var de=Array(re),ce=0;ce<re;ce++)de[ce]=arguments[ce+2];se.children=de}return $(L.type,ue,void 0,void 0,le,se)},it.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:i,_context:L},L},it.createElement=function(L,F,ie){var se,ue={},le=null;if(F!=null)for(se in F.key!==void 0&&(le=""+F.key),F)P.call(F,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ue[se]=F[se]);var re=arguments.length-2;if(re===1)ue.children=ie;else if(1<re){for(var de=Array(re),ce=0;ce<re;ce++)de[ce]=arguments[ce+2];ue.children=de}if(L&&L.defaultProps)for(se in re=L.defaultProps,re)ue[se]===void 0&&(ue[se]=re[se]);return $(L,le,void 0,void 0,null,ue)},it.createRef=function(){return{current:null}},it.forwardRef=function(L){return{$$typeof:u,render:L}},it.isValidElement=O,it.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:B}},it.memo=function(L,F){return{$$typeof:h,type:L,compare:F===void 0?null:F}},it.startTransition=function(L){var F=R.T,ie={};R.T=ie;try{var se=L(),ue=R.S;ue!==null&&ue(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(W,V)}catch(le){V(le)}finally{R.T=F}},it.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},it.use=function(L){return R.H.use(L)},it.useActionState=function(L,F,ie){return R.H.useActionState(L,F,ie)},it.useCallback=function(L,F){return R.H.useCallback(L,F)},it.useContext=function(L){return R.H.useContext(L)},it.useDebugValue=function(){},it.useDeferredValue=function(L,F){return R.H.useDeferredValue(L,F)},it.useEffect=function(L,F,ie){var se=R.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(L,F)},it.useId=function(){return R.H.useId()},it.useImperativeHandle=function(L,F,ie){return R.H.useImperativeHandle(L,F,ie)},it.useInsertionEffect=function(L,F){return R.H.useInsertionEffect(L,F)},it.useLayoutEffect=function(L,F){return R.H.useLayoutEffect(L,F)},it.useMemo=function(L,F){return R.H.useMemo(L,F)},it.useOptimistic=function(L,F){return R.H.useOptimistic(L,F)},it.useReducer=function(L,F,ie){return R.H.useReducer(L,F,ie)},it.useRef=function(L){return R.H.useRef(L)},it.useState=function(L){return R.H.useState(L)},it.useSyncExternalStore=function(L,F,ie){return R.H.useSyncExternalStore(L,F,ie)},it.useTransition=function(){return R.H.useTransition()},it.version="19.1.0",it}var Tj;function Rd(){return Tj||(Tj=1,M0.exports=L3()),M0.exports}var b=Rd();const he=Tm(b),uE=P3({__proto__:null,default:he},[b]);var P0={exports:{}},Au={},D0={exports:{}},O0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rj;function B3(){return Rj||(Rj=1,function(t){function e(A,B){var V=A.length;A.push(B);e:for(;0<V;){var W=V-1>>>1,L=A[W];if(0<n(L,B))A[W]=B,A[V]=L,V=W;else break e}}function s(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var B=A[0],V=A.pop();if(V!==B){A[0]=V;e:for(var W=0,L=A.length,F=L>>>1;W<F;){var ie=2*(W+1)-1,se=A[ie],ue=ie+1,le=A[ue];if(0>n(se,V))ue<L&&0>n(le,se)?(A[W]=le,A[ue]=V,W=ue):(A[W]=se,A[ie]=V,W=ie);else if(ue<L&&0>n(le,V))A[W]=le,A[ue]=V,W=ue;else break e}}return B}function n(A,B){var V=A.sortIndex-B.sortIndex;return V!==0?V:A.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],h=[],p=1,g=null,x=3,y=!1,_=!1,j=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function M(A){for(var B=s(h);B!==null;){if(B.callback===null)a(h);else if(B.startTime<=A)a(h),B.sortIndex=B.expirationTime,e(f,B);else break;B=s(h)}}function R(A){if(j=!1,M(A),!_)if(s(f)!==null)_=!0,P||(P=!0,I());else{var B=s(h);B!==null&&G(R,B.startTime-A)}}var P=!1,$=-1,k=5,O=-1;function H(){return N?!0:!(t.unstable_now()-O<k)}function Y(){if(N=!1,P){var A=t.unstable_now();O=A;var B=!0;try{e:{_=!1,j&&(j=!1,C($),$=-1),y=!0;var V=x;try{t:{for(M(A),g=s(f);g!==null&&!(g.expirationTime>A&&H());){var W=g.callback;if(typeof W=="function"){g.callback=null,x=g.priorityLevel;var L=W(g.expirationTime<=A);if(A=t.unstable_now(),typeof L=="function"){g.callback=L,M(A),B=!0;break t}g===s(f)&&a(f),M(A)}else a(f);g=s(f)}if(g!==null)B=!0;else{var F=s(h);F!==null&&G(R,F.startTime-A),B=!1}}break e}finally{g=null,x=V,y=!1}B=void 0}}finally{B?I():P=!1}}}var I;if(typeof E=="function")I=function(){E(Y)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ee=z.port2;z.port1.onmessage=Y,I=function(){ee.postMessage(null)}}else I=function(){S(Y,0)};function G(A,B){$=S(function(){A(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(A){switch(x){case 1:case 2:case 3:var B=3;break;default:B=x}var V=x;x=B;try{return A()}finally{x=V}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=x;x=A;try{return B()}finally{x=V}},t.unstable_scheduleCallback=function(A,B,V){var W=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,A){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=V+L,A={id:p++,callback:B,priorityLevel:A,startTime:V,expirationTime:L,sortIndex:-1},V>W?(A.sortIndex=V,e(h,A),s(f)===null&&A===s(h)&&(j?(C($),$=-1):j=!0,G(R,V-W))):(A.sortIndex=L,e(f,A),_||y||(_=!0,P||(P=!0,I()))),A},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(A){var B=x;return function(){var V=x;x=B;try{return A.apply(this,arguments)}finally{x=V}}}}(O0)),O0}var Mj;function I3(){return Mj||(Mj=1,D0.exports=B3()),D0.exports}var $0={exports:{}},Xs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pj;function V3(){if(Pj)return Xs;Pj=1;var t=Rd();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Xs.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(f,h,null,p)},Xs.flushSync=function(f){var h=c.T,p=a.p;try{if(c.T=null,a.p=2,f)return f()}finally{c.T=h,a.p=p,a.d.f()}},Xs.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},Xs.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},Xs.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:y}):p==="script"&&a.d.X(f,{crossOrigin:g,integrity:x,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xs.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=u(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},Xs.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=u(p,h.crossOrigin);a.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xs.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=u(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},Xs.requestFormReset=function(f){a.d.r(f)},Xs.unstable_batchedUpdates=function(f,h){return f(h)},Xs.useFormState=function(f,h,p){return c.H.useFormState(f,h,p)},Xs.useFormStatus=function(){return c.H.useHostTransitionStatus()},Xs.version="19.1.0",Xs}var Dj;function dE(){if(Dj)return $0.exports;Dj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$0.exports=V3(),$0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj;function q3(){if(Oj)return Au;Oj=1;var t=I3(),e=Rd(),s=dE();function a(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function c(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(a(188))}function f(o){var l=o.alternate;if(!l){if(l=i(o),l===null)throw Error(a(188));return l!==o?null:o}for(var d=o,m=l;;){var v=d.return;if(v===null)break;var w=v.alternate;if(w===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===d)return u(v),o;if(w===m)return u(v),l;w=w.sibling}throw Error(a(188))}if(d.return!==m.return)d=v,m=w;else{for(var T=!1,D=v.child;D;){if(D===d){T=!0,d=v,m=w;break}if(D===m){T=!0,m=v,d=w;break}D=D.sibling}if(!T){for(D=w.child;D;){if(D===d){T=!0,d=w,m=v;break}if(D===m){T=!0,m=w,d=v;break}D=D.sibling}if(!T)throw Error(a(189))}}if(d.alternate!==m)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?o:l}function h(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=h(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function I(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function ee(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList";case O:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case y:return"Portal";case E:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case M:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case $:return l=o.displayName||null,l!==null?l:ee(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return ee(o(l))}catch{}}return null}var G=Array.isArray,A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},W=[],L=-1;function F(o){return{current:o}}function ie(o){0>L||(o.current=W[L],W[L]=null,L--)}function se(o,l){L++,W[L]=o.current,o.current=l}var ue=F(null),le=F(null),re=F(null),de=F(null);function ce(o,l){switch(se(re,l),se(le,o),se(ue,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?tj(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=tj(l),o=sj(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ie(ue),se(ue,o)}function be(){ie(ue),ie(le),ie(re)}function Ne(o){o.memoizedState!==null&&se(de,o);var l=ue.current,d=sj(l,o.type);l!==d&&(se(le,o),se(ue,d))}function J(o){le.current===o&&(ie(ue),ie(le)),de.current===o&&(ie(de),_u._currentValue=V)}var ge=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,De=t.unstable_cancelCallback,Ve=t.unstable_shouldYield,We=t.unstable_requestPaint,ye=t.unstable_now,Pe=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,q=t.unstable_UserBlockingPriority,X=t.unstable_NormalPriority,Z=t.unstable_LowPriority,je=t.unstable_IdlePriority,Ce=t.log,Se=t.unstable_setDisableYieldValue,Re=null,et=null;function ot(o){if(typeof Ce=="function"&&Se(o),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Re,o)}catch{}}var _t=Math.clz32?Math.clz32:Ia,Fs=Math.log,Hs=Math.LN2;function Ia(o){return o>>>=0,o===0?32:31-(Fs(o)/Hs|0)|0}var ja=256,Na=4194304;function aa(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ra(o,l,d){var m=o.pendingLanes;if(m===0)return 0;var v=0,w=o.suspendedLanes,T=o.pingedLanes;o=o.warmLanes;var D=m&134217727;return D!==0?(m=D&~w,m!==0?v=aa(m):(T&=D,T!==0?v=aa(T):d||(d=D&~o,d!==0&&(v=aa(d))))):(D=m&~w,D!==0?v=aa(D):T!==0?v=aa(T):d||(d=m&~o,d!==0&&(v=aa(d)))),v===0?0:l!==0&&l!==v&&(l&w)===0&&(w=v&-v,d=l&-l,w>=d||w===32&&(d&4194048)!==0)?l:v}function ir(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function da(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ts(){var o=ja;return ja<<=1,(ja&4194048)===0&&(ja=256),o}function Bi(){var o=Na;return Na<<=1,(Na&62914560)===0&&(Na=4194304),o}function Ds(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function fa(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function lr(o,l,d,m,v,w){var T=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var D=o.entanglements,U=o.expirationTimes,ae=o.hiddenUpdates;for(d=T&~d;0<d;){var pe=31-_t(d),ve=1<<pe;D[pe]=0,U[pe]=-1;var ne=ae[pe];if(ne!==null)for(ae[pe]=null,pe=0;pe<ne.length;pe++){var oe=ne[pe];oe!==null&&(oe.lane&=-536870913)}d&=~ve}m!==0&&Ze(o,m,0),w!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=w&~(T&~l))}function Ze(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-_t(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|d&4194090}function It(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var m=31-_t(d),v=1<<m;v&l|o[m]&l&&(o[m]|=l),d&=~v}}function fs(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Os(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function qo(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:wj(o.type))}function xs(o,l){var d=B.p;try{return B.p=o,l()}finally{B.p=d}}var ss=Math.random().toString(36).slice(2),as="__reactFiber$"+ss,Vt="__reactProps$"+ss,_s="__reactContainer$"+ss,Ii="__reactEvents$"+ss,tn="__reactListeners$"+ss,Uy="__reactHandles$"+ss,zy="__reactResources$"+ss,Pc="__reactMarker$"+ss;function Np(o){delete o[as],delete o[Vt],delete o[Ii],delete o[tn],delete o[Uy]}function Vi(o){var l=o[as];if(l)return l;for(var d=o.parentNode;d;){if(l=d[_s]||d[as]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=oj(o);o!==null;){if(d=o[as])return d;o=oj(o)}return l}o=d,d=o.parentNode}return null}function qi(o){if(o=o[as]||o[_s]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function Dc(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(a(33))}function Ui(o){var l=o[zy];return l||(l=o[zy]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function js(o){o[Pc]=!0}var Fy=new Set,Hy={};function Uo(o,l){zi(o,l),zi(o+"Capture",l)}function zi(o,l){for(Hy[o]=l,o=0;o<l.length;o++)Fy.add(l[o])}var jM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gy={},Xy={};function NM(o){return ge.call(Xy,o)?!0:ge.call(Gy,o)?!1:jM.test(o)?Xy[o]=!0:(Gy[o]=!0,!1)}function Fd(o,l,d){if(NM(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Hd(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function sn(o,l,d,m){if(m===null)o.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+m)}}var Sp,Yy;function Fi(o){if(Sp===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Sp=l&&l[1]||"",Yy=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sp+o+Yy}var Ep=!1;function Cp(o,l){if(!o||Ep)return"";Ep=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(oe){var ne=oe}Reflect.construct(o,[],ve)}else{try{ve.call()}catch(oe){ne=oe}o.call(ve.prototype)}}else{try{throw Error()}catch(oe){ne=oe}(ve=o())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(oe){if(oe&&ne&&typeof oe.stack=="string")return[oe.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),T=w[0],D=w[1];if(T&&D){var U=T.split(`
`),ae=D.split(`
`);for(v=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ae.length&&!ae[v].includes("DetermineComponentFrameRoot");)v++;if(m===U.length||v===ae.length)for(m=U.length-1,v=ae.length-1;1<=m&&0<=v&&U[m]!==ae[v];)v--;for(;1<=m&&0<=v;m--,v--)if(U[m]!==ae[v]){if(m!==1||v!==1)do if(m--,v--,0>v||U[m]!==ae[v]){var pe=`
`+U[m].replace(" at new "," at ");return o.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",o.displayName)),pe}while(1<=m&&0<=v);break}}}finally{Ep=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?Fi(d):""}function SM(o){switch(o.tag){case 26:case 27:case 5:return Fi(o.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return Cp(o.type,!1);case 11:return Cp(o.type.render,!1);case 1:return Cp(o.type,!0);case 31:return Fi("Activity");default:return""}}function Ky(o){try{var l="";do l+=SM(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Va(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Wy(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function EM(o){var l=Wy(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),m=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return v.call(this)},set:function(T){m=""+T,w.call(this,T)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(T){m=""+T},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function Gd(o){o._valueTracker||(o._valueTracker=EM(o))}function Zy(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),m="";return o&&(m=Wy(o)?o.checked?"true":"false":o.value),o=m,o!==d?(l.setValue(o),!0):!1}function Xd(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var CM=/[\n"\\]/g;function qa(o){return o.replace(CM,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ap(o,l,d,m,v,w,T,D){o.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?o.type=T:o.removeAttribute("type"),l!=null?T==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Va(l)):o.value!==""+Va(l)&&(o.value=""+Va(l)):T!=="submit"&&T!=="reset"||o.removeAttribute("value"),l!=null?kp(o,T,Va(l)):d!=null?kp(o,T,Va(d)):m!=null&&o.removeAttribute("value"),v==null&&w!=null&&(o.defaultChecked=!!w),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.name=""+Va(D):o.removeAttribute("name")}function Qy(o,l,d,m,v,w,T,D){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(o.type=w),l!=null||d!=null){if(!(w!=="submit"&&w!=="reset"||l!=null))return;d=d!=null?""+Va(d):"",l=l!=null?""+Va(l):d,D||l===o.value||(o.value=l),o.defaultValue=l}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=D?o.checked:!!m,o.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.name=T)}function kp(o,l,d){l==="number"&&Xd(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function Hi(o,l,d,m){if(o=o.options,l){l={};for(var v=0;v<d.length;v++)l["$"+d[v]]=!0;for(d=0;d<o.length;d++)v=l.hasOwnProperty("$"+o[d].value),o[d].selected!==v&&(o[d].selected=v),v&&m&&(o[d].defaultSelected=!0)}else{for(d=""+Va(d),l=null,v=0;v<o.length;v++){if(o[v].value===d){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}l!==null||o[v].disabled||(l=o[v])}l!==null&&(l.selected=!0)}}function Jy(o,l,d){if(l!=null&&(l=""+Va(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+Va(d):""}function ew(o,l,d,m){if(l==null){if(m!=null){if(d!=null)throw Error(a(92));if(G(m)){if(1<m.length)throw Error(a(93));m=m[0]}d=m}d==null&&(d=""),l=d}d=Va(l),o.defaultValue=d,m=o.textContent,m===d&&m!==""&&m!==null&&(o.value=m)}function Gi(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var AM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tw(o,l,d){var m=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,d):typeof d!="number"||d===0||AM.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function sw(o,l,d){if(l!=null&&typeof l!="object")throw Error(a(62));if(o=o.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var v in l)m=l[v],l.hasOwnProperty(v)&&d[v]!==m&&tw(o,v,m)}else for(var w in l)l.hasOwnProperty(w)&&tw(o,w,l[w])}function Tp(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yd(o){return TM.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Rp=null;function Mp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Xi=null,Yi=null;function aw(o){var l=qi(o);if(l&&(o=l.stateNode)){var d=o[Vt]||null;e:switch(o=l.stateNode,l.type){case"input":if(Ap(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+qa(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var m=d[l];if(m!==o&&m.form===o.form){var v=m[Vt]||null;if(!v)throw Error(a(90));Ap(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<d.length;l++)m=d[l],m.form===o.form&&Zy(m)}break e;case"textarea":Jy(o,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&Hi(o,!!d.multiple,l,!1)}}}var Pp=!1;function rw(o,l,d){if(Pp)return o(l,d);Pp=!0;try{var m=o(l);return m}finally{if(Pp=!1,(Xi!==null||Yi!==null)&&(Df(),Xi&&(l=Xi,o=Yi,Yi=Xi=null,aw(l),o)))for(l=0;l<o.length;l++)aw(o[l])}}function Oc(o,l){var d=o.stateNode;if(d===null)return null;var m=d[Vt]||null;if(m===null)return null;d=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(a(231,l,typeof d));return d}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dp=!1;if(an)try{var $c={};Object.defineProperty($c,"passive",{get:function(){Dp=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{Dp=!1}var Dn=null,Op=null,Kd=null;function nw(){if(Kd)return Kd;var o,l=Op,d=l.length,m,v="value"in Dn?Dn.value:Dn.textContent,w=v.length;for(o=0;o<d&&l[o]===v[o];o++);var T=d-o;for(m=1;m<=T&&l[d-m]===v[w-m];m++);return Kd=v.slice(o,1<m?1-m:void 0)}function Wd(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Zd(){return!0}function ow(){return!1}function ha(o){function l(d,m,v,w,T){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=w,this.target=T,this.currentTarget=null;for(var D in o)o.hasOwnProperty(D)&&(d=o[D],this[D]=d?d(w):w[D]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Zd:ow,this.isPropagationStopped=ow,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Zd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Zd)},persist:function(){},isPersistent:Zd}),l}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=ha(zo),Lc=p({},zo,{view:0,detail:0}),RM=ha(Lc),$p,Lp,Bc,Jd=p({},Lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ip,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Bc&&(Bc&&o.type==="mousemove"?($p=o.screenX-Bc.screenX,Lp=o.screenY-Bc.screenY):Lp=$p=0,Bc=o),$p)},movementY:function(o){return"movementY"in o?o.movementY:Lp}}),iw=ha(Jd),MM=p({},Jd,{dataTransfer:0}),PM=ha(MM),DM=p({},Lc,{relatedTarget:0}),Bp=ha(DM),OM=p({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),$M=ha(OM),LM=p({},zo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),BM=ha(LM),IM=p({},zo,{data:0}),lw=ha(IM),VM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zM(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=UM[o])?!!l[o]:!1}function Ip(){return zM}var FM=p({},Lc,{key:function(o){if(o.key){var l=VM[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Wd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?qM[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ip,charCode:function(o){return o.type==="keypress"?Wd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),HM=ha(FM),GM=p({},Jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=ha(GM),XM=p({},Lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ip}),YM=ha(XM),KM=p({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),WM=ha(KM),ZM=p({},Jd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),QM=ha(ZM),JM=p({},zo,{newState:0,oldState:0}),e5=ha(JM),t5=[9,13,27,32],Vp=an&&"CompositionEvent"in window,Ic=null;an&&"documentMode"in document&&(Ic=document.documentMode);var s5=an&&"TextEvent"in window&&!Ic,uw=an&&(!Vp||Ic&&8<Ic&&11>=Ic),dw=" ",fw=!1;function hw(o,l){switch(o){case"keyup":return t5.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ki=!1;function a5(o,l){switch(o){case"compositionend":return mw(l);case"keypress":return l.which!==32?null:(fw=!0,dw);case"textInput":return o=l.data,o===dw&&fw?null:o;default:return null}}function r5(o,l){if(Ki)return o==="compositionend"||!Vp&&hw(o,l)?(o=nw(),Kd=Op=Dn=null,Ki=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return uw&&l.locale!=="ko"?null:l.data;default:return null}}var n5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pw(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!n5[o.type]:l==="textarea"}function gw(o,l,d,m){Xi?Yi?Yi.push(m):Yi=[m]:Xi=m,l=Vf(l,"onChange"),0<l.length&&(d=new Qd("onChange","change",null,d,m),o.push({event:d,listeners:l}))}var Vc=null,qc=null;function o5(o){W1(o,0)}function ef(o){var l=Dc(o);if(Zy(l))return o}function xw(o,l){if(o==="change")return l}var vw=!1;if(an){var qp;if(an){var Up="oninput"in document;if(!Up){var bw=document.createElement("div");bw.setAttribute("oninput","return;"),Up=typeof bw.oninput=="function"}qp=Up}else qp=!1;vw=qp&&(!document.documentMode||9<document.documentMode)}function yw(){Vc&&(Vc.detachEvent("onpropertychange",ww),qc=Vc=null)}function ww(o){if(o.propertyName==="value"&&ef(qc)){var l=[];gw(l,qc,o,Mp(o)),rw(o5,l)}}function i5(o,l,d){o==="focusin"?(yw(),Vc=l,qc=d,Vc.attachEvent("onpropertychange",ww)):o==="focusout"&&yw()}function l5(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ef(qc)}function c5(o,l){if(o==="click")return ef(l)}function u5(o,l){if(o==="input"||o==="change")return ef(l)}function d5(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Sa=typeof Object.is=="function"?Object.is:d5;function Uc(o,l){if(Sa(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),m=Object.keys(l);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!ge.call(l,v)||!Sa(o[v],l[v]))return!1}return!0}function _w(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function jw(o,l){var d=_w(o);o=0;for(var m;d;){if(d.nodeType===3){if(m=o+d.textContent.length,o<=l&&m>=l)return{node:d,offset:l-o};o=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=_w(d)}}function Nw(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?Nw(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Sw(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Xd(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Xd(o.document)}return l}function zp(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var f5=an&&"documentMode"in document&&11>=document.documentMode,Wi=null,Fp=null,zc=null,Hp=!1;function Ew(o,l,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Hp||Wi==null||Wi!==Xd(m)||(m=Wi,"selectionStart"in m&&zp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),zc&&Uc(zc,m)||(zc=m,m=Vf(Fp,"onSelect"),0<m.length&&(l=new Qd("onSelect","select",null,l,d),o.push({event:l,listeners:m}),l.target=Wi)))}function Fo(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Zi={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Gp={},Cw={};an&&(Cw=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Ho(o){if(Gp[o])return Gp[o];if(!Zi[o])return o;var l=Zi[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in Cw)return Gp[o]=l[d];return o}var Aw=Ho("animationend"),kw=Ho("animationiteration"),Tw=Ho("animationstart"),h5=Ho("transitionrun"),m5=Ho("transitionstart"),p5=Ho("transitioncancel"),Rw=Ho("transitionend"),Mw=new Map,Xp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xp.push("scrollEnd");function cr(o,l){Mw.set(o,l),Uo(l,[o])}var Pw=new WeakMap;function Ua(o,l){if(typeof o=="object"&&o!==null){var d=Pw.get(o);return d!==void 0?d:(l={value:o,source:l,stack:Ky(l)},Pw.set(o,l),l)}return{value:o,source:l,stack:Ky(l)}}var za=[],Qi=0,Yp=0;function tf(){for(var o=Qi,l=Yp=Qi=0;l<o;){var d=za[l];za[l++]=null;var m=za[l];za[l++]=null;var v=za[l];za[l++]=null;var w=za[l];if(za[l++]=null,m!==null&&v!==null){var T=m.pending;T===null?v.next=v:(v.next=T.next,T.next=v),m.pending=v}w!==0&&Dw(d,v,w)}}function sf(o,l,d,m){za[Qi++]=o,za[Qi++]=l,za[Qi++]=d,za[Qi++]=m,Yp|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Kp(o,l,d,m){return sf(o,l,d,m),af(o)}function Ji(o,l){return sf(o,null,null,l),af(o)}function Dw(o,l,d){o.lanes|=d;var m=o.alternate;m!==null&&(m.lanes|=d);for(var v=!1,w=o.return;w!==null;)w.childLanes|=d,m=w.alternate,m!==null&&(m.childLanes|=d),w.tag===22&&(o=w.stateNode,o===null||o._visibility&1||(v=!0)),o=w,w=w.return;return o.tag===3?(w=o.stateNode,v&&l!==null&&(v=31-_t(d),o=w.hiddenUpdates,m=o[v],m===null?o[v]=[l]:m.push(l),l.lane=d|536870912),w):null}function af(o){if(50<mu)throw mu=0,t0=null,Error(a(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var el={};function g5(o,l,d,m){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(o,l,d,m){return new g5(o,l,d,m)}function Wp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function rn(o,l){var d=o.alternate;return d===null?(d=Ea(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function Ow(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function rf(o,l,d,m,v,w){var T=0;if(m=o,typeof o=="function")Wp(o)&&(T=1);else if(typeof o=="string")T=v3(o,d,ue.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case O:return o=Ea(31,d,l,v),o.elementType=O,o.lanes=w,o;case _:return Go(d.children,v,w,l);case j:T=8,v|=24;break;case N:return o=Ea(12,d,l,v|2),o.elementType=N,o.lanes=w,o;case R:return o=Ea(13,d,l,v),o.elementType=R,o.lanes=w,o;case P:return o=Ea(19,d,l,v),o.elementType=P,o.lanes=w,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case S:case E:T=10;break e;case C:T=9;break e;case M:T=11;break e;case $:T=14;break e;case k:T=16,m=null;break e}T=29,d=Error(a(130,o===null?"null":typeof o,"")),m=null}return l=Ea(T,d,l,v),l.elementType=o,l.type=m,l.lanes=w,l}function Go(o,l,d,m){return o=Ea(7,o,m,l),o.lanes=d,o}function Zp(o,l,d){return o=Ea(6,o,null,l),o.lanes=d,o}function Qp(o,l,d){return l=Ea(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var tl=[],sl=0,nf=null,of=0,Fa=[],Ha=0,Xo=null,nn=1,on="";function Yo(o,l){tl[sl++]=of,tl[sl++]=nf,nf=o,of=l}function $w(o,l,d){Fa[Ha++]=nn,Fa[Ha++]=on,Fa[Ha++]=Xo,Xo=o;var m=nn;o=on;var v=32-_t(m)-1;m&=~(1<<v),d+=1;var w=32-_t(l)+v;if(30<w){var T=v-v%5;w=(m&(1<<T)-1).toString(32),m>>=T,v-=T,nn=1<<32-_t(l)+v|d<<v|m,on=w+o}else nn=1<<w|d<<v|m,on=o}function Jp(o){o.return!==null&&(Yo(o,1),$w(o,1,0))}function eg(o){for(;o===nf;)nf=tl[--sl],tl[sl]=null,of=tl[--sl],tl[sl]=null;for(;o===Xo;)Xo=Fa[--Ha],Fa[Ha]=null,on=Fa[--Ha],Fa[Ha]=null,nn=Fa[--Ha],Fa[Ha]=null}var na=null,Qt=null,At=!1,Ko=null,Tr=!1,tg=Error(a(519));function Wo(o){var l=Error(a(418,""));throw Gc(Ua(l,o)),tg}function Lw(o){var l=o.stateNode,d=o.type,m=o.memoizedProps;switch(l[as]=o,l[Vt]=m,d){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(d=0;d<gu.length;d++)pt(gu[d],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Qy(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Gd(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),ew(l,m.value,m.defaultValue,m.children),Gd(l)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||m.suppressHydrationWarning===!0||ej(l.textContent,d)?(m.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),m.onScroll!=null&&pt("scroll",l),m.onScrollEnd!=null&&pt("scrollend",l),m.onClick!=null&&(l.onclick=qf),l=!0):l=!1,l||Wo(o)}function Bw(o){for(na=o.return;na;)switch(na.tag){case 5:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:na=na.return}}function Fc(o){if(o!==na)return!1;if(!At)return Bw(o),At=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||x0(o.type,o.memoizedProps)),d=!d),d&&Qt&&Wo(o),Bw(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){Qt=dr(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}Qt=null}}else l===27?(l=Qt,Wn(o.type)?(o=w0,w0=null,Qt=o):Qt=l):Qt=na?dr(o.stateNode.nextSibling):null;return!0}function Hc(){Qt=na=null,At=!1}function Iw(){var o=Ko;return o!==null&&(ga===null?ga=o:ga.push.apply(ga,o),Ko=null),o}function Gc(o){Ko===null?Ko=[o]:Ko.push(o)}var sg=F(null),Zo=null,ln=null;function On(o,l,d){se(sg,l._currentValue),l._currentValue=d}function cn(o){o._currentValue=sg.current,ie(sg)}function ag(o,l,d){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===d)break;o=o.return}}function rg(o,l,d,m){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var w=v.dependencies;if(w!==null){var T=v.child;w=w.firstContext;e:for(;w!==null;){var D=w;w=v;for(var U=0;U<l.length;U++)if(D.context===l[U]){w.lanes|=d,D=w.alternate,D!==null&&(D.lanes|=d),ag(w.return,d,o),m||(T=null);break e}w=D.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(a(341));T.lanes|=d,w=T.alternate,w!==null&&(w.lanes|=d),ag(T,d,o),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===o){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Xc(o,l,d,m){o=null;for(var v=l,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var D=v.type;Sa(v.pendingProps.value,T.value)||(o!==null?o.push(D):o=[D])}}else if(v===de.current){if(T=v.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(_u):o=[_u])}v=v.return}o!==null&&rg(l,o,d,m),l.flags|=262144}function lf(o){for(o=o.firstContext;o!==null;){if(!Sa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Qo(o){Zo=o,ln=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Gs(o){return Vw(Zo,o)}function cf(o,l){return Zo===null&&Qo(o),Vw(o,l)}function Vw(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ln===null){if(o===null)throw Error(a(308));ln=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else ln=ln.next=l;return d}var x5=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},v5=t.unstable_scheduleCallback,b5=t.unstable_NormalPriority,vs={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ng(){return{controller:new x5,data:new Map,refCount:0}}function Yc(o){o.refCount--,o.refCount===0&&v5(b5,function(){o.controller.abort()})}var Kc=null,og=0,al=0,rl=null;function y5(o,l){if(Kc===null){var d=Kc=[];og=0,al=l0(),rl={status:"pending",value:void 0,then:function(m){d.push(m)}}}return og++,l.then(qw,qw),l}function qw(){if(--og===0&&Kc!==null){rl!==null&&(rl.status="fulfilled");var o=Kc;Kc=null,al=0,rl=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function w5(o,l){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var v=0;v<d.length;v++)(0,d[v])(l)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var Uw=A.S;A.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&y5(o,l),Uw!==null&&Uw(o,l)};var Jo=F(null);function ig(){var o=Jo.current;return o!==null?o:qt.pooledCache}function uf(o,l){l===null?se(Jo,Jo.current):se(Jo,l.pool)}function zw(){var o=ig();return o===null?null:{parent:vs._currentValue,pool:o}}var Wc=Error(a(460)),Fw=Error(a(474)),df=Error(a(542)),lg={then:function(){}};function Hw(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ff(){}function Gw(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(ff,ff),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Yw(o),o;default:if(typeof l.status=="string")l.then(ff,ff);else{if(o=qt,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=m}},function(m){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Yw(o),o}throw Zc=l,Wc}}var Zc=null;function Xw(){if(Zc===null)throw Error(a(459));var o=Zc;return Zc=null,o}function Yw(o){if(o===Wc||o===df)throw Error(a(483))}var $n=!1;function cg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ug(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ln(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bn(o,l,d){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(Mt&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,l=af(o),Dw(o,null,d),l}return sf(o,m,l,d),af(o)}function Qc(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,It(o,d)}}function dg(o,l){var d=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,w=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};w===null?v=w=T:w=w.next=T,d=d.next}while(d!==null);w===null?v=w=l:w=w.next=l}else v=w=l;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var fg=!1;function Jc(){if(fg){var o=rl;if(o!==null)throw o}}function eu(o,l,d,m){fg=!1;var v=o.updateQueue;$n=!1;var w=v.firstBaseUpdate,T=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var U=D,ae=U.next;U.next=null,T===null?w=ae:T.next=ae,T=U;var pe=o.alternate;pe!==null&&(pe=pe.updateQueue,D=pe.lastBaseUpdate,D!==T&&(D===null?pe.firstBaseUpdate=ae:D.next=ae,pe.lastBaseUpdate=U))}if(w!==null){var ve=v.baseState;T=0,pe=ae=U=null,D=w;do{var ne=D.lane&-536870913,oe=ne!==D.lane;if(oe?(bt&ne)===ne:(m&ne)===ne){ne!==0&&ne===al&&(fg=!0),pe!==null&&(pe=pe.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Qe=o,Xe=D;ne=l;var $t=d;switch(Xe.tag){case 1:if(Qe=Xe.payload,typeof Qe=="function"){ve=Qe.call($t,ve,ne);break e}ve=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=Xe.payload,ne=typeof Qe=="function"?Qe.call($t,ve,ne):Qe,ne==null)break e;ve=p({},ve,ne);break e;case 2:$n=!0}}ne=D.callback,ne!==null&&(o.flags|=64,oe&&(o.flags|=8192),oe=v.callbacks,oe===null?v.callbacks=[ne]:oe.push(ne))}else oe={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},pe===null?(ae=pe=oe,U=ve):pe=pe.next=oe,T|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;oe=D,D=oe.next,oe.next=null,v.lastBaseUpdate=oe,v.shared.pending=null}}while(!0);pe===null&&(U=ve),v.baseState=U,v.firstBaseUpdate=ae,v.lastBaseUpdate=pe,w===null&&(v.shared.lanes=0),Gn|=T,o.lanes=T,o.memoizedState=ve}}function Kw(o,l){if(typeof o!="function")throw Error(a(191,o));o.call(l)}function Ww(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)Kw(d[o],l)}var nl=F(null),hf=F(0);function Zw(o,l){o=gn,se(hf,o),se(nl,l),gn=o|l.baseLanes}function hg(){se(hf,gn),se(nl,nl.current)}function mg(){gn=hf.current,ie(nl),ie(hf)}var In=0,ct=null,Dt=null,hs=null,mf=!1,ol=!1,ei=!1,pf=0,tu=0,il=null,_5=0;function rs(){throw Error(a(321))}function pg(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!Sa(o[d],l[d]))return!1;return!0}function gg(o,l,d,m,v,w){return In=w,ct=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,A.H=o===null||o.memoizedState===null?D_:O_,ei=!1,w=d(m,v),ei=!1,ol&&(w=Jw(l,d,m,v)),Qw(o),w}function Qw(o){A.H=wf;var l=Dt!==null&&Dt.next!==null;if(In=0,hs=Dt=ct=null,mf=!1,tu=0,il=null,l)throw Error(a(300));o===null||Ns||(o=o.dependencies,o!==null&&lf(o)&&(Ns=!0))}function Jw(o,l,d,m){ct=o;var v=0;do{if(ol&&(il=null),tu=0,ol=!1,25<=v)throw Error(a(301));if(v+=1,hs=Dt=null,o.updateQueue!=null){var w=o.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}A.H=k5,w=l(d,m)}while(ol);return w}function j5(){var o=A.H,l=o.useState()[0];return l=typeof l.then=="function"?su(l):l,o=o.useState()[0],(Dt!==null?Dt.memoizedState:null)!==o&&(ct.flags|=1024),l}function xg(){var o=pf!==0;return pf=0,o}function vg(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function bg(o){if(mf){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}mf=!1}In=0,hs=Dt=ct=null,ol=!1,tu=pf=0,il=null}function ma(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hs===null?ct.memoizedState=hs=o:hs=hs.next=o,hs}function ms(){if(Dt===null){var o=ct.alternate;o=o!==null?o.memoizedState:null}else o=Dt.next;var l=hs===null?ct.memoizedState:hs.next;if(l!==null)hs=l,Dt=o;else{if(o===null)throw ct.alternate===null?Error(a(467)):Error(a(310));Dt=o,o={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},hs===null?ct.memoizedState=hs=o:hs=hs.next=o}return hs}function yg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(o){var l=tu;return tu+=1,il===null&&(il=[]),o=Gw(il,o,l),l=ct,(hs===null?l.memoizedState:hs.next)===null&&(l=l.alternate,A.H=l===null||l.memoizedState===null?D_:O_),o}function gf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return su(o);if(o.$$typeof===E)return Gs(o)}throw Error(a(438,String(o)))}function wg(o){var l=null,d=ct.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var m=ct.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=yg(),ct.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),m=0;m<o;m++)d[m]=H;return l.index++,d}function un(o,l){return typeof l=="function"?l(o):l}function xf(o){var l=ms();return _g(l,Dt,o)}function _g(o,l,d){var m=o.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=d;var v=o.baseQueue,w=m.pending;if(w!==null){if(v!==null){var T=v.next;v.next=w.next,w.next=T}l.baseQueue=v=w,m.pending=null}if(w=o.baseState,v===null)o.memoizedState=w;else{l=v.next;var D=T=null,U=null,ae=l,pe=!1;do{var ve=ae.lane&-536870913;if(ve!==ae.lane?(bt&ve)===ve:(In&ve)===ve){var ne=ae.revertLane;if(ne===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),ve===al&&(pe=!0);else if((In&ne)===ne){ae=ae.next,ne===al&&(pe=!0);continue}else ve={lane:0,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(D=U=ve,T=w):U=U.next=ve,ct.lanes|=ne,Gn|=ne;ve=ae.action,ei&&d(w,ve),w=ae.hasEagerState?ae.eagerState:d(w,ve)}else ne={lane:ve,revertLane:ae.revertLane,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},U===null?(D=U=ne,T=w):U=U.next=ne,ct.lanes|=ve,Gn|=ve;ae=ae.next}while(ae!==null&&ae!==l);if(U===null?T=w:U.next=D,!Sa(w,o.memoizedState)&&(Ns=!0,pe&&(d=rl,d!==null)))throw d;o.memoizedState=w,o.baseState=T,o.baseQueue=U,m.lastRenderedState=w}return v===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function jg(o){var l=ms(),d=l.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=o;var m=d.dispatch,v=d.pending,w=l.memoizedState;if(v!==null){d.pending=null;var T=v=v.next;do w=o(w,T.action),T=T.next;while(T!==v);Sa(w,l.memoizedState)||(Ns=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),d.lastRenderedState=w}return[w,m]}function e_(o,l,d){var m=ct,v=ms(),w=At;if(w){if(d===void 0)throw Error(a(407));d=d()}else d=l();var T=!Sa((Dt||v).memoizedState,d);T&&(v.memoizedState=d,Ns=!0),v=v.queue;var D=a_.bind(null,m,v,o);if(au(2048,8,D,[o]),v.getSnapshot!==l||T||hs!==null&&hs.memoizedState.tag&1){if(m.flags|=2048,ll(9,vf(),s_.bind(null,m,v,d,l),null),qt===null)throw Error(a(349));w||(In&124)!==0||t_(m,l,d)}return d}function t_(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=ct.updateQueue,l===null?(l=yg(),ct.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function s_(o,l,d,m){l.value=d,l.getSnapshot=m,r_(l)&&n_(o)}function a_(o,l,d){return d(function(){r_(l)&&n_(o)})}function r_(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!Sa(o,d)}catch{return!0}}function n_(o){var l=Ji(o,2);l!==null&&Ra(l,o,2)}function Ng(o){var l=ma();if(typeof o=="function"){var d=o;if(o=d(),ei){ot(!0);try{d()}finally{ot(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:o},l}function o_(o,l,d,m){return o.baseState=d,_g(o,Dt,typeof m=="function"?m:un)}function N5(o,l,d,m,v){if(yf(o))throw Error(a(485));if(o=l.action,o!==null){var w={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){w.listeners.push(T)}};A.T!==null?d(!0):w.isTransition=!1,m(w),d=l.pending,d===null?(w.next=l.pending=w,i_(l,w)):(w.next=d.next,l.pending=d.next=w)}}function i_(o,l){var d=l.action,m=l.payload,v=o.state;if(l.isTransition){var w=A.T,T={};A.T=T;try{var D=d(v,m),U=A.S;U!==null&&U(T,D),l_(o,l,D)}catch(ae){Sg(o,l,ae)}finally{A.T=w}}else try{w=d(v,m),l_(o,l,w)}catch(ae){Sg(o,l,ae)}}function l_(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){c_(o,l,m)},function(m){return Sg(o,l,m)}):c_(o,l,d)}function c_(o,l,d){l.status="fulfilled",l.value=d,u_(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,i_(o,d)))}function Sg(o,l,d){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=d,u_(l),l=l.next;while(l!==m)}o.action=null}function u_(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function d_(o,l){return l}function f_(o,l){if(At){var d=qt.formState;if(d!==null){e:{var m=ct;if(At){if(Qt){t:{for(var v=Qt,w=Tr;v.nodeType!==8;){if(!w){v=null;break t}if(v=dr(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Qt=dr(v.nextSibling),m=v.data==="F!";break e}}Wo(m)}m=!1}m&&(l=d[0])}}return d=ma(),d.memoizedState=d.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d_,lastRenderedState:l},d.queue=m,d=R_.bind(null,ct,m),m.dispatch=d,m=Ng(!1),w=Tg.bind(null,ct,!1,m.queue),m=ma(),v={state:l,dispatch:null,action:o,pending:null},m.queue=v,d=N5.bind(null,ct,v,w,d),v.dispatch=d,m.memoizedState=o,[l,d,!1]}function h_(o){var l=ms();return m_(l,Dt,o)}function m_(o,l,d){if(l=_g(o,l,d_)[0],o=xf(un)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=su(l)}catch(T){throw T===Wc?df:T}else m=l;l=ms();var v=l.queue,w=v.dispatch;return d!==l.memoizedState&&(ct.flags|=2048,ll(9,vf(),S5.bind(null,v,d),null)),[m,w,o]}function S5(o,l){o.action=l}function p_(o){var l=ms(),d=Dt;if(d!==null)return m_(l,d,o);ms(),l=l.memoizedState,d=ms();var m=d.queue.dispatch;return d.memoizedState=o,[l,m,!1]}function ll(o,l,d,m){return o={tag:o,create:d,deps:m,inst:l,next:null},l=ct.updateQueue,l===null&&(l=yg(),ct.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(m=d.next,d.next=o,o.next=m,l.lastEffect=o),o}function vf(){return{destroy:void 0,resource:void 0}}function g_(){return ms().memoizedState}function bf(o,l,d,m){var v=ma();m=m===void 0?null:m,ct.flags|=o,v.memoizedState=ll(1|l,vf(),d,m)}function au(o,l,d,m){var v=ms();m=m===void 0?null:m;var w=v.memoizedState.inst;Dt!==null&&m!==null&&pg(m,Dt.memoizedState.deps)?v.memoizedState=ll(l,w,d,m):(ct.flags|=o,v.memoizedState=ll(1|l,w,d,m))}function x_(o,l){bf(8390656,8,o,l)}function v_(o,l){au(2048,8,o,l)}function b_(o,l){return au(4,2,o,l)}function y_(o,l){return au(4,4,o,l)}function w_(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function __(o,l,d){d=d!=null?d.concat([o]):null,au(4,4,w_.bind(null,l,o),d)}function Eg(){}function j_(o,l){var d=ms();l=l===void 0?null:l;var m=d.memoizedState;return l!==null&&pg(l,m[1])?m[0]:(d.memoizedState=[o,l],o)}function N_(o,l){var d=ms();l=l===void 0?null:l;var m=d.memoizedState;if(l!==null&&pg(l,m[1]))return m[0];if(m=o(),ei){ot(!0);try{o()}finally{ot(!1)}}return d.memoizedState=[m,l],m}function Cg(o,l,d){return d===void 0||(In&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=C1(),ct.lanes|=o,Gn|=o,d)}function S_(o,l,d,m){return Sa(d,l)?d:nl.current!==null?(o=Cg(o,d,m),Sa(o,l)||(Ns=!0),o):(In&42)===0?(Ns=!0,o.memoizedState=d):(o=C1(),ct.lanes|=o,Gn|=o,l)}function E_(o,l,d,m,v){var w=B.p;B.p=w!==0&&8>w?w:8;var T=A.T,D={};A.T=D,Tg(o,!1,l,d);try{var U=v(),ae=A.S;if(ae!==null&&ae(D,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var pe=w5(U,m);ru(o,l,pe,Ta(o))}else ru(o,l,m,Ta(o))}catch(ve){ru(o,l,{then:function(){},status:"rejected",reason:ve},Ta())}finally{B.p=w,A.T=T}}function E5(){}function Ag(o,l,d,m){if(o.tag!==5)throw Error(a(476));var v=C_(o).queue;E_(o,v,l,V,d===null?E5:function(){return A_(o),d(m)})}function C_(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:V},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:un,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function A_(o){var l=C_(o).next.queue;ru(o,l,{},Ta())}function kg(){return Gs(_u)}function k_(){return ms().memoizedState}function T_(){return ms().memoizedState}function C5(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=Ta();o=Ln(d);var m=Bn(l,o,d);m!==null&&(Ra(m,l,d),Qc(m,l,d)),l={cache:ng()},o.payload=l;return}l=l.return}}function A5(o,l,d){var m=Ta();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},yf(o)?M_(l,d):(d=Kp(o,l,d,m),d!==null&&(Ra(d,o,m),P_(d,l,m)))}function R_(o,l,d){var m=Ta();ru(o,l,d,m)}function ru(o,l,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(yf(o))M_(l,v);else{var w=o.alternate;if(o.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var T=l.lastRenderedState,D=w(T,d);if(v.hasEagerState=!0,v.eagerState=D,Sa(D,T))return sf(o,l,v,0),qt===null&&tf(),!1}catch{}finally{}if(d=Kp(o,l,v,m),d!==null)return Ra(d,o,m),P_(d,l,m),!0}return!1}function Tg(o,l,d,m){if(m={lane:2,revertLane:l0(),action:m,hasEagerState:!1,eagerState:null,next:null},yf(o)){if(l)throw Error(a(479))}else l=Kp(o,d,m,2),l!==null&&Ra(l,o,2)}function yf(o){var l=o.alternate;return o===ct||l!==null&&l===ct}function M_(o,l){ol=mf=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function P_(o,l,d){if((d&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,d|=m,l.lanes=d,It(o,d)}}var wf={readContext:Gs,use:gf,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useLayoutEffect:rs,useInsertionEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useSyncExternalStore:rs,useId:rs,useHostTransitionStatus:rs,useFormState:rs,useActionState:rs,useOptimistic:rs,useMemoCache:rs,useCacheRefresh:rs},D_={readContext:Gs,use:gf,useCallback:function(o,l){return ma().memoizedState=[o,l===void 0?null:l],o},useContext:Gs,useEffect:x_,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,bf(4194308,4,w_.bind(null,l,o),d)},useLayoutEffect:function(o,l){return bf(4194308,4,o,l)},useInsertionEffect:function(o,l){bf(4,2,o,l)},useMemo:function(o,l){var d=ma();l=l===void 0?null:l;var m=o();if(ei){ot(!0);try{o()}finally{ot(!1)}}return d.memoizedState=[m,l],m},useReducer:function(o,l,d){var m=ma();if(d!==void 0){var v=d(l);if(ei){ot(!0);try{d(l)}finally{ot(!1)}}}else v=l;return m.memoizedState=m.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},m.queue=o,o=o.dispatch=A5.bind(null,ct,o),[m.memoizedState,o]},useRef:function(o){var l=ma();return o={current:o},l.memoizedState=o},useState:function(o){o=Ng(o);var l=o.queue,d=R_.bind(null,ct,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:Eg,useDeferredValue:function(o,l){var d=ma();return Cg(d,o,l)},useTransition:function(){var o=Ng(!1);return o=E_.bind(null,ct,o.queue,!0,!1),ma().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var m=ct,v=ma();if(At){if(d===void 0)throw Error(a(407));d=d()}else{if(d=l(),qt===null)throw Error(a(349));(bt&124)!==0||t_(m,l,d)}v.memoizedState=d;var w={value:d,getSnapshot:l};return v.queue=w,x_(a_.bind(null,m,w,o),[o]),m.flags|=2048,ll(9,vf(),s_.bind(null,m,w,d,l),null),d},useId:function(){var o=ma(),l=qt.identifierPrefix;if(At){var d=on,m=nn;d=(m&~(1<<32-_t(m)-1)).toString(32)+d,l=""+l+"R"+d,d=pf++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=_5++,l=""+l+"r"+d.toString(32)+"";return o.memoizedState=l},useHostTransitionStatus:kg,useFormState:f_,useActionState:f_,useOptimistic:function(o){var l=ma();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Tg.bind(null,ct,!0,d),d.dispatch=l,[o,l]},useMemoCache:wg,useCacheRefresh:function(){return ma().memoizedState=C5.bind(null,ct)}},O_={readContext:Gs,use:gf,useCallback:j_,useContext:Gs,useEffect:v_,useImperativeHandle:__,useInsertionEffect:b_,useLayoutEffect:y_,useMemo:N_,useReducer:xf,useRef:g_,useState:function(){return xf(un)},useDebugValue:Eg,useDeferredValue:function(o,l){var d=ms();return S_(d,Dt.memoizedState,o,l)},useTransition:function(){var o=xf(un)[0],l=ms().memoizedState;return[typeof o=="boolean"?o:su(o),l]},useSyncExternalStore:e_,useId:k_,useHostTransitionStatus:kg,useFormState:h_,useActionState:h_,useOptimistic:function(o,l){var d=ms();return o_(d,Dt,o,l)},useMemoCache:wg,useCacheRefresh:T_},k5={readContext:Gs,use:gf,useCallback:j_,useContext:Gs,useEffect:v_,useImperativeHandle:__,useInsertionEffect:b_,useLayoutEffect:y_,useMemo:N_,useReducer:jg,useRef:g_,useState:function(){return jg(un)},useDebugValue:Eg,useDeferredValue:function(o,l){var d=ms();return Dt===null?Cg(d,o,l):S_(d,Dt.memoizedState,o,l)},useTransition:function(){var o=jg(un)[0],l=ms().memoizedState;return[typeof o=="boolean"?o:su(o),l]},useSyncExternalStore:e_,useId:k_,useHostTransitionStatus:kg,useFormState:p_,useActionState:p_,useOptimistic:function(o,l){var d=ms();return Dt!==null?o_(d,Dt,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:wg,useCacheRefresh:T_},cl=null,nu=0;function _f(o){var l=nu;return nu+=1,cl===null&&(cl=[]),Gw(cl,o,l)}function ou(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function jf(o,l){throw l.$$typeof===g?Error(a(525)):(o=Object.prototype.toString.call(l),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function $_(o){var l=o._init;return l(o._payload)}function L_(o){function l(Q,K){if(o){var te=Q.deletions;te===null?(Q.deletions=[K],Q.flags|=16):te.push(K)}}function d(Q,K){if(!o)return null;for(;K!==null;)l(Q,K),K=K.sibling;return null}function m(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function v(Q,K){return Q=rn(Q,K),Q.index=0,Q.sibling=null,Q}function w(Q,K,te){return Q.index=te,o?(te=Q.alternate,te!==null?(te=te.index,te<K?(Q.flags|=67108866,K):te):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function T(Q){return o&&Q.alternate===null&&(Q.flags|=67108866),Q}function D(Q,K,te,xe){return K===null||K.tag!==6?(K=Zp(te,Q.mode,xe),K.return=Q,K):(K=v(K,te),K.return=Q,K)}function U(Q,K,te,xe){var $e=te.type;return $e===_?pe(Q,K,te.props.children,xe,te.key):K!==null&&(K.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===k&&$_($e)===K.type)?(K=v(K,te.props),ou(K,te),K.return=Q,K):(K=rf(te.type,te.key,te.props,null,Q.mode,xe),ou(K,te),K.return=Q,K)}function ae(Q,K,te,xe){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=Qp(te,Q.mode,xe),K.return=Q,K):(K=v(K,te.children||[]),K.return=Q,K)}function pe(Q,K,te,xe,$e){return K===null||K.tag!==7?(K=Go(te,Q.mode,xe,$e),K.return=Q,K):(K=v(K,te),K.return=Q,K)}function ve(Q,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Zp(""+K,Q.mode,te),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return te=rf(K.type,K.key,K.props,null,Q.mode,te),ou(te,K),te.return=Q,te;case y:return K=Qp(K,Q.mode,te),K.return=Q,K;case k:var xe=K._init;return K=xe(K._payload),ve(Q,K,te)}if(G(K)||I(K))return K=Go(K,Q.mode,te,null),K.return=Q,K;if(typeof K.then=="function")return ve(Q,_f(K),te);if(K.$$typeof===E)return ve(Q,cf(Q,K),te);jf(Q,K)}return null}function ne(Q,K,te,xe){var $e=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return $e!==null?null:D(Q,K,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case x:return te.key===$e?U(Q,K,te,xe):null;case y:return te.key===$e?ae(Q,K,te,xe):null;case k:return $e=te._init,te=$e(te._payload),ne(Q,K,te,xe)}if(G(te)||I(te))return $e!==null?null:pe(Q,K,te,xe,null);if(typeof te.then=="function")return ne(Q,K,_f(te),xe);if(te.$$typeof===E)return ne(Q,K,cf(Q,te),xe);jf(Q,te)}return null}function oe(Q,K,te,xe,$e){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return Q=Q.get(te)||null,D(K,Q,""+xe,$e);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case x:return Q=Q.get(xe.key===null?te:xe.key)||null,U(K,Q,xe,$e);case y:return Q=Q.get(xe.key===null?te:xe.key)||null,ae(K,Q,xe,$e);case k:var dt=xe._init;return xe=dt(xe._payload),oe(Q,K,te,xe,$e)}if(G(xe)||I(xe))return Q=Q.get(te)||null,pe(K,Q,xe,$e,null);if(typeof xe.then=="function")return oe(Q,K,te,_f(xe),$e);if(xe.$$typeof===E)return oe(Q,K,te,cf(K,xe),$e);jf(K,xe)}return null}function Qe(Q,K,te,xe){for(var $e=null,dt=null,Fe=K,Ye=K=0,Es=null;Fe!==null&&Ye<te.length;Ye++){Fe.index>Ye?(Es=Fe,Fe=null):Es=Fe.sibling;var St=ne(Q,Fe,te[Ye],xe);if(St===null){Fe===null&&(Fe=Es);break}o&&Fe&&St.alternate===null&&l(Q,Fe),K=w(St,K,Ye),dt===null?$e=St:dt.sibling=St,dt=St,Fe=Es}if(Ye===te.length)return d(Q,Fe),At&&Yo(Q,Ye),$e;if(Fe===null){for(;Ye<te.length;Ye++)Fe=ve(Q,te[Ye],xe),Fe!==null&&(K=w(Fe,K,Ye),dt===null?$e=Fe:dt.sibling=Fe,dt=Fe);return At&&Yo(Q,Ye),$e}for(Fe=m(Fe);Ye<te.length;Ye++)Es=oe(Fe,Q,Ye,te[Ye],xe),Es!==null&&(o&&Es.alternate!==null&&Fe.delete(Es.key===null?Ye:Es.key),K=w(Es,K,Ye),dt===null?$e=Es:dt.sibling=Es,dt=Es);return o&&Fe.forEach(function(to){return l(Q,to)}),At&&Yo(Q,Ye),$e}function Xe(Q,K,te,xe){if(te==null)throw Error(a(151));for(var $e=null,dt=null,Fe=K,Ye=K=0,Es=null,St=te.next();Fe!==null&&!St.done;Ye++,St=te.next()){Fe.index>Ye?(Es=Fe,Fe=null):Es=Fe.sibling;var to=ne(Q,Fe,St.value,xe);if(to===null){Fe===null&&(Fe=Es);break}o&&Fe&&to.alternate===null&&l(Q,Fe),K=w(to,K,Ye),dt===null?$e=to:dt.sibling=to,dt=to,Fe=Es}if(St.done)return d(Q,Fe),At&&Yo(Q,Ye),$e;if(Fe===null){for(;!St.done;Ye++,St=te.next())St=ve(Q,St.value,xe),St!==null&&(K=w(St,K,Ye),dt===null?$e=St:dt.sibling=St,dt=St);return At&&Yo(Q,Ye),$e}for(Fe=m(Fe);!St.done;Ye++,St=te.next())St=oe(Fe,Q,Ye,St.value,xe),St!==null&&(o&&St.alternate!==null&&Fe.delete(St.key===null?Ye:St.key),K=w(St,K,Ye),dt===null?$e=St:dt.sibling=St,dt=St);return o&&Fe.forEach(function(T3){return l(Q,T3)}),At&&Yo(Q,Ye),$e}function $t(Q,K,te,xe){if(typeof te=="object"&&te!==null&&te.type===_&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case x:e:{for(var $e=te.key;K!==null;){if(K.key===$e){if($e=te.type,$e===_){if(K.tag===7){d(Q,K.sibling),xe=v(K,te.props.children),xe.return=Q,Q=xe;break e}}else if(K.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===k&&$_($e)===K.type){d(Q,K.sibling),xe=v(K,te.props),ou(xe,te),xe.return=Q,Q=xe;break e}d(Q,K);break}else l(Q,K);K=K.sibling}te.type===_?(xe=Go(te.props.children,Q.mode,xe,te.key),xe.return=Q,Q=xe):(xe=rf(te.type,te.key,te.props,null,Q.mode,xe),ou(xe,te),xe.return=Q,Q=xe)}return T(Q);case y:e:{for($e=te.key;K!==null;){if(K.key===$e)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){d(Q,K.sibling),xe=v(K,te.children||[]),xe.return=Q,Q=xe;break e}else{d(Q,K);break}else l(Q,K);K=K.sibling}xe=Qp(te,Q.mode,xe),xe.return=Q,Q=xe}return T(Q);case k:return $e=te._init,te=$e(te._payload),$t(Q,K,te,xe)}if(G(te))return Qe(Q,K,te,xe);if(I(te)){if($e=I(te),typeof $e!="function")throw Error(a(150));return te=$e.call(te),Xe(Q,K,te,xe)}if(typeof te.then=="function")return $t(Q,K,_f(te),xe);if(te.$$typeof===E)return $t(Q,K,cf(Q,te),xe);jf(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(d(Q,K.sibling),xe=v(K,te),xe.return=Q,Q=xe):(d(Q,K),xe=Zp(te,Q.mode,xe),xe.return=Q,Q=xe),T(Q)):d(Q,K)}return function(Q,K,te,xe){try{nu=0;var $e=$t(Q,K,te,xe);return cl=null,$e}catch(Fe){if(Fe===Wc||Fe===df)throw Fe;var dt=Ea(29,Fe,null,Q.mode);return dt.lanes=xe,dt.return=Q,dt}finally{}}}var ul=L_(!0),B_=L_(!1),Ga=F(null),Rr=null;function Vn(o){var l=o.alternate;se(bs,bs.current&1),se(Ga,o),Rr===null&&(l===null||nl.current!==null||l.memoizedState!==null)&&(Rr=o)}function I_(o){if(o.tag===22){if(se(bs,bs.current),se(Ga,o),Rr===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Rr=o)}}else qn()}function qn(){se(bs,bs.current),se(Ga,Ga.current)}function dn(o){ie(Ga),Rr===o&&(Rr=null),ie(bs)}var bs=F(0);function Nf(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||y0(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Rg(o,l,d,m){l=o.memoizedState,d=d(m,l),d=d==null?l:p({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Mg={enqueueSetState:function(o,l,d){o=o._reactInternals;var m=Ta(),v=Ln(m);v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Ra(l,o,m),Qc(l,o,m))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var m=Ta(),v=Ln(m);v.tag=1,v.payload=l,d!=null&&(v.callback=d),l=Bn(o,v,m),l!==null&&(Ra(l,o,m),Qc(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=Ta(),m=Ln(d);m.tag=2,l!=null&&(m.callback=l),l=Bn(o,m,d),l!==null&&(Ra(l,o,d),Qc(l,o,d))}};function V_(o,l,d,m,v,w,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,w,T):l.prototype&&l.prototype.isPureReactComponent?!Uc(d,m)||!Uc(v,w):!0}function q_(o,l,d,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,m),l.state!==o&&Mg.enqueueReplaceState(l,l.state,null)}function ti(o,l){var d=l;if("ref"in l){d={};for(var m in l)m!=="ref"&&(d[m]=l[m])}if(o=o.defaultProps){d===l&&(d=p({},d));for(var v in o)d[v]===void 0&&(d[v]=o[v])}return d}var Sf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function U_(o){Sf(o)}function z_(o){console.error(o)}function F_(o){Sf(o)}function Ef(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function H_(o,l,d){try{var m=o.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Pg(o,l,d){return d=Ln(d),d.tag=3,d.payload={element:null},d.callback=function(){Ef(o,l)},d}function G_(o){return o=Ln(o),o.tag=3,o}function X_(o,l,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var w=m.value;o.payload=function(){return v(w)},o.callback=function(){H_(l,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(o.callback=function(){H_(l,d,m),typeof v!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function T5(o,l,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=d.alternate,l!==null&&Xc(l,d,v,!0),d=Ga.current,d!==null){switch(d.tag){case 13:return Rr===null?a0():d.alternate===null&&Jt===0&&(Jt=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===lg?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([m]):l.add(m),n0(o,m,v)),!1;case 22:return d.flags|=65536,m===lg?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([m]):d.add(m)),n0(o,m,v)),!1}throw Error(a(435,d.tag))}return n0(o,m,v),a0(),!1}if(At)return l=Ga.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,m!==tg&&(o=Error(a(422),{cause:m}),Gc(Ua(o,d)))):(m!==tg&&(l=Error(a(423),{cause:m}),Gc(Ua(l,d))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,m=Ua(m,d),v=Pg(o.stateNode,m,v),dg(o,v),Jt!==4&&(Jt=2)),!1;var w=Error(a(520),{cause:m});if(w=Ua(w,d),hu===null?hu=[w]:hu.push(w),Jt!==4&&(Jt=2),l===null)return!0;m=Ua(m,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=v&-v,d.lanes|=o,o=Pg(d.stateNode,m,o),dg(d,o),!1;case 1:if(l=d.type,w=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xn===null||!Xn.has(w))))return d.flags|=65536,v&=-v,d.lanes|=v,v=G_(v),X_(v,o,d,m),dg(d,v),!1}d=d.return}while(d!==null);return!1}var Y_=Error(a(461)),Ns=!1;function $s(o,l,d,m){l.child=o===null?B_(l,null,d,m):ul(l,o.child,d,m)}function K_(o,l,d,m,v){d=d.render;var w=l.ref;if("ref"in m){var T={};for(var D in m)D!=="ref"&&(T[D]=m[D])}else T=m;return Qo(l),m=gg(o,l,d,T,w,v),D=xg(),o!==null&&!Ns?(vg(o,l,v),fn(o,l,v)):(At&&D&&Jp(l),l.flags|=1,$s(o,l,m,v),l.child)}function W_(o,l,d,m,v){if(o===null){var w=d.type;return typeof w=="function"&&!Wp(w)&&w.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=w,Z_(o,l,w,m,v)):(o=rf(d.type,null,m,l,l.mode,v),o.ref=l.ref,o.return=l,l.child=o)}if(w=o.child,!qg(o,v)){var T=w.memoizedProps;if(d=d.compare,d=d!==null?d:Uc,d(T,m)&&o.ref===l.ref)return fn(o,l,v)}return l.flags|=1,o=rn(w,m),o.ref=l.ref,o.return=l,l.child=o}function Z_(o,l,d,m,v){if(o!==null){var w=o.memoizedProps;if(Uc(w,m)&&o.ref===l.ref)if(Ns=!1,l.pendingProps=m=w,qg(o,v))(o.flags&131072)!==0&&(Ns=!0);else return l.lanes=o.lanes,fn(o,l,v)}return Dg(o,l,d,m,v)}function Q_(o,l,d){var m=l.pendingProps,v=m.children,w=o!==null?o.memoizedState:null;if(m.mode==="hidden"){if((l.flags&128)!==0){if(m=w!==null?w.baseLanes|d:d,o!==null){for(v=l.child=o.child,w=0;v!==null;)w=w|v.lanes|v.childLanes,v=v.sibling;l.childLanes=w&~m}else l.childLanes=0,l.child=null;return J_(o,l,m,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&uf(l,w!==null?w.cachePool:null),w!==null?Zw(l,w):hg(),I_(l);else return l.lanes=l.childLanes=536870912,J_(o,l,w!==null?w.baseLanes|d:d,d)}else w!==null?(uf(l,w.cachePool),Zw(l,w),qn(),l.memoizedState=null):(o!==null&&uf(l,null),hg(),qn());return $s(o,l,v,d),l.child}function J_(o,l,d,m){var v=ig();return v=v===null?null:{parent:vs._currentValue,pool:v},l.memoizedState={baseLanes:d,cachePool:v},o!==null&&uf(l,null),hg(),I_(l),o!==null&&Xc(o,l,m,!0),null}function Cf(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(a(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function Dg(o,l,d,m,v){return Qo(l),d=gg(o,l,d,m,void 0,v),m=xg(),o!==null&&!Ns?(vg(o,l,v),fn(o,l,v)):(At&&m&&Jp(l),l.flags|=1,$s(o,l,d,v),l.child)}function e1(o,l,d,m,v,w){return Qo(l),l.updateQueue=null,d=Jw(l,m,d,v),Qw(o),m=xg(),o!==null&&!Ns?(vg(o,l,w),fn(o,l,w)):(At&&m&&Jp(l),l.flags|=1,$s(o,l,d,w),l.child)}function t1(o,l,d,m,v){if(Qo(l),l.stateNode===null){var w=el,T=d.contextType;typeof T=="object"&&T!==null&&(w=Gs(T)),w=new d(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Mg,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},cg(l),T=d.contextType,w.context=typeof T=="object"&&T!==null?Gs(T):el,w.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(Rg(l,d,T,m),w.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(T=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),T!==w.state&&Mg.enqueueReplaceState(w,w.state,null),eu(l,m,w,v),Jc(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){w=l.stateNode;var D=l.memoizedProps,U=ti(d,D);w.props=U;var ae=w.context,pe=d.contextType;T=el,typeof pe=="object"&&pe!==null&&(T=Gs(pe));var ve=d.getDerivedStateFromProps;pe=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,pe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D||ae!==T)&&q_(l,w,m,T),$n=!1;var ne=l.memoizedState;w.state=ne,eu(l,m,w,v),Jc(),ae=l.memoizedState,D||ne!==ae||$n?(typeof ve=="function"&&(Rg(l,d,ve,m),ae=l.memoizedState),(U=$n||V_(l,d,U,m,ne,ae,T))?(pe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ae),w.props=m,w.state=ae,w.context=T,m=U):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,ug(o,l),T=l.memoizedProps,pe=ti(d,T),w.props=pe,ve=l.pendingProps,ne=w.context,ae=d.contextType,U=el,typeof ae=="object"&&ae!==null&&(U=Gs(ae)),D=d.getDerivedStateFromProps,(ae=typeof D=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(T!==ve||ne!==U)&&q_(l,w,m,U),$n=!1,ne=l.memoizedState,w.state=ne,eu(l,m,w,v),Jc();var oe=l.memoizedState;T!==ve||ne!==oe||$n||o!==null&&o.dependencies!==null&&lf(o.dependencies)?(typeof D=="function"&&(Rg(l,d,D,m),oe=l.memoizedState),(pe=$n||V_(l,d,pe,m,ne,oe,U)||o!==null&&o.dependencies!==null&&lf(o.dependencies))?(ae||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,oe,U),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,oe,U)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=oe),w.props=m,w.state=oe,w.context=U,m=pe):(typeof w.componentDidUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||T===o.memoizedProps&&ne===o.memoizedState||(l.flags|=1024),m=!1)}return w=m,Cf(o,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,o!==null&&m?(l.child=ul(l,o.child,null,v),l.child=ul(l,null,d,v)):$s(o,l,d,v),l.memoizedState=w.state,o=l.child):o=fn(o,l,v),o}function s1(o,l,d,m){return Hc(),l.flags|=256,$s(o,l,d,m),l.child}var Og={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $g(o){return{baseLanes:o,cachePool:zw()}}function Lg(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=Xa),o}function a1(o,l,d){var m=l.pendingProps,v=!1,w=(l.flags&128)!==0,T;if((T=w)||(T=o!==null&&o.memoizedState===null?!1:(bs.current&2)!==0),T&&(v=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,o===null){if(At){if(v?Vn(l):qn(),At){var D=Qt,U;if(U=D){e:{for(U=D,D=Tr;U.nodeType!==8;){if(!D){D=null;break e}if(U=dr(U.nextSibling),U===null){D=null;break e}}D=U}D!==null?(l.memoizedState={dehydrated:D,treeContext:Xo!==null?{id:nn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},U=Ea(18,null,null,0),U.stateNode=D,U.return=l,l.child=U,na=l,Qt=null,U=!0):U=!1}U||Wo(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return y0(D)?l.lanes=32:l.lanes=536870912,null;dn(l)}return D=m.children,m=m.fallback,v?(qn(),v=l.mode,D=Af({mode:"hidden",children:D},v),m=Go(m,v,d,null),D.return=l,m.return=l,D.sibling=m,l.child=D,v=l.child,v.memoizedState=$g(d),v.childLanes=Lg(o,T,d),l.memoizedState=Og,m):(Vn(l),Bg(l,D))}if(U=o.memoizedState,U!==null&&(D=U.dehydrated,D!==null)){if(w)l.flags&256?(Vn(l),l.flags&=-257,l=Ig(o,l,d)):l.memoizedState!==null?(qn(),l.child=o.child,l.flags|=128,l=null):(qn(),v=m.fallback,D=l.mode,m=Af({mode:"visible",children:m.children},D),v=Go(v,D,d,null),v.flags|=2,m.return=l,v.return=l,m.sibling=v,l.child=m,ul(l,o.child,null,d),m=l.child,m.memoizedState=$g(d),m.childLanes=Lg(o,T,d),l.memoizedState=Og,l=v);else if(Vn(l),y0(D)){if(T=D.nextSibling&&D.nextSibling.dataset,T)var ae=T.dgst;T=ae,m=Error(a(419)),m.stack="",m.digest=T,Gc({value:m,source:null,stack:null}),l=Ig(o,l,d)}else if(Ns||Xc(o,l,d,!1),T=(d&o.childLanes)!==0,Ns||T){if(T=qt,T!==null&&(m=d&-d,m=(m&42)!==0?1:fs(m),m=(m&(T.suspendedLanes|d))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,Ji(o,m),Ra(T,o,m),Y_;D.data==="$?"||a0(),l=Ig(o,l,d)}else D.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=U.treeContext,Qt=dr(D.nextSibling),na=l,At=!0,Ko=null,Tr=!1,o!==null&&(Fa[Ha++]=nn,Fa[Ha++]=on,Fa[Ha++]=Xo,nn=o.id,on=o.overflow,Xo=l),l=Bg(l,m.children),l.flags|=4096);return l}return v?(qn(),v=m.fallback,D=l.mode,U=o.child,ae=U.sibling,m=rn(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,ae!==null?v=rn(ae,v):(v=Go(v,D,d,null),v.flags|=2),v.return=l,m.return=l,m.sibling=v,l.child=m,m=v,v=l.child,D=o.child.memoizedState,D===null?D=$g(d):(U=D.cachePool,U!==null?(ae=vs._currentValue,U=U.parent!==ae?{parent:ae,pool:ae}:U):U=zw(),D={baseLanes:D.baseLanes|d,cachePool:U}),v.memoizedState=D,v.childLanes=Lg(o,T,d),l.memoizedState=Og,m):(Vn(l),d=o.child,o=d.sibling,d=rn(d,{mode:"visible",children:m.children}),d.return=l,d.sibling=null,o!==null&&(T=l.deletions,T===null?(l.deletions=[o],l.flags|=16):T.push(o)),l.child=d,l.memoizedState=null,d)}function Bg(o,l){return l=Af({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Af(o,l){return o=Ea(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Ig(o,l,d){return ul(l,o.child,null,d),o=Bg(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function r1(o,l,d){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),ag(o.return,l,d)}function Vg(o,l,d,m,v){var w=o.memoizedState;w===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(w.isBackwards=l,w.rendering=null,w.renderingStartTime=0,w.last=m,w.tail=d,w.tailMode=v)}function n1(o,l,d){var m=l.pendingProps,v=m.revealOrder,w=m.tail;if($s(o,l,m.children,d),m=bs.current,(m&2)!==0)m=m&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&r1(o,d,l);else if(o.tag===19)r1(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}switch(se(bs,m),v){case"forwards":for(d=l.child,v=null;d!==null;)o=d.alternate,o!==null&&Nf(o)===null&&(v=d),d=d.sibling;d=v,d===null?(v=l.child,l.child=null):(v=d.sibling,d.sibling=null),Vg(l,!1,v,d,w);break;case"backwards":for(d=null,v=l.child,l.child=null;v!==null;){if(o=v.alternate,o!==null&&Nf(o)===null){l.child=v;break}o=v.sibling,v.sibling=d,d=v,v=o}Vg(l,!0,d,null,w);break;case"together":Vg(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function fn(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Gn|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(Xc(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(a(153));if(l.child!==null){for(o=l.child,d=rn(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=rn(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function qg(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&lf(o)))}function R5(o,l,d){switch(l.tag){case 3:ce(l,l.stateNode.containerInfo),On(l,vs,o.memoizedState.cache),Hc();break;case 27:case 5:Ne(l);break;case 4:ce(l,l.stateNode.containerInfo);break;case 10:On(l,l.type,l.memoizedProps.value);break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Vn(l),l.flags|=128,null):(d&l.child.childLanes)!==0?a1(o,l,d):(Vn(l),o=fn(o,l,d),o!==null?o.sibling:null);Vn(l);break;case 19:var v=(o.flags&128)!==0;if(m=(d&l.childLanes)!==0,m||(Xc(o,l,d,!1),m=(d&l.childLanes)!==0),v){if(m)return n1(o,l,d);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(bs,bs.current),m)break;return null;case 22:case 23:return l.lanes=0,Q_(o,l,d);case 24:On(l,vs,o.memoizedState.cache)}return fn(o,l,d)}function o1(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)Ns=!0;else{if(!qg(o,d)&&(l.flags&128)===0)return Ns=!1,R5(o,l,d);Ns=(o.flags&131072)!==0}else Ns=!1,At&&(l.flags&1048576)!==0&&$w(l,of,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var m=l.elementType,v=m._init;if(m=v(m._payload),l.type=m,typeof m=="function")Wp(m)?(o=ti(m,o),l.tag=1,l=t1(null,l,m,o,d)):(l.tag=0,l=Dg(null,l,m,o,d));else{if(m!=null){if(v=m.$$typeof,v===M){l.tag=11,l=K_(null,l,m,o,d);break e}else if(v===$){l.tag=14,l=W_(null,l,m,o,d);break e}}throw l=ee(m)||m,Error(a(306,l,""))}}return l;case 0:return Dg(o,l,l.type,l.pendingProps,d);case 1:return m=l.type,v=ti(m,l.pendingProps),t1(o,l,m,v,d);case 3:e:{if(ce(l,l.stateNode.containerInfo),o===null)throw Error(a(387));m=l.pendingProps;var w=l.memoizedState;v=w.element,ug(o,l),eu(l,m,null,d);var T=l.memoizedState;if(m=T.cache,On(l,vs,m),m!==w.cache&&rg(l,[vs],d,!0),Jc(),m=T.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=s1(o,l,m,d);break e}else if(m!==v){v=Ua(Error(a(424)),l),Gc(v),l=s1(o,l,m,d);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Qt=dr(o.firstChild),na=l,At=!0,Ko=null,Tr=!0,d=B_(l,null,m,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Hc(),m===v){l=fn(o,l,d);break e}$s(o,l,m,d)}l=l.child}return l;case 26:return Cf(o,l),o===null?(d=uj(l.type,null,l.pendingProps,null))?l.memoizedState=d:At||(d=l.type,o=l.pendingProps,m=Uf(re.current).createElement(d),m[as]=l,m[Vt]=o,Bs(m,d,o),js(m),l.stateNode=m):l.memoizedState=uj(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Ne(l),o===null&&At&&(m=l.stateNode=ij(l.type,l.pendingProps,re.current),na=l,Tr=!0,v=Qt,Wn(l.type)?(w0=v,Qt=dr(m.firstChild)):Qt=v),$s(o,l,l.pendingProps.children,d),Cf(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&At&&((v=m=Qt)&&(m=n3(m,l.type,l.pendingProps,Tr),m!==null?(l.stateNode=m,na=l,Qt=dr(m.firstChild),Tr=!1,v=!0):v=!1),v||Wo(l)),Ne(l),v=l.type,w=l.pendingProps,T=o!==null?o.memoizedProps:null,m=w.children,x0(v,w)?m=null:T!==null&&x0(v,T)&&(l.flags|=32),l.memoizedState!==null&&(v=gg(o,l,j5,null,null,d),_u._currentValue=v),Cf(o,l),$s(o,l,m,d),l.child;case 6:return o===null&&At&&((o=d=Qt)&&(d=o3(d,l.pendingProps,Tr),d!==null?(l.stateNode=d,na=l,Qt=null,o=!0):o=!1),o||Wo(l)),null;case 13:return a1(o,l,d);case 4:return ce(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=ul(l,null,m,d):$s(o,l,m,d),l.child;case 11:return K_(o,l,l.type,l.pendingProps,d);case 7:return $s(o,l,l.pendingProps,d),l.child;case 8:return $s(o,l,l.pendingProps.children,d),l.child;case 12:return $s(o,l,l.pendingProps.children,d),l.child;case 10:return m=l.pendingProps,On(l,l.type,m.value),$s(o,l,m.children,d),l.child;case 9:return v=l.type._context,m=l.pendingProps.children,Qo(l),v=Gs(v),m=m(v),l.flags|=1,$s(o,l,m,d),l.child;case 14:return W_(o,l,l.type,l.pendingProps,d);case 15:return Z_(o,l,l.type,l.pendingProps,d);case 19:return n1(o,l,d);case 31:return m=l.pendingProps,d=l.mode,m={mode:m.mode,children:m.children},o===null?(d=Af(m,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=rn(o.child,m),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Q_(o,l,d);case 24:return Qo(l),m=Gs(vs),o===null?(v=ig(),v===null&&(v=qt,w=ng(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=d),v=w),l.memoizedState={parent:m,cache:v},cg(l),On(l,vs,v)):((o.lanes&d)!==0&&(ug(o,l),eu(l,null,null,d),Jc()),v=o.memoizedState,w=l.memoizedState,v.parent!==m?(v={parent:m,cache:m},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),On(l,vs,m)):(m=w.cache,On(l,vs,m),m!==v.cache&&rg(l,[vs],d,!0))),$s(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(a(156,l.tag))}function hn(o){o.flags|=4}function i1(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!pj(l)){if(l=Ga.current,l!==null&&((bt&4194048)===bt?Rr!==null:(bt&62914560)!==bt&&(bt&536870912)===0||l!==Rr))throw Zc=lg,Fw;o.flags|=8192}}function kf(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Bi():536870912,o.lanes|=l,ml|=l)}function iu(o,l){if(!At)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Kt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,m=0;if(l)for(var v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=d,l}function M5(o,l,d){var m=l.pendingProps;switch(eg(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(l),null;case 1:return Kt(l),null;case 3:return d=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),cn(vs),be(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Fc(l)?hn(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Iw())),Kt(l),null;case 26:return d=l.memoizedState,o===null?(hn(l),d!==null?(Kt(l),i1(l,d)):(Kt(l),l.flags&=-16777217)):d?d!==o.memoizedState?(hn(l),Kt(l),i1(l,d)):(Kt(l),l.flags&=-16777217):(o.memoizedProps!==m&&hn(l),Kt(l),l.flags&=-16777217),null;case 27:J(l),d=re.current;var v=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==m&&hn(l);else{if(!m){if(l.stateNode===null)throw Error(a(166));return Kt(l),null}o=ue.current,Fc(l)?Lw(l):(o=ij(v,m,d),l.stateNode=o,hn(l))}return Kt(l),null;case 5:if(J(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&hn(l);else{if(!m){if(l.stateNode===null)throw Error(a(166));return Kt(l),null}if(o=ue.current,Fc(l))Lw(l);else{switch(v=Uf(re.current),o){case 1:o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=v.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?o.multiple=!0:m.size&&(o.size=m.size);break;default:o=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}o[as]=l,o[Vt]=m;e:for(v=l.child;v!==null;){if(v.tag===5||v.tag===6)o.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===l)break e;for(;v.sibling===null;){if(v.return===null||v.return===l)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}l.stateNode=o;e:switch(Bs(o,d,m),d){case"button":case"input":case"select":case"textarea":o=!!m.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&hn(l)}}return Kt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&hn(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(a(166));if(o=re.current,Fc(l)){if(o=l.stateNode,d=l.memoizedProps,m=null,v=na,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}o[as]=l,o=!!(o.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||ej(o.nodeValue,d)),o||Wo(l)}else o=Uf(o).createTextNode(m),o[as]=l,l.stateNode=o}return Kt(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Fc(l),m!==null&&m.dehydrated!==null){if(o===null){if(!v)throw Error(a(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(a(317));v[as]=l}else Hc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Kt(l),v=!1}else v=Iw(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(dn(l),l):(dn(l),null)}if(dn(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=m!==null,o=o!==null&&o.memoizedState!==null,d){m=l.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var w=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==v&&(m.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),kf(l,l.updateQueue),Kt(l),null;case 4:return be(),o===null&&f0(l.stateNode.containerInfo),Kt(l),null;case 10:return cn(l.type),Kt(l),null;case 19:if(ie(bs),v=l.memoizedState,v===null)return Kt(l),null;if(m=(l.flags&128)!==0,w=v.rendering,w===null)if(m)iu(v,!1);else{if(Jt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(w=Nf(o),w!==null){for(l.flags|=128,iu(v,!1),o=w.updateQueue,l.updateQueue=o,kf(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)Ow(d,o),d=d.sibling;return se(bs,bs.current&1|2),l.child}o=o.sibling}v.tail!==null&&ye()>Mf&&(l.flags|=128,m=!0,iu(v,!1),l.lanes=4194304)}else{if(!m)if(o=Nf(w),o!==null){if(l.flags|=128,m=!0,o=o.updateQueue,l.updateQueue=o,kf(l,o),iu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!w.alternate&&!At)return Kt(l),null}else 2*ye()-v.renderingStartTime>Mf&&d!==536870912&&(l.flags|=128,m=!0,iu(v,!1),l.lanes=4194304);v.isBackwards?(w.sibling=l.child,l.child=w):(o=v.last,o!==null?o.sibling=w:l.child=w,v.last=w)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=ye(),l.sibling=null,o=bs.current,se(bs,m?o&1|2:o&1),l):(Kt(l),null);case 22:case 23:return dn(l),mg(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(d&536870912)!==0&&(l.flags&128)===0&&(Kt(l),l.subtreeFlags&6&&(l.flags|=8192)):Kt(l),d=l.updateQueue,d!==null&&kf(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==d&&(l.flags|=2048),o!==null&&ie(Jo),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),cn(vs),Kt(l),null;case 25:return null;case 30:return null}throw Error(a(156,l.tag))}function P5(o,l){switch(eg(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return cn(vs),be(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return J(l),null;case 13:if(dn(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(a(340));Hc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ie(bs),null;case 4:return be(),null;case 10:return cn(l.type),null;case 22:case 23:return dn(l),mg(),o!==null&&ie(Jo),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return cn(vs),null;case 25:return null;default:return null}}function l1(o,l){switch(eg(l),l.tag){case 3:cn(vs),be();break;case 26:case 27:case 5:J(l);break;case 4:be();break;case 13:dn(l);break;case 19:ie(bs);break;case 10:cn(l.type);break;case 22:case 23:dn(l),mg(),o!==null&&ie(Jo);break;case 24:cn(vs)}}function lu(o,l){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&o)===o){m=void 0;var w=d.create,T=d.inst;m=w(),T.destroy=m}d=d.next}while(d!==v)}}catch(D){Lt(l,l.return,D)}}function Un(o,l,d){try{var m=l.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var w=v.next;m=w;do{if((m.tag&o)===o){var T=m.inst,D=T.destroy;if(D!==void 0){T.destroy=void 0,v=l;var U=d,ae=D;try{ae()}catch(pe){Lt(v,U,pe)}}}m=m.next}while(m!==w)}}catch(pe){Lt(l,l.return,pe)}}function c1(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{Ww(l,d)}catch(m){Lt(o,o.return,m)}}}function u1(o,l,d){d.props=ti(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(m){Lt(o,l,m)}}function cu(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof d=="function"?o.refCleanup=d(m):d.current=m}}catch(v){Lt(o,l,v)}}function Mr(o,l){var d=o.ref,m=o.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){Lt(o,l,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){Lt(o,l,v)}else d.current=null}function d1(o){var l=o.type,d=o.memoizedProps,m=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){Lt(o,o.return,v)}}function Ug(o,l,d){try{var m=o.stateNode;e3(m,o.type,d,l),m[Vt]=l}catch(v){Lt(o,o.return,v)}}function f1(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Wn(o.type)||o.tag===4}function zg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||f1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Wn(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fg(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=qf));else if(m!==4&&(m===27&&Wn(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(Fg(o,l,d),o=o.sibling;o!==null;)Fg(o,l,d),o=o.sibling}function Tf(o,l,d){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(m!==4&&(m===27&&Wn(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(Tf(o,l,d),o=o.sibling;o!==null;)Tf(o,l,d),o=o.sibling}function h1(o){var l=o.stateNode,d=o.memoizedProps;try{for(var m=o.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);Bs(l,m,d),l[as]=o,l[Vt]=d}catch(w){Lt(o,o.return,w)}}var mn=!1,ns=!1,Hg=!1,m1=typeof WeakSet=="function"?WeakSet:Set,Ss=null;function D5(o,l){if(o=o.containerInfo,p0=Yf,o=Sw(o),zp(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{d.nodeType,w.nodeType}catch{d=null;break e}var T=0,D=-1,U=-1,ae=0,pe=0,ve=o,ne=null;t:for(;;){for(var oe;ve!==d||v!==0&&ve.nodeType!==3||(D=T+v),ve!==w||m!==0&&ve.nodeType!==3||(U=T+m),ve.nodeType===3&&(T+=ve.nodeValue.length),(oe=ve.firstChild)!==null;)ne=ve,ve=oe;for(;;){if(ve===o)break t;if(ne===d&&++ae===v&&(D=T),ne===w&&++pe===m&&(U=T),(oe=ve.nextSibling)!==null)break;ve=ne,ne=ve.parentNode}ve=oe}d=D===-1||U===-1?null:{start:D,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(g0={focusedElem:o,selectionRange:d},Yf=!1,Ss=l;Ss!==null;)if(l=Ss,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,Ss=o;else for(;Ss!==null;){switch(l=Ss,w=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&w!==null){o=void 0,d=l,v=w.memoizedProps,w=w.memoizedState,m=d.stateNode;try{var Qe=ti(d.type,v,d.elementType===d.type);o=m.getSnapshotBeforeUpdate(Qe,w),m.__reactInternalSnapshotBeforeUpdate=o}catch(Xe){Lt(d,d.return,Xe)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)b0(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":b0(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=l.sibling,o!==null){o.return=l.return,Ss=o;break}Ss=l.return}}function p1(o,l,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:zn(o,d),m&4&&lu(5,d);break;case 1:if(zn(o,d),m&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(T){Lt(d,d.return,T)}else{var v=ti(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(v,l,o.__reactInternalSnapshotBeforeUpdate)}catch(T){Lt(d,d.return,T)}}m&64&&c1(d),m&512&&cu(d,d.return);break;case 3:if(zn(o,d),m&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Ww(o,l)}catch(T){Lt(d,d.return,T)}}break;case 27:l===null&&m&4&&h1(d);case 26:case 5:zn(o,d),l===null&&m&4&&d1(d),m&512&&cu(d,d.return);break;case 12:zn(o,d);break;case 13:zn(o,d),m&4&&v1(o,d),m&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=z5.bind(null,d),i3(o,d))));break;case 22:if(m=d.memoizedState!==null||mn,!m){l=l!==null&&l.memoizedState!==null||ns,v=mn;var w=ns;mn=m,(ns=l)&&!w?Fn(o,d,(d.subtreeFlags&8772)!==0):zn(o,d),mn=v,ns=w}break;case 30:break;default:zn(o,d)}}function g1(o){var l=o.alternate;l!==null&&(o.alternate=null,g1(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Np(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Xt=null,pa=!1;function pn(o,l,d){for(d=d.child;d!==null;)x1(o,l,d),d=d.sibling}function x1(o,l,d){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Re,d)}catch{}switch(d.tag){case 26:ns||Mr(d,l),pn(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ns||Mr(d,l);var m=Xt,v=pa;Wn(d.type)&&(Xt=d.stateNode,pa=!1),pn(o,l,d),vu(d.stateNode),Xt=m,pa=v;break;case 5:ns||Mr(d,l);case 6:if(m=Xt,v=pa,Xt=null,pn(o,l,d),Xt=m,pa=v,Xt!==null)if(pa)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(d.stateNode)}catch(w){Lt(d,l,w)}else try{Xt.removeChild(d.stateNode)}catch(w){Lt(d,l,w)}break;case 18:Xt!==null&&(pa?(o=Xt,nj(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),Eu(o)):nj(Xt,d.stateNode));break;case 4:m=Xt,v=pa,Xt=d.stateNode.containerInfo,pa=!0,pn(o,l,d),Xt=m,pa=v;break;case 0:case 11:case 14:case 15:ns||Un(2,d,l),ns||Un(4,d,l),pn(o,l,d);break;case 1:ns||(Mr(d,l),m=d.stateNode,typeof m.componentWillUnmount=="function"&&u1(d,l,m)),pn(o,l,d);break;case 21:pn(o,l,d);break;case 22:ns=(m=ns)||d.memoizedState!==null,pn(o,l,d),ns=m;break;default:pn(o,l,d)}}function v1(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Eu(o)}catch(d){Lt(l,l.return,d)}}function O5(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new m1),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new m1),l;default:throw Error(a(435,o.tag))}}function Gg(o,l){var d=O5(o);l.forEach(function(m){var v=F5.bind(null,o,m);d.has(m)||(d.add(m),m.then(v,v))})}function Ca(o,l){var d=l.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],w=o,T=l,D=T;e:for(;D!==null;){switch(D.tag){case 27:if(Wn(D.type)){Xt=D.stateNode,pa=!1;break e}break;case 5:Xt=D.stateNode,pa=!1;break e;case 3:case 4:Xt=D.stateNode.containerInfo,pa=!0;break e}D=D.return}if(Xt===null)throw Error(a(160));x1(w,T,v),Xt=null,pa=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)b1(l,o),l=l.sibling}var ur=null;function b1(o,l){var d=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ca(l,o),Aa(o),m&4&&(Un(3,o,o.return),lu(3,o),Un(5,o,o.return));break;case 1:Ca(l,o),Aa(o),m&512&&(ns||d===null||Mr(d,d.return)),m&64&&mn&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=ur;if(Ca(l,o),Aa(o),m&512&&(ns||d===null||Mr(d,d.return)),m&4){var w=d!==null?d.memoizedState:null;if(m=o.memoizedState,d===null)if(m===null)if(o.stateNode===null){e:{m=o.type,d=o.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Pc]||w[as]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(m),v.head.insertBefore(w,v.querySelector("head > title"))),Bs(w,m,d),w[as]=o,js(w),m=w;break e;case"link":var T=hj("link","href",v).get(m+(d.href||""));if(T){for(var D=0;D<T.length;D++)if(w=T[D],w.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&w.getAttribute("rel")===(d.rel==null?null:d.rel)&&w.getAttribute("title")===(d.title==null?null:d.title)&&w.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(D,1);break t}}w=v.createElement(m),Bs(w,m,d),v.head.appendChild(w);break;case"meta":if(T=hj("meta","content",v).get(m+(d.content||""))){for(D=0;D<T.length;D++)if(w=T[D],w.getAttribute("content")===(d.content==null?null:""+d.content)&&w.getAttribute("name")===(d.name==null?null:d.name)&&w.getAttribute("property")===(d.property==null?null:d.property)&&w.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&w.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(D,1);break t}}w=v.createElement(m),Bs(w,m,d),v.head.appendChild(w);break;default:throw Error(a(468,m))}w[as]=o,js(w),m=w}o.stateNode=m}else mj(v,o.type,o.stateNode);else o.stateNode=fj(v,m,o.memoizedProps);else w!==m?(w===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):w.count--,m===null?mj(v,o.type,o.stateNode):fj(v,m,o.memoizedProps)):m===null&&o.stateNode!==null&&Ug(o,o.memoizedProps,d.memoizedProps)}break;case 27:Ca(l,o),Aa(o),m&512&&(ns||d===null||Mr(d,d.return)),d!==null&&m&4&&Ug(o,o.memoizedProps,d.memoizedProps);break;case 5:if(Ca(l,o),Aa(o),m&512&&(ns||d===null||Mr(d,d.return)),o.flags&32){v=o.stateNode;try{Gi(v,"")}catch(oe){Lt(o,o.return,oe)}}m&4&&o.stateNode!=null&&(v=o.memoizedProps,Ug(o,v,d!==null?d.memoizedProps:v)),m&1024&&(Hg=!0);break;case 6:if(Ca(l,o),Aa(o),m&4){if(o.stateNode===null)throw Error(a(162));m=o.memoizedProps,d=o.stateNode;try{d.nodeValue=m}catch(oe){Lt(o,o.return,oe)}}break;case 3:if(Hf=null,v=ur,ur=zf(l.containerInfo),Ca(l,o),ur=v,Aa(o),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Eu(l.containerInfo)}catch(oe){Lt(o,o.return,oe)}Hg&&(Hg=!1,y1(o));break;case 4:m=ur,ur=zf(o.stateNode.containerInfo),Ca(l,o),Aa(o),ur=m;break;case 12:Ca(l,o),Aa(o);break;case 13:Ca(l,o),Aa(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Qg=ye()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Gg(o,m)));break;case 22:v=o.memoizedState!==null;var U=d!==null&&d.memoizedState!==null,ae=mn,pe=ns;if(mn=ae||v,ns=pe||U,Ca(l,o),ns=pe,mn=ae,Aa(o),m&8192)e:for(l=o.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(d===null||U||mn||ns||si(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){U=d=l;try{if(w=U.stateNode,v)T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{D=U.stateNode;var ve=U.memoizedProps.style,ne=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(oe){Lt(U,U.return,oe)}}}else if(l.tag===6){if(d===null){U=l;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(oe){Lt(U,U.return,oe)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,Gg(o,d))));break;case 19:Ca(l,o),Aa(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Gg(o,m)));break;case 30:break;case 21:break;default:Ca(l,o),Aa(o)}}function Aa(o){var l=o.flags;if(l&2){try{for(var d,m=o.return;m!==null;){if(f1(m)){d=m;break}m=m.return}if(d==null)throw Error(a(160));switch(d.tag){case 27:var v=d.stateNode,w=zg(o);Tf(o,w,v);break;case 5:var T=d.stateNode;d.flags&32&&(Gi(T,""),d.flags&=-33);var D=zg(o);Tf(o,D,T);break;case 3:case 4:var U=d.stateNode.containerInfo,ae=zg(o);Fg(o,ae,U);break;default:throw Error(a(161))}}catch(pe){Lt(o,o.return,pe)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function y1(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;y1(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function zn(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)p1(o,l.alternate,l),l=l.sibling}function si(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Un(4,l,l.return),si(l);break;case 1:Mr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&u1(l,l.return,d),si(l);break;case 27:vu(l.stateNode);case 26:case 5:Mr(l,l.return),si(l);break;case 22:l.memoizedState===null&&si(l);break;case 30:si(l);break;default:si(l)}o=o.sibling}}function Fn(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,v=o,w=l,T=w.flags;switch(w.tag){case 0:case 11:case 15:Fn(v,w,d),lu(4,w);break;case 1:if(Fn(v,w,d),m=w,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ae){Lt(m,m.return,ae)}if(m=w,v=m.updateQueue,v!==null){var D=m.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)Kw(U[v],D)}catch(ae){Lt(m,m.return,ae)}}d&&T&64&&c1(w),cu(w,w.return);break;case 27:h1(w);case 26:case 5:Fn(v,w,d),d&&m===null&&T&4&&d1(w),cu(w,w.return);break;case 12:Fn(v,w,d);break;case 13:Fn(v,w,d),d&&T&4&&v1(v,w);break;case 22:w.memoizedState===null&&Fn(v,w,d),cu(w,w.return);break;case 30:break;default:Fn(v,w,d)}l=l.sibling}}function Xg(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Yc(d))}function Yg(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Yc(o))}function Pr(o,l,d,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)w1(o,l,d,m),l=l.sibling}function w1(o,l,d,m){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Pr(o,l,d,m),v&2048&&lu(9,l);break;case 1:Pr(o,l,d,m);break;case 3:Pr(o,l,d,m),v&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Yc(o)));break;case 12:if(v&2048){Pr(o,l,d,m),o=l.stateNode;try{var w=l.memoizedProps,T=w.id,D=w.onPostCommit;typeof D=="function"&&D(T,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){Lt(l,l.return,U)}}else Pr(o,l,d,m);break;case 13:Pr(o,l,d,m);break;case 23:break;case 22:w=l.stateNode,T=l.alternate,l.memoizedState!==null?w._visibility&2?Pr(o,l,d,m):uu(o,l):w._visibility&2?Pr(o,l,d,m):(w._visibility|=2,dl(o,l,d,m,(l.subtreeFlags&10256)!==0)),v&2048&&Xg(T,l);break;case 24:Pr(o,l,d,m),v&2048&&Yg(l.alternate,l);break;default:Pr(o,l,d,m)}}function dl(o,l,d,m,v){for(v=v&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var w=o,T=l,D=d,U=m,ae=T.flags;switch(T.tag){case 0:case 11:case 15:dl(w,T,D,U,v),lu(8,T);break;case 23:break;case 22:var pe=T.stateNode;T.memoizedState!==null?pe._visibility&2?dl(w,T,D,U,v):uu(w,T):(pe._visibility|=2,dl(w,T,D,U,v)),v&&ae&2048&&Xg(T.alternate,T);break;case 24:dl(w,T,D,U,v),v&&ae&2048&&Yg(T.alternate,T);break;default:dl(w,T,D,U,v)}l=l.sibling}}function uu(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,m=l,v=m.flags;switch(m.tag){case 22:uu(d,m),v&2048&&Xg(m.alternate,m);break;case 24:uu(d,m),v&2048&&Yg(m.alternate,m);break;default:uu(d,m)}l=l.sibling}}var du=8192;function fl(o){if(o.subtreeFlags&du)for(o=o.child;o!==null;)_1(o),o=o.sibling}function _1(o){switch(o.tag){case 26:fl(o),o.flags&du&&o.memoizedState!==null&&y3(ur,o.memoizedState,o.memoizedProps);break;case 5:fl(o);break;case 3:case 4:var l=ur;ur=zf(o.stateNode.containerInfo),fl(o),ur=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=du,du=16777216,fl(o),du=l):fl(o));break;default:fl(o)}}function j1(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function fu(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Ss=m,S1(m,o)}j1(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)N1(o),o=o.sibling}function N1(o){switch(o.tag){case 0:case 11:case 15:fu(o),o.flags&2048&&Un(9,o,o.return);break;case 3:fu(o);break;case 12:fu(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Rf(o)):fu(o);break;default:fu(o)}}function Rf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var m=l[d];Ss=m,S1(m,o)}j1(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Un(8,l,l.return),Rf(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,Rf(l));break;default:Rf(l)}o=o.sibling}}function S1(o,l){for(;Ss!==null;){var d=Ss;switch(d.tag){case 0:case 11:case 15:Un(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Yc(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Ss=m;else e:for(d=o;Ss!==null;){m=Ss;var v=m.sibling,w=m.return;if(g1(m),m===d){Ss=null;break e}if(v!==null){v.return=w,Ss=v;break e}Ss=w}}}var $5={getCacheForType:function(o){var l=Gs(vs),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},L5=typeof WeakMap=="function"?WeakMap:Map,Mt=0,qt=null,mt=null,bt=0,Pt=0,ka=null,Hn=!1,hl=!1,Kg=!1,gn=0,Jt=0,Gn=0,ai=0,Wg=0,Xa=0,ml=0,hu=null,ga=null,Zg=!1,Qg=0,Mf=1/0,Pf=null,Xn=null,Ls=0,Yn=null,pl=null,gl=0,Jg=0,e0=null,E1=null,mu=0,t0=null;function Ta(){if((Mt&2)!==0&&bt!==0)return bt&-bt;if(A.T!==null){var o=al;return o!==0?o:l0()}return qo()}function C1(){Xa===0&&(Xa=(bt&536870912)===0||At?ts():536870912);var o=Ga.current;return o!==null&&(o.flags|=32),Xa}function Ra(o,l,d){(o===qt&&(Pt===2||Pt===9)||o.cancelPendingCommit!==null)&&(xl(o,0),Kn(o,bt,Xa,!1)),fa(o,d),((Mt&2)===0||o!==qt)&&(o===qt&&((Mt&2)===0&&(ai|=d),Jt===4&&Kn(o,bt,Xa,!1)),Dr(o))}function A1(o,l,d){if((Mt&6)!==0)throw Error(a(327));var m=!d&&(l&124)===0&&(l&o.expiredLanes)===0||ir(o,l),v=m?V5(o,l):r0(o,l,!0),w=m;do{if(v===0){hl&&!m&&Kn(o,l,0,!1);break}else{if(d=o.current.alternate,w&&!B5(d)){v=r0(o,l,!1),w=!1;continue}if(v===2){if(w=l,o.errorRecoveryDisabledLanes&w)var T=0;else T=o.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var D=o;v=hu;var U=D.current.memoizedState.isDehydrated;if(U&&(xl(D,T).flags|=256),T=r0(D,T,!1),T!==2){if(Kg&&!U){D.errorRecoveryDisabledLanes|=w,ai|=w,v=4;break e}w=ga,ga=v,w!==null&&(ga===null?ga=w:ga.push.apply(ga,w))}v=T}if(w=!1,v!==2)continue}}if(v===1){xl(o,0),Kn(o,l,0,!0);break}e:{switch(m=o,w=v,w){case 0:case 1:throw Error(a(345));case 4:if((l&4194048)!==l)break;case 6:Kn(m,l,Xa,!Hn);break e;case 2:ga=null;break;case 3:case 5:break;default:throw Error(a(329))}if((l&62914560)===l&&(v=Qg+300-ye(),10<v)){if(Kn(m,l,Xa,!Hn),ra(m,0,!0)!==0)break e;m.timeoutHandle=aj(k1.bind(null,m,d,ga,Pf,Zg,l,Xa,ai,ml,Hn,w,2,-0,0),v);break e}k1(m,d,ga,Pf,Zg,l,Xa,ai,ml,Hn,w,0,-0,0)}}break}while(!0);Dr(o)}function k1(o,l,d,m,v,w,T,D,U,ae,pe,ve,ne,oe){if(o.timeoutHandle=-1,ve=l.subtreeFlags,(ve&8192||(ve&16785408)===16785408)&&(wu={stylesheets:null,count:0,unsuspend:b3},_1(l),ve=w3(),ve!==null)){o.cancelPendingCommit=ve($1.bind(null,o,l,w,d,m,v,T,D,U,pe,1,ne,oe)),Kn(o,w,T,!ae);return}$1(o,l,w,d,m,v,T,D,U)}function B5(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],w=v.getSnapshot;v=v.value;try{if(!Sa(w(),v))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Kn(o,l,d,m){l&=~Wg,l&=~ai,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var v=l;0<v;){var w=31-_t(v),T=1<<w;m[w]=-1,v&=~T}d!==0&&Ze(o,d,l)}function Df(){return(Mt&6)===0?(pu(0),!1):!0}function s0(){if(mt!==null){if(Pt===0)var o=mt.return;else o=mt,ln=Zo=null,bg(o),cl=null,nu=0,o=mt;for(;o!==null;)l1(o.alternate,o),o=o.return;mt=null}}function xl(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,s3(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),s0(),qt=o,mt=d=rn(o.current,null),bt=l,Pt=0,ka=null,Hn=!1,hl=ir(o,l),Kg=!1,ml=Xa=Wg=ai=Gn=Jt=0,ga=hu=null,Zg=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var v=31-_t(m),w=1<<v;l|=o[v],m&=~w}return gn=l,tf(),d}function T1(o,l){ct=null,A.H=wf,l===Wc||l===df?(l=Xw(),Pt=3):l===Fw?(l=Xw(),Pt=4):Pt=l===Y_?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ka=l,mt===null&&(Jt=1,Ef(o,Ua(l,o.current)))}function R1(){var o=A.H;return A.H=wf,o===null?wf:o}function M1(){var o=A.A;return A.A=$5,o}function a0(){Jt=4,Hn||(bt&4194048)!==bt&&Ga.current!==null||(hl=!0),(Gn&134217727)===0&&(ai&134217727)===0||qt===null||Kn(qt,bt,Xa,!1)}function r0(o,l,d){var m=Mt;Mt|=2;var v=R1(),w=M1();(qt!==o||bt!==l)&&(Pf=null,xl(o,l)),l=!1;var T=Jt;e:do try{if(Pt!==0&&mt!==null){var D=mt,U=ka;switch(Pt){case 8:s0(),T=6;break e;case 3:case 2:case 9:case 6:Ga.current===null&&(l=!0);var ae=Pt;if(Pt=0,ka=null,vl(o,D,U,ae),d&&hl){T=0;break e}break;default:ae=Pt,Pt=0,ka=null,vl(o,D,U,ae)}}I5(),T=Jt;break}catch(pe){T1(o,pe)}while(!0);return l&&o.shellSuspendCounter++,ln=Zo=null,Mt=m,A.H=v,A.A=w,mt===null&&(qt=null,bt=0,tf()),T}function I5(){for(;mt!==null;)P1(mt)}function V5(o,l){var d=Mt;Mt|=2;var m=R1(),v=M1();qt!==o||bt!==l?(Pf=null,Mf=ye()+500,xl(o,l)):hl=ir(o,l);e:do try{if(Pt!==0&&mt!==null){l=mt;var w=ka;t:switch(Pt){case 1:Pt=0,ka=null,vl(o,l,w,1);break;case 2:case 9:if(Hw(w)){Pt=0,ka=null,D1(l);break}l=function(){Pt!==2&&Pt!==9||qt!==o||(Pt=7),Dr(o)},w.then(l,l);break e;case 3:Pt=7;break e;case 4:Pt=5;break e;case 7:Hw(w)?(Pt=0,ka=null,D1(l)):(Pt=0,ka=null,vl(o,l,w,7));break;case 5:var T=null;switch(mt.tag){case 26:T=mt.memoizedState;case 5:case 27:var D=mt;if(!T||pj(T)){Pt=0,ka=null;var U=D.sibling;if(U!==null)mt=U;else{var ae=D.return;ae!==null?(mt=ae,Of(ae)):mt=null}break t}}Pt=0,ka=null,vl(o,l,w,5);break;case 6:Pt=0,ka=null,vl(o,l,w,6);break;case 8:s0(),Jt=6;break e;default:throw Error(a(462))}}q5();break}catch(pe){T1(o,pe)}while(!0);return ln=Zo=null,A.H=m,A.A=v,Mt=d,mt!==null?0:(qt=null,bt=0,tf(),Jt)}function q5(){for(;mt!==null&&!Ve();)P1(mt)}function P1(o){var l=o1(o.alternate,o,gn);o.memoizedProps=o.pendingProps,l===null?Of(o):mt=l}function D1(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=e1(d,l,l.pendingProps,l.type,void 0,bt);break;case 11:l=e1(d,l,l.pendingProps,l.type.render,l.ref,bt);break;case 5:bg(l);default:l1(d,l),l=mt=Ow(l,gn),l=o1(d,l,gn)}o.memoizedProps=o.pendingProps,l===null?Of(o):mt=l}function vl(o,l,d,m){ln=Zo=null,bg(l),cl=null,nu=0;var v=l.return;try{if(T5(o,v,l,d,bt)){Jt=1,Ef(o,Ua(d,o.current)),mt=null;return}}catch(w){if(v!==null)throw mt=v,w;Jt=1,Ef(o,Ua(d,o.current)),mt=null;return}l.flags&32768?(At||m===1?o=!0:hl||(bt&536870912)!==0?o=!1:(Hn=o=!0,(m===2||m===9||m===3||m===6)&&(m=Ga.current,m!==null&&m.tag===13&&(m.flags|=16384))),O1(l,o)):Of(l)}function Of(o){var l=o;do{if((l.flags&32768)!==0){O1(l,Hn);return}o=l.return;var d=M5(l.alternate,l,gn);if(d!==null){mt=d;return}if(l=l.sibling,l!==null){mt=l;return}mt=l=o}while(l!==null);Jt===0&&(Jt=5)}function O1(o,l){do{var d=P5(o.alternate,o);if(d!==null){d.flags&=32767,mt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){mt=o;return}mt=o=d}while(o!==null);Jt=6,mt=null}function $1(o,l,d,m,v,w,T,D,U){o.cancelPendingCommit=null;do $f();while(Ls!==0);if((Mt&6)!==0)throw Error(a(327));if(l!==null){if(l===o.current)throw Error(a(177));if(w=l.lanes|l.childLanes,w|=Yp,lr(o,d,w,T,D,U),o===qt&&(mt=qt=null,bt=0),pl=l,Yn=o,gl=d,Jg=w,e0=v,E1=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,H5(X,function(){return q1(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=A.T,A.T=null,v=B.p,B.p=2,T=Mt,Mt|=4;try{D5(o,l,d)}finally{Mt=T,B.p=v,A.T=m}}Ls=1,L1(),B1(),I1()}}function L1(){if(Ls===1){Ls=0;var o=Yn,l=pl,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=A.T,A.T=null;var m=B.p;B.p=2;var v=Mt;Mt|=4;try{b1(l,o);var w=g0,T=Sw(o.containerInfo),D=w.focusedElem,U=w.selectionRange;if(T!==D&&D&&D.ownerDocument&&Nw(D.ownerDocument.documentElement,D)){if(U!==null&&zp(D)){var ae=U.start,pe=U.end;if(pe===void 0&&(pe=ae),"selectionStart"in D)D.selectionStart=ae,D.selectionEnd=Math.min(pe,D.value.length);else{var ve=D.ownerDocument||document,ne=ve&&ve.defaultView||window;if(ne.getSelection){var oe=ne.getSelection(),Qe=D.textContent.length,Xe=Math.min(U.start,Qe),$t=U.end===void 0?Xe:Math.min(U.end,Qe);!oe.extend&&Xe>$t&&(T=$t,$t=Xe,Xe=T);var Q=jw(D,Xe),K=jw(D,$t);if(Q&&K&&(oe.rangeCount!==1||oe.anchorNode!==Q.node||oe.anchorOffset!==Q.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var te=ve.createRange();te.setStart(Q.node,Q.offset),oe.removeAllRanges(),Xe>$t?(oe.addRange(te),oe.extend(K.node,K.offset)):(te.setEnd(K.node,K.offset),oe.addRange(te))}}}}for(ve=[],oe=D;oe=oe.parentNode;)oe.nodeType===1&&ve.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ve.length;D++){var xe=ve[D];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Yf=!!p0,g0=p0=null}finally{Mt=v,B.p=m,A.T=d}}o.current=l,Ls=2}}function B1(){if(Ls===2){Ls=0;var o=Yn,l=pl,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=A.T,A.T=null;var m=B.p;B.p=2;var v=Mt;Mt|=4;try{p1(o,l.alternate,l)}finally{Mt=v,B.p=m,A.T=d}}Ls=3}}function I1(){if(Ls===4||Ls===3){Ls=0,We();var o=Yn,l=pl,d=gl,m=E1;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ls=5:(Ls=0,pl=Yn=null,V1(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Xn=null),Os(d),l=l.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Re,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=A.T,v=B.p,B.p=2,A.T=null;try{for(var w=o.onRecoverableError,T=0;T<m.length;T++){var D=m[T];w(D.value,{componentStack:D.stack})}}finally{A.T=l,B.p=v}}(gl&3)!==0&&$f(),Dr(o),v=o.pendingLanes,(d&4194090)!==0&&(v&42)!==0?o===t0?mu++:(mu=0,t0=o):mu=0,pu(0)}}function V1(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Yc(l)))}function $f(o){return L1(),B1(),I1(),q1()}function q1(){if(Ls!==5)return!1;var o=Yn,l=Jg;Jg=0;var d=Os(gl),m=A.T,v=B.p;try{B.p=32>d?32:d,A.T=null,d=e0,e0=null;var w=Yn,T=gl;if(Ls=0,pl=Yn=null,gl=0,(Mt&6)!==0)throw Error(a(331));var D=Mt;if(Mt|=4,N1(w.current),w1(w,w.current,T,d),Mt=D,pu(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Re,w)}catch{}return!0}finally{B.p=v,A.T=m,V1(o,l)}}function U1(o,l,d){l=Ua(d,l),l=Pg(o.stateNode,l,2),o=Bn(o,l,2),o!==null&&(fa(o,2),Dr(o))}function Lt(o,l,d){if(o.tag===3)U1(o,o,d);else for(;l!==null;){if(l.tag===3){U1(l,o,d);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xn===null||!Xn.has(m))){o=Ua(d,o),d=G_(2),m=Bn(l,d,2),m!==null&&(X_(d,m,l,o),fa(m,2),Dr(m));break}}l=l.return}}function n0(o,l,d){var m=o.pingCache;if(m===null){m=o.pingCache=new L5;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(d)||(Kg=!0,v.add(d),o=U5.bind(null,o,l,d),l.then(o,o))}function U5(o,l,d){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,qt===o&&(bt&d)===d&&(Jt===4||Jt===3&&(bt&62914560)===bt&&300>ye()-Qg?(Mt&2)===0&&xl(o,0):Wg|=d,ml===bt&&(ml=0)),Dr(o)}function z1(o,l){l===0&&(l=Bi()),o=Ji(o,l),o!==null&&(fa(o,l),Dr(o))}function z5(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),z1(o,d)}function F5(o,l){var d=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(a(314))}m!==null&&m.delete(l),z1(o,d)}function H5(o,l){return _e(o,l)}var Lf=null,bl=null,o0=!1,Bf=!1,i0=!1,ri=0;function Dr(o){o!==bl&&o.next===null&&(bl===null?Lf=bl=o:bl=bl.next=o),Bf=!0,o0||(o0=!0,X5())}function pu(o,l){if(!i0&&Bf){i0=!0;do for(var d=!1,m=Lf;m!==null;){if(o!==0){var v=m.pendingLanes;if(v===0)var w=0;else{var T=m.suspendedLanes,D=m.pingedLanes;w=(1<<31-_t(42|o)+1)-1,w&=v&~(T&~D),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(d=!0,X1(m,w))}else w=bt,w=ra(m,m===qt?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||ir(m,w)||(d=!0,X1(m,w));m=m.next}while(d);i0=!1}}function G5(){F1()}function F1(){Bf=o0=!1;var o=0;ri!==0&&(t3()&&(o=ri),ri=0);for(var l=ye(),d=null,m=Lf;m!==null;){var v=m.next,w=H1(m,l);w===0?(m.next=null,d===null?Lf=v:d.next=v,v===null&&(bl=d)):(d=m,(o!==0||(w&3)!==0)&&(Bf=!0)),m=v}pu(o)}function H1(o,l){for(var d=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,w=o.pendingLanes&-62914561;0<w;){var T=31-_t(w),D=1<<T,U=v[T];U===-1?((D&d)===0||(D&m)!==0)&&(v[T]=da(D,l)):U<=l&&(o.expiredLanes|=D),w&=~D}if(l=qt,d=bt,d=ra(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,d===0||o===l&&(Pt===2||Pt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&De(m),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||ir(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(m!==null&&De(m),Os(d)){case 2:case 8:d=q;break;case 32:d=X;break;case 268435456:d=je;break;default:d=X}return m=G1.bind(null,o),d=_e(d,m),o.callbackPriority=l,o.callbackNode=d,l}return m!==null&&m!==null&&De(m),o.callbackPriority=2,o.callbackNode=null,2}function G1(o,l){if(Ls!==0&&Ls!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if($f()&&o.callbackNode!==d)return null;var m=bt;return m=ra(o,o===qt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(A1(o,m,l),H1(o,ye()),o.callbackNode!=null&&o.callbackNode===d?G1.bind(null,o):null)}function X1(o,l){if($f())return null;A1(o,l,!0)}function X5(){a3(function(){(Mt&6)!==0?_e(Ae,G5):F1()})}function l0(){return ri===0&&(ri=ts()),ri}function Y1(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Yd(""+o)}function K1(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function Y5(o,l,d,m,v){if(l==="submit"&&d&&d.stateNode===v){var w=Y1((v[Vt]||null).action),T=m.submitter;T&&(l=(l=T[Vt]||null)?Y1(l.formAction):T.getAttribute("formAction"),l!==null&&(w=l,T=null));var D=new Qd("action","action",null,m,v);o.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ri!==0){var U=T?K1(v,T):new FormData(v);Ag(d,{pending:!0,data:U,method:v.method,action:w},null,U)}}else typeof w=="function"&&(D.preventDefault(),U=T?K1(v,T):new FormData(v),Ag(d,{pending:!0,data:U,method:v.method,action:w},w,U))},currentTarget:v}]})}}for(var c0=0;c0<Xp.length;c0++){var u0=Xp[c0],K5=u0.toLowerCase(),W5=u0[0].toUpperCase()+u0.slice(1);cr(K5,"on"+W5)}cr(Aw,"onAnimationEnd"),cr(kw,"onAnimationIteration"),cr(Tw,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(h5,"onTransitionRun"),cr(m5,"onTransitionStart"),cr(p5,"onTransitionCancel"),cr(Rw,"onTransitionEnd"),zi("onMouseEnter",["mouseout","mouseover"]),zi("onMouseLeave",["mouseout","mouseover"]),zi("onPointerEnter",["pointerout","pointerover"]),zi("onPointerLeave",["pointerout","pointerover"]),Uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Uo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z5=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gu));function W1(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var m=o[d],v=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var T=m.length-1;0<=T;T--){var D=m[T],U=D.instance,ae=D.currentTarget;if(D=D.listener,U!==w&&v.isPropagationStopped())break e;w=D,v.currentTarget=ae;try{w(v)}catch(pe){Sf(pe)}v.currentTarget=null,w=U}else for(T=0;T<m.length;T++){if(D=m[T],U=D.instance,ae=D.currentTarget,D=D.listener,U!==w&&v.isPropagationStopped())break e;w=D,v.currentTarget=ae;try{w(v)}catch(pe){Sf(pe)}v.currentTarget=null,w=U}}}}function pt(o,l){var d=l[Ii];d===void 0&&(d=l[Ii]=new Set);var m=o+"__bubble";d.has(m)||(Z1(l,o,2,!1),d.add(m))}function d0(o,l,d){var m=0;l&&(m|=4),Z1(d,o,m,l)}var If="_reactListening"+Math.random().toString(36).slice(2);function f0(o){if(!o[If]){o[If]=!0,Fy.forEach(function(d){d!=="selectionchange"&&(Z5.has(d)||d0(d,!1,o),d0(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[If]||(l[If]=!0,d0("selectionchange",!1,l))}}function Z1(o,l,d,m){switch(wj(l)){case 2:var v=N3;break;case 8:v=S3;break;default:v=E0}d=v.bind(null,l,d,o),v=void 0,!Dp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(l,d,{capture:!0,passive:v}):o.addEventListener(l,d,!0):v!==void 0?o.addEventListener(l,d,{passive:v}):o.addEventListener(l,d,!1)}function h0(o,l,d,m,v){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var D=m.stateNode.containerInfo;if(D===v)break;if(T===4)for(T=m.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;D!==null;){if(T=Vi(D),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){m=w=T;continue e}D=D.parentNode}}m=m.return}rw(function(){var ae=w,pe=Mp(d),ve=[];e:{var ne=Mw.get(o);if(ne!==void 0){var oe=Qd,Qe=o;switch(o){case"keypress":if(Wd(d)===0)break e;case"keydown":case"keyup":oe=HM;break;case"focusin":Qe="focus",oe=Bp;break;case"focusout":Qe="blur",oe=Bp;break;case"beforeblur":case"afterblur":oe=Bp;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=iw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=PM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=YM;break;case Aw:case kw:case Tw:oe=$M;break;case Rw:oe=WM;break;case"scroll":case"scrollend":oe=RM;break;case"wheel":oe=QM;break;case"copy":case"cut":case"paste":oe=BM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=cw;break;case"toggle":case"beforetoggle":oe=e5}var Xe=(l&4)!==0,$t=!Xe&&(o==="scroll"||o==="scrollend"),Q=Xe?ne!==null?ne+"Capture":null:ne;Xe=[];for(var K=ae,te;K!==null;){var xe=K;if(te=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||te===null||Q===null||(xe=Oc(K,Q),xe!=null&&Xe.push(xu(K,xe,te))),$t)break;K=K.return}0<Xe.length&&(ne=new oe(ne,Qe,null,d,pe),ve.push({event:ne,listeners:Xe}))}}if((l&7)===0){e:{if(ne=o==="mouseover"||o==="pointerover",oe=o==="mouseout"||o==="pointerout",ne&&d!==Rp&&(Qe=d.relatedTarget||d.fromElement)&&(Vi(Qe)||Qe[_s]))break e;if((oe||ne)&&(ne=pe.window===pe?pe:(ne=pe.ownerDocument)?ne.defaultView||ne.parentWindow:window,oe?(Qe=d.relatedTarget||d.toElement,oe=ae,Qe=Qe?Vi(Qe):null,Qe!==null&&($t=i(Qe),Xe=Qe.tag,Qe!==$t||Xe!==5&&Xe!==27&&Xe!==6)&&(Qe=null)):(oe=null,Qe=ae),oe!==Qe)){if(Xe=iw,xe="onMouseLeave",Q="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(Xe=cw,xe="onPointerLeave",Q="onPointerEnter",K="pointer"),$t=oe==null?ne:Dc(oe),te=Qe==null?ne:Dc(Qe),ne=new Xe(xe,K+"leave",oe,d,pe),ne.target=$t,ne.relatedTarget=te,xe=null,Vi(pe)===ae&&(Xe=new Xe(Q,K+"enter",Qe,d,pe),Xe.target=te,Xe.relatedTarget=$t,xe=Xe),$t=xe,oe&&Qe)t:{for(Xe=oe,Q=Qe,K=0,te=Xe;te;te=yl(te))K++;for(te=0,xe=Q;xe;xe=yl(xe))te++;for(;0<K-te;)Xe=yl(Xe),K--;for(;0<te-K;)Q=yl(Q),te--;for(;K--;){if(Xe===Q||Q!==null&&Xe===Q.alternate)break t;Xe=yl(Xe),Q=yl(Q)}Xe=null}else Xe=null;oe!==null&&Q1(ve,ne,oe,Xe,!1),Qe!==null&&$t!==null&&Q1(ve,$t,Qe,Xe,!0)}}e:{if(ne=ae?Dc(ae):window,oe=ne.nodeName&&ne.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ne.type==="file")var $e=xw;else if(pw(ne))if(vw)$e=u5;else{$e=l5;var dt=i5}else oe=ne.nodeName,!oe||oe.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ae&&Tp(ae.elementType)&&($e=xw):$e=c5;if($e&&($e=$e(o,ae))){gw(ve,$e,d,pe);break e}dt&&dt(o,ne,ae),o==="focusout"&&ae&&ne.type==="number"&&ae.memoizedProps.value!=null&&kp(ne,"number",ne.value)}switch(dt=ae?Dc(ae):window,o){case"focusin":(pw(dt)||dt.contentEditable==="true")&&(Wi=dt,Fp=ae,zc=null);break;case"focusout":zc=Fp=Wi=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Ew(ve,d,pe);break;case"selectionchange":if(f5)break;case"keydown":case"keyup":Ew(ve,d,pe)}var Fe;if(Vp)e:{switch(o){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ki?hw(o,d)&&(Ye="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Ye="onCompositionStart");Ye&&(uw&&d.locale!=="ko"&&(Ki||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ki&&(Fe=nw()):(Dn=pe,Op="value"in Dn?Dn.value:Dn.textContent,Ki=!0)),dt=Vf(ae,Ye),0<dt.length&&(Ye=new lw(Ye,o,null,d,pe),ve.push({event:Ye,listeners:dt}),Fe?Ye.data=Fe:(Fe=mw(d),Fe!==null&&(Ye.data=Fe)))),(Fe=s5?a5(o,d):r5(o,d))&&(Ye=Vf(ae,"onBeforeInput"),0<Ye.length&&(dt=new lw("onBeforeInput","beforeinput",null,d,pe),ve.push({event:dt,listeners:Ye}),dt.data=Fe)),Y5(ve,o,ae,d,pe)}W1(ve,l)})}function xu(o,l,d){return{instance:o,listener:l,currentTarget:d}}function Vf(o,l){for(var d=l+"Capture",m=[];o!==null;){var v=o,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Oc(o,d),v!=null&&m.unshift(xu(o,v,w)),v=Oc(o,l),v!=null&&m.push(xu(o,v,w))),o.tag===3)return m;o=o.return}return[]}function yl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Q1(o,l,d,m,v){for(var w=l._reactName,T=[];d!==null&&d!==m;){var D=d,U=D.alternate,ae=D.stateNode;if(D=D.tag,U!==null&&U===m)break;D!==5&&D!==26&&D!==27||ae===null||(U=ae,v?(ae=Oc(d,w),ae!=null&&T.unshift(xu(d,ae,U))):v||(ae=Oc(d,w),ae!=null&&T.push(xu(d,ae,U)))),d=d.return}T.length!==0&&o.push({event:l,listeners:T})}var Q5=/\r\n?/g,J5=/\u0000|\uFFFD/g;function J1(o){return(typeof o=="string"?o:""+o).replace(Q5,`
`).replace(J5,"")}function ej(o,l){return l=J1(l),J1(o)===l}function qf(){}function Ot(o,l,d,m,v,w){switch(d){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Gi(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Gi(o,""+m);break;case"className":Hd(o,"class",m);break;case"tabIndex":Hd(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Hd(o,d,m);break;case"style":sw(o,m,w);break;case"data":if(l!=="object"){Hd(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Yd(""+m),o.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(d==="formAction"?(l!=="input"&&Ot(o,l,"name",v.name,v,null),Ot(o,l,"formEncType",v.formEncType,v,null),Ot(o,l,"formMethod",v.formMethod,v,null),Ot(o,l,"formTarget",v.formTarget,v,null)):(Ot(o,l,"encType",v.encType,v,null),Ot(o,l,"method",v.method,v,null),Ot(o,l,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(d);break}m=Yd(""+m),o.setAttribute(d,m);break;case"onClick":m!=null&&(o.onclick=qf);break;case"onScroll":m!=null&&pt("scroll",o);break;case"onScrollEnd":m!=null&&pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}d=Yd(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""+m):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":m===!0?o.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(d,m):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(d,m):o.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(d):o.setAttribute(d,m);break;case"popover":pt("beforetoggle",o),pt("toggle",o),Fd(o,"popover",m);break;case"xlinkActuate":sn(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":sn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":sn(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":sn(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":sn(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":sn(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":sn(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":sn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":sn(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Fd(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=kM.get(d)||d,Fd(o,d,m))}}function m0(o,l,d,m,v,w){switch(d){case"style":sw(o,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(a(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"children":typeof m=="string"?Gi(o,m):(typeof m=="number"||typeof m=="bigint")&&Gi(o,""+m);break;case"onScroll":m!=null&&pt("scroll",o);break;case"onScrollEnd":m!=null&&pt("scrollend",o);break;case"onClick":m!=null&&(o.onclick=qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hy.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),l=d.slice(2,v?d.length-7:void 0),w=o[Vt]||null,w=w!=null?w[d]:null,typeof w=="function"&&o.removeEventListener(l,w,v),typeof m=="function")){typeof w!="function"&&w!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,m,v);break e}d in o?o[d]=m:m===!0?o.setAttribute(d,""):Fd(o,d,m)}}}function Bs(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",o),pt("load",o);var m=!1,v=!1,w;for(w in d)if(d.hasOwnProperty(w)){var T=d[w];if(T!=null)switch(w){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ot(o,l,w,T,d,null)}}v&&Ot(o,l,"srcSet",d.srcSet,d,null),m&&Ot(o,l,"src",d.src,d,null);return;case"input":pt("invalid",o);var D=w=T=v=null,U=null,ae=null;for(m in d)if(d.hasOwnProperty(m)){var pe=d[m];if(pe!=null)switch(m){case"name":v=pe;break;case"type":T=pe;break;case"checked":U=pe;break;case"defaultChecked":ae=pe;break;case"value":w=pe;break;case"defaultValue":D=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,l));break;default:Ot(o,l,m,pe,d,null)}}Qy(o,w,D,U,ae,T,v,!1),Gd(o);return;case"select":pt("invalid",o),m=T=w=null;for(v in d)if(d.hasOwnProperty(v)&&(D=d[v],D!=null))switch(v){case"value":w=D;break;case"defaultValue":T=D;break;case"multiple":m=D;default:Ot(o,l,v,D,d,null)}l=w,d=T,o.multiple=!!m,l!=null?Hi(o,!!m,l,!1):d!=null&&Hi(o,!!m,d,!0);return;case"textarea":pt("invalid",o),w=v=m=null;for(T in d)if(d.hasOwnProperty(T)&&(D=d[T],D!=null))switch(T){case"value":m=D;break;case"defaultValue":v=D;break;case"children":w=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:Ot(o,l,T,D,d,null)}ew(o,m,v,w),Gd(o);return;case"option":for(U in d)if(d.hasOwnProperty(U)&&(m=d[U],m!=null))switch(U){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ot(o,l,U,m,d,null)}return;case"dialog":pt("beforetoggle",o),pt("toggle",o),pt("cancel",o),pt("close",o);break;case"iframe":case"object":pt("load",o);break;case"video":case"audio":for(m=0;m<gu.length;m++)pt(gu[m],o);break;case"image":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"embed":case"source":case"link":pt("error",o),pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in d)if(d.hasOwnProperty(ae)&&(m=d[ae],m!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:Ot(o,l,ae,m,d,null)}return;default:if(Tp(l)){for(pe in d)d.hasOwnProperty(pe)&&(m=d[pe],m!==void 0&&m0(o,l,pe,m,d,void 0));return}}for(D in d)d.hasOwnProperty(D)&&(m=d[D],m!=null&&Ot(o,l,D,m,d,null))}function e3(o,l,d,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,T=null,D=null,U=null,ae=null,pe=null;for(oe in d){var ve=d[oe];if(d.hasOwnProperty(oe)&&ve!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":U=ve;default:m.hasOwnProperty(oe)||Ot(o,l,oe,null,m,ve)}}for(var ne in m){var oe=m[ne];if(ve=d[ne],m.hasOwnProperty(ne)&&(oe!=null||ve!=null))switch(ne){case"type":w=oe;break;case"name":v=oe;break;case"checked":ae=oe;break;case"defaultChecked":pe=oe;break;case"value":T=oe;break;case"defaultValue":D=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(a(137,l));break;default:oe!==ve&&Ot(o,l,ne,oe,m,ve)}}Ap(o,T,D,U,ae,pe,w,v);return;case"select":oe=T=D=ne=null;for(w in d)if(U=d[w],d.hasOwnProperty(w)&&U!=null)switch(w){case"value":break;case"multiple":oe=U;default:m.hasOwnProperty(w)||Ot(o,l,w,null,m,U)}for(v in m)if(w=m[v],U=d[v],m.hasOwnProperty(v)&&(w!=null||U!=null))switch(v){case"value":ne=w;break;case"defaultValue":D=w;break;case"multiple":T=w;default:w!==U&&Ot(o,l,v,w,m,U)}l=D,d=T,m=oe,ne!=null?Hi(o,!!d,ne,!1):!!m!=!!d&&(l!=null?Hi(o,!!d,l,!0):Hi(o,!!d,d?[]:"",!1));return;case"textarea":oe=ne=null;for(D in d)if(v=d[D],d.hasOwnProperty(D)&&v!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Ot(o,l,D,null,m,v)}for(T in m)if(v=m[T],w=d[T],m.hasOwnProperty(T)&&(v!=null||w!=null))switch(T){case"value":ne=v;break;case"defaultValue":oe=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(a(91));break;default:v!==w&&Ot(o,l,T,v,m,w)}Jy(o,ne,oe);return;case"option":for(var Qe in d)if(ne=d[Qe],d.hasOwnProperty(Qe)&&ne!=null&&!m.hasOwnProperty(Qe))switch(Qe){case"selected":o.selected=!1;break;default:Ot(o,l,Qe,null,m,ne)}for(U in m)if(ne=m[U],oe=d[U],m.hasOwnProperty(U)&&ne!==oe&&(ne!=null||oe!=null))switch(U){case"selected":o.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ot(o,l,U,ne,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in d)ne=d[Xe],d.hasOwnProperty(Xe)&&ne!=null&&!m.hasOwnProperty(Xe)&&Ot(o,l,Xe,null,m,ne);for(ae in m)if(ne=m[ae],oe=d[ae],m.hasOwnProperty(ae)&&ne!==oe&&(ne!=null||oe!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,l));break;default:Ot(o,l,ae,ne,m,oe)}return;default:if(Tp(l)){for(var $t in d)ne=d[$t],d.hasOwnProperty($t)&&ne!==void 0&&!m.hasOwnProperty($t)&&m0(o,l,$t,void 0,m,ne);for(pe in m)ne=m[pe],oe=d[pe],!m.hasOwnProperty(pe)||ne===oe||ne===void 0&&oe===void 0||m0(o,l,pe,ne,m,oe);return}}for(var Q in d)ne=d[Q],d.hasOwnProperty(Q)&&ne!=null&&!m.hasOwnProperty(Q)&&Ot(o,l,Q,null,m,ne);for(ve in m)ne=m[ve],oe=d[ve],!m.hasOwnProperty(ve)||ne===oe||ne==null&&oe==null||Ot(o,l,ve,ne,m,oe)}var p0=null,g0=null;function Uf(o){return o.nodeType===9?o:o.ownerDocument}function tj(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sj(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function x0(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var v0=null;function t3(){var o=window.event;return o&&o.type==="popstate"?o===v0?!1:(v0=o,!0):(v0=null,!1)}var aj=typeof setTimeout=="function"?setTimeout:void 0,s3=typeof clearTimeout=="function"?clearTimeout:void 0,rj=typeof Promise=="function"?Promise:void 0,a3=typeof queueMicrotask=="function"?queueMicrotask:typeof rj<"u"?function(o){return rj.resolve(null).then(o).catch(r3)}:aj;function r3(o){setTimeout(function(){throw o})}function Wn(o){return o==="head"}function nj(o,l){var d=l,m=0,v=0;do{var w=d.nextSibling;if(o.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(0<m&&8>m){d=m;var T=o.ownerDocument;if(d&1&&vu(T.documentElement),d&2&&vu(T.body),d&4)for(d=T.head,vu(d),T=d.firstChild;T;){var D=T.nextSibling,U=T.nodeName;T[Pc]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=D}}if(v===0){o.removeChild(w),Eu(l);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=w}while(d);Eu(l)}function b0(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":b0(d),Np(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function n3(o,l,d,m){for(;o.nodeType===1;){var v=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Pc])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(w=o.getAttribute("rel"),w==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(w!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(w=o.getAttribute("src"),(w!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===w)return o}else return o;if(o=dr(o.nextSibling),o===null)break}return null}function o3(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=dr(o.nextSibling),o===null))return null;return o}function y0(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function i3(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var m=function(){l(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function dr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var w0=null;function oj(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function ij(o,l,d){switch(l=Uf(d),o){case"html":if(o=l.documentElement,!o)throw Error(a(452));return o;case"head":if(o=l.head,!o)throw Error(a(453));return o;case"body":if(o=l.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function vu(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Np(o)}var Ya=new Map,lj=new Set;function zf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var xn=B.d;B.d={f:l3,r:c3,D:u3,C:d3,L:f3,m:h3,X:p3,S:m3,M:g3};function l3(){var o=xn.f(),l=Df();return o||l}function c3(o){var l=qi(o);l!==null&&l.tag===5&&l.type==="form"?A_(l):xn.r(o)}var wl=typeof document>"u"?null:document;function cj(o,l,d){var m=wl;if(m&&typeof l=="string"&&l){var v=qa(l);v='link[rel="'+o+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),lj.has(v)||(lj.add(v),o={rel:o,crossOrigin:d,href:l},m.querySelector(v)===null&&(l=m.createElement("link"),Bs(l,"link",o),js(l),m.head.appendChild(l)))}}function u3(o){xn.D(o),cj("dns-prefetch",o,null)}function d3(o,l){xn.C(o,l),cj("preconnect",o,l)}function f3(o,l,d){xn.L(o,l,d);var m=wl;if(m&&o&&l){var v='link[rel="preload"][as="'+qa(l)+'"]';l==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+qa(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+qa(d.imageSizes)+'"]')):v+='[href="'+qa(o)+'"]';var w=v;switch(l){case"style":w=_l(o);break;case"script":w=jl(o)}Ya.has(w)||(o=p({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),Ya.set(w,o),m.querySelector(v)!==null||l==="style"&&m.querySelector(bu(w))||l==="script"&&m.querySelector(yu(w))||(l=m.createElement("link"),Bs(l,"link",o),js(l),m.head.appendChild(l)))}}function h3(o,l){xn.m(o,l);var d=wl;if(d&&o){var m=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+qa(m)+'"][href="'+qa(o)+'"]',w=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=jl(o)}if(!Ya.has(w)&&(o=p({rel:"modulepreload",href:o},l),Ya.set(w,o),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(yu(w)))return}m=d.createElement("link"),Bs(m,"link",o),js(m),d.head.appendChild(m)}}}function m3(o,l,d){xn.S(o,l,d);var m=wl;if(m&&o){var v=Ui(m).hoistableStyles,w=_l(o);l=l||"default";var T=v.get(w);if(!T){var D={loading:0,preload:null};if(T=m.querySelector(bu(w)))D.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},d),(d=Ya.get(w))&&_0(o,d);var U=T=m.createElement("link");js(U),Bs(U,"link",o),U._p=new Promise(function(ae,pe){U.onload=ae,U.onerror=pe}),U.addEventListener("load",function(){D.loading|=1}),U.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Ff(T,l,m)}T={type:"stylesheet",instance:T,count:1,state:D},v.set(w,T)}}}function p3(o,l){xn.X(o,l);var d=wl;if(d&&o){var m=Ui(d).hoistableScripts,v=jl(o),w=m.get(v);w||(w=d.querySelector(yu(v)),w||(o=p({src:o,async:!0},l),(l=Ya.get(v))&&j0(o,l),w=d.createElement("script"),js(w),Bs(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function g3(o,l){xn.M(o,l);var d=wl;if(d&&o){var m=Ui(d).hoistableScripts,v=jl(o),w=m.get(v);w||(w=d.querySelector(yu(v)),w||(o=p({src:o,async:!0,type:"module"},l),(l=Ya.get(v))&&j0(o,l),w=d.createElement("script"),js(w),Bs(w,"link",o),d.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function uj(o,l,d,m){var v=(v=re.current)?zf(v):null;if(!v)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=_l(d.href),d=Ui(v).hoistableStyles,m=d.get(l),m||(m={type:"style",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=_l(d.href);var w=Ui(v).hoistableStyles,T=w.get(o);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(o,T),(w=v.querySelector(bu(o)))&&!w._p&&(T.instance=w,T.state.loading=5),Ya.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Ya.set(o,d),w||x3(v,o,d,T.state))),l&&m===null)throw Error(a(528,""));return T}if(l&&m!==null)throw Error(a(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=jl(d),d=Ui(v).hoistableScripts,m=d.get(l),m||(m={type:"script",instance:null,count:0,state:null},d.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function _l(o){return'href="'+qa(o)+'"'}function bu(o){return'link[rel="stylesheet"]['+o+"]"}function dj(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function x3(o,l,d,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Bs(l,"link",d),js(l),o.head.appendChild(l))}function jl(o){return'[src="'+qa(o)+'"]'}function yu(o){return"script[async]"+o}function fj(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+qa(d.href)+'"]');if(m)return l.instance=m,js(m),m;var v=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),js(m),Bs(m,"style",v),Ff(m,d.precedence,o),l.instance=m;case"stylesheet":v=_l(d.href);var w=o.querySelector(bu(v));if(w)return l.state.loading|=4,l.instance=w,js(w),w;m=dj(d),(v=Ya.get(v))&&_0(m,v),w=(o.ownerDocument||o).createElement("link"),js(w);var T=w;return T._p=new Promise(function(D,U){T.onload=D,T.onerror=U}),Bs(w,"link",m),l.state.loading|=4,Ff(w,d.precedence,o),l.instance=w;case"script":return w=jl(d.src),(v=o.querySelector(yu(w)))?(l.instance=v,js(v),v):(m=d,(v=Ya.get(w))&&(m=p({},d),j0(m,v)),o=o.ownerDocument||o,v=o.createElement("script"),js(v),Bs(v,"link",m),o.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(a(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,Ff(m,d.precedence,o));return l.instance}function Ff(o,l,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,w=v,T=0;T<m.length;T++){var D=m[T];if(D.dataset.precedence===l)w=D;else if(w!==v)break}w?w.parentNode.insertBefore(o,w.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function _0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function j0(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var Hf=null;function hj(o,l,d){if(Hf===null){var m=new Map,v=Hf=new Map;v.set(d,m)}else v=Hf,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(o))return m;for(m.set(o,null),d=d.getElementsByTagName(o),v=0;v<d.length;v++){var w=d[v];if(!(w[Pc]||w[as]||o==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var T=w.getAttribute(l)||"";T=o+T;var D=m.get(T);D?D.push(w):m.set(T,[w])}}return m}function mj(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function v3(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function pj(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var wu=null;function b3(){}function y3(o,l,d){if(wu===null)throw Error(a(475));var m=wu;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=_l(d.href),w=o.querySelector(bu(v));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(m.count++,m=Gf.bind(m),o.then(m,m)),l.state.loading|=4,l.instance=w,js(w);return}w=o.ownerDocument||o,d=dj(d),(v=Ya.get(v))&&_0(d,v),w=w.createElement("link"),js(w);var T=w;T._p=new Promise(function(D,U){T.onload=D,T.onerror=U}),Bs(w,"link",d),l.instance=w}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(m.count++,l=Gf.bind(m),o.addEventListener("load",l),o.addEventListener("error",l))}}function w3(){if(wu===null)throw Error(a(475));var o=wu;return o.stylesheets&&o.count===0&&N0(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&N0(o,o.stylesheets),o.unsuspend){var m=o.unsuspend;o.unsuspend=null,m()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function Gf(){if(this.count--,this.count===0){if(this.stylesheets)N0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Xf=null;function N0(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Xf=new Map,l.forEach(_3,o),Xf=null,Gf.call(o))}function _3(o,l){if(!(l.state.loading&4)){var d=Xf.get(o);if(d)var m=d.get(null);else{d=new Map,Xf.set(o,d);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var T=v[w];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}v=l.instance,T=v.getAttribute("data-precedence"),w=d.get(T)||m,w===m&&d.set(null,v),d.set(T,v),this.count++,m=Gf.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),w?w.parentNode.insertBefore(v,w.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),l.state.loading|=4}}var _u={$$typeof:E,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function j3(o,l,d,m,v,w,T,D){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ds(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ds(0),this.hiddenUpdates=Ds(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function gj(o,l,d,m,v,w,T,D,U,ae,pe,ve){return o=new j3(o,l,d,T,D,U,ae,ve),l=1,w===!0&&(l|=24),w=Ea(3,null,null,l),o.current=w,w.stateNode=o,l=ng(),l.refCount++,o.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:d,cache:l},cg(w),o}function xj(o){return o?(o=el,o):el}function vj(o,l,d,m,v,w){v=xj(v),m.context===null?m.context=v:m.pendingContext=v,m=Ln(l),m.payload={element:d},w=w===void 0?null:w,w!==null&&(m.callback=w),d=Bn(o,m,l),d!==null&&(Ra(d,o,l),Qc(d,o,l))}function bj(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function S0(o,l){bj(o,l),(o=o.alternate)&&bj(o,l)}function yj(o){if(o.tag===13){var l=Ji(o,67108864);l!==null&&Ra(l,o,67108864),S0(o,67108864)}}var Yf=!0;function N3(o,l,d,m){var v=A.T;A.T=null;var w=B.p;try{B.p=2,E0(o,l,d,m)}finally{B.p=w,A.T=v}}function S3(o,l,d,m){var v=A.T;A.T=null;var w=B.p;try{B.p=8,E0(o,l,d,m)}finally{B.p=w,A.T=v}}function E0(o,l,d,m){if(Yf){var v=C0(m);if(v===null)h0(o,l,m,Kf,d),_j(o,m);else if(C3(v,o,l,d,m))m.stopPropagation();else if(_j(o,m),l&4&&-1<E3.indexOf(o)){for(;v!==null;){var w=qi(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var T=aa(w.pendingLanes);if(T!==0){var D=w;for(D.pendingLanes|=2,D.entangledLanes|=2;T;){var U=1<<31-_t(T);D.entanglements[1]|=U,T&=~U}Dr(w),(Mt&6)===0&&(Mf=ye()+500,pu(0))}}break;case 13:D=Ji(w,2),D!==null&&Ra(D,w,2),Df(),S0(w,2)}if(w=C0(m),w===null&&h0(o,l,m,Kf,d),w===v)break;v=w}v!==null&&m.stopPropagation()}else h0(o,l,m,null,d)}}function C0(o){return o=Mp(o),A0(o)}var Kf=null;function A0(o){if(Kf=null,o=Vi(o),o!==null){var l=i(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=c(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return Kf=o,null}function wj(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case Ae:return 2;case q:return 8;case X:case Z:return 32;case je:return 268435456;default:return 32}default:return 32}}var k0=!1,Zn=null,Qn=null,Jn=null,ju=new Map,Nu=new Map,eo=[],E3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _j(o,l){switch(o){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":ju.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(l.pointerId)}}function Su(o,l,d,m,v,w){return o===null||o.nativeEvent!==w?(o={blockedOn:l,domEventName:d,eventSystemFlags:m,nativeEvent:w,targetContainers:[v]},l!==null&&(l=qi(l),l!==null&&yj(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),o)}function C3(o,l,d,m,v){switch(l){case"focusin":return Zn=Su(Zn,o,l,d,m,v),!0;case"dragenter":return Qn=Su(Qn,o,l,d,m,v),!0;case"mouseover":return Jn=Su(Jn,o,l,d,m,v),!0;case"pointerover":var w=v.pointerId;return ju.set(w,Su(ju.get(w)||null,o,l,d,m,v)),!0;case"gotpointercapture":return w=v.pointerId,Nu.set(w,Su(Nu.get(w)||null,o,l,d,m,v)),!0}return!1}function jj(o){var l=Vi(o.target);if(l!==null){var d=i(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){o.blockedOn=l,xs(o.priority,function(){if(d.tag===13){var m=Ta();m=fs(m);var v=Ji(d,m);v!==null&&Ra(v,d,m),S0(d,m)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Wf(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=C0(o.nativeEvent);if(d===null){d=o.nativeEvent;var m=new d.constructor(d.type,d);Rp=m,d.target.dispatchEvent(m),Rp=null}else return l=qi(d),l!==null&&yj(l),o.blockedOn=d,!1;l.shift()}return!0}function Nj(o,l,d){Wf(o)&&d.delete(l)}function A3(){k0=!1,Zn!==null&&Wf(Zn)&&(Zn=null),Qn!==null&&Wf(Qn)&&(Qn=null),Jn!==null&&Wf(Jn)&&(Jn=null),ju.forEach(Nj),Nu.forEach(Nj)}function Zf(o,l){o.blockedOn===l&&(o.blockedOn=null,k0||(k0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A3)))}var Qf=null;function Sj(o){Qf!==o&&(Qf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qf===o&&(Qf=null);for(var l=0;l<o.length;l+=3){var d=o[l],m=o[l+1],v=o[l+2];if(typeof m!="function"){if(A0(m||d)===null)continue;break}var w=qi(d);w!==null&&(o.splice(l,3),l-=3,Ag(w,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Eu(o){function l(U){return Zf(U,o)}Zn!==null&&Zf(Zn,o),Qn!==null&&Zf(Qn,o),Jn!==null&&Zf(Jn,o),ju.forEach(l),Nu.forEach(l);for(var d=0;d<eo.length;d++){var m=eo[d];m.blockedOn===o&&(m.blockedOn=null)}for(;0<eo.length&&(d=eo[0],d.blockedOn===null);)jj(d),d.blockedOn===null&&eo.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],w=d[m+1],T=v[Vt]||null;if(typeof w=="function")T||Sj(d);else if(T){var D=null;if(w&&w.hasAttribute("formAction")){if(v=w,T=w[Vt]||null)D=T.formAction;else if(A0(v)!==null)continue}else D=T.action;typeof D=="function"?d[m+1]=D:(d.splice(m,3),m-=3),Sj(d)}}}function T0(o){this._internalRoot=o}Jf.prototype.render=T0.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(a(409));var d=l.current,m=Ta();vj(d,m,o,l,null,null)},Jf.prototype.unmount=T0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;vj(o.current,2,null,o,null,null),Df(),l[_s]=null}};function Jf(o){this._internalRoot=o}Jf.prototype.unstable_scheduleHydration=function(o){if(o){var l=qo();o={blockedOn:null,target:o,priority:l};for(var d=0;d<eo.length&&l!==0&&l<eo[d].priority;d++);eo.splice(d,0,o),d===0&&jj(o)}};var Ej=e.version;if(Ej!=="19.1.0")throw Error(a(527,Ej,"19.1.0"));B.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=f(l),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var k3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{Re=eh.inject(k3),et=eh}catch{}}return Au.createRoot=function(o,l){if(!n(o))throw Error(a(299));var d=!1,m="",v=U_,w=z_,T=F_,D=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=gj(o,1,!1,null,null,d,m,v,w,T,D,null),o[_s]=l.current,f0(o),new T0(l)},Au.hydrateRoot=function(o,l,d){if(!n(o))throw Error(a(299));var m=!1,v="",w=U_,T=z_,D=F_,U=null,ae=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(w=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(D=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(U=d.unstable_transitionCallbacks),d.formState!==void 0&&(ae=d.formState)),l=gj(o,1,!0,l,d??null,m,v,w,T,D,U,ae),l.context=xj(null),d=l.current,m=Ta(),m=fs(m),v=Ln(m),v.callback=null,Bn(d,v,m),d=m,l.current.lanes=d,fa(l,d),Dr(l),o[_s]=l.current,f0(o),new Jf(l)},Au.version="19.1.0",Au}var $j;function U3(){if($j)return P0.exports;$j=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),P0.exports=q3(),P0.exports}var z3=U3();const F3=Tm(z3);var H3="Invariant failed";function jn(t,e){if(!t)throw new Error(H3)}const Jl=new WeakMap,Sh=new WeakMap,qh={current:[]};let L0=!1,Ju=0;const Lu=new Set,th=new Map;function fE(t){const e=Array.from(t).sort((s,a)=>s instanceof ec&&s.options.deps.includes(a)?1:a instanceof ec&&a.options.deps.includes(s)?-1:0);for(const s of e){if(qh.current.includes(s))continue;qh.current.push(s),s.recompute();const a=Sh.get(s);if(a)for(const n of a){const i=Jl.get(n);i&&fE(i)}}}function G3(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function X3(t){t.listeners.forEach(e=>e({prevVal:t.prevState,currentVal:t.state}))}function hE(t){if(Ju>0&&!th.has(t)&&th.set(t,t.prevState),Lu.add(t),!(Ju>0)&&!L0)try{for(L0=!0;Lu.size>0;){const e=Array.from(Lu);Lu.clear();for(const s of e){const a=th.get(s)??s.prevState;s.prevState=a,G3(s)}for(const s of e){const a=Jl.get(s);a&&(qh.current.push(s),fE(a))}for(const s of e){const a=Jl.get(s);if(a)for(const n of a)X3(n)}}}finally{L0=!1,qh.current=[],th.clear()}}function Nl(t){Ju++;try{t()}finally{if(Ju--,Ju===0){const e=Array.from(Lu)[0];e&&hE(e)}}}function Y3(t){return typeof t=="function"}class Px{constructor(e,s){this.listeners=new Set,this.subscribe=a=>{var n,i;this.listeners.add(a);const c=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,a,this);return()=>{this.listeners.delete(a),c==null||c()}},this.prevState=e,this.state=e,this.options=s}setState(e){var s,a,n;this.prevState=this.state,(s=this.options)!=null&&s.updateFn?this.state=this.options.updateFn(this.prevState)(e):Y3(e)?this.state=e(this.prevState):this.state=e,(n=(a=this.options)==null?void 0:a.onUpdate)==null||n.call(a),hE(this)}}class ec{constructor(e){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const s=[],a=[];for(const n of this.options.deps)s.push(n.prevState),a.push(n.state);return this.lastSeenDepValues=a,{prevDepVals:s,currDepVals:a,prevVal:this.prevState??void 0}},this.recompute=()=>{var s,a;this.prevState=this.state;const{prevDepVals:n,currDepVals:i,prevVal:c}=this.getDepVals();this.state=this.options.fn({prevDepVals:n,currDepVals:i,prevVal:c}),(a=(s=this.options).onUpdate)==null||a.call(s)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof ec&&i.checkIfRecalculationNeededDeeply();let s=!1;const a=this.lastSeenDepValues,{currDepVals:n}=this.getDepVals();for(let i=0;i<n.length;i++)if(n[i]!==a[i]){s=!0;break}s&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const s of this._subscriptions)s()}),this.subscribe=s=>{var a,n;this.listeners.add(s);const i=(n=(a=this.options).onSubscribe)==null?void 0:n.call(a,s,this);return()=>{this.listeners.delete(s),i==null||i()}},this.options=e,this.state=e.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(e=this.options.deps){for(const s of e)if(s instanceof ec)s.registerOnGraph(),this.registerOnGraph(s.options.deps);else if(s instanceof Px){let a=Jl.get(s);a||(a=new Set,Jl.set(s,a)),a.add(this);let n=Sh.get(this);n||(n=new Set,Sh.set(this,n)),n.add(s)}}unregisterFromGraph(e=this.options.deps){for(const s of e)if(s instanceof ec)this.unregisterFromGraph(s.options.deps);else if(s instanceof Px){const a=Jl.get(s);a&&a.delete(this);const n=Sh.get(this);n&&n.delete(s)}}}const bo="__TSR_index",Lj="popstate",Bj="beforeunload";function mE(t){let e=t.getLocation();const s=new Set,a=c=>{e=t.getLocation(),s.forEach(u=>u({location:e,action:c}))},n=c=>{t.notifyOnIndexChange??!0?a(c):e=t.getLocation()},i=async({task:c,navigateOpts:u,...f})=>{var h,p;if((u==null?void 0:u.ignoreBlocker)??!1){c();return}const x=((h=t.getBlockers)==null?void 0:h.call(t))??[],y=f.type==="PUSH"||f.type==="REPLACE";if(typeof document<"u"&&x.length&&y)for(const _ of x){const j=hd(f.path,f.state);if(await _.blockerFn({currentLocation:e,nextLocation:j,action:f.type})){(p=t.onBlocked)==null||p.call(t);return}}c()};return{get location(){return e},get length(){return t.getLength()},subscribers:s,subscribe:c=>(s.add(c),()=>{s.delete(c)}),push:(c,u,f)=>{const h=e.state[bo];u=Dx(h+1,u),i({task:()=>{t.pushState(c,u),a({type:"PUSH"})},navigateOpts:f,type:"PUSH",path:c,state:u})},replace:(c,u,f)=>{const h=e.state[bo];u=Dx(h,u),i({task:()=>{t.replaceState(c,u),a({type:"REPLACE"})},navigateOpts:f,type:"REPLACE",path:c,state:u})},go:(c,u)=>{i({task:()=>{t.go(c),n({type:"GO",index:c})},navigateOpts:u,type:"GO"})},back:c=>{i({task:()=>{t.back((c==null?void 0:c.ignoreBlocker)??!1),n({type:"BACK"})},navigateOpts:c,type:"BACK"})},forward:c=>{i({task:()=>{t.forward((c==null?void 0:c.ignoreBlocker)??!1),n({type:"FORWARD"})},navigateOpts:c,type:"FORWARD"})},canGoBack:()=>e.state[bo]!==0,createHref:c=>t.createHref(c),block:c=>{var u;if(!t.setBlockers)return()=>{};const f=((u=t.getBlockers)==null?void 0:u.call(t))??[];return t.setBlockers([...f,c]),()=>{var h,p;const g=((h=t.getBlockers)==null?void 0:h.call(t))??[];(p=t.setBlockers)==null||p.call(t,g.filter(x=>x!==c))}},flush:()=>{var c;return(c=t.flush)==null?void 0:c.call(t)},destroy:()=>{var c;return(c=t.destroy)==null?void 0:c.call(t)},notify:a}}function Dx(t,e){return e||(e={}),{...e,key:Jv(),[bo]:t}}function K3(t){var e;const s=typeof document<"u"?window:void 0,a=s.history.pushState,n=s.history.replaceState;let i=[];const c=()=>i,u=O=>i=O,f=O=>O,h=()=>hd(`${s.location.pathname}${s.location.search}${s.location.hash}`,s.history.state);(e=s.history.state)!=null&&e.key||s.history.replaceState({[bo]:0,key:Jv()},"");let p=h(),g,x=!1,y=!1,_=!1,j=!1;const N=()=>p;let S,C;const E=()=>{S&&(k._ignoreSubscribers=!0,(S.isPush?s.history.pushState:s.history.replaceState)(S.state,"",S.href),k._ignoreSubscribers=!1,S=void 0,C=void 0,g=void 0)},M=(O,H,Y)=>{const I=f(H);C||(g=p),p=hd(H,Y),S={href:I,state:Y,isPush:(S==null?void 0:S.isPush)||O==="push"},C||(C=Promise.resolve().then(()=>E()))},R=O=>{p=h(),k.notify({type:O})},P=async()=>{if(y){y=!1;return}const O=h(),H=O.state[bo]-p.state[bo],Y=H===1,I=H===-1,z=!Y&&!I||x;x=!1;const ee=z?"GO":I?"BACK":"FORWARD",G=z?{type:"GO",index:H}:{type:I?"BACK":"FORWARD"};if(_)_=!1;else{const A=c();if(typeof document<"u"&&A.length){for(const B of A)if(await B.blockerFn({currentLocation:p,nextLocation:O,action:ee})){y=!0,s.history.go(1),k.notify(G);return}}}p=h(),k.notify(G)},$=O=>{if(j){j=!1;return}let H=!1;const Y=c();if(typeof document<"u"&&Y.length)for(const I of Y){const z=I.enableBeforeUnload??!0;if(z===!0){H=!0;break}if(typeof z=="function"&&z()===!0){H=!0;break}}if(H)return O.preventDefault(),O.returnValue=""},k=mE({getLocation:N,getLength:()=>s.history.length,pushState:(O,H)=>M("push",O,H),replaceState:(O,H)=>M("replace",O,H),back:O=>(O&&(_=!0),j=!0,s.history.back()),forward:O=>{O&&(_=!0),j=!0,s.history.forward()},go:O=>{x=!0,s.history.go(O)},createHref:O=>f(O),flush:E,destroy:()=>{s.history.pushState=a,s.history.replaceState=n,s.removeEventListener(Bj,$,{capture:!0}),s.removeEventListener(Lj,P)},onBlocked:()=>{g&&p!==g&&(p=g)},getBlockers:c,setBlockers:u,notifyOnIndexChange:!1});return s.addEventListener(Bj,$,{capture:!0}),s.addEventListener(Lj,P),s.history.pushState=function(...O){const H=a.apply(s.history,O);return k._ignoreSubscribers||R("PUSH"),H},s.history.replaceState=function(...O){const H=n.apply(s.history,O);return k._ignoreSubscribers||R("REPLACE"),H},k}function W3(t={initialEntries:["/"]}){const e=t.initialEntries;let s=t.initialIndex?Math.min(Math.max(t.initialIndex,0),e.length-1):e.length-1;const a=e.map((i,c)=>Dx(c,void 0));return mE({getLocation:()=>hd(e[s],a[s]),getLength:()=>e.length,pushState:(i,c)=>{s<e.length-1&&(e.splice(s+1),a.splice(s+1)),a.push(c),e.push(i),s=Math.max(e.length-1,0)},replaceState:(i,c)=>{a[s]=c,e[s]=i},back:()=>{s=Math.max(s-1,0)},forward:()=>{s=Math.min(s+1,e.length-1)},go:i=>{s=Math.min(Math.max(s+i,0),e.length-1)},createHref:i=>i})}function hd(t,e){const s=t.indexOf("#"),a=t.indexOf("?");return{href:t,pathname:t.substring(0,s>0?a>0?Math.min(s,a):s:a>0?a:t.length),hash:s>-1?t.substring(s):"",search:a>-1?t.slice(a,s===-1?void 0:s):"",state:e||{[bo]:0,key:Jv()}}}function Jv(){return(Math.random()+1).toString(36).substring(7)}function Hl(t){return t[t.length-1]}function Z3(t){return typeof t=="function"}function pi(t,e){return Z3(t)?t(e):t}function Ox(t,e){return e.reduce((s,a)=>(s[a]=t[a],s),{})}function Za(t,e){if(t===e)return t;const s=e,a=qj(t)&&qj(s);if(a||Ij(t)&&Ij(s)){const n=a?t:Object.keys(t).concat(Object.getOwnPropertySymbols(t)),i=n.length,c=a?s:Object.keys(s).concat(Object.getOwnPropertySymbols(s)),u=c.length,f=a?[]:{};let h=0;for(let p=0;p<u;p++){const g=a?p:c[p];(!a&&n.includes(g)||a)&&t[g]===void 0&&s[g]===void 0?(f[g]=void 0,h++):(f[g]=Za(t[g],s[g]),f[g]===t[g]&&t[g]!==void 0&&h++)}return i===u&&h===i?t:f}return s}function Ij(t){return $x(t)&&Object.getOwnPropertyNames(t).length===Object.keys(t).length}function $x(t){if(!Vj(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const s=e.prototype;return!(!Vj(s)||!s.hasOwnProperty("isPrototypeOf"))}function Vj(t){return Object.prototype.toString.call(t)==="[object Object]"}function qj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Uj(t,e){let s=Object.keys(t);return e&&(s=s.filter(a=>t[a]!==void 0)),s}function tc(t,e,s){if(t===e)return!0;if(typeof t!=typeof e)return!1;if($x(t)&&$x(e)){const a=(s==null?void 0:s.ignoreUndefined)??!0,n=Uj(t,a),i=Uj(e,a);return!(s!=null&&s.partial)&&n.length!==i.length?!1:i.every(c=>tc(t[c],e[c],s))}return Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:!t.some((a,n)=>!tc(a,e[n],s)):!1}function ql(t){let e,s;const a=new Promise((n,i)=>{e=n,s=i});return a.status="pending",a.resolve=n=>{a.status="resolved",a.value=n,e(n),t==null||t(n)},a.reject=n=>{a.status="rejected",s(n)},a}function Nn(t){return Rm(t.filter(e=>e!==void 0).join("/"))}function Rm(t){return t.replace(/\/{2,}/g,"/")}function eb(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function gi(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function Q3(t){return gi(eb(t))}function Uh(t,e){return t!=null&&t.endsWith("/")&&t!=="/"&&t!==`${e}/`?t.slice(0,-1):t}function J3(t,e,s){return Uh(t,s)===Uh(e,s)}function eP({basepath:t,base:e,to:s,trailingSlash:a="never",caseSensitive:n}){var i,c;e=zh(t,e,n),s=zh(t,s,n);let u=oc(e);const f=oc(s);u.length>1&&((i=Hl(u))==null?void 0:i.value)==="/"&&u.pop(),f.forEach((p,g)=>{p.value==="/"?g?g===f.length-1&&u.push(p):u=[p]:p.value===".."?u.pop():p.value==="."||u.push(p)}),u.length>1&&(((c=Hl(u))==null?void 0:c.value)==="/"?a==="never"&&u.pop():a==="always"&&u.push({type:"pathname",value:"/"}));const h=Nn([t,...u.map(p=>p.value)]);return Rm(h)}function oc(t){if(!t)return[];t=Rm(t);const e=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),!t)return e;const s=t.split("/").filter(Boolean);return e.push(...s.map(a=>a==="$"||a==="*"?{type:"wildcard",value:a}:a.charAt(0)==="$"?{type:"param",value:a}:{type:"pathname",value:a.includes("%25")?a.split("%25").map(n=>decodeURI(n)).join("%25"):decodeURI(a)})),t.slice(-1)==="/"&&(t=t.substring(1),e.push({type:"pathname",value:"/"})),e}function sh({path:t,params:e,leaveWildcards:s,leaveParams:a,decodeCharMap:n}){const i=oc(t);function c(p){const g=e[p],x=typeof g=="string";return["*","_splat"].includes(p)?x?encodeURI(g):g:x?tP(g,n):g}let u=!1;const f={},h=Nn(i.map(p=>{if(p.type==="wildcard"){f._splat=e._splat;const g=c("_splat");return s?`${p.value}${g??""}`:g}if(p.type==="param"){const g=p.value.substring(1);if(!u&&!(g in e)&&(u=!0),f[g]=e[g],a){const x=c(p.value);return`${p.value}${x??""}`}return c(g)??"undefined"}return p.value}));return{usedParams:f,interpolatedPath:h,isMissingParams:u}}function tP(t,e){let s=encodeURIComponent(t);if(e)for(const[a,n]of e)s=s.replaceAll(a,n);return s}function ah(t,e,s){const a=sP(t,e,s);if(!(s.to&&!a))return a??{}}function zh(t,e,s=!1){const a=s?t:t.toLowerCase(),n=s?e:e.toLowerCase();switch(!0){case a==="/":return e;case n===a:return"";case e.length<t.length:return e;case n[a.length]!=="/":return e;case n.startsWith(a):return e.slice(t.length);default:return e}}function sP(t,e,s){if(t!=="/"&&!e.startsWith(t))return;e=zh(t,e,s.caseSensitive);const a=zh(t,`${s.to??"$"}`,s.caseSensitive),n=oc(e),i=oc(a);e.startsWith("/")||n.unshift({type:"pathname",value:"/"}),a.startsWith("/")||i.unshift({type:"pathname",value:"/"});const c={};return(()=>{for(let f=0;f<Math.max(n.length,i.length);f++){const h=n[f],p=i[f],g=f>=n.length-1,x=f>=i.length-1;if(p){if(p.type==="wildcard"){const y=decodeURI(Nn(n.slice(f).map(_=>_.value)));return c["*"]=y,c._splat=y,!0}if(p.type==="pathname"){if(p.value==="/"&&!(h!=null&&h.value))return!0;if(h){if(s.caseSensitive){if(p.value!==h.value)return!1}else if(p.value.toLowerCase()!==h.value.toLowerCase())return!1}}if(!h)return!1;if(p.type==="param"){if(h.value==="/")return!1;h.value.charAt(0)!=="$"&&(c[p.value.substring(1)]=decodeURIComponent(h.value))}}if(!g&&x)return c["**"]=Nn(n.slice(f+1).map(y=>y.value)),!!s.fuzzy&&(p==null?void 0:p.value)!=="/"}return!0})()?c:void 0}function Ja(t){return!!(t!=null&&t.isNotFound)}function aP(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{return}}const Fh="tsr-scroll-restoration-v1_3",rP=(t,e)=>{let s;return(...a)=>{s||(s=setTimeout(()=>{t(...a),s=null},e))}};function nP(){const t=aP();if(!t)return;const e=t.getItem(Fh);let s=e?JSON.parse(e):{};return{state:s,set:a=>(s=pi(a,s)||s,t.setItem(Fh,JSON.stringify(s)))}}const B0=nP(),Lx=t=>t.state.key||t.href;function oP(t){const e=[];let s;for(;s=t.parentNode;)e.unshift(`${t.tagName}:nth-child(${[].indexOf.call(s.children,t)+1})`),t=s;return`${e.join(" > ")}`.toLowerCase()}let Hh=!1;function pE(t,e,s,a,n){var i;let c;try{c=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(h){console.error(h);return}const u=e||((i=window.history.state)==null?void 0:i.key),f=c[u];Hh=!0,(()=>{if(a&&f){for(const p in f){const g=f[p];if(p==="window")window.scrollTo({top:g.scrollY,left:g.scrollX,behavior:s});else if(p){const x=document.querySelector(p);x&&(x.scrollLeft=g.scrollX,x.scrollTop=g.scrollY)}}return}const h=window.location.hash.split("#")[1];if(h){const p=(window.history.state||{}).__hashScrollIntoViewOptions??!0;if(p){const g=document.getElementById(h);g&&g.scrollIntoView(p)}return}["window",...(n==null?void 0:n.filter(p=>p!=="window"))??[]].forEach(p=>{const g=p==="window"?window:typeof p=="function"?p():document.querySelector(p);g&&g.scrollTo({top:0,left:0,behavior:s})})})(),Hh=!1}function iP(t,e){if(B0===void 0||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),typeof document>"u"||t.isScrollRestorationSetup))return;t.isScrollRestorationSetup=!0,Hh=!1;const a=t.options.getScrollRestorationKey||Lx;window.history.scrollRestoration="manual";const n=i=>{if(Hh||!t.isScrollRestoring)return;let c="";if(i.target===document||i.target===window)c="window";else{const f=i.target.getAttribute("data-scroll-restoration-id");f?c=`[data-scroll-restoration-id="${f}"]`:c=oP(i.target)}const u=a(t.state.location);B0.set(f=>{const h=f[u]=f[u]||{},p=h[c]=h[c]||{};if(c==="window")p.scrollX=window.scrollX||0,p.scrollY=window.scrollY||0;else if(c){const g=document.querySelector(c);g&&(p.scrollX=g.scrollLeft||0,p.scrollY=g.scrollTop||0)}return f})};typeof document<"u"&&document.addEventListener("scroll",rP(n,100),!0),t.subscribe("onRendered",i=>{const c=a(i.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}pE(Fh,c,t.options.scrollRestorationBehavior||void 0,t.isScrollRestoring||void 0,t.options.scrollToTopSelectors||void 0),t.isScrollRestoring&&B0.set(u=>(u[c]=u[c]||{},u))})}function lP(t){if(typeof document<"u"&&document.querySelector){const e=t.state.location.state.__hashScrollIntoViewOptions??!0;if(e&&t.state.location.hash!==""){const s=document.getElementById(t.state.location.hash);s&&s.scrollIntoView(e)}}}function cP(t,e){const s=Object.entries(t).flatMap(([n,i])=>Array.isArray(i)?i.map(c=>[n,String(c)]):[[n,String(i)]]);return""+new URLSearchParams(s).toString()}function I0(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function uP(t,e){const s=t;return[...new URLSearchParams(s).entries()].reduce((i,[c,u])=>{const f=i[c];return f==null?i[c]=I0(u):i[c]=Array.isArray(f)?[...f,I0(u)]:[f,I0(u)],i},{})}const dP=hP(JSON.parse),fP=mP(JSON.stringify,JSON.parse);function hP(t){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));const s=uP(e);for(const a in s){const n=s[a];if(typeof n=="string")try{s[a]=t(n)}catch{}}return s}}function mP(t,e){function s(a){if(typeof a=="object"&&a!==null)try{return t(a)}catch{}else if(typeof a=="string"&&typeof e=="function")try{return e(a),t(a)}catch{}return a}return a=>{a={...a},Object.keys(a).forEach(i=>{const c=a[i];typeof c>"u"||c===void 0?delete a[i]:a[i]=s(c)});const n=cP(a).toString();return n?`?${n}`:""}}const pr="__root__";function pP(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},!t.reloadDocument){t.reloadDocument=!1;try{new URL(`${t.href}`),t.reloadDocument=!0}catch{}}if(t.throw)throw t;return t}function ci(t){return!!(t!=null&&t.isRedirect)}function V0(t){return!!(t!=null&&t.isRedirect)&&t.href}function yi(t){const e=t.resolvedLocation,s=t.location,a=(e==null?void 0:e.pathname)!==s.pathname,n=(e==null?void 0:e.href)!==s.href,i=(e==null?void 0:e.hash)!==s.hash;return{fromLocation:e,toLocation:s,pathChanged:a,hrefChanged:n,hashChanged:i}}class gP{constructor(e){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=s=>s(),this.update=s=>{var a;s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||s.basepath&&s.basepath!==n.basepath)&&(s.basepath===void 0||s.basepath===""||s.basepath==="/"?this.basepath="/":this.basepath=`/${Q3(s.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?W3({initialEntries:[this.basepath||"/"]}):K3()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Px(vP(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}}),iP(this)),typeof window<"u"&&"CSS"in window&&typeof((a=window.CSS)==null?void 0:a.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[s.id]=s);const a=c=>{c.forEach((u,f)=>{u.init({originalIndex:f,defaultSsr:this.options.defaultSsr});const h=this.routesById[u.id];if(jn(!h,`Duplicate routes found with id: ${String(u.id)}`),this.routesById[u.id]=u,!u.isRoot&&u.path){const g=gi(u.fullPath);(!this.routesByPath[g]||u.fullPath.endsWith("/"))&&(this.routesByPath[g]=u)}const p=u.children;p!=null&&p.length&&a(p)})};a([this.routeTree]);const n=[];Object.values(this.routesById).forEach((c,u)=>{var f;if(c.isRoot||!c.path)return;const h=eb(c.fullPath),p=oc(h);for(;p.length>1&&((f=p[0])==null?void 0:f.value)==="/";)p.shift();const g=p.map(x=>x.value==="/"?.75:x.type==="param"?.5:x.type==="wildcard"?.25:1);n.push({child:c,trimmed:h,parsed:p,index:u,scores:g})}),this.flatRoutes=n.sort((c,u)=>{const f=Math.min(c.scores.length,u.scores.length);for(let h=0;h<f;h++)if(c.scores[h]!==u.scores[h])return u.scores[h]-c.scores[h];if(c.scores.length!==u.scores.length)return u.scores.length-c.scores.length;for(let h=0;h<f;h++)if(c.parsed[h].value!==u.parsed[h].value)return c.parsed[h].value>u.parsed[h].value?1:-1;return c.index-u.index}).map((c,u)=>(c.child.rank=u,c.child))},this.subscribe=(s,a)=>{const n={eventType:s,fn:a};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=s=>{this.subscribers.forEach(a=>{a.eventType===s.type&&a.fn(s)})},this.parseLocation=(s,a)=>{const n=({pathname:f,search:h,hash:p,state:g})=>{const x=this.options.parseSearch(h),y=this.options.stringifySearch(x);return{pathname:f,searchStr:y,search:Za(s==null?void 0:s.search,x),hash:p.split("#").reverse()[0]??"",href:`${f}${y}${p}`,state:Za(s==null?void 0:s.state,g)}},i=n(a??this.history.location),{__tempLocation:c,__tempKey:u}=i.state;if(c&&(!u||u===this.tempLocationKey)){const f=n(c);return f.state.key=i.state.key,delete f.state.__tempLocation,{...f,maskedLocation:i}}return i},this.resolvePathWithBase=(s,a)=>eP({basepath:this.basepath,base:s,to:Rm(a),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.matchRoutes=(s,a,n)=>typeof s=="string"?this.matchRoutesInternal({pathname:s,search:a},n):this.matchRoutesInternal(s,a),this.getMatchedRoutes=(s,a)=>{let n={};const i=gi(s.pathname),c=p=>ah(this.basepath,i,{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let u=(a==null?void 0:a.to)!==void 0?this.routesByPath[a.to]:void 0;u?n=c(u):u=this.flatRoutes.find(p=>{const g=c(p);return g?(n=g,!0):!1});let f=u||this.routesById[pr];const h=[f];for(;f.parentRoute;)f=f.parentRoute,h.unshift(f);return{matchedRoutes:h,routeParams:n,foundRoute:u}},this.cancelMatch=s=>{const a=this.getMatch(s);a&&(a.abortController.abort(),clearTimeout(a.pendingTimeout))},this.cancelMatches=()=>{var s;(s=this.state.pendingMatches)==null||s.forEach(a=>{this.cancelMatch(a.id)})},this.buildLocation=s=>{const a=(i={},c)=>{var u,f,h,p,g,x,y;const _=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,j=i.from!=null?_.find(I=>ah(this.basepath,gi(I.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,N=(j==null?void 0:j.pathname)||this.latestLocation.pathname;jn(i.from==null||j!=null,"Could not find match for from: "+i.from);const S=(u=this.state.pendingMatches)!=null&&u.length?(f=Hl(this.state.pendingMatches))==null?void 0:f.search:((h=Hl(_))==null?void 0:h.search)||this.latestLocation.search,C=c==null?void 0:c.matchedRoutes.filter(I=>_.find(z=>z.routeId===I.id));let E;if(i.to){const I=(j==null?void 0:j.fullPath)||((p=Hl(_))==null?void 0:p.fullPath)||this.latestLocation.pathname;E=this.resolvePathWithBase(I,`${i.to}`)}else{const I=this.routesById[(g=C==null?void 0:C.find(z=>{const ee=sh({path:z.fullPath,params:(c==null?void 0:c.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;return Nn([this.basepath,ee])===N}))==null?void 0:g.id];E=this.resolvePathWithBase(N,(I==null?void 0:I.to)??N)}const M={...(x=Hl(_))==null?void 0:x.params};let R=(i.params??!0)===!0?M:{...M,...pi(i.params,M)};Object.keys(R).length>0&&(c==null||c.matchedRoutes.map(I=>{var z;return((z=I.options.params)==null?void 0:z.stringify)??I.options.stringifyParams}).filter(Boolean).forEach(I=>{R={...R,...I(R)}})),E=sh({path:E,params:R??{},leaveWildcards:!1,leaveParams:s.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath;let P=S;if(s._includeValidateSearch&&((y=this.options.search)!=null&&y.strict)){let I={};c==null||c.matchedRoutes.forEach(z=>{try{z.options.validateSearch&&(I={...I,...q0(z.options.validateSearch,{...I,...P})??{}})}catch{}}),P=I}P=(I=>{const z=(c==null?void 0:c.matchedRoutes.reduce((A,B)=>{var V;const W=[];if("search"in B.options)(V=B.options.search)!=null&&V.middlewares&&W.push(...B.options.search.middlewares);else if(B.options.preSearchFilters||B.options.postSearchFilters){const L=({search:F,next:ie})=>{let se=F;"preSearchFilters"in B.options&&B.options.preSearchFilters&&(se=B.options.preSearchFilters.reduce((le,re)=>re(le),F));const ue=ie(se);return"postSearchFilters"in B.options&&B.options.postSearchFilters?B.options.postSearchFilters.reduce((le,re)=>re(le),ue):ue};W.push(L)}if(s._includeValidateSearch&&B.options.validateSearch){const L=({search:F,next:ie})=>{const se=ie(F);try{return{...se,...q0(B.options.validateSearch,se)??{}}}catch{return se}};W.push(L)}return A.concat(W)},[]))??[],ee=({search:A})=>i.search?i.search===!0?A:pi(i.search,A):{};z.push(ee);const G=(A,B)=>{if(A>=z.length)return B;const V=z[A];return V({search:B,next:L=>G(A+1,L)})};return G(0,I)})(P),P=Za(S,P);const k=this.options.stringifySearch(P),O=i.hash===!0?this.latestLocation.hash:i.hash?pi(i.hash,this.latestLocation.hash):void 0,H=O?`#${O}`:"";let Y=i.state===!0?this.latestLocation.state:i.state?pi(i.state,this.latestLocation.state):{};return Y=Za(this.latestLocation.state,Y),{pathname:E,search:P,searchStr:k,state:Y,hash:O??"",href:`${E}${k}${H}`,unmaskOnReload:i.unmaskOnReload}},n=(i={},c)=>{var u;const f=a(i);let h=c?a(c):void 0;if(!h){let x={};const y=(u=this.options.routeMasks)==null?void 0:u.find(_=>{const j=ah(this.basepath,f.pathname,{to:_.from,caseSensitive:!1,fuzzy:!1});return j?(x=j,!0):!1});if(y){const{from:_,...j}=y;c={...Ox(s,["from"]),...j,params:x},h=a(c)}}const p=this.getMatchedRoutes(f,i),g=a(i,p);if(h){const x=this.getMatchedRoutes(h,c),y=a(c,x);g.maskedLocation=y}return g};return s.mask?n(s,{...Ox(s,["from"]),...s.mask}):n(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:a,...n})=>{const i=()=>{const f=["key","__TSR_index","__hashScrollIntoViewOptions"];f.forEach(p=>{n.state[p]=this.latestLocation.state[p]});const h=tc(n.state,this.latestLocation.state);return f.forEach(p=>{delete n.state[p]}),h},c=this.latestLocation.href===n.href,u=this.commitLocationPromise;if(this.commitLocationPromise=ql(()=>{u==null||u.resolve()}),c&&i())this.load();else{let{maskedLocation:f,hashScrollIntoView:h,...p}=n;f&&(p={...f,state:{...f.state,__tempKey:void 0,__tempLocation:{...p,search:p.searchStr,state:{...p.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(p.unmaskOnReload??this.options.unmaskOnReload??!1)&&(p.state.__tempKey=this.tempLocationKey)),p.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=s,this.history[n.replace?"replace":"push"](p.href,p.state,{ignoreBlocker:a})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:a,hashScrollIntoView:n,viewTransition:i,ignoreBlocker:c,href:u,...f}={})=>{if(u){const p=this.history.location.state.__TSR_index,g=hd(u,{__TSR_index:s?p:p+1});f.to=g.pathname,f.search=this.options.parseSearch(g.search),f.hash=g.hash.slice(1)}const h=this.buildLocation({...f,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:i,replace:s,resetScroll:a,hashScrollIntoView:n,ignoreBlocker:c})},this.navigate=({to:s,reloadDocument:a,href:n,...i})=>{if(a){if(!n){const c=this.buildLocation({to:s,...i});n=this.history.createHref(c.href)}i.replace?window.location.replace(n):window.location.href=n;return}return this.buildAndCommitLocation({...i,href:n,to:s})},this.load=async s=>{this.latestLocation=this.parseLocation(this.latestLocation);let a,n,i;for(i=new Promise(c=>{this.startTransition(async()=>{var u;try{const f=this.latestLocation,h=this.state.resolvedLocation;this.cancelMatches();let p;Nl(()=>{p=this.matchRoutes(f),this.__store.setState(g=>({...g,status:"pending",isLoading:!0,location:f,pendingMatches:p,cachedMatches:g.cachedMatches.filter(x=>!p.find(y=>y.id===x.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",...yi({resolvedLocation:h,location:f})}),this.emit({type:"onBeforeLoad",...yi({resolvedLocation:h,location:f})}),await this.loadMatches({sync:s==null?void 0:s.sync,matches:p,location:f,onReady:async()=>{this.startViewTransition(async()=>{let g,x,y;Nl(()=>{this.__store.setState(_=>{const j=_.matches,N=_.pendingMatches||_.matches;return g=j.filter(S=>!N.find(C=>C.id===S.id)),x=N.filter(S=>!j.find(C=>C.id===S.id)),y=j.filter(S=>N.find(C=>C.id===S.id)),{..._,isLoading:!1,loadedAt:Date.now(),matches:N,pendingMatches:void 0,cachedMatches:[..._.cachedMatches,...g.filter(S=>S.status!=="error")]}}),this.clearExpiredCache()}),[[g,"onLeave"],[x,"onEnter"],[y,"onStay"]].forEach(([_,j])=>{_.forEach(N=>{var S,C;(C=(S=this.looseRoutesById[N.routeId].options)[j])==null||C.call(S,N)})})})}})}catch(f){V0(f)?(a=f,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):Ja(f)&&(n=f),this.__store.setState(h=>({...h,statusCode:a?a.statusCode:n?404:h.matches.some(p=>p.status==="error")?500:200,redirect:a}))}this.latestLoadPromise===i&&((u=this.commitLocationPromise)==null||u.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),c()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;this.hasNotFoundMatch()&&this.__store.setState(c=>({...c,statusCode:404}))},this.startViewTransition=s=>{const a=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,a&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let n;if(typeof a=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,c=this.state.resolvedLocation,u=typeof a.types=="function"?a.types(yi({resolvedLocation:c,location:i})):a.types;n={update:s,types:u}}else n=s;document.startViewTransition(n)}else s()},this.updateMatch=(s,a)=>{var n;let i;const c=(n=this.state.pendingMatches)==null?void 0:n.find(p=>p.id===s),u=this.state.matches.find(p=>p.id===s),f=this.state.cachedMatches.find(p=>p.id===s),h=c?"pendingMatches":u?"matches":f?"cachedMatches":"";return h&&this.__store.setState(p=>{var g;return{...p,[h]:(g=p[h])==null?void 0:g.map(x=>x.id===s?i=a(x):x)}}),i},this.getMatch=s=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(a=>a.id===s),this.loadMatches=async({location:s,matches:a,preload:n,onReady:i,updateMatch:c=this.updateMatch,sync:u})=>{let f,h=!1;const p=async()=>{h||(h=!0,await(i==null?void 0:i()))},g=y=>!!(n&&!this.state.matches.find(_=>_.id===y)),x=(y,_)=>{var j,N,S,C;if(V0(_)&&!_.reloadDocument)throw _;if(ci(_)||Ja(_)){if(c(y.id,E=>({...E,status:ci(_)?"redirected":Ja(_)?"notFound":"error",isFetching:!1,error:_,beforeLoadPromise:void 0,loaderPromise:void 0})),_.routeId||(_.routeId=y.routeId),(j=y.beforeLoadPromise)==null||j.resolve(),(N=y.loaderPromise)==null||N.resolve(),(S=y.loadPromise)==null||S.resolve(),ci(_))throw h=!0,_=this.resolveRedirect({..._,_fromLocation:s}),_;if(Ja(_))throw this._handleNotFound(a,_,{updateMatch:c}),(C=this.serverSsr)==null||C.onMatchSettled({router:this,match:this.getMatch(y.id)}),_}};try{await new Promise((y,_)=>{(async()=>{var j,N,S,C;try{const E=(P,$,k)=>{var O,H;const{id:Y,routeId:I}=a[P],z=this.looseRoutesById[I];if($ instanceof Promise)throw $;$.routerCode=k,f=f??P,x(this.getMatch(Y),$);try{(H=(O=z.options).onError)==null||H.call(O,$)}catch(ee){$=ee,x(this.getMatch(Y),$)}c(Y,ee=>{var G,A;return(G=ee.beforeLoadPromise)==null||G.resolve(),(A=ee.loadPromise)==null||A.resolve(),{...ee,error:$,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[P,{id:$,routeId:k}]of a.entries()){const O=this.getMatch($),H=(j=a[P-1])==null?void 0:j.id,Y=this.looseRoutesById[k],I=Y.options.pendingMs??this.options.defaultPendingMs,z=!!(i&&!this.isServer&&!g($)&&(Y.options.loader||Y.options.beforeLoad||zj(Y))&&typeof I=="number"&&I!==1/0&&(Y.options.pendingComponent??((N=this.options)==null?void 0:N.defaultPendingComponent)));let ee=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(z&&setTimeout(()=>{try{p()}catch{}},I),await O.beforeLoadPromise,ee=this.getMatch($).status!=="success"),ee){try{c($,de=>{const ce=de.loadPromise;return{...de,loadPromise:ql(()=>{ce==null||ce.resolve()}),beforeLoadPromise:ql()}});const G=new AbortController;let A;z&&(A=setTimeout(()=>{try{p()}catch{}},I));const{paramsError:B,searchError:V}=this.getMatch($);B&&E(P,B,"PARSE_PARAMS"),V&&E(P,V,"VALIDATE_SEARCH");const W=()=>H?this.getMatch(H).context:this.options.context??{};c($,de=>({...de,isFetching:"beforeLoad",fetchCount:de.fetchCount+1,abortController:G,pendingTimeout:A,context:{...W(),...de.__routeContext}}));const{search:L,params:F,context:ie,cause:se}=this.getMatch($),ue=g($),le={search:L,abortController:G,params:F,preload:ue,context:ie,location:s,navigate:de=>this.navigate({...de,_fromLocation:s}),buildLocation:this.buildLocation,cause:ue?"preload":se,matches:a},re=await((C=(S=Y.options).beforeLoad)==null?void 0:C.call(S,le))??{};(ci(re)||Ja(re))&&E(P,re,"BEFORE_LOAD"),c($,de=>({...de,__beforeLoadContext:re,context:{...W(),...de.__routeContext,...re},abortController:G}))}catch(G){E(P,G,"BEFORE_LOAD")}c($,G=>{var A;return(A=G.beforeLoadPromise)==null||A.resolve(),{...G,beforeLoadPromise:void 0,isFetching:!1}})}}const M=a.slice(0,f),R=[];M.forEach(({id:P,routeId:$},k)=>{R.push((async()=>{const{loaderPromise:O}=this.getMatch(P);let H=!1,Y=!1;if(O){await O;const I=this.getMatch(P);I.error&&x(I,I.error)}else{const I=R[k-1],z=this.looseRoutesById[$],ee=()=>{const{params:ue,loaderDeps:le,abortController:re,context:de,cause:ce}=this.getMatch(P),be=g(P);return{params:ue,deps:le,preload:!!be,parentMatchPromise:I,abortController:re,context:de,location:s,navigate:Ne=>this.navigate({...Ne,_fromLocation:s}),cause:be?"preload":ce,route:z}},G=Date.now()-this.getMatch(P).updatedAt,A=g(P),B=A?z.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:z.options.staleTime??this.options.defaultStaleTime??0,V=z.options.shouldReload,W=typeof V=="function"?V(ee()):V;c(P,ue=>({...ue,loaderPromise:ql(),preload:!!A&&!this.state.matches.find(le=>le.id===P)}));const L=()=>{var ue,le,re,de,ce,be;const Ne=this.getMatch(P);if(!Ne)return;const J={matches:a,match:Ne,params:Ne.params,loaderData:Ne.loaderData},ge=(le=(ue=z.options).head)==null?void 0:le.call(ue,J),_e=ge==null?void 0:ge.meta,De=ge==null?void 0:ge.links,Ve=ge==null?void 0:ge.scripts,We=(de=(re=z.options).scripts)==null?void 0:de.call(re,J),ye=(be=(ce=z.options).headers)==null?void 0:be.call(ce,J);c(P,Pe=>({...Pe,meta:_e,links:De,headScripts:Ve,headers:ye,scripts:We}))},F=async()=>{var ue,le,re,de,ce;try{const be=async()=>{const Ne=this.getMatch(P);Ne.minPendingPromise&&await Ne.minPendingPromise};try{this.loadRouteChunk(z),c(P,J=>({...J,isFetching:"loader"}));const Ne=await((le=(ue=z.options).loader)==null?void 0:le.call(ue,ee()));x(this.getMatch(P),Ne),await z._lazyPromise,await be(),await z._componentsPromise,Nl(()=>{c(P,J=>({...J,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:Ne})),L()})}catch(Ne){let J=Ne;await be(),x(this.getMatch(P),Ne);try{(de=(re=z.options).onError)==null||de.call(re,Ne)}catch(ge){J=ge,x(this.getMatch(P),ge)}Nl(()=>{c(P,ge=>({...ge,error:J,status:"error",isFetching:!1})),L()})}(ce=this.serverSsr)==null||ce.onMatchSettled({router:this,match:this.getMatch(P)})}catch(be){Nl(()=>{c(P,Ne=>({...Ne,loaderPromise:void 0})),L()}),x(this.getMatch(P),be)}},{status:ie,invalid:se}=this.getMatch(P);H=ie==="success"&&(se||(W??G>B)),A&&z.options.preload===!1||(H&&!u?(Y=!0,(async()=>{try{await F();const{loaderPromise:ue,loadPromise:le}=this.getMatch(P);ue==null||ue.resolve(),le==null||le.resolve(),c(P,re=>({...re,loaderPromise:void 0}))}catch(ue){V0(ue)&&await this.navigate(ue)}})()):ie!=="success"||H&&u?await F():L())}if(!Y){const{loaderPromise:I,loadPromise:z}=this.getMatch(P);I==null||I.resolve(),z==null||z.resolve()}return c(P,I=>({...I,isFetching:Y?I.isFetching:!1,loaderPromise:Y?I.loaderPromise:void 0,invalid:!1})),this.getMatch(P)})())}),await Promise.all(R),y()}catch(E){_(E)}})()}),await p()}catch(y){if(ci(y)||Ja(y))throw Ja(y)&&!n&&await p(),y}return a},this.invalidate=s=>{const a=n=>{var i;return((i=s==null?void 0:s.filter)==null?void 0:i.call(s,n))??!0?{...n,invalid:!0,...n.status==="error"?{status:"pending",error:void 0}:{}}:n};return this.__store.setState(n=>{var i;return{...n,matches:n.matches.map(a),cachedMatches:n.cachedMatches.map(a),pendingMatches:(i=n.pendingMatches)==null?void 0:i.map(a)}}),this.load({sync:s==null?void 0:s.sync})},this.resolveRedirect=s=>{const a=s;return a.href||(a.href=this.buildLocation(a).href),a},this.clearCache=s=>{const a=s==null?void 0:s.filter;a!==void 0?this.__store.setState(n=>({...n,cachedMatches:n.cachedMatches.filter(i=>!a(i))})):this.__store.setState(n=>({...n,cachedMatches:[]}))},this.clearExpiredCache=()=>{const s=a=>{const n=this.looseRoutesById[a.routeId];if(!n.options.loader)return!0;const i=(a.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(a.status!=="error"&&Date.now()-a.updatedAt<i)};this.clearCache({filter:s})},this.loadRouteChunk=s=>(s._lazyPromise===void 0&&(s.lazyFn?s._lazyPromise=s.lazyFn().then(a=>{const{id:n,...i}=a.options;Object.assign(s.options,i)}):s._lazyPromise=Promise.resolve()),s._componentsPromise===void 0&&(s._componentsPromise=s._lazyPromise.then(()=>Promise.all(gE.map(async a=>{const n=s.options[a];n!=null&&n.preload&&await n.preload()})))),s._componentsPromise),this.preloadRoute=async s=>{const a=this.buildLocation(s);let n=this.matchRoutes(a,{throwOnError:!0,preload:!0,dest:s});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),c=new Set([...i,...this.state.cachedMatches.map(u=>u.id)]);Nl(()=>{n.forEach(u=>{c.has(u.id)||this.__store.setState(f=>({...f,cachedMatches:[...f.cachedMatches,u]}))})});try{return n=await this.loadMatches({matches:n,location:a,preload:!0,updateMatch:(u,f)=>{i.has(u)?n=n.map(h=>h.id===u?f(h):h):this.updateMatch(u,f)}}),n}catch(u){if(ci(u))return u.reloadDocument?void 0:await this.preloadRoute({...u,_fromLocation:a});Ja(u)||console.error(u);return}},this.matchRoute=(s,a)=>{const n={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},i=this.buildLocation(n);if(a!=null&&a.pending&&this.state.status!=="pending")return!1;const u=((a==null?void 0:a.pending)===void 0?!this.state.isLoading:a.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,f=ah(this.basepath,u.pathname,{...a,to:i.pathname});return!f||s.params&&!tc(f,s.params,{partial:!0})?!1:f&&((a==null?void 0:a.includeSearch)??!0)?tc(u.search,i.search,{partial:!0})?f:!1:f},this._handleNotFound=(s,a,{updateMatch:n=this.updateMatch}={})=>{var i;const c=this.routesById[a.routeId??""]??this.routeTree,u={};for(const h of s)u[h.routeId]=h;!c.options.notFoundComponent&&((i=this.options)!=null&&i.defaultNotFoundComponent)&&(c.options.notFoundComponent=this.options.defaultNotFoundComponent),jn(c.options.notFoundComponent);const f=u[c.id];jn(f,"Could not find match for route: "+c.id),n(f.id,h=>({...h,status:"notFound",error:a,isFetching:!1})),a.routerCode==="BEFORE_LOAD"&&c.parentRoute&&(a.routeId=c.parentRoute.id,this._handleNotFound(s,a,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,caseSensitive:e.caseSensitive??!1,notFoundMode:e.notFoundMode??"fuzzy",stringifySearch:e.stringifySearch??fP,parseSearch:e.parseSearch??dP}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutesInternal(e,s){const{foundRoute:a,matchedRoutes:n,routeParams:i}=this.getMatchedRoutes(e,s==null?void 0:s.dest);let c=!1;(a?a.path!=="/"&&i["**"]:gi(e.pathname))&&(this.options.notFoundRoute?n.push(this.options.notFoundRoute):c=!0);const u=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let g=n.length-1;g>=0;g--){const x=n[g];if(x.children)return x.id}return pr}})(),f=n.map(g=>{var x;let y;const _=((x=g.options.params)==null?void 0:x.parse)??g.options.parseParams;if(_)try{const j=_(i);Object.assign(i,j)}catch(j){if(y=new xP(j.message,{cause:j}),s!=null&&s.throwOnError)throw y;return y}}),h=[],p=g=>(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};return n.forEach((g,x)=>{var y,_;const j=h[x-1],[N,S,C]=(()=>{const z=(j==null?void 0:j.search)??e.search,ee=(j==null?void 0:j._strictSearch)??{};try{const G=q0(g.options.validateSearch,{...z})??{};return[{...z,...G},{...ee,...G},void 0]}catch(G){let A=G;if(G instanceof Gh||(A=new Gh(G.message,{cause:G})),s!=null&&s.throwOnError)throw A;return[z,{},A]}})(),E=((_=(y=g.options).loaderDeps)==null?void 0:_.call(y,{search:N}))??"",M=E?JSON.stringify(E):"",{usedParams:R,interpolatedPath:P}=sh({path:g.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),$=sh({path:g.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap}).interpolatedPath+M,k=this.getMatch($),O=this.state.matches.find(z=>z.routeId===g.id),H=O?"stay":"enter";let Y;if(k)Y={...k,cause:H,params:O?Za(O.params,i):i,_strictParams:R,search:Za(O?O.search:k.search,N),_strictSearch:S};else{const z=g.options.loader||g.options.beforeLoad||g.lazyFn||zj(g)?"pending":"success";Y={id:$,index:x,routeId:g.id,params:O?Za(O.params,i):i,_strictParams:R,pathname:Nn([this.basepath,P]),updatedAt:Date.now(),search:O?Za(O.search,N):N,_strictSearch:S,searchError:void 0,status:z,isFetching:!1,error:void 0,paramsError:f[x],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:H,loaderDeps:O?Za(O.loaderDeps,E):E,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:g.options.staticData||{},loadPromise:ql(),fullPath:g.fullPath}}s!=null&&s.preload||(Y.globalNotFound=u===g.id),Y.searchError=C;const I=p(j);Y.context={...I,...Y.__routeContext,...Y.__beforeLoadContext},h.push(Y)}),h.forEach((g,x)=>{var y,_;const j=this.looseRoutesById[g.routeId];if(!this.getMatch(g.id)&&(s==null?void 0:s._buildLocation)!==!0){const S=h[x-1],C=p(S),E={deps:g.loaderDeps,params:g.params,context:C,location:e,navigate:M=>this.navigate({...M,_fromLocation:e}),buildLocation:this.buildLocation,cause:g.cause,abortController:g.abortController,preload:!!g.preload,matches:h};g.__routeContext=((_=(y=j.options).context)==null?void 0:_.call(y,E))??{},g.context={...C,...g.__routeContext,...g.__beforeLoadContext}}}),h}}class Gh extends Error{}class xP extends Error{}function vP(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function q0(t,e){if(t==null)return{};if("~standard"in t){const s=t["~standard"].validate(e);if(s instanceof Promise)throw new Gh("Async validation not supported");if(s.issues)throw new Gh(JSON.stringify(s.issues,void 0,2),{cause:s});return s.value}return"parse"in t?t.parse(e):typeof t=="function"?t(e):{}}const gE=["component","errorComponent","pendingComponent","notFoundComponent"];function zj(t){var e;for(const s of gE)if((e=t.options[s])!=null&&e.preload)return!0;return!1}const bP="Error preloading route! ";class xE{constructor(e){if(this.init=s=>{var a,n;this.originalIndex=s.originalIndex;const i=this.options,c=!(i!=null&&i.path)&&!(i!=null&&i.id);if(this.parentRoute=(n=(a=this.options).getParentRoute)==null?void 0:n.call(a),c)this._path=pr;else if(!this.parentRoute)throw new Error("Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let u=c?pr:i==null?void 0:i.path;u&&u!=="/"&&(u=eb(u));const f=(i==null?void 0:i.id)||u;let h=c?pr:Nn([this.parentRoute.id===pr?"":this.parentRoute.id,f]);u===pr&&(u="/"),h!==pr&&(h=Nn(["/",h]));const p=h===pr?"/":Nn([this.parentRoute.fullPath,u]);this._path=u,this._id=h,this._fullPath=p,this._to=p,this._ssr=(i==null?void 0:i.ssr)??s.defaultSsr??!0},this.clone=s=>{this._path=s._path,this._id=s._id,this._fullPath=s._fullPath,this._to=s._to,this._ssr=s._ssr,this.options.getParentRoute=s.options.getParentRoute,this.children=s.children},this.addChildren=s=>this._addFileChildren(s),this._addFileChildren=s=>(Array.isArray(s)&&(this.children=s),typeof s=="object"&&s!==null&&(this.children=Object.values(s)),this),this._addFileTypes=()=>this,this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.options=e||{},this.isRoot=!(e!=null&&e.getParentRoute),e!=null&&e.id&&(e!=null&&e.path))throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}}class yP extends xE{constructor(e){super(e)}}function tb(t){const e=t.errorComponent??Mm;return r.jsx(wP,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:s,reset:a})=>s?b.createElement(e,{error:s,reset:a}):t.children})}class wP extends b.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,s){this.props.onCatch&&this.props.onCatch(e,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Mm({error:t}){const[e,s]=b.useState(!1);return r.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[r.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),r.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(a=>!a),children:e?"Hide Error":"Show Error"})]}),r.jsx("div",{style:{height:".25rem"}}),e?r.jsx("div",{children:r.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?r.jsx("code",{children:t.message}):null})}):null]})}var U0={exports:{}},z0={},F0={exports:{}},H0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj;function _P(){if(Fj)return H0;Fj=1;var t=Rd();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var s=typeof Object.is=="function"?Object.is:e,a=t.useState,n=t.useEffect,i=t.useLayoutEffect,c=t.useDebugValue;function u(g,x){var y=x(),_=a({inst:{value:y,getSnapshot:x}}),j=_[0].inst,N=_[1];return i(function(){j.value=y,j.getSnapshot=x,f(j)&&N({inst:j})},[g,y,x]),n(function(){return f(j)&&N({inst:j}),g(function(){f(j)&&N({inst:j})})},[g]),c(y),y}function f(g){var x=g.getSnapshot;g=g.value;try{var y=x();return!s(g,y)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return H0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,H0}var Hj;function vE(){return Hj||(Hj=1,F0.exports=_P()),F0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gj;function jP(){if(Gj)return z0;Gj=1;var t=Rd(),e=vE();function s(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var a=typeof Object.is=="function"?Object.is:s,n=e.useSyncExternalStore,i=t.useRef,c=t.useEffect,u=t.useMemo,f=t.useDebugValue;return z0.useSyncExternalStoreWithSelector=function(h,p,g,x,y){var _=i(null);if(_.current===null){var j={hasValue:!1,value:null};_.current=j}else j=_.current;_=u(function(){function S(P){if(!C){if(C=!0,E=P,P=x(P),y!==void 0&&j.hasValue){var $=j.value;if(y($,P))return M=$}return M=P}if($=M,a(E,P))return $;var k=x(P);return y!==void 0&&y($,k)?(E=P,$):(E=P,M=k)}var C=!1,E,M,R=g===void 0?null:g;return[function(){return S(p())},R===null?void 0:function(){return S(R())}]},[p,g,x,y]);var N=n(h,_[0],_[1]);return c(function(){j.hasValue=!0,j.value=N},[N]),f(N),N},z0}var Xj;function NP(){return Xj||(Xj=1,U0.exports=jP()),U0.exports}var SP=NP();function EP(t,e=s=>s){return SP.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,e,CP)}function CP(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[a,n]of t)if(!e.has(a)||!Object.is(n,e.get(a)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0}const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!1;for(let a=0;a<s.length;a++)if(!Object.prototype.hasOwnProperty.call(e,s[a])||!Object.is(t[s[a]],e[s[a]]))return!1;return!0}const G0=b.createContext(null);function bE(){return typeof document>"u"?G0:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=G0,G0)}function Ar(t){const e=b.useContext(bE());return t==null||t.warn,e}function Ps(t){const e=Ar({warn:(t==null?void 0:t.router)===void 0}),s=(t==null?void 0:t.router)||e,a=b.useRef(void 0);return EP(s.__store,n=>{if(t!=null&&t.select){if(t.structuralSharing??s.options.defaultStructuralSharing){const i=Za(a.current,t.select(n));return a.current=i,i}return t.select(n)}return n})}const Pm=b.createContext(void 0),AP=b.createContext(void 0);function So(t){const e=b.useContext(t.from?AP:Pm);return Ps({select:a=>{const n=a.matches.find(i=>t.from?t.from===i.routeId:i.id===e);if(jn(!((t.shouldThrow??!0)&&!n),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),n!==void 0)return t.select?t.select(n):n},structuralSharing:t.structuralSharing})}function yE(t){return So({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.loaderData):e.loaderData})}function wE(t){const{select:e,...s}=t;return So({...s,select:a=>e?e(a.loaderDeps):a.loaderDeps})}function _E(t){return So({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.params):e.params})}function sb(t){return So({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:e=>t.select?t.select(e.search):e.search})}function Rt(t){const{navigate:e}=Ar();return b.useCallback(s=>e({from:t==null?void 0:t.from,...s}),[t==null?void 0:t.from,e])}var Mi=dE();const jE=Tm(Mi),Bu=typeof window<"u"?b.useLayoutEffect:b.useEffect;function X0(t){const e=b.useRef({value:t,prev:null}),s=e.current.value;return t!==s&&(e.current={value:t,prev:s}),e.current.prev}function kP(t,e,s={},a={}){const n=b.useRef(typeof IntersectionObserver=="function"),i=b.useRef(null);return b.useEffect(()=>{if(!(!t.current||!n.current||a.disabled))return i.current=new IntersectionObserver(([c])=>{e(c)},s),i.current.observe(t.current),()=>{var c;(c=i.current)==null||c.disconnect()}},[e,s,a.disabled,t]),i.current}function TP(t){const e=b.useRef(null);return b.useImperativeHandle(t,()=>e.current,[]),e}function RP(){const t=Ar(),e=b.useRef({router:t,mounted:!1}),s=Ps({select:({isLoading:g})=>g}),[a,n]=b.useState(!1),i=Ps({select:g=>g.matches.some(x=>x.status==="pending"),structuralSharing:!0}),c=X0(s),u=s||a||i,f=X0(u),h=s||i,p=X0(h);return t.isServer||(t.startTransition=g=>{n(!0),b.startTransition(()=>{g(),n(!1)})}),b.useEffect(()=>{const g=t.history.subscribe(t.load),x=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return gi(t.latestLocation.href)!==gi(x.href)&&t.commitLocation({...x,replace:!0}),()=>{g()}},[t,t.history]),Bu(()=>{if(typeof window<"u"&&t.clientSsr||e.current.router===t&&e.current.mounted)return;e.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(x){console.error(x)}})()},[t]),Bu(()=>{c&&!s&&t.emit({type:"onLoad",...yi(t.state)})},[c,t,s]),Bu(()=>{p&&!h&&t.emit({type:"onBeforeRouteMount",...yi(t.state)})},[h,p,t]),Bu(()=>{f&&!u&&(t.emit({type:"onResolved",...yi(t.state)}),t.__store.setState(g=>({...g,status:"idle",resolvedLocation:g.location})),lP(t))},[u,f,t]),null}function MP(t){const e=Ps({select:s=>`not-found-${s.location.pathname}-${s.status}`});return r.jsx(tb,{getResetKey:()=>e,onCatch:(s,a)=>{var n;if(Ja(s))(n=t.onCatch)==null||n.call(t,s,a);else throw s},errorComponent:({error:s})=>{var a;if(Ja(s))return(a=t.fallback)==null?void 0:a.call(t,s);throw s},children:t.children})}function PP(){return r.jsx("p",{children:"Not Found"})}function Eh(t){return r.jsx(r.Fragment,{children:t.children})}function NE(t,e,s){return e.options.notFoundComponent?r.jsx(e.options.notFoundComponent,{data:s}):t.options.defaultNotFoundComponent?r.jsx(t.options.defaultNotFoundComponent,{data:s}):r.jsx(PP,{})}var Y0,Yj;function DP(){if(Yj)return Y0;Yj=1;const t={},e=t.hasOwnProperty,s=(k,O)=>{for(const H in k)e.call(k,H)&&O(H,k[H])},a=(k,O)=>(O&&s(O,(H,Y)=>{k[H]=Y}),k),n=(k,O)=>{const H=k.length;let Y=-1;for(;++Y<H;)O(k[Y])},i=k=>"\\u"+("0000"+k).slice(-4),c=(k,O)=>{let H=k.toString(16);return O?H:H.toUpperCase()},u=t.toString,f=Array.isArray,h=k=>typeof Buffer=="function"&&Buffer.isBuffer(k),p=k=>u.call(k)=="[object Object]",g=k=>typeof k=="string"||u.call(k)=="[object String]",x=k=>typeof k=="number"||u.call(k)=="[object Number]",y=k=>typeof k=="bigint",_=k=>typeof k=="function",j=k=>u.call(k)=="[object Map]",N=k=>u.call(k)=="[object Set]",S={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},C=/[\\\b\f\n\r\t]/,E=/[0-9]/,M=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,R=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,P=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,$=(k,O)=>{const H=()=>{B=A,++O.indentLevel,A=O.indent.repeat(O.indentLevel)},Y={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"	",indentLevel:0,__inline1__:!1,__inline2__:!1},I=O&&O.json;I&&(Y.quotes="double",Y.wrap=!0),O=a(Y,O),O.quotes!="single"&&O.quotes!="double"&&O.quotes!="backtick"&&(O.quotes="single");const z=O.quotes=="double"?'"':O.quotes=="backtick"?"`":"'",ee=O.compact,G=O.lowercaseHex;let A=O.indent.repeat(O.indentLevel),B="";const V=O.__inline1__,W=O.__inline2__,L=ee?"":`
`;let F,ie=!0;const se=O.numbers=="binary",ue=O.numbers=="octal",le=O.numbers=="decimal",re=O.numbers=="hexadecimal";if(I&&k&&_(k.toJSON)&&(k=k.toJSON()),!g(k)){if(j(k))return k.size==0?"new Map()":(ee||(O.__inline1__=!0,O.__inline2__=!1),"new Map("+$(Array.from(k),O)+")");if(N(k))return k.size==0?"new Set()":"new Set("+$(Array.from(k),O)+")";if(h(k))return k.length==0?"Buffer.from([])":"Buffer.from("+$(Array.from(k),O)+")";if(f(k))return F=[],O.wrap=!0,V&&(O.__inline1__=!1,O.__inline2__=!0),W||H(),n(k,ce=>{ie=!1,W&&(O.__inline2__=!1),F.push((ee||W?"":A)+$(ce,O))}),ie?"[]":W?"["+F.join(", ")+"]":"["+L+F.join(","+L)+L+(ee?"":B)+"]";if(x(k)||y(k)){if(I)return JSON.stringify(Number(k));let ce;if(le)ce=String(k);else if(re){let be=k.toString(16);G||(be=be.toUpperCase()),ce="0x"+be}else se?ce="0b"+k.toString(2):ue&&(ce="0o"+k.toString(8));return y(k)?ce+"n":ce}else return y(k)?I?JSON.stringify(Number(k)):k+"n":p(k)?(F=[],O.wrap=!0,H(),s(k,(ce,be)=>{ie=!1,F.push((ee?"":A)+$(ce,O)+":"+(ee?"":" ")+$(be,O))}),ie?"{}":"{"+L+F.join(","+L)+L+(ee?"":B)+"}"):I?JSON.stringify(k)||"null":String(k)}const de=O.escapeEverything?R:P;return F=k.replace(de,(ce,be,Ne,J,ge,_e)=>{if(be){if(O.minimal)return be;const Ve=be.charCodeAt(0),We=be.charCodeAt(1);if(O.es6){const ye=(Ve-55296)*1024+We-56320+65536;return"\\u{"+c(ye,G)+"}"}return i(c(Ve,G))+i(c(We,G))}if(Ne)return i(c(Ne.charCodeAt(0),G));if(ce=="\0"&&!I&&!E.test(_e.charAt(ge+1)))return"\\0";if(J)return J==z||O.escapeEverything?"\\"+J:J;if(C.test(ce))return S[ce];if(O.minimal&&!M.test(ce))return ce;const De=c(ce.charCodeAt(0),G);return I||De.length>2?i(De):"\\x"+("00"+De).slice(-2)}),z=="`"&&(F=F.replace(/\$\{/g,"\\${")),O.isScriptContext&&(F=F.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,I?"\\u003C!--":"\\x3C!--")),O.wrap&&(F=z+F+z),F};return $.version="3.0.2",Y0=$,Y0}DP();function OP({children:t,log:e}){return typeof document<"u"?null:r.jsx("script",{className:"tsr-once",dangerouslySetInnerHTML:{__html:[t,"",'if (typeof __TSR_SSR__ !== "undefined") __TSR_SSR__.cleanScripts()'].filter(Boolean).join(`
`)}})}function $P(){const t=Ar(),s=(t.options.getScrollRestorationKey||Lx)(t.latestLocation),a=s!==Lx(t.latestLocation)?s:null;return!t.isScrollRestoring||!t.isServer?null:r.jsx(OP,{children:`(${pE.toString()})(${JSON.stringify(Fh)},${JSON.stringify(a)}, undefined, true)`,log:!1})}const SE=b.memo(function({matchId:e}){var s,a;const n=Ar(),i=Ps({select:S=>{var C;return(C=S.matches.find(E=>E.id===e))==null?void 0:C.routeId}});jn(i);const c=n.routesById[i],u=c.options.pendingComponent??n.options.defaultPendingComponent,f=u?r.jsx(u,{}):null,h=c.options.errorComponent??n.options.defaultErrorComponent,p=c.options.onCatch??n.options.defaultOnCatch,g=c.isRoot?c.options.notFoundComponent??((s=n.options.notFoundRoute)==null?void 0:s.options.component):c.options.notFoundComponent,x=(!c.isRoot||c.options.wrapInSuspense)&&(c.options.wrapInSuspense??u??((a=c.options.errorComponent)==null?void 0:a.preload))?b.Suspense:Eh,y=h?tb:Eh,_=g?MP:Eh,j=Ps({select:S=>S.loadedAt}),N=Ps({select:S=>{var C;const E=S.matches.findIndex(M=>M.id===e);return(C=S.matches[E-1])==null?void 0:C.routeId}});return r.jsxs(r.Fragment,{children:[r.jsx(Pm.Provider,{value:e,children:r.jsx(x,{fallback:f,children:r.jsx(y,{getResetKey:()=>j,errorComponent:h||Mm,onCatch:(S,C)=>{if(Ja(S))throw S;p==null||p(S,C)},children:r.jsx(_,{fallback:S=>{if(!g||S.routeId&&S.routeId!==i||!S.routeId&&!c.isRoot)throw S;return b.createElement(g,S)},children:r.jsx(BP,{matchId:e})})})})}),N===pr&&n.options.scrollRestoration?r.jsxs(r.Fragment,{children:[r.jsx(LP,{}),r.jsx($P,{})]}):null]})});function LP(){const t=Ar(),e=b.useRef(void 0);return r.jsx("script",{suppressHydrationWarning:!0,ref:s=>{s&&(e.current===void 0||e.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...yi(t.state)}),e.current=t.latestLocation)}},t.latestLocation.state.key)}const BP=b.memo(function({matchId:e}){var s,a,n;const i=Ar(),{match:c,key:u,routeId:f}=Ps({select:x=>{const y=x.matches.findIndex(E=>E.id===e),_=x.matches[y],j=_.routeId,N=i.routesById[j].options.remountDeps??i.options.defaultRemountDeps,S=N==null?void 0:N({routeId:j,loaderDeps:_.loaderDeps,params:_._strictParams,search:_._strictSearch});return{key:S?JSON.stringify(S):void 0,routeId:j,match:Ox(_,["id","status","error"])}},structuralSharing:!0}),h=i.routesById[f],p=b.useMemo(()=>{const x=h.options.component??i.options.defaultComponent;return x?r.jsx(x,{},u):r.jsx(Dm,{})},[u,h.options.component,i.options.defaultComponent]),g=(h.options.errorComponent??i.options.defaultErrorComponent)||Mm;if(c.status==="notFound")return jn(Ja(c.error)),NE(i,h,c.error);if(c.status==="redirected")throw jn(ci(c.error)),(s=i.getMatch(c.id))==null?void 0:s.loadPromise;if(c.status==="error"){if(i.isServer)return r.jsx(g,{error:c.error,reset:void 0,info:{componentStack:""}});throw c.error}if(c.status==="pending"){const x=h.options.pendingMinMs??i.options.defaultPendingMinMs;if(x&&!((a=i.getMatch(c.id))!=null&&a.minPendingPromise)&&!i.isServer){const y=ql();Promise.resolve().then(()=>{i.updateMatch(c.id,_=>({..._,minPendingPromise:y}))}),setTimeout(()=>{y.resolve(),i.updateMatch(c.id,_=>({..._,minPendingPromise:void 0}))},x)}throw(n=i.getMatch(c.id))==null?void 0:n.loadPromise}return p}),Dm=b.memo(function(){const e=Ar(),s=b.useContext(Pm),a=Ps({select:h=>{var p;return(p=h.matches.find(g=>g.id===s))==null?void 0:p.routeId}}),n=e.routesById[a],i=Ps({select:h=>{const g=h.matches.find(x=>x.id===s);return jn(g),g.globalNotFound}}),c=Ps({select:h=>{var p;const g=h.matches,x=g.findIndex(y=>y.id===s);return(p=g[x+1])==null?void 0:p.id}});if(i)return NE(e,n,void 0);if(!c)return null;const u=r.jsx(SE,{matchId:c}),f=e.options.defaultPendingComponent?r.jsx(e.options.defaultPendingComponent,{}):null;return s===pr?r.jsx(b.Suspense,{fallback:f,children:u}):u});function IP(){const t=Ar(),e=t.options.defaultPendingComponent?r.jsx(t.options.defaultPendingComponent,{}):null,s=t.isServer||typeof document<"u"&&t.clientSsr?Eh:b.Suspense,a=r.jsxs(s,{fallback:e,children:[r.jsx(RP,{}),r.jsx(VP,{})]});return t.options.InnerWrap?r.jsx(t.options.InnerWrap,{children:a}):a}function VP(){const t=Ps({select:s=>{var a;return(a=s.matches[0])==null?void 0:a.id}}),e=Ps({select:s=>s.loadedAt});return r.jsx(Pm.Provider,{value:t,children:r.jsx(tb,{getResetKey:()=>e,errorComponent:Mm,onCatch:s=>{s.message||s.toString()},children:t?r.jsx(SE,{matchId:t}):null})})}function qP(t){return Ps({select:e=>{const s=e.matches;return t!=null&&t.select?t.select(s):s},structuralSharing:t==null?void 0:t.structuralSharing})}function UP(t,e){const s=Ar(),[a,n]=b.useState(!1),i=b.useRef(!1),c=TP(e),{activeProps:u=()=>({className:"active"}),inactiveProps:f=()=>({}),activeOptions:h,to:p,preload:g,preloadDelay:x,hashScrollIntoView:y,replace:_,startTransition:j,resetScroll:N,viewTransition:S,children:C,target:E,disabled:M,style:R,className:P,onClick:$,onFocus:k,onMouseEnter:O,onMouseLeave:H,onTouchStart:Y,ignoreBlocker:I,...z}=t,{params:ee,search:G,hash:A,state:B,mask:V,reloadDocument:W,...L}=z,F=b.useMemo(()=>{try{return new URL(`${p}`),"external"}catch{}return"internal"},[p]),ie=Ps({select:X=>X.location.search,structuralSharing:!0}),se=qP({select:X=>{var Z;return t.from??((Z=X[X.length-1])==null?void 0:Z.fullPath)}}),ue=b.useMemo(()=>({...t,from:se}),[t,se]),le=b.useMemo(()=>s.buildLocation(ue),[s,ue,ie]),re=b.useMemo(()=>ue.reloadDocument?!1:g??s.options.defaultPreload,[s.options.defaultPreload,g,ue.reloadDocument]),de=x??s.options.defaultPreloadDelay??0,ce=Ps({select:X=>{if(h!=null&&h.exact){if(!J3(X.location.pathname,le.pathname,s.basepath))return!1}else{const Z=Uh(X.location.pathname,s.basepath).split("/");if(!Uh(le.pathname,s.basepath).split("/").every((Se,Re)=>Se===Z[Re]))return!1}return((h==null?void 0:h.includeSearch)??!0)&&!tc(X.location.search,le.search,{partial:!(h!=null&&h.exact),ignoreUndefined:!(h!=null&&h.explicitUndefined)})?!1:h!=null&&h.includeHash?X.location.hash===le.hash:!0}}),be=b.useCallback(()=>{s.preloadRoute(ue).catch(X=>{console.warn(X),console.warn(bP)})},[ue,s]),Ne=b.useCallback(X=>{X!=null&&X.isIntersecting&&be()},[be]);if(kP(c,Ne,{rootMargin:"100px"},{disabled:!!M||re!=="viewport"}),Bu(()=>{i.current||!M&&re==="render"&&(be(),i.current=!0)},[M,be,re]),F==="external")return{...L,ref:c,type:F,href:p,...C&&{children:C},...E&&{target:E},...M&&{disabled:M},...R&&{style:R},...P&&{className:P},...$&&{onClick:$},...k&&{onFocus:k},...O&&{onMouseEnter:O},...H&&{onMouseLeave:H},...Y&&{onTouchStart:Y}};const J=X=>{if(!M&&!zP(X)&&!X.defaultPrevented&&(!E||E==="_self")&&X.button===0){X.preventDefault(),Mi.flushSync(()=>{n(!0)});const Z=s.subscribe("onResolved",()=>{Z(),n(!1)});return s.navigate({...ue,replace:_,resetScroll:N,hashScrollIntoView:y,startTransition:j,viewTransition:S,ignoreBlocker:I})}},ge=X=>{M||re&&be()},_e=ge,De=X=>{if(M)return;const Z=X.target||{};if(re){if(Z.preloadTimeout)return;Z.preloadTimeout=setTimeout(()=>{Z.preloadTimeout=null,be()},de)}},Ve=X=>{if(M)return;const Z=X.target||{};Z.preloadTimeout&&(clearTimeout(Z.preloadTimeout),Z.preloadTimeout=null)},We=X=>Z=>{var je;(je=Z.persist)==null||je.call(Z),X.filter(Boolean).forEach(Ce=>{Z.defaultPrevented||Ce(Z)})},ye=ce?pi(u,{})??{}:{},Pe=ce?{}:pi(f,{}),Ae=[P,ye.className,Pe.className].filter(Boolean).join(" "),q={...R,...ye.style,...Pe.style};return{...L,...ye,...Pe,href:M?void 0:le.maskedLocation?s.history.createHref(le.maskedLocation.href):s.history.createHref(le.href),ref:c,onClick:We([$,J]),onFocus:We([k,ge]),onMouseEnter:We([O,De]),onMouseLeave:We([H,Ve]),onTouchStart:We([Y,_e]),disabled:!!M,target:E,...Object.keys(q).length&&{style:q},...Ae&&{className:Ae},...M&&{role:"link","aria-disabled":!0},...ce&&{"data-status":"active","aria-current":"page"},...a&&{"data-transitioning":"transitioning"}}}const yo=b.forwardRef((t,e)=>{const{_asChild:s,...a}=t,{type:n,ref:i,...c}=UP(a,e),u=typeof a.children=="function"?a.children({isActive:c["data-status"]==="active"}):a.children;return typeof s>"u"&&delete c.disabled,b.createElement(s||"a",{...c,ref:i},u)});function zP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}let FP=class extends xE{constructor(e){super(e),this.useMatch=s=>So({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>So({...s,from:this.id,select:a=>s!=null&&s.select?s.select(a.context):a.context}),this.useSearch=s=>sb({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>_E({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>wE({...s,from:this.id}),this.useLoaderData=s=>yE({...s,from:this.id}),this.useNavigate=()=>Rt({from:this.fullPath}),this.Link=he.forwardRef((s,a)=>r.jsx(yo,{ref:a,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}};function HP(t){return new FP(t)}class GP extends yP{constructor(e){super(e),this.useMatch=s=>So({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>So({...s,from:this.id,select:a=>s!=null&&s.select?s.select(a.context):a.context}),this.useSearch=s=>sb({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>_E({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>wE({...s,from:this.id}),this.useLoaderData=s=>yE({...s,from:this.id}),this.useNavigate=()=>Rt({from:this.fullPath}),this.Link=he.forwardRef((s,a)=>r.jsx(yo,{ref:a,from:this.fullPath,...s})),this.$$typeof=Symbol.for("react.memo")}}function XP(t){return new GP(t)}function Yt(t){return new YP(t,{silent:!0}).createRoute}class YP{constructor(e,s){this.path=e,this.createRoute=a=>{this.silent;const n=HP(a);return n.isRoot=!1,n},this.silent=s==null?void 0:s.silent}}const KP=t=>new WP(t);class WP extends gP{constructor(e){super(e)}}function ZP({router:t,children:e,...s}){t.update({...t.options,...s,context:{...t.options.context,...s.context}});const a=bE(),n=r.jsx(a.Provider,{value:t,children:e});return t.options.Wrap?r.jsx(t.options.Wrap,{children:n}):n}function QP({router:t,...e}){return r.jsx(ZP,{router:t,...e,children:r.jsx(IP,{})})}function ab(t){return Ps({select:e=>e.location})}const JP="modulepreload",eD=function(t){return"/"+t},Kj={},Us=function(e,s,a){let n=Promise.resolve();if(s&&s.length>0){let c=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=c(s.map(h=>{if(h=eD(h),h in Kj)return;Kj[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":JP,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((y,_)=>{x.addEventListener("load",y),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return n.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})},nt={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Wj(this.context.count)},getNextContextId(){return Wj(this.context.count++)}};function Wj(t){const e=String(t),s=e.length-1;return nt.context.id+(s?String.fromCharCode(96+s):"")+e}function Iu(t){nt.context=t}const EE=!1,tD=(t,e)=>t===e,Xh=Symbol("solid-proxy"),CE=typeof Proxy=="function",Yh={equals:tD};let AE=PE;const Pn=1,Kh=2,kE={owned:null,cleanups:null,context:null,owner:null},K0={};var Gt=null;let W0=null,sD=null,Ht=null,sa=null,Sn=null,Om=0;function aD(t,e){const s=Ht,a=Gt,n=t.length===0,i=e===void 0?a:e,c=n?kE:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=n?t:()=>t(()=>Sr(()=>md(c)));Gt=c,Ht=null;try{return Eo(u,!0)}finally{Ht=s,Gt=a}}function po(t,e){e=e?Object.assign({},Yh,e):Yh;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},a=n=>(typeof n=="function"&&(n=n(s.value)),ME(s,n));return[RE.bind(s),a]}function rD(t,e,s){const a=$m(t,e,!0,Pn);wc(a)}function wi(t,e,s){const a=$m(t,e,!1,Pn);wc(a)}function hW(t,e,s){AE=hD;const a=$m(t,e,!1,Pn);(!s||!s.render)&&(a.user=!0),Sn?Sn.push(a):wc(a)}function jr(t,e,s){s=s?Object.assign({},Yh,s):Yh;const a=$m(t,e,!0,0);return a.observers=null,a.observerSlots=null,a.comparator=s.equals||void 0,wc(a),RE.bind(a)}function nD(t){return t&&typeof t=="object"&&"then"in t}function oD(t,e,s){let a,n,i;a=!0,n=t,i={};let c=null,u=K0,f=null,h=!1,p="initialValue"in i,g=typeof a=="function"&&jr(a);const x=new Set,[y,_]=(i.storage||po)(i.initialValue),[j,N]=po(void 0),[S,C]=po(void 0,{equals:!1}),[E,M]=po(p?"ready":"unresolved");nt.context&&(f=nt.getNextContextId(),i.ssrLoadFrom==="initial"?u=i.initialValue:nt.load&&nt.has(f)&&(u=nt.load(f)));function R(H,Y,I,z){return c===H&&(c=null,z!==void 0&&(p=!0),(H===u||Y===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(z,{value:Y})),u=K0,P(Y,I)),Y}function P(H,Y){Eo(()=>{Y===void 0&&_(()=>H),M(Y!==void 0?"errored":p?"ready":"unresolved"),N(Y);for(const I of x.keys())I.decrement();x.clear()},!1)}function $(){const H=uD,Y=y(),I=j();if(I!==void 0&&!c)throw I;return Ht&&Ht.user,Y}function k(H=!0){if(H!==!1&&h)return;h=!1;const Y=g?g():a;if(Y==null||Y===!1){R(c,Sr(y));return}let I;const z=u!==K0?u:Sr(()=>{try{return n(Y,{value:y(),refetching:H})}catch(ee){I=ee}});if(I!==void 0){R(c,void 0,Ch(I),Y);return}else if(!nD(z))return R(c,z,void 0,Y),z;return c=z,"v"in z?(z.s===1?R(c,z.v,void 0,Y):R(c,void 0,Ch(z.v),Y),z):(h=!0,queueMicrotask(()=>h=!1),Eo(()=>{M(p?"refreshing":"pending"),C()},!1),z.then(ee=>R(z,ee,void 0,Y),ee=>R(z,void 0,Ch(ee),Y)))}Object.defineProperties($,{state:{get:()=>E()},error:{get:()=>j()},loading:{get(){const H=E();return H==="pending"||H==="refreshing"}},latest:{get(){if(!p)return $();const H=j();if(H&&!c)throw H;return y()}}});let O=Gt;return g?rD(()=>(O=Gt,k(!1))):k(!1),[$,{refetch:H=>iD(O,()=>k(H)),mutate:_}]}function Sr(t){if(Ht===null)return t();const e=Ht;Ht=null;try{return t()}finally{Ht=e}}function iD(t,e){const s=Gt,a=Ht;Gt=t,Ht=null;try{return Eo(e,!0)}catch(n){rb(n)}finally{Gt=s,Ht=a}}const[mW,pW]=po(!1);function TE(t,e){const s=Symbol("context");return{id:s,Provider:mD(s),defaultValue:t}}function lD(t){let e;return Gt&&Gt.context&&(e=Gt.context[t.id])!==void 0?e:t.defaultValue}function cD(t){const e=jr(t),s=jr(()=>Bx(e()));return s.toArray=()=>{const a=s();return Array.isArray(a)?a:a!=null?[a]:[]},s}let uD;function RE(){if(this.sources&&this.state)if(this.state===Pn)wc(this);else{const t=sa;sa=null,Eo(()=>Zh(this),!1),sa=t}if(Ht){const t=this.observers?this.observers.length:0;Ht.sources?(Ht.sources.push(this),Ht.sourceSlots.push(t)):(Ht.sources=[this],Ht.sourceSlots=[t]),this.observers?(this.observers.push(Ht),this.observerSlots.push(Ht.sources.length-1)):(this.observers=[Ht],this.observerSlots=[Ht.sources.length-1])}return this.value}function ME(t,e,s){let a=t.value;return(!t.comparator||!t.comparator(a,e))&&(t.value=e,t.observers&&t.observers.length&&Eo(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],c=W0&&W0.running;c&&W0.disposed.has(i),(c?!i.tState:!i.state)&&(i.pure?sa.push(i):Sn.push(i),i.observers&&DE(i)),c||(i.state=Pn)}if(sa.length>1e6)throw sa=[],new Error},!1)),e}function wc(t){if(!t.fn)return;md(t);const e=Om;dD(t,t.value,e)}function dD(t,e,s){let a;const n=Gt,i=Ht;Ht=Gt=t;try{a=t.fn(e)}catch(c){return t.pure&&(t.state=Pn,t.owned&&t.owned.forEach(md),t.owned=null),t.updatedAt=s+1,rb(c)}finally{Ht=i,Gt=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?ME(t,a):t.value=a,t.updatedAt=s)}function $m(t,e,s,a=Pn,n){const i={fn:t,state:a,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Gt,context:Gt?Gt.context:null,pure:s};return Gt===null||Gt!==kE&&(Gt.owned?Gt.owned.push(i):Gt.owned=[i]),i}function Wh(t){if(t.state===0)return;if(t.state===Kh)return Zh(t);if(t.suspense&&Sr(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Om);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===Pn)wc(t);else if(t.state===Kh){const a=sa;sa=null,Eo(()=>Zh(t,e[0]),!1),sa=a}}function Eo(t,e){if(sa)return t();let s=!1;e||(sa=[]),Sn?s=!0:Sn=[],Om++;try{const a=t();return fD(s),a}catch(a){s||(Sn=null),sa=null,rb(a)}}function fD(t){if(sa&&(PE(sa),sa=null),t)return;const e=Sn;Sn=null,e.length&&Eo(()=>AE(e),!1)}function PE(t){for(let e=0;e<t.length;e++)Wh(t[e])}function hD(t){let e,s=0;for(e=0;e<t.length;e++){const a=t[e];a.user?t[s++]=a:Wh(a)}if(nt.context){if(nt.count){nt.effects||(nt.effects=[]),nt.effects.push(...t.slice(0,s));return}Iu()}for(nt.effects&&(nt.done||!nt.count)&&(t=[...nt.effects,...t],s+=nt.effects.length,delete nt.effects),e=0;e<s;e++)Wh(t[e])}function Zh(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const a=t.sources[s];if(a.sources){const n=a.state;n===Pn?a!==e&&(!a.updatedAt||a.updatedAt<Om)&&Wh(a):n===Kh&&Zh(a,e)}}}function DE(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=Kh,s.pure?sa.push(s):Sn.push(s),s.observers&&DE(s))}}function md(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),a=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const i=n.pop(),c=s.observerSlots.pop();a<n.length&&(i.sourceSlots[c]=a,n[a]=i,s.observerSlots[a]=c)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)md(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)md(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ch(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function rb(t,e=Gt){throw Ch(t)}function Bx(t){if(typeof t=="function"&&!t.length)return Bx(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const a=Bx(t[s]);Array.isArray(a)?e.push.apply(e,a):e.push(a)}return e}return t}function mD(t,e){return function(a){let n;return wi(()=>n=Sr(()=>(Gt.context={...Gt.context,[t]:a.value},cD(()=>a.children))),void 0),n}}function Zj(t,e){return Sr(()=>t(e||{}))}function rh(){return!0}const Ix={get(t,e,s){return e===Xh?s:t.get(e)},has(t,e){return e===Xh?!0:t.has(e)},set:rh,deleteProperty:rh,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:rh,deleteProperty:rh}},ownKeys(t){return t.keys()}};function Z0(t){return(t=typeof t=="function"?t():t)?t:{}}function pD(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function gW(...t){let e=!1;for(let c=0;c<t.length;c++){const u=t[c];e=e||!!u&&Xh in u,t[c]=typeof u=="function"?(e=!0,jr(u)):u}if(CE&&e)return new Proxy({get(c){for(let u=t.length-1;u>=0;u--){const f=Z0(t[u])[c];if(f!==void 0)return f}},has(c){for(let u=t.length-1;u>=0;u--)if(c in Z0(t[u]))return!0;return!1},keys(){const c=[];for(let u=0;u<t.length;u++)c.push(...Object.keys(Z0(t[u])));return[...new Set(c)]}},Ix);const s={},a=Object.create(null);for(let c=t.length-1;c>=0;c--){const u=t[c];if(!u)continue;const f=Object.getOwnPropertyNames(u);for(let h=f.length-1;h>=0;h--){const p=f[h];if(p==="__proto__"||p==="constructor")continue;const g=Object.getOwnPropertyDescriptor(u,p);if(!a[p])a[p]=g.get?{enumerable:!0,configurable:!0,get:pD.bind(s[p]=[g.get.bind(u)])}:g.value!==void 0?g:void 0;else{const x=s[p];x&&(g.get?x.push(g.get.bind(u)):g.value!==void 0&&x.push(()=>g.value))}}}const n={},i=Object.keys(a);for(let c=i.length-1;c>=0;c--){const u=i[c],f=a[u];f&&f.get?Object.defineProperty(n,u,f):n[u]=f?f.value:void 0}return n}function gD(t,...e){if(CE&&Xh in t){const n=new Set(e.length>1?e.flat():e[0]),i=e.map(c=>new Proxy({get(u){return c.includes(u)?t[u]:void 0},has(u){return c.includes(u)&&u in t},keys(){return c.filter(u=>u in t)}},Ix));return i.push(new Proxy({get(c){return n.has(c)?void 0:t[c]},has(c){return n.has(c)?!1:c in t},keys(){return Object.keys(t).filter(c=>!n.has(c))}},Ix)),i}const s={},a=e.map(()=>({}));for(const n of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,n),c=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let u=!1,f=0;for(const h of e)h.includes(n)&&(u=!0,c?a[f][n]=i.value:Object.defineProperty(a[f],n,i)),++f;u||(c?s[n]=i.value:Object.defineProperty(s,n,i))}return[...a,s]}function xD(t){let e,s;const a=n=>{const i=nt.context;if(i){const[u,f]=po();nt.count||(nt.count=0),nt.count++,(s||(s=t())).then(h=>{!nt.done&&Iu(i),nt.count--,f(()=>h.default),Iu()}),e=u}else if(!e){const[u]=oD(()=>(s||(s=t())).then(f=>f.default));e=u}let c;return jr(()=>(c=e())?Sr(()=>{if(!i||nt.done)return c(n);const u=nt.context;Iu(i);const f=c(n);return Iu(u),f}):"")};return a.preload=()=>s||((s=t()).then(n=>e=()=>n.default),s),a}let vD=0;function xW(){return nt.context?nt.getNextContextId():`cl-${vD++}`}const bD=t=>`Stale read from <${t}>.`;function vW(t){const e=t.keyed,s=jr(()=>t.when,void 0,void 0),a=e?s:jr(s,void 0,{equals:(n,i)=>!n==!i});return jr(()=>{const n=a();if(n){const i=t.children;return typeof i=="function"&&i.length>0?Sr(()=>i(e?n:()=>{if(!Sr(a))throw bD("Show");return s()})):i}return t.fallback},void 0,void 0)}const yD=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],wD=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...yD]),_D=new Set(["innerHTML","textContent","innerText","children"]),jD=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ND=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function SD(t,e){const s=ND[t];return typeof s=="object"?s[e]?s.$:void 0:s}const ED=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),CD=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),AD={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},bW=t=>jr(()=>t());function kD(t,e,s){let a=s.length,n=e.length,i=a,c=0,u=0,f=e[n-1].nextSibling,h=null;for(;c<n||u<i;){if(e[c]===s[u]){c++,u++;continue}for(;e[n-1]===s[i-1];)n--,i--;if(n===c){const p=i<a?u?s[u-1].nextSibling:s[i-u]:f;for(;u<i;)t.insertBefore(s[u++],p)}else if(i===u)for(;c<n;)(!h||!h.has(e[c]))&&e[c].remove(),c++;else if(e[c]===s[i-1]&&s[u]===e[n-1]){const p=e[--n].nextSibling;t.insertBefore(s[u++],e[c++].nextSibling),t.insertBefore(s[--i],p),e[n]=s[i]}else{if(!h){h=new Map;let g=u;for(;g<i;)h.set(s[g],g++)}const p=h.get(e[c]);if(p!=null)if(u<p&&p<i){let g=c,x=1,y;for(;++g<n&&g<i&&!((y=h.get(e[g]))==null||y!==p+x);)x++;if(x>p-u){const _=e[c];for(;u<p;)t.insertBefore(s[u++],_)}else t.replaceChild(s[u++],e[c++])}else c++;else e[c++].remove()}}}const Qj="_$DX_DELEGATE";function TD(t,e,s,a={}){let n;return aD(i=>{n=i,e===document?t():VD(e,t(),e.firstChild?null:void 0,s)},a.owner),()=>{n(),e.textContent=""}}function yW(t,e,s,a){let n;const i=()=>{const u=document.createElement("template");return u.innerHTML=t,u.content.firstChild},c=()=>(n||(n=i())).cloneNode(!0);return c.cloneNode=c,c}function RD(t,e=window.document){const s=e[Qj]||(e[Qj]=new Set);for(let a=0,n=t.length;a<n;a++){const i=t[a];s.has(i)||(s.add(i),e.addEventListener(i,FD))}}function Vx(t,e,s){Pi(t)||(s==null?t.removeAttribute(e):t.setAttribute(e,s))}function MD(t,e,s,a){Pi(t)||(a==null?t.removeAttributeNS(e,s):t.setAttributeNS(e,s,a))}function PD(t,e,s){Pi(t)||(s?t.setAttribute(e,""):t.removeAttribute(e))}function DD(t,e){Pi(t)||(e==null?t.removeAttribute("class"):t.className=e)}function OD(t,e,s,a){if(a)Array.isArray(s)?(t[`$$${e}`]=s[0],t[`$$${e}Data`]=s[1]):t[`$$${e}`]=s;else if(Array.isArray(s)){const n=s[0];t.addEventListener(e,s[0]=i=>n.call(t,s[1],i))}else t.addEventListener(e,s,typeof s!="function"&&s)}function $D(t,e,s={}){const a=Object.keys(e||{}),n=Object.keys(s);let i,c;for(i=0,c=n.length;i<c;i++){const u=n[i];!u||u==="undefined"||e[u]||(Jj(t,u,!1),delete s[u])}for(i=0,c=a.length;i<c;i++){const u=a[i],f=!!e[u];!u||u==="undefined"||s[u]===f||!f||(Jj(t,u,!0),s[u]=f)}return s}function LD(t,e,s){if(!e)return s?Vx(t,"style"):e;const a=t.style;if(typeof e=="string")return a.cssText=e;typeof s=="string"&&(a.cssText=s=void 0),s||(s={}),e||(e={});let n,i;for(i in s)e[i]==null&&a.removeProperty(i),delete s[i];for(i in e)n=e[i],n!==s[i]&&(a.setProperty(i,n),s[i]=n);return s}function BD(t,e={},s,a){const n={};return a||wi(()=>n.children=pd(t,e.children,n.children)),wi(()=>typeof e.ref=="function"&&ID(e.ref,t)),wi(()=>qD(t,e,s,!0,n,!0)),n}function ID(t,e,s){return Sr(()=>t(e,s))}function VD(t,e,s,a){if(s!==void 0&&!a&&(a=[]),typeof e!="function")return pd(t,e,a,s);wi(n=>pd(t,e(),n,s),a)}function qD(t,e,s,a,n={},i=!1){e||(e={});for(const c in n)if(!(c in e)){if(c==="children")continue;n[c]=eN(t,c,null,n[c],s,i,e)}for(const c in e){if(c==="children")continue;const u=e[c];n[c]=eN(t,c,u,n[c],s,i,e)}}function UD(t){let e,s;return!Pi()||!(e=nt.registry.get(s=HD()))?t():(nt.completed&&nt.completed.add(e),nt.registry.delete(s),e)}function Pi(t){return!!nt.context&&!nt.done&&(!t||t.isConnected)}function zD(t){return t.toLowerCase().replace(/-([a-z])/g,(e,s)=>s.toUpperCase())}function Jj(t,e,s){const a=e.trim().split(/\s+/);for(let n=0,i=a.length;n<i;n++)t.classList.toggle(a[n],s)}function eN(t,e,s,a,n,i,c){let u,f,h,p,g;if(e==="style")return LD(t,s,a);if(e==="classList")return $D(t,s,a);if(s===a)return a;if(e==="ref")i||s(t);else if(e.slice(0,3)==="on:"){const x=e.slice(3);a&&t.removeEventListener(x,a,typeof a!="function"&&a),s&&t.addEventListener(x,s,typeof s!="function"&&s)}else if(e.slice(0,10)==="oncapture:"){const x=e.slice(10);a&&t.removeEventListener(x,a,!0),s&&t.addEventListener(x,s,!0)}else if(e.slice(0,2)==="on"){const x=e.slice(2).toLowerCase(),y=ED.has(x);if(!y&&a){const _=Array.isArray(a)?a[0]:a;t.removeEventListener(x,_)}(y||s)&&(OD(t,x,s,y),y&&RD([x]))}else if(e.slice(0,5)==="attr:")Vx(t,e.slice(5),s);else if(e.slice(0,5)==="bool:")PD(t,e.slice(5),s);else if((g=e.slice(0,5)==="prop:")||(h=_D.has(e))||!n&&((p=SD(e,t.tagName))||(f=wD.has(e)))||(u=t.nodeName.includes("-")||"is"in c)){if(g)e=e.slice(5),f=!0;else if(Pi(t))return s;e==="class"||e==="className"?DD(t,s):u&&!f&&!h?t[zD(e)]=s:t[p||e]=s}else{const x=n&&e.indexOf(":")>-1&&AD[e.split(":")[0]];x?MD(t,x,e,s):Vx(t,jD[e]||e,s)}return s}function FD(t){if(nt.registry&&nt.events&&nt.events.find(([f,h])=>h===t))return;let e=t.target;const s=`$$${t.type}`,a=t.target,n=t.currentTarget,i=f=>Object.defineProperty(t,"target",{configurable:!0,value:f}),c=()=>{const f=e[s];if(f&&!e.disabled){const h=e[`${s}Data`];if(h!==void 0?f.call(e,h,t):f.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},u=()=>{for(;c()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),nt.registry&&!nt.done&&(nt.done=_$HY.done=!0),t.composedPath){const f=t.composedPath();i(f[0]);for(let h=0;h<f.length-2&&(e=f[h],!!c());h++){if(e._$host){e=e._$host,u();break}if(e.parentNode===n)break}}else u();i(a)}function pd(t,e,s,a,n){const i=Pi(t);if(i){!s&&(s=[...t.childNodes]);let f=[];for(let h=0;h<s.length;h++){const p=s[h];p.nodeType===8&&p.data.slice(0,2)==="!$"?p.remove():f.push(p)}s=f}for(;typeof s=="function";)s=s();if(e===s)return s;const c=typeof e,u=a!==void 0;if(t=u&&s[0]&&s[0].parentNode||t,c==="string"||c==="number"){if(i||c==="number"&&(e=e.toString(),e===s))return s;if(u){let f=s[0];f&&f.nodeType===3?f.data!==e&&(f.data=e):f=document.createTextNode(e),s=Sl(t,s,a,f)}else s!==""&&typeof s=="string"?s=t.firstChild.data=e:s=t.textContent=e}else if(e==null||c==="boolean"){if(i)return s;s=Sl(t,s,a)}else{if(c==="function")return wi(()=>{let f=e();for(;typeof f=="function";)f=f();s=pd(t,f,s,a)}),()=>s;if(Array.isArray(e)){const f=[],h=s&&Array.isArray(s);if(qx(f,e,s,n))return wi(()=>s=pd(t,f,s,a,!0)),()=>s;if(i){if(!f.length)return s;if(a===void 0)return s=[...t.childNodes];let p=f[0];if(p.parentNode!==t)return s;const g=[p];for(;(p=p.nextSibling)!==a;)g.push(p);return s=g}if(f.length===0){if(s=Sl(t,s,a),u)return s}else h?s.length===0?tN(t,f,a):kD(t,s,f):(s&&Sl(t),tN(t,f));s=f}else if(e.nodeType){if(i&&e.parentNode)return s=u?[e]:e;if(Array.isArray(s)){if(u)return s=Sl(t,s,a,e);Sl(t,s,null,e)}else s==null||s===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);s=e}}return s}function qx(t,e,s,a){let n=!1;for(let i=0,c=e.length;i<c;i++){let u=e[i],f=s&&s[t.length],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)t.push(u);else if(Array.isArray(u))n=qx(t,u,f)||n;else if(h==="function")if(a){for(;typeof u=="function";)u=u();n=qx(t,Array.isArray(u)?u:[u],Array.isArray(f)?f:[f])||n}else t.push(u),n=!0;else{const p=String(u);f&&f.nodeType===3&&f.data===p?t.push(f):t.push(document.createTextNode(p))}}return n}function tN(t,e,s=null){for(let a=0,n=e.length;a<n;a++)t.insertBefore(e[a],s)}function Sl(t,e,s,a){if(s===void 0)return t.textContent="";const n=a||document.createTextNode("");if(e.length){let i=!1;for(let c=e.length-1;c>=0;c--){const u=e[c];if(n!==u){const f=u.parentNode===t;!i&&!c?f?t.replaceChild(n,u):t.insertBefore(n,s):f&&u.remove()}else i=!0}}else t.insertBefore(n,s);return[n]}function HD(){return nt.getNextContextId()}const GD="http://www.w3.org/2000/svg";function XD(t,e=!1){return e?document.createElementNS(GD,t):document.createElement(t)}function YD(t,e){const s=jr(t);return jr(()=>{const a=s();switch(typeof a){case"function":return Sr(()=>a(e));case"string":const n=CD.has(a),i=nt.context?UD():XD(a,n);return BD(i,e,n),i}})}function wW(t){const[,e]=gD(t,["component"]);return YD(()=>t.component,e)}const KD=TE(void 0),WD=TE(void 0),_W=()=>{const t=lD(WD);if(!t)throw new Error("useDevtoolsOnClose must be used within a TanStackRouterDevtools component");return t};var OE=t=>{throw TypeError(t)},$E=(t,e,s)=>e.has(t)||OE("Cannot "+s),Ys=(t,e,s)=>($E(t,e,"read from private field"),e.get(t)),Ka=(t,e,s)=>e.has(t)?OE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Is=(t,e,s,a)=>($E(t,e,"write to private field"),e.set(t,s),s),Vu,qu,Uu,zu,Fu,Ah,kh,Th,Hu,Ul,Gu,Rh;class ZD{constructor(e){Ka(this,Vu),Ka(this,qu),Ka(this,Uu),Ka(this,zu),Ka(this,Fu),Ka(this,Ah),Ka(this,kh),Ka(this,Th),Ka(this,Hu),Ka(this,Ul,!1),Ka(this,Gu),Ka(this,Rh),Is(this,Vu,po(e.router)),Is(this,qu,po(e.routerState)),Is(this,Uu,e.position??"bottom-left"),Is(this,zu,e.initialIsOpen??!1),Is(this,Fu,e.shadowDOMTarget),Is(this,Ah,e.panelProps),Is(this,kh,e.closeButtonProps),Is(this,Th,e.toggleButtonProps),Is(this,Hu,e.containerElement)}mount(e){if(Ys(this,Ul))throw new Error("Devtools is already mounted");const s=TD(()=>{const[a]=Ys(this,Vu),[n]=Ys(this,qu),i=Ys(this,Uu),c=Ys(this,zu),u=Ys(this,Fu),f=Ys(this,Ah),h=Ys(this,kh),p=Ys(this,Th),g=Ys(this,Hu);let x;return Ys(this,Gu)?x=Ys(this,Gu):(x=xD(()=>Us(()=>import("./FloatingTanStackRouterDevtools-D7Hcepid.js"),[])),Is(this,Gu,x)),Zj(KD.Provider,{value:u,get children(){return Zj(x,{position:i,initialIsOpen:c,router:a,routerState:n,shadowDOMTarget:u,panelProps:f,closeButtonProps:h,toggleButtonProps:p,containerElement:g})}})},e);Is(this,Ul,!0),Is(this,Rh,s)}unmount(){var e;if(!Ys(this,Ul))throw new Error("Devtools is not mounted");(e=Ys(this,Rh))==null||e.call(this),Is(this,Ul,!1)}setRouter(e){Ys(this,Vu)[1](e)}setRouterState(e){Ys(this,qu)[1](e)}setOptions(e){e.position!==void 0&&Is(this,Uu,e.position),e.initialIsOpen!==void 0&&Is(this,zu,e.initialIsOpen),e.shadowDOMTarget!==void 0&&Is(this,Fu,e.shadowDOMTarget),e.containerElement!==void 0&&Is(this,Hu,e.containerElement)}}Vu=new WeakMap;qu=new WeakMap;Uu=new WeakMap;zu=new WeakMap;Fu=new WeakMap;Ah=new WeakMap;kh=new WeakMap;Th=new WeakMap;Hu=new WeakMap;Ul=new WeakMap;Gu=new WeakMap;Rh=new WeakMap;function QD(t){const{initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:f}=t,h=Ar({warn:!1}),p=f??h,g=Ps({router:p}),x=b.useRef(null),[y]=b.useState(()=>new ZD({initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u,router:p,routerState:g}));return b.useEffect(()=>{y.setRouter(p)},[y,p]),b.useEffect(()=>{y.setRouterState(g)},[y,g]),b.useEffect(()=>{y.setOptions({initialIsOpen:e,panelProps:s,closeButtonProps:a,toggleButtonProps:n,position:i,containerElement:c,shadowDOMTarget:u})},[y,e,s,a,n,i,c,u]),b.useEffect(()=>(x.current&&y.mount(x.current),()=>{y.unmount()}),[y]),r.jsx(b.Fragment,{children:r.jsx("div",{ref:x})})}const JD=QD;console.warn("[@tanstack/router-devtools] This package has moved to @tanstack/react-router-devtools. Please switch to the new package at your earliest convenience, as this package will be dropped in the next major version release.");var Et;(function(t){t.assertEqual=n=>{};function e(n){}t.assertIs=e;function s(n){throw new Error}t.assertNever=s,t.arrayToEnum=n=>{const i={};for(const c of n)i[c]=c;return i},t.getValidEnumValues=n=>{const i=t.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),c={};for(const u of i)c[u]=n[u];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(const c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function a(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=a,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Et||(Et={}));var sN;(function(t){t.mergeShapes=(e,s)=>({...e,...s})})(sN||(sN={}));const qe=Et.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),io=t=>{switch(typeof t){case"undefined":return qe.undefined;case"string":return qe.string;case"number":return Number.isNaN(t)?qe.nan:qe.number;case"boolean":return qe.boolean;case"function":return qe.function;case"bigint":return qe.bigint;case"symbol":return qe.symbol;case"object":return Array.isArray(t)?qe.array:t===null?qe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?qe.promise:typeof Map<"u"&&t instanceof Map?qe.map:typeof Set<"u"&&t instanceof Set?qe.set:typeof Date<"u"&&t instanceof Date?qe.date:qe.object;default:return qe.unknown}},Ee=Et.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Kr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=e}format(e){const s=e||function(i){return i.message},a={_errors:[]},n=i=>{for(const c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)a._errors.push(s(c));else{let u=a,f=0;for(;f<c.path.length;){const h=c.path[f];f===c.path.length-1?(u[h]=u[h]||{_errors:[]},u[h]._errors.push(s(c))):u[h]=u[h]||{_errors:[]},u=u[h],f++}}};return n(this),a}static assert(e){if(!(e instanceof Kr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Et.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=s=>s.message){const s={},a=[];for(const n of this.issues)n.path.length>0?(s[n.path[0]]=s[n.path[0]]||[],s[n.path[0]].push(e(n))):a.push(e(n));return{formErrors:a,fieldErrors:s}}get formErrors(){return this.flatten()}}Kr.create=t=>new Kr(t);const Ux=(t,e)=>{let s;switch(t.code){case Ee.invalid_type:t.received===qe.undefined?s="Required":s=`Expected ${t.expected}, received ${t.received}`;break;case Ee.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(t.expected,Et.jsonStringifyReplacer)}`;break;case Ee.unrecognized_keys:s=`Unrecognized key(s) in object: ${Et.joinValues(t.keys,", ")}`;break;case Ee.invalid_union:s="Invalid input";break;case Ee.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Et.joinValues(t.options)}`;break;case Ee.invalid_enum_value:s=`Invalid enum value. Expected ${Et.joinValues(t.options)}, received '${t.received}'`;break;case Ee.invalid_arguments:s="Invalid function arguments";break;case Ee.invalid_return_type:s="Invalid function return type";break;case Ee.invalid_date:s="Invalid date";break;case Ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(s=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?s=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?s=`Invalid input: must end with "${t.validation.endsWith}"`:Et.assertNever(t.validation):t.validation!=="regex"?s=`Invalid ${t.validation}`:s="Invalid";break;case Ee.too_small:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:s="Invalid input";break;case Ee.too_big:t.type==="array"?s=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?s=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?s=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?s=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?s=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:s="Invalid input";break;case Ee.custom:s="Invalid input";break;case Ee.invalid_intersection_types:s="Intersection results could not be merged";break;case Ee.not_multiple_of:s=`Number must be a multiple of ${t.multipleOf}`;break;case Ee.not_finite:s="Number must be finite";break;default:s=e.defaultError,Et.assertNever(t)}return{message:s}};let eO=Ux;function tO(){return eO}const sO=t=>{const{data:e,path:s,errorMaps:a,issueData:n}=t,i=[...s,...n.path||[]],c={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let u="";const f=a.filter(h=>!!h).slice().reverse();for(const h of f)u=h(c,{data:e,defaultError:u}).message;return{...n,path:i,message:u}};function Me(t,e){const s=tO(),a=sO({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,s,s===Ux?void 0:Ux].filter(n=>!!n)});t.common.issues.push(a)}class $a{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,s){const a=[];for(const n of s){if(n.status==="aborted")return tt;n.status==="dirty"&&e.dirty(),a.push(n.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,s){const a=[];for(const n of s){const i=await n.key,c=await n.value;a.push({key:i,value:c})}return $a.mergeObjectSync(e,a)}static mergeObjectSync(e,s){const a={};for(const n of s){const{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return tt;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(a[i.value]=c.value)}return{status:e.value,value:a}}}const tt=Object.freeze({status:"aborted"}),Xu=t=>({status:"dirty",value:t}),rr=t=>({status:"valid",value:t}),aN=t=>t.status==="aborted",rN=t=>t.status==="dirty",ic=t=>t.status==="valid",Qh=t=>typeof Promise<"u"&&t instanceof Promise;var Ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ue||(Ue={}));class Co{constructor(e,s,a,n){this._cachedPath=[],this.parent=e,this.data=s,this._path=a,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nN=(t,e)=>{if(ic(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new Kr(t.common.issues);return this._error=s,this._error}}};function ft(t){if(!t)return{};const{errorMap:e,invalid_type_error:s,required_error:a,description:n}=t;if(e&&(s||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,u)=>{const{message:f}=t;return c.code==="invalid_enum_value"?{message:f??u.defaultError}:typeof u.data>"u"?{message:f??a??u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:f??s??u.defaultError}},description:n}}class Nt{get description(){return this._def.description}_getType(e){return io(e.data)}_getOrReturnCtx(e,s){return s||{common:e.parent.common,data:e.data,parsedType:io(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $a,ctx:{common:e.parent.common,data:e.data,parsedType:io(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const s=this._parse(e);if(Qh(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(e){const s=this._parse(e);return Promise.resolve(s)}parse(e,s){const a=this.safeParse(e,s);if(a.success)return a.data;throw a.error}safeParse(e,s){const a={common:{issues:[],async:(s==null?void 0:s.async)??!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:io(e)},n=this._parseSync({data:e,path:a.path,parent:a});return nN(a,n)}"~validate"(e){var a,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:io(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:s});return ic(i)?{value:i.value}:{issues:s.common.issues}}catch(i){(n=(a=i==null?void 0:i.message)==null?void 0:a.toLowerCase())!=null&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(i=>ic(i)?{value:i.value}:{issues:s.common.issues})}async parseAsync(e,s){const a=await this.safeParseAsync(e,s);if(a.success)return a.data;throw a.error}async safeParseAsync(e,s){const a={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:io(e)},n=this._parse({data:e,path:a.path,parent:a}),i=await(Qh(n)?n:Promise.resolve(n));return nN(a,i)}refine(e,s){const a=n=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(n):s;return this._refinement((n,i)=>{const c=e(n),u=()=>i.addIssue({code:Ee.custom,...a(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(e,s){return this._refinement((a,n)=>e(a)?!0:(n.addIssue(typeof s=="function"?s(a,n):s),!1))}_refinement(e){return new cc({schema:this,typeName:st.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s=>this["~validate"](s)}}optional(){return wo.create(this,this._def)}nullable(){return uc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return zr.create(this)}promise(){return sm.create(this,this._def)}or(e){return em.create([this,e],this._def)}and(e){return tm.create(this,e,this._def)}transform(e){return new cc({...ft(this._def),schema:this,typeName:st.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const s=typeof e=="function"?e:()=>e;return new Hx({...ft(this._def),innerType:this,defaultValue:s,typeName:st.ZodDefault})}brand(){return new SO({typeName:st.ZodBranded,type:this,...ft(this._def)})}catch(e){const s=typeof e=="function"?e:()=>e;return new Gx({...ft(this._def),innerType:this,catchValue:s,typeName:st.ZodCatch})}describe(e){const s=this.constructor;return new s({...this._def,description:e})}pipe(e){return nb.create(this,e)}readonly(){return Xx.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const aO=/^c[^\s-]{8,}$/i,rO=/^[0-9a-z]+$/,nO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oO=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iO=/^[a-z0-9_-]{21}$/i,lO=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,cO=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uO=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dO="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Q0;const fO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hO=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,pO=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gO=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xO=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,LE="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vO=new RegExp(`^${LE}$`);function BE(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const s=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${s}`}function bO(t){return new RegExp(`^${BE(t)}$`)}function yO(t){let e=`${LE}T${BE(t)}`;const s=[];return s.push(t.local?"Z?":"Z"),t.offset&&s.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${s.join("|")})`,new RegExp(`^${e}$`)}function wO(t,e){return!!((e==="v4"||!e)&&fO.test(t)||(e==="v6"||!e)&&mO.test(t))}function _O(t,e){if(!lO.test(t))return!1;try{const[s]=t.split("."),a=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),n=JSON.parse(atob(a));return!(typeof n!="object"||n===null||"typ"in n&&(n==null?void 0:n.typ)!=="JWT"||!n.alg||e&&n.alg!==e)}catch{return!1}}function jO(t,e){return!!((e==="v4"||!e)&&hO.test(t)||(e==="v6"||!e)&&pO.test(t))}class go extends Nt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==qe.string){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:qe.string,received:i.parsedType}),tt}const a=new $a;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),a.dirty());else if(i.kind==="length"){const c=e.data.length>i.value,u=e.data.length<i.value;(c||u)&&(n=this._getOrReturnCtx(e,n),c?Me(n,{code:Ee.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&Me(n,{code:Ee.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),a.dirty())}else if(i.kind==="email")uO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"email",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="emoji")Q0||(Q0=new RegExp(dO,"u")),Q0.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"emoji",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="uuid")oO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"uuid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="nanoid")iO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"nanoid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid")aO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"cuid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="cuid2")rO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"cuid2",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="ulid")nO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"ulid",code:Ee.invalid_string,message:i.message}),a.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),Me(n,{validation:"url",code:Ee.invalid_string,message:i.message}),a.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"regex",code:Ee.invalid_string,message:i.message}),a.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),a.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:{startsWith:i.value},message:i.message}),a.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:{endsWith:i.value},message:i.message}),a.dirty()):i.kind==="datetime"?yO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:"datetime",message:i.message}),a.dirty()):i.kind==="date"?vO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:"date",message:i.message}),a.dirty()):i.kind==="time"?bO(i).test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.invalid_string,validation:"time",message:i.message}),a.dirty()):i.kind==="duration"?cO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"duration",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="ip"?wO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"ip",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="jwt"?_O(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"jwt",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="cidr"?jO(e.data,i.version)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"cidr",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="base64"?gO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"base64",code:Ee.invalid_string,message:i.message}),a.dirty()):i.kind==="base64url"?xO.test(e.data)||(n=this._getOrReturnCtx(e,n),Me(n,{validation:"base64url",code:Ee.invalid_string,message:i.message}),a.dirty()):Et.assertNever(i);return{status:a.value,value:e.data}}_regex(e,s,a){return this.refinement(n=>e.test(n),{validation:s,code:Ee.invalid_string,...Ue.errToObj(a)})}_addCheck(e){return new go({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ue.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ue.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ue.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ue.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Ue.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Ue.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Ue.errToObj(e)})}regex(e,s){return this._addCheck({kind:"regex",regex:e,...Ue.errToObj(s)})}includes(e,s){return this._addCheck({kind:"includes",value:e,position:s==null?void 0:s.position,...Ue.errToObj(s==null?void 0:s.message)})}startsWith(e,s){return this._addCheck({kind:"startsWith",value:e,...Ue.errToObj(s)})}endsWith(e,s){return this._addCheck({kind:"endsWith",value:e,...Ue.errToObj(s)})}min(e,s){return this._addCheck({kind:"min",value:e,...Ue.errToObj(s)})}max(e,s){return this._addCheck({kind:"max",value:e,...Ue.errToObj(s)})}length(e,s){return this._addCheck({kind:"length",value:e,...Ue.errToObj(s)})}nonempty(e){return this.min(1,Ue.errToObj(e))}trim(){return new go({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxLength(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}go.create=t=>new go({checks:[],typeName:st.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...ft(t)});function NO(t,e){const s=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,n=s>a?s:a,i=Number.parseInt(t.toFixed(n).replace(".","")),c=Number.parseInt(e.toFixed(n).replace(".",""));return i%c/10**n}class gd extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==qe.number){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:qe.number,received:i.parsedType}),tt}let a;const n=new $a;for(const i of this._def.checks)i.kind==="int"?Et.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?NO(e.data,i.value)!==0&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.not_finite,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,a,n){return new gd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:Ue.toString(n)}]})}_addCheck(e){return new gd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}finite(e){return this._addCheck({kind:"finite",message:Ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ue.toString(e)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Et.isInteger(e.value))}get isFinite(){let e=null,s=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(s===null||a.value>s)&&(s=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(s)&&Number.isFinite(e)}}gd.create=t=>new gd({checks:[],typeName:st.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ft(t)});class xd extends Nt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==qe.bigint)return this._getInvalidInput(e);let a;const n=new $a;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),Me(a,{code:Ee.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Et.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){const s=this._getOrReturnCtx(e);return Me(s,{code:Ee.invalid_type,expected:qe.bigint,received:s.parsedType}),tt}gte(e,s){return this.setLimit("min",e,!0,Ue.toString(s))}gt(e,s){return this.setLimit("min",e,!1,Ue.toString(s))}lte(e,s){return this.setLimit("max",e,!0,Ue.toString(s))}lt(e,s){return this.setLimit("max",e,!1,Ue.toString(s))}setLimit(e,s,a,n){return new xd({...this._def,checks:[...this._def.checks,{kind:e,value:s,inclusive:a,message:Ue.toString(n)}]})}_addCheck(e){return new xd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}multipleOf(e,s){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(s)})}get minValue(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e}get maxValue(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e}}xd.create=t=>new xd({checks:[],typeName:st.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...ft(t)});class oN extends Nt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==qe.boolean){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.boolean,received:a.parsedType}),tt}return rr(e.data)}}oN.create=t=>new oN({typeName:st.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ft(t)});class Jh extends Nt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==qe.date){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_type,expected:qe.date,received:i.parsedType}),tt}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:Ee.invalid_date}),tt}const a=new $a;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),a.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),Me(n,{code:Ee.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),a.dirty()):Et.assertNever(i);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Jh({...this._def,checks:[...this._def.checks,e]})}min(e,s){return this._addCheck({kind:"min",value:e.getTime(),message:Ue.toString(s)})}max(e,s){return this._addCheck({kind:"max",value:e.getTime(),message:Ue.toString(s)})}get minDate(){let e=null;for(const s of this._def.checks)s.kind==="min"&&(e===null||s.value>e)&&(e=s.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const s of this._def.checks)s.kind==="max"&&(e===null||s.value<e)&&(e=s.value);return e!=null?new Date(e):null}}Jh.create=t=>new Jh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:st.ZodDate,...ft(t)});class iN extends Nt{_parse(e){if(this._getType(e)!==qe.symbol){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.symbol,received:a.parsedType}),tt}return rr(e.data)}}iN.create=t=>new iN({typeName:st.ZodSymbol,...ft(t)});class lN extends Nt{_parse(e){if(this._getType(e)!==qe.undefined){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.undefined,received:a.parsedType}),tt}return rr(e.data)}}lN.create=t=>new lN({typeName:st.ZodUndefined,...ft(t)});class cN extends Nt{_parse(e){if(this._getType(e)!==qe.null){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.null,received:a.parsedType}),tt}return rr(e.data)}}cN.create=t=>new cN({typeName:st.ZodNull,...ft(t)});class uN extends Nt{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}}uN.create=t=>new uN({typeName:st.ZodAny,...ft(t)});class dN extends Nt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}}dN.create=t=>new dN({typeName:st.ZodUnknown,...ft(t)});class Ao extends Nt{_parse(e){const s=this._getOrReturnCtx(e);return Me(s,{code:Ee.invalid_type,expected:qe.never,received:s.parsedType}),tt}}Ao.create=t=>new Ao({typeName:st.ZodNever,...ft(t)});class fN extends Nt{_parse(e){if(this._getType(e)!==qe.undefined){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.void,received:a.parsedType}),tt}return rr(e.data)}}fN.create=t=>new fN({typeName:st.ZodVoid,...ft(t)});class zr extends Nt{_parse(e){const{ctx:s,status:a}=this._processInputParams(e),n=this._def;if(s.parsedType!==qe.array)return Me(s,{code:Ee.invalid_type,expected:qe.array,received:s.parsedType}),tt;if(n.exactLength!==null){const c=s.data.length>n.exactLength.value,u=s.data.length<n.exactLength.value;(c||u)&&(Me(s,{code:c?Ee.too_big:Ee.too_small,minimum:u?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),a.dirty())}if(n.minLength!==null&&s.data.length<n.minLength.value&&(Me(s,{code:Ee.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),a.dirty()),n.maxLength!==null&&s.data.length>n.maxLength.value&&(Me(s,{code:Ee.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),a.dirty()),s.common.async)return Promise.all([...s.data].map((c,u)=>n.type._parseAsync(new Co(s,c,s.path,u)))).then(c=>$a.mergeArray(a,c));const i=[...s.data].map((c,u)=>n.type._parseSync(new Co(s,c,s.path,u)));return $a.mergeArray(a,i)}get element(){return this._def.type}min(e,s){return new zr({...this._def,minLength:{value:e,message:Ue.toString(s)}})}max(e,s){return new zr({...this._def,maxLength:{value:e,message:Ue.toString(s)}})}length(e,s){return new zr({...this._def,exactLength:{value:e,message:Ue.toString(s)}})}nonempty(e){return this.min(1,e)}}zr.create=(t,e)=>new zr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:st.ZodArray,...ft(e)});function zl(t){if(t instanceof ps){const e={};for(const s in t.shape){const a=t.shape[s];e[s]=wo.create(zl(a))}return new ps({...t._def,shape:()=>e})}else return t instanceof zr?new zr({...t._def,type:zl(t.element)}):t instanceof wo?wo.create(zl(t.unwrap())):t instanceof uc?uc.create(zl(t.unwrap())):t instanceof Si?Si.create(t.items.map(e=>zl(e))):t}class ps extends Nt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),s=Et.objectKeys(e);return this._cached={shape:e,keys:s},this._cached}_parse(e){if(this._getType(e)!==qe.object){const h=this._getOrReturnCtx(e);return Me(h,{code:Ee.invalid_type,expected:qe.object,received:h.parsedType}),tt}const{status:a,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Ao&&this._def.unknownKeys==="strip"))for(const h in n.data)c.includes(h)||u.push(h);const f=[];for(const h of c){const p=i[h],g=n.data[h];f.push({key:{status:"valid",value:h},value:p._parse(new Co(n,g,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof Ao){const h=this._def.unknownKeys;if(h==="passthrough")for(const p of u)f.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(h==="strict")u.length>0&&(Me(n,{code:Ee.unrecognized_keys,keys:u}),a.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const p of u){const g=n.data[p];f.push({key:{status:"valid",value:p},value:h._parse(new Co(n,g,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const h=[];for(const p of f){const g=await p.key,x=await p.value;h.push({key:g,value:x,alwaysSet:p.alwaysSet})}return h}).then(h=>$a.mergeObjectSync(a,h)):$a.mergeObjectSync(a,f)}get shape(){return this._def.shape()}strict(e){return Ue.errToObj,new ps({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(s,a)=>{var i,c;const n=((c=(i=this._def).errorMap)==null?void 0:c.call(i,s,a).message)??a.defaultError;return s.code==="unrecognized_keys"?{message:Ue.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ps({...this._def,unknownKeys:"strip"})}passthrough(){return new ps({...this._def,unknownKeys:"passthrough"})}extend(e){return new ps({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ps({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:st.ZodObject})}setKey(e,s){return this.augment({[e]:s})}catchall(e){return new ps({...this._def,catchall:e})}pick(e){const s={};for(const a of Et.objectKeys(e))e[a]&&this.shape[a]&&(s[a]=this.shape[a]);return new ps({...this._def,shape:()=>s})}omit(e){const s={};for(const a of Et.objectKeys(this.shape))e[a]||(s[a]=this.shape[a]);return new ps({...this._def,shape:()=>s})}deepPartial(){return zl(this)}partial(e){const s={};for(const a of Et.objectKeys(this.shape)){const n=this.shape[a];e&&!e[a]?s[a]=n:s[a]=n.optional()}return new ps({...this._def,shape:()=>s})}required(e){const s={};for(const a of Et.objectKeys(this.shape))if(e&&!e[a])s[a]=this.shape[a];else{let i=this.shape[a];for(;i instanceof wo;)i=i._def.innerType;s[a]=i}return new ps({...this._def,shape:()=>s})}keyof(){return IE(Et.objectKeys(this.shape))}}ps.create=(t,e)=>new ps({shape:()=>t,unknownKeys:"strip",catchall:Ao.create(),typeName:st.ZodObject,...ft(e)});ps.strictCreate=(t,e)=>new ps({shape:()=>t,unknownKeys:"strict",catchall:Ao.create(),typeName:st.ZodObject,...ft(e)});ps.lazycreate=(t,e)=>new ps({shape:t,unknownKeys:"strip",catchall:Ao.create(),typeName:st.ZodObject,...ft(e)});class em extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a=this._def.options;function n(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return s.common.issues.push(...u.ctx.common.issues),u.result;const c=i.map(u=>new Kr(u.ctx.common.issues));return Me(s,{code:Ee.invalid_union,unionErrors:c}),tt}if(s.common.async)return Promise.all(a.map(async i=>{const c={...s,common:{...s.common,issues:[]},parent:null};return{result:await i._parseAsync({data:s.data,path:s.path,parent:c}),ctx:c}})).then(n);{let i;const c=[];for(const f of a){const h={...s,common:{...s.common,issues:[]},parent:null},p=f._parseSync({data:s.data,path:s.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!i&&(i={result:p,ctx:h}),h.common.issues.length&&c.push(h.common.issues)}if(i)return s.common.issues.push(...i.ctx.common.issues),i.result;const u=c.map(f=>new Kr(f));return Me(s,{code:Ee.invalid_union,unionErrors:u}),tt}}get options(){return this._def.options}}em.create=(t,e)=>new em({options:t,typeName:st.ZodUnion,...ft(e)});function zx(t,e){const s=io(t),a=io(e);if(t===e)return{valid:!0,data:t};if(s===qe.object&&a===qe.object){const n=Et.objectKeys(e),i=Et.objectKeys(t).filter(u=>n.indexOf(u)!==-1),c={...t,...e};for(const u of i){const f=zx(t[u],e[u]);if(!f.valid)return{valid:!1};c[u]=f.data}return{valid:!0,data:c}}else if(s===qe.array&&a===qe.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<t.length;i++){const c=t[i],u=e[i],f=zx(c,u);if(!f.valid)return{valid:!1};n.push(f.data)}return{valid:!0,data:n}}else return s===qe.date&&a===qe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class tm extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=(i,c)=>{if(aN(i)||aN(c))return tt;const u=zx(i.value,c.value);return u.valid?((rN(i)||rN(c))&&s.dirty(),{status:s.value,value:u.data}):(Me(a,{code:Ee.invalid_intersection_types}),tt)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}tm.create=(t,e,s)=>new tm({left:t,right:e,typeName:st.ZodIntersection,...ft(s)});class Si extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.array)return Me(a,{code:Ee.invalid_type,expected:qe.array,received:a.parsedType}),tt;if(a.data.length<this._def.items.length)return Me(a,{code:Ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt;!this._def.rest&&a.data.length>this._def.items.length&&(Me(a,{code:Ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const i=[...a.data].map((c,u)=>{const f=this._def.items[u]||this._def.rest;return f?f._parse(new Co(a,c,a.path,u)):null}).filter(c=>!!c);return a.common.async?Promise.all(i).then(c=>$a.mergeArray(s,c)):$a.mergeArray(s,i)}get items(){return this._def.items}rest(e){return new Si({...this._def,rest:e})}}Si.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Si({items:t,typeName:st.ZodTuple,rest:null,...ft(e)})};class hN extends Nt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.map)return Me(a,{code:Ee.invalid_type,expected:qe.map,received:a.parsedType}),tt;const n=this._def.keyType,i=this._def.valueType,c=[...a.data.entries()].map(([u,f],h)=>({key:n._parse(new Co(a,u,a.path,[h,"key"])),value:i._parse(new Co(a,f,a.path,[h,"value"]))}));if(a.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const f of c){const h=await f.key,p=await f.value;if(h.status==="aborted"||p.status==="aborted")return tt;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}})}else{const u=new Map;for(const f of c){const h=f.key,p=f.value;if(h.status==="aborted"||p.status==="aborted")return tt;(h.status==="dirty"||p.status==="dirty")&&s.dirty(),u.set(h.value,p.value)}return{status:s.value,value:u}}}}hN.create=(t,e,s)=>new hN({valueType:e,keyType:t,typeName:st.ZodMap,...ft(s)});class vd extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.parsedType!==qe.set)return Me(a,{code:Ee.invalid_type,expected:qe.set,received:a.parsedType}),tt;const n=this._def;n.minSize!==null&&a.data.size<n.minSize.value&&(Me(a,{code:Ee.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),s.dirty()),n.maxSize!==null&&a.data.size>n.maxSize.value&&(Me(a,{code:Ee.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),s.dirty());const i=this._def.valueType;function c(f){const h=new Set;for(const p of f){if(p.status==="aborted")return tt;p.status==="dirty"&&s.dirty(),h.add(p.value)}return{status:s.value,value:h}}const u=[...a.data.values()].map((f,h)=>i._parse(new Co(a,f,a.path,h)));return a.common.async?Promise.all(u).then(f=>c(f)):c(u)}min(e,s){return new vd({...this._def,minSize:{value:e,message:Ue.toString(s)}})}max(e,s){return new vd({...this._def,maxSize:{value:e,message:Ue.toString(s)}})}size(e,s){return this.min(e,s).max(e,s)}nonempty(e){return this.min(1,e)}}vd.create=(t,e)=>new vd({valueType:t,minSize:null,maxSize:null,typeName:st.ZodSet,...ft(e)});class mN extends Nt{get schema(){return this._def.getter()}_parse(e){const{ctx:s}=this._processInputParams(e);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}mN.create=(t,e)=>new mN({getter:t,typeName:st.ZodLazy,...ft(e)});class pN extends Nt{_parse(e){if(e.data!==this._def.value){const s=this._getOrReturnCtx(e);return Me(s,{received:s.data,code:Ee.invalid_literal,expected:this._def.value}),tt}return{status:"valid",value:e.data}}get value(){return this._def.value}}pN.create=(t,e)=>new pN({value:t,typeName:st.ZodLiteral,...ft(e)});function IE(t,e){return new lc({values:t,typeName:st.ZodEnum,...ft(e)})}class lc extends Nt{_parse(e){if(typeof e.data!="string"){const s=this._getOrReturnCtx(e),a=this._def.values;return Me(s,{expected:Et.joinValues(a),received:s.parsedType,code:Ee.invalid_type}),tt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const s=this._getOrReturnCtx(e),a=this._def.values;return Me(s,{received:s.data,code:Ee.invalid_enum_value,options:a}),tt}return rr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const s of this._def.values)e[s]=s;return e}get Values(){const e={};for(const s of this._def.values)e[s]=s;return e}get Enum(){const e={};for(const s of this._def.values)e[s]=s;return e}extract(e,s=this._def){return lc.create(e,{...this._def,...s})}exclude(e,s=this._def){return lc.create(this.options.filter(a=>!e.includes(a)),{...this._def,...s})}}lc.create=IE;class Fx extends Nt{_parse(e){const s=Et.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==qe.string&&a.parsedType!==qe.number){const n=Et.objectValues(s);return Me(a,{expected:Et.joinValues(n),received:a.parsedType,code:Ee.invalid_type}),tt}if(this._cache||(this._cache=new Set(Et.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const n=Et.objectValues(s);return Me(a,{received:a.data,code:Ee.invalid_enum_value,options:n}),tt}return rr(e.data)}get enum(){return this._def.values}}Fx.create=(t,e)=>new Fx({values:t,typeName:st.ZodNativeEnum,...ft(e)});class sm extends Nt{unwrap(){return this._def.type}_parse(e){const{ctx:s}=this._processInputParams(e);if(s.parsedType!==qe.promise&&s.common.async===!1)return Me(s,{code:Ee.invalid_type,expected:qe.promise,received:s.parsedType}),tt;const a=s.parsedType===qe.promise?s.data:Promise.resolve(s.data);return rr(a.then(n=>this._def.type.parseAsync(n,{path:s.path,errorMap:s.common.contextualErrorMap})))}}sm.create=(t,e)=>new sm({type:t,typeName:st.ZodPromise,...ft(e)});class cc extends Nt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===st.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:s,ctx:a}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{Me(a,c),c.fatal?s.abort():s.dirty()},get path(){return a.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const c=n.transform(a.data,i);if(a.common.async)return Promise.resolve(c).then(async u=>{if(s.value==="aborted")return tt;const f=await this._def.schema._parseAsync({data:u,path:a.path,parent:a});return f.status==="aborted"?tt:f.status==="dirty"||s.value==="dirty"?Xu(f.value):f});{if(s.value==="aborted")return tt;const u=this._def.schema._parseSync({data:c,path:a.path,parent:a});return u.status==="aborted"?tt:u.status==="dirty"||s.value==="dirty"?Xu(u.value):u}}if(n.type==="refinement"){const c=u=>{const f=n.refinement(u,i);if(a.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(a.common.async===!1){const u=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return u.status==="aborted"?tt:(u.status==="dirty"&&s.dirty(),c(u.value),{status:s.value,value:u.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(u=>u.status==="aborted"?tt:(u.status==="dirty"&&s.dirty(),c(u.value).then(()=>({status:s.value,value:u.value}))))}if(n.type==="transform")if(a.common.async===!1){const c=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!ic(c))return tt;const u=n.transform(c.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:u}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(c=>ic(c)?Promise.resolve(n.transform(c.value,i)).then(u=>({status:s.value,value:u})):tt);Et.assertNever(n)}}cc.create=(t,e,s)=>new cc({schema:t,typeName:st.ZodEffects,effect:e,...ft(s)});cc.createWithPreprocess=(t,e,s)=>new cc({schema:e,effect:{type:"preprocess",transform:t},typeName:st.ZodEffects,...ft(s)});class wo extends Nt{_parse(e){return this._getType(e)===qe.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wo.create=(t,e)=>new wo({innerType:t,typeName:st.ZodOptional,...ft(e)});class uc extends Nt{_parse(e){return this._getType(e)===qe.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}uc.create=(t,e)=>new uc({innerType:t,typeName:st.ZodNullable,...ft(e)});class Hx extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e);let a=s.data;return s.parsedType===qe.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}Hx.create=(t,e)=>new Hx({innerType:t,typeName:st.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ft(e)});class Gx extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a={...s,common:{...s.common,issues:[]}},n=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Qh(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Kr(a.common.issues)},input:a.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Kr(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Gx.create=(t,e)=>new Gx({innerType:t,typeName:st.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ft(e)});class gN extends Nt{_parse(e){if(this._getType(e)!==qe.nan){const a=this._getOrReturnCtx(e);return Me(a,{code:Ee.invalid_type,expected:qe.nan,received:a.parsedType}),tt}return{status:"valid",value:e.data}}}gN.create=t=>new gN({typeName:st.ZodNaN,...ft(t)});class SO extends Nt{_parse(e){const{ctx:s}=this._processInputParams(e),a=s.data;return this._def.type._parse({data:a,path:s.path,parent:s})}unwrap(){return this._def.type}}class nb extends Nt{_parse(e){const{status:s,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?tt:i.status==="dirty"?(s.dirty(),Xu(i.value)):this._def.out._parseAsync({data:i.value,path:a.path,parent:a})})();{const n=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?tt:n.status==="dirty"?(s.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:a.path,parent:a})}}static create(e,s){return new nb({in:e,out:s,typeName:st.ZodPipeline})}}class Xx extends Nt{_parse(e){const s=this._def.innerType._parse(e),a=n=>(ic(n)&&(n.value=Object.freeze(n.value)),n);return Qh(s)?s.then(n=>a(n)):a(s)}unwrap(){return this._def.innerType}}Xx.create=(t,e)=>new Xx({innerType:t,typeName:st.ZodReadonly,...ft(e)});var st;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(st||(st={}));const Ws=go.create;Ao.create;zr.create;const Lm=ps.create;em.create;tm.create;Si.create;const EO=lc.create,CO=Fx.create;sm.create;wo.create;uc.create;const AO=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Us(async()=>{const{default:a}=await Promise.resolve().then(()=>_c);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)};class ob extends Error{constructor(e,s="FunctionsError",a){super(e),this.name=s,this.context=a}}class kO extends ob{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class TO extends ob{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class RO extends ob{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Yx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Yx||(Yx={}));var MO=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class PO{constructor(e,{headers:s={},customFetch:a,region:n=Yx.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=AO(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var a;return MO(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:c}=s;let u={},{region:f}=s;f||(f=this.region),f&&f!=="any"&&(u["x-region"]=f);let h;c&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=c):typeof c=="string"?(u["Content-Type"]="text/plain",h=c):typeof FormData<"u"&&c instanceof FormData?h=c:(u["Content-Type"]="application/json",h=JSON.stringify(c)));const p=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),n),body:h}).catch(_=>{throw new kO(_)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new TO(p);if(!p.ok)throw new RO(p);let x=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield p.json():x==="application/octet-stream"?y=yield p.blob():x==="text/event-stream"?y=p:x==="multipart/form-data"?y=yield p.formData():y=yield p.text(),{data:y,error:null}}catch(n){return{data:null,error:n}}})}}var Cs={},El={},Cl={},Al={},kl={},Tl={},DO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dc=DO();const OO=dc.fetch,VE=dc.fetch.bind(dc),qE=dc.Headers,$O=dc.Request,LO=dc.Response,_c=Object.freeze(Object.defineProperty({__proto__:null,Headers:qE,Request:$O,Response:LO,default:VE,fetch:OO},Symbol.toStringTag,{value:"Module"})),BO=D3(_c);var nh={},xN;function UE(){if(xN)return nh;xN=1,Object.defineProperty(nh,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return nh.default=t,nh}var vN;function zE(){if(vN)return Tl;vN=1;var t=Tl&&Tl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tl,"__esModule",{value:!0});const e=t(BO),s=t(UE());class a{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,c){return this.headers=Object.assign({},this.headers),this.headers[i]=c,this}then(i,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let f=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,g,x;let y=null,_=null,j=null,N=h.status,S=h.statusText;if(h.ok){if(this.method!=="HEAD"){const R=await h.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=R:_=JSON.parse(R))}const E=(p=this.headers.Prefer)===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),M=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");E&&M&&M.length>1&&(j=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,j=null,N=406,S="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const E=await h.text();try{y=JSON.parse(E),Array.isArray(y)&&h.status===404&&(_=[],y=null,N=200,S="OK")}catch{h.status===404&&E===""?(N=204,S="No Content"):y={message:E}}if(y&&this.isMaybeSingle&&(!((x=y==null?void 0:y.details)===null||x===void 0)&&x.includes("0 rows"))&&(y=null,N=200,S="OK"),y&&this.shouldThrowOnError)throw new s.default(y)}return{error:y,data:_,count:j,status:N,statusText:S}});return this.shouldThrowOnError||(f=f.catch(h=>{var p,g,x;return{error:{message:`${(p=h==null?void 0:h.name)!==null&&p!==void 0?p:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(g=h==null?void 0:h.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),f.then(i,c)}returns(){return this}overrideTypes(){return this}}return Tl.default=a,Tl}var bN;function FE(){if(bN)return kl;bN=1;var t=kl&&kl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(kl,"__esModule",{value:!0});const e=t(zE());class s extends e.default{select(n){let i=!1;const c=(n??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",c),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:c,foreignTable:u,referencedTable:f=u}={}){const h=f?`${f}.order`:"order",p=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${p?`${p},`:""}${n}.${i?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:c=i}={}){const u=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(u,`${n}`),this}range(n,i,{foreignTable:c,referencedTable:u=c}={}){const f=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(f,`${n}`),this.url.searchParams.set(h,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:c=!1,buffers:u=!1,wal:f=!1,format:h="text"}={}){var p;const g=[n?"analyze":null,i?"verbose":null,c?"settings":null,u?"buffers":null,f?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.Accept)!==null&&p!==void 0?p:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${g};`,h==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return kl.default=s,kl}var yN;function ib(){if(yN)return Al;yN=1;var t=Al&&Al.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Al,"__esModule",{value:!0});const e=t(FE());class s extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const c=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(n,`in.(${c})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:c,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const h=c===void 0?"":`(${c})`;return this.url.searchParams.append(n,`${f}fts${h}.${i}`),this}match(n){return Object.entries(n).forEach(([i,c])=>{this.url.searchParams.append(i,`eq.${c}`)}),this}not(n,i,c){return this.url.searchParams.append(n,`not.${i}.${c}`),this}or(n,{foreignTable:i,referencedTable:c=i}={}){const u=c?`${c}.or`:"or";return this.url.searchParams.append(u,`(${n})`),this}filter(n,i,c){return this.url.searchParams.append(n,`${i}.${c}`),this}}return Al.default=s,Al}var wN;function HE(){if(wN)return Cl;wN=1;var t=Cl&&Cl.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Cl,"__esModule",{value:!0});const e=t(ib());class s{constructor(n,{headers:i={},schema:c,fetch:u}){this.url=n,this.headers=i,this.schema=c,this.fetch=u}select(n,{head:i=!1,count:c}={}){const u=i?"HEAD":"GET";let f=!1;const h=(n??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),c&&(this.headers.Prefer=`count=${c}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:c=!0}={}){const u="POST",f=[];if(this.headers.Prefer&&f.push(this.headers.Prefer),i&&f.push(`count=${i}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(n)){const h=n.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(h.length>0){const p=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:c=!1,count:u,defaultToNull:f=!0}={}){const h="POST",p=[`resolution=${c?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),f||p.push("missing=default"),this.headers.Prefer=p.join(","),Array.isArray(n)){const g=n.reduce((x,y)=>x.concat(Object.keys(y)),[]);if(g.length>0){const x=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const c="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),i&&u.push(`count=${i}`),this.headers.Prefer=u.join(","),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",c=[];return n&&c.push(`count=${n}`),this.headers.Prefer&&c.unshift(this.headers.Prefer),this.headers.Prefer=c.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Cl.default=s,Cl}var ku={},Tu={},_N;function IO(){return _N||(_N=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.version=void 0,Tu.version="0.0.0-automated"),Tu}var jN;function VO(){if(jN)return ku;jN=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.DEFAULT_HEADERS=void 0;const t=IO();return ku.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ku}var NN;function qO(){if(NN)return El;NN=1;var t=El&&El.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(El,"__esModule",{value:!0});const e=t(HE()),s=t(ib()),a=VO();class n{constructor(c,{headers:u={},schema:f,fetch:h}={}){this.url=c,this.headers=Object.assign(Object.assign({},a.DEFAULT_HEADERS),u),this.schemaName=f,this.fetch=h}from(c){const u=new URL(`${this.url}/${c}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new n(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:f=!1,get:h=!1,count:p}={}){let g;const x=new URL(`${this.url}/rpc/${c}`);let y;f||h?(g=f?"HEAD":"GET",Object.entries(u).filter(([j,N])=>N!==void 0).map(([j,N])=>[j,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([j,N])=>{x.searchParams.append(j,N)})):(g="POST",y=u);const _=Object.assign({},this.headers);return p&&(_.Prefer=`count=${p}`),new s.default({method:g,url:x,headers:_,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return El.default=n,El}var SN;function UO(){if(SN)return Cs;SN=1;var t=Cs&&Cs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.PostgrestError=Cs.PostgrestBuilder=Cs.PostgrestTransformBuilder=Cs.PostgrestFilterBuilder=Cs.PostgrestQueryBuilder=Cs.PostgrestClient=void 0;const e=t(qO());Cs.PostgrestClient=e.default;const s=t(HE());Cs.PostgrestQueryBuilder=s.default;const a=t(ib());Cs.PostgrestFilterBuilder=a.default;const n=t(FE());Cs.PostgrestTransformBuilder=n.default;const i=t(zE());Cs.PostgrestBuilder=i.default;const c=t(UE());return Cs.PostgrestError=c.default,Cs.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:c.default},Cs}var zO=UO();const FO=Tm(zO),{PostgrestClient:HO,PostgrestQueryBuilder:jW,PostgrestFilterBuilder:NW,PostgrestTransformBuilder:SW,PostgrestBuilder:EW,PostgrestError:CW}=FO;let Kx;typeof window>"u"?Kx=require("ws"):Kx=window.WebSocket;const GO="2.11.10",XO={"X-Client-Info":`realtime-js/${GO}`},YO="1.0.0",GE=1e4,KO=1e3;var sc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(sc||(sc={}));var oa;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(oa||(oa={}));var gr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gr||(gr={}));var Wx;(function(t){t.websocket="websocket"})(Wx||(Wx={}));var fi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(fi||(fi={}));class WO{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,s,a)}_decodeBroadcast(e,s,a){const n=s.getUint8(1),i=s.getUint8(2);let c=this.HEADER_LENGTH+2;const u=a.decode(e.slice(c,c+n));c=c+n;const f=a.decode(e.slice(c,c+i));c=c+i;const h=JSON.parse(a.decode(e.slice(c,e.byteLength)));return{ref:null,topic:u,event:f,payload:h}}}let XE=class{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const EN=(t,e,s={})=>{var a;const n=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((i,c)=>(i[c]=ZO(c,t,e,n),i),{})},ZO=(t,e,s,a)=>{const n=e.find(u=>u.name===t),i=n==null?void 0:n.type,c=s[t];return i&&!a.includes(i)?YE(i,c):Zx(c)},YE=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return t$(e,s)}switch(t){case Ut.bool:return QO(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return JO(e);case Ut.json:case Ut.jsonb:return e$(e);case Ut.timestamp:return s$(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Zx(e);default:return Zx(e)}},Zx=t=>t,QO=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},JO=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},e$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},t$=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,a=t[s];if(t[0]==="{"&&a==="}"){let i;const c=t.slice(1,s);try{i=JSON.parse("["+c+"]")}catch{i=c?c.split(","):[]}return i.map(u=>YE(e,u))}return t},s$=t=>typeof t=="string"?t.replace(" ","T"):t,KE=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class J0{constructor(e,s,a={},n=GE){this.channel=e,this.event=s,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var a;return this._hasReceived(e)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var CN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(CN||(CN={}));class ed{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ed.syncState(this.state,n,i,c),this.pendingDiffs.forEach(f=>{this.state=ed.syncDiff(this.state,f,i,c)}),this.pendingDiffs=[],u()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:c,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=ed.syncDiff(this.state,n,i,c),u())}),this.onJoin((n,i,c)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:c})}),this.onLeave((n,i,c)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,a,n){const i=this.cloneDeep(e),c=this.transformState(s),u={},f={};return this.map(i,(h,p)=>{c[h]||(f[h]=p)}),this.map(c,(h,p)=>{const g=i[h];if(g){const x=p.map(N=>N.presence_ref),y=g.map(N=>N.presence_ref),_=p.filter(N=>y.indexOf(N.presence_ref)<0),j=g.filter(N=>x.indexOf(N.presence_ref)<0);_.length>0&&(u[h]=_),j.length>0&&(f[h]=j)}else u[h]=p}),this.syncDiff(i,{joins:u,leaves:f},a,n)}static syncDiff(e,s,a,n){const{joins:i,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(u,f)=>{var h;const p=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(f),p.length>0){const g=e[u].map(y=>y.presence_ref),x=p.filter(y=>g.indexOf(y.presence_ref)<0);e[u].unshift(...x)}a(u,p,f)}),this.map(c,(u,f)=>{let h=e[u];if(!h)return;const p=f.map(g=>g.presence_ref);h=h.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=h,n(u,h,f),h.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(a=>s(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,a)=>{const n=e[a];return"metas"in n?s[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[a]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var AN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(AN||(AN={}));var kN;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(kN||(kN={}));var wn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(wn||(wn={}));class lb{constructor(e,s={config:{}},a){this.topic=e,this.params=s,this.socket=a,this.bindings={},this.state=oa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new J0(this,gr.join,this.params,this.timeout),this.rejoinTimer=new XE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=oa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=oa.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=oa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new ed(this),this.broadcastEndpointURL=KE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var a,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:c,private:u}}=this.params;this._onError(p=>e==null?void 0:e(wn.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(wn.CLOSED));const f={},h={broadcast:i,presence:c,postgres_changes:(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(p=>p.filter))!==null&&n!==void 0?n:[],private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(wn.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,y=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,_=[];for(let j=0;j<y;j++){const N=x[j],{filter:{event:S,schema:C,table:E,filter:M}}=N,R=p&&p[j];if(R&&R.event===S&&R.schema===C&&R.table===E&&R.filter===M)_.push(Object.assign(Object.assign({},N),{id:R.id}));else{this.unsubscribe(),this.state=oa.errored,e==null||e(wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(wn.SUBSCRIBED);return}}).receive("error",p=>{this.state=oa.errored,e==null||e(wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,a){return this._on(e,s,a)}async send(e,s={}){var a,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:c,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var c,u,f;const h=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(c=this.params)===null||c===void 0?void 0:c.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=oa.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(a=>{const n=new J0(this,gr.leave,{},e);n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),c=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),c}_push(e,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new J0(this,e,s,a);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,a){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,a){var n,i;const c=e.toLocaleLowerCase(),{close:u,error:f,leave:h,join:p}=gr;if(a&&[u,f,h,p].indexOf(c)>=0&&a!==this._joinRef())return;let x=this._onMessage(c,s,a);if(s&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(y=>{var _,j,N;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((N=(j=y.filter)===null||j===void 0?void 0:j.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===c}).map(y=>y.callback(x,a)):(i=this.bindings[c])===null||i===void 0||i.filter(y=>{var _,j,N,S,C,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in y){const M=y.id,R=(_=y.filter)===null||_===void 0?void 0:_.event;return M&&((j=s.ids)===null||j===void 0?void 0:j.includes(M))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((N=s.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const M=(C=(S=y==null?void 0:y.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return M==="*"||M===((E=s==null?void 0:s.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===c}).map(y=>{if(typeof x=="object"&&"ids"in x){const _=x.data,{schema:j,table:N,commit_timestamp:S,type:C,errors:E}=_;x=Object.assign(Object.assign({},{schema:j,table:N,commit_timestamp:S,eventType:C,new:{},old:{},errors:E}),this._getPayloadRecords(_))}y.callback(x,a)})}_isClosed(){return this.state===oa.closed}_isJoined(){return this.state===oa.joined}_isJoining(){return this.state===oa.joining}_isLeaving(){return this.state===oa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,a){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const a=e.toLocaleLowerCase();return this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&lb.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const a in e)if(e[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=oa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=EN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=EN(e.columns,e.old_record)),s}}const TN=()=>{},a$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class r${constructor(e,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=XO,this.params={},this.timeout=GE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=TN,this.ref=0,this.logger=TN,this.conn=null,this.sendBuffer=[],this.serializer=new WO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let c;return i?c=i:typeof fetch>"u"?c=(...u)=>Us(async()=>{const{default:f}=await Promise.resolve().then(()=>_c);return{default:f}},void 0).then(({default:f})=>f(...u)):c=fetch,(...u)=>c(...u)},this.endPoint=`${e}/${Wx.websocket}`,this.httpEndpoint=KE(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(a=s==null?void 0:s.params)===null||a===void 0?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,c)=>c(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new XE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Kx),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new n$(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YO}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(a=>a.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(a=>a._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,a){this.logger(e,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case sc.connecting:return fi.Connecting;case sc.open:return fi.Open;case sc.closing:return fi.Closing;default:return fi.Closed}}isConnected(){return this.connectionState()===fi.Open}channel(e,s={config:{}}){const a=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new lb(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:a,payload:n,ref:i}=e,c=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${a} (${i})`,n),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{s&&a.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),a.joinedOnce&&a._isJoined()&&a._push(gr.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(KO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:a,event:n,payload:i,ref:c}=s;a==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${a} ${n} ${c&&"("+c+")"||""}`,i),Array.from(this.channels).filter(u=>u._isMember(a)).forEach(u=>u._trigger(n,i,c)),this.stateChangeCallbacks.message.forEach(u=>u(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const a=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${a}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const a=new Blob([a$],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}}class n${constructor(e,s,a){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=sc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=a.close}}class cb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function As(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class o$ extends cb{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qx extends cb{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var i$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const WE=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Us(async()=>{const{default:a}=await Promise.resolve().then(()=>_c);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},l$=()=>i$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Us(()=>Promise.resolve().then(()=>_c),void 0)).Response:Response}),Jx=t=>{if(Array.isArray(t))return t.map(s=>Jx(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,a])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Jx(a)}),e};var Di=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const ex=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),c$=(t,e,s)=>Di(void 0,void 0,void 0,function*(){const a=yield l$();t instanceof a&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new o$(ex(n),t.status||500))}).catch(n=>{e(new Qx(ex(n),n))}):e(new Qx(ex(t),t))}),u$=(t,e,s,a)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),s))};function Md(t,e,s,a,n,i){return Di(this,void 0,void 0,function*(){return new Promise((c,u)=>{t(s,u$(e,a,n,i)).then(f=>{if(!f.ok)throw f;return a!=null&&a.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>c$(f,u,a))})})}function am(t,e,s,a){return Di(this,void 0,void 0,function*(){return Md(t,"GET",e,s,a)})}function lo(t,e,s,a,n){return Di(this,void 0,void 0,function*(){return Md(t,"POST",e,a,n,s)})}function d$(t,e,s,a,n){return Di(this,void 0,void 0,function*(){return Md(t,"PUT",e,a,n,s)})}function f$(t,e,s,a){return Di(this,void 0,void 0,function*(){return Md(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function ZE(t,e,s,a,n){return Di(this,void 0,void 0,function*(){return Md(t,"DELETE",e,a,n,s)})}var xa=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const h$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class m${constructor(e,s={},a,n){this.url=e,this.headers=s,this.bucketId=a,this.fetch=WE(n)}uploadOrUpdate(e,s,a,n){return xa(this,void 0,void 0,function*(){try{let i;const c=Object.assign(Object.assign({},RN),n);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",c.cacheControl),f&&i.append("metadata",this.encodeMetadata(f))):(i=a,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType,f&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),n!=null&&n.headers&&(u=Object.assign(Object.assign({},u),n.headers));const h=this._removeEmptyFolders(s),p=this._getFinalPath(h),g=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:i,headers:u},c!=null&&c.duplex?{duplex:c.duplex}:{})),x=yield g.json();return g.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(As(i))return{data:null,error:i};throw i}})}upload(e,s,a){return xa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,a)})}uploadToSignedUrl(e,s,a,n){return xa(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),c=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${c}`);u.searchParams.set("token",s);try{let f;const h=Object.assign({upsert:RN.upsert},n),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&a instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),f.append("",a)):typeof FormData<"u"&&a instanceof FormData?(f=a,f.append("cacheControl",h.cacheControl)):(f=a,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType);const g=yield this.fetch(u.toString(),{method:"PUT",body:f,headers:p}),x=yield g.json();return g.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(f){if(As(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,s){return xa(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield lo(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),c=new URL(this.url+i.url),u=c.searchParams.get("token");if(!u)throw new cb("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:u},error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}update(e,s,a){return xa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,a)})}move(e,s,a){return xa(this,void 0,void 0,function*(){try{return{data:yield lo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}copy(e,s,a){return xa(this,void 0,void 0,function*(){try{return{data:{path:(yield lo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,a){return xa(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield lo(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${c}`)},{data:i,error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,a){return xa(this,void 0,void 0,function*(){try{const n=yield lo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${i}`):null})),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}download(e,s){return xa(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),c=i?`?${i}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield am(this.fetch,`${this.url}/${n}/${u}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(As(u))return{data:null,error:u};throw u}})}info(e){return xa(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const a=yield am(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Jx(a),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}exists(e){return xa(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield f$(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(As(a)&&a instanceof Qx){const n=a.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,s){const a=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const u=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});f!==""&&n.push(f);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${a}${h}`)}}}remove(e){return xa(this,void 0,void 0,function*(){try{return{data:yield ZE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}list(e,s,a){return xa(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},h$),s),{prefix:e||""});return{data:yield lo(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(As(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const p$="2.7.1",g$={"X-Client-Info":`storage-js/${p$}`};var Rl=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class x${constructor(e,s={},a){this.url=e,this.headers=Object.assign(Object.assign({},g$),s),this.fetch=WE(a)}listBuckets(){return Rl(this,void 0,void 0,function*(){try{return{data:yield am(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(As(e))return{data:null,error:e};throw e}})}getBucket(e){return Rl(this,void 0,void 0,function*(){try{return{data:yield am(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Rl(this,void 0,void 0,function*(){try{return{data:yield lo(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}updateBucket(e,s){return Rl(this,void 0,void 0,function*(){try{return{data:yield d$(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(As(a))return{data:null,error:a};throw a}})}emptyBucket(e){return Rl(this,void 0,void 0,function*(){try{return{data:yield lo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Rl(this,void 0,void 0,function*(){try{return{data:yield ZE(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(As(s))return{data:null,error:s};throw s}})}}class v$ extends x${constructor(e,s={},a){super(e,s,a)}from(e){return new m$(this.url,this.headers,e,this.fetch)}}const b$="2.50.0";let Yu="";typeof Deno<"u"?Yu="deno":typeof document<"u"?Yu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yu="react-native":Yu="node";const y$={"X-Client-Info":`supabase-js-${Yu}/${b$}`},w$={headers:y$},_$={schema:"public"},j$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N$={};var S$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};const E$=t=>{let e;return t?e=t:typeof fetch>"u"?e=VE:e=fetch,(...s)=>e(...s)},C$=()=>typeof Headers>"u"?qE:Headers,A$=(t,e,s)=>{const a=E$(s),n=C$();return(i,c)=>S$(void 0,void 0,void 0,function*(){var u;const f=(u=yield e())!==null&&u!==void 0?u:t;let h=new n(c==null?void 0:c.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${f}`),a(i,Object.assign(Object.assign({},c),{headers:h}))})};var k$=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};function T$(t){return t.endsWith("/")?t:t+"/"}function R$(t,e){var s,a;const{db:n,auth:i,realtime:c,global:u}=t,{db:f,auth:h,realtime:p,global:g}=e,x={db:Object.assign(Object.assign({},f),n),auth:Object.assign(Object.assign({},h),i),realtime:Object.assign(Object.assign({},p),c),global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(s=g==null?void 0:g.headers)!==null&&s!==void 0?s:{}),(a=u==null?void 0:u.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>k$(this,void 0,void 0,function*(){return""})};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}const QE="2.70.0",Fl=30*1e3,ev=3,tx=ev*Fl,M$="http://localhost:9999",P$="supabase.auth.token",D$={"X-Client-Info":`gotrue-js/${QE}`},tv="X-Supabase-Api-Version",JE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},O$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$$=6e5;class Bm extends Error{constructor(e,s,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L$ extends Bm{constructor(e,s,a){super(e,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function B$(t){return rt(t)&&t.name==="AuthApiError"}class eC extends Bm{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Oo extends Bm{constructor(e,s,a,n){super(e,a,n),this.name=s,this.status=a}}class ro extends Oo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function I$(t){return rt(t)&&t.name==="AuthSessionMissingError"}class oh extends Oo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ih extends Oo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class lh extends Oo{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V$(t){return rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class MN extends Oo{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sv extends Oo{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function sx(t){return rt(t)&&t.name==="AuthRetryableFetchError"}class PN extends Oo{constructor(e,s,a){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class td extends Oo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),DN=` 	
\r=`.split(""),q$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<DN.length;e+=1)t[DN[e].charCodeAt(0)]=-2;for(let e=0;e<rm.length;e+=1)t[rm[e].charCodeAt(0)]=e;return t})();function ON(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(rm[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;s(rm[a]),e.queuedBits-=6}}function tC(t,e,s){const a=q$[t];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function $N(t){const e=[],s=c=>{e.push(String.fromCodePoint(c))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=c=>{F$(c,a,s)};for(let c=0;c<t.length;c+=1)tC(t.charCodeAt(c),n,i);return e.join("")}function U$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function z$(t,e){for(let s=0;s<t.length;s+=1){let a=t.charCodeAt(s);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}U$(a,e)}}function F$(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let a=1;a<6;a+=1)if((t>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function H$(t){const e=[],s={queue:0,queuedBits:0},a=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)tC(t.charCodeAt(n),s,a);return new Uint8Array(e)}function G$(t){const e=[];return z$(t,s=>e.push(s)),new Uint8Array(e)}function X$(t){const e=[],s={queue:0,queuedBits:0},a=n=>{e.push(n)};return t.forEach(n=>ON(n,s,a)),ON(null,s,a),e.join("")}function Y$(t){return Math.round(Date.now()/1e3)+t}function K$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const fr=()=>typeof window<"u"&&typeof document<"u",ni={tested:!1,writable:!1},sd=()=>{if(!fr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ni.tested)return ni.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ni.tested=!0,ni.writable=!0}catch{ni.tested=!0,ni.writable=!1}return ni.writable};function W$(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((a,n)=>{e[n]=a}),e}const sC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Us(async()=>{const{default:a}=await Promise.resolve().then(()=>_c);return{default:a}},void 0).then(({default:a})=>a(...s)):e=fetch,(...s)=>e(...s)},Z$=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",aC=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ch=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},uh=async(t,e)=>{await t.removeItem(e)};class Im{constructor(){this.promise=new Im.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Im.promiseConstructor=Promise;function ax(t){const e=t.split(".");if(e.length!==3)throw new td("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!O$.test(e[a]))throw new td("JWT not in base64url format");return{header:JSON.parse($N(e[0])),payload:JSON.parse($N(e[1])),signature:H$(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q$(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function J$(t,e){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const c=await t(i);if(!e(i,null,c)){a(c);return}}catch(c){if(!e(i,c)){n(c);return}}})()})}function eL(t){return("0"+t.toString(16)).substr(-2)}function tL(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(e),Array.from(e,eL).join("")}async function sL(t){const s=new TextEncoder().encode(t),a=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function aL(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await sL(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ml(t,e,s=!1){const a=tL();let n=a;s&&(n+="/PASSWORD_RECOVERY"),await aC(t,`${e}-code-verifier`,n);const i=await aL(a);return[i,a===i?"plain":"s256"]}const rL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function nL(t){const e=t.headers.get(tv);if(!e||!e.match(rL))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function oL(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function iL(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pl(t){if(!lL.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var cL=function(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s};const ui=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uL=[502,503,504];async function LN(t){var e;if(!Z$(t))throw new sv(ui(t),0);if(uL.includes(t.status))throw new sv(ui(t),t.status);let s;try{s=await t.json()}catch(i){throw new eC(ui(i),i)}let a;const n=nL(t);if(n&&n.getTime()>=JE["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new PN(ui(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new ro}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,c)=>i&&typeof c=="string",!0))throw new PN(ui(s),t.status,s.weak_password.reasons);throw new L$(ui(s),t.status||500,a)}const dL=(t,e,s,a)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),s))};async function gt(t,e,s,a){var n;const i=Object.assign({},a==null?void 0:a.headers);i[tv]||(i[tv]=JE["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const c=(n=a==null?void 0:a.query)!==null&&n!==void 0?n:{};a!=null&&a.redirectTo&&(c.redirect_to=a.redirectTo);const u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await fL(t,e,s+u,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(f):{data:Object.assign({},f),error:null}}async function fL(t,e,s,a,n,i){const c=dL(e,a,n,i);let u;try{u=await t(s,Object.assign({},c))}catch(f){throw console.error(f),new sv(ui(f),0)}if(u.ok||await LN(u),a!=null&&a.noResolveJson)return u;try{return await u.json()}catch(f){await LN(f)}}function yn(t){var e;let s=null;gL(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Y$(t.expires_in)));const a=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:a},error:null}}function BN(t){const e=yn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(e.data.weak_password=t.weak_password),e}function uo(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function hL(t){return{data:t,error:null}}function mL(t){const{action_link:e,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i}=t,c=cL(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:a,redirect_to:n,verification_type:i},f=Object.assign({},c);return{data:{properties:u,user:f},error:null}}function pL(t){return t}function gL(t){return t.access_token&&t.refresh_token&&t.expires_in}const rx=["global","local","others"];var xL=function(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s};class vL{constructor({url:e="",headers:s={},fetch:a}){this.url=e,this.headers=s,this.fetch=sC(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=rx[0]){if(rx.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rx.join(", ")}`);try{return await gt(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,s={}){try{return await gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:uo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:s}=e,a=xL(e,["options"]),n=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(n.new_email=a==null?void 0:a.newEmail,delete n.newEmail),await gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:mL,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(rt(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await gt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:uo})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,a,n,i,c,u,f;try{const h={nextPage:null,lastPage:0,total:0},p=await gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:pL});if(p.error)throw p.error;const g=await p.json(),x=(c=p.headers.get("x-total-count"))!==null&&c!==void 0?c:0,y=(f=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return y.length>0&&(y.forEach(_=>{const j=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(_.split(";")[1].split("=")[1]);h[`${N}Page`]=j}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},g),h),error:null}}catch(h){if(rt(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Pl(e);try{return await gt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:uo})}catch(s){if(rt(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Pl(e);try{return await gt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:uo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,s=!1){Pl(e);try{return await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:uo})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){Pl(e.userId);try{const{data:s,error:a}=await gt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:a}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Pl(e.userId),Pl(e.id);try{return{data:await gt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}}const bL={getItem:t=>sd()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{sd()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{sd()&&globalThis.localStorage.removeItem(t)}};function IN(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function yL(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dl={debug:!!(globalThis&&sd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wL extends rC{}async function _L(t,e,s){Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wL(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Dl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}yL();const jL={url:M$,storageKey:P$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function VN(t,e,s){return await s()}class bd{constructor(e){var s,a;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bd.nextInstanceID,bd.nextInstanceID+=1,this.instanceID>0&&fr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},jL),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new vL({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=sC(n.fetch),this.lock=n.lock||VN,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:fr()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=_L:this.lock=VN,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:sd()?this.storage=bL:(this.memoryStorage={},this.storage=IN(this.memoryStorage)):(this.memoryStorage={},this.storage=IN(this.memoryStorage)),fr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${QE}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=W$(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),fr()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),V$(i)){const f=(e=i.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:c,redirectType:u}=n;return this._debug("#_initialize()","detected session in URL",c,"redirect type",u),await this._saveSession(c),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return rt(s)?{error:s}:{error:new eC("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,a,n;try{const i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:yn}),{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,a,n;try{let i;if("email"in e){const{email:p,password:g,options:x}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await Ml(this.storage,this.storageKey)),i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:g,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:y,code_challenge_method:_},xform:yn})}else if("phone"in e){const{phone:p,password:g,options:x}=e;i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(a=x==null?void 0:x.data)!==null&&a!==void 0?a:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:yn})}else throw new ih("You must provide either an email or phone number and a password");const{data:c,error:u}=i;if(u||!c)return{data:{user:null,session:null},error:u};const f=c.session,h=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:c,options:u}=e;s=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:BN})}else if("phone"in e){const{phone:i,password:c,options:u}=e;s=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:c,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:BN})}else throw new ih("You must provide either an email or phone number and a password");const{data:a,error:n}=s;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new oh}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,a,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,a,n,i,c,u,f,h,p,g,x,y;let _,j;if("message"in e)_=e.message,j=e.signature;else{const{chain:N,wallet:S,statement:C,options:E}=e;let M;if(fr())if(typeof S=="object")M=S;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))M=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const R=new URL((s=E==null?void 0:E.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in M&&M.signIn){const P=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),C?{statement:C}:null));let $;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")$=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)$=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)_=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),j=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${R.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(n=(a=E==null?void 0:E.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((f=E==null?void 0:E.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(p=E==null?void 0:E.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const P=await M.signMessage(new TextEncoder().encode(_),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=P}}try{const{data:N,error:S}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:X$(j)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:yn});if(S)throw S;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new oh}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:S})}catch(N){if(rt(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const s=await ch(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(s??"").split("/");try{const{data:i,error:c}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:yn});if(await uh(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new oh}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:c})}catch(i){if(rt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:a,token:n,access_token:i,nonce:c}=e,u=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:yn}),{data:f,error:h}=u;return h?{data:{user:null,session:null},error:h}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new oh}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:h})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,a,n,i,c;try{if("email"in e){const{email:u,options:f}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Ml(this.storage,this.storageKey));const{error:g}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(a=f==null?void 0:f.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:f}=e,{data:h,error:p}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p}}throw new ih("You must provide either an email or phone number.")}catch(u){if(rt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var s,a;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:c,error:u}=await gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:yn});if(u)throw u;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,h=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:h,session:f},error:null}}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,a,n;try{let i=null,c=null;return this.flowType==="pkce"&&([i,c]=await Ml(this.storage,this.storageKey)),await gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:c}),headers:this.headers,xform:hL})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:a}=e;if(a)throw a;if(!s)throw new ro;const{error:n}=await gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:a,type:n,options:i}=e,{error:c}=await gt(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:a,type:n,options:i}=e,{data:c,error:u}=await gt(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ih("You must provide either an email or phone number and a type")}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ch(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<tx:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.storage.isServer){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,h,p)=>(!c&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,h,p))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:uo}):await this._useSession(async s=>{var a,n,i;const{data:c,error:u}=s;if(u)throw u;return!(!((a=c.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ro}:await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=c.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:uo})})}catch(s){if(rt(s))return I$(s)&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new ro;const c=n.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await Ml(this.storage,this.storageKey));const{data:h,error:p}=await gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:c.access_token,xform:uo});if(p)throw p;return c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(a){if(rt(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ro;const s=Date.now()/1e3;let a=s,n=!0,i=null;const{payload:c}=ax(e.access_token);if(c.exp&&(a=c.exp,n=a<=s),n){const{session:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;i={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(rt(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var a;if(!e){const{data:c,error:u}=s;if(u)throw u;e=(a=c.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new ro;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(rt(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!fr())throw new lh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new lh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new MN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lh("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new MN("No code detected.");const{data:C,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:c,expires_in:u,expires_at:f,token_type:h}=e;if(!i||!u||!c||!h)throw new lh("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let x=p+g;f&&(x=parseInt(f));const y=x-p;y*1e3<=Fl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${g}s`);const _=x-g;p-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,x,p):p-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,x,p);const{data:j,error:N}=await this._getUser(i);if(N)throw N;const S={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:g,expires_at:x,refresh_token:c,token_type:h,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(a){if(rt(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ch(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{error:i};const c=(a=n.session)===null||a===void 0?void 0:a.access_token;if(c){const{error:u}=await this.admin.signOut(c,e);if(u&&!(B$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await uh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=K$(),a={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async s=>{var a,n;try{const{data:{session:i},error:c}=s;if(c)throw c;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Ml(this.storage,this.storageKey,!0));try{return await gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(rt(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:a,error:n}=await this._useSession(async i=>{var c,u,f,h,p;const{data:g,error:x}=i;if(x)throw x;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await gt(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(h=g.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(n)throw n;return fr()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:e.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(rt(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var a,n;const{data:i,error:c}=s;if(c)throw c;return await gt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await J$(async n=>(n>0&&await Q$(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yn})),(n,i)=>{const c=200*Math.pow(2,n);return i&&sx(i)&&Date.now()+c-a<Fl})}catch(a){if(this._debug(s,"error",a),rt(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",a),fr()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ch(this.storage,this.storageKey);if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const n=((e=a.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<tx;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${tx}s`),n){if(this.autoRefreshToken&&a.refresh_token){const{error:i}=await this._callRefreshToken(a.refresh_token);i&&(console.error(i),sx(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,a;if(!e)throw new ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Im;const{data:i,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!i.session)throw new ro;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={session:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(n,"error",i),rt(i)){const c={session:null,error:i};return sx(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,a=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],c=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){i.push(f)}});if(await Promise.all(c),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await aC(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await uh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-e)/Fl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Fl}ms, refresh threshold is ${ev} ticks`),n<=ev&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,a){const n=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,c]=await Ml(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(c)}`});n.push(u.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await gt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var a,n;const{data:i,error:c}=s;if(c)return{data:null,error:c};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:h}=await gt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((n=f==null?void 0:f.totp)===null||n===void 0)&&n.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(s){if(rt(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:c,error:u}=await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:u})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:n,error:i}=s;return i?{data:null,error:i}:await gt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=n==null?void 0:n.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(rt(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(e==null?void 0:e.factors)||[],n=a.filter(c=>c.factor_type==="totp"&&c.status==="verified"),i=a.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,a;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=ax(n.access_token);let u=null;c.aal&&(u=c.aal);let f=u;((a=(s=n.user.factors)===null||s===void 0?void 0:s.filter(g=>g.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(f="aal2");const p=c.amr||[];return{data:{currentLevel:u,nextLevel:f,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,s={keys:[]}){let a=s.keys.find(c=>c.kid===e);if(a||(a=this.jwks.keys.find(c=>c.kid===e),a&&this.jwks_cached_at+$$>Date.now()))return a;const{data:n,error:i}=await gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new td("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),a=n.keys.find(c=>c.kid===e),!a)throw new td("No matching signing key found in JWKS");return a}async getClaims(e,s={keys:[]}){try{let a=e;if(!a){const{data:y,error:_}=await this.getSession();if(_||!y.session)return{data:null,error:_};a=y.session.access_token}const{header:n,payload:i,signature:c,raw:{header:u,payload:f}}=ax(a);if(oL(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(a);if(y)throw y;return{data:{claims:i,header:n,signature:c},error:null}}const h=iL(n.alg),p=await this.fetchJwk(n.kid,s),g=await crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!await crypto.subtle.verify(h,g,c,G$(`${u}.${f}`)))throw new td("Invalid JWT signature");return{data:{claims:i,header:n,signature:c},error:null}}catch(a){if(rt(a))return{data:null,error:a};throw a}}}bd.nextInstanceID=0;const NL=bd;class SL extends NL{constructor(e){super(e)}}var EL=function(t,e,s,a){function n(i){return i instanceof s?i:new s(function(c){c(i)})}return new(s||(s=Promise))(function(i,c){function u(p){try{h(a.next(p))}catch(g){c(g)}}function f(p){try{h(a.throw(p))}catch(g){c(g)}}function h(p){p.done?i(p.value):n(p.value).then(u,f)}h((a=a.apply(t,e||[])).next())})};class CL{constructor(e,s,a){var n,i,c;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const u=T$(e),f=new URL(u);this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:_$,realtime:N$,auth:Object.assign(Object.assign({},j$),{storageKey:h}),global:w$},g=R$(a??{},p);this.storageKey=(n=g.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=g.global.headers)!==null&&i!==void 0?i:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(x,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=A$(s,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new HO(new URL("rest/v1",f).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new PO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new v$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},a={}){return this.rest.rpc(e,s,a)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return EL(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:n,storageKey:i,flowType:c,lock:u,debug:f},h,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SL({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),h),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:a,storage:n,flowType:c,lock:u,debug:f,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new r$(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(e,s,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nC=(t,e,s)=>new CL(t,e,s),AL=Lm({email:Ws().email("Email invlido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}),kL=Lm({email:Ws().email("Email invlido"),password:Ws().min(6,"A senha deve ter pelo menos 6 caracteres"),confirmPassword:Ws().min(6,"A senha deve ter pelo menos 6 caracteres")}).refine(t=>t.password===t.confirmPassword,{message:"As senhas no coincidem",path:["confirmPassword"]}),TL={onAuthUserChanged:!1,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},RL={user:null,session:null,isLoading:!1,isAuthenticated:!1,error:null,loading:TL},oC=b.createContext({...RL,signInWithEmail:async()=>({success:!1}),signUpWithEmail:async()=>({success:!1}),signOut:async()=>{},updateProfile:async()=>({success:!1})});var ad=(t=>(t.LOCAL="LOCAL",t.DEV="DEV",t.PROD="PROD",t))(ad||{});const ML=Lm({VITE_ENV:CO(ad),VITE_BASE_URL:Ws().url().optional(),VITE_SUPABASE_URL:Ws().url(),VITE_SUPABASE_ANON_KEY:Ws(),VITE_SERVICE_ROLE:Ws().optional(),VITE_LOGIN_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_URL:Ws().url().optional(),VITE_SUPABASE_LOCAL_ANON_KEY:Ws().optional()});function PL(){const t={VITE_ENV:"DEV",VITE_BASE_URL:"http://tower-trials.vercel.app",VITE_SUPABASE_URL:"https://rpagdztnwtyjatslrjay.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyODUxNjEsImV4cCI6MjA2Mjg2MTE2MX0.DIB6tYhoJ_Rb5pGr8Vu236MFhFUaMIq0x7PrUTR0ztI",VITE_SERVICE_ROLE:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwYWdkenRud3R5amF0c2xyamF5Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzI4NTE2MSwiZXhwIjoyMDYyODYxMTYxfQ.kylyn4vQcXVEMJuZ_baF9Mt4Ka5d1RFraocaIx3lrB4",VITE_LOGIN_URL:"http://tower-trials.vercel.app/login",VITE_SUPABASE_LOCAL_URL:void 0,VITE_SUPABASE_LOCAL_ANON_KEY:void 0};try{return ML.parse(t)}catch(e){throw console.error(" Erro de configurao de ambiente:"),e instanceof Kr&&e.errors.forEach(s=>{console.error(`- ${s.path.join(".")}: ${s.message}`)}),console.error(`
 Variveis necessrias:`),console.error("- VITE_ENV (LOCAL, DEV, ou PROD)"),console.error("- VITE_SUPABASE_URL"),console.error("- VITE_SUPABASE_ANON_KEY"),console.error(`
 Crie um arquivo .env.local com essas variveis`),new Error("Configurao de ambiente invlida")}}const oi=PL(),DL=()=>{switch(oi.VITE_ENV){case ad.LOCAL:return{url:oi.VITE_SUPABASE_LOCAL_URL||"http://127.0.0.1:54321",anonKey:oi.VITE_SUPABASE_LOCAL_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0",serviceRoleKey:oi.VITE_SERVICE_ROLE||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU"};case ad.DEV:case ad.PROD:default:return{url:oi.VITE_SUPABASE_URL,anonKey:oi.VITE_SUPABASE_ANON_KEY,serviceRoleKey:oi.VITE_SERVICE_ROLE}}},nm=DL(),we=nC(nm.url,nm.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:localStorage}}),OL=nC(nm.url,nm.serviceRoleKey||"",{auth:{autoRefreshToken:!1,persistSession:!1}}),rd=Object.freeze(Object.defineProperty({__proto__:null,supabase:we,supabaseAdmin:OL},Symbol.toStringTag,{value:"Module"})),co={getSession:async()=>{try{const{data:{session:t},error:e}=await we.auth.getSession();if(e)throw e;return t}catch(t){return console.error("Erro ao obter sesso:",t instanceof Error?t.message:t),null}},getCurrentUser:async()=>{try{const{data:{user:t},error:e}=await we.auth.getUser();if((e==null?void 0:e.status)===403||!t)return null;if(e)throw e;const{data:s,error:a}=await we.from("users").select("*").eq("uid",t.id).maybeSingle();return a?(console.error("Erro ao buscar perfil:",a.message),null):s?{...t,username:s.username,display_name:s.display_name,avatar_url:s.avatar_url,role:s.role,highest_floor:s.highest_floor,total_games:s.total_games,total_victories:s.total_victories,total_character_level:s.total_character_level,max_character_slots:s.max_character_slots,is_active:s.is_active,last_login:s.last_login}:null}catch(t){return t instanceof Error&&!t.message.includes("JWT")&&console.error("Erro ao obter usurio atual:",t.message),null}},signOut:async()=>{try{const{error:t}=await we.auth.signOut();if(t)throw t}catch(t){throw console.error("Erro ao fazer logout:",t instanceof Error?t.message:t),t}},signInWithEmail:async({email:t,password:e})=>{try{const{data:s,error:a}=await we.auth.signInWithPassword({email:t,password:e});if(a)throw a;if(!s.user)return{user:null,session:null,error:"Usurio no encontrado"};const{data:n,error:i}=await we.from("users").select("*").eq("uid",s.user.id).maybeSingle();return i?(console.error("Erro ao buscar perfil:",i.message),{user:null,session:s.session,error:"Erro ao buscar perfil do usurio"}):n?(await we.from("users").update({last_login:new Date().toISOString()}).eq("uid",s.user.id),{user:{...s.user,username:n.username,display_name:n.display_name,avatar_url:n.avatar_url,role:n.role,highest_floor:n.highest_floor,total_games:n.total_games,total_victories:n.total_victories,total_character_level:n.total_character_level,max_character_slots:n.max_character_slots,is_active:n.is_active,last_login:n.last_login},session:s.session}):{user:null,session:s.session,error:"Perfil no encontrado"}}catch(s){return{user:null,session:null,error:String(s)}}},signUpWithEmail:async t=>{try{const{email:e,password:s,username:a=e.split("@")[0]}=t,{data:n,error:i}=await we.auth.signUp({email:e,password:s,options:{data:{username:a},emailRedirectTo:`${window.location.origin}/auth`}});if(i)throw i;if(!n.user)throw new Error("Falha ao criar usurio");await new Promise(c=>setTimeout(c,1e3));try{await we.rpc("create_user_profile",{p_uid:n.user.id,p_username:a,p_email:e})}catch(c){console.error("Erro ao chamar RPC:",c);try{const{error:u}=await we.from("users").insert({uid:n.user.id,username:a,email:e,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(u){if(console.error("Erro no fallback de insero:",u),u.code==="23505")return{user:{...n.user,username:a,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session};throw u}}catch(u){console.error("Erro total no processo de criao de perfil:",u)}}return{user:{...n.user,username:a,role:"PLAYER",highest_floor:0,total_games:0,total_victories:0,total_character_level:0,max_character_slots:3,is_active:!0},session:n.session}}catch(e){return console.error("Erro no registro:",e instanceof Error?e.message:e),{user:null,session:null,error:String(e)}}},updateProfile:async t=>{try{const e=await co.getSession();if(!(e!=null&&e.user))throw new Error("Usurio no autenticado");const{error:s}=await we.from("users").update({display_name:t.display_name,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("uid",e.user.id).select().single();if(s)throw s;return{user:await co.getCurrentUser(),session:e}}catch(e){return{user:null,session:null,error:String(e)}}},handleAuthError:t=>{if(t instanceof Bm)switch(t.status){case 400:if(t.message.includes("Email not confirmed"))return new Error("Por favor, confirme seu e-mail antes de fazer login");if(t.message.includes("Invalid login credentials"))return new Error("E-mail ou senha incorretos");if(t.message.includes("Password should be at least 6 characters"))return new Error("A senha deve ter pelo menos 6 caracteres");if(t.message.includes("User already registered"))return new Error("Este e-mail j est cadastrado");break;case 401:return new Error("Sesso expirada. Por favor, faa login novamente");case 422:return new Error("Dados invlidos. Verifique as informaes e tente novamente");case 429:return new Error("Muitas tentativas. Por favor, aguarde alguns minutos")}return t instanceof Error?t:new Error("Ocorreu um erro inesperado. Tente novamente mais tarde")}},$L={onAuthUserChanged:!1,signIn:!1,signUp:!1,signOut:!1,updateProfile:!1},Ru={user:null,session:null,isLoading:!0,isAuthenticated:!1,error:null,loading:$L};function LL({children:t}){const e=Rt(),[s,a]=b.useState(Ru),n=b.useCallback(async()=>{if(s.isLoading)try{const p=await co.getSession();if(!p){a({...Ru,isLoading:!1});return}const g=await co.getCurrentUser();a({...Ru,user:g,session:p,isAuthenticated:!!g,isLoading:!1})}catch(p){console.error("Erro ao carregar usurio:",p instanceof Error?p.message:p),a({...Ru,error:p instanceof Error?p.message:String(p),isLoading:!1})}},[s.isLoading]);b.useEffect(()=>{const{data:{subscription:p}}=we.auth.onAuthStateChange((g,x)=>{JSON.stringify(x)!==JSON.stringify(s.session)&&a(y=>({...y,session:x,isLoading:!0}))});return()=>{p.unsubscribe()}},[s.session]),b.useEffect(()=>{s.isLoading&&n()},[s.isLoading,n]);const i=b.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,signIn:!0}}));try{const g=await co.signInWithEmail(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,signIn:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,signIn:!1}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao fazer login";return a(y=>({...y,error:x,loading:{...y.loading,signIn:!1}})),{success:!1,error:x}}},[]),c=b.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,signUp:!0}}));try{const g=await co.signUpWithEmail(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,signUp:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,signUp:!1}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao criar conta";return a(y=>({...y,error:x,loading:{...y.loading,signUp:!1}})),{success:!1,error:x}}},[]),u=b.useCallback(async()=>{a(p=>({...p,loading:{...p.loading,signOut:!0}}));try{await co.signOut(),a({...Ru,isLoading:!1}),e({to:"/auth",search:{auth:""}})}catch(p){console.error("Erro ao fazer logout:",p instanceof Error?p.message:p),a(g=>({...g,error:p instanceof Error?p.message:String(p),loading:{...g.loading,signOut:!1}}))}},[]),f=b.useCallback(async p=>{a(g=>({...g,loading:{...g.loading,updateProfile:!0}}));try{const g=await co.updateProfile(p);return g.error?(a(x=>({...x,error:g.error,loading:{...x.loading,updateProfile:!1}})),{success:!1,error:g.error}):(a(x=>({...x,isLoading:!0,loading:{...x.loading,updateProfile:!1}})),{success:!0})}catch(g){const x=g instanceof Error?g.message:"Erro ao atualizar perfil";return a(y=>({...y,error:x,loading:{...y.loading,updateProfile:!1}})),{success:!1,error:x}}},[]),h=b.useMemo(()=>({...s,signInWithEmail:i,signUpWithEmail:c,signOut:u,updateProfile:f}),[s,i,c,u,f]);return r.jsx(oC.Provider,{value:h,children:t})}function BL(t){var e,s;return((e=t.main_hand)==null?void 0:e.type)==="weapon"&&((s=t.off_hand)==null?void 0:s.type)==="weapon"}function IL(t){var e,s;return((e=t.off_hand)==null?void 0:e.type)==="armor"&&!((s=t.off_hand)!=null&&s.weapon_subtype)}function VL(t){var e;return((e=t.main_hand)==null?void 0:e.type)==="weapon"?t.main_hand:void 0}const qL=(t,e)=>{const s=[];return[{name:"Ataque",current:(t==null?void 0:t.atk_bonus)||0,new:e.atk_bonus},{name:"Defesa",current:(t==null?void 0:t.def_bonus)||0,new:e.def_bonus},{name:"Mana",current:(t==null?void 0:t.mana_bonus)||0,new:e.mana_bonus},{name:"Velocidade",current:(t==null?void 0:t.speed_bonus)||0,new:e.speed_bonus},{name:"HP",current:(t==null?void 0:t.hp_bonus)||0,new:e.hp_bonus},{name:"Chance Crtica",current:(t==null?void 0:t.critical_chance_bonus)||0,new:e.critical_chance_bonus},{name:"Dano Crtico",current:(t==null?void 0:t.critical_damage_bonus)||0,new:e.critical_damage_bonus},{name:"Duplo Ataque",current:(t==null?void 0:t.double_attack_chance_bonus)||0,new:e.double_attack_chance_bonus},{name:"Dano Mgico",current:(t==null?void 0:t.magic_damage_bonus)||0,new:e.magic_damage_bonus}].forEach(n=>{const i=n.new-n.current;i!==0&&s.push({stat_name:n.name,current_value:n.current,new_value:n.new,difference:i,is_improvement:i>0})}),s},ks={BASE_XP_NEXT_LEVEL:100,BASE_STATS:{hp:100,mana:50,atk:20,def:10,speed:10},STAT_GROWTH_PER_LEVEL:{hp:10,mana:5,atk:2,def:1,speed:1}};function UL(t,e){return{hp:ks.BASE_STATS.hp+ks.STAT_GROWTH_PER_LEVEL.hp*(t-1),mana:ks.BASE_STATS.mana+ks.STAT_GROWTH_PER_LEVEL.mana*(t-1),atk:ks.BASE_STATS.atk+ks.STAT_GROWTH_PER_LEVEL.atk*(t-1),def:ks.BASE_STATS.def+ks.STAT_GROWTH_PER_LEVEL.def*(t-1),speed:ks.BASE_STATS.speed+ks.STAT_GROWTH_PER_LEVEL.speed*(t-1)}}var is=(t=>(t.SWORD_MASTERY="sword",t.AXE_MASTERY="axe",t.BLUNT_MASTERY="blunt",t.DEFENSE_MASTERY="defense",t.MAGIC_MASTERY="magic",t))(is||{});function zL(t){return Math.floor(50*Math.pow(1.4,t-1))}function FL(t){return{sword:"Maestria com espadas. Aumenta ataque (+1), chance crtica (+0.2%) e dano crtico (+3%) por nvel.",axe:"Maestria com machados. Aumenta ataque (+1), chance crtica (+0.2%) e dano crtico (+3%) por nvel.",blunt:"Maestria com armas de concusso. Aumenta ataque (+1), chance crtica (+0.2%) e dano crtico (+3%) por nvel.",defense:"Maestria defensiva. Aumenta defesa (+2) por nvel e reduz dano recebido.",magic:"Maestria mgica. Aumenta mana (+3), dano mgico (+15%) e cura (+10%) por nvel."}[t]}const HL={buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},GL={id:"",user_id:"",name:"",level:1,xp:0,xp_next_level:ks.BASE_XP_NEXT_LEVEL,gold:0,hp:ks.BASE_STATS.hp,max_hp:ks.BASE_STATS.hp,mana:ks.BASE_STATS.mana,max_mana:ks.BASE_STATS.mana,atk:ks.BASE_STATS.atk,def:ks.BASE_STATS.def,speed:ks.BASE_STATS.speed,created_at:"",updated_at:"",isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:0,spells:[],consumables:[],potionUsedThisTurn:!1,active_effects:HL,strength:10,dexterity:10,intelligence:10,wisdom:10,vitality:10,luck:10,critical_chance:0,critical_damage:110,double_attack_chance:0,magic_attack:0,magic_mastery:1,magic_damage_bonus:0},iC={mode:"menu",player:GL,currentEnemy:null,currentFloor:null,currentSpecialEvent:null,isPlayerTurn:!0,gameMessage:"",highestFloor:0,selectedSpell:null,battleRewards:null,fleeSuccessful:!1,characterDeleted:!1},lC=b.createContext({gameState:iC,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"",gameLog:[],characters:[],selectedCharacter:null,startGame:async()=>{},selectCharacter:async()=>{},loadCharacterForHub:async()=>{},clearGameState:()=>{},performAction:()=>{},returnToMenu:()=>{},resetError:()=>{},addGameLogMessage:()=>{},saveProgress:async()=>{},updatePlayerStats:()=>{},updatePlayerConsumables:()=>{}});function XL(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}const YL=t=>{switch(t){case"success":return ZL;case"info":return JL;case"warning":return QL;case"error":return e6;default:return null}},KL=Array(12).fill(0),WL=({visible:t,className:e})=>he.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},he.createElement("div",{className:"sonner-spinner"},KL.map((s,a)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),ZL=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QL=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JL=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),e6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),t6=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),s6=()=>{const[t,e]=he.useState(document.hidden);return he.useEffect(()=>{const s=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",s),()=>window.removeEventListener("visibilitychange",s)},[]),t};let av=1;class a6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}),this.publish=e=>{this.subscribers.forEach(s=>s(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var s;const{message:a,...n}=e,i=typeof(e==null?void 0:e.id)=="number"||((s=e.id)==null?void 0:s.length)>0?e.id:av++,c=this.toasts.find(f=>f.id===i),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(f=>f.id===i?(this.publish({...f,...e,id:i,title:a}),{...f,...e,id:i,dismissible:u,title:a}):f):this.addToast({title:a,...n,dismissible:u,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(s=>s({id:e,dismiss:!0})))):this.toasts.forEach(s=>{this.subscribers.forEach(a=>a({id:s.id,dismiss:!0}))}),e),this.message=(e,s)=>this.create({...s,message:e}),this.error=(e,s)=>this.create({...s,message:e,type:"error"}),this.success=(e,s)=>this.create({...s,type:"success",message:e}),this.info=(e,s)=>this.create({...s,type:"info",message:e}),this.warning=(e,s)=>this.create({...s,type:"warning",message:e}),this.loading=(e,s)=>this.create({...s,type:"loading",message:e}),this.promise=(e,s)=>{if(!s)return;let a;s.loading!==void 0&&(a=this.create({...s,promise:e,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let i=a!==void 0,c;const u=n.then(async h=>{if(c=["resolve",h],he.isValidElement(h))i=!1,this.create({id:a,type:"default",message:h});else if(n6(h)&&!h.ok){i=!1;const g=typeof s.error=="function"?await s.error(`HTTP error! status: ${h.status}`):s.error,x=typeof s.description=="function"?await s.description(`HTTP error! status: ${h.status}`):s.description,_=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"error",description:x,..._})}else if(h instanceof Error){i=!1;const g=typeof s.error=="function"?await s.error(h):s.error,x=typeof s.description=="function"?await s.description(h):s.description,_=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"error",description:x,..._})}else if(s.success!==void 0){i=!1;const g=typeof s.success=="function"?await s.success(h):s.success,x=typeof s.description=="function"?await s.description(h):s.description,_=typeof g=="object"&&!he.isValidElement(g)?g:{message:g};this.create({id:a,type:"success",description:x,..._})}}).catch(async h=>{if(c=["reject",h],s.error!==void 0){i=!1;const p=typeof s.error=="function"?await s.error(h):s.error,g=typeof s.description=="function"?await s.description(h):s.description,y=typeof p=="object"&&!he.isValidElement(p)?p:{message:p};this.create({id:a,type:"error",description:g,...y})}}).finally(()=>{i&&(this.dismiss(a),a=void 0),s.finally==null||s.finally.call(s)}),f=()=>new Promise((h,p)=>u.then(()=>c[0]==="reject"?p(c[1]):h(c[1])).catch(p));return typeof a!="string"&&typeof a!="number"?{unwrap:f}:Object.assign(a,{unwrap:f})},this.custom=(e,s)=>{const a=(s==null?void 0:s.id)||av++;return this.create({jsx:e(a),id:a,...s}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ya=new a6,r6=(t,e)=>{const s=(e==null?void 0:e.id)||av++;return ya.addToast({title:t,...e,id:s}),s},n6=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",o6=r6,i6=()=>ya.toasts,l6=()=>ya.getActiveToasts(),me=Object.assign(o6,{success:ya.success,info:ya.info,warning:ya.warning,error:ya.error,custom:ya.custom,message:ya.message,promise:ya.promise,dismiss:ya.dismiss,loading:ya.loading},{getHistory:i6,getToasts:l6});XL("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function dh(t){return t.label!==void 0}const c6=3,u6="24px",d6="16px",qN=4e3,f6=356,h6=14,m6=45,p6=200;function Or(...t){return t.filter(Boolean).join(" ")}function g6(t){const[e,s]=t.split("-"),a=[];return e&&a.push(e),s&&a.push(s),a}const x6=t=>{var e,s,a,n,i,c,u,f,h;const{invert:p,toast:g,unstyled:x,interacting:y,setHeights:_,visibleToasts:j,heights:N,index:S,toasts:C,expanded:E,removeToast:M,defaultRichColors:R,closeButton:P,style:$,cancelButtonStyle:k,actionButtonStyle:O,className:H="",descriptionClassName:Y="",duration:I,position:z,gap:ee,expandByDefault:G,classNames:A,icons:B,closeButtonAriaLabel:V="Close toast"}=t,[W,L]=he.useState(null),[F,ie]=he.useState(null),[se,ue]=he.useState(!1),[le,re]=he.useState(!1),[de,ce]=he.useState(!1),[be,Ne]=he.useState(!1),[J,ge]=he.useState(!1),[_e,De]=he.useState(0),[Ve,We]=he.useState(0),ye=he.useRef(g.duration||I||qN),Pe=he.useRef(null),Ae=he.useRef(null),q=S===0,X=S+1<=j,Z=g.type,je=g.dismissible!==!1,Ce=g.className||"",Se=g.descriptionClassName||"",Re=he.useMemo(()=>N.findIndex(Ze=>Ze.toastId===g.id)||0,[N,g.id]),et=he.useMemo(()=>{var Ze;return(Ze=g.closeButton)!=null?Ze:P},[g.closeButton,P]),ot=he.useMemo(()=>g.duration||I||qN,[g.duration,I]),_t=he.useRef(0),Fs=he.useRef(0),Hs=he.useRef(0),Ia=he.useRef(null),[ja,Na]=z.split("-"),aa=he.useMemo(()=>N.reduce((Ze,It,fs)=>fs>=Re?Ze:Ze+It.height,0),[N,Re]),ra=s6(),ir=g.invert||p,da=Z==="loading";Fs.current=he.useMemo(()=>Re*ee+aa,[Re,aa]),he.useEffect(()=>{ye.current=ot},[ot]),he.useEffect(()=>{ue(!0)},[]),he.useEffect(()=>{const Ze=Ae.current;if(Ze){const It=Ze.getBoundingClientRect().height;return We(It),_(fs=>[{toastId:g.id,height:It,position:g.position},...fs]),()=>_(fs=>fs.filter(Os=>Os.toastId!==g.id))}},[_,g.id]),he.useLayoutEffect(()=>{if(!se)return;const Ze=Ae.current,It=Ze.style.height;Ze.style.height="auto";const fs=Ze.getBoundingClientRect().height;Ze.style.height=It,We(fs),_(Os=>Os.find(xs=>xs.toastId===g.id)?Os.map(xs=>xs.toastId===g.id?{...xs,height:fs}:xs):[{toastId:g.id,height:fs,position:g.position},...Os])},[se,g.title,g.description,_,g.id,g.jsx,g.action,g.cancel]);const ts=he.useCallback(()=>{re(!0),De(Fs.current),_(Ze=>Ze.filter(It=>It.toastId!==g.id)),setTimeout(()=>{M(g)},p6)},[g,M,_,Fs]);he.useEffect(()=>{if(g.promise&&Z==="loading"||g.duration===1/0||g.type==="loading")return;let Ze;return E||y||ra?(()=>{if(Hs.current<_t.current){const Os=new Date().getTime()-_t.current;ye.current=ye.current-Os}Hs.current=new Date().getTime()})():(()=>{ye.current!==1/0&&(_t.current=new Date().getTime(),Ze=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),ts()},ye.current))})(),()=>clearTimeout(Ze)},[E,y,g,Z,ra,ts]),he.useEffect(()=>{g.delete&&(ts(),g.onDismiss==null||g.onDismiss.call(g,g))},[ts,g.delete]);function Bi(){var Ze;if(B!=null&&B.loading){var It;return he.createElement("div",{className:Or(A==null?void 0:A.loader,g==null||(It=g.classNames)==null?void 0:It.loader,"sonner-loader"),"data-visible":Z==="loading"},B.loading)}return he.createElement(WL,{className:Or(A==null?void 0:A.loader,g==null||(Ze=g.classNames)==null?void 0:Ze.loader),visible:Z==="loading"})}const Ds=g.icon||(B==null?void 0:B[Z])||YL(Z);var fa,lr;return he.createElement("li",{tabIndex:0,ref:Ae,className:Or(H,Ce,A==null?void 0:A.toast,g==null||(e=g.classNames)==null?void 0:e.toast,A==null?void 0:A.default,A==null?void 0:A[Z],g==null||(s=g.classNames)==null?void 0:s[Z]),"data-sonner-toast":"","data-rich-colors":(fa=g.richColors)!=null?fa:R,"data-styled":!(g.jsx||g.unstyled||x),"data-mounted":se,"data-promise":!!g.promise,"data-swiped":J,"data-removed":le,"data-visible":X,"data-y-position":ja,"data-x-position":Na,"data-index":S,"data-front":q,"data-swiping":de,"data-dismissible":je,"data-type":Z,"data-invert":ir,"data-swipe-out":be,"data-swipe-direction":F,"data-expanded":!!(E||G&&se),style:{"--index":S,"--toasts-before":S,"--z-index":C.length-S,"--offset":`${le?_e:Fs.current}px`,"--initial-height":G?"auto":`${Ve}px`,...$,...g.style},onDragEnd:()=>{ce(!1),L(null),Ia.current=null},onPointerDown:Ze=>{da||!je||(Pe.current=new Date,De(Fs.current),Ze.target.setPointerCapture(Ze.pointerId),Ze.target.tagName!=="BUTTON"&&(ce(!0),Ia.current={x:Ze.clientX,y:Ze.clientY}))},onPointerUp:()=>{var Ze,It,fs;if(be||!je)return;Ia.current=null;const Os=Number(((Ze=Ae.current)==null?void 0:Ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qo=Number(((It=Ae.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),xs=new Date().getTime()-((fs=Pe.current)==null?void 0:fs.getTime()),ss=W==="x"?Os:qo,as=Math.abs(ss)/xs;if(Math.abs(ss)>=m6||as>.11){De(Fs.current),g.onDismiss==null||g.onDismiss.call(g,g),ie(W==="x"?Os>0?"right":"left":qo>0?"down":"up"),ts(),Ne(!0);return}else{var Vt,_s;(Vt=Ae.current)==null||Vt.style.setProperty("--swipe-amount-x","0px"),(_s=Ae.current)==null||_s.style.setProperty("--swipe-amount-y","0px")}ge(!1),ce(!1),L(null)},onPointerMove:Ze=>{var It,fs,Os;if(!Ia.current||!je||((It=window.getSelection())==null?void 0:It.toString().length)>0)return;const xs=Ze.clientY-Ia.current.y,ss=Ze.clientX-Ia.current.x;var as;const Vt=(as=t.swipeDirections)!=null?as:g6(z);!W&&(Math.abs(ss)>1||Math.abs(xs)>1)&&L(Math.abs(ss)>Math.abs(xs)?"x":"y");let _s={x:0,y:0};const Ii=tn=>1/(1.5+Math.abs(tn)/20);if(W==="y"){if(Vt.includes("top")||Vt.includes("bottom"))if(Vt.includes("top")&&xs<0||Vt.includes("bottom")&&xs>0)_s.y=xs;else{const tn=xs*Ii(xs);_s.y=Math.abs(tn)<Math.abs(xs)?tn:xs}}else if(W==="x"&&(Vt.includes("left")||Vt.includes("right")))if(Vt.includes("left")&&ss<0||Vt.includes("right")&&ss>0)_s.x=ss;else{const tn=ss*Ii(ss);_s.x=Math.abs(tn)<Math.abs(ss)?tn:ss}(Math.abs(_s.x)>0||Math.abs(_s.y)>0)&&ge(!0),(fs=Ae.current)==null||fs.style.setProperty("--swipe-amount-x",`${_s.x}px`),(Os=Ae.current)==null||Os.style.setProperty("--swipe-amount-y",`${_s.y}px`)}},et&&!g.jsx&&Z!=="loading"?he.createElement("button",{"aria-label":V,"data-disabled":da,"data-close-button":!0,onClick:da||!je?()=>{}:()=>{ts(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Or(A==null?void 0:A.closeButton,g==null||(a=g.classNames)==null?void 0:a.closeButton)},(lr=B==null?void 0:B.close)!=null?lr:t6):null,(Z||g.icon||g.promise)&&g.icon!==null&&((B==null?void 0:B[Z])!==null||g.icon)?he.createElement("div",{"data-icon":"",className:Or(A==null?void 0:A.icon,g==null||(n=g.classNames)==null?void 0:n.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Bi():null,g.type!=="loading"?Ds:null):null,he.createElement("div",{"data-content":"",className:Or(A==null?void 0:A.content,g==null||(i=g.classNames)==null?void 0:i.content)},he.createElement("div",{"data-title":"",className:Or(A==null?void 0:A.title,g==null||(c=g.classNames)==null?void 0:c.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?he.createElement("div",{"data-description":"",className:Or(Y,Se,A==null?void 0:A.description,g==null||(u=g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),he.isValidElement(g.cancel)?g.cancel:g.cancel&&dh(g.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||k,onClick:Ze=>{dh(g.cancel)&&je&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Ze),ts())},className:Or(A==null?void 0:A.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,he.isValidElement(g.action)?g.action:g.action&&dh(g.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||O,onClick:Ze=>{dh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Ze),!Ze.defaultPrevented&&ts())},className:Or(A==null?void 0:A.actionButton,g==null||(h=g.classNames)==null?void 0:h.actionButton)},g.action.label):null)};function UN(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function v6(t,e){const s={};return[t,e].forEach((a,n)=>{const i=n===1,c=i?"--mobile-offset":"--offset",u=i?d6:u6;function f(h){["top","right","bottom","left"].forEach(p=>{s[`${c}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof a=="number"||typeof a=="string"?f(a):typeof a=="object"?["top","right","bottom","left"].forEach(h=>{a[h]===void 0?s[`${c}-${h}`]=u:s[`${c}-${h}`]=typeof a[h]=="number"?`${a[h]}px`:a[h]}):f(u)}),s}const b6=he.forwardRef(function(e,s){const{invert:a,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:c,closeButton:u,className:f,offset:h,mobileOffset:p,theme:g="light",richColors:x,duration:y,style:_,visibleToasts:j=c6,toastOptions:N,dir:S=UN(),gap:C=h6,icons:E,containerAriaLabel:M="Notifications"}=e,[R,P]=he.useState([]),$=he.useMemo(()=>Array.from(new Set([n].concat(R.filter(F=>F.position).map(F=>F.position)))),[R,n]),[k,O]=he.useState([]),[H,Y]=he.useState(!1),[I,z]=he.useState(!1),[ee,G]=he.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=he.useRef(null),B=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=he.useRef(null),W=he.useRef(!1),L=he.useCallback(F=>{P(ie=>{var se;return(se=ie.find(ue=>ue.id===F.id))!=null&&se.delete||ya.dismiss(F.id),ie.filter(({id:ue})=>ue!==F.id)})},[]);return he.useEffect(()=>ya.subscribe(F=>{if(F.dismiss){requestAnimationFrame(()=>{P(ie=>ie.map(se=>se.id===F.id?{...se,delete:!0}:se))});return}setTimeout(()=>{jE.flushSync(()=>{P(ie=>{const se=ie.findIndex(ue=>ue.id===F.id);return se!==-1?[...ie.slice(0,se),{...ie[se],...F},...ie.slice(se+1)]:[F,...ie]})})})}),[R]),he.useEffect(()=>{if(g!=="system"){G(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const F=window.matchMedia("(prefers-color-scheme: dark)");try{F.addEventListener("change",({matches:ie})=>{G(ie?"dark":"light")})}catch{F.addListener(({matches:se})=>{try{G(se?"dark":"light")}catch(ue){console.error(ue)}})}},[g]),he.useEffect(()=>{R.length<=1&&Y(!1)},[R]),he.useEffect(()=>{const F=ie=>{var se;if(i.every(re=>ie[re]||ie.code===re)){var le;Y(!0),(le=A.current)==null||le.focus()}ie.code==="Escape"&&(document.activeElement===A.current||(se=A.current)!=null&&se.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[i]),he.useEffect(()=>{if(A.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,W.current=!1)}},[A.current]),he.createElement("section",{ref:s,"aria-label":`${M} ${B}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},$.map((F,ie)=>{var se;const[ue,le]=F.split("-");return R.length?he.createElement("ol",{key:F,dir:S==="auto"?UN():S,tabIndex:-1,ref:A,className:f,"data-sonner-toaster":!0,"data-sonner-theme":ee,"data-y-position":ue,"data-x-position":le,style:{"--front-toast-height":`${((se=k[0])==null?void 0:se.height)||0}px`,"--width":`${f6}px`,"--gap":`${C}px`,..._,...v6(h,p)},onBlur:re=>{W.current&&!re.currentTarget.contains(re.relatedTarget)&&(W.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||W.current||(W.current=!0,V.current=re.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{I||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:re=>{re.target instanceof HTMLElement&&re.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},R.filter(re=>!re.position&&ie===0||re.position===F).map((re,de)=>{var ce,be;return he.createElement(x6,{key:re.id,icons:E,index:de,toast:re,defaultRichColors:x,duration:(ce=N==null?void 0:N.duration)!=null?ce:y,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:j,closeButton:(be=N==null?void 0:N.closeButton)!=null?be:u,interacting:I,position:F,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:L,toasts:R.filter(Ne=>Ne.position==re.position),heights:k.filter(Ne=>Ne.position==re.position),setHeights:O,expandByDefault:c,gap:C,expanded:H,swipeDirections:e.swipeDirections})})):null}))}),cC=b.createContext(null);function y6({children:t}){const[e,s]=b.useState({gameState:iC,loading:{loadProgress:!1,startGame:!1,performAction:!1,saveProgress:!1},error:null,gameMessage:"Bem-vindo ao Tower Trials! Crie um personagem para iniciar sua aventura.",gameLog:[{text:"Bem-vindo ao Tower Trials!",type:"system"}]}),a=(f,h)=>{s(p=>({...p,loading:{...p.loading,[f]:h}}))},n=f=>{s(h=>({...h,gameState:f}))},i=f=>{s(h=>({...h,error:f})),f&&me.error("Erro",{description:f})},c=()=>{s(f=>({...f,error:null}))},u=b.useMemo(()=>({gameState:e.gameState,loading:e.loading,error:e.error,setGameState:n,updateLoading:a,setError:i,resetError:c}),[e.gameState,e.loading,e.error]);return r.jsx(cC.Provider,{value:u,children:t})}function ub(){const t=b.useContext(cC);if(!t)throw new Error("useGameState deve ser usado dentro de um GameStateProvider");return t}const uC=b.createContext(null);function w6({children:t}){const[e,s]=b.useState(""),[a,n]=b.useState([]),i=b.useCallback((u,f="system")=>{n(h=>h.slice(-5).some(x=>x.text===u&&x.type===f)?h:[...h,{text:u,type:f}])},[]),c=b.useMemo(()=>({gameMessage:e,gameLog:a,addGameLogMessage:i,setGameMessage:s}),[e,a,i]);return r.jsx(uC.Provider,{value:c,children:t})}function db(){const t=b.useContext(uC);if(!t)throw new Error("useGameLog deve ser usado dentro de um LogProvider");return t}function so(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class Ft{static async getAvailableEquipment(e){try{const s=`level_${e}`,a=Date.now();if(a-this.lastFetchTimestamp<this.CACHE_DURATION&&this.equipmentCache.has(s))return this.equipmentCache.get(s)||[];const{data:n,error:i}=await we.from("equipment").select("*").lte("level_requirement",e).eq("is_unlocked",!0).eq("craftable",!1).order("level_requirement",{ascending:!0});if(i)throw i;const c=n;return this.equipmentCache.set(s,c),this.lastFetchTimestamp=a,c}catch(s){return console.error("Erro ao buscar equipamentos:",s instanceof Error?s.message:s),[]}}static async getEquipmentCraftingRecipes(){try{const{data:e,error:s}=await we.from("equipment_crafting_recipes").select(`
                    *,
                    equipment:result_equipment_id (*),
                    ingredients:equipment_crafting_ingredients (*)
                `).order("name");if(s)throw s;return{data:e,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas de equipamentos:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas de equipamentos",success:!1}}}static async canCraftEquipment(e,s){try{const{data:a,error:n}=await we.rpc("check_can_craft_equipment",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar crafting de equipamento:",a),{data:null,error:so(a,"Erro ao verificar crafting de equipamento"),success:!1}}}static async craftEquipment(e,s){try{const{error:a}=await we.rpc("craft_equipment",{p_character_id:e,p_recipe_id:s});if(a)throw a;return{data:{message:"Equipamento criado com sucesso!"},error:null,success:!0}}catch(a){return console.error("Erro ao craftar equipamento:",a),{data:null,error:so(a,"Erro ao craftar equipamento"),success:!1}}}static async getCharacterEquipment(e){try{const{data:s,error:a}=await we.from("character_equipment").select(`
                    *,
                    equipment:equipment_id (*)
                `).eq("character_id",e).order("created_at",{ascending:!1});if(a)throw a;return s}catch(s){return console.error("Erro ao buscar equipamentos do personagem:",s instanceof Error?s.message:s),[]}}static async getEquippedItems(e){try{const{data:s,error:a}=await we.rpc("get_equipped_slots",{p_character_id:e});if(a)throw a;const n={};return s&&Array.isArray(s)&&s.forEach(i=>{const c={id:i.equipment_id,name:i.equipment_name,description:"",type:i.equipment_type,weapon_subtype:i.weapon_subtype,rarity:i.rarity,level_requirement:0,atk_bonus:i.atk_bonus,def_bonus:i.def_bonus,mana_bonus:i.mana_bonus,speed_bonus:i.speed_bonus,hp_bonus:i.hp_bonus,critical_chance_bonus:i.critical_chance_bonus,critical_damage_bonus:i.critical_damage_bonus,double_attack_chance_bonus:i.double_attack_chance_bonus,magic_damage_bonus:i.magic_damage_bonus,price:0,is_unlocked:!0,created_at:"",updated_at:""};n[i.slot_type]=c}),n}catch(s){return console.error("Erro ao buscar equipamentos equipados:",s instanceof Error?s.message:s),{}}}static async toggleEquipment(e,s,a,n){try{const{error:i}=await we.rpc("toggle_equipment",{p_character_id:e,p_equipment_id:s,p_equip:a,p_slot_type:n});if(i)throw i;return{data:a?"Item equipado com sucesso!":"Item desequipado com sucesso!",error:null,success:!0}}catch(i){return console.error("Erro ao equipar/desequipar item:",i),{data:null,error:so(i,"Erro ao equipar/desequipar item"),success:!1}}}static async buyEquipment(e,s){try{const{data:a,error:n}=await we.from("equipment").select("price").eq("id",s).single();if(n)throw new Error(`Erro ao buscar equipamento: ${n.message}`);if(!a)throw new Error("Equipamento no encontrado");const{data:i,error:c}=await we.rpc("buy_equipment",{p_character_id:e,p_equipment_id:s,p_price:a.price});if(c)throw c;return{data:{newGold:i},error:null,success:!0}}catch(a){return console.error("Erro ao comprar equipamento:",a),{data:null,error:so(a,"Erro ao comprar equipamento"),success:!1}}}static async sellEquipment(e,s){try{const{data:a,error:n}=await we.rpc("sell_equipment",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:{newGold:a},error:null,success:!0}}catch(a){return console.error("Erro ao vender equipamento:",a),{data:null,error:so(a,"Erro ao vender equipamento"),success:!1}}}static async canEquipItem(e,s){try{const{data:a,error:n}=await we.rpc("can_equip_item",{p_character_id:e,p_equipment_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar se pode equipar item:",a),{data:null,error:so(a,"Erro ao verificar se pode equipar item"),success:!1}}}static async getAllEquipments(){try{const{data:e,error:s}=await we.from("equipment").select("*").order("name");if(s)throw s;return e}catch(e){return console.error("Erro ao buscar todos os equipamentos:",e instanceof Error?e.message:e),[]}}static clearCache(){this.equipmentCache.clear(),this.lastFetchTimestamp=0}static async compareEquipmentStats(e,s,a){try{const{data:n,error:i}=await we.rpc("compare_equipment_stats",{p_character_id:e,p_new_equipment_id:s,p_slot_type:a});return i?(console.error("[EquipmentService] Erro ao comparar equipamentos:",i),{success:!1,error:i.message,data:null}):{success:!0,error:null,data:n||[]}}catch(n){return console.error("[EquipmentService] Erro na comparao de equipamentos:",n),{success:!1,error:so(n,"Erro ao comparar equipamentos"),data:null}}}static async getEquipmentBonuses(e){try{const{data:s,error:a}=await we.rpc("calculate_equipment_bonuses_enhanced",{p_character_id:e});return a?(console.error("[EquipmentService] Erro ao calcular bnus:",a),{success:!1,error:a.message,data:null}):{success:!0,error:null,data:(s==null?void 0:s[0])||{total_atk_bonus:0,total_def_bonus:0,total_mana_bonus:0,total_speed_bonus:0,total_hp_bonus:0,total_critical_chance_bonus:0,total_critical_damage_bonus:0,total_double_attack_chance_bonus:0,total_magic_damage_bonus:0}}}catch(s){return console.error("[EquipmentService] Erro ao obter bnus:",s),{success:!1,error:so(s,"Erro ao obter bnus de equipamentos"),data:null}}}}yt(Ft,"equipmentCache",new Map),yt(Ft,"lastFetchTimestamp",0),yt(Ft,"CACHE_DURATION",3e5);const _6=t=>{const e={hp:0,max_hp:0,mana:0,max_mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,double_attack_chance:0,magic_damage:0},s=(a,n=!1)=>{if(!a)return;const i=n&&a.type==="weapon"?.8:1,c=n&&a.type==="armor"?1:i;e.hp+=Math.floor(a.hp_bonus*c),e.max_hp+=Math.floor(a.hp_bonus*c),e.mana+=Math.floor(a.mana_bonus*c),e.max_mana+=Math.floor(a.mana_bonus*c),e.atk+=Math.floor(a.atk_bonus*c),e.def+=Math.floor(a.def_bonus*c),e.speed+=Math.floor(a.speed_bonus*c),e.critical_chance+=a.critical_chance_bonus*c,e.critical_damage+=a.critical_damage_bonus*c,e.double_attack_chance+=a.double_attack_chance_bonus*c,e.magic_damage+=a.magic_damage_bonus*c};return s(t.main_hand??null,!1),s(t.off_hand??null,!0),s(t.armor??null,!1),s(t.accessory??null,!1),s(t.accessory_2??null,!1),e},nx=Object.freeze(Object.defineProperty({__proto__:null,EquipmentService:Ft,calculateEquipmentBonus:_6},Symbol.toStringTag,{value:"Module"}));class tr{static validateCharacterName(e){if(!e||typeof e!="string")return{isValid:!1,error:"Nome  obrigatrio"};const s=e.trim();if(s.length<3)return{isValid:!1,error:"Nome deve ter pelo menos 3 caracteres"};if(s.length>20)return{isValid:!1,error:"Nome deve ter no mximo 20 caracteres"};for(const u of this.INVALID_PATTERNS)if(u.test(s))return{isValid:!1,error:this.getPatternError(u)};const a=s.toLowerCase().split(/[\s\-']+/);for(const u of a)if(this.BLACKLIST_WORDS.includes(u))return{isValid:!1,error:"Nome contm palavras inadequadas"};const n=s.toLowerCase().replace(/[\s\-']/g,"");for(const u of this.BLACKLIST_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contm termos inadequados"};for(const u of this.RESERVED_WORDS)if(n.includes(u))return{isValid:!1,error:"Nome contm termos reservados do sistema"};if(!/[a-zA-Z-]/.test(s))return{isValid:!1,error:"Nome deve conter pelo menos uma letra"};const i=(s.match(/[a-zA-Z-]/g)||[]).length;return(s.match(/[0-9]/g)||[]).length>i?{isValid:!1,error:"Nome no pode ter mais nmeros que letras"}:{isValid:!0}}static getPatternError(e){const s=e.toString();return s.includes("^[0-9]+$")?"Nome no pode ser apenas nmeros":s.includes("^[^a-zA-Z-]")?"Nome deve comear com uma letra":s.includes("[^a-zA-Z-0-9\\s'\\-]")?"Nome contm caracteres especiais no permitidos":s.includes("\\d{3,}")?"Nome no pode ter mais de 2 nmeros consecutivos":s.includes("(.)\\1{3,}")?"Nome no pode ter mais de 3 caracteres iguais seguidos":s.includes("^\\s|\\s$")?"Nome no pode comear ou terminar com espaos":s.includes("\\s{2,}")?"Nome no pode ter espaos mltiplos":"Nome contm formato invlido"}static formatCharacterName(e){if(!e)return"";let s=e.trim().replace(/\s+/g," ");return s=s.replace(/\b\w/g,a=>a.toUpperCase()),s}static generateNameSuggestions(e){const s=[],a=e.replace(/[^a-zA-Z-]/g,"");if(a.length>=3){for(let i=1;i<=3;i++){const c=Math.floor(Math.random()*100);s.push(this.formatCharacterName(a+c))}const n=["Jr","II","III","X","Prime","Neo"];for(const i of n.slice(0,2))s.push(this.formatCharacterName(a+i))}if(s.length===0){const n=["Aventureiro","Guerreiro","Explorador","Heroi","Campeao","Bravo","Valente","Nobre","Lenda","Mestre"];for(let i=0;i<3;i++){const c=n[Math.floor(Math.random()*n.length)],u=Math.floor(Math.random()*1e3);s.push(`${c}${u}`)}}return s.slice(0,3)}static isTooSimilar(e,s){const a=e.toLowerCase().replace(/[^a-zA-Z-0-9]/g,"");for(const n of s){const i=n.toLowerCase().replace(/[^a-zA-Z-0-9]/g,"");if(a===i||this.calculateSimilarity(a,i)>.8)return!0}return!1}static calculateSimilarity(e,s){const a=e.length>s.length?e:s,n=e.length>s.length?s:e;if(a.length===0)return 1;const i=this.levenshteinDistance(a,n);return(a.length-i)/a.length}static levenshteinDistance(e,s){const a=Array(s.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let n=0;n<=e.length;n+=1)a[0][n]=n;for(let n=0;n<=s.length;n+=1)a[n][0]=n;for(let n=1;n<=s.length;n+=1)for(let i=1;i<=e.length;i+=1){const c=e[i-1]===s[n-1]?0:1;a[n][i]=Math.min(a[n][i-1]+1,a[n-1][i]+1,a[n-1][i-1]+c)}return a[s.length][e.length]}}yt(tr,"BLACKLIST_WORDS",["porra","merda","caralho","puta","putaria","viado","bicha","cu","buceta","piroca","pinto","rola","foda","foder","fodido","cuzao","cuzo","babaca","otario","otrio","idiota","imbecil","retardado","mongoloide","burro","desgraa","desgraado","filho da puta","fdp","vagabundo","safado","cachorro","cadela","prostituta","vagabunda","piranha","galinha","fuck","shit","bitch","damn","hell","ass","asshole","bastard","crap","piss","dick","cock","pussy","cunt","whore","slut","fag","faggot","nigger","retard","moron","idiot","stupid","gay","lesbian","homo","nazi","hitler","rape","kill","murder","mierda","joder","puta","puto","cabron","cabrn","pendejo","idiota","estupido","estpido","culo","coo","verga","chingar","pinche","mamada","putada","hijo de puta","hdp","marica","maricon","maricn","droga","cocaina","heroina","crack","cocaine","heroin","drug","dealer","traficante","sexo","sex","porn","porno","nude","naked","xxx","fetish","admin","moderador","mod","gm","gamemaster","suporte","support","oficial","staff","dev","developer","bot","sistema","system"]),yt(tr,"RESERVED_WORDS",["admin","administrator","moderador","moderator","mod","gm","gamemaster","suporte","support","help","ajuda","oficial","official","staff","dev","developer","sistema","system","bot","null","undefined","test","teste","demo","sample","example","exemplo","guest","visitante","player","jogador","user","usuario","usurio","npc","monster","monstro"]),yt(tr,"INVALID_PATTERNS",[/^[0-9]+$/,/^[^a-zA-Z-]/,/[^a-zA-Z-0-9\s'-]/,/\d{3,}/,/(.)\1{3,}/,/^\s|\s$/,/\s{2,}/]);class at{static async getUserCharacterProgression(e){try{const{data:s,error:a}=await we.rpc("get_user_character_progression",{p_user_id:e}).single();if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar progresso de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar progresso",success:!1}}}static async checkCharacterLimit(e){try{const{data:s,error:a}=await we.rpc("check_character_limit",{p_user_id:e}).single();if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao verificar limite de personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao verificar limite",success:!1}}}static async getUserCharacters(e){try{const s=Date.now(),a=`user_${e}`,n=this.lastFetchTimestamp.get(a)||0;if(s-n<this.CACHE_DURATION){const u=Array.from(this.characterCache.values()).filter(f=>f.user_id===e);if(u.length>0)return console.log(`[CharacterService] Usando lista de personagens em cache para usurio ${e}`),{data:u,error:null,success:!0}}const{data:i,error:c}=await we.rpc("get_user_characters",{p_user_id:e});if(c)throw c;return this.characterCache.clear(),i.forEach(u=>{this.characterCache.set(u.id,u)}),this.lastFetchTimestamp.set(a,s),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagens:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagens",success:!1}}}static async getCharacter(e){try{const s=this.characterCache.get(e),a=Date.now(),n=this.lastFetchTimestamp.get(e)||0;if(s&&a-n<this.CACHE_DURATION)return console.log(`[CharacterService] Usando personagem em cache: ${s.name} (andar: ${s.floor})`),{data:s,error:null,success:!0};if(this.pendingRequests.has(e))return console.log(`[CharacterService] Reutilizando requisio pendente para personagem ${e}`),this.pendingRequests.get(e);const i=this.fetchCharacterFromServer(e);this.pendingRequests.set(e,i),i.finally(()=>{this.pendingRequests.delete(e)});const c=await i;if(c.success&&c.data){console.log(`[CharacterService] Aplicando cura automtica para ${c.data.name}`);const u=await this.applyAutoHeal(e);if(u.success&&u.data&&u.data.healed){console.log(`[CharacterService] ${c.data.name} curado: ${u.data.oldHp} -> ${u.data.newHp} HP`);const f=u.data.newHp-u.data.oldHp,h=f/c.data.max_hp*100;return h>=5&&console.log(`[CharacterService] Cura significativa detectada: +${f} HP (${h.toFixed(1)}%)`),{data:u.data.character,error:null,success:!0}}}return c}catch(s){return console.error("Erro ao buscar personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async fetchCharacterFromServer(e){try{console.log(`[CharacterService] Buscando personagem ${e} do servidor`);const{data:s,error:a}=await we.rpc("get_character_full_stats",{p_character_id:e}).single();if(a)throw a;if(!s)return{data:null,error:"Personagem no encontrado",success:!1};const n=s,i={id:n.character_id,user_id:"",name:n.name,level:n.level,xp:n.xp,xp_next_level:n.xp_next_level,gold:n.gold,hp:n.hp,max_hp:n.max_hp,mana:n.mana,max_mana:n.max_mana,atk:n.atk,def:n.def,speed:n.speed,floor:1,strength:n.strength,dexterity:n.dexterity,intelligence:n.intelligence,wisdom:n.wisdom,vitality:n.vitality,luck:n.luck,attribute_points:n.attribute_points||0,critical_chance:n.critical_chance,critical_damage:n.critical_damage,sword_mastery:n.sword_mastery,axe_mastery:n.axe_mastery,blunt_mastery:n.blunt_mastery,defense_mastery:n.defense_mastery,magic_mastery:n.magic_mastery,sword_mastery_xp:n.sword_mastery_xp,axe_mastery_xp:n.axe_mastery_xp,blunt_mastery_xp:n.blunt_mastery_xp,defense_mastery_xp:n.defense_mastery_xp,magic_mastery_xp:n.magic_mastery_xp,is_alive:!0,created_at:"",updated_at:"",last_activity:void 0},{data:c,error:u}=await we.rpc("get_character",{p_character_id:i.id}).single();if(!u&&c){const f=c;i.user_id=f.user_id,i.floor=f.floor,i.created_at=f.created_at,i.updated_at=f.updated_at,i.last_activity=f.last_activity}return console.log(`[CharacterService] Personagem carregado do servidor: ${i.name} (andar: ${i.floor}) com crtico: ${i.critical_chance}`),this.characterCache.set(e,i),this.lastFetchTimestamp.set(e,Date.now()),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao buscar personagem do servidor:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar personagem",success:!1}}}static async createCharacter(e){var s,a,n;try{const i=tr.validateCharacterName(e.name);if(!i.isValid)return{data:null,error:i.error||"Nome invlido",success:!1};const c=await this.checkCharacterLimit(e.user_id);if(!c.success||!((s=c.data)!=null&&s.can_create)){const g=((a=c.data)==null?void 0:a.next_slot_required_level)||0;return{data:null,error:`Limite de personagens atingido. Para criar o ${(((n=c.data)==null?void 0:n.available_slots)||3)+1} personagem, voc precisa de ${g} nveis totais entre todos os seus personagens.`,success:!1}}const u=tr.formatCharacterName(e.name),f=await this.getUserCharacters(e.user_id);if(f.success&&f.data&&f.data.length>0){const g=f.data.map(x=>x.name);if(tr.isTooSimilar(u,g))return{data:null,error:`Nome muito similar a um personagem existente. Sugestes: ${tr.generateNameSuggestions(u).join(", ")}`,success:!1}}const{data:h,error:p}=await we.rpc("create_character",{p_user_id:e.user_id,p_name:u});if(p){if(p.message.includes("Nome"))return{data:null,error:p.message,success:!1};if(p.message.includes("Limite")||p.message.includes("personagem"))return{data:null,error:p.message,success:!1};throw p}return this.invalidateUserCache(e.user_id),{data:{id:h},error:null,success:!0}}catch(i){return console.error("Erro ao criar personagem:",i instanceof Error?i.message:i),{data:null,error:i instanceof Error?i.message:"Erro ao criar personagem",success:!1}}}static async loadCharacter(e){const{data:s,error:a}=await we.from("characters").select("*").eq("id",e).single();if(a)throw a;const n=await Ft.getEquippedItems(e),i=Array.isArray(n)?n:Object.values(n||{}),c=UL(s.level);return{...s,equipment_slots:i,...c}}static async grantSecureXP(e,s,a="combat"){try{const{supabaseAdmin:n}=await Us(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>rd);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_grant_xp",{p_character_id:e,p_xp_amount:s,p_source:a}).single();if(c)throw c;this.invalidateCharacterCache(e);const u=i;if(u.leveled_up||u.slots_unlocked){const f=await this.getCharacter(e);f.success&&f.data&&this.invalidateUserCache(f.data.user_id)}return{data:u,error:null,success:!0}}catch(n){return console.error("Erro ao conceder XP:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder XP",success:!1}}}static async grantSecureGold(e,s,a="combat"){try{const{supabaseAdmin:n}=await Us(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>rd);return{supabaseAdmin:u}},void 0),{data:i,error:c}=await n.rpc("secure_grant_gold",{p_character_id:e,p_gold_amount:s,p_source:a}).single();if(c)throw c;return this.invalidateCharacterCache(e),{data:i,error:null,success:!0}}catch(n){return console.error("Erro ao conceder gold:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao conceder gold",success:!1}}}static async updateCharacterHpMana(e,s,a){try{if(!e)return{success:!1,error:"ID do personagem  obrigatrio",data:null};const n=s!==void 0?Math.floor(Number(s)):void 0,i=a!==void 0?Math.floor(Number(a)):void 0;if(n!==void 0&&(n<0||n>9999))return{success:!1,error:"Valor de HP invlido",data:null};if(i!==void 0&&(i<0||i>9999))return{success:!1,error:"Valor de Mana invlido",data:null};const{error:c}=await we.rpc("internal_update_character_hp_mana",{p_character_id:e,p_hp:n,p_mana:i});return c?(console.error("Erro ao atualizar HP/Mana:",c),{success:!1,error:`Erro ao atualizar stats: ${c.message}`,data:null}):(this.invalidateCharacterCache(e),{success:!0,error:null,data:null})}catch(n){return console.error("Erro ao atualizar HP/Mana do personagem:",n),{success:!1,error:n instanceof Error?n.message:"Erro desconhecido ao atualizar HP/Mana",data:null}}}static async updateCharacterFloor(e,s){try{console.log(`[CharacterService] Atualizando andar seguramente - ID: ${e}, Andar: ${s}`);const{supabaseAdmin:a}=await Us(async()=>{const{supabaseAdmin:i}=await Promise.resolve().then(()=>rd);return{supabaseAdmin:i}},void 0),{error:n}=await a.rpc("secure_advance_floor",{p_character_id:e,p_new_floor:s});if(n)throw console.error("[CharacterService] Erro na funo secure_advance_floor:",n.message),n;return this.invalidateCharacterCache(e),console.log(`[CharacterService] Andar atualizado com segurana para ${s}`),{data:null,error:null,success:!0}}catch(a){const n=a instanceof Error?a.message:"Erro desconhecido";return console.error("[CharacterService] Erro ao atualizar andar:",n),{data:null,error:n,success:!1}}}static async updateGold(e,s){const{error:a}=await we.from("characters").update({gold:s}).eq("id",e);if(a)throw a}static async deleteCharacter(e){try{const s=await this.getCharacter(e);if(s.success&&s.data&&s.data.floor>0){console.log(`[CharacterService] Salvando personagem ${s.data.name} no ranking histrico antes de deletar`);try{const{error:n}=await we.rpc("save_ranking_entry_on_death",{p_character_id:e});n?console.error("Erro ao salvar no ranking histrico:",n):console.log(`[CharacterService] Personagem ${s.data.name} salvo no ranking histrico com sucesso`)}catch(n){console.error("Erro ao salvar no ranking histrico:",n)}}const{error:a}=await we.rpc("delete_character",{p_character_id:e});if(a)throw a;return this.invalidateCharacterCache(e),s.success&&s.data&&this.invalidateUserCache(s.data.user_id),console.log(`[CharacterService] Personagem deletado com sucesso: ${e}`),{error:null}}catch(s){return console.error("Erro ao deletar personagem:",s instanceof Error?s.message:s),{error:s instanceof Error?s.message:"Erro ao deletar personagem"}}}static invalidateCharacterCache(e){this.cacheInvalidationQueue.add(e),this.cacheInvalidationTimer&&clearTimeout(this.cacheInvalidationTimer),this.cacheInvalidationTimer=setTimeout(()=>{const s=Array.from(this.cacheInvalidationQueue);this.cacheInvalidationQueue.clear(),this.cacheInvalidationTimer=null,s.forEach(a=>{this.characterCache.delete(a),this.lastFetchTimestamp.delete(a)}),s.length>0&&console.log(`[CharacterService] Cache invalidado para ${s.length} personagens: ${s.join(", ")}`)},this.CACHE_INVALIDATION_DELAY)}static invalidateUserCache(e){const s=`user_${e}`;this.lastFetchTimestamp.delete(s);const a=[];Array.from(this.characterCache.entries()).forEach(([n,i])=>{i.user_id===e&&a.push(n)}),a.forEach(n=>this.invalidateCharacterCache(n)),console.log(`[CharacterService] Cache de usurio ${e} invalidado (${a.length} personagens)`)}static clearAllCache(){this.characterCache.clear(),this.lastFetchTimestamp.clear(),this.pendingRequests.clear(),console.log("[CharacterService] Todo o cache foi limpo")}static async getUnlockedCheckpoints(e){try{console.log(`[CharacterService] Obtendo checkpoints para personagem ${e}`);try{const{data:c,error:u}=await we.rpc("get_character_unlocked_checkpoints",{p_character_id:e});if(!u&&c){const f=c.map(h=>({floor:h.floor_number,description:h.description}));return console.log("[CharacterService] Checkpoints obtidos via RPC:",f),{data:f,error:null,success:!0}}else u&&console.warn("[CharacterService] Erro na RPC get_character_unlocked_checkpoints:",u)}catch(c){console.warn("[CharacterService] Funo RPC no disponvel, usando fallback:",c)}console.log("[CharacterService] Usando fallback para calcular checkpoints");const s=await this.getCharacter(e);if(!s.success||!s.data)return{data:null,error:"Personagem no encontrado",success:!1};const a=s.data,n=Math.max(a.floor,("highest_floor"in a?a.highest_floor:a.floor)||a.floor);console.log(`[CharacterService] Andar atual: ${a.floor}, Highest floor: ${n}`);const i=[];i.push({floor:1,description:"Andar 1 - Incio da Torre"});for(let c=1;c<=100;c++){const u=c*10,f=u+1;if(n>=f)i.push({floor:f,description:`Andar ${f} - Checkpoint Ps-Boss`}),console.log(`[CharacterService] Checkpoint ${f} desbloqueado (passou do boss ${u})`);else break}return console.log("[CharacterService] Checkpoints finais calculados:",i),{data:i,error:null,success:!0}}catch(s){return console.error("Erro ao obter checkpoints:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao obter checkpoints",success:!1}}}static async startFromCheckpoint(e,s){try{if(!(s===1||s>10&&(s-1)%10===0))return{data:null,error:"Checkpoint invlido",success:!1};const n=await this.getUnlockedCheckpoints(e);return!n.success||!n.data?{data:null,error:"Erro ao verificar checkpoints",success:!1}:n.data.some(u=>u.floor===s)?await this.updateCharacterFloor(e,s):{data:null,error:"Checkpoint no desbloqueado",success:!1}}catch(a){return console.error("Erro ao iniciar do checkpoint:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao iniciar do checkpoint",success:!1}}}static calculateAutoHeal(e,s){if(!e.last_activity)return{hp:e.hp,mana:e.mana};if(e.hp>=e.max_hp&&e.mana>=e.max_mana)return{hp:e.hp,mana:e.mana};const a=new Date(e.last_activity),n=s.getTime()-a.getTime(),i=Math.floor(n/1e3);if(i<1)return{hp:e.hp,mana:e.mana};const u=2*3600,f=.1,h=100;let p=e.hp;if(e.hp<e.max_hp){const x=Math.max(e.hp,Math.ceil(e.max_hp*(f/100))),y=x/e.max_hp*100,_=(h-f)/u,j=Math.min(_*i,h-y),N=Math.floor(j/100*e.max_hp);p=Math.min(e.max_hp,x+N)}let g=e.mana;if(e.mana<e.max_mana){const x=Math.max(e.mana,Math.ceil(e.max_mana*(f/100))),y=x/e.max_mana*100,_=(h-f)/u,j=Math.min(_*i,h-y),N=Math.floor(j/100*e.max_mana);g=Math.min(e.max_mana,x+N)}return(p>e.hp||g>e.mana)&&console.log(`[AutoHeal] ${e.name}: HP ${e.hp} -> ${p} (+${p-e.hp}), Mana ${e.mana} -> ${g} (+${g-e.mana}) aps ${Math.floor(i/60)}min`),{hp:p,mana:g}}static async applyAutoHeal(e){try{const s=await this.getCharacter(e);if(!s.success||!s.data)return{data:null,error:"Personagem no encontrado",success:!1};const a=s.data,n=new Date,{hp:i,mana:c}=this.calculateAutoHeal(a,n);if(i===a.hp&&c===a.mana)return{data:{healed:!1,oldHp:a.hp,newHp:a.hp,character:a},error:null,success:!0};const u=await this.updateCharacterHpMana(e,i,c);if(!u.success)throw new Error(u.error||"Erro ao atualizar HP/Mana");await this.updateLastActivity(e),this.invalidateCharacterCache(e);const f={...a,hp:i,mana:c,last_activity:n.toISOString()};return{data:{healed:!0,oldHp:a.hp,newHp:i,character:f},error:null,success:!0}}catch(s){return console.error("Erro ao aplicar cura automtica:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao aplicar cura automtica",success:!1}}}static async updateLastActivity(e){try{const{error:s}=await we.rpc("update_character_activity",{p_character_id:e});if(s)throw s;return this.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao atualizar ltima atividade:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao atualizar ltima atividade",success:!1}}}static async getCharacterStats(e){try{const s=await this.getCharacterForGame(e);if(!s.success||!s.data)return{success:!1,error:s.error||"Erro ao carregar dados do personagem",data:null};const a=s.data,n={level:a.level,xp:a.xp,xp_next_level:a.xp_next_level,gold:a.gold,hp:a.hp,max_hp:a.max_hp,mana:a.mana,max_mana:a.max_mana,atk:a.atk,def:a.def,speed:a.speed,strength:a.strength||10,dexterity:a.dexterity||10,intelligence:a.intelligence||10,wisdom:a.wisdom||10,vitality:a.vitality||10,luck:a.luck||10,attribute_points:a.attribute_points||0,critical_chance:a.critical_chance||0,critical_damage:a.critical_damage||0,magic_damage_bonus:a.magic_damage_bonus||0,magic_attack:a.magic_attack||0,sword_mastery:a.sword_mastery||1,axe_mastery:a.axe_mastery||1,blunt_mastery:a.blunt_mastery||1,defense_mastery:a.defense_mastery||1,magic_mastery:a.magic_mastery||1,sword_mastery_xp:a.sword_mastery_xp||0,axe_mastery_xp:a.axe_mastery_xp||0,blunt_mastery_xp:a.blunt_mastery_xp||0,defense_mastery_xp:a.defense_mastery_xp||0,magic_mastery_xp:a.magic_mastery_xp||0,base_hp:a.base_hp||a.base_max_hp,base_max_hp:a.base_max_hp,base_mana:a.base_mana||a.base_max_mana,base_max_mana:a.base_max_mana,base_atk:a.base_atk,base_def:a.base_def,base_speed:a.base_speed,equipment_hp_bonus:a.equipment_hp_bonus||0,equipment_mana_bonus:a.equipment_mana_bonus||0,equipment_atk_bonus:a.equipment_atk_bonus||0,equipment_def_bonus:a.equipment_def_bonus||0,equipment_speed_bonus:a.equipment_speed_bonus||0};return console.log(`[CharacterService] Stats unificados para ${a.name}:`,{critical_damage:n.critical_damage,fonte:"getCharacterForGame (nica fonte da verdade)"}),{success:!0,error:null,data:n}}catch(s){return console.error("Erro ao buscar stats do personagem:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async getCharacterForGame(e){try{const{data:s,error:a}=await we.from("characters").select("*").eq("id",e).single();if(a)throw a;if(!s)return{success:!1,error:"Personagem no encontrado",data:null};const{EquipmentService:n}=await Us(async()=>{const{EquipmentService:x}=await Promise.resolve().then(()=>nx);return{EquipmentService:x}},void 0),i=await n.getEquipmentBonuses(e),c=i.success&&i.data?i.data:{total_atk_bonus:0,total_def_bonus:0,total_mana_bonus:0,total_speed_bonus:0,total_hp_bonus:0,total_critical_chance_bonus:0,total_critical_damage_bonus:0,total_double_attack_chance_bonus:0,total_magic_damage_bonus:0},u=await this.calculateDerivedStats(s),f={hp:u.hp+c.total_hp_bonus,max_hp:u.max_hp+c.total_hp_bonus,mana:u.mana+c.total_mana_bonus,max_mana:u.max_mana+c.total_mana_bonus,atk:u.atk+c.total_atk_bonus,def:u.def+c.total_def_bonus,speed:u.speed+c.total_speed_bonus,magic_attack:u.magic_attack,critical_chance:u.critical_chance+c.total_critical_chance_bonus,critical_damage:u.critical_damage+c.total_critical_damage_bonus,magic_damage_bonus:u.magic_damage_bonus+c.total_magic_damage_bonus,double_attack_chance:u.double_attack_chance+c.total_double_attack_chance_bonus},h=await Us(()=>Promise.resolve().then(()=>N6),void 0).then(x=>x.SpellService.getCharacterEquippedSpells(e)),p=h.success&&h.data?h.data:[],g={id:s.id,user_id:s.user_id,name:s.name,level:s.level,xp:s.xp,xp_next_level:s.xp_next_level,gold:s.gold,hp:f.hp,max_hp:f.max_hp,mana:f.mana,max_mana:f.max_mana,atk:f.atk,def:f.def,speed:f.speed,created_at:s.created_at,updated_at:s.updated_at,isPlayerTurn:!0,specialCooldown:0,defenseCooldown:0,isDefending:!1,floor:s.floor,spells:p,consumables:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},strength:s.strength||10,dexterity:s.dexterity||10,intelligence:s.intelligence||10,wisdom:s.wisdom||10,vitality:s.vitality||10,luck:s.luck||10,attribute_points:s.attribute_points||0,sword_mastery:s.sword_mastery||1,axe_mastery:s.axe_mastery||1,blunt_mastery:s.blunt_mastery||1,defense_mastery:s.defense_mastery||1,magic_mastery:s.magic_mastery||1,sword_mastery_xp:s.sword_mastery_xp||0,axe_mastery_xp:s.axe_mastery_xp||0,blunt_mastery_xp:s.blunt_mastery_xp||0,defense_mastery_xp:s.defense_mastery_xp||0,magic_mastery_xp:s.magic_mastery_xp||0,critical_chance:f.critical_chance,critical_damage:f.critical_damage,magic_damage_bonus:f.magic_damage_bonus,magic_attack:f.magic_attack,double_attack_chance:f.double_attack_chance,base_hp:u.hp,base_max_hp:u.max_hp,base_mana:u.mana,base_max_mana:u.max_mana,base_atk:u.atk,base_def:u.def,base_speed:u.speed,equipment_hp_bonus:c.total_hp_bonus,equipment_mana_bonus:c.total_mana_bonus,equipment_atk_bonus:c.total_atk_bonus,equipment_def_bonus:c.total_def_bonus,equipment_speed_bonus:c.total_speed_bonus};return console.log(`[CharacterService] GamePlayer criado para ${g.name}:`,{level:g.level,base_atk:g.base_atk,equipment_atk_bonus:g.equipment_atk_bonus,final_atk:g.atk,final_critical_damage:g.critical_damage}),{success:!0,error:null,data:g}}catch(s){return console.error("Erro ao buscar personagem para o jogo:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async distributeAttributePoints(e,s){try{const{data:a,error:n}=await we.rpc("distribute_attribute_points",{p_character_id:e,p_strength:s.strength,p_dexterity:s.dexterity,p_intelligence:s.intelligence,p_wisdom:s.wisdom,p_vitality:s.vitality,p_luck:s.luck}).single();if(n)throw n;return this.invalidateCharacterCache(e),{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao distribuir pontos de atributo:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao distribuir pontos",success:!1}}}static async addSkillXp(e,s,a){try{const{data:n,error:i}=await we.rpc("add_skill_xp",{p_character_id:e,p_skill_type:s,p_xp_amount:a}).single();if(i)throw i;return n&&n.skill_leveled_up&&this.invalidateCharacterCache(e),{data:n,error:null,success:!0}}catch(n){return console.error("Erro ao adicionar XP de habilidade:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao adicionar XP",success:!1}}}static async recalculateCharacterStats(e){try{const{error:s}=await we.rpc("recalculate_character_stats",{p_character_id:e});if(s)throw s;return this.invalidateCharacterCache(e),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao recalcular stats:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao recalcular stats",success:!1}}}static async resetCharacterProgress(e){try{const s=await this.updateCharacterFloor(e,1);if(!s.success)return s;const a=await this.getCharacter(e);return a.success&&a.data&&await this.updateCharacterHpMana(e,a.data.max_hp,a.data.max_mana),{data:null,error:null,success:!0}}catch(s){return console.error("Erro ao resetar progresso do personagem:",s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao resetar progresso",success:!1}}}static async calculateDerivedStats(e){try{return console.log("[CharacterService] Calculando stats derivados para:",{id:e.id,level:e.level,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,sword_mastery:e.sword_mastery,axe_mastery:e.axe_mastery,blunt_mastery:e.blunt_mastery,defense_mastery:e.defense_mastery,magic_mastery:e.magic_mastery}),console.log("[CharacterService] Usando clculo fallback para garantir consistncia"),await this.calculateDerivedStatsFallback(e)}catch(s){return console.error("[CharacterService] Erro no clculo de stats derivados:",s),await this.calculateDerivedStatsFallback(e)}}static async calculateDerivedStatsFallback(e){const s=e.level,a=e.strength||10,n=e.dexterity||10,i=e.intelligence||10,c=e.wisdom||10,u=e.vitality||10,f=e.luck||10,h=a+n+i+c+u+f,p=1-(Math.abs(a/h-1/6)+Math.abs(n/h-1/6)+Math.abs(i/h-1/6)+Math.abs(c/h-1/6)+Math.abs(u/h-1/6)+Math.abs(f/h-1/6))/2,g=1+p*.2;let x=1;Math.max(a/h,n/h,i/h,c/h,u/h,f/h)>.8&&(x=.7),console.log(`[CharacterService] Build analysis - Diversidade: ${(p*100).toFixed(1)}%, Mono-penalty: ${x}`);const _=Math.pow(a,1.2)*g*x,j=Math.pow(n,1.15)*g*x,N=Math.pow(i,1.25)*g*x,S=Math.pow(c,1.1)*g*x,C=Math.pow(u,1.3)*g*x,E=f*g*x,M=e.sword_mastery||1,R=e.axe_mastery||1,P=e.blunt_mastery||1,$=e.defense_mastery||1,k=e.magic_mastery||1,O=Math.pow(Math.max(M,R,P),1.1)*g,H=Math.pow($,1.2)*g,Y=Math.pow(k,1.15)*g,I=50+s*2,z=20+s*1,ee=2+s,G=1+s,A=3+s;let B={hp:0,mana:0,atk:0,def:0,speed:0,critical_chance:0,critical_damage:0,magic_damage:0,double_attack_chance:0};try{const{EquipmentService:J}=await Us(async()=>{const{EquipmentService:_e}=await Promise.resolve().then(()=>nx);return{EquipmentService:_e}},void 0),ge=await J.getEquippedItems(e.id);if(ge){const{calculateEquipmentBonus:_e}=await Us(async()=>{const{calculateEquipmentBonus:De}=await Promise.resolve().then(()=>nx);return{calculateEquipmentBonus:De}},void 0);B=_e(ge),console.log("[CharacterService] Bnus de equipamentos calculado:",{atk:B.atk,def:B.def,speed:B.speed,critical_chance:B.critical_chance,magic_damage:B.magic_damage})}}catch(J){console.error("[CharacterService] Erro ao calcular bnus de equipamentos:",J)}const V=Math.floor(I+C*3.5+B.hp),W=V,L=Math.floor(z+(N+S)*1.5+B.mana),F=L,ie=Math.floor(ee+_*2.2+O+B.atk),se=Math.floor(N*1.8+Y+B.magic_damage),ue=Math.floor(G+j*1.5+H+B.def),le=Math.floor(A+j*1.8+B.speed),re=Math.min(95,Math.floor(5+j*.3+E*.5+O*.2+B.critical_chance)),de=Math.floor(150+_*.8+O*1.2+B.critical_damage),ce=Math.floor(N*1.2+Y*1.5+B.magic_damage),be=Math.min(25,Math.floor(j*.2+E*.3+B.double_attack_chance)),Ne={hp:V,max_hp:W,mana:L,max_mana:F,atk:ie,magic_attack:se,def:ue,speed:le,critical_chance:re,critical_damage:de,magic_damage_bonus:ce,double_attack_chance:be};return console.log("[CharacterService] Stats derivados calculados:",{level:s,diversityBonus:(g*100-100).toFixed(1)+"%",monoPenalty:(x*100).toFixed(1)+"%",final_stats:Ne}),Ne}static analyzeBuildDiversity(e){const s=e.strength||10,a=e.dexterity||10,n=e.intelligence||10,i=e.wisdom||10,c=e.vitality||10,u=e.luck||10,f=s+a+n+i+c+u,h=[{name:"Fora",value:s,percentage:s/f},{name:"Destreza",value:a,percentage:a/f},{name:"Inteligncia",value:n,percentage:n/f},{name:"Sabedoria",value:i,percentage:i/f},{name:"Vitalidade",value:c,percentage:c/f},{name:"Sorte",value:u,percentage:u/f}],p=h.reduce((N,S)=>S.percentage>N.percentage?S:N),g=p.percentage>.8,x=1-h.reduce((N,S)=>N+Math.abs(S.percentage-1/6),0)/2,y=1+x*.2,_=g?.7:1;let j="";return g?j=`Build muito especializada em ${p.name}. Considere investir em outros atributos para melhor eficincia geral.`:x>.7?j="Build bem balanceada! Voc est aproveitando as sinergias entre atributos.":j="Build moderadamente especializada. H espao para melhorar o equilbrio.",{diversityScore:x,diversityPercentage:x*100,diversityBonus:y,monoBuildPenalty:_,dominantAttribute:p.name,dominantPercentage:p.percentage*100,isMonoBuild:g,recommendation:j}}}yt(at,"characterCache",new Map),yt(at,"lastFetchTimestamp",new Map),yt(at,"pendingRequests",new Map),yt(at,"CACHE_DURATION",3e4),yt(at,"cacheInvalidationQueue",new Set),yt(at,"cacheInvalidationTimer",null),yt(at,"CACHE_INVALIDATION_DELAY",100);const zs=()=>b.useContext(oC),dC=b.createContext(null);function j6({children:t}){const[e,s]=b.useState([]),[a,n]=b.useState(null),{user:i}=zs(),{gameState:c,setGameState:u,updateLoading:f}=ub(),{addGameLogMessage:h,setGameMessage:p}=db();b.useEffect(()=>{if(!(i!=null&&i.id))return;(async()=>{try{f("loadProgress",!0);const S=await at.getUserCharacters(i.id);S.success&&S.data?(s(S.data),S.data.length>0?p("Selecione um personagem para jogar!"):p("Voc ainda no tem personagens. Crie um para comear!")):S.error&&(console.error("[CharacterProvider] Erro ao carregar personagens:",S.error),me.error("Erro",{description:S.error}))}catch(S){console.error("[CharacterProvider] Erro ao carregar personagens:",S instanceof Error?S.message:"Erro desconhecido"),me.error("Erro",{description:S instanceof Error?S.message:"Erro ao carregar personagens"})}finally{f("loadProgress",!1)}})()},[i==null?void 0:i.id,p,f]);const g=b.useCallback(async N=>{if(!(i!=null&&i.id)){me.error("Erro",{description:"Voc precisa estar logado para criar um personagem."});return}f("startGame",!0);try{const S=await at.createCharacter({user_id:i.id,name:N});if(S.success&&S.data){const C=await at.getCharacter(S.data.id);C.success&&C.data&&(s(E=>[C.data,...E]),n(C.data),me.success("Sucesso",{description:"Personagem criado com sucesso!"}),h(`${C.data.name} foi criado!`))}else if(S.error)throw new Error(S.error)}catch(S){console.error("[CharacterProvider] Erro ao criar personagem:",S instanceof Error?S.message:"Erro desconhecido"),me.error("Erro",{description:S instanceof Error?S.message:"Erro ao criar personagem"})}finally{f("startGame",!1)}},[i,f,h]),x=b.useCallback(async N=>{try{n(N),console.log(`[CharacterProvider] Carregando stats derivados para ${N.name}...`);const S=await at.getCharacterForGame(N.id);if(!S.success||!S.data)throw new Error(S.error||"Erro ao carregar dados do personagem");const C=S.data;u({...c,player:C}),h(`${N.name} selecionado!`)}catch(S){console.error("[CharacterProvider] Erro ao selecionar personagem:",S instanceof Error?S.message:"Erro desconhecido"),me.error("Erro",{description:S instanceof Error?S.message:"Erro ao selecionar personagem"})}},[c,u,h]),y=b.useCallback(async N=>{try{n(N),console.log(`[CharacterProvider] Carregando stats derivados para ${N.name}...`);const S=await at.getCharacterForGame(N.id);if(!S.success||!S.data)throw new Error(S.error||"Erro ao carregar dados do personagem");const C=S.data;u({...c,mode:"hub",player:C}),p(`Bem-vindo ao hub, ${N.name}!`)}catch(S){console.error("[CharacterProvider] Erro ao carregar personagem para o hub:",S instanceof Error?S.message:"Erro desconhecido"),me.error("Erro",{description:S instanceof Error?S.message:"Erro ao carregar personagem"})}},[c,u,p]),_=b.useCallback((N,S)=>{console.log(`[CharacterProvider] Atualizando stats do jogador: HP ${N}, Mana ${S}`),u({...c,player:{...c.player,hp:Math.floor(N),mana:Math.floor(S)}})},[c,u]),j=b.useMemo(()=>({characters:e,selectedCharacter:a,createCharacter:g,selectCharacter:x,loadCharacterForHub:y,updatePlayerStats:_}),[e,a,g,x,y,_]);return r.jsx(dC.Provider,{value:j,children:t})}function fC(){const t=b.useContext(dC);if(!t)throw new Error("useCharacter deve ser usado dentro de um CharacterProvider");return t}class va{static calculateAttackSkillXp(e,s){const a=[];if(!e)return a;const n=VL(e),i=BL(e),c=Math.max(1,Math.floor(s/10));if(n){const u=this.getWeaponSkill(n);if(u){let f=c;i?(f=Math.floor(f*1.25),a.push({skill:u,xp:f,reason:`Ataque com ${n.name} (Dual-wield)`,isOffHand:!1})):a.push({skill:u,xp:f,reason:`Ataque com ${n.name}`,isOffHand:!1})}}if(i&&e.off_hand){const u=this.getWeaponSkill(e.off_hand);if(u){const f=Math.floor(c*.75);a.push({skill:u,xp:f,reason:`Ataque com ${e.off_hand.name} (Mo secundria)`,isOffHand:!0})}}return a}static calculateDefenseSkillXp(e,s=0){const a=[];let n=Math.max(2,Math.floor(s/5));s<=0&&(n=3);let i="Ao de defesa";e&&IL(e)&&(n=Math.floor(n*2.5),i="Defesa com escudo equipado");const c=Math.max(1,Math.floor(n));return a.push({skill:is.DEFENSE_MASTERY,xp:c,reason:i,isOffHand:!1}),console.log(`[SkillXpService] XP de defesa calculado: ${c} (dano bloqueado: ${s})`),a}static calculateMagicSkillXp(e,s=0,a=0,n=null){var h;const i=[],c=Math.floor(e/2);let u=0;a>0?u=Math.floor(a/8):s>0&&(u=Math.floor(s/8));const f=Math.max(2,c+u);if(i.push({skill:is.MAGIC_MASTERY,xp:f,reason:`Uso de magia (${e} mana, ${a||s} efeito)`,isOffHand:!1}),((h=n==null?void 0:n.off_hand)==null?void 0:h.weapon_subtype)==="staff"){const p=Math.max(1,Math.floor(f*.2));i.push({skill:is.MAGIC_MASTERY,xp:p,reason:`Bnus por ${n.off_hand.name} (off-hand)`,isOffHand:!0})}return i}static getWeaponSkill(e){const s=e.name.toLowerCase();return s.includes("espada")||s.includes("sword")||s.includes("rapier")||s.includes("lmina")?is.SWORD_MASTERY:s.includes("machado")||s.includes("axe")||s.includes("machadinha")?is.AXE_MASTERY:s.includes("martelo")||s.includes("mace")||s.includes("clava")||s.includes("maa")||s.includes("porrete")||s.includes("hammer")?is.BLUNT_MASTERY:s.includes("cajado")||s.includes("staff")||s.includes("varinha")||s.includes("orbe")||s.includes("basto")||s.includes("cetro")?is.MAGIC_MASTERY:(s.includes("adaga")||s.includes("dagger")||s.includes("punhal")||s.includes("fang"),is.SWORD_MASTERY)}static async applySkillXp(e,s){const a=[],n=[];if(s.length===0)return{messages:a,skillLevelUps:n};console.log(`[SkillXpService] Aplicando ${s.length} ganhos de XP de habilidade para ${e}`);for(const i of s)try{const c=await at.addSkillXp(e,i.skill,i.xp);if(c.success&&c.data){const u=this.getSkillDisplayName(i.skill),f=i.isOffHand?" (off-hand)":"";if(c.data.skill_leveled_up){const h=` ${u} subiu para nvel ${c.data.new_skill_level}!${f}`;a.push(h),n.push({skill:i.skill,newLevel:c.data.new_skill_level}),console.log(`[SkillXpService] ${h}`)}else{const h=`+${i.xp} XP em ${u}${f}`;a.push(h),console.log(`[SkillXpService] ${h} (${i.reason})`)}}else console.error(`[SkillXpService] Erro ao aplicar XP de ${i.skill}:`,c.error)}catch(c){console.error(`[SkillXpService] Exceo ao aplicar XP de ${i.skill}:`,c)}return{messages:a,skillLevelUps:n}}static getSkillDisplayName(e){switch(e){case is.SWORD_MASTERY:return"Maestria em Espadas";case is.AXE_MASTERY:return"Maestria em Machados";case is.BLUNT_MASTERY:return"Maestria em Armas de Concusso";case is.DEFENSE_MASTERY:return"Maestria em Defesa";case is.MAGIC_MASTERY:return"Maestria em Magia";default:return e}}static calculateSkillDamageBonus(e){return Math.min(100,e*2)}static calculateSkillDefenseBonus(e){return Math.min(50,e*1)}static calculateManaEfficiency(e){return Math.min(40,e*1)}}class En{static async getMonsterForFloor(e){var s,a,n,i;try{if(e<=0)return console.warn(`[MonsterService] Tentativa de gerar monstro para andar invlido: ${e}`),{data:null,error:`Andar invlido: ${e}`,success:!1};console.log(`[MonsterService] === INCIO BUSCA MONSTRO ANDAR ${e} ===`),this.clearCache(),console.log(`[MonsterService] Buscando monstro DIRETAMENTE do servidor para andar ${e}`);let{data:c,error:u}=await we.rpc("get_monster_for_floor",{p_floor:e});if(u&&((s=u.message)!=null&&s.includes("function"))&&((a=u.message)!=null&&a.includes("does not exist"))){console.log("[MonsterService] Funo get_monster_for_floor no existe, tentando fallback...");const{data:y,error:_}=await we.from("monsters").select("*").lte("min_floor",e).order("min_floor",{ascending:!1}).limit(1);_?(c=null,u=_):(c=y&&y.length>0?y[0]:null,u=null)}if(console.log("[MonsterService] Resposta da RPC get_monster_for_floor:",{hasData:!!c,hasError:!!u,dataType:typeof c,isArray:Array.isArray(c),dataLength:Array.isArray(c)?c.length:"not-array",errorMessage:u==null?void 0:u.message,errorCode:u==null?void 0:u.code}),u)if(console.error(`[MonsterService] Erro na API ao buscar monstro para andar ${e}:`,u),u.code==="42804"||(n=u.message)!=null&&n.includes("does not match function result type")){console.log("[MonsterService] Erro de tipo detectado, tentando buscar diretamente da tabela...");try{const{data:y,error:_}=await we.from("monsters").select("*").lte("min_floor",e).order("min_floor",{ascending:!1}).limit(1);if(_)throw _;if(y&&y.length>0)console.log("[MonsterService] Fallback bem-sucedido, usando monstro da tabela"),c=y[0],u=null;else return{data:null,error:"Nenhum monstro encontrado na tabela para este andar",success:!1}}catch(y){return console.error("[MonsterService] Fallback tambm falhou:",y),{data:null,error:`Erro na funo RPC e no fallback: ${(u==null?void 0:u.message)||"Erro desconhecido"}`,success:!1}}}else return{data:null,error:u.message,success:!1};if(!c||Array.isArray(c)&&c.length===0)return console.error(`[MonsterService] Nenhum monstro retornado para andar ${e}`),{data:null,error:"Nenhum monstro encontrado para este andar",success:!1};const f=Array.isArray(c)?c[0]:c;if(!f||!f.id||!f.name)return console.error(`[MonsterService] Dados de monstro invlidos para andar ${e}:`,f),{data:null,error:"Dados do monstro invlidos",success:!1};if(!f.hp||!f.atk||!f.def){console.log(`[MonsterService] Calculando stats bsicos para ${f.name} (andar ${e})`);const y=f.level||Math.max(1,Math.floor(e/5)+1),_=f.tier||Math.max(1,Math.floor(e/20)+1);f.hp=f.hp||Math.floor(50+y*15+_*25),f.atk=f.atk||Math.floor(10+y*3+_*5),f.def=f.def||Math.floor(5+y*2+_*3),f.reward_xp=f.reward_xp||Math.floor(5+y*2+_*2),f.reward_gold=f.reward_gold||Math.floor(3+y*1+_*1)}console.log("[MonsterService] === MONSTRO ENCONTRADO ==="),console.log(`[MonsterService] ID: ${f.id}`),console.log(`[MonsterService] Nome: ${f.name}`),console.log(`[MonsterService] HP: ${f.hp}, ATK: ${f.atk}, DEF: ${f.def}`),console.log(`[MonsterService] Tier: ${f.tier||1}, Ciclo: ${f.cycle_position||"N/A"}, Boss: ${f.is_boss||!1}`),console.log(`[MonsterService] Level: ${f.level}, XP: ${f.reward_xp}, Gold: ${f.reward_gold}`),console.log(`[MonsterService] Buscando possible_drops para monstro ${f.id}...`);const{data:h,error:p}=await we.from("monster_possible_drops").select(`
          drop_id,
          drop_chance,
          min_quantity,
          max_quantity,
          monster_drops:drop_id (
            id,
            name,
            description,
            rarity,
            value
          )
        `).eq("monster_id",f.id);p&&console.warn(`[MonsterService] Erro ao buscar drops do monstro ${f.id}:`,p);const g=(h||[]).map(y=>({drop_id:y.drop_id,drop_chance:y.drop_chance,min_quantity:y.min_quantity,max_quantity:y.max_quantity,drop_info:Array.isArray(y.monster_drops)?y.monster_drops[0]:y.monster_drops}));console.log(`[MonsterService] Encontrados ${g.length} possible_drops para ${f.name}`),g.forEach(y=>{var _;console.log(`[MonsterService] - ${((_=y.drop_info)==null?void 0:_.name)||"Drop desconhecido"} (chance: ${(y.drop_chance*100).toFixed(1)}%, qtd: ${y.min_quantity}-${y.max_quantity})`)});const x={id:f.id,name:f.name,hp:f.hp,atk:f.atk,def:f.def,mana:f.mana||0,speed:f.speed||10,behavior:f.behavior,min_floor:f.min_floor,reward_xp:f.reward_xp,reward_gold:f.reward_gold,level:f.level||Math.max(1,Math.floor(e/5)+1),possible_drops:g,tier:f.tier||1,base_tier:f.base_tier||1,cycle_position:f.cycle_position||(e-1)%20+1,is_boss:f.is_boss||!1,strength:f.strength,dexterity:f.dexterity,intelligence:f.intelligence,wisdom:f.wisdom,vitality:f.vitality,luck:f.luck,critical_chance:f.critical_chance,critical_damage:f.critical_damage,critical_resistance:f.critical_resistance,physical_resistance:f.physical_resistance,magical_resistance:f.magical_resistance,debuff_resistance:f.debuff_resistance,physical_vulnerability:f.physical_vulnerability,magical_vulnerability:f.magical_vulnerability,primary_trait:f.primary_trait,secondary_trait:f.secondary_trait,special_abilities:f.special_abilities||[]};return console.log("[MonsterService] === MONSTRO PROCESSADO COM SUCESSO ==="),console.log(`[MonsterService] Retornando: ${x.name} (HP: ${x.hp}, ATK: ${x.atk}, DEF: ${x.def})`),console.log(`[MonsterService] Possible drops: ${((i=x.possible_drops)==null?void 0:i.length)||0} tipos`),{data:x,error:null,success:!0}}catch(c){return console.error(`[MonsterService] EXCEO ao obter monstro para andar ${e}:`,c),{data:null,error:c instanceof Error?c.message:"Erro ao buscar monstro",success:!1}}}static clearCache(){this.monsterCache.clear(),this.cacheExpiry.clear(),this.pendingRequests.clear(),console.log("[MonsterService] Cache de monstros limpo")}static calculateDamage(e,s,a){let n=1,i=1;switch(e.behavior){case"aggressive":n=1.2,i=.8;break;case"defensive":n=.8,i=1.2;break;case"balanced":n=1,i=1;break}const c=s*n,u=a*i;return Math.max(1,Math.floor(c-u/2))}}yt(En,"monsterCache",new Map),yt(En,"cacheExpiry",new Map),yt(En,"pendingRequests",new Map);class Zs{static clearCache(){this.spellCache.clear(),this.lastFetchTimestamp=0}static async getCharacterAvailableSpells(e){try{const{data:s,error:a}=await we.rpc("get_character_available_spells",{p_character_id:e});return a?(console.error("Erro ao buscar magias disponveis:",a),{data:null,error:a.message,success:!1}):{data:s.map(i=>({id:i.spell_id,name:i.name,description:i.description,effect_type:i.effect_type,mana_cost:i.mana_cost,cooldown:i.cooldown,effect_value:i.effect_value,duration:i.duration,unlocked_at_level:i.unlocked_at_level,is_equipped:i.is_equipped,slot_position:i.slot_position})),error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias disponveis:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async setCharacterSpells(e,s){try{const a=s[0]||null,n=s[1]||null,i=s[2]||null,{error:c}=await we.rpc("set_character_spells",{p_character_id:e,p_spell_1_id:a,p_spell_2_id:n,p_spell_3_id:i});return c?(console.error("Erro ao equipar magias:",c),{data:null,error:c.message,success:!1}):{data:null,error:null,success:!0}}catch(a){return console.error("Erro ao equipar magias:",a),{data:null,error:a instanceof Error?a.message:"Erro desconhecido",success:!1}}}static async getCharacterSpellStats(e){try{const{data:s,error:a}=await we.rpc("get_character_spell_stats",{p_character_id:e});return a?(console.error("Erro ao buscar estatsticas de magias:",a),{data:null,error:a.message,success:!1}):{data:s[0]||{total_available:0,total_equipped:0,highest_level_unlocked:1,spells_by_type:{}},error:null,success:!0}}catch(s){return console.error("Erro ao buscar estatsticas de magias:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}static async getAvailableSpells(e){const s=Date.now();if(this.spellCache.has(e)&&s-this.lastFetchTimestamp<this.CACHE_DURATION)return{data:this.spellCache.get(e),error:null,success:!0};try{const{data:a,error:n}=await we.rpc("get_available_spells",{p_level:e});return n?(console.error("Erro ao buscar magias:",n),{data:null,error:n.message,success:!1}):(this.spellCache.set(e,a||[]),this.lastFetchTimestamp=s,{data:a||[],error:null,success:!0})}catch(a){return console.error("Erro ao buscar magias:",a),{data:null,error:a instanceof Error?a.message:"Erro desconhecido",success:!1}}}static calculateScaledSpellDamage(e,s){if(!("intelligence"in s)||!("wisdom"in s)||!("magic_mastery"in s))return e;const a=s.intelligence||10,n=s.wisdom||10,i=s.magic_mastery||1,c=Math.pow(a,1.35)*1.8,u=Math.pow(n,1.2)*1.2,f=Math.pow(i,1.2)*2.5;let h=c+u+f;h>150&&(h=150+(h-150)*.6),h=Math.min(300,h);const p=Math.round(e*(1+h/100));return console.log("[SpellService] Clculo de dano mgico ESPECIALIZADO:",{baseDamage:e,intelligence:a,wisdom:n,magicMastery:i,intScaling:`${c.toFixed(1)}%`,wisScaling:`${u.toFixed(1)}%`,masteryScaling:`${f.toFixed(1)}%`,totalBonus:`${h.toFixed(1)}%`,scaledDamage:p}),p}static calculateScaledSpellHealing(e,s){if(!("wisdom"in s)||!("magic_mastery"in s))return e;const a=s.wisdom||10,n=s.magic_mastery||1,i=Math.pow(a,1.3)*2.2,c=Math.pow(n,1.15)*1.8;let u=i+c;u>120&&(u=120+(u-120)*.5),u=Math.min(220,u);const f=Math.round(e*(1+u/100));return console.log("[SpellService] Clculo de cura mgica ESPECIALIZADA:",{baseHealing:e,wisdom:a,magicMastery:n,wisScaling:`${i.toFixed(1)}%`,masteryScaling:`${c.toFixed(1)}%`,totalBonus:`${u.toFixed(1)}%`,scaledHealing:f}),f}static applySpellEffect(e,s,a){let n="",i=!0;switch(e.effect_type){case"damage":const c=this.calculateScaledSpellDamage(e.effect_value,s);a.hp=Math.max(0,a.hp-c),n=`${e.name} causou ${c} de dano mgico!`;break;case"heal":const u=this.calculateScaledSpellHealing(e.effect_value,s),f="max_hp"in a?a.max_hp:a.maxHp,h=a.hp;a.hp=Math.min(f,a.hp+u);const p=a.hp-h;n=`${e.name} restaurou ${p} HP!`;break;case"buff":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.buffs.push({type:"buff",value:g,duration:e.duration,source_spell:e.name});const x=this.getAttributeModificationsForSpell(e);if(x.length>0){a.active_effects.attribute_modifications||(a.active_effects.attribute_modifications=[]),a.active_effects.attribute_modifications.push(...x);const y=x.map(_=>`+${_.value}${_.type==="percentage"?"%":""} ${this.translateAttributeName(_.attribute)}`).join(", ");n=`${e.name} aumentou: ${y}!`}else n=`${e.name} aplicou um efeito benfico (+${g})!`}else n=`${e.name} aplicou um efeito benfico!`;break;case"debuff":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.debuffs.push({type:"debuff",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou um efeito prejudicial (-${g})!`}else n=`${e.name} aplicou um efeito prejudicial!`;break;case"dot":if(a.active_effects){const g=this.calculateScaledSpellDamage(e.effect_value,s);a.active_effects.dots.push({type:"dot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou dano contnuo (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou dano contnuo!`;break;case"hot":if(a.active_effects){const g=this.calculateScaledSpellHealing(e.effect_value,s);a.active_effects.hots.push({type:"hot",value:g,duration:e.duration,source_spell:e.name}),n=`${e.name} aplicou cura contnua (${g} por ${e.duration} turnos)!`}else n=`${e.name} aplicou cura contnua!`;break;default:n=`${e.name} foi usado, mas no teve efeito!`,i=!1}return{message:n,success:i}}static processOverTimeEffects(e){const s=[];return"active_effects"in e&&e.active_effects&&(e.active_effects.dots.forEach((a,n)=>{e.hp=Math.max(0,e.hp-a.value),a.duration--,s.push(`${a.source_spell} causou ${a.value} de dano contnuo.`),a.duration<=0&&e.active_effects.dots.splice(n,1)}),e.active_effects.hots.forEach((a,n)=>{const i="max_hp"in e?e.max_hp:e.maxHp,c=e.hp;e.hp=Math.min(i,e.hp+a.value);const u=e.hp-c;a.duration--,u>0&&s.push(`${a.source_spell} restaurou ${u} HP.`),a.duration<=0&&e.active_effects.hots.splice(n,1)}),e.active_effects.attribute_modifications&&(e.active_effects.attribute_modifications=e.active_effects.attribute_modifications.filter(a=>(a.duration--,a.duration<=0?(s.push(`O efeito de ${a.source_spell} em ${this.translateAttributeName(a.attribute)} expirou.`),!1):!0)))),s}static updateSpellCooldowns(e){return e.player.spells.forEach(s=>{s.current_cooldown>0&&s.current_cooldown--}),e}static getSpellTypeIcon(e){return{damage:"",heal:"",buff:"",debuff:"",dot:"",hot:""}[e]||""}static getSpellTypeColor(e){return{damage:"text-red-500",heal:"text-green-500",buff:"text-blue-500",debuff:"text-purple-500",dot:"text-orange-500",hot:"text-emerald-500"}[e]||"text-gray-500"}static translateEffectType(e){return{damage:"Dano",heal:"Cura",buff:"Benefcio",debuff:"Maldio",dot:"Dano Contnuo",hot:"Cura Contnua"}[e]||e}static getAttributeModificationsForSpell(e){const s=[],a=Date.now(),n=e.name.toLowerCase();return(n.includes("fora")||n.includes("strength")||n.includes("fortalecer"))&&s.push({attribute:"atk",value:Math.floor(e.effect_value*.5),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("velocidade")||n.includes("speed")||n.includes("agilidade"))&&s.push({attribute:"speed",value:Math.floor(e.effect_value*.3),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("defesa")||n.includes("defense")||n.includes("proteo"))&&s.push({attribute:"def",value:Math.floor(e.effect_value*.4),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("crtico")||n.includes("critical")||n.includes("preciso"))&&s.push({attribute:"critical_chance",value:Math.floor(e.effect_value*.2),type:"percentage",duration:e.duration,source_spell:e.name,applied_at:a}),(n.includes("magia")||n.includes("magic")||n.includes("mystic"))&&s.push({attribute:"magic_attack",value:Math.floor(e.effect_value*.6),type:"flat",duration:e.duration,source_spell:e.name,applied_at:a}),s}static translateAttributeName(e){return{atk:"Ataque",def:"Defesa",speed:"Velocidade",magic_attack:"Ataque Mgico",critical_chance:"Chance Crtica",critical_damage:"Dano Crtico"}[e]||e}static async getCharacterEquippedSpells(e){try{console.log(`[SpellService] Buscando magias equipadas para personagem: ${e}`);const{data:s,error:a}=await we.from("character_spell_slots").select(`
          slot_position,
          spell_id,
          spell:spells(
            id,
            name,
            description,
            mana_cost,
            cooldown,
            effect_type,
            effect_value,
            duration,
            unlocked_at_level
          )
        `).eq("character_id",e).not("spell_id","is",null).order("slot_position");if(a)return console.error("Erro ao buscar magias equipadas:",a),{data:null,error:a.message,success:!1};console.log(`[SpellService] ${(s==null?void 0:s.length)||0} magias equipadas encontradas`);const n=(s||[]).map(i=>{const c=Array.isArray(i.spell)?i.spell[0]:i.spell;return{id:c.id,name:c.name,description:c.description,mana_cost:c.mana_cost,cooldown:c.cooldown,current_cooldown:0,effect_type:c.effect_type,effect_value:c.effect_value,duration:c.duration||0,unlocked_at_level:c.unlocked_at_level}});return console.log("[SpellService] Magias equipadas processadas:",n.map(i=>i.name)),{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar magias equipadas:",s),{data:null,error:s instanceof Error?s.message:"Erro desconhecido",success:!1}}}}yt(Zs,"spellCache",new Map),yt(Zs,"lastFetchTimestamp",0),yt(Zs,"CACHE_DURATION",3e5);const N6=Object.freeze(Object.defineProperty({__proto__:null,SpellService:Zs},Symbol.toStringTag,{value:"Module"}));class Mh{static async killCharacter(e,s="Battle defeat",a){try{console.log(`[CemeteryService] Matando personagem ${e}:`,{deathCause:s,killedByMonster:a});const{data:n,error:i}=await we.rpc("kill_character",{p_character_id:e,p_death_cause:s,p_killed_by_monster:a||null});if(i)throw console.error("[CemeteryService] Erro ao matar personagem:",i),i;return console.log(`[CemeteryService] Personagem ${e} morto com sucesso, ID no cemitrio: ${n}`),{success:!0,data:n,error:null}}catch(n){return console.error("[CemeteryService] Erro crtico ao matar personagem:",n),{success:!1,data:null,error:n instanceof Error?n.message:"Erro desconhecido ao matar personagem"}}}static async getUserCemetery(e,s={}){try{const{page:a=1,limit:n=10}=s,i=(a-1)*n,{data:c,error:u}=await we.rpc("get_user_cemetery",{p_user_id:e,p_limit:n,p_offset:i});if(u)throw u;const{data:f,error:h}=await we.rpc("count_user_cemetery",{p_user_id:e});if(h)throw h;const{data:p,error:g}=await we.rpc("get_cemetery_stats",{p_user_id:e});if(g)throw g;const x=c,y=f,_=(p==null?void 0:p[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},j=i+x.length<y;return{success:!0,data:{characters:x,total:y,stats:_,hasMore:j},error:null}}catch(a){return console.error("[CemeteryService] Erro ao buscar cemitrio:",a),{success:!1,data:null,error:a instanceof Error?a.message:"Erro ao buscar cemitrio"}}}static async getCemeteryStats(e){try{const{data:s,error:a}=await we.rpc("get_cemetery_stats",{p_user_id:e});if(a)throw a;return{success:!0,data:(s==null?void 0:s[0])||{total_deaths:0,highest_level_reached:0,highest_floor_reached:0,total_survival_time_hours:0,most_common_death_cause:"N/A",deadliest_monster:"N/A"},error:null}}catch(s){return console.error("[CemeteryService] Erro ao buscar estatsticas do cemitrio:",s),{success:!1,data:null,error:s instanceof Error?s.message:"Erro ao buscar estatsticas"}}}static async hasCemetery(e){try{const{data:s,error:a}=await we.rpc("count_user_cemetery",{p_user_id:e});if(a)throw a;return{success:!0,data:s>0,error:null}}catch(s){return console.error("[CemeteryService] Erro ao verificar cemitrio:",s),{success:!1,data:!1,error:s instanceof Error?s.message:"Erro ao verificar cemitrio"}}}static formatSurvivalTime(e){if(e<60)return`${e} min`;if(e<1440){const s=Math.floor(e/60),a=e%60;return a>0?`${s}h ${a}min`:`${s}h`}else{const s=Math.floor(e/1440),a=Math.floor(e%1440/60);return a>0?`${s}d ${a}h`:`${s}d`}}static formatDeathCause(e,s){switch(e){case"Battle defeat":return s?`Morto por ${s}`:"Morto em batalha";case"Player quit":return"Abandonou a jornada";case"System error":return"Erro do sistema";default:return e}}}class Ol{static calculateInitiative(e,s){const a=e,n=Math.floor(s*.5),i=.9+Math.random()*.2,c=Math.floor((a+n)*i);return Math.max(1,c)}static calculateExtraTurns(e,s){if(s<=0)return 2;const a=e/s;let n=0;return a>=3.5?n=3:a>=2.5?n=2:a>=1.8&&(n=1),n<3&&Math.random()<.2&&(n+=1),Math.min(n,3)}static calculateDamage(e,s,a=0,n=110,i=0,c=10,u=10){const f=Number(e)||0,h=Number(s)||0;if(f<=0)return{damage:1,isCritical:!1,isDoubleAttack:!1,totalAttacks:1,damageBreakdown:"Dano mnimo: 1"};const p=Math.max(1,Math.floor(f-h*.5)),x=Math.random()*100<a,y=i+Math.floor((c-10)*.5)+Math.floor((u-10)*.3),j=Math.random()*100<Math.min(35,y);let N=p,S=`Base: ${p}`;if(x){const E=n/100;N=Math.floor(N*E),S+=`  Crtico (${n}%): ${N}`}let C=1;return j&&(N=N*2,C=2,S+=`  Duplo Ataque (DEX: ${c}, SPD: ${u}): ${N}`),{damage:N,isCritical:x,isDoubleAttack:j,totalAttacks:C,damageBreakdown:S}}static async processPlayerAction(e,s,a,n){console.log(`[BattleService] Processando ao do jogador: ${e}`);const i={...s},c=[],u=[],f=[];let h=!1,p="",g=0;switch(e){case"attack":if(i.currentEnemy&&i.currentEnemy.hp>0){const x=await this.getPlayerEquipmentSlots(i.player.id),y=this.calculateDamage(i.player.atk,i.currentEnemy.defense,i.player.critical_chance||0,i.player.critical_damage||110,i.player.double_attack_chance||0,i.player.dexterity||10,i.player.speed||10);g=y.damage;const _=y.isCritical,j=y.isDoubleAttack;i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-g),i.player.isDefending&&(i.player.isDefending=!1);let N=`${i.player.name} atacou ${i.currentEnemy.name}`;if(j&&(N+=" com ataque duplo"),_&&(N+=" CRITICAMENTE"),N+=` causando ${g} de dano!`,c.push({message:N,type:"player_action"}),x){console.log(`[BattleService] Calculando skill XP para ataque com dano ${g}`);const S=va.calculateAttackSkillXp(x,g);if(S.length>0){u.push(...S);try{const{messages:C,skillLevelUps:E}=await va.applySkillXp(i.player.id,S);for(const M of C)c.push({message:M,type:"skill_xp"});f.push(...C);for(const M of E)console.log(`[BattleService] Skill level up: ${M.skill} -> ${M.newLevel}`)}catch(C){console.error("[BattleService] Erro ao aplicar skill XP de ataque:",C)}}}i.currentEnemy.hp<=0?(c.push({message:`${i.currentEnemy.name} foi derrotado!`,type:"system"}),p=`Voc derrotou ${i.currentEnemy.name}!`):p=N}break;case"defend":if(i.player.defenseCooldown===0){i.player.isDefending=!0,i.player.defenseCooldown=3;const x=`${i.player.name} assumiu postura defensiva.`;c.push({message:x,type:"player_action"});const y=await this.getPlayerEquipmentSlots(i.player.id);if(y){const _=va.calculateDefenseSkillXp(y,0);if(_.length>0){u.push(..._);try{const{messages:j}=await va.applySkillXp(i.player.id,_);for(const N of j)c.push({message:N,type:"skill_xp"});f.push(...j)}catch(j){console.error("[BattleService] Erro ao aplicar skill XP de defesa:",j)}}}p=x}else p=`Defesa est em cooldown por mais ${i.player.defenseCooldown} turnos.`,h=!0;break;case"spell":if(a){const x=i.player.spells.find(y=>y.id===a);if(x&&i.player.mana>=x.mana_cost&&x.current_cooldown===0){i.player.mana=Math.max(0,i.player.mana-x.mana_cost),x.current_cooldown=x.cooldown;let y="",_=0;if(x.effect_type==="damage"&&i.currentEnemy){let C=x.effect_value;if(i.player.magic_attack&&(C+=Math.floor(i.player.magic_attack*.5)),i.player.magic_mastery&&i.player.magic_mastery>1){const E=Math.floor(C*(i.player.magic_mastery-1)*.1);C+=E}_=C,i.currentEnemy.hp=Math.max(0,i.currentEnemy.hp-C),y=`causando ${C} de dano mgico`,i.currentEnemy.hp<=0&&(y+=` e derrotando ${i.currentEnemy.name}`)}else if(x.effect_type==="heal"){let C=x.effect_value;if(i.player.magic_attack&&(C+=Math.floor(i.player.magic_attack*.3)),i.player.magic_mastery&&i.player.magic_mastery>1){const E=Math.floor(C*(i.player.magic_mastery-1)*.1);C+=E}_=C,i.player.hp=Math.min(i.player.max_hp,i.player.hp+C),y=`restaurando ${C} de vida`}const j=`${i.player.name} lanou ${x.name} ${y}!`;c.push({message:j,type:"player_action"});const N=await this.getPlayerEquipmentSlots(i.player.id),S=va.calculateMagicSkillXp(x.mana_cost,x.effect_type==="damage"?_:0,_,N);if(S.length>0){u.push(...S);try{const{messages:C}=await va.applySkillXp(i.player.id,S);for(const E of C)c.push({message:E,type:"skill_xp"});f.push(...C)}catch(C){console.error("[BattleService] Erro ao aplicar skill XP de magia:",C)}}p=j}else p="No  possvel usar esta magia agora.",h=!0}break;case"flee":return this.processFleeResult(s);case"consumable":if(n)try{const{ConsumableService:x}=await Us(async()=>{const{ConsumableService:_}=await Promise.resolve().then(()=>S6);return{ConsumableService:_}},void 0),y=await x.consumeItem(i.player.id,n,i.player);y.success&&y.data?(p=y.data.message,c.push({message:y.data.message,type:"player_action"}),h=!1):(p=y.error||"Erro ao usar item consumvel.",h=!0)}catch(x){console.error("[BattleService] Erro ao usar consumvel:",x),p="Erro ao usar item consumvel.",h=!0}else p="Item consumvel no especificado.",h=!0;break;case"special":p="Habilidade especial ainda no implementada.",h=!0;break;case"continue":p="Continuando...",h=!1;break;case"interact_event":p="Interao com evento processada em outro local.",h=!1;break;default:p="Ao no reconhecida.",h=!0;break}return i.player.defenseCooldown>0&&i.player.defenseCooldown--,i.player.potionUsedThisTurn=!1,console.log(`[BattleService] Ao processada: ${e}, mensagem: ${p}`),console.log(`[BattleService] skipTurn FINAL: ${h}`),console.log("[BattleService] Skill XP gains:",u.length),console.log("[BattleService] Game log messages:",c.length),{newState:i,skipTurn:h,message:p,skillXpGains:u,skillMessages:f,gameLogMessages:c}}static async processFleeResult(e){const s=await this.processFleeAttempt(e);return{newState:s,skipTurn:s.fleeSuccessful||!1,message:s.gameMessage||"Tentativa de fuga processada",skillXpGains:[],skillMessages:[],gameLogMessages:[]}}static async getPlayerEquipmentSlots(e){try{return await Ft.getEquippedItems(e)}catch(s){return console.error("[BattleService] Erro ao obter equipamentos do jogador:",s),null}}static async processPlayerDeath(e,s,a,n){try{return(await Mh.killCharacter(s.id,"Battle defeat",a.name)).success?{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Voc foi derrotado! Seu personagem foi perdido permanentemente.`,characterDeleted:!0}:{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Voc foi derrotado!`}}catch(i){return console.error("[BattleService] Erro crtico ao processar morte:",i),{...e,player:{...s,hp:0,isDefending:!1},mode:"gameover",isPlayerTurn:!0,gameMessage:`${n} Voc foi derrotado!`}}}static async processFleeAttempt(e){const{player:s,currentEnemy:a}=e;if(!a)return e;const n=s.speed||10,i=a.speed||10,c=n-i;let f=70+Math.floor(c*2);if(f=Math.max(15,Math.min(95,f)),Math.random()*100<f)return{...e,fleeSuccessful:!0,currentEnemy:null,mode:"fled",battleRewards:null,isPlayerTurn:!0,gameMessage:`${s.name} fugiu da batalha com sucesso!`};{const g=Math.floor((a.attack||10)*.3),x=Math.max(0,s.hp-g);return x<=0?this.processPlayerDeath(e,s,a,`${s.name} tentou fugir mas falhou!`):{...e,player:{...s,hp:x},fleeSuccessful:!1,gameMessage:`${s.name} tentou fugir mas falhou! Sofreu ${g} de dano.`}}}static async processEnemyAction(e,s){if(!e.currentEnemy||e.currentEnemy.hp<=0)return{newState:{...e,isPlayerTurn:!0}};const a=e.currentEnemy,n=e.player,i=[];if(console.log("[BattleService] === PROCESSANDO AO DO INIMIGO ==="),console.log(`[BattleService] Inimigo: ${a.name} (HP: ${a.hp}/${a.maxHp})`),Zs.processOverTimeEffects(a),a.hp<=0)return console.log("[BattleService] Inimigo morreu por efeitos ao longo do tempo"),{newState:{...e,isPlayerTurn:!0,gameMessage:`${a.name} foi derrotado por efeitos ao longo do tempo!`}};let c="attack";const u=a.special_abilities&&a.special_abilities.length>0,f=(a.intelligence||10)>(a.strength||10);let h=.15,p=.2;switch(a.behavior){case"aggressive":h=.25,p=.1;break;case"defensive":h=.3,p=.15;break;case"balanced":f?(p=.35,h=.2):(p=.2,h=.2);break}u&&(h+=.1),u&&Math.random()<h?c="special":a.mana>=10&&Math.random()<p&&(c="spell"),console.log(`[BattleService] Ao escolhida: ${c} (special: ${h}, spell: ${p})`);let g="",x=0,y=0;switch(c){case"attack":{console.log("[BattleService] Executando ataque fsico");const _=this.calculateDamage(a.attack,n.def,a.critical_chance||0,a.critical_damage||110,0,a.dexterity||10,a.speed||10);if(x=_.damage,n.isDefending||s){y=Math.floor(x*.15);let E=`${a.name} atacou`;_.isCritical&&(E+=" com golpe crtico"),_.isDoubleAttack&&(E+=` ${_.totalAttacks}x`),E+=`, mas voc reduziu o dano de ${x} para ${y} com sua defesa!`,g=E;try{const M=x-y,R=va.calculateDefenseSkillXp(null,M);i.push(...R),console.log("[BattleService] XP de defesa por bloqueio:",R)}catch(M){console.warn("[BattleService] Erro ao calcular XP de defesa:",M)}}else{y=x;let E=`${a.name} atacou`;_.isCritical&&(E+=" com golpe crtico"),_.isDoubleAttack&&(E+=` ${_.totalAttacks}x`),E+=` e causou ${y} de dano!`,g=E;try{const M=va.calculateDefenseSkillXp(null,Math.floor(y*.3));i.push(...M),console.log("[BattleService] XP de defesa passiva:",M)}catch(M){console.warn("[BattleService] Erro ao calcular XP de defesa passiva:",M)}}const j=Math.max(0,n.hp-y);if(j<=0)return console.log(`[BattleService] Jogador ${n.name} morreu - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const N={...e,player:{...n,hp:j,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},S=i.length>0?i.map(E=>`+${E.xp} XP em ${va.getSkillDisplayName(E.skill)}`):void 0,C=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Ataque processado com sucesso. Mensagem: ${g}`),{newState:C,skillXpGains:i,skillMessages:S}}case"spell":{console.log("[BattleService] Executando magia");const _=Math.floor(a.attack*1.2),j=10;if(n.isDefending||s){y=Math.floor(_*.15),g=`${a.name} lanou uma magia, mas voc reduziu o dano de ${_} para ${y} com sua defesa!`;try{const R=await Ft.getEquippedItems(n.id)||null,P=Math.floor((_-y)*.5),$=va.calculateDefenseSkillXp(R,P);i.push(...$)}catch(M){console.warn("[BattleService] Erro ao calcular XP de defesa mgica:",M)}}else y=_,g=`${a.name} lanou uma magia e causou ${y} de dano mgico!`;const N=Math.max(0,n.hp-y);if(N<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por magia - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const S={...e,player:{...n,hp:N,isDefending:!1,potionUsedThisTurn:!1},currentEnemy:{...a,mana:Math.max(0,a.mana-j)},isPlayerTurn:!0,gameMessage:g},C=i.length>0?i.map(M=>`+${M.xp} XP em ${va.getSkillDisplayName(M.skill)}`):void 0,E=Zs.updateSpellCooldowns(S);return console.log(`[BattleService] Magia processada com sucesso. Mensagem: ${g}`),{newState:E,skillXpGains:i,skillMessages:C}}case"special":{const _=a.special_abilities||[];if(_.length>0){const E=_[Math.floor(Math.random()*_.length)],M=E.split(":")[0].trim();if(E.includes("Regenera")||E.includes("Recupera")||E.includes("cura")){const R=Math.floor(a.maxHp*(.1+Math.random()*.15)),P=Math.min(a.maxHp,a.hp+R),$={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...a,hp:P},isPlayerTurn:!0,gameMessage:`${a.name} usou ${M} e recuperou ${R} HP!`};return{newState:Zs.updateSpellCooldowns($)}}else E.includes("dano")||E.includes("ATK")||E.includes("Ataque")?(x=Math.floor(a.attack*(1.3+Math.random()*.7)),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${M} e causou ${y} de dano!`):E.includes("crtico")||E.includes("Crtico")?(x=Math.floor(a.attack*2),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${M} com um golpe crtico devastador! ${y} de dano!`):E.includes("rea")||E.includes("todos")?(x=Math.floor(a.attack*1.2),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${M} em rea! ${y} de dano!`):(x=Math.floor(a.attack*(1.2+Math.random()*.5)),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou ${M}! ${y} de dano!`)}else switch(a.behavior){case"aggressive":{x=Math.floor(a.attack*1.5),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou Ataque Furioso e causou ${y} de dano!`;break}case"defensive":{const E=Math.floor(a.maxHp*.15),M=Math.min(a.maxHp,a.hp+E),R={...e,player:{...n,potionUsedThisTurn:!1},currentEnemy:{...a,hp:M},isPlayerTurn:!0,gameMessage:`${a.name} se concentrou e recuperou ${E} HP!`};return{newState:Zs.updateSpellCooldowns(R)}}default:x=Math.floor(a.attack*1.3),y=n.isDefending||s?Math.floor(x*.15):x,g=`${a.name} usou uma habilidade especial e causou ${y} de dano!`}if(y>0)try{const M=await Ft.getEquippedItems(n.id)||null;if(n.isDefending||s){const R=x-y,P=va.calculateDefenseSkillXp(M,R);i.push(...P)}else{const R=va.calculateDefenseSkillXp(M,Math.floor(y*.2));i.push(...R)}}catch(E){console.warn("[BattleService] Erro ao calcular XP de defesa especial:",E)}const j=Math.max(0,n.hp-y);if(j<=0)return console.log(`[BattleService] Jogador ${n.name} morreu por habilidade especial - iniciando processo de permadeath`),{newState:await this.processPlayerDeath(e,n,a,g)};const N={...e,player:{...n,hp:j,isDefending:!1,potionUsedThisTurn:!1},isPlayerTurn:!0,gameMessage:g},S=i.length>0?i.map(E=>`+${E.xp} XP em ${va.getSkillDisplayName(E.skill)}`):void 0,C=Zs.updateSpellCooldowns(N);return console.log(`[BattleService] Habilidade especial processada com sucesso. Mensagem: ${g}`),{newState:C,skillXpGains:i,skillMessages:S}}default:{console.log(`[BattleService] ERRO: Ao desconhecida: ${c}`);const _={...e,player:{...e.player,potionUsedThisTurn:!1},isPlayerTurn:!0};return{newState:Zs.updateSpellCooldowns(_)}}}}}class er{static clearCache(){console.log("[FloorService] Limpando cache de andares"),this.floorCache.clear(),this.floorCacheExpiry.clear(),En.clearCache(),console.log("[FloorService] Cache limpo")}static async getFloorData(e){console.log(`[FloorService] Solicitando dados do andar ${e}`);const s=Date.now(),a=this.floorCache.get(e),n=this.floorCacheExpiry.get(e);if(a&&n&&s<n)return console.log(`[FloorService] Dados do andar ${e} obtidos do cache: ${a.description}`),a;try{console.log(`[FloorService] Buscando dados do andar ${e} do servidor`);const{data:i,error:c}=await we.rpc("get_floor_data",{p_floor_number:e});if(c)return console.error(`[FloorService] Erro na RPC get_floor_data para andar ${e}:`,c),null;if(!i||Array.isArray(i)&&i.length===0)return console.error(`[FloorService] Nenhum dado encontrado para andar ${e}`),null;const u=Array.isArray(i)?i[0]:i;if(!u)return console.error(`[FloorService] Dados de andar vazios para andar ${e}`),null;const f={floorNumber:u.floor_number||e,type:u.type||"common",isCheckpoint:u.is_checkpoint||!1,minLevel:u.min_level||1,description:u.description||`Andar ${e}`};return console.log(`[FloorService] Dados do andar ${e} carregados: ${f.description} (tipo: ${f.type}, checkpoint: ${f.isCheckpoint})`),this.floorCache.set(e,f),this.floorCacheExpiry.set(e,s+this.FLOOR_CACHE_DURATION),f}catch(i){return console.error(`[FloorService] Exceo na funo getFloorData para andar ${e}:`,i),null}}static calculateFloorRewards(e,s,a){let n=1;switch(a){case"boss":n=2.5;break;case"elite":n=1.8;break;case"event":n=1.2;break;case"common":default:n=1;break}return{xp:Math.floor(e*n),gold:Math.floor(s*n)}}static async processSpecialEventInteraction(e){const{currentSpecialEvent:s,player:a}=e;if(!s)return e;console.log(`[FloorService] Processando evento especial: ${s.name}`);let n=a.hp,i=a.mana,c=a.gold,u="";switch(s.type){case"magic_fountain":n=a.max_hp,i=a.max_mana,u="Voc encontrou uma fonte mgica! HP e Mana foram restaurados completamente.";break;case"treasure_chest":const f=Math.floor(Math.random()*50)+25;c+=f,u=`Voc encontrou um ba do tesouro! Ganhou ${f} de ouro.`;break;case"bonfire":const h=Math.floor(a.max_hp*.5);n=Math.min(a.max_hp,a.hp+h),u=`Voc descansou numa fogueira acolhedora! Recuperou ${h} HP.`;break;default:u=`Voc explorou o evento ${s.name}.`}return{...e,player:{...a,hp:n,mana:i,gold:c},gameMessage:u,currentSpecialEvent:null,mode:"battle"}}static async checkForSpecialEvent(e){try{console.log(`[FloorService] Verificando eventos especiais para andar ${e}...`);const{data:s,error:a}=await we.rpc("get_special_event_for_floor",{p_floor:e});return!a&&s?(console.log(`[FloorService] Evento especial encontrado: ${s.name}`),s):null}catch(s){return console.error("[FloorService] Erro ao verificar eventos especiais:",s),null}}}yt(er,"floorCache",new Map),yt(er,"floorCacheExpiry",new Map),yt(er,"FLOOR_CACHE_DURATION",1e4);function Mu(t,e){return t&&typeof t=="object"&&("message"in t&&typeof t.message=="string"||t instanceof Error)?t.message:e}class zt{static async getAvailableConsumables(){try{const e=Date.now();if(e-this.lastFetchTimestamp<this.CACHE_DURATION&&this.consumableCache.size>0)return{data:Array.from(this.consumableCache.values()),error:null,success:!0};const{data:s,error:a}=await we.from("consumables").select("*").order("price");if(a)throw a;return this.consumableCache.clear(),s.forEach(n=>{this.consumableCache.set(n.id,n)}),this.lastFetchTimestamp=e,{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar consumveis:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar consumveis",success:!1}}}static async getCharacterConsumables(e){try{const{data:s,error:a}=await we.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e);if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar consumveis do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar consumveis do personagem",success:!1}}}static async buyConsumable(e,s,a=1){try{const{data:n,error:i}=await we.rpc("buy_consumable",{p_character_id:e,p_consumable_id:s,p_quantity:a}).single();if(i)throw i;return{data:{newGold:n},error:null,success:!0}}catch(n){return console.error("Erro ao comprar consumvel:",n),{data:null,error:Mu(n,"Erro ao comprar consumvel"),success:!1}}}static async consumeItem(e,s,a){try{const{data:n,error:i}=await we.from("character_consumables").select(`
          *,
          consumable:consumable_id (*)
        `).eq("character_id",e).eq("consumable_id",s).single();if(i)throw i;const c=n;if(!c||c.quantity<=0)return{data:null,error:"Voc no possui este item",success:!1};const u=c.consumable;let f="";const h={};switch(u.type){case"potion":if(u.description.includes("HP")||u.description.includes("Vida")){const g=a.hp,x=Math.min(a.max_hp,a.hp+u.effect_value),y=x-g;a.hp=x,h.hp=x,f=y>0?`Recuperou ${y} HP!`:"HP j estava no mximo!"}else if(u.description.includes("Mana")){const g=a.mana,x=Math.min(a.max_mana,a.mana+u.effect_value),y=x-g;a.mana=x,h.mana=x,f=y>0?`Recuperou ${y} Mana!`:"Mana j estava no mximo!"}break;case"antidote":"active_effects"in a?(a.active_effects.debuffs=[],a.active_effects.dots=[],f="Todos os efeitos negativos foram removidos!"):f="Antdoto s pode ser usado durante batalhas!";break;case"buff":"active_effects"in a?u.description.includes("Fora")||u.description.includes("ataque")?(a.atk+=u.effect_value,a.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_strength"}),f=`Ataque aumentado em ${u.effect_value} por 3 turnos!`):(u.description.includes("Defesa")||u.description.includes("defesa"))&&(a.def+=u.effect_value,a.active_effects.buffs.push({type:"buff",value:u.effect_value,duration:3,source_spell:"elixir_defense"}),f=`Defesa aumentada em ${u.effect_value} por 3 turnos!`):f="Elixires s podem ser usados durante batalhas!";break}const{error:p}=await we.rpc("use_consumable",{p_character_id:e,p_consumable_id:s});if(p)throw p;if(Object.keys(h).length>0){const{error:g}=await we.from("characters").update(h).eq("id",e);if(g)throw g}return{data:{message:f},error:null,success:!0}}catch(n){return console.error("Erro ao usar consumvel:",n),{data:null,error:Mu(n,"Erro ao usar consumvel"),success:!1}}}static async getMonsterDrops(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.dropCache.size>0)return{data:Array.from(this.dropCache.values()),error:null,success:!0};const{data:s,error:a}=await we.from("monster_drops").select("*").order("rarity");if(a)throw a;return this.dropCache.clear(),s.forEach(n=>{this.dropCache.set(n.id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar drops:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar drops",success:!1}}}static processMonsterDrops(e,s,a=1){const n=[];return s.forEach(i=>{const c=i.drop_chance*(1+e*.02)*a;if(Math.random()<=Math.min(.95,c)){const u=Math.floor(Math.random()*(i.max_quantity-i.min_quantity+1)+i.min_quantity);u>0&&n.push({drop_id:i.drop_id,quantity:u})}}),n}static async addDropsToInventory(e,s){try{if(s.length===0)return{data:0,error:null,success:!0};const a=s.map(f=>({drop_id:f.drop_id,quantity:f.quantity}));console.log(`[ConsumableService] Processando ${s.length} drops via funo segura`);const{supabaseAdmin:n}=await Us(async()=>{const{supabaseAdmin:f}=await Promise.resolve().then(()=>rd);return{supabaseAdmin:f}},void 0),{data:i,error:c}=await n.rpc("secure_process_combat_drops",{p_character_id:e,p_drops:a}).single();if(c)throw console.error("Erro na funo secure_process_combat_drops:",c),c;const u=i;return console.log(`[ConsumableService] ${u} drops processados com sucesso`),{data:u,error:null,success:!0}}catch(a){return console.error("Erro ao processar drops:",a),{data:null,error:Mu(a,"Erro ao processar drops"),success:!1}}}static async getCraftingRecipes(){try{if(Date.now()-this.lastFetchTimestamp<this.CACHE_DURATION&&this.recipeCache.size>0)return{data:Array.from(this.recipeCache.values()),error:null,success:!0};const{data:s,error:a}=await we.from("crafting_recipes").select(`
          *,
          ingredients:crafting_ingredients (*)
        `);if(a)throw a;return this.recipeCache.clear(),s.forEach(n=>{this.recipeCache.set(n.result_id,n)}),{data:s,error:null,success:!0}}catch(e){return console.error("Erro ao buscar receitas:",e instanceof Error?e.message:e),{data:null,error:"Erro ao buscar receitas",success:!1}}}static async canCraftItem(e,s){try{const{data:a,error:n}=await we.rpc("check_can_craft",{p_character_id:e,p_recipe_id:s});if(n)throw n;return{data:a,error:null,success:!0}}catch(a){return console.error("Erro ao verificar crafting:",a),{data:null,error:Mu(a,"Erro ao verificar crafting"),success:!1}}}static async craftItem(e,s){try{const{error:a}=await we.rpc("craft_item",{p_character_id:e,p_recipe_id:s});if(a)throw a;return{data:{message:"Item criado com sucesso!"},error:null,success:!0}}catch(a){return console.error("Erro ao criar item:",a),{data:null,error:Mu(a,"Erro ao criar item"),success:!1}}}static async getCharacterDrops(e){try{const{data:s,error:a}=await we.from("character_drops").select(`
          *,
          drop:drop_id (*)
        `).eq("character_id",e);if(a)throw a;return{data:s,error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops do personagem:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar drops do personagem",success:!1}}}static async checkIngredients(e,s){var a,n;try{const i=[];let c=!0;const[u,f]=await Promise.all([this.getCharacterConsumables(e),this.getCharacterDrops(e)]),h=u.success?u.data:[],p=f.success?f.data:[];for(const g of s)if(g.item_type==="monster_drop"){const x=p==null?void 0:p.find(y=>y.drop_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const y=((a=x==null?void 0:x.drop)==null?void 0:a.name)||"Item desconhecido";i.push(y)}}else if(g.item_type==="consumable"){const x=h==null?void 0:h.find(y=>y.consumable_id===g.item_id);if(!x||x.quantity<g.quantity){c=!1;const y=((n=x==null?void 0:x.consumable)==null?void 0:n.name)||"Item desconhecido";i.push(y)}}return{data:{hasAll:c,missing:i},error:null,success:!0}}catch(i){return console.error("Erro ao verificar ingredientes:",i instanceof Error?i.message:i),{data:null,error:"Erro ao verificar ingredientes",success:!1}}}static async getDropInfoByIds(e){try{if(e.length===0)return{data:[],error:null,success:!0};const{data:s,error:a}=await we.from("monster_drops").select("id, name, description, rarity, value").in("id",e);return a?(console.error("Erro ao buscar informaes dos drops:",a),{data:null,error:a.message,success:!1}):{data:s||[],error:null,success:!0}}catch(s){return console.error("Erro ao buscar drops:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar informaes dos drops",success:!1}}}}yt(zt,"consumableCache",new Map),yt(zt,"dropCache",new Map),yt(zt,"recipeCache",new Map),yt(zt,"lastFetchTimestamp",0),yt(zt,"CACHE_DURATION",3e5);const S6=Object.freeze(Object.defineProperty({__proto__:null,ConsumableService:zt},Symbol.toStringTag,{value:"Module"}));class E6{static async loadPlayerForGame(e){try{const s=await at.getCharacterForGame(e);if(!s.success||!s.data)throw new Error(s.error||"Personagem no encontrado");const a=s.data,n=await Zs.getCharacterEquippedSpells(e),i=n.success&&n.data?n.data:[],c=await zt.getCharacterConsumables(e),u=c.success?c.data||[]:[];return{...a,spells:i,consumables:u,active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}}}catch(s){throw console.error("[GameStateService] Erro ao carregar personagem para o jogo:",s),s}}static async saveGameProgress(e,s){const{player:a,currentFloor:n}=e,i={user_id:s,player_name:a.name,current_floor:a.floor,hp:a.hp,max_hp:a.max_hp,atk:a.atk,def:a.def,highest_floor:Math.max(a.floor,(n==null?void 0:n.floorNumber)||1)};try{const{error:c}=await we.from("game_progress").upsert(i).select();return c?(console.error("[GameStateService] Erro ao salvar progresso:",c),{success:!1,error:c.message}):{success:!0}}catch(c){return console.error("[GameStateService] Erro geral ao salvar:",c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido"}}}static async loadGameProgress(e){try{const{data:s,error:a}=await we.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return a?(console.error("[GameStateService] Erro ao carregar progresso:",a),{success:!1,error:a.message}):{success:!0,data:s[0]||void 0}}catch(s){return console.error("[GameStateService] Erro geral ao carregar:",s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido"}}}static convertMonsterToEnemy(e,s){return{id:e.id,name:e.name,level:e.level||Math.max(1,Math.floor(s/5)+1),hp:e.hp,maxHp:e.hp,attack:e.atk,defense:e.def,speed:e.speed||10,image:e.image||"",behavior:e.behavior||"balanced",mana:e.mana||0,reward_xp:e.reward_xp,reward_gold:e.reward_gold,possible_drops:e.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:e.tier,base_tier:e.base_tier,cycle_position:e.cycle_position,is_boss:e.is_boss,strength:e.strength,dexterity:e.dexterity,intelligence:e.intelligence,wisdom:e.wisdom,vitality:e.vitality,luck:e.luck,critical_chance:e.critical_chance,critical_damage:e.critical_damage,critical_resistance:e.critical_resistance,physical_resistance:e.physical_resistance,magical_resistance:e.magical_resistance,debuff_resistance:e.debuff_resistance,physical_vulnerability:e.physical_vulnerability,magical_vulnerability:e.magical_vulnerability,primary_trait:e.primary_trait,secondary_trait:e.secondary_trait,special_abilities:e.special_abilities||[]}}static async advanceToNextFloor(e){const{player:s}=e,a=s.floor+1;console.log(`[GameStateService] Avanando do andar ${s.floor} para ${a}`);try{er.clearCache(),En.clearCache(),console.log("[GameStateService] === ATUALIZANDO ANDAR NO BANCO ===");const n=await at.updateCharacterFloor(s.id,a);if(!n.success)throw new Error(n.error||"Erro ao atualizar andar do personagem");const i=await er.getFloorData(a);if(!i)throw new Error(`Erro ao gerar dados do andar ${a}`);const c=await En.getMonsterForFloor(a);if(!c.success||!c.data)throw new Error(`Falha ao gerar inimigo para o andar ${a}: ${c.error}`);const u=this.convertMonsterToEnemy(c.data,a),f=await er.checkForSpecialEvent(a);return{...e,mode:f?"special_event":"battle",player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:i,currentEnemy:f?null:u,currentSpecialEvent:f,gameMessage:f?`Evento especial encontrado: ${f.name}!`:`Andar ${a}: ${i.description}. Um ${u.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,a)}}catch(n){console.error(`[GameStateService] Erro crtico ao avanar para andar ${a}:`,n);try{const i=await En.getMonsterForFloor(a);if(!i.success||!i.data)throw new Error(`No foi possvel gerar inimigo para o andar ${a}`);const c=this.convertMonsterToEnemy(i.data,a),u={floorNumber:a,type:"common",isCheckpoint:a%10===0,minLevel:Math.max(1,Math.floor(a/5)),description:`Andar ${a} - rea Desconhecida`};return{...e,player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:u,currentEnemy:c,currentSpecialEvent:null,gameMessage:`Andar ${a}: ${u.description}. Um ${c.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(i){return console.error("[GameStateService] Falha ao criar estado de fallback:",i),{...e,gameMessage:`Erro crtico ao avanar para o andar ${a}: ${n instanceof Error?n.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}}class $r{static clearAllCaches(){console.log("[GameService] Limpando todos os caches"),er.clearCache(),En.clearCache(),console.log("[GameService] Todos os caches foram limpos")}static async generateEnemy(e){try{console.log(`[GameService] Iniciando gerao de inimigo para andar ${e}`);const{data:s,error:a,success:n}=await En.getMonsterForFloor(e);if(!n||a||!s)throw console.error(`[GameService] Erro ao buscar monstro para andar ${e}:`,a),new Error(`Nenhum monstro encontrado para o andar ${e}: ${a}`);if(!s.name||!s.hp||!s.atk||!s.def)throw console.error(`[GameService] Dados de monstro incompletos para andar ${e}:`,s),new Error(`Dados de monstro incompletos para o andar ${e}`);const i={id:s.id,name:s.name,level:s.level||Math.max(1,Math.floor(e/5)+1),hp:s.hp,maxHp:s.hp,attack:s.atk,defense:s.def,speed:s.speed||10,image:s.image||"",behavior:s.behavior||"balanced",mana:s.mana||0,reward_xp:s.reward_xp,reward_gold:s.reward_gold,possible_drops:s.possible_drops||[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]},tier:s.tier,base_tier:s.base_tier,cycle_position:s.cycle_position,is_boss:s.is_boss,strength:s.strength,dexterity:s.dexterity,intelligence:s.intelligence,wisdom:s.wisdom,vitality:s.vitality,luck:s.luck,critical_chance:s.critical_chance,critical_damage:s.critical_damage,critical_resistance:s.critical_resistance,physical_resistance:s.physical_resistance,magical_resistance:s.magical_resistance,debuff_resistance:s.debuff_resistance,physical_vulnerability:s.physical_vulnerability,magical_vulnerability:s.magical_vulnerability,primary_trait:s.primary_trait,secondary_trait:s.secondary_trait,special_abilities:s.special_abilities||[]};return console.log(`[GameService] Monstro real gerado: ${i.name} (Tier ${i.tier||1}, Pos ${i.cycle_position||"N/A"})`),console.log(`[GameService] Stats: HP: ${i.hp}/${i.maxHp}, ATK: ${i.attack}, DEF: ${i.defense}, Boss: ${i.is_boss?"SIM":"NO"}`),i}catch(s){return console.error(`[GameService] Erro ao gerar inimigo para andar ${e}:`,s),null}}static async saveGameProgress(e,s){const{player:a,currentFloor:n}=e,i={user_id:s,player_name:a.name,current_floor:a.floor,hp:a.hp,max_hp:a.max_hp,attack:a.atk,defense:a.def,highest_floor:Math.max(a.floor,(n==null?void 0:n.floorNumber)||1)};try{const{data:c,error:u}=await we.from("game_progress").upsert(i).select();return u?(console.error("Erro ao salvar progresso:",u),{success:!1,error:u.message,data:null}):{success:!0,error:void 0,data:c[0]}}catch(c){return console.error("Erro geral ao salvar:",c instanceof Error?c.message:c),{success:!1,error:c instanceof Error?c.message:"Erro desconhecido",data:null}}}static async loadGameProgress(e){try{const{data:s,error:a}=await we.from("game_progress").select("*").eq("user_id",e).order("updated_at",{ascending:!1}).limit(1);return a?(console.error("Erro ao carregar progresso:",a),{success:!1,error:a.message,data:null}):{success:!0,error:void 0,data:s[0]||null}}catch(s){return console.error("Erro geral ao carregar:",s instanceof Error?s.message:s),{success:!1,error:s instanceof Error?s.message:"Erro desconhecido",data:null}}}static async processPlayerAction(e,s,a,n){return console.log(`[GameService] Delegando ao do jogador para BattleService: ${e}`),Ol.processPlayerAction(e,s,a,n)}static async processEnemyDefeat(e){console.log("[GameService] Delegando processamento de derrota do inimigo para RewardService");const{RewardService:s}=await Us(async()=>{const{RewardService:a}=await import("./reward.service-CNAtwLfi.js");return{RewardService:a}},[]);return s.processEnemyDefeat(e)}static async processEnemyActionWithDelay(e,s,a){var c;if(console.log("[GameService] === PROCESSANDO TURNO DO INIMIGO ==="),!e.currentEnemy||e.currentEnemy.hp<=0)return console.log("[GameService] Inimigo morto antes do delay - cancelando ao"),{newState:e};const n=a??1500+Math.random()*1e3,i=((c=e.currentEnemy)==null?void 0:c.name)||"Inimigo";return console.log(`[GameService] ${i} est pensando... (${Math.round(n)}ms)`),await new Promise(u=>setTimeout(u,n)),!e.currentEnemy||e.currentEnemy.hp<=0?(console.log("[GameService] Inimigo morto aps delay - cancelando ao"),{newState:e}):(console.log(`[GameService] ${i} decidiu sua ao!`),Ol.processEnemyAction(e,s))}static async advanceToNextFloor(e){var n,i,c;const{player:s}=e,a=s.floor+1;console.log(`[GameService] Avanando do andar ${s.floor} para ${a}`);try{console.log("[GameService] === LIMPANDO CACHES ANTES DE AVANAR ==="),this.clearAllCaches(),console.log("[GameService] === ATUALIZANDO ANDAR NO BANCO ==="),console.log(`[GameService] Personagem: ${s.id}`),console.log(`[GameService] Andar atual: ${s.floor} -> Prximo andar: ${a}`);const u=await at.updateCharacterFloor(s.id,a);if(!u.success)throw console.error("[GameService] ERRO ao atualizar andar:",u.error),new Error(u.error||"Erro ao atualizar andar do personagem");console.log(`[GameService] === ANDAR ATUALIZADO NO BANCO: ${a} ===`),console.log(`[GameService] Carregando dados do andar ${a}...`);const f=await er.getFloorData(a);if(!f)throw new Error(`Erro ao gerar dados do andar ${a}`);console.log(`[GameService] Dados do andar ${a} carregados:`,f.description),console.log(`[GameService] === GERANDO INIMIGO PARA ANDAR ${a} ===`);const h=await this.generateEnemy(a);if(!h)throw console.error(`[GameService] Falha ao gerar inimigo para andar ${a}`),new Error(`Falha ao gerar inimigo para o andar ${a}`);console.log(`[GameService] Inimigo gerado: ${h.name} (HP: ${h.hp}/${h.maxHp})`);const p=await er.checkForSpecialEvent(a),g={...e,mode:p?"special_event":"battle",player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1,defenseCooldown:Math.max(0,(s.defenseCooldown||0)-1)},currentFloor:f,currentEnemy:p?null:h,currentSpecialEvent:p,gameMessage:p?`Evento especial encontrado: ${p.name}!`:`Andar ${a}: ${f.description}. Um ${h.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,selectedSpell:null,characterDeleted:!1,fleeSuccessful:!1,highestFloor:Math.max(e.highestFloor||0,a)};return console.log(`[GameService] Estado do jogo atualizado para andar ${a} com sucesso`),console.log(`[GameService] - Modo: ${g.mode}`),console.log(`[GameService] - Andar: ${(n=g.currentFloor)==null?void 0:n.description}`),console.log(`[GameService] - Inimigo: ${((i=g.currentEnemy)==null?void 0:i.name)||"N/A"}`),console.log(`[GameService] - Evento: ${((c=g.currentSpecialEvent)==null?void 0:c.name)||"N/A"}`),g}catch(u){console.error(`[GameService] Erro crtico ao avanar para andar ${a}:`,u),console.log(`[GameService] Tentando criar estado de fallback para andar ${a}...`);try{const f=await this.generateEnemy(a);if(!f)throw new Error(`No foi possvel gerar inimigo para o andar ${a}`);const h={floorNumber:a,type:"common",isCheckpoint:a%10===0,minLevel:Math.max(1,Math.floor(a/5)),description:`Andar ${a} - rea Desconhecida`};return console.log(`[GameService] Estado de fallback criado para andar ${a}`),{...e,player:{...s,floor:a,isPlayerTurn:!0,isDefending:!1,potionUsedThisTurn:!1},currentFloor:h,currentEnemy:f,currentSpecialEvent:null,gameMessage:`Andar ${a}: ${h.description}. Um ${f.name} apareceu!`,isPlayerTurn:!0,battleRewards:null,mode:"battle",selectedSpell:null}}catch(f){return console.error("[GameService] Falha ao criar estado de fallback:",f),{...e,gameMessage:`Erro crtico ao avanar para o andar ${a}: ${u instanceof Error?u.message:"Erro desconhecido"}. Retorne ao hub e tente novamente.`}}}}static async processSpecialEventInteraction(e){return er.processSpecialEventInteraction(e)}static async loadPlayerForGame(e){return E6.loadPlayerForGame(e)}}yt($r,"calculateInitiative",Ol.calculateInitiative),yt($r,"calculateExtraTurns",Ol.calculateExtraTurns),yt($r,"calculateDamage",Ol.calculateDamage),yt($r,"processEnemyAction",Ol.processEnemyAction),yt($r,"getFloorData",er.getFloorData),yt($r,"calculateFloorRewards",er.calculateFloorRewards);const C6=b.createContext(null);function A6({children:t}){const{gameState:e,setGameState:s,updateLoading:a}=ub(),{addGameLogMessage:n}=db(),{selectedCharacter:i}=fC(),c=b.useRef({timestamp:0,action:"",processing:!1}),u=b.useCallback(async(f,h,p)=>{const g=Date.now(),x=g-c.current.timestamp,y=c.current.action===f;if(console.log(`[BattleProvider] === AO SOLICITADA: ${f} ===`),console.log(`[BattleProvider] Debounce: ltima ao ${c.current.action} h ${x}ms`),!i||c.current.processing){console.warn("[BattleProvider] Ao bloqueada - sem personagem ou j processando");return}if(e.mode==="gameover"){console.warn("[BattleProvider] Ao bloqueada - personagem morto");return}if(y&&x<1e3){console.warn(`[BattleProvider] Ao bloqueada - mesma ao muito rpida (${x}ms)`);return}if(x<300){console.warn(`[BattleProvider] Ao bloqueada - muito rpida (${x}ms)`);return}c.current={timestamp:g,action:f,processing:!0},a("performAction",!0);try{console.log(`[BattleProvider] Processando ao do jogador: ${f}`);const _=await $r.processPlayerAction(f,e,h,p),{newState:j,skipTurn:N,message:S,skillXpGains:C,gameLogMessages:E}=_;if(E!=null&&E.length&&E.forEach(M=>{n(M.message,M.type)}),C!=null&&C.length&&i)try{for(const M of C)await at.addSkillXp(i.id,M.skill,M.xp)}catch(M){console.error("[BattleProvider] Erro ao aplicar skill XP:",M)}if(f==="flee"&&(j.fleeSuccessful===!0||j.mode==="fled")){console.log("[BattleProvider] === FUGA BEM-SUCEDIDA ==="),s({...j,mode:"fled",fleeSuccessful:!0,currentEnemy:null,battleRewards:null,isPlayerTurn:!0}),n(S,"system"),c.current.processing=!1,a("performAction",!1);return}if(N){s({...j,gameMessage:S}),n(S,"system"),c.current.processing=!1,a("performAction",!1);return}if(j.currentEnemy&&j.currentEnemy.hp<=0){console.log("[BattleProvider] === INIMIGO DERROTADO ===");const M=await $r.processEnemyDefeat(j);s(M),n(`${j.currentEnemy.name} foi derrotado!`,"system"),c.current.processing=!1,a("performAction",!1);return}j.currentEnemy&&!j.fleeSuccessful?(console.log("[BattleProvider] === INICIANDO TURNO DO INIMIGO ==="),s({...j,isPlayerTurn:!1,gameMessage:S}),n(S,"player_action"),setTimeout(async()=>{var M;try{console.log("[BattleProvider] Processando ao do inimigo...");const R=await $r.processEnemyActionWithDelay({...j,isPlayerTurn:!1},f==="defend",1500),{newState:P,skillXpGains:$}=R;if($!=null&&$.length&&i)try{for(const k of $)await at.addSkillXp(i.id,k.skill,k.xp)}catch(k){console.error("[BattleProvider] Erro ao aplicar skill XP de defesa:",k)}if(P.mode==="gameover"){s(P),c.current.processing=!1,a("performAction",!1);return}if(i&&await at.updateCharacterHpMana(i.id,P.player.hp,P.player.mana),(M=P.gameMessage)!=null&&M.trim()){const k=P.gameMessage.includes("causou")&&P.gameMessage.includes("dano")?"damage":"enemy_action";n(P.gameMessage,k)}s({...P,isPlayerTurn:!0})}catch(R){console.error("[BattleProvider] Erro no turno do inimigo:",R)}finally{c.current.processing=!1,a("performAction",!1)}},800)):(s({...j,gameMessage:S}),n(S,"player_action"),c.current.processing=!1,a("performAction",!1))}catch(_){console.error("[BattleProvider] Erro crtico na ao:",_),s({...e,gameMessage:`Erro: ${_ instanceof Error?_.message:"Erro desconhecido"}`}),c.current.processing=!1,a("performAction",!1)}},[e,i,s,a,n]);return r.jsx(C6.Provider,{value:{performAction:u},children:t})}const k6=b.createContext(null);function T6({children:t}){const{gameState:e,setGameState:s}=ub(),{addGameLogMessage:a}=db(),{selectedCharacter:n}=fC(),i=b.useCallback(async()=>{if(e.mode==="special_event")try{const c=await $r.processSpecialEventInteraction(e);if(n&&c.player){(c.player.hp!==e.player.hp||c.player.mana!==e.player.mana)&&await at.updateCharacterHpMana(n.id,c.player.hp,c.player.mana);const u=c.player.gold-e.player.gold;u>0&&await at.grantSecureGold(n.id,u,"special_event")}s({...c,mode:"battle",currentSpecialEvent:null}),a(c.gameMessage||"Evento especial concludo!","system")}catch(c){console.error("[EventProvider] Erro no evento especial:",c),a("Erro ao processar evento especial","system")}},[e,n,s,a]);return r.jsx(k6.Provider,{value:{interactWithEvent:i},children:t})}function R6({children:t}){return r.jsx(y6,{children:r.jsx(w6,{children:r.jsx(j6,{children:r.jsx(A6,{children:r.jsx(T6,{children:t})})})})})}function M6(){return b.useEffect(()=>{const e=localStorage.getItem("tower-trials-theme"),s=window.matchMedia("(prefers-color-scheme: dark)").matches;e==="dark"||!e&&s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),{setTheme:e=>{localStorage.setItem("tower-trials-theme",e),e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"):e==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}}}function P6({children:t}){return M6(),r.jsxs("div",{className:"font-inter",children:[r.jsx(b6,{richColors:!0,position:"top-right"}),r.jsx(LL,{children:r.jsx(R6,{children:t})})]})}const Vm=XP({component:()=>r.jsxs(P6,{children:[r.jsx(Dm,{}),r.jsx(JD,{})]})});/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase()),zN=t=>{const e=O6(t);return e.charAt(0).toUpperCase()+e.slice(1)},hC=(...t)=>t.filter((e,s,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===s).join(" ").trim(),$6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:c,...u},f)=>b.createElement("svg",{ref:f,...L6,width:e,height:e,stroke:t,strokeWidth:a?Number(s)*24/Number(e):s,className:hC("lucide",n),...!i&&!$6(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,p])=>b.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const s=b.forwardRef(({className:a,...n},i)=>b.createElement(B6,{ref:i,iconNode:e,className:hC(`lucide-${D6(zN(t))}`,`lucide-${t}`,a),...n}));return s.displayName=zN(t),s};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],rv=ke("activity",I6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ds=ke("arrow-left",V6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],mC=ke("arrow-right",q6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],z6=ke("arrow-up",U6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],H6=ke("award",F6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"m14 12-8.381 8.38a1 1 0 0 1-3.001-3L11 9",key:"5z9253"}],["path",{d:"M15 15.5a.5.5 0 0 0 .5.5A6.5 6.5 0 0 0 22 9.5a.5.5 0 0 0-.5-.5h-1.672a2 2 0 0 1-1.414-.586l-5.062-5.062a1.205 1.205 0 0 0-1.704 0L9.352 5.648a1.205 1.205 0 0 0 0 1.704l5.062 5.062A2 2 0 0 1 15 13.828z",key:"19zklq"}]],X6=ke("axe",G6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]],K6=ke("backpack",Y6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],ox=ke("beaker",W6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Q6=ke("brain",Z6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],eB=ke("building",J6);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pC=ke("calendar",tB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M22 20v-9H2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2Z",key:"109fe4"}],["path",{d:"M18 11V4H6v7",key:"mon5oj"}],["path",{d:"M15 22v-4a3 3 0 0 0-3-3a3 3 0 0 0-3 3v4",key:"1k4jtn"}],["path",{d:"M22 11V9",key:"3zbp94"}],["path",{d:"M2 11V9",key:"1x5rnq"}],["path",{d:"M6 4V2",key:"1rsq15"}],["path",{d:"M18 4V2",key:"1jsdo1"}],["path",{d:"M10 4V2",key:"75d9ly"}],["path",{d:"M14 4V2",key:"8nj3z6"}]],aB=ke("castle",sB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fb=ke("check",rB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ko=ke("chevron-down",nB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nv=ke("chevron-left",oB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gC=ke("chevron-right",iB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fc=ke("chevron-up",lB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],xC=ke("circle-alert",cB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dB=ke("circle-check-big",uB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vC=ke("circle-check",fB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mB=ke("circle-help",hB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ov=ke("circle-x",pB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],om=ke("clock",gB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],wa=ke("coins",xB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],FN=ke("crosshair",vB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Ei=ke("crown",bB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wB=ke("download",yB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]],iv=ke("droplet",_B);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],NB=ke("droplets",jB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EB=ke("eye-off",SB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_o=ke("eye",CB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],qm=ke("flame",AB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yd=ke("funnel",kB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],sr=ke("gem",TB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],MB=ke("github",RB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]],_i=ke("hammer",PB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],cs=ke("heart",DB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],$B=ke("hexagon",OB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],BB=ke("house",LB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VB=ke("info",IB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],HN=ke("keyboard",qB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zB=ke("loader-circle",UB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],HB=ke("lock",FB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],XB=ke("log-out",GB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],KB=ke("mail",YB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],lv=ke("map",WB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],QB=ke("menu",ZB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],GN=ke("message-circle",JB);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M5 12h14",key:"1ays0h"}]],bC=ke("minus",e8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],XN=ke("moon",t8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ca=ke("package",s8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],cv=ke("play",a8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$o=ke("plus",r8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],uv=ke("refresh-cw",n8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yC=ke("rotate-ccw",o8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hb=ke("save",i8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],c8=ke("scroll",l8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Um=ke("search",u8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dv=ke("shield-check",d8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vt=ke("shield",f8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],nd=ke("shirt",h8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],im=ke("shopping-bag",m8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],g8=ke("shopping-cart",p8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Qs=ke("skull",x8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],wC=ke("snowflake",v8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],lt=ke("sparkles",b8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],jt=ke("star",y8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],YN=ke("sun",w8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],kt=ke("sword",_8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],mb=ke("swords",j8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ea=ke("target",N8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],E8=ke("timer",S8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],fv=ke("trending-down",C8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],La=ke("trending-up",A8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_C=ke("triangle-alert",k8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Nr=ke("trophy",T8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],M8=ke("twitter",R8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lm=ke("user",P8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jC=ke("users",D8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oi=ke("x",O8);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ct=ke("zap",$8),hc=()=>r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(zB,{className:"h-8 w-8 animate-spin text-primary"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando..."})]})});function NC({children:t}){const{loading:e}=zs(),[s,a]=b.useState(!1);return b.useEffect(()=>{typeof window>"u"||s||a(!0)},[s]),!s||e.onAuthUserChanged?r.jsx(hc,{}):t}function L8({children:t}){const{user:e,signOut:s,loading:a}=zs(),n=Rt(),i=ab(),u=sb({strict:!1}).auth,f=b.useRef(!1),h=b.useRef(!1);return b.useEffect(()=>{if(!(typeof window>"u"||e===void 0||a.onAuthUserChanged)){if(i.pathname==="/logout"&&e){me.error("Sesso expirada, faa o login novamente."),s(),f.current=!0;return}else if(i.pathname==="/logout"&&f.current){n({to:"/auth",search:{auth:i.pathname+i.search}});return}i.pathname!=="/auth/verify-email"&&e&&!h.current&&(h.current=!0,n(u?{to:u}:{to:"/game"}))}},[e,u,i.pathname,a.onAuthUserChanged,n,s,i.search]),e===void 0||a.onAuthUserChanged?r.jsx(hc,{}):e&&!f.current&&i.pathname!=="/auth/verify-email"?r.jsx(hc,{}):t}function B8({children:t}){return r.jsx(NC,{children:r.jsx(L8,{children:t})})}function KN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function SC(...t){return e=>{let s=!1;const a=t.map(n=>{const i=KN(n,e);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let n=0;n<a.length;n++){const i=a[n];typeof i=="function"?i():KN(t[n],null)}}}}function wt(...t){return b.useCallback(SC(...t),t)}function Ci(t){const e=I8(t),s=b.forwardRef((a,n)=>{const{children:i,...c}=a,u=b.Children.toArray(i),f=u.find(q8);if(f){const h=f.props.children,p=u.map(g=>g===f?b.Children.count(h)>1?b.Children.only(null):b.isValidElement(h)?h.props.children:null:g);return r.jsx(e,{...c,ref:n,children:b.isValidElement(h)?b.cloneElement(h,void 0,p):null})}return r.jsx(e,{...c,ref:n,children:i})});return s.displayName=`${t}.Slot`,s}var EC=Ci("Slot");function I8(t){const e=b.forwardRef((s,a)=>{const{children:n,...i}=s;if(b.isValidElement(n)){const c=z8(n),u=U8(i,n.props);return n.type!==b.Fragment&&(u.ref=a?SC(a,c):c),b.cloneElement(n,u)}return b.Children.count(n)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var CC=Symbol("radix.slottable");function V8(t){const e=({children:s})=>r.jsx(r.Fragment,{children:s});return e.displayName=`${t}.Slottable`,e.__radixId=CC,e}function q8(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CC}function U8(t,e){const s={...e};for(const a in e){const n=t[a],i=e[a];/^on[A-Z]/.test(a)?n&&i?s[a]=(...u)=>{const f=i(...u);return n(...u),f}:n&&(s[a]=n):a==="style"?s[a]={...n,...i}:a==="className"&&(s[a]=[n,i].filter(Boolean).join(" "))}return{...t,...s}}function z8(t){var a,n;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function AC(t){var e,s,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(s=AC(t[e]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function pb(){for(var t,e,s=0,a="",n=arguments.length;s<n;s++)(t=arguments[s])&&(e=AC(t))&&(a&&(a+=" "),a+=e);return a}const WN=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ZN=pb,Pd=(t,e)=>s=>{var a;if((e==null?void 0:e.variants)==null)return ZN(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:n,defaultVariants:i}=e,c=Object.keys(n).map(h=>{const p=s==null?void 0:s[h],g=i==null?void 0:i[h];if(p===null)return null;const x=WN(p)||WN(g);return n[h][x]}),u=s&&Object.entries(s).reduce((h,p)=>{let[g,x]=p;return x===void 0||(h[g]=x),h},{}),f=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((h,p)=>{let{class:g,className:x,...y}=p;return Object.entries(y).every(_=>{let[j,N]=_;return Array.isArray(N)?N.includes({...i,...u}[j]):{...i,...u}[j]===N})?[...h,g,x]:h},[]);return ZN(t,c,f,s==null?void 0:s.class,s==null?void 0:s.className)},gb="-",F8=t=>{const e=G8(t),{conflictingClassGroups:s,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:c=>{const u=c.split(gb);return u[0]===""&&u.length!==1&&u.shift(),kC(u,e)||H8(c)},getConflictingClassGroupIds:(c,u)=>{const f=s[c]||[];return u&&a[c]?[...f,...a[c]]:f}}},kC=(t,e)=>{var c;if(t.length===0)return e.classGroupId;const s=t[0],a=e.nextPart.get(s),n=a?kC(t.slice(1),a):void 0;if(n)return n;if(e.validators.length===0)return;const i=t.join(gb);return(c=e.validators.find(({validator:u})=>u(i)))==null?void 0:c.classGroupId},QN=/^\[(.+)\]$/,H8=t=>{if(QN.test(t)){const e=QN.exec(t)[1],s=e==null?void 0:e.substring(0,e.indexOf(":"));if(s)return"arbitrary.."+s}},G8=t=>{const{theme:e,classGroups:s}=t,a={nextPart:new Map,validators:[]};for(const n in s)hv(s[n],a,n,e);return a},hv=(t,e,s,a)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?e:JN(e,n);i.classGroupId=s;return}if(typeof n=="function"){if(X8(n)){hv(n(a),e,s,a);return}e.validators.push({validator:n,classGroupId:s});return}Object.entries(n).forEach(([i,c])=>{hv(c,JN(e,i),s,a)})})},JN=(t,e)=>{let s=t;return e.split(gb).forEach(a=>{s.nextPart.has(a)||s.nextPart.set(a,{nextPart:new Map,validators:[]}),s=s.nextPart.get(a)}),s},X8=t=>t.isThemeGetter,Y8=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,s=new Map,a=new Map;const n=(i,c)=>{s.set(i,c),e++,e>t&&(e=0,a=s,s=new Map)};return{get(i){let c=s.get(i);if(c!==void 0)return c;if((c=a.get(i))!==void 0)return n(i,c),c},set(i,c){s.has(i)?s.set(i,c):n(i,c)}}},mv="!",pv=":",K8=pv.length,W8=t=>{const{prefix:e,experimentalParseClassName:s}=t;let a=n=>{const i=[];let c=0,u=0,f=0,h;for(let _=0;_<n.length;_++){let j=n[_];if(c===0&&u===0){if(j===pv){i.push(n.slice(f,_)),f=_+K8;continue}if(j==="/"){h=_;continue}}j==="["?c++:j==="]"?c--:j==="("?u++:j===")"&&u--}const p=i.length===0?n:n.substring(f),g=Z8(p),x=g!==p,y=h&&h>f?h-f:void 0;return{modifiers:i,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:y}};if(e){const n=e+pv,i=a;a=c=>c.startsWith(n)?i(c.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(s){const n=a;a=i=>s({className:i,parseClassName:n})}return a},Z8=t=>t.endsWith(mv)?t.substring(0,t.length-1):t.startsWith(mv)?t.substring(1):t,Q8=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const n=[];let i=[];return a.forEach(c=>{c[0]==="["||e[c]?(n.push(...i.sort(),c),i=[]):i.push(c)}),n.push(...i.sort()),n}},J8=t=>({cache:Y8(t.cacheSize),parseClassName:W8(t),sortModifiers:Q8(t),...F8(t)}),eI=/\s+/,tI=(t,e)=>{const{parseClassName:s,getClassGroupId:a,getConflictingClassGroupIds:n,sortModifiers:i}=e,c=[],u=t.trim().split(eI);let f="";for(let h=u.length-1;h>=0;h-=1){const p=u[h],{isExternal:g,modifiers:x,hasImportantModifier:y,baseClassName:_,maybePostfixModifierPosition:j}=s(p);if(g){f=p+(f.length>0?" "+f:f);continue}let N=!!j,S=a(N?_.substring(0,j):_);if(!S){if(!N){f=p+(f.length>0?" "+f:f);continue}if(S=a(_),!S){f=p+(f.length>0?" "+f:f);continue}N=!1}const C=i(x).join(":"),E=y?C+mv:C,M=E+S;if(c.includes(M))continue;c.push(M);const R=n(S,N);for(let P=0;P<R.length;++P){const $=R[P];c.push(E+$)}f=p+(f.length>0?" "+f:f)}return f};function sI(){let t=0,e,s,a="";for(;t<arguments.length;)(e=arguments[t++])&&(s=TC(e))&&(a&&(a+=" "),a+=s);return a}const TC=t=>{if(typeof t=="string")return t;let e,s="";for(let a=0;a<t.length;a++)t[a]&&(e=TC(t[a]))&&(s&&(s+=" "),s+=e);return s};function aI(t,...e){let s,a,n,i=c;function c(f){const h=e.reduce((p,g)=>g(p),t());return s=J8(h),a=s.cache.get,n=s.cache.set,i=u,u(f)}function u(f){const h=a(f);if(h)return h;const p=tI(f,s);return n(f,p),p}return function(){return i(sI.apply(null,arguments))}}const ys=t=>{const e=s=>s[t]||[];return e.isThemeGetter=!0,e},RC=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,MC=/^\((?:(\w[\w-]*):)?(.+)\)$/i,rI=/^\d+\/\d+$/,nI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$l=t=>rI.test(t),ut=t=>!!t&&!Number.isNaN(Number(t)),ao=t=>!!t&&Number.isInteger(Number(t)),ix=t=>t.endsWith("%")&&ut(t.slice(0,-1)),vn=t=>nI.test(t),uI=()=>!0,dI=t=>oI.test(t)&&!iI.test(t),PC=()=>!1,fI=t=>lI.test(t),hI=t=>cI.test(t),mI=t=>!Le(t)&&!Be(t),pI=t=>jc(t,$C,PC),Le=t=>RC.test(t),ii=t=>jc(t,LC,dI),lx=t=>jc(t,yI,ut),eS=t=>jc(t,DC,PC),gI=t=>jc(t,OC,hI),fh=t=>jc(t,BC,fI),Be=t=>MC.test(t),Pu=t=>Nc(t,LC),xI=t=>Nc(t,wI),tS=t=>Nc(t,DC),vI=t=>Nc(t,$C),bI=t=>Nc(t,OC),hh=t=>Nc(t,BC,!0),jc=(t,e,s)=>{const a=RC.exec(t);return a?a[1]?e(a[1]):s(a[2]):!1},Nc=(t,e,s=!1)=>{const a=MC.exec(t);return a?a[1]?e(a[1]):s:!1},DC=t=>t==="position"||t==="percentage",OC=t=>t==="image"||t==="url",$C=t=>t==="length"||t==="size"||t==="bg-size",LC=t=>t==="length",yI=t=>t==="number",wI=t=>t==="family-name",BC=t=>t==="shadow",_I=()=>{const t=ys("color"),e=ys("font"),s=ys("text"),a=ys("font-weight"),n=ys("tracking"),i=ys("leading"),c=ys("breakpoint"),u=ys("container"),f=ys("spacing"),h=ys("radius"),p=ys("shadow"),g=ys("inset-shadow"),x=ys("text-shadow"),y=ys("drop-shadow"),_=ys("blur"),j=ys("perspective"),N=ys("aspect"),S=ys("ease"),C=ys("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],M=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...M(),Be,Le],P=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto","contain","none"],k=()=>[Be,Le,f],O=()=>[$l,"full","auto",...k()],H=()=>[ao,"none","subgrid",Be,Le],Y=()=>["auto",{span:["full",ao,Be,Le]},ao,Be,Le],I=()=>[ao,"auto",Be,Le],z=()=>["auto","min","max","fr",Be,Le],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],A=()=>["auto",...k()],B=()=>[$l,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],V=()=>[t,Be,Le],W=()=>[...M(),tS,eS,{position:[Be,Le]}],L=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",vI,pI,{size:[Be,Le]}],ie=()=>[ix,Pu,ii],se=()=>["","none","full",h,Be,Le],ue=()=>["",ut,Pu,ii],le=()=>["solid","dashed","dotted","double"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[ut,ix,tS,eS],ce=()=>["","none",_,Be,Le],be=()=>["none",ut,Be,Le],Ne=()=>["none",ut,Be,Le],J=()=>[ut,Be,Le],ge=()=>[$l,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[vn],breakpoint:[vn],color:[uI],container:[vn],"drop-shadow":[vn],ease:["in","out","in-out"],font:[mI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[vn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[vn],shadow:[vn],spacing:["px",ut],text:[vn],"text-shadow":[vn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",$l,Le,Be,N]}],container:["container"],columns:[{columns:[ut,Le,Be,u]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:$()}],"overscroll-x":[{"overscroll-x":$()}],"overscroll-y":[{"overscroll-y":$()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[ao,"auto",Be,Le]}],basis:[{basis:[$l,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ut,$l,"auto","initial","none",Le]}],grow:[{grow:["",ut,Be,Le]}],shrink:[{shrink:["",ut,Be,Le]}],order:[{order:[ao,"first","last","none",Be,Le]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":z()}],"auto-rows":[{"auto-rows":z()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:A()}],mx:[{mx:A()}],my:[{my:A()}],ms:[{ms:A()}],me:[{me:A()}],mt:[{mt:A()}],mr:[{mr:A()}],mb:[{mb:A()}],ml:[{ml:A()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[u,"screen",...B()]}],"min-w":[{"min-w":[u,"screen","none",...B()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",s,Pu,ii]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Be,lx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ix,Le]}],"font-family":[{font:[xI,Le,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Be,Le]}],"line-clamp":[{"line-clamp":[ut,"none",Be,lx]}],leading:[{leading:[i,...k()]}],"list-image":[{"list-image":["none",Be,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Be,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:V()}],"text-color":[{text:V()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:[ut,"from-font","auto",Be,ii]}],"text-decoration-color":[{decoration:V()}],"underline-offset":[{"underline-offset":[ut,"auto",Be,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Be,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:W()}],"bg-repeat":[{bg:L()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ao,Be,Le],radial:["",Be,Le],conic:[ao,Be,Le]},bI,gI]}],"bg-color":[{bg:V()}],"gradient-from-pos":[{from:ie()}],"gradient-via-pos":[{via:ie()}],"gradient-to-pos":[{to:ie()}],"gradient-from":[{from:V()}],"gradient-via":[{via:V()}],"gradient-to":[{to:V()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...le(),"hidden","none"]}],"divide-style":[{divide:[...le(),"hidden","none"]}],"border-color":[{border:V()}],"border-color-x":[{"border-x":V()}],"border-color-y":[{"border-y":V()}],"border-color-s":[{"border-s":V()}],"border-color-e":[{"border-e":V()}],"border-color-t":[{"border-t":V()}],"border-color-r":[{"border-r":V()}],"border-color-b":[{"border-b":V()}],"border-color-l":[{"border-l":V()}],"divide-color":[{divide:V()}],"outline-style":[{outline:[...le(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ut,Be,Le]}],"outline-w":[{outline:["",ut,Pu,ii]}],"outline-color":[{outline:V()}],shadow:[{shadow:["","none",p,hh,fh]}],"shadow-color":[{shadow:V()}],"inset-shadow":[{"inset-shadow":["none",g,hh,fh]}],"inset-shadow-color":[{"inset-shadow":V()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:V()}],"ring-offset-w":[{"ring-offset":[ut,ii]}],"ring-offset-color":[{"ring-offset":V()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":V()}],"text-shadow":[{"text-shadow":["none",x,hh,fh]}],"text-shadow-color":[{"text-shadow":V()}],opacity:[{opacity:[ut,Be,Le]}],"mix-blend":[{"mix-blend":[...re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ut]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":V()}],"mask-image-linear-to-color":[{"mask-linear-to":V()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":V()}],"mask-image-t-to-color":[{"mask-t-to":V()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":V()}],"mask-image-r-to-color":[{"mask-r-to":V()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":V()}],"mask-image-b-to-color":[{"mask-b-to":V()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":V()}],"mask-image-l-to-color":[{"mask-l-to":V()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":V()}],"mask-image-x-to-color":[{"mask-x-to":V()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":V()}],"mask-image-y-to-color":[{"mask-y-to":V()}],"mask-image-radial":[{"mask-radial":[Be,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":V()}],"mask-image-radial-to-color":[{"mask-radial-to":V()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":M()}],"mask-image-conic-pos":[{"mask-conic":[ut]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":V()}],"mask-image-conic-to-color":[{"mask-conic-to":V()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:W()}],"mask-repeat":[{mask:L()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Be,Le]}],filter:[{filter:["","none",Be,Le]}],blur:[{blur:ce()}],brightness:[{brightness:[ut,Be,Le]}],contrast:[{contrast:[ut,Be,Le]}],"drop-shadow":[{"drop-shadow":["","none",y,hh,fh]}],"drop-shadow-color":[{"drop-shadow":V()}],grayscale:[{grayscale:["",ut,Be,Le]}],"hue-rotate":[{"hue-rotate":[ut,Be,Le]}],invert:[{invert:["",ut,Be,Le]}],saturate:[{saturate:[ut,Be,Le]}],sepia:[{sepia:["",ut,Be,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Be,Le]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[ut,Be,Le]}],"backdrop-contrast":[{"backdrop-contrast":[ut,Be,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ut,Be,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ut,Be,Le]}],"backdrop-invert":[{"backdrop-invert":["",ut,Be,Le]}],"backdrop-opacity":[{"backdrop-opacity":[ut,Be,Le]}],"backdrop-saturate":[{"backdrop-saturate":[ut,Be,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",ut,Be,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Be,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ut,"initial",Be,Le]}],ease:[{ease:["linear","initial",S,Be,Le]}],delay:[{delay:[ut,Be,Le]}],animate:[{animate:["none",C,Be,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Be,Le]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:be()}],"rotate-x":[{"rotate-x":be()}],"rotate-y":[{"rotate-y":be()}],"rotate-z":[{"rotate-z":be()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:J()}],"skew-x":[{"skew-x":J()}],"skew-y":[{"skew-y":J()}],transform:[{transform:[Be,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ge()}],"translate-x":[{"translate-x":ge()}],"translate-y":[{"translate-y":ge()}],"translate-z":[{"translate-z":ge()}],"translate-none":["translate-none"],accent:[{accent:V()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:V()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be,Le]}],fill:[{fill:["none",...V()]}],"stroke-w":[{stroke:[ut,Pu,ii,lx]}],stroke:[{stroke:["none",...V()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IC=aI(_I);function Ie(...t){return IC(pb(t))}const jI=Pd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=b.forwardRef(({className:t,variant:e,size:s,asChild:a=!1,...n},i)=>{const c=a?EC:"button";return r.jsx(c,{className:Ie(jI({variant:e,size:s,className:t})),ref:i,...n})});fe.displayName="Button";function VC(...t){return IC(pb(t))}const qC={layout:{container:"max-w-5xl mx-auto p-6 sm:p-8",section:"py-8 md:py-12"}},NI=({children:t,className:e,id:s,style:a})=>r.jsx("section",{className:VC(qC.layout.section,e),id:s,style:a,children:t}),sS=({children:t,className:e,id:s,style:a})=>r.jsx("div",{className:VC(qC.layout.container,e),id:s,style:a,children:t});function UC(){return r.jsx("footer",{className:"bg-gradient-to-t from-background/90 to-background/70 border-t border-border",children:r.jsxs(NI,{children:[r.jsxs(sS,{className:"grid gap-12 md:grid-cols-[1.5fr_0.5fr_0.5fr]",children:[r.jsxs("div",{className:"not-prose flex flex-col gap-6",children:[r.jsxs(yo,{to:"/",className:"group",children:[r.jsx("h3",{className:"sr-only",children:"Tower Trials"}),r.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Enfrente desafios, suba a torre e torne-se uma lenda neste RPG roguelike pico."})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("h5",{className:"font-bold text-primary",children:"Links"}),r.jsx(yo,{to:"/game/ranking",className:"text-muted-foreground hover:text-primary transition-colors",children:"Ranking Global"}),r.jsx(yo,{to:"/game/guide",className:"text-muted-foreground hover:text-primary transition-colors",children:"Guia do Jogo"})]}),r.jsx("div",{className:"flex flex-col gap-3",children:r.jsx("h5",{className:"font-bold text-primary",children:"Legal"})})]}),r.jsxs(sS,{className:"not-prose mt-8 flex flex-col justify-between gap-6 border-t border-border pt-8 md:flex-row md:items-center md:gap-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:r.jsx(MB,{className:"h-5 w-5"})}),r.jsx(fe,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",children:r.jsx(M8,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-muted-foreground",children:" 2024 Tower Trials. Todos os direitos reservados."})]})]})})}const SI=Yt("/_public")({component:EI});function EI(){return r.jsx(B8,{children:r.jsxs("main",{className:"flex min-h-screen flex-col",children:[r.jsx("div",{className:"flex flex-1 items-center justify-center p-4",children:r.jsx(Dm,{})}),r.jsx(UC,{})]})})}function CI({children:t}){const{user:e,loading:s}=zs(),a=Rt(),n=ab();return b.useEffect(()=>{if(typeof window<"u"&&e===null&&!s.onAuthUserChanged){const i=n.pathname+n.search;a({to:"/auth",search:{auth:i}})}},[e,n.pathname,n.search,s.onAuthUserChanged,a]),e==null||s.onAuthUserChanged?r.jsx(hc,{}):t}function AI({children:t}){return r.jsx(NC,{children:r.jsx(CI,{children:t})})}function kI({children:t}){const{user:e}=zs(),s=Rt();return b.useEffect(()=>{e&&!e.email_confirmed_at&&s({to:"/auth/verify-email",search:{auth:location.pathname+location.search}})},[e,s]),!e||!e.email_confirmed_at?null:r.jsx(r.Fragment,{children:t})}function TI(){const[t,e]=b.useState(null),[s,a]=b.useState(!1),[n,i]=b.useState(!1);return b.useEffect(()=>{const u=p=>{p.preventDefault(),e(p),a(!0)},f=()=>{i(!0),a(!1),e(null),console.log("PWA foi instalado com sucesso!")},h=()=>{const p=window.matchMedia("(display-mode: standalone)").matches,g=window.matchMedia("(display-mode: fullscreen)").matches,x=window.matchMedia("(display-mode: minimal-ui)").matches;(p||g||x)&&i(!0)};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",f),h(),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",f)}},[]),{installPWA:async()=>{if(!t)return!1;try{t.prompt();const{outcome:u}=await t.userChoice;return u==="accepted"?(e(null),a(!1),!0):!1}catch(u){return console.error("Erro ao instalar PWA:",u),!1}},isInstallable:s,isInstalled:n,canInstall:s&&!n}}function RI(){const{installPWA:t,canInstall:e,isInstalled:s}=TI(),a=async()=>{await t()&&console.log("App instalado com sucesso!")};return s?r.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"App Instalado"]}):e?r.jsxs(fe,{onClick:a,variant:"outline",size:"sm",className:"flex items-center gap-2 bg-blue-50 hover:bg-blue-100 dark:bg-blue-950 dark:hover:bg-blue-900 border-blue-200 dark:border-blue-800",children:[r.jsx(wB,{className:"w-4 h-4"}),"Instalar App"]}):null}function Ge(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function MI(t,e){const s=b.createContext(e),a=i=>{const{children:c,...u}=i,f=b.useMemo(()=>u,Object.values(u));return r.jsx(s.Provider,{value:f,children:c})};a.displayName=t+"Provider";function n(i){const c=b.useContext(s);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[a,n]}function nr(t,e=[]){let s=[];function a(i,c){const u=b.createContext(c),f=s.length;s=[...s,c];const h=g=>{var S;const{scope:x,children:y,..._}=g,j=((S=x==null?void 0:x[t])==null?void 0:S[f])||u,N=b.useMemo(()=>_,Object.values(_));return r.jsx(j.Provider,{value:N,children:y})};h.displayName=i+"Provider";function p(g,x){var j;const y=((j=x==null?void 0:x[t])==null?void 0:j[f])||u,_=b.useContext(y);if(_)return _;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${i}\``)}return[h,p]}const n=()=>{const i=s.map(c=>b.createContext(c));return function(u){const f=(u==null?void 0:u[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...u,[t]:f}}),[u,f])}};return n.scopeName=t,[a,PI(n,...e)]}function PI(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const a=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const c=a.reduce((u,{useScope:f,scopeName:h})=>{const g=f(i)[`__scope${h}`];return{...u,...g}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return s.scopeName=e.scopeName,s}var gs=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},DI=uE[" useId ".trim().toString()]||(()=>{}),OI=0;function Fr(t){const[e,s]=b.useState(DI());return gs(()=>{s(a=>a??String(OI++))},[t]),t||(e?`radix-${e}`:"")}var $I=uE[" useInsertionEffect ".trim().toString()]||gs;function To({prop:t,defaultProp:e,onChange:s=()=>{},caller:a}){const[n,i,c]=LI({defaultProp:e,onChange:s}),u=t!==void 0,f=u?t:n;{const p=b.useRef(t!==void 0);b.useEffect(()=>{const g=p.current;g!==u&&console.warn(`${a} is changing from ${g?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,a])}const h=b.useCallback(p=>{var g;if(u){const x=BI(p)?p(t):p;x!==t&&((g=c.current)==null||g.call(c,x))}else i(p)},[u,t,i,c]);return[f,h]}function LI({defaultProp:t,onChange:e}){const[s,a]=b.useState(t),n=b.useRef(s),i=b.useRef(e);return $I(()=>{i.current=e},[e]),b.useEffect(()=>{var c;n.current!==s&&((c=i.current)==null||c.call(i,s),n.current=s)},[s,n]),[s,a,i]}function BI(t){return typeof t=="function"}var II=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ke=II.reduce((t,e)=>{const s=Ci(`Primitive.${e}`),a=b.forwardRef((n,i)=>{const{asChild:c,...u}=n,f=c?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(f,{...u,ref:i})});return a.displayName=`Primitive.${e}`,{...t,[e]:a}},{});function VI(t,e){t&&Mi.flushSync(()=>t.dispatchEvent(e))}function Js(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...s)=>{var a;return(a=e.current)==null?void 0:a.call(e,...s)},[])}function qI(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t);b.useEffect(()=>{const a=n=>{n.key==="Escape"&&s(n)};return e.addEventListener("keydown",a,{capture:!0}),()=>e.removeEventListener("keydown",a,{capture:!0})},[s,e])}var UI="DismissableLayer",gv="dismissableLayer.update",zI="dismissableLayer.pointerDownOutside",FI="dismissableLayer.focusOutside",aS,zC=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dd=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...f}=t,h=b.useContext(zC),[p,g]=b.useState(null),x=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=b.useState({}),_=wt(e,$=>g($)),j=Array.from(h.layers),[N]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),S=j.indexOf(N),C=p?j.indexOf(p):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,M=C>=S,R=XI($=>{const k=$.target,O=[...h.branches].some(H=>H.contains(k));!M||O||(n==null||n($),c==null||c($),$.defaultPrevented||u==null||u())},x),P=YI($=>{const k=$.target;[...h.branches].some(H=>H.contains(k))||(i==null||i($),c==null||c($),$.defaultPrevented||u==null||u())},x);return qI($=>{C===h.layers.size-1&&(a==null||a($),!$.defaultPrevented&&u&&($.preventDefault(),u()))},x),b.useEffect(()=>{if(p)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(aS=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),rS(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=aS)}},[p,x,s,h]),b.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),rS())},[p,h]),b.useEffect(()=>{const $=()=>y({});return document.addEventListener(gv,$),()=>document.removeEventListener(gv,$)},[]),r.jsx(Ke.div,{...f,ref:_,style:{pointerEvents:E?M?"auto":"none":void 0,...t.style},onFocusCapture:Ge(t.onFocusCapture,P.onFocusCapture),onBlurCapture:Ge(t.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Ge(t.onPointerDownCapture,R.onPointerDownCapture)})});Dd.displayName=UI;var HI="DismissableLayerBranch",GI=b.forwardRef((t,e)=>{const s=b.useContext(zC),a=b.useRef(null),n=wt(e,a);return b.useEffect(()=>{const i=a.current;if(i)return s.branches.add(i),()=>{s.branches.delete(i)}},[s.branches]),r.jsx(Ke.div,{...t,ref:n})});GI.displayName=HI;function XI(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t),a=b.useRef(!1),n=b.useRef(()=>{});return b.useEffect(()=>{const i=u=>{if(u.target&&!a.current){let f=function(){FC(zI,s,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=f,e.addEventListener("click",n.current,{once:!0})):f()}else e.removeEventListener("click",n.current);a.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",i),e.removeEventListener("click",n.current)}},[e,s]),{onPointerDownCapture:()=>a.current=!0}}function YI(t,e=globalThis==null?void 0:globalThis.document){const s=Js(t),a=b.useRef(!1);return b.useEffect(()=>{const n=i=>{i.target&&!a.current&&FC(FI,s,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function rS(){const t=new CustomEvent(gv);document.dispatchEvent(t)}function FC(t,e,s,{discrete:a}){const n=s.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&n.addEventListener(t,e,{once:!0}),a?VI(n,i):n.dispatchEvent(i)}var cx="focusScope.autoFocusOnMount",ux="focusScope.autoFocusOnUnmount",nS={bubbles:!1,cancelable:!0},KI="FocusScope",zm=b.forwardRef((t,e)=>{const{loop:s=!1,trapped:a=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...c}=t,[u,f]=b.useState(null),h=Js(n),p=Js(i),g=b.useRef(null),x=wt(e,j=>f(j)),y=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(a){let j=function(E){if(y.paused||!u)return;const M=E.target;u.contains(M)?g.current=M:no(g.current,{select:!0})},N=function(E){if(y.paused||!u)return;const M=E.relatedTarget;M!==null&&(u.contains(M)||no(g.current,{select:!0}))},S=function(E){if(document.activeElement===document.body)for(const R of E)R.removedNodes.length>0&&no(u)};document.addEventListener("focusin",j),document.addEventListener("focusout",N);const C=new MutationObserver(S);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",j),document.removeEventListener("focusout",N),C.disconnect()}}},[a,u,y.paused]),b.useEffect(()=>{if(u){iS.add(y);const j=document.activeElement;if(!u.contains(j)){const S=new CustomEvent(cx,nS);u.addEventListener(cx,h),u.dispatchEvent(S),S.defaultPrevented||(WI(tV(HC(u)),{select:!0}),document.activeElement===j&&no(u))}return()=>{u.removeEventListener(cx,h),setTimeout(()=>{const S=new CustomEvent(ux,nS);u.addEventListener(ux,p),u.dispatchEvent(S),S.defaultPrevented||no(j??document.body,{select:!0}),u.removeEventListener(ux,p),iS.remove(y)},0)}}},[u,h,p,y]);const _=b.useCallback(j=>{if(!s&&!a||y.paused)return;const N=j.key==="Tab"&&!j.altKey&&!j.ctrlKey&&!j.metaKey,S=document.activeElement;if(N&&S){const C=j.currentTarget,[E,M]=ZI(C);E&&M?!j.shiftKey&&S===M?(j.preventDefault(),s&&no(E,{select:!0})):j.shiftKey&&S===E&&(j.preventDefault(),s&&no(M,{select:!0})):S===C&&j.preventDefault()}},[s,a,y.paused]);return r.jsx(Ke.div,{tabIndex:-1,...c,ref:x,onKeyDown:_})});zm.displayName=KI;function WI(t,{select:e=!1}={}){const s=document.activeElement;for(const a of t)if(no(a,{select:e}),document.activeElement!==s)return}function ZI(t){const e=HC(t),s=oS(e,t),a=oS(e.reverse(),t);return[s,a]}function HC(t){const e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const n=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||n?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)e.push(s.currentNode);return e}function oS(t,e){for(const s of t)if(!QI(s,{upTo:e}))return s}function QI(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function JI(t){return t instanceof HTMLInputElement&&"select"in t}function no(t,{select:e=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&JI(t)&&e&&t.select()}}var iS=eV();function eV(){let t=[];return{add(e){const s=t[0];e!==s&&(s==null||s.pause()),t=lS(t,e),t.unshift(e)},remove(e){var s;t=lS(t,e),(s=t[0])==null||s.resume()}}}function lS(t,e){const s=[...t],a=s.indexOf(e);return a!==-1&&s.splice(a,1),s}function tV(t){return t.filter(e=>e.tagName!=="A")}var sV="Portal",Fm=b.forwardRef((t,e)=>{var u;const{container:s,...a}=t,[n,i]=b.useState(!1);gs(()=>i(!0),[]);const c=s||n&&((u=globalThis==null?void 0:globalThis.document)==null?void 0:u.body);return c?jE.createPortal(r.jsx(Ke.div,{...a,ref:e}),c):null});Fm.displayName=sV;function aV(t,e){return b.useReducer((s,a)=>e[s][a]??s,t)}var Ba=t=>{const{present:e,children:s}=t,a=rV(e),n=typeof s=="function"?s({present:a.isPresent}):b.Children.only(s),i=wt(a.ref,nV(n));return typeof s=="function"||a.isPresent?b.cloneElement(n,{ref:i}):null};Ba.displayName="Presence";function rV(t){const[e,s]=b.useState(),a=b.useRef(null),n=b.useRef(t),i=b.useRef("none"),c=t?"mounted":"unmounted",[u,f]=aV(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const h=mh(a.current);i.current=u==="mounted"?h:"none"},[u]),gs(()=>{const h=a.current,p=n.current;if(p!==t){const x=i.current,y=mh(h);t?f("MOUNT"):y==="none"||(h==null?void 0:h.display)==="none"?f("UNMOUNT"):f(p&&x!==y?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,f]),gs(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,g=y=>{const j=mh(a.current).includes(y.animationName);if(y.target===e&&j&&(f("ANIMATION_END"),!n.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},x=y=>{y.target===e&&(i.current=mh(a.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",g),e.addEventListener("animationend",g),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",g),e.removeEventListener("animationend",g)}}else f("ANIMATION_END")},[e,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(h=>{a.current=h?getComputedStyle(h):null,s(h)},[])}}function mh(t){return(t==null?void 0:t.animationName)||"none"}function nV(t){var a,n;let e=(a=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:a.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var dx=0;function xb(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cS()),document.body.insertAdjacentElement("beforeend",t[1]??cS()),dx++,()=>{dx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),dx--}},[])}function cS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Lr=function(){return Lr=Object.assign||function(e){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Lr.apply(this,arguments)};function GC(t,e){var s={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(s[a[n]]=t[a[n]]);return s}function oV(t,e,s){if(s||arguments.length===2)for(var a=0,n=e.length,i;a<n;a++)(i||!(a in e))&&(i||(i=Array.prototype.slice.call(e,0,a)),i[a]=e[a]);return t.concat(i||Array.prototype.slice.call(e))}var Ph="right-scroll-bar-position",Dh="width-before-scroll-bar",iV="with-scroll-bars-hidden",lV="--removed-body-scroll-bar-size";function fx(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function cV(t,e){var s=b.useState(function(){return{value:t,callback:e,facade:{get current(){return s.value},set current(a){var n=s.value;n!==a&&(s.value=a,s.callback(a,n))}}}})[0];return s.callback=e,s.facade}var uV=typeof window<"u"?b.useLayoutEffect:b.useEffect,uS=new WeakMap;function dV(t,e){var s=cV(null,function(a){return t.forEach(function(n){return fx(n,a)})});return uV(function(){var a=uS.get(s);if(a){var n=new Set(a),i=new Set(t),c=s.current;n.forEach(function(u){i.has(u)||fx(u,null)}),i.forEach(function(u){n.has(u)||fx(u,c)})}uS.set(s,t)},[t]),s}function fV(t){return t}function hV(t,e){e===void 0&&(e=fV);var s=[],a=!1,n={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(i){var c=e(i,a);return s.push(c),function(){s=s.filter(function(u){return u!==c})}},assignSyncMedium:function(i){for(a=!0;s.length;){var c=s;s=[],c.forEach(i)}s={push:function(u){return i(u)},filter:function(){return s}}},assignMedium:function(i){a=!0;var c=[];if(s.length){var u=s;s=[],u.forEach(i),c=s}var f=function(){var p=c;c=[],p.forEach(i)},h=function(){return Promise.resolve().then(f)};h(),s={push:function(p){c.push(p),h()},filter:function(p){return c=c.filter(p),s}}}};return n}function mV(t){t===void 0&&(t={});var e=hV(null);return e.options=Lr({async:!0,ssr:!1},t),e}var XC=function(t){var e=t.sideCar,s=GC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=e.read();if(!a)throw new Error("Sidecar medium not found");return b.createElement(a,Lr({},s))};XC.isSideCarExport=!0;function pV(t,e){return t.useMedium(e),XC}var YC=mV(),hx=function(){},Hm=b.forwardRef(function(t,e){var s=b.useRef(null),a=b.useState({onScrollCapture:hx,onWheelCapture:hx,onTouchMoveCapture:hx}),n=a[0],i=a[1],c=t.forwardProps,u=t.children,f=t.className,h=t.removeScrollBar,p=t.enabled,g=t.shards,x=t.sideCar,y=t.noRelative,_=t.noIsolation,j=t.inert,N=t.allowPinchZoom,S=t.as,C=S===void 0?"div":S,E=t.gapMode,M=GC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=x,P=dV([s,e]),$=Lr(Lr({},M),n);return b.createElement(b.Fragment,null,p&&b.createElement(R,{sideCar:YC,removeScrollBar:h,shards:g,noRelative:y,noIsolation:_,inert:j,setCallbacks:i,allowPinchZoom:!!N,lockRef:s,gapMode:E}),c?b.cloneElement(b.Children.only(u),Lr(Lr({},$),{ref:P})):b.createElement(C,Lr({},$,{className:f,ref:P}),u))});Hm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hm.classNames={fullWidth:Dh,zeroRight:Ph};var gV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xV(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=gV();return e&&t.setAttribute("nonce",e),t}function vV(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function bV(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var yV=function(){var t=0,e=null;return{add:function(s){t==0&&(e=xV())&&(vV(e,s),bV(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wV=function(){var t=yV();return function(e,s){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&s])}},KC=function(){var t=wV(),e=function(s){var a=s.styles,n=s.dynamic;return t(a,n),null};return e},_V={left:0,top:0,right:0,gap:0},mx=function(t){return parseInt(t||"",10)||0},jV=function(t){var e=window.getComputedStyle(document.body),s=e[t==="padding"?"paddingLeft":"marginLeft"],a=e[t==="padding"?"paddingTop":"marginTop"],n=e[t==="padding"?"paddingRight":"marginRight"];return[mx(s),mx(a),mx(n)]},NV=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return _V;var e=jV(t),s=document.documentElement.clientWidth,a=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,a-s+e[2]-e[0])}},SV=KC(),ac="data-scroll-locked",EV=function(t,e,s,a){var n=t.left,i=t.top,c=t.right,u=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(iV,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(u,"px ").concat(a,`;
  }
  body[`).concat(ac,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(a,";"),s==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(a,`;
    `),s==="padding"&&"padding-right: ".concat(u,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ph,` {
    right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat(Dh,` {
    margin-right: `).concat(u,"px ").concat(a,`;
  }
  
  .`).concat(Ph," .").concat(Ph,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(Dh," .").concat(Dh,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(ac,`] {
    `).concat(lV,": ").concat(u,`px;
  }
`)},dS=function(){var t=parseInt(document.body.getAttribute(ac)||"0",10);return isFinite(t)?t:0},CV=function(){b.useEffect(function(){return document.body.setAttribute(ac,(dS()+1).toString()),function(){var t=dS()-1;t<=0?document.body.removeAttribute(ac):document.body.setAttribute(ac,t.toString())}},[])},AV=function(t){var e=t.noRelative,s=t.noImportant,a=t.gapMode,n=a===void 0?"margin":a;CV();var i=b.useMemo(function(){return NV(n)},[n]);return b.createElement(SV,{styles:EV(i,!e,n,s?"":"!important")})},xv=!1;if(typeof window<"u")try{var ph=Object.defineProperty({},"passive",{get:function(){return xv=!0,!0}});window.addEventListener("test",ph,ph),window.removeEventListener("test",ph,ph)}catch{xv=!1}var Ll=xv?{passive:!1}:!1,kV=function(t){return t.tagName==="TEXTAREA"},WC=function(t,e){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!kV(t)&&s[e]==="visible")},TV=function(t){return WC(t,"overflowY")},RV=function(t){return WC(t,"overflowX")},fS=function(t,e){var s=e.ownerDocument,a=e;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var n=ZC(t,a);if(n){var i=QC(t,a),c=i[1],u=i[2];if(c>u)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},MV=function(t){var e=t.scrollTop,s=t.scrollHeight,a=t.clientHeight;return[e,s,a]},PV=function(t){var e=t.scrollLeft,s=t.scrollWidth,a=t.clientWidth;return[e,s,a]},ZC=function(t,e){return t==="v"?TV(e):RV(e)},QC=function(t,e){return t==="v"?MV(e):PV(e)},DV=function(t,e){return t==="h"&&e==="rtl"?-1:1},OV=function(t,e,s,a,n){var i=DV(t,window.getComputedStyle(e).direction),c=i*a,u=s.target,f=e.contains(u),h=!1,p=c>0,g=0,x=0;do{if(!u)break;var y=QC(t,u),_=y[0],j=y[1],N=y[2],S=j-N-i*_;(_||S)&&ZC(t,u)&&(g+=S,x+=_);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!f&&u!==document.body||f&&(e.contains(u)||e===u));return(p&&Math.abs(g)<1||!p&&Math.abs(x)<1)&&(h=!0),h},gh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},hS=function(t){return[t.deltaX,t.deltaY]},mS=function(t){return t&&"current"in t?t.current:t},$V=function(t,e){return t[0]===e[0]&&t[1]===e[1]},LV=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},BV=0,Bl=[];function IV(t){var e=b.useRef([]),s=b.useRef([0,0]),a=b.useRef(),n=b.useState(BV++)[0],i=b.useState(KC)[0],c=b.useRef(t);b.useEffect(function(){c.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var j=oV([t.lockRef.current],(t.shards||[]).map(mS),!0).filter(Boolean);return j.forEach(function(N){return N.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),j.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var u=b.useCallback(function(j,N){if("touches"in j&&j.touches.length===2||j.type==="wheel"&&j.ctrlKey)return!c.current.allowPinchZoom;var S=gh(j),C=s.current,E="deltaX"in j?j.deltaX:C[0]-S[0],M="deltaY"in j?j.deltaY:C[1]-S[1],R,P=j.target,$=Math.abs(E)>Math.abs(M)?"h":"v";if("touches"in j&&$==="h"&&P.type==="range")return!1;var k=fS($,P);if(!k)return!0;if(k?R=$:(R=$==="v"?"h":"v",k=fS($,P)),!k)return!1;if(!a.current&&"changedTouches"in j&&(E||M)&&(a.current=R),!R)return!0;var O=a.current||R;return OV(O,N,j,O==="h"?E:M)},[]),f=b.useCallback(function(j){var N=j;if(!(!Bl.length||Bl[Bl.length-1]!==i)){var S="deltaY"in N?hS(N):gh(N),C=e.current.filter(function(R){return R.name===N.type&&(R.target===N.target||N.target===R.shadowParent)&&$V(R.delta,S)})[0];if(C&&C.should){N.cancelable&&N.preventDefault();return}if(!C){var E=(c.current.shards||[]).map(mS).filter(Boolean).filter(function(R){return R.contains(N.target)}),M=E.length>0?u(N,E[0]):!c.current.noIsolation;M&&N.cancelable&&N.preventDefault()}}},[]),h=b.useCallback(function(j,N,S,C){var E={name:j,delta:N,target:S,should:C,shadowParent:VV(S)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(M){return M!==E})},1)},[]),p=b.useCallback(function(j){s.current=gh(j),a.current=void 0},[]),g=b.useCallback(function(j){h(j.type,hS(j),j.target,u(j,t.lockRef.current))},[]),x=b.useCallback(function(j){h(j.type,gh(j),j.target,u(j,t.lockRef.current))},[]);b.useEffect(function(){return Bl.push(i),t.setCallbacks({onScrollCapture:g,onWheelCapture:g,onTouchMoveCapture:x}),document.addEventListener("wheel",f,Ll),document.addEventListener("touchmove",f,Ll),document.addEventListener("touchstart",p,Ll),function(){Bl=Bl.filter(function(j){return j!==i}),document.removeEventListener("wheel",f,Ll),document.removeEventListener("touchmove",f,Ll),document.removeEventListener("touchstart",p,Ll)}},[]);var y=t.removeScrollBar,_=t.inert;return b.createElement(b.Fragment,null,_?b.createElement(i,{styles:LV(n)}):null,y?b.createElement(AV,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function VV(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qV=pV(YC,IV);var Gm=b.forwardRef(function(t,e){return b.createElement(Hm,Lr({},t,{ref:e,sideCar:qV}))});Gm.classNames=Hm.classNames;var UV=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Il=new WeakMap,xh=new WeakMap,vh={},px=0,JC=function(t){return t&&(t.host||JC(t.parentNode))},zV=function(t,e){return e.map(function(s){if(t.contains(s))return s;var a=JC(s);return a&&t.contains(a)?a:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},FV=function(t,e,s,a){var n=zV(e,Array.isArray(t)?t:[t]);vh[s]||(vh[s]=new WeakMap);var i=vh[s],c=[],u=new Set,f=new Set(n),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};n.forEach(h);var p=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(x){if(u.has(x))p(x);else try{var y=x.getAttribute(a),_=y!==null&&y!=="false",j=(Il.get(x)||0)+1,N=(i.get(x)||0)+1;Il.set(x,j),i.set(x,N),c.push(x),j===1&&_&&xh.set(x,!0),N===1&&x.setAttribute(s,"true"),_||x.setAttribute(a,"true")}catch(S){console.error("aria-hidden: cannot operate on ",x,S)}})};return p(e),u.clear(),px++,function(){c.forEach(function(g){var x=Il.get(g)-1,y=i.get(g)-1;Il.set(g,x),i.set(g,y),x||(xh.has(g)||g.removeAttribute(a),xh.delete(g)),y||g.removeAttribute(s)}),px--,px||(Il=new WeakMap,Il=new WeakMap,xh=new WeakMap,vh={})}},vb=function(t,e,s){s===void 0&&(s="data-aria-hidden");var a=Array.from(Array.isArray(t)?t:[t]),n=UV(t);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),FV(a,n,s,"aria-hidden")):function(){return null}},Xm="Dialog",[eA,kW]=nr(Xm),[HV,kr]=eA(Xm),tA=t=>{const{__scopeDialog:e,children:s,open:a,defaultOpen:n,onOpenChange:i,modal:c=!0}=t,u=b.useRef(null),f=b.useRef(null),[h,p]=To({prop:a,defaultProp:n??!1,onChange:i,caller:Xm});return r.jsx(HV,{scope:e,triggerRef:u,contentRef:f,contentId:Fr(),titleId:Fr(),descriptionId:Fr(),open:h,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(g=>!g),[p]),modal:c,children:s})};tA.displayName=Xm;var sA="DialogTrigger",aA=b.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=kr(sA,s),i=wt(e,n.triggerRef);return r.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":wb(n.open),...a,ref:i,onClick:Ge(t.onClick,n.onOpenToggle)})});aA.displayName=sA;var bb="DialogPortal",[GV,rA]=eA(bb,{forceMount:void 0}),nA=t=>{const{__scopeDialog:e,forceMount:s,children:a,container:n}=t,i=kr(bb,e);return r.jsx(GV,{scope:e,forceMount:s,children:b.Children.map(a,c=>r.jsx(Ba,{present:s||i.open,children:r.jsx(Fm,{asChild:!0,container:n,children:c})}))})};nA.displayName=bb;var cm="DialogOverlay",oA=b.forwardRef((t,e)=>{const s=rA(cm,t.__scopeDialog),{forceMount:a=s.forceMount,...n}=t,i=kr(cm,t.__scopeDialog);return i.modal?r.jsx(Ba,{present:a||i.open,children:r.jsx(YV,{...n,ref:e})}):null});oA.displayName=cm;var XV=Ci("DialogOverlay.RemoveScroll"),YV=b.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=kr(cm,s);return r.jsx(Gm,{as:XV,allowPinchZoom:!0,shards:[n.contentRef],children:r.jsx(Ke.div,{"data-state":wb(n.open),...a,ref:e,style:{pointerEvents:"auto",...a.style}})})}),Ai="DialogContent",iA=b.forwardRef((t,e)=>{const s=rA(Ai,t.__scopeDialog),{forceMount:a=s.forceMount,...n}=t,i=kr(Ai,t.__scopeDialog);return r.jsx(Ba,{present:a||i.open,children:i.modal?r.jsx(KV,{...n,ref:e}):r.jsx(WV,{...n,ref:e})})});iA.displayName=Ai;var KV=b.forwardRef((t,e)=>{const s=kr(Ai,t.__scopeDialog),a=b.useRef(null),n=wt(e,s.contentRef,a);return b.useEffect(()=>{const i=a.current;if(i)return vb(i)},[]),r.jsx(lA,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(t.onCloseAutoFocus,i=>{var c;i.preventDefault(),(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Ge(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&i.preventDefault()}),onFocusOutside:Ge(t.onFocusOutside,i=>i.preventDefault())})}),WV=b.forwardRef((t,e)=>{const s=kr(Ai,t.__scopeDialog),a=b.useRef(!1),n=b.useRef(!1);return r.jsx(lA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(a.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),lA=b.forwardRef((t,e)=>{const{__scopeDialog:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,...c}=t,u=kr(Ai,s),f=b.useRef(null),h=wt(e,f);return xb(),r.jsxs(r.Fragment,{children:[r.jsx(zm,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:r.jsx(Dd,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":wb(u.open),...c,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(ZV,{titleId:u.titleId}),r.jsx(JV,{contentRef:f,descriptionId:u.descriptionId})]})]})}),yb="DialogTitle",cA=b.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=kr(yb,s);return r.jsx(Ke.h2,{id:n.titleId,...a,ref:e})});cA.displayName=yb;var uA="DialogDescription",dA=b.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=kr(uA,s);return r.jsx(Ke.p,{id:n.descriptionId,...a,ref:e})});dA.displayName=uA;var fA="DialogClose",hA=b.forwardRef((t,e)=>{const{__scopeDialog:s,...a}=t,n=kr(fA,s);return r.jsx(Ke.button,{type:"button",...a,ref:e,onClick:Ge(t.onClick,()=>n.onOpenChange(!1))})});hA.displayName=fA;function wb(t){return t?"open":"closed"}var mA="DialogTitleWarning",[TW,pA]=MI(mA,{contentName:Ai,titleName:yb,docsSlug:"dialog"}),ZV=({titleId:t})=>{const e=pA(mA),s=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},QV="DialogDescriptionWarning",JV=({contentRef:t,descriptionId:e})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pA(QV).contentName}}.`;return b.useEffect(()=>{var i;const n=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&n&&(document.getElementById(e)||console.warn(a))},[a,t,e]),null},gA=tA,eq=aA,xA=nA,Ym=oA,Km=iA,Wm=cA,vA=dA,bA=hA;const tq=gA,sq=eq,aq=xA,yA=b.forwardRef(({className:t,...e},s)=>r.jsx(Ym,{className:Ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:s}));yA.displayName=Ym.displayName;const rq=Pd("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),wA=b.forwardRef(({side:t="right",className:e,children:s,...a},n)=>r.jsxs(aq,{children:[r.jsx(yA,{}),r.jsxs(Km,{ref:n,className:Ie(rq({side:t}),e),...a,children:[s,r.jsxs(bA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Oi,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wA.displayName=Km.displayName;const _A=({className:t,...e})=>r.jsx("div",{className:Ie("flex flex-col space-y-2 text-center sm:text-left",t),...e});_A.displayName="SheetHeader";const jA=b.forwardRef(({className:t,...e},s)=>r.jsx(Wm,{ref:s,className:Ie("text-lg font-semibold text-foreground",t),...e}));jA.displayName=Wm.displayName;function nq(){const[t,e]=b.useState(()=>typeof window>"u"?"system":localStorage.getItem("theme")||"system"),[s,a]=b.useState("dark");return b.useEffect(()=>{const i=window.document.documentElement,c=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",u=f=>{const h=f==="system"?c():f;a(h),i.classList.remove("light","dark"),i.classList.add(h)};if(u(t),t==="system"){const f=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>u(t);return f.addEventListener("change",h),()=>f.removeEventListener("change",h)}},[t]),{theme:t,setTheme:i=>{e(i),localStorage.setItem("theme",i)},resolvedTheme:s}}const oq=(t,e)=>{const s=[...e?[]:[{href:"/game",icon:mb,label:"Jogar"}],{href:"/game/ranking",icon:Nr,label:"Ranking"},{href:"/game/guide",icon:c8,label:"Guia"}];switch(t){case"ADMIN":return[...s,{href:"/users",icon:lm,label:"Admin"}];default:return s}};function iq({userName:t}){const e=ab(),s=Rt(),a=e.pathname,{user:n}=zs(),{resolvedTheme:i,setTheme:c}=nq(),u=a.startsWith("/game/play/"),f=oq(n==null?void 0:n.role,u),h=p=>{s({to:p})};return r.jsxs("header",{className:"flex w-full flex-col bg-gradient-to-b from-background/90 to-background/70 border-b border-border",children:[r.jsxs("div",{className:"flex w-full items-center justify-between px-4 py-3",children:[r.jsx("button",{onClick:()=>h("/game"),className:"group",children:r.jsx("h1",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 group-hover:from-purple-500 group-hover:to-pink-700 transition-colors",children:"Tower Trials"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(RI,{}),r.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-muted-foreground",children:[r.jsx(lm,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:t})]}),r.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>c(i==="dark"?"light":"dark"),className:"text-muted-foreground hover:text-primary transition-colors",title:i==="dark"?"Modo claro":"Modo escuro",children:i==="dark"?r.jsx(YN,{className:"h-5 w-5"}):r.jsx(XN,{className:"h-5 w-5"})}),r.jsx(fe,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/profile"),children:r.jsx(lm,{className:"h-5 w-5"})}),r.jsx(fe,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors",onClick:()=>h("/logout"),children:r.jsx(XB,{className:"h-5 w-5"})}),r.jsxs(tq,{children:[r.jsx(sq,{asChild:!0,children:r.jsx(fe,{variant:"ghost",size:"icon",className:"text-muted-foreground hover:text-primary transition-colors lg:hidden",children:r.jsx(QB,{className:"h-5 w-5"})})}),r.jsxs(wA,{side:"left",className:"w-[300px] bg-background border-r border-border p-0",children:[r.jsx(_A,{className:"border-b border-border p-4",children:r.jsx(jA,{children:"Menu Principal"})}),r.jsxs("div",{className:"flex flex-col py-2",children:[f.map(p=>{const g=p.icon,x=a===p.href;return r.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-left ${x?"bg-accent text-primary":"text-muted-foreground"}`,children:[r.jsx(g,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)}),r.jsx("button",{onClick:()=>c(i==="dark"?"light":"dark"),className:"flex items-center gap-3 px-4 py-3 transition-colors hover:bg-accent text-muted-foreground text-left",children:i==="dark"?r.jsxs(r.Fragment,{children:[r.jsx(YN,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Modo Claro"})]}):r.jsxs(r.Fragment,{children:[r.jsx(XN,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Modo Escuro"})]})})]})]})]})]})]}),r.jsx("nav",{className:"hidden border-t border-border lg:block",children:r.jsx("div",{className:"flex items-center justify-center gap-1 px-2",children:f.map(p=>{const g=p.icon,x=a===p.href;return r.jsxs("button",{onClick:()=>h(p.href),className:`flex items-center gap-2 rounded-md px-4 py-3 transition-colors hover:bg-accent ${x?"text-primary":"text-muted-foreground"}`,children:[r.jsx(g,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:p.label})]},p.href)})})})]})}const lq=Yt("/_authenticated")({component:uq});function cq(){const{user:t}=zs();return r.jsxs("div",{className:"flex min-h-screen flex-col",children:[r.jsx(iq,{userName:(t==null?void 0:t.username)||"Usurio"}),r.jsx("main",{className:"flex-1",children:r.jsx(Dm,{})}),r.jsx(UC,{})]})}function uq(){return r.jsx(AI,{children:r.jsx(kI,{children:r.jsx(cq,{})})})}const dq=Yt("/")({beforeLoad:()=>{throw pP({to:"/game"})}}),fq=Yt("/_public/logout")({component:hq});function hq(){const{signOut:t,user:e}=zs(),s=Rt();return b.useEffect(()=>{(async()=>{e&&(me.info("Encerrando sesso..."),await t()),setTimeout(()=>{s({to:"/auth",search:{auth:"true"}})},1e3)})()},[t,s,e]),r.jsx("div",{className:"flex min-h-screen items-center justify-center",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(hc,{}),r.jsx("p",{className:"text-muted-foreground",children:"Encerrando sesso..."})]})})}var Od=t=>t.type==="checkbox",xi=t=>t instanceof Date,ia=t=>t==null;const NA=t=>typeof t=="object";var us=t=>!ia(t)&&!Array.isArray(t)&&NA(t)&&!xi(t),SA=t=>us(t)&&t.target?Od(t.target)?t.target.checked:t.target.value:t,mq=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,EA=(t,e)=>t.has(mq(e)),pq=t=>{const e=t.constructor&&t.constructor.prototype;return us(e)&&e.hasOwnProperty("isPrototypeOf")},_b=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vs(t){let e;const s=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(_b&&(t instanceof Blob||a))&&(s||us(t)))if(e=s?[]:{},!s&&!pq(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=Vs(t[n]));else return t;return e}var Zm=t=>Array.isArray(t)?t.filter(Boolean):[],ls=t=>t===void 0,Te=(t,e,s)=>{if(!e||!us(t))return s;const a=Zm(e.split(/[,[\].]+?/)).reduce((n,i)=>ia(n)?n:n[i],t);return ls(a)||a===t?ls(t[e])?s:t[e]:a},Ma=t=>typeof t=="boolean",jb=t=>/^\w*$/.test(t),CA=t=>Zm(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Tt=(t,e,s)=>{let a=-1;const n=jb(e)?[e]:CA(e),i=n.length,c=i-1;for(;++a<i;){const u=n[a];let f=s;if(a!==c){const h=t[u];f=us(h)||Array.isArray(h)?h:isNaN(+n[a+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=f,t=t[u]}};const um={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},AA=he.createContext(null),Qm=()=>he.useContext(AA),gq=t=>{const{children:e,...s}=t;return he.createElement(AA.Provider,{value:s},e)};var kA=(t,e,s,a=!0)=>{const n={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const c=i;return e._proxyFormState[c]!==xr.all&&(e._proxyFormState[c]=!a||xr.all),s&&(s[c]=!0),t[c]}});return n};const Nb=typeof window<"u"?b.useLayoutEffect:b.useEffect;function xq(t){const e=Qm(),{control:s=e.control,disabled:a,name:n,exact:i}=t||{},[c,u]=he.useState(s._formState),f=he.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Nb(()=>s._subscribe({name:n,formState:f.current,exact:i,callback:h=>{!a&&u({...s._formState,...h})}}),[n,a,i]),he.useEffect(()=>{f.current.isValid&&s._setValid(!0)},[s]),he.useMemo(()=>kA(c,s,f.current,!1),[c,s])}var Ir=t=>typeof t=="string",TA=(t,e,s,a,n)=>Ir(t)?(a&&e.watch.add(t),Te(s,t,n)):Array.isArray(t)?t.map(i=>(a&&e.watch.add(i),Te(s,i))):(a&&(e.watchAll=!0),s);function vq(t){const e=Qm(),{control:s=e.control,name:a,defaultValue:n,disabled:i,exact:c}=t||{},u=he.useRef(n),[f,h]=he.useState(s._getWatch(a,u.current));return Nb(()=>s._subscribe({name:a,formState:{values:!0},exact:c,callback:p=>!i&&h(TA(a,s._names,p.values||s._formValues,!1,u.current))}),[a,s,i,c]),he.useEffect(()=>s._removeUnmounted()),f}function bq(t){const e=Qm(),{name:s,disabled:a,control:n=e.control,shouldUnregister:i}=t,c=EA(n._names.array,s),u=vq({control:n,name:s,defaultValue:Te(n._formValues,s,Te(n._defaultValues,s,t.defaultValue)),exact:!0}),f=xq({control:n,name:s,exact:!0}),h=he.useRef(t),p=he.useRef(n.register(s,{...t.rules,value:u,...Ma(t.disabled)?{disabled:t.disabled}:{}})),g=he.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Te(f.errors,s)},isDirty:{enumerable:!0,get:()=>!!Te(f.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!Te(f.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!Te(f.validatingFields,s)},error:{enumerable:!0,get:()=>Te(f.errors,s)}}),[f,s]),x=he.useCallback(N=>p.current.onChange({target:{value:SA(N),name:s},type:um.CHANGE}),[s]),y=he.useCallback(()=>p.current.onBlur({target:{value:Te(n._formValues,s),name:s},type:um.BLUR}),[s,n._formValues]),_=he.useCallback(N=>{const S=Te(n._fields,s);S&&N&&(S._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:C=>N.setCustomValidity(C),reportValidity:()=>N.reportValidity()})},[n._fields,s]),j=he.useMemo(()=>({name:s,value:u,...Ma(a)||f.disabled?{disabled:f.disabled||a}:{},onChange:x,onBlur:y,ref:_}),[s,a,f.disabled,x,y,_,u]);return he.useEffect(()=>{const N=n._options.shouldUnregister||i;n.register(s,{...h.current.rules,...Ma(h.current.disabled)?{disabled:h.current.disabled}:{}});const S=(C,E)=>{const M=Te(n._fields,C);M&&M._f&&(M._f.mount=E)};if(S(s,!0),N){const C=Vs(Te(n._options.defaultValues,s));Tt(n._defaultValues,s,C),ls(Te(n._formValues,s))&&Tt(n._formValues,s,C)}return!c&&n.register(s),()=>{(c?N&&!n._state.action:N)?n.unregister(s):S(s,!1)}},[s,n,c,i]),he.useEffect(()=>{n._setDisabledField({disabled:a,name:s})},[a,s,n]),he.useMemo(()=>({field:j,formState:f,fieldState:g}),[j,f,g])}const yq=t=>t.render(bq(t));var Sb=(t,e,s,a,n)=>e?{...s[t],types:{...s[t]&&s[t].types?s[t].types:{},[a]:n||!0}}:{},od=t=>Array.isArray(t)?t:[t],pS=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}},vv=t=>ia(t)||!NA(t);function fo(t,e){if(vv(t)||vv(e))return t===e;if(xi(t)&&xi(e))return t.getTime()===e.getTime();const s=Object.keys(t),a=Object.keys(e);if(s.length!==a.length)return!1;for(const n of s){const i=t[n];if(!a.includes(n))return!1;if(n!=="ref"){const c=e[n];if(xi(i)&&xi(c)||us(i)&&us(c)||Array.isArray(i)&&Array.isArray(c)?!fo(i,c):i!==c)return!1}}return!0}var ba=t=>us(t)&&!Object.keys(t).length,Eb=t=>t.type==="file",vr=t=>typeof t=="function",dm=t=>{if(!_b)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},RA=t=>t.type==="select-multiple",Cb=t=>t.type==="radio",wq=t=>Cb(t)||Od(t),gx=t=>dm(t)&&t.isConnected;function _q(t,e){const s=e.slice(0,-1).length;let a=0;for(;a<s;)t=ls(t)?a++:t[e[a++]];return t}function jq(t){for(const e in t)if(t.hasOwnProperty(e)&&!ls(t[e]))return!1;return!0}function ws(t,e){const s=Array.isArray(e)?e:jb(e)?[e]:CA(e),a=s.length===1?t:_q(t,s),n=s.length-1,i=s[n];return a&&delete a[i],n!==0&&(us(a)&&ba(a)||Array.isArray(a)&&jq(a))&&ws(t,s.slice(0,-1)),t}var MA=t=>{for(const e in t)if(vr(t[e]))return!0;return!1};function fm(t,e={}){const s=Array.isArray(t);if(us(t)||s)for(const a in t)Array.isArray(t[a])||us(t[a])&&!MA(t[a])?(e[a]=Array.isArray(t[a])?[]:{},fm(t[a],e[a])):ia(t[a])||(e[a]=!0);return e}function PA(t,e,s){const a=Array.isArray(t);if(us(t)||a)for(const n in t)Array.isArray(t[n])||us(t[n])&&!MA(t[n])?ls(e)||vv(s[n])?s[n]=Array.isArray(t[n])?fm(t[n],[]):{...fm(t[n])}:PA(t[n],ia(e)?{}:e[n],s[n]):s[n]=!fo(t[n],e[n]);return s}var Du=(t,e)=>PA(t,e,fm(e));const gS={value:!1,isValid:!1},xS={value:!0,isValid:!0};var DA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ls(t[0].attributes.value)?ls(t[0].value)||t[0].value===""?xS:{value:t[0].value,isValid:!0}:xS:gS}return gS},OA=(t,{valueAsNumber:e,valueAsDate:s,setValueAs:a})=>ls(t)?t:e?t===""?NaN:t&&+t:s&&Ir(t)?new Date(t):a?a(t):t;const vS={isValid:!1,value:null};var $A=t=>Array.isArray(t)?t.reduce((e,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:e,vS):vS;function bS(t){const e=t.ref;return Eb(e)?e.files:Cb(e)?$A(t.refs).value:RA(e)?[...e.selectedOptions].map(({value:s})=>s):Od(e)?DA(t.refs).value:OA(ls(e.value)?t.ref.value:e.value,t)}var Nq=(t,e,s,a)=>{const n={};for(const i of t){const c=Te(e,i);c&&Tt(n,i,c._f)}return{criteriaMode:s,names:[...t],fields:n,shouldUseNativeValidation:a}},hm=t=>t instanceof RegExp,Ou=t=>ls(t)?t:hm(t)?t.source:us(t)?hm(t.value)?t.value.source:t.value:t,yS=t=>({isOnSubmit:!t||t===xr.onSubmit,isOnBlur:t===xr.onBlur,isOnChange:t===xr.onChange,isOnAll:t===xr.all,isOnTouch:t===xr.onTouched});const wS="AsyncFunction";var Sq=t=>!!t&&!!t.validate&&!!(vr(t.validate)&&t.validate.constructor.name===wS||us(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===wS)),Eq=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),_S=(t,e,s)=>!s&&(e.watchAll||e.watch.has(t)||[...e.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const id=(t,e,s,a)=>{for(const n of s||Object.keys(t)){const i=Te(t,n);if(i){const{_f:c,...u}=i;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],n)&&!a)return!0;if(c.ref&&e(c.ref,c.name)&&!a)return!0;if(id(u,e))break}else if(us(u)&&id(u,e))break}}};function jS(t,e,s){const a=Te(t,s);if(a||jb(s))return{error:a,name:s};const n=s.split(".");for(;n.length;){const i=n.join("."),c=Te(e,i),u=Te(t,i);if(c&&!Array.isArray(c)&&s!==i)return{name:s};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};n.pop()}return{name:s}}var Cq=(t,e,s,a)=>{s(t);const{name:n,...i}=t;return ba(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(c=>e[c]===(!a||xr.all))},Aq=(t,e,s)=>!t||!e||t===e||od(t).some(a=>a&&(s?a===e:a.startsWith(e)||e.startsWith(a))),kq=(t,e,s,a,n)=>n.isOnAll?!1:!s&&n.isOnTouch?!(e||t):(s?a.isOnBlur:n.isOnBlur)?!t:(s?a.isOnChange:n.isOnChange)?t:!0,Tq=(t,e)=>!Zm(Te(t,e)).length&&ws(t,e),Rq=(t,e,s)=>{const a=od(Te(t,s));return Tt(a,"root",e[s]),Tt(t,s,a),t},Oh=t=>Ir(t);function NS(t,e,s="validate"){if(Oh(t)||Array.isArray(t)&&t.every(Oh)||Ma(t)&&!t)return{type:s,message:Oh(t)?t:"",ref:e}}var Vl=t=>us(t)&&!hm(t)?t:{value:t,message:""},SS=async(t,e,s,a,n,i)=>{const{ref:c,refs:u,required:f,maxLength:h,minLength:p,min:g,max:x,pattern:y,validate:_,name:j,valueAsNumber:N,mount:S}=t._f,C=Te(s,j);if(!S||e.has(j))return{};const E=u?u[0]:c,M=I=>{n&&E.reportValidity&&(E.setCustomValidity(Ma(I)?"":I||""),E.reportValidity())},R={},P=Cb(c),$=Od(c),k=P||$,O=(N||Eb(c))&&ls(c.value)&&ls(C)||dm(c)&&c.value===""||C===""||Array.isArray(C)&&!C.length,H=Sb.bind(null,j,a,R),Y=(I,z,ee,G=bn.maxLength,A=bn.minLength)=>{const B=I?z:ee;R[j]={type:I?G:A,message:B,ref:c,...H(I?G:A,B)}};if(i?!Array.isArray(C)||!C.length:f&&(!k&&(O||ia(C))||Ma(C)&&!C||$&&!DA(u).isValid||P&&!$A(u).isValid)){const{value:I,message:z}=Oh(f)?{value:!!f,message:f}:Vl(f);if(I&&(R[j]={type:bn.required,message:z,ref:E,...H(bn.required,z)},!a))return M(z),R}if(!O&&(!ia(g)||!ia(x))){let I,z;const ee=Vl(x),G=Vl(g);if(!ia(C)&&!isNaN(C)){const A=c.valueAsNumber||C&&+C;ia(ee.value)||(I=A>ee.value),ia(G.value)||(z=A<G.value)}else{const A=c.valueAsDate||new Date(C),B=L=>new Date(new Date().toDateString()+" "+L),V=c.type=="time",W=c.type=="week";Ir(ee.value)&&C&&(I=V?B(C)>B(ee.value):W?C>ee.value:A>new Date(ee.value)),Ir(G.value)&&C&&(z=V?B(C)<B(G.value):W?C<G.value:A<new Date(G.value))}if((I||z)&&(Y(!!I,ee.message,G.message,bn.max,bn.min),!a))return M(R[j].message),R}if((h||p)&&!O&&(Ir(C)||i&&Array.isArray(C))){const I=Vl(h),z=Vl(p),ee=!ia(I.value)&&C.length>+I.value,G=!ia(z.value)&&C.length<+z.value;if((ee||G)&&(Y(ee,I.message,z.message),!a))return M(R[j].message),R}if(y&&!O&&Ir(C)){const{value:I,message:z}=Vl(y);if(hm(I)&&!C.match(I)&&(R[j]={type:bn.pattern,message:z,ref:c,...H(bn.pattern,z)},!a))return M(z),R}if(_){if(vr(_)){const I=await _(C,s),z=NS(I,E);if(z&&(R[j]={...z,...H(bn.validate,z.message)},!a))return M(z.message),R}else if(us(_)){let I={};for(const z in _){if(!ba(I)&&!a)break;const ee=NS(await _[z](C,s),E,z);ee&&(I={...ee,...H(z,ee.message)},M(ee.message),a&&(R[j]=I))}if(!ba(I)&&(R[j]={ref:E,...I},!a))return R}}return M(!0),R};const Mq={mode:xr.onSubmit,reValidateMode:xr.onChange,shouldFocusError:!0};function Pq(t={}){let e={...Mq,...t},s={submitCount:0,isDirty:!1,isReady:!1,isLoading:vr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const a={};let n=us(e.defaultValues)||us(e.values)?Vs(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Vs(n),c={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,h=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...p};const x={array:pS(),state:pS()},y=e.criteriaMode===xr.all,_=q=>X=>{clearTimeout(h),h=setTimeout(q,X)},j=async q=>{if(!e.disabled&&(p.isValid||g.isValid||q)){const X=e.resolver?ba((await $()).errors):await O(a,!0);X!==s.isValid&&x.state.next({isValid:X})}},N=(q,X)=>{!e.disabled&&(p.isValidating||p.validatingFields||g.isValidating||g.validatingFields)&&((q||Array.from(u.mount)).forEach(Z=>{Z&&(X?Tt(s.validatingFields,Z,X):ws(s.validatingFields,Z))}),x.state.next({validatingFields:s.validatingFields,isValidating:!ba(s.validatingFields)}))},S=(q,X=[],Z,je,Ce=!0,Se=!0)=>{if(je&&Z&&!e.disabled){if(c.action=!0,Se&&Array.isArray(Te(a,q))){const Re=Z(Te(a,q),je.argA,je.argB);Ce&&Tt(a,q,Re)}if(Se&&Array.isArray(Te(s.errors,q))){const Re=Z(Te(s.errors,q),je.argA,je.argB);Ce&&Tt(s.errors,q,Re),Tq(s.errors,q)}if((p.touchedFields||g.touchedFields)&&Se&&Array.isArray(Te(s.touchedFields,q))){const Re=Z(Te(s.touchedFields,q),je.argA,je.argB);Ce&&Tt(s.touchedFields,q,Re)}(p.dirtyFields||g.dirtyFields)&&(s.dirtyFields=Du(n,i)),x.state.next({name:q,isDirty:Y(q,X),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else Tt(i,q,X)},C=(q,X)=>{Tt(s.errors,q,X),x.state.next({errors:s.errors})},E=q=>{s.errors=q,x.state.next({errors:s.errors,isValid:!1})},M=(q,X,Z,je)=>{const Ce=Te(a,q);if(Ce){const Se=Te(i,q,ls(Z)?Te(n,q):Z);ls(Se)||je&&je.defaultChecked||X?Tt(i,q,X?Se:bS(Ce._f)):ee(q,Se),c.mount&&j()}},R=(q,X,Z,je,Ce)=>{let Se=!1,Re=!1;const et={name:q};if(!e.disabled){if(!Z||je){(p.isDirty||g.isDirty)&&(Re=s.isDirty,s.isDirty=et.isDirty=Y(),Se=Re!==et.isDirty);const ot=fo(Te(n,q),X);Re=!!Te(s.dirtyFields,q),ot?ws(s.dirtyFields,q):Tt(s.dirtyFields,q,!0),et.dirtyFields=s.dirtyFields,Se=Se||(p.dirtyFields||g.dirtyFields)&&Re!==!ot}if(Z){const ot=Te(s.touchedFields,q);ot||(Tt(s.touchedFields,q,Z),et.touchedFields=s.touchedFields,Se=Se||(p.touchedFields||g.touchedFields)&&ot!==Z)}Se&&Ce&&x.state.next(et)}return Se?et:{}},P=(q,X,Z,je)=>{const Ce=Te(s.errors,q),Se=(p.isValid||g.isValid)&&Ma(X)&&s.isValid!==X;if(e.delayError&&Z?(f=_(()=>C(q,Z)),f(e.delayError)):(clearTimeout(h),f=null,Z?Tt(s.errors,q,Z):ws(s.errors,q)),(Z?!fo(Ce,Z):Ce)||!ba(je)||Se){const Re={...je,...Se&&Ma(X)?{isValid:X}:{},errors:s.errors,name:q};s={...s,...Re},x.state.next(Re)}},$=async q=>{N(q,!0);const X=await e.resolver(i,e.context,Nq(q||u.mount,a,e.criteriaMode,e.shouldUseNativeValidation));return N(q),X},k=async q=>{const{errors:X}=await $(q);if(q)for(const Z of q){const je=Te(X,Z);je?Tt(s.errors,Z,je):ws(s.errors,Z)}else s.errors=X;return X},O=async(q,X,Z={valid:!0})=>{for(const je in q){const Ce=q[je];if(Ce){const{_f:Se,...Re}=Ce;if(Se){const et=u.array.has(Se.name),ot=Ce._f&&Sq(Ce._f);ot&&p.validatingFields&&N([je],!0);const _t=await SS(Ce,u.disabled,i,y,e.shouldUseNativeValidation&&!X,et);if(ot&&p.validatingFields&&N([je]),_t[Se.name]&&(Z.valid=!1,X))break;!X&&(Te(_t,Se.name)?et?Rq(s.errors,_t,Se.name):Tt(s.errors,Se.name,_t[Se.name]):ws(s.errors,Se.name))}!ba(Re)&&await O(Re,X,Z)}}return Z.valid},H=()=>{for(const q of u.unMount){const X=Te(a,q);X&&(X._f.refs?X._f.refs.every(Z=>!gx(Z)):!gx(X._f.ref))&&de(q)}u.unMount=new Set},Y=(q,X)=>!e.disabled&&(q&&X&&Tt(i,q,X),!fo(L(),n)),I=(q,X,Z)=>TA(q,u,{...c.mount?i:ls(X)?n:Ir(q)?{[q]:X}:X},Z,X),z=q=>Zm(Te(c.mount?i:n,q,e.shouldUnregister?Te(n,q,[]):[])),ee=(q,X,Z={})=>{const je=Te(a,q);let Ce=X;if(je){const Se=je._f;Se&&(!Se.disabled&&Tt(i,q,OA(X,Se)),Ce=dm(Se.ref)&&ia(X)?"":X,RA(Se.ref)?[...Se.ref.options].forEach(Re=>Re.selected=Ce.includes(Re.value)):Se.refs?Od(Se.ref)?Se.refs.forEach(Re=>{(!Re.defaultChecked||!Re.disabled)&&(Array.isArray(Ce)?Re.checked=!!Ce.find(et=>et===Re.value):Re.checked=Ce===Re.value||!!Ce)}):Se.refs.forEach(Re=>Re.checked=Re.value===Ce):Eb(Se.ref)?Se.ref.value="":(Se.ref.value=Ce,Se.ref.type||x.state.next({name:q,values:Vs(i)})))}(Z.shouldDirty||Z.shouldTouch)&&R(q,Ce,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&W(q)},G=(q,X,Z)=>{for(const je in X){if(!X.hasOwnProperty(je))return;const Ce=X[je],Se=q+"."+je,Re=Te(a,Se);(u.array.has(q)||us(Ce)||Re&&!Re._f)&&!xi(Ce)?G(Se,Ce,Z):ee(Se,Ce,Z)}},A=(q,X,Z={})=>{const je=Te(a,q),Ce=u.array.has(q),Se=Vs(X);Tt(i,q,Se),Ce?(x.array.next({name:q,values:Vs(i)}),(p.isDirty||p.dirtyFields||g.isDirty||g.dirtyFields)&&Z.shouldDirty&&x.state.next({name:q,dirtyFields:Du(n,i),isDirty:Y(q,Se)})):je&&!je._f&&!ia(Se)?G(q,Se,Z):ee(q,Se,Z),_S(q,u)&&x.state.next({...s}),x.state.next({name:c.mount?q:void 0,values:Vs(i)})},B=async q=>{c.mount=!0;const X=q.target;let Z=X.name,je=!0;const Ce=Te(a,Z),Se=ot=>{je=Number.isNaN(ot)||xi(ot)&&isNaN(ot.getTime())||fo(ot,Te(i,Z,ot))},Re=yS(e.mode),et=yS(e.reValidateMode);if(Ce){let ot,_t;const Fs=X.type?bS(Ce._f):SA(q),Hs=q.type===um.BLUR||q.type===um.FOCUS_OUT,Ia=!Eq(Ce._f)&&!e.resolver&&!Te(s.errors,Z)&&!Ce._f.deps||kq(Hs,Te(s.touchedFields,Z),s.isSubmitted,et,Re),ja=_S(Z,u,Hs);Tt(i,Z,Fs),Hs?(Ce._f.onBlur&&Ce._f.onBlur(q),f&&f(0)):Ce._f.onChange&&Ce._f.onChange(q);const Na=R(Z,Fs,Hs),aa=!ba(Na)||ja;if(!Hs&&x.state.next({name:Z,type:q.type,values:Vs(i)}),Ia)return(p.isValid||g.isValid)&&(e.mode==="onBlur"?Hs&&j():Hs||j()),aa&&x.state.next({name:Z,...ja?{}:Na});if(!Hs&&ja&&x.state.next({...s}),e.resolver){const{errors:ra}=await $([Z]);if(Se(Fs),je){const ir=jS(s.errors,a,Z),da=jS(ra,a,ir.name||Z);ot=da.error,Z=da.name,_t=ba(ra)}}else N([Z],!0),ot=(await SS(Ce,u.disabled,i,y,e.shouldUseNativeValidation))[Z],N([Z]),Se(Fs),je&&(ot?_t=!1:(p.isValid||g.isValid)&&(_t=await O(a,!0)));je&&(Ce._f.deps&&W(Ce._f.deps),P(Z,_t,ot,Na))}},V=(q,X)=>{if(Te(s.errors,X)&&q.focus)return q.focus(),1},W=async(q,X={})=>{let Z,je;const Ce=od(q);if(e.resolver){const Se=await k(ls(q)?q:Ce);Z=ba(Se),je=q?!Ce.some(Re=>Te(Se,Re)):Z}else q?(je=(await Promise.all(Ce.map(async Se=>{const Re=Te(a,Se);return await O(Re&&Re._f?{[Se]:Re}:Re)}))).every(Boolean),!(!je&&!s.isValid)&&j()):je=Z=await O(a);return x.state.next({...!Ir(q)||(p.isValid||g.isValid)&&Z!==s.isValid?{}:{name:q},...e.resolver||!q?{isValid:Z}:{},errors:s.errors}),X.shouldFocus&&!je&&id(a,V,q?Ce:u.mount),je},L=q=>{const X={...c.mount?i:n};return ls(q)?X:Ir(q)?Te(X,q):q.map(Z=>Te(X,Z))},F=(q,X)=>({invalid:!!Te((X||s).errors,q),isDirty:!!Te((X||s).dirtyFields,q),error:Te((X||s).errors,q),isValidating:!!Te(s.validatingFields,q),isTouched:!!Te((X||s).touchedFields,q)}),ie=q=>{q&&od(q).forEach(X=>ws(s.errors,X)),x.state.next({errors:q?s.errors:{}})},se=(q,X,Z)=>{const je=(Te(a,q,{_f:{}})._f||{}).ref,Ce=Te(s.errors,q)||{},{ref:Se,message:Re,type:et,...ot}=Ce;Tt(s.errors,q,{...ot,...X,ref:je}),x.state.next({name:q,errors:s.errors,isValid:!1}),Z&&Z.shouldFocus&&je&&je.focus&&je.focus()},ue=(q,X)=>vr(q)?x.state.subscribe({next:Z=>q(I(void 0,X),Z)}):I(q,X,!0),le=q=>x.state.subscribe({next:X=>{Aq(q.name,X.name,q.exact)&&Cq(X,q.formState||p,ye,q.reRenderRoot)&&q.callback({values:{...i},...s,...X})}}).unsubscribe,re=q=>(c.mount=!0,g={...g,...q.formState},le({...q,formState:g})),de=(q,X={})=>{for(const Z of q?od(q):u.mount)u.mount.delete(Z),u.array.delete(Z),X.keepValue||(ws(a,Z),ws(i,Z)),!X.keepError&&ws(s.errors,Z),!X.keepDirty&&ws(s.dirtyFields,Z),!X.keepTouched&&ws(s.touchedFields,Z),!X.keepIsValidating&&ws(s.validatingFields,Z),!e.shouldUnregister&&!X.keepDefaultValue&&ws(n,Z);x.state.next({values:Vs(i)}),x.state.next({...s,...X.keepDirty?{isDirty:Y()}:{}}),!X.keepIsValid&&j()},ce=({disabled:q,name:X})=>{(Ma(q)&&c.mount||q||u.disabled.has(X))&&(q?u.disabled.add(X):u.disabled.delete(X))},be=(q,X={})=>{let Z=Te(a,q);const je=Ma(X.disabled)||Ma(e.disabled);return Tt(a,q,{...Z||{},_f:{...Z&&Z._f?Z._f:{ref:{name:q}},name:q,mount:!0,...X}}),u.mount.add(q),Z?ce({disabled:Ma(X.disabled)?X.disabled:e.disabled,name:q}):M(q,!0,X.value),{...je?{disabled:X.disabled||e.disabled}:{},...e.progressive?{required:!!X.required,min:Ou(X.min),max:Ou(X.max),minLength:Ou(X.minLength),maxLength:Ou(X.maxLength),pattern:Ou(X.pattern)}:{},name:q,onChange:B,onBlur:B,ref:Ce=>{if(Ce){be(q,X),Z=Te(a,q);const Se=ls(Ce.value)&&Ce.querySelectorAll&&Ce.querySelectorAll("input,select,textarea")[0]||Ce,Re=wq(Se),et=Z._f.refs||[];if(Re?et.find(ot=>ot===Se):Se===Z._f.ref)return;Tt(a,q,{_f:{...Z._f,...Re?{refs:[...et.filter(gx),Se,...Array.isArray(Te(n,q))?[{}]:[]],ref:{type:Se.type,name:q}}:{ref:Se}}}),M(q,!1,void 0,Se)}else Z=Te(a,q,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||X.shouldUnregister)&&!(EA(u.array,q)&&c.action)&&u.unMount.add(q)}}},Ne=()=>e.shouldFocusError&&id(a,V,u.mount),J=q=>{Ma(q)&&(x.state.next({disabled:q}),id(a,(X,Z)=>{const je=Te(a,Z);je&&(X.disabled=je._f.disabled||q,Array.isArray(je._f.refs)&&je._f.refs.forEach(Ce=>{Ce.disabled=je._f.disabled||q}))},0,!1))},ge=(q,X)=>async Z=>{let je;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let Ce=Vs(i);if(x.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:Re}=await $();s.errors=Se,Ce=Re}else await O(a);if(u.disabled.size)for(const Se of u.disabled)Tt(Ce,Se,void 0);if(ws(s.errors,"root"),ba(s.errors)){x.state.next({errors:{}});try{await q(Ce,Z)}catch(Se){je=Se}}else X&&await X({...s.errors},Z),Ne(),setTimeout(Ne);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ba(s.errors)&&!je,submitCount:s.submitCount+1,errors:s.errors}),je)throw je},_e=(q,X={})=>{Te(a,q)&&(ls(X.defaultValue)?A(q,Vs(Te(n,q))):(A(q,X.defaultValue),Tt(n,q,Vs(X.defaultValue))),X.keepTouched||ws(s.touchedFields,q),X.keepDirty||(ws(s.dirtyFields,q),s.isDirty=X.defaultValue?Y(q,Vs(Te(n,q))):Y()),X.keepError||(ws(s.errors,q),p.isValid&&j()),x.state.next({...s}))},De=(q,X={})=>{const Z=q?Vs(q):n,je=Vs(Z),Ce=ba(q),Se=Ce?n:je;if(X.keepDefaultValues||(n=Z),!X.keepValues){if(X.keepDirtyValues){const Re=new Set([...u.mount,...Object.keys(Du(n,i))]);for(const et of Array.from(Re))Te(s.dirtyFields,et)?Tt(Se,et,Te(i,et)):A(et,Te(Se,et))}else{if(_b&&ls(q))for(const Re of u.mount){const et=Te(a,Re);if(et&&et._f){const ot=Array.isArray(et._f.refs)?et._f.refs[0]:et._f.ref;if(dm(ot)){const _t=ot.closest("form");if(_t){_t.reset();break}}}}for(const Re of u.mount)A(Re,Te(Se,Re))}i=Vs(Se),x.array.next({values:{...Se}}),x.state.next({values:{...Se}})}u={mount:X.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!p.isValid||!!X.keepIsValid||!!X.keepDirtyValues,c.watch=!!e.shouldUnregister,x.state.next({submitCount:X.keepSubmitCount?s.submitCount:0,isDirty:Ce?!1:X.keepDirty?s.isDirty:!!(X.keepDefaultValues&&!fo(q,n)),isSubmitted:X.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:Ce?{}:X.keepDirtyValues?X.keepDefaultValues&&i?Du(n,i):s.dirtyFields:X.keepDefaultValues&&q?Du(n,q):X.keepDirty?s.dirtyFields:{},touchedFields:X.keepTouched?s.touchedFields:{},errors:X.keepErrors?s.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?s.isSubmitSuccessful:!1,isSubmitting:!1})},Ve=(q,X)=>De(vr(q)?q(i):q,X),We=(q,X={})=>{const Z=Te(a,q),je=Z&&Z._f;if(je){const Ce=je.refs?je.refs[0]:je.ref;Ce.focus&&(Ce.focus(),X.shouldSelect&&vr(Ce.select)&&Ce.select())}},ye=q=>{s={...s,...q}},Ae={control:{register:be,unregister:de,getFieldState:F,handleSubmit:ge,setError:se,_subscribe:le,_runSchema:$,_focusError:Ne,_getWatch:I,_getDirty:Y,_setValid:j,_setFieldArray:S,_setDisabledField:ce,_setErrors:E,_getFieldArray:z,_reset:De,_resetDefaultValues:()=>vr(e.defaultValues)&&e.defaultValues().then(q=>{Ve(q,e.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:J,_subjects:x,_proxyFormState:p,get _fields(){return a},get _formValues(){return i},get _state(){return c},set _state(q){c=q},get _defaultValues(){return n},get _names(){return u},set _names(q){u=q},get _formState(){return s},get _options(){return e},set _options(q){e={...e,...q}}},subscribe:re,trigger:W,register:be,handleSubmit:ge,watch:ue,setValue:A,getValues:L,reset:Ve,resetField:_e,clearErrors:ie,unregister:de,setError:se,setFocus:We,getFieldState:F};return{...Ae,formControl:Ae}}function Ab(t={}){const e=he.useRef(void 0),s=he.useRef(void 0),[a,n]=he.useState({isDirty:!1,isValidating:!1,isLoading:vr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:vr(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:Pq(t),formState:a},t.formControl&&t.defaultValues&&!vr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,Nb(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(u=>({...u,isReady:!0})),i._formState.isReady=!0,c},[i]),he.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),he.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),he.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),he.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),he.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==a.isDirty&&i._subjects.state.next({isDirty:c})}},[i,a.isDirty]),he.useEffect(()=>{t.values&&!fo(t.values,s.current)?(i._reset(t.values,i._options.resetOptions),s.current=t.values,n(c=>({...c}))):i._resetDefaultValues()},[i,t.values]),he.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=kA(a,i),e.current}const ES=(t,e,s)=>{if(t&&"reportValidity"in t){const a=Te(s,e);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},bv=(t,e)=>{for(const s in e.fields){const a=e.fields[s];a&&a.ref&&"reportValidity"in a.ref?ES(a.ref,s,t):a&&a.refs&&a.refs.forEach(n=>ES(n,s,t))}},CS=(t,e)=>{e.shouldUseNativeValidation&&bv(t,e);const s={};for(const a in t){const n=Te(e.fields,a),i=Object.assign(t[a]||{},{ref:n&&n.ref});if(Dq(e.names||Object.keys(t),a)){const c=Object.assign({},Te(s,a));Tt(c,"root",i),Tt(s,a,c)}else Tt(s,a,i)}return s},Dq=(t,e)=>{const s=AS(e);return t.some(a=>AS(a).match(`^${s}\\.\\d+`))};function AS(t){return t.replace(/\]|\[/g,"")}function LA(t,e,s){function a(u,f){var h;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(h=u._zod).traits??(h.traits=new Set),u._zod.traits.add(t),e(u,f);for(const p in c.prototype)p in u||Object.defineProperty(u,p,{value:c.prototype[p].bind(u)});u._zod.constr=c,u._zod.def=f}const n=(s==null?void 0:s.Parent)??Object;class i extends n{}function c(u){var f;const h=s!=null&&s.Parent?new i:this;a(h,u),(f=h._zod).deferred??(f.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(i,"name",{value:t}),Object.defineProperty(c,"init",{value:a}),Object.defineProperty(c,Symbol.hasInstance,{value:u=>{var f,h;return!!(s!=null&&s.Parent&&u instanceof s.Parent)||((h=(f=u==null?void 0:u._zod)==null?void 0:f.traits)==null?void 0:h.has(t))}}),Object.defineProperty(c,"name",{value:t}),c}class Oq extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const $q={};function BA(t){return $q}function Lq(t,e){return typeof e=="bigint"?e.toString():e}function bh(t){return typeof t=="string"?t:t==null?void 0:t.message}function IA(t,e,s){var n,i,c,u,f,h;const a={...t,path:t.path??[]};if(!t.message){const p=bh((c=(i=(n=t.inst)==null?void 0:n._zod.def)==null?void 0:i.error)==null?void 0:c.call(i,t))??bh((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??bh((f=s.customError)==null?void 0:f.call(s,t))??bh((h=s.localeError)==null?void 0:h.call(s,t))??"Invalid input";a.message=p}return delete a.inst,delete a.continue,e!=null&&e.reportInput||delete a.input,a}const VA=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get:()=>JSON.stringify(e,Lq,2),enumerable:!0})},Bq=LA("$ZodError",VA),qA=LA("$ZodError",VA,{Parent:Error}),Iq=(t=>(e,s,a,n)=>{const i=a?Object.assign(a,{async:!1}):{async:!1},c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise)throw new Oq;if(c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>IA(f,i,BA())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(qA),Vq=(t=>async(e,s,a,n)=>{const i=a?Object.assign(a,{async:!0}):{async:!0};let c=e._zod.run({value:s,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){const u=new((n==null?void 0:n.Err)??t)(c.issues.map(f=>IA(f,i,BA())));throw Error.captureStackTrace(u,n==null?void 0:n.callee),u}return c.value})(qA);function kS(t,e){try{var s=t()}catch(a){return e(a)}return s&&s.then?s.then(void 0,e):s}function qq(t,e){for(var s={};t.length;){var a=t[0],n=a.code,i=a.message,c=a.path.join(".");if(!s[c])if("unionErrors"in a){var u=a.unionErrors[0].errors[0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(p){return p.errors.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[a.code];s[c]=Sb(c,e,s,n,h?[].concat(h,a.message):a.message)}t.shift()}return s}function Uq(t,e){for(var s={};t.length;){var a=t[0],n=a.code,i=a.message,c=a.path.join(".");if(!s[c])if(a.code==="invalid_union"){var u=a.errors[0][0];s[c]={message:u.message,type:u.code}}else s[c]={message:i,type:n};if(a.code==="invalid_union"&&a.errors.forEach(function(p){return p.forEach(function(g){return t.push(g)})}),e){var f=s[c].types,h=f&&f[a.code];s[c]=Sb(c,e,s,n,h?[].concat(h,a.message):a.message)}t.shift()}return s}function kb(t,e,s){if(s===void 0&&(s={}),function(a){return"_def"in a&&typeof a._def=="object"&&"typeName"in a._def}(t))return function(a,n,i){try{return Promise.resolve(kS(function(){return Promise.resolve(t[s.mode==="sync"?"parse":"parseAsync"](a,e)).then(function(c){return i.shouldUseNativeValidation&&bv({},i),{errors:{},values:s.raw?Object.assign({},a):c}})},function(c){if(function(u){return Array.isArray(u==null?void 0:u.issues)}(c))return{values:{},errors:CS(qq(c.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};if(function(a){return"_zod"in a&&typeof a._zod=="object"}(t))return function(a,n,i){try{return Promise.resolve(kS(function(){return Promise.resolve((s.mode==="sync"?Iq:Vq)(t,a,e)).then(function(c){return i.shouldUseNativeValidation&&bv({},i),{errors:{},values:s.raw?Object.assign({},a):c}})},function(c){if(function(u){return u instanceof Bq}(c))return{values:{},errors:CS(Uq(c.issues,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}};throw new Error("Invalid input: not a Zod schema")}const Ms=b.forwardRef(({className:t,type:e,...s},a)=>r.jsx("input",{type:e,className:Ie("flex h-9 w-full rounded-md border border-neutral-200 bg-white px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-neutral-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-neutral-800 dark:bg-neutral-950 dark:placeholder:text-neutral-400 dark:focus-visible:ring-neutral-300",t),ref:a,...s}));Ms.displayName="Input";var zq="Label",UA=b.forwardRef((t,e)=>r.jsx(Ke.label,{...t,ref:e,onMouseDown:s=>{var n;s.target.closest("button, input, select, textarea")||((n=t.onMouseDown)==null||n.call(t,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));UA.displayName=zq;var zA=UA;const Fq=Pd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),FA=b.forwardRef(({className:t,...e},s)=>r.jsx(zA,{ref:s,className:Ie(Fq(),t),...e}));FA.displayName=zA.displayName;const Tb=gq,HA=b.createContext({}),Br=({...t})=>r.jsx(HA.Provider,{value:{name:t.name},children:r.jsx(yq,{...t})}),Jm=()=>{const t=b.useContext(HA),e=b.useContext(GA),{getFieldState:s,formState:a}=Qm(),n=s(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},GA=b.createContext({}),br=b.forwardRef(({className:t,...e},s)=>{const a=b.useId();return r.jsx(GA.Provider,{value:{id:a},children:r.jsx("div",{ref:s,className:Ie("space-y-2",t),...e})})});br.displayName="FormItem";const yr=b.forwardRef(({className:t,...e},s)=>{const{error:a,formItemId:n}=Jm();return r.jsx(FA,{ref:s,className:Ie(a&&"text-destructive",t),htmlFor:n,...e})});yr.displayName="FormLabel";const wr=b.forwardRef(({...t},e)=>{const{error:s,formItemId:a,formDescriptionId:n,formMessageId:i}=Jm();return r.jsx(EC,{ref:e,id:a,"aria-describedby":s?`${n} ${i}`:`${n}`,"aria-invalid":!!s,...t})});wr.displayName="FormControl";const Hq=b.forwardRef(({className:t,...e},s)=>{const{formDescriptionId:a}=Jm();return r.jsx("p",{ref:s,id:a,className:Ie("text-[0.8rem] text-muted-foreground",t),...e})});Hq.displayName="FormDescription";const _r=b.forwardRef(({className:t,children:e,...s},a)=>{const{error:n,formMessageId:i}=Jm(),c=n?String((n==null?void 0:n.message)??""):e;return c?r.jsx("p",{ref:a,id:i,className:Ie("text-[0.8rem] font-medium text-destructive",t),...s,children:c}):null});_r.displayName="FormMessage";function Gq({onSubmit:t,isLoading:e}){const s=Ab({resolver:kb(AL),defaultValues:{email:"",password:""}});return r.jsx(Tb,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[r.jsx(Br,{control:s.control,name:"email",render:({field:a})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Email"}),r.jsx(wr,{children:r.jsx(Ms,{type:"email",placeholder:"seu@email.com",...a})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:s.control,name:"password",render:({field:a})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Senha"}),r.jsx(wr,{children:r.jsx(Ms,{type:"password",placeholder:"",...a})}),r.jsx(_r,{})]})}),r.jsx(fe,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Entrar"})]})})}function Xq({onSubmit:t,isLoading:e}){const s=Ab({resolver:kb(kL),defaultValues:{email:"",password:"",confirmPassword:""}});return r.jsx(Tb,{...s,children:r.jsxs("form",{onSubmit:s.handleSubmit(t),className:"space-y-4",children:[r.jsx(Br,{control:s.control,name:"email",render:({field:a})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Email"}),r.jsx(wr,{children:r.jsx(Ms,{type:"email",placeholder:"seu@email.com",...a})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:s.control,name:"password",render:({field:a})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Senha"}),r.jsx(wr,{children:r.jsx(Ms,{type:"password",placeholder:"",...a})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:s.control,name:"confirmPassword",render:({field:a})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Confirmar Senha"}),r.jsx(wr,{children:r.jsx(Ms,{type:"password",placeholder:"",...a})}),r.jsx(_r,{})]})}),r.jsx(fe,{type:"submit",className:"w-full",disabled:e,children:e?"Processando...":"Criar Conta"})]})})}const Rb=b.createContext({});function Mb(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pb=typeof window<"u",XA=Pb?b.useLayoutEffect:b.useEffect,ep=b.createContext(null);function Db(t,e){t.indexOf(e)===-1&&t.push(e)}function Ob(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}const Cn=(t,e,s)=>s>e?e:s<t?t:s;let $b=()=>{};const An={},YA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function KA(t){return typeof t=="object"&&t!==null}const WA=t=>/^0[^.\s]+$/u.test(t);function Lb(t){let e;return()=>(e===void 0&&(e=t()),e)}const ar=t=>t,Yq=(t,e)=>s=>e(t(s)),$d=(...t)=>t.reduce(Yq),wd=(t,e,s)=>{const a=e-t;return a===0?1:(s-t)/a};class Bb{constructor(){this.subscriptions=[]}add(e){return Db(this.subscriptions,e),()=>Ob(this.subscriptions,e)}notify(e,s,a){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](e,s,a);else for(let i=0;i<n;i++){const c=this.subscriptions[i];c&&c(e,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hr=t=>t*1e3,Gr=t=>t/1e3;function ZA(t,e){return e?t*(1e3/e):0}const QA=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,Kq=1e-7,Wq=12;function Zq(t,e,s,a,n){let i,c,u=0;do c=e+(s-e)/2,i=QA(c,a,n)-t,i>0?s=c:e=c;while(Math.abs(i)>Kq&&++u<Wq);return c}function Ld(t,e,s,a){if(t===e&&s===a)return ar;const n=i=>Zq(i,0,1,t,s);return i=>i===0||i===1?i:QA(n(i),e,a)}const JA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ek=t=>e=>1-t(1-e),tk=Ld(.33,1.53,.69,.99),Ib=ek(tk),sk=JA(Ib),ak=t=>(t*=2)<1?.5*Ib(t):.5*(2-Math.pow(2,-10*(t-1))),Vb=t=>1-Math.sin(Math.acos(t)),rk=ek(Vb),nk=JA(Vb),Qq=Ld(.42,0,1,1),Jq=Ld(0,0,.58,1),ok=Ld(.42,0,.58,1),eU=t=>Array.isArray(t)&&typeof t[0]!="number",ik=t=>Array.isArray(t)&&typeof t[0]=="number",tU={linear:ar,easeIn:Qq,easeInOut:ok,easeOut:Jq,circIn:Vb,circInOut:nk,circOut:rk,backIn:Ib,backInOut:sk,backOut:tk,anticipate:ak},sU=t=>typeof t=="string",TS=t=>{if(ik(t)){$b(t.length===4);const[e,s,a,n]=t;return Ld(e,s,a,n)}else if(sU(t))return tU[t];return t},yh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],RS={value:null};function aU(t,e){let s=new Set,a=new Set,n=!1,i=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},f=0;function h(g){c.has(g)&&(p.schedule(g),t()),f++,g(u)}const p={schedule:(g,x=!1,y=!1)=>{const j=y&&n?s:a;return x&&c.add(g),j.has(g)||j.add(g),g},cancel:g=>{a.delete(g),c.delete(g)},process:g=>{if(u=g,n){i=!0;return}n=!0,[s,a]=[a,s],s.forEach(h),e&&RS.value&&RS.value.frameloop[e].push(f),f=0,s.clear(),n=!1,i&&(i=!1,p.process(g))}};return p}const rU=40;function lk(t,e){let s=!1,a=!0;const n={delta:0,timestamp:0,isProcessing:!1},i=()=>s=!0,c=yh.reduce((E,M)=>(E[M]=aU(i,e?M:void 0),E),{}),{setup:u,read:f,resolveKeyframes:h,preUpdate:p,update:g,preRender:x,render:y,postRender:_}=c,j=()=>{const E=An.useManualTiming?n.timestamp:performance.now();s=!1,An.useManualTiming||(n.delta=a?1e3/60:Math.max(Math.min(E-n.timestamp,rU),1)),n.timestamp=E,n.isProcessing=!0,u.process(n),f.process(n),h.process(n),p.process(n),g.process(n),x.process(n),y.process(n),_.process(n),n.isProcessing=!1,s&&e&&(a=!1,t(j))},N=()=>{s=!0,a=!0,n.isProcessing||t(j)};return{schedule:yh.reduce((E,M)=>{const R=c[M];return E[M]=(P,$=!1,k=!1)=>(s||N(),R.schedule(P,$,k)),E},{}),cancel:E=>{for(let M=0;M<yh.length;M++)c[yh[M]].cancel(E)},state:n,steps:c}}const{schedule:Zt,cancel:Ro,state:qs,steps:xx}=lk(typeof requestAnimationFrame<"u"?requestAnimationFrame:ar,!0);let $h;function nU(){$h=void 0}const _a={now:()=>($h===void 0&&_a.set(qs.isProcessing||An.useManualTiming?qs.timestamp:performance.now()),$h),set:t=>{$h=t,queueMicrotask(nU)}},ck=t=>e=>typeof e=="string"&&e.startsWith(t),qb=ck("--"),oU=ck("var(--"),Ub=t=>oU(t)?iU.test(t.split("/*")[0].trim()):!1,iU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},_d={...Sc,transform:t=>Cn(0,1,t)},wh={...Sc,default:1},ld=t=>Math.round(t*1e5)/1e5,zb=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lU(t){return t==null}const cU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fb=(t,e)=>s=>!!(typeof s=="string"&&cU.test(s)&&s.startsWith(t)||e&&!lU(s)&&Object.prototype.hasOwnProperty.call(s,e)),uk=(t,e,s)=>a=>{if(typeof a!="string")return a;const[n,i,c,u]=a.match(zb);return{[t]:parseFloat(n),[e]:parseFloat(i),[s]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},uU=t=>Cn(0,255,t),vx={...Sc,transform:t=>Math.round(uU(t))},vi={test:Fb("rgb","red"),parse:uk("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:a=1})=>"rgba("+vx.transform(t)+", "+vx.transform(e)+", "+vx.transform(s)+", "+ld(_d.transform(a))+")"};function dU(t){let e="",s="",a="",n="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),a=t.substring(5,7),n=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),a=t.substring(3,4),n=t.substring(4,5),e+=e,s+=s,a+=a,n+=n),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:n?parseInt(n,16)/255:1}}const yv={test:Fb("#"),parse:dU,transform:vi.transform},Bd=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),oo=Bd("deg"),Xr=Bd("%"),Je=Bd("px"),fU=Bd("vh"),hU=Bd("vw"),MS={...Xr,parse:t=>Xr.parse(t)/100,transform:t=>Xr.transform(t*100)},Gl={test:Fb("hsl","hue"),parse:uk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:a=1})=>"hsla("+Math.round(t)+", "+Xr.transform(ld(e))+", "+Xr.transform(ld(s))+", "+ld(_d.transform(a))+")"},Ks={test:t=>vi.test(t)||yv.test(t)||Gl.test(t),parse:t=>vi.test(t)?vi.parse(t):Gl.test(t)?Gl.parse(t):yv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?vi.transform(t):Gl.transform(t)},mU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pU(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(zb))==null?void 0:e.length)||0)+(((s=t.match(mU))==null?void 0:s.length)||0)>0}const dk="number",fk="color",gU="var",xU="var(",PS="${}",vU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function jd(t){const e=t.toString(),s=[],a={color:[],number:[],var:[]},n=[];let i=0;const u=e.replace(vU,f=>(Ks.test(f)?(a.color.push(i),n.push(fk),s.push(Ks.parse(f))):f.startsWith(xU)?(a.var.push(i),n.push(gU),s.push(f)):(a.number.push(i),n.push(dk),s.push(parseFloat(f))),++i,PS)).split(PS);return{values:s,split:u,indexes:a,types:n}}function hk(t){return jd(t).values}function mk(t){const{split:e,types:s}=jd(t),a=e.length;return n=>{let i="";for(let c=0;c<a;c++)if(i+=e[c],n[c]!==void 0){const u=s[c];u===dk?i+=ld(n[c]):u===fk?i+=Ks.transform(n[c]):i+=n[c]}return i}}const bU=t=>typeof t=="number"?0:t;function yU(t){const e=hk(t);return mk(t)(e.map(bU))}const Mo={test:pU,parse:hk,createTransformer:mk,getAnimatableNone:yU};function bx(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function wU({hue:t,saturation:e,lightness:s,alpha:a}){t/=360,e/=100,s/=100;let n=0,i=0,c=0;if(!e)n=i=c=s;else{const u=s<.5?s*(1+e):s+e-s*e,f=2*s-u;n=bx(f,u,t+1/3),i=bx(f,u,t),c=bx(f,u,t-1/3)}return{red:Math.round(n*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:a}}function mm(t,e){return s=>s>0?e:t}const Wt=(t,e,s)=>t+(e-t)*s,yx=(t,e,s)=>{const a=t*t,n=s*(e*e-a)+a;return n<0?0:Math.sqrt(n)},_U=[yv,vi,Gl],jU=t=>_U.find(e=>e.test(t));function DS(t){const e=jU(t);if(!e)return!1;let s=e.parse(t);return e===Gl&&(s=wU(s)),s}const OS=(t,e)=>{const s=DS(t),a=DS(e);if(!s||!a)return mm(t,e);const n={...s};return i=>(n.red=yx(s.red,a.red,i),n.green=yx(s.green,a.green,i),n.blue=yx(s.blue,a.blue,i),n.alpha=Wt(s.alpha,a.alpha,i),vi.transform(n))},wv=new Set(["none","hidden"]);function NU(t,e){return wv.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function SU(t,e){return s=>Wt(t,e,s)}function Hb(t){return typeof t=="number"?SU:typeof t=="string"?Ub(t)?mm:Ks.test(t)?OS:AU:Array.isArray(t)?pk:typeof t=="object"?Ks.test(t)?OS:EU:mm}function pk(t,e){const s=[...t],a=s.length,n=t.map((i,c)=>Hb(i)(i,e[c]));return i=>{for(let c=0;c<a;c++)s[c]=n[c](i);return s}}function EU(t,e){const s={...t,...e},a={};for(const n in s)t[n]!==void 0&&e[n]!==void 0&&(a[n]=Hb(t[n])(t[n],e[n]));return n=>{for(const i in a)s[i]=a[i](n);return s}}function CU(t,e){const s=[],a={color:0,var:0,number:0};for(let n=0;n<e.values.length;n++){const i=e.types[n],c=t.indexes[i][a[i]],u=t.values[c]??0;s[n]=u,a[i]++}return s}const AU=(t,e)=>{const s=Mo.createTransformer(e),a=jd(t),n=jd(e);return a.indexes.var.length===n.indexes.var.length&&a.indexes.color.length===n.indexes.color.length&&a.indexes.number.length>=n.indexes.number.length?wv.has(t)&&!n.values.length||wv.has(e)&&!a.values.length?NU(t,e):$d(pk(CU(a,n),n.values),s):mm(t,e)};function gk(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?Wt(t,e,s):Hb(t)(t,e)}const kU=t=>{const e=({timestamp:s})=>t(s);return{start:(s=!0)=>Zt.update(e,s),stop:()=>Ro(e),now:()=>qs.isProcessing?qs.timestamp:_a.now()}},xk=(t,e,s=10)=>{let a="";const n=Math.max(Math.round(e/s),2);for(let i=0;i<n;i++)a+=t(i/(n-1))+", ";return`linear(${a.substring(0,a.length-2)})`},pm=2e4;function Gb(t){let e=0;const s=50;let a=t.next(e);for(;!a.done&&e<pm;)e+=s,a=t.next(e);return e>=pm?1/0:e}function TU(t,e=100,s){const a=s({...t,keyframes:[0,e]}),n=Math.min(Gb(a),pm);return{type:"keyframes",ease:i=>a.next(n*i).value/e,duration:Gr(n)}}const RU=5;function vk(t,e,s){const a=Math.max(e-RU,0);return ZA(s-t(a),e-a)}const es={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wx=.001;function MU({duration:t=es.duration,bounce:e=es.bounce,velocity:s=es.velocity,mass:a=es.mass}){let n,i,c=1-e;c=Cn(es.minDamping,es.maxDamping,c),t=Cn(es.minDuration,es.maxDuration,Gr(t)),c<1?(n=h=>{const p=h*c,g=p*t,x=p-s,y=_v(h,c),_=Math.exp(-g);return wx-x/y*_},i=h=>{const g=h*c*t,x=g*s+s,y=Math.pow(c,2)*Math.pow(h,2)*t,_=Math.exp(-g),j=_v(Math.pow(h,2),c);return(-n(h)+wx>0?-1:1)*((x-y)*_)/j}):(n=h=>{const p=Math.exp(-h*t),g=(h-s)*t+1;return-wx+p*g},i=h=>{const p=Math.exp(-h*t),g=(s-h)*(t*t);return p*g});const u=5/t,f=DU(n,i,u);if(t=Hr(t),isNaN(f))return{stiffness:es.stiffness,damping:es.damping,duration:t};{const h=Math.pow(f,2)*a;return{stiffness:h,damping:c*2*Math.sqrt(a*h),duration:t}}}const PU=12;function DU(t,e,s){let a=s;for(let n=1;n<PU;n++)a=a-t(a)/e(a);return a}function _v(t,e){return t*Math.sqrt(1-e*e)}const OU=["duration","bounce"],$U=["stiffness","damping","mass"];function $S(t,e){return e.some(s=>t[s]!==void 0)}function LU(t){let e={velocity:es.velocity,stiffness:es.stiffness,damping:es.damping,mass:es.mass,isResolvedFromDuration:!1,...t};if(!$S(t,$U)&&$S(t,OU))if(t.visualDuration){const s=t.visualDuration,a=2*Math.PI/(s*1.2),n=a*a,i=2*Cn(.05,1,1-(t.bounce||0))*Math.sqrt(n);e={...e,mass:es.mass,stiffness:n,damping:i}}else{const s=MU(t);e={...e,...s,mass:es.mass},e.isResolvedFromDuration=!0}return e}function gm(t=es.visualDuration,e=es.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:a,restDelta:n}=s;const i=s.keyframes[0],c=s.keyframes[s.keyframes.length-1],u={done:!1,value:i},{stiffness:f,damping:h,mass:p,duration:g,velocity:x,isResolvedFromDuration:y}=LU({...s,velocity:-Gr(s.velocity||0)}),_=x||0,j=h/(2*Math.sqrt(f*p)),N=c-i,S=Gr(Math.sqrt(f/p)),C=Math.abs(N)<5;a||(a=C?es.restSpeed.granular:es.restSpeed.default),n||(n=C?es.restDelta.granular:es.restDelta.default);let E;if(j<1){const R=_v(S,j);E=P=>{const $=Math.exp(-j*S*P);return c-$*((_+j*S*N)/R*Math.sin(R*P)+N*Math.cos(R*P))}}else if(j===1)E=R=>c-Math.exp(-S*R)*(N+(_+S*N)*R);else{const R=S*Math.sqrt(j*j-1);E=P=>{const $=Math.exp(-j*S*P),k=Math.min(R*P,300);return c-$*((_+j*S*N)*Math.sinh(k)+R*N*Math.cosh(k))/R}}const M={calculatedDuration:y&&g||null,next:R=>{const P=E(R);if(y)u.done=R>=g;else{let $=R===0?_:0;j<1&&($=R===0?Hr(_):vk(E,R,P));const k=Math.abs($)<=a,O=Math.abs(c-P)<=n;u.done=k&&O}return u.value=u.done?c:P,u},toString:()=>{const R=Math.min(Gb(M),pm),P=xk($=>M.next(R*$).value,R,30);return R+"ms "+P},toTransition:()=>{}};return M}gm.applyToOptions=t=>{const e=TU(t,100,gm);return t.ease=e.ease,t.duration=Hr(e.duration),t.type="keyframes",t};function jv({keyframes:t,velocity:e=0,power:s=.8,timeConstant:a=325,bounceDamping:n=10,bounceStiffness:i=500,modifyTarget:c,min:u,max:f,restDelta:h=.5,restSpeed:p}){const g=t[0],x={done:!1,value:g},y=k=>u!==void 0&&k<u||f!==void 0&&k>f,_=k=>u===void 0?f:f===void 0||Math.abs(u-k)<Math.abs(f-k)?u:f;let j=s*e;const N=g+j,S=c===void 0?N:c(N);S!==N&&(j=S-g);const C=k=>-j*Math.exp(-k/a),E=k=>S+C(k),M=k=>{const O=C(k),H=E(k);x.done=Math.abs(O)<=h,x.value=x.done?S:H};let R,P;const $=k=>{y(x.value)&&(R=k,P=gm({keyframes:[x.value,_(x.value)],velocity:vk(E,k,x.value),damping:n,stiffness:i,restDelta:h,restSpeed:p}))};return $(0),{calculatedDuration:null,next:k=>{let O=!1;return!P&&R===void 0&&(O=!0,M(k),$(k)),R!==void 0&&k>=R?P.next(k-R):(!O&&M(k),x)}}}function BU(t,e,s){const a=[],n=s||An.mix||gk,i=t.length-1;for(let c=0;c<i;c++){let u=n(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||ar:e;u=$d(f,u)}a.push(u)}return a}function IU(t,e,{clamp:s=!0,ease:a,mixer:n}={}){const i=t.length;if($b(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=BU(e,a,n),f=u.length,h=p=>{if(c&&p<t[0])return e[0];let g=0;if(f>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const x=wd(t[g],t[g+1],p);return u[g](x)};return s?p=>h(Cn(t[0],t[i-1],p)):h}function VU(t,e){const s=t[t.length-1];for(let a=1;a<=e;a++){const n=wd(0,e,a);t.push(Wt(s,1,n))}}function qU(t){const e=[0];return VU(e,t.length-1),e}function UU(t,e){return t.map(s=>s*e)}function zU(t,e){return t.map(()=>e||ok).splice(0,t.length-1)}function cd({duration:t=300,keyframes:e,times:s,ease:a="easeInOut"}){const n=eU(a)?a.map(TS):TS(a),i={done:!1,value:e[0]},c=UU(s&&s.length===e.length?s:qU(e),t),u=IU(c,e,{ease:Array.isArray(n)?n:zU(e,n)});return{calculatedDuration:t,next:f=>(i.value=u(f),i.done=f>=t,i)}}const FU=t=>t!==null;function Xb(t,{repeat:e,repeatType:s="loop"},a,n=1){const i=t.filter(FU),u=n<0||e&&s!=="loop"&&e%2===1?0:i.length-1;return!u||a===void 0?i[u]:a}const HU={decay:jv,inertia:jv,tween:cd,keyframes:cd,spring:gm};function bk(t){typeof t.type=="string"&&(t.type=HU[t.type])}class Yb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const GU=t=>t/100;class Kb extends Yb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var a,n;const{motionValue:s}=this.options;s&&s.updatedAt!==_a.now()&&this.tick(_a.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(n=(a=this.options).onStop)==null||n.call(a))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bk(e);const{type:s=cd,repeat:a=0,repeatDelay:n=0,repeatType:i,velocity:c=0}=e;let{keyframes:u}=e;const f=s||cd;f!==cd&&typeof u[0]!="number"&&(this.mixKeyframes=$d(GU,gk(u[0],u[1])),u=[0,100]);const h=f({...e,keyframes:u});i==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-c})),h.calculatedDuration===null&&(h.calculatedDuration=Gb(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+n,this.totalDuration=this.resolvedDuration*(a+1)-n,this.generator=h}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:a,totalDuration:n,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return a.next(0);const{delay:h=0,keyframes:p,repeat:g,repeatType:x,repeatDelay:y,type:_,onUpdate:j,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const S=this.currentTime-h*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?S<0:S>n;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=n);let E=this.currentTime,M=a;if(g){const k=Math.min(this.currentTime,n)/u;let O=Math.floor(k),H=k%1;!H&&k>=1&&(H=1),H===1&&O--,O=Math.min(O,g+1),!!(O%2)&&(x==="reverse"?(H=1-H,y&&(H-=y/u)):x==="mirror"&&(M=c)),E=Cn(0,1,H)*u}const R=C?{done:!1,value:p[0]}:M.next(E);i&&(R.value=i(R.value));let{done:P}=R;!C&&f!==null&&(P=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return $&&_!==jv&&(R.value=Xb(p,this.options,N,this.speed)),j&&j(R.value),$&&this.finish(),R}then(e,s){return this.finished.then(e,s)}get duration(){return Gr(this.calculatedDuration)}get time(){return Gr(this.currentTime)}set time(e){var s;e=Hr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(s=this.driver)==null||s.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_a.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Gr(this.currentTime))}play(){var n,i;if(this.isStopped)return;const{driver:e=kU,startTime:s}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(i=(n=this.options).onPlay)==null||i.call(n);const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=s??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_a.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,s;this.notifyFinished(),this.teardown(),this.state="finished",(s=(e=this.options).onComplete)==null||s.call(e)}cancel(){var e,s;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(s=(e=this.options).onCancel)==null||s.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var s;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(s=this.driver)==null||s.stop(),e.observe(this)}}function XU(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const bi=t=>t*180/Math.PI,Nv=t=>{const e=bi(Math.atan2(t[1],t[0]));return Sv(e)},YU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Nv,rotateZ:Nv,skewX:t=>bi(Math.atan(t[1])),skewY:t=>bi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sv=t=>(t=t%360,t<0&&(t+=360),t),LS=Nv,BS=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),IS=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),KU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BS,scaleY:IS,scale:t=>(BS(t)+IS(t))/2,rotateX:t=>Sv(bi(Math.atan2(t[6],t[5]))),rotateY:t=>Sv(bi(Math.atan2(-t[2],t[0]))),rotateZ:LS,rotate:LS,skewX:t=>bi(Math.atan(t[4])),skewY:t=>bi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ev(t){return t.includes("scale")?1:0}function Cv(t,e){if(!t||t==="none")return Ev(e);const s=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let a,n;if(s)a=KU,n=s;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);a=YU,n=u}if(!n)return Ev(e);const i=a[e],c=n[1].split(",").map(ZU);return typeof i=="function"?i(c):c[i]}const WU=(t,e)=>{const{transform:s="none"}=getComputedStyle(t);return Cv(s,e)};function ZU(t){return parseFloat(t.trim())}const Ec=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cc=new Set(Ec),VS=t=>t===Sc||t===Je,QU=new Set(["x","y","z"]),JU=Ec.filter(t=>!QU.has(t));function e9(t){const e=[];return JU.forEach(s=>{const a=t.getValue(s);a!==void 0&&(e.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),e}const ji={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cv(e,"x"),y:(t,{transform:e})=>Cv(e,"y")};ji.translateX=ji.x;ji.translateY=ji.y;const Ni=new Set;let Av=!1,kv=!1,Tv=!1;function yk(){if(kv){const t=Array.from(Ni).filter(a=>a.needsMeasurement),e=new Set(t.map(a=>a.element)),s=new Map;e.forEach(a=>{const n=e9(a);n.length&&(s.set(a,n),a.render())}),t.forEach(a=>a.measureInitialState()),e.forEach(a=>{a.render();const n=s.get(a);n&&n.forEach(([i,c])=>{var u;(u=a.getValue(i))==null||u.set(c)})}),t.forEach(a=>a.measureEndState()),t.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}kv=!1,Av=!1,Ni.forEach(t=>t.complete(Tv)),Ni.clear()}function wk(){Ni.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(kv=!0)})}function t9(){Tv=!0,wk(),yk(),Tv=!1}class Wb{constructor(e,s,a,n,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=a,this.motionValue=n,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ni.add(this),Av||(Av=!0,Zt.read(wk),Zt.resolveKeyframes(yk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:a,motionValue:n}=this;if(e[0]===null){const i=n==null?void 0:n.get(),c=e[e.length-1];if(i!==void 0)e[0]=i;else if(a&&s){const u=a.readValue(s,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),n&&i===void 0&&n.set(e[0])}XU(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ni.delete(this)}cancel(){this.state==="scheduled"&&(Ni.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const s9=t=>t.startsWith("--");function a9(t,e,s){s9(e)?t.style.setProperty(e,s):t.style[e]=s}const r9=Lb(()=>window.ScrollTimeline!==void 0),n9={};function o9(t,e){const s=Lb(t);return()=>n9[e]??s()}const _k=o9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ku=([t,e,s,a])=>`cubic-bezier(${t}, ${e}, ${s}, ${a})`,qS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ku([0,.65,.55,1]),circOut:Ku([.55,0,1,.45]),backIn:Ku([.31,.01,.66,-.59]),backOut:Ku([.33,1.53,.69,.99])};function jk(t,e){if(t)return typeof t=="function"?_k()?xk(t,e):"ease-out":ik(t)?Ku(t):Array.isArray(t)?t.map(s=>jk(s,e)||qS.easeOut):qS[t]}function i9(t,e,s,{delay:a=0,duration:n=300,repeat:i=0,repeatType:c="loop",ease:u="easeOut",times:f}={},h=void 0){const p={[e]:s};f&&(p.offset=f);const g=jk(u,n);Array.isArray(g)&&(p.easing=g);const x={delay:a,duration:n,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(p,x)}function Nk(t){return typeof t=="function"&&"applyToOptions"in t}function l9({type:t,...e}){return Nk(t)&&_k()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class c9 extends Yb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:a,keyframes:n,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=e,$b(typeof e.type!="string");const h=l9(e);this.animation=i9(s,a,n,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=Xb(n,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):a9(s,a,p),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,s;(s=(e=this.animation).finish)==null||s.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,s;this.isPseudoElement||(s=(e=this.animation).commitStyles)==null||s.call(e)}get duration(){var s,a;const e=((a=(s=this.animation.effect)==null?void 0:s.getComputedTiming)==null?void 0:a.call(s).duration)||0;return Gr(Number(e))}get time(){return Gr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Hr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){var a;return this.allowFlatten&&((a=this.animation.effect)==null||a.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&r9()?(this.animation.timeline=e,ar):s(this)}}const Sk={anticipate:ak,backInOut:sk,circInOut:nk};function u9(t){return t in Sk}function d9(t){typeof t.ease=="string"&&u9(t.ease)&&(t.ease=Sk[t.ease])}const US=10;class f9 extends c9{constructor(e){d9(e),bk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:a,onComplete:n,element:i,...c}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const u=new Kb({...c,autoplay:!1}),f=Hr(this.finishedTime??this.time);s.setWithVelocity(u.sample(f-US).value,u.sample(f).value,US),u.stop()}}const zS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Mo.test(t)||t==="0")&&!t.startsWith("url("));function h9(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function m9(t,e,s,a){const n=t[0];if(n===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],c=zS(n,e),u=zS(i,e);return!c||!u?!1:h9(t)||(s==="spring"||Nk(s))&&a}function Zb(t){return KA(t)&&"offsetHeight"in t}const p9=new Set(["opacity","clipPath","filter","transform"]),g9=Lb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function x9(t){var h;const{motionValue:e,name:s,repeatDelay:a,repeatType:n,damping:i,type:c}=t;if(!Zb((h=e==null?void 0:e.owner)==null?void 0:h.current))return!1;const{onUpdate:u,transformTemplate:f}=e.owner.getProps();return g9()&&s&&p9.has(s)&&(s!=="transform"||!f)&&!u&&!a&&n!=="mirror"&&i!==0&&c!=="inertia"}const v9=40;class b9 extends Yb{constructor({autoplay:e=!0,delay:s=0,type:a="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:c="loop",keyframes:u,name:f,motionValue:h,element:p,...g}){var _;super(),this.stop=()=>{var j,N;this._animation&&(this._animation.stop(),(j=this.stopTimeline)==null||j.call(this)),(N=this.keyframeResolver)==null||N.cancel()},this.createdAt=_a.now();const x={autoplay:e,delay:s,type:a,repeat:n,repeatDelay:i,repeatType:c,name:f,motionValue:h,element:p,...g},y=(p==null?void 0:p.KeyframeResolver)||Wb;this.keyframeResolver=new y(u,(j,N,S)=>this.onKeyframesResolved(j,N,x,!S),f,h,p),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,s,a,n){this.keyframeResolver=void 0;const{name:i,type:c,velocity:u,delay:f,isHandoff:h,onUpdate:p}=a;this.resolvedAt=_a.now(),m9(e,i,c,u)||((An.instantAnimations||!f)&&(p==null||p(Xb(e,a,s))),e[0]=e[e.length-1],a.duration=0,a.repeat=0);const x={startTime:n?this.resolvedAt?this.resolvedAt-this.createdAt>v9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...a,keyframes:e},y=!h&&x9(x)?new f9({...x,element:x.motionValue.owner.current}):new Kb(x);y.finished.then(()=>this.notifyFinished()).catch(ar),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),t9()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const y9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function w9(t){const e=y9.exec(t);if(!e)return[,];const[,s,a,n]=e;return[`--${s??a}`,n]}function Ek(t,e,s=1){const[a,n]=w9(t);if(!a)return;const i=window.getComputedStyle(e).getPropertyValue(a);if(i){const c=i.trim();return YA(c)?parseFloat(c):c}return Ub(n)?Ek(n,e,s+1):n}function Qb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Ck=new Set(["width","height","top","left","right","bottom",...Ec]),_9={test:t=>t==="auto",parse:t=>t},Ak=t=>e=>e.test(t),kk=[Sc,Je,Xr,oo,hU,fU,_9],FS=t=>kk.find(Ak(t));function j9(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WA(t):!0}const N9=new Set(["brightness","contrast","saturate","opacity"]);function S9(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[a]=s.match(zb)||[];if(!a)return t;const n=s.replace(a,"");let i=N9.has(e)?1:0;return a!==s&&(i*=100),e+"("+i+n+")"}const E9=/\b([a-z-]*)\(.*?\)/gu,Rv={...Mo,getAnimatableNone:t=>{const e=t.match(E9);return e?e.map(S9).join(" "):t}},HS={...Sc,transform:Math.round},C9={rotate:oo,rotateX:oo,rotateY:oo,rotateZ:oo,scale:wh,scaleX:wh,scaleY:wh,scaleZ:wh,skew:oo,skewX:oo,skewY:oo,distance:Je,translateX:Je,translateY:Je,translateZ:Je,x:Je,y:Je,z:Je,perspective:Je,transformPerspective:Je,opacity:_d,originX:MS,originY:MS,originZ:Je},Jb={borderWidth:Je,borderTopWidth:Je,borderRightWidth:Je,borderBottomWidth:Je,borderLeftWidth:Je,borderRadius:Je,radius:Je,borderTopLeftRadius:Je,borderTopRightRadius:Je,borderBottomRightRadius:Je,borderBottomLeftRadius:Je,width:Je,maxWidth:Je,height:Je,maxHeight:Je,top:Je,right:Je,bottom:Je,left:Je,padding:Je,paddingTop:Je,paddingRight:Je,paddingBottom:Je,paddingLeft:Je,margin:Je,marginTop:Je,marginRight:Je,marginBottom:Je,marginLeft:Je,backgroundPositionX:Je,backgroundPositionY:Je,...C9,zIndex:HS,fillOpacity:_d,strokeOpacity:_d,numOctaves:HS},A9={...Jb,color:Ks,backgroundColor:Ks,outlineColor:Ks,fill:Ks,stroke:Ks,borderColor:Ks,borderTopColor:Ks,borderRightColor:Ks,borderBottomColor:Ks,borderLeftColor:Ks,filter:Rv,WebkitFilter:Rv},Tk=t=>A9[t];function Rk(t,e){let s=Tk(t);return s!==Rv&&(s=Mo),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const k9=new Set(["auto","none","0"]);function T9(t,e,s){let a=0,n;for(;a<t.length&&!n;){const i=t[a];typeof i=="string"&&!k9.has(i)&&jd(i).values.length&&(n=t[a]),a++}if(n&&s)for(const i of e)t[i]=Rk(s,n)}class R9 extends Wb{constructor(e,s,a,n,i){super(e,s,a,n,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let h=e[f];if(typeof h=="string"&&(h=h.trim(),Ub(h))){const p=Ek(h,s.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Ck.has(a)||e.length!==2)return;const[n,i]=e,c=FS(n),u=FS(i);if(c!==u)if(VS(c)&&VS(u))for(let f=0;f<e.length;f++){const h=e[f];typeof h=="string"&&(e[f]=parseFloat(h))}else ji[a]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,a=[];for(let n=0;n<e.length;n++)(e[n]===null||j9(e[n]))&&a.push(n);a.length&&T9(e,a,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:a}=this;if(!e||!e.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ji[a](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const n=s[s.length-1];n!==void 0&&e.getValue(a,n).jump(n,!1)}measureEndState(){var u;const{element:e,name:s,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const n=e.getValue(s);n&&n.jump(this.measuredOrigin,!1);const i=a.length-1,c=a[i];a[i]=ji[s](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([f,h])=>{e.getValue(f).set(h)}),this.resolveNoneKeyframes()}}function M9(t,e,s){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let a=document;const n=(s==null?void 0:s[t])??a.querySelectorAll(t);return n?Array.from(n):[]}return Array.from(t)}const Mk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,GS=30,P9=t=>!isNaN(parseFloat(t));class D9{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,n=!0)=>{var c,u;const i=_a.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const f of this.dependents)f.dirty();n&&((u=this.events.renderRequest)==null||u.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=_a.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=P9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Bb);const a=this.events[e].add(s);return e==="change"?()=>{a(),Zt.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-a}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_a.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>GS)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,GS);return ZA(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,s;(e=this.dependents)==null||e.clear(),(s=this.events.destroy)==null||s.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mc(t,e){return new D9(t,e)}const{schedule:ey}=lk(queueMicrotask,!1),hr={x:!1,y:!1};function Pk(){return hr.x||hr.y}function O9(t){return t==="x"||t==="y"?hr[t]?null:(hr[t]=!0,()=>{hr[t]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}function Dk(t,e){const s=M9(t),a=new AbortController,n={passive:!0,...e,signal:a.signal};return[s,n,()=>a.abort()]}function XS(t){return!(t.pointerType==="touch"||Pk())}function $9(t,e,s={}){const[a,n,i]=Dk(t,s),c=u=>{if(!XS(u))return;const{target:f}=u,h=e(f,u);if(typeof h!="function"||!f)return;const p=g=>{XS(g)&&(h(g),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,n)};return a.forEach(u=>{u.addEventListener("pointerenter",c,n)}),i}const Ok=(t,e)=>e?t===e?!0:Ok(t,e.parentElement):!1,ty=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,L9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function B9(t){return L9.has(t.tagName)||t.tabIndex!==-1}const Lh=new WeakSet;function YS(t){return e=>{e.key==="Enter"&&t(e)}}function _x(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const I9=(t,e)=>{const s=t.currentTarget;if(!s)return;const a=YS(()=>{if(Lh.has(s))return;_x(s,"down");const n=YS(()=>{_x(s,"up")}),i=()=>_x(s,"cancel");s.addEventListener("keyup",n,e),s.addEventListener("blur",i,e)});s.addEventListener("keydown",a,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),e)};function KS(t){return ty(t)&&!Pk()}function V9(t,e,s={}){const[a,n,i]=Dk(t,s),c=u=>{const f=u.currentTarget;if(!KS(u))return;Lh.add(f);const h=e(f,u),p=(y,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",x),Lh.has(f)&&Lh.delete(f),KS(y)&&typeof h=="function"&&h(y,{success:_})},g=y=>{p(y,f===window||f===document||s.useGlobalTarget||Ok(f,y.target))},x=y=>{p(y,!1)};window.addEventListener("pointerup",g,n),window.addEventListener("pointercancel",x,n)};return a.forEach(u=>{(s.useGlobalTarget?window:u).addEventListener("pointerdown",c,n),Zb(u)&&(u.addEventListener("focus",h=>I9(h,n)),!B9(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),i}function $k(t){return KA(t)&&"ownerSVGElement"in t}function q9(t){return $k(t)&&t.tagName==="svg"}const ta=t=>!!(t&&t.getVelocity),U9=[...kk,Ks,Mo],z9=t=>U9.find(Ak(t)),sy=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class F9 extends b.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const a=s.offsetParent,n=Zb(a)&&a.offsetWidth||0,i=this.props.sizeRef.current;i.height=s.offsetHeight||0,i.width=s.offsetWidth||0,i.top=s.offsetTop,i.left=s.offsetLeft,i.right=n-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function H9({children:t,isPresent:e,anchorX:s}){const a=b.useId(),n=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=b.useContext(sy);return b.useInsertionEffect(()=>{const{width:u,height:f,top:h,left:p,right:g}=i.current;if(e||!n.current||!u||!f)return;const x=s==="left"?`left: ${p}`:`right: ${g}`;n.current.dataset.motionPopId=a;const y=document.createElement("style");return c&&(y.nonce=c),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.contains(y)&&document.head.removeChild(y)}},[e]),r.jsx(F9,{isPresent:e,childRef:n,sizeRef:i,children:b.cloneElement(t,{ref:n})})}const G9=({children:t,initial:e,isPresent:s,onExitComplete:a,custom:n,presenceAffectsLayout:i,mode:c,anchorX:u})=>{const f=Mb(X9),h=b.useId();let p=!0,g=b.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:s,custom:n,onExitComplete:x=>{f.set(x,!0);for(const y of f.values())if(!y)return;a&&a()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[s,f,a]);return i&&p&&(g={...g}),b.useMemo(()=>{f.forEach((x,y)=>f.set(y,!1))},[s]),b.useEffect(()=>{!s&&!f.size&&a&&a()},[s]),c==="popLayout"&&(t=r.jsx(H9,{isPresent:s,anchorX:u,children:t})),r.jsx(ep.Provider,{value:g,children:t})};function X9(){return new Map}function Lk(t=!0){const e=b.useContext(ep);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:n}=e,i=b.useId();b.useEffect(()=>{if(t)return n(i)},[t]);const c=b.useCallback(()=>t&&a&&a(i),[i,a,t]);return!s&&a?[!1,c]:[!0]}const _h=t=>t.key||"";function WS(t){const e=[];return b.Children.forEach(t,s=>{b.isValidElement(s)&&e.push(s)}),e}const Bk=({children:t,custom:e,initial:s=!0,onExitComplete:a,presenceAffectsLayout:n=!0,mode:i="sync",propagate:c=!1,anchorX:u="left"})=>{const[f,h]=Lk(c),p=b.useMemo(()=>WS(t),[t]),g=c&&!f?[]:p.map(_h),x=b.useRef(!0),y=b.useRef(p),_=Mb(()=>new Map),[j,N]=b.useState(p),[S,C]=b.useState(p);XA(()=>{x.current=!1,y.current=p;for(let R=0;R<S.length;R++){const P=_h(S[R]);g.includes(P)?_.delete(P):_.get(P)!==!0&&_.set(P,!1)}},[S,g.length,g.join("-")]);const E=[];if(p!==j){let R=[...p];for(let P=0;P<S.length;P++){const $=S[P],k=_h($);g.includes(k)||(R.splice(P,0,$),E.push($))}return i==="wait"&&E.length&&(R=E),C(WS(R)),N(p),null}const{forceRender:M}=b.useContext(Rb);return r.jsx(r.Fragment,{children:S.map(R=>{const P=_h(R),$=c&&!f?!1:p===S||g.includes(P),k=()=>{if(_.has(P))_.set(P,!0);else return;let O=!0;_.forEach(H=>{H||(O=!1)}),O&&(M==null||M(),C(y.current),c&&(h==null||h()),a&&a())};return r.jsx(G9,{isPresent:$,initial:!x.current||s?void 0:!1,custom:e,presenceAffectsLayout:n,mode:i,onExitComplete:$?void 0:k,anchorX:u,children:R},P)})})},Ik=b.createContext({strict:!1}),ZS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const t in ZS)pc[t]={isEnabled:e=>ZS[t].some(s=>!!e[s])};function Y9(t){for(const e in t)pc[e]={...pc[e],...t[e]}}const K9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||K9.has(t)}let Vk=t=>!xm(t);function W9(t){t&&(Vk=e=>e.startsWith("on")?!xm(e):t(e))}try{W9(require("@emotion/is-prop-valid").default)}catch{}function Z9(t,e,s){const a={};for(const n in t)n==="values"&&typeof t.values=="object"||(Vk(n)||s===!0&&xm(n)||!e&&!xm(n)||t.draggable&&n.startsWith("onDrag"))&&(a[n]=t[n]);return a}function Q9(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...a)=>t(...a);return new Proxy(s,{get:(a,n)=>n==="create"?t:(e.has(n)||e.set(n,t(n)),e.get(n))})}const tp=b.createContext({});function sp(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Nd(t){return typeof t=="string"||Array.isArray(t)}const ay=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ry=["initial",...ay];function ap(t){return sp(t.animate)||ry.some(e=>Nd(t[e]))}function qk(t){return!!(ap(t)||t.variants)}function J9(t,e){if(ap(t)){const{initial:s,animate:a}=t;return{initial:s===!1||Nd(s)?s:void 0,animate:Nd(a)?a:void 0}}return t.inherit!==!1?e:{}}function ez(t){const{initial:e,animate:s}=J9(t,b.useContext(tp));return b.useMemo(()=>({initial:e,animate:s}),[QS(e),QS(s)])}function QS(t){return Array.isArray(t)?t.join(" "):t}const tz=Symbol.for("motionComponentSymbol");function Xl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sz(t,e,s){return b.useCallback(a=>{a&&t.onMount&&t.onMount(a),e&&(a?e.mount(a):e.unmount()),s&&(typeof s=="function"?s(a):Xl(s)&&(s.current=a))},[e])}const ny=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),az="framerAppearId",Uk="data-"+ny(az),zk=b.createContext({});function rz(t,e,s,a,n){var j,N;const{visualElement:i}=b.useContext(tp),c=b.useContext(Ik),u=b.useContext(ep),f=b.useContext(sy).reducedMotion,h=b.useRef(null);a=a||c.renderer,!h.current&&a&&(h.current=a(t,{visualState:e,parent:i,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const p=h.current,g=b.useContext(zk);p&&!p.projection&&n&&(p.type==="html"||p.type==="svg")&&nz(h.current,s,n,g);const x=b.useRef(!1);b.useInsertionEffect(()=>{p&&x.current&&p.update(s,u)});const y=s[Uk],_=b.useRef(!!y&&!((j=window.MotionHandoffIsComplete)!=null&&j.call(window,y))&&((N=window.MotionHasOptimisedAnimation)==null?void 0:N.call(window,y)));return XA(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),ey.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),b.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,y)}),_.current=!1))}),p}function nz(t,e,s,a){const{layoutId:n,layout:i,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:Fk(t.parent)),t.projection.setOptions({layoutId:n,layout:i,alwaysMeasureLayout:!!c||u&&Xl(u),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:a,crossfade:p,layoutScroll:f,layoutRoot:h})}function Fk(t){if(t)return t.options.allowProjection!==!1?t.projection:Fk(t.parent)}function oz({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:a,Component:n}){t&&Y9(t);function i(u,f){let h;const p={...b.useContext(sy),...u,layoutId:iz(u)},{isStatic:g}=p,x=ez(u),y=a(u,g);if(!g&&Pb){lz();const _=cz(p);h=_.MeasureLayout,x.visualElement=rz(n,y,p,e,_.ProjectionNode)}return r.jsxs(tp.Provider,{value:x,children:[h&&x.visualElement?r.jsx(h,{visualElement:x.visualElement,...p}):null,s(n,u,sz(y,x.visualElement,f),y,g,x.visualElement)]})}i.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=b.forwardRef(i);return c[tz]=n,c}function iz({layoutId:t}){const e=b.useContext(Rb).id;return e&&t!==void 0?e+"-"+t:t}function lz(t,e){b.useContext(Ik).strict}function cz(t){const{drag:e,layout:s}=pc;if(!e&&!s)return{};const a={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const Sd={};function uz(t){for(const e in t)Sd[e]=t[e],qb(e)&&(Sd[e].isCSSVariable=!0)}function Hk(t,{layout:e,layoutId:s}){return Cc.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Sd[t]||t==="opacity")}const dz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fz=Ec.length;function hz(t,e,s){let a="",n=!0;for(let i=0;i<fz;i++){const c=Ec[i],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number"?f=u===(c.startsWith("scale")?1:0):f=parseFloat(u)===0,!f||s){const h=Mk(u,Jb[c]);if(!f){n=!1;const p=dz[c]||c;a+=`${p}(${h}) `}s&&(e[c]=h)}}return a=a.trim(),s?a=s(e,n?"":a):n&&(a="none"),a}function oy(t,e,s){const{style:a,vars:n,transformOrigin:i}=t;let c=!1,u=!1;for(const f in e){const h=e[f];if(Cc.has(f)){c=!0;continue}else if(qb(f)){n[f]=h;continue}else{const p=Mk(h,Jb[f]);f.startsWith("origin")?(u=!0,i[f]=p):a[f]=p}}if(e.transform||(c||s?a.transform=hz(e,t.transform,s):a.transform&&(a.transform="none")),u){const{originX:f="50%",originY:h="50%",originZ:p=0}=i;a.transformOrigin=`${f} ${h} ${p}`}}const iy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gk(t,e,s){for(const a in e)!ta(e[a])&&!Hk(a,s)&&(t[a]=e[a])}function mz({transformTemplate:t},e){return b.useMemo(()=>{const s=iy();return oy(s,e,t),Object.assign({},s.vars,s.style)},[e])}function pz(t,e){const s=t.style||{},a={};return Gk(a,s,t),Object.assign(a,mz(t,e)),a}function gz(t,e){const s={},a=pz(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=a,s}const xz={offset:"stroke-dashoffset",array:"stroke-dasharray"},vz={offset:"strokeDashoffset",array:"strokeDasharray"};function bz(t,e,s=1,a=0,n=!0){t.pathLength=1;const i=n?xz:vz;t[i.offset]=Je.transform(-a);const c=Je.transform(e),u=Je.transform(s);t[i.array]=`${c} ${u}`}function Xk(t,{attrX:e,attrY:s,attrScale:a,pathLength:n,pathSpacing:i=1,pathOffset:c=0,...u},f,h,p){if(oy(t,u,h),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:x}=t;g.transform&&(x.transform=g.transform,delete g.transform),(x.transform||g.transformOrigin)&&(x.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),x.transform&&(x.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),s!==void 0&&(g.y=s),a!==void 0&&(g.scale=a),n!==void 0&&bz(g,n,i,c,!1)}const Yk=()=>({...iy(),attrs:{}}),Kk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yz(t,e,s,a){const n=b.useMemo(()=>{const i=Yk();return Xk(i,e,Kk(a),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};Gk(i,t.style,t),n.style={...i,...n.style}}return n}const wz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ly(t){return typeof t!="string"||t.includes("-")?!1:!!(wz.indexOf(t)>-1||/[A-Z]/u.test(t))}function _z(t=!1){return(s,a,n,{latestValues:i},c)=>{const f=(ly(s)?yz:gz)(a,i,c,s),h=Z9(a,typeof s=="string",t),p=s!==b.Fragment?{...h,...f,ref:n}:{},{children:g}=a,x=b.useMemo(()=>ta(g)?g.get():g,[g]);return b.createElement(s,{...p,children:x})}}function JS(t){const e=[{},{}];return t==null||t.values.forEach((s,a)=>{e[0][a]=s.get(),e[1][a]=s.getVelocity()}),e}function cy(t,e,s,a){if(typeof e=="function"){const[n,i]=JS(a);e=e(s!==void 0?s:t.custom,n,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[n,i]=JS(a);e=e(s!==void 0?s:t.custom,n,i)}return e}function Bh(t){return ta(t)?t.get():t}function jz({scrapeMotionValuesFromProps:t,createRenderState:e},s,a,n){return{latestValues:Nz(s,a,n,t),renderState:e()}}const Wk=t=>(e,s)=>{const a=b.useContext(tp),n=b.useContext(ep),i=()=>jz(t,e,a,n);return s?i():Mb(i)};function Nz(t,e,s,a){const n={},i=a(t,{});for(const x in i)n[x]=Bh(i[x]);let{initial:c,animate:u}=t;const f=ap(t),h=qk(t);e&&h&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let p=s?s.initial===!1:!1;p=p||c===!1;const g=p?u:c;if(g&&typeof g!="boolean"&&!sp(g)){const x=Array.isArray(g)?g:[g];for(let y=0;y<x.length;y++){const _=cy(t,x[y]);if(_){const{transitionEnd:j,transition:N,...S}=_;for(const C in S){let E=S[C];if(Array.isArray(E)){const M=p?E.length-1:0;E=E[M]}E!==null&&(n[C]=E)}for(const C in j)n[C]=j[C]}}}return n}function uy(t,e,s){var i;const{style:a}=t,n={};for(const c in a)(ta(a[c])||e.style&&ta(e.style[c])||Hk(c,t)||((i=s==null?void 0:s.getValue(c))==null?void 0:i.liveStyle)!==void 0)&&(n[c]=a[c]);return n}const Sz={useVisualState:Wk({scrapeMotionValuesFromProps:uy,createRenderState:iy})};function Zk(t,e,s){const a=uy(t,e,s);for(const n in t)if(ta(t[n])||ta(e[n])){const i=Ec.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;a[i]=t[n]}return a}const Ez={useVisualState:Wk({scrapeMotionValuesFromProps:Zk,createRenderState:Yk})};function Cz(t,e){return function(a,{forwardMotionProps:n}={forwardMotionProps:!1}){const c={...ly(a)?Ez:Sz,preloadedFeatures:t,useRender:_z(n),createVisualElement:e,Component:a};return oz(c)}}function Ed(t,e,s){const a=t.getProps();return cy(a,e,s!==void 0?s:a.custom,t)}const Mv=t=>Array.isArray(t);function Az(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,mc(s))}function kz(t){return Mv(t)?t[t.length-1]||0:t}function Tz(t,e){const s=Ed(t,e);let{transitionEnd:a={},transition:n={},...i}=s||{};i={...i,...a};for(const c in i){const u=kz(i[c]);Az(t,c,u)}}function Rz(t){return!!(ta(t)&&t.add)}function Pv(t,e){const s=t.getValue("willChange");if(Rz(s))return s.add(e);if(!s&&An.WillChange){const a=new An.WillChange("auto");t.addValue("willChange",a),a.add(e)}}function Qk(t){return t.props[Uk]}const Mz=t=>t!==null;function Pz(t,{repeat:e,repeatType:s="loop"},a){const n=t.filter(Mz),i=e&&s!=="loop"&&e%2===1?0:n.length-1;return n[i]}const Dz={type:"spring",stiffness:500,damping:25,restSpeed:10},Oz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$z={type:"keyframes",duration:.8},Lz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Bz=(t,{keyframes:e})=>e.length>2?$z:Cc.has(t)?t.startsWith("scale")?Oz(e[1]):Dz:Lz;function Iz({when:t,delay:e,delayChildren:s,staggerChildren:a,staggerDirection:n,repeat:i,repeatType:c,repeatDelay:u,from:f,elapsed:h,...p}){return!!Object.keys(p).length}const dy=(t,e,s,a={},n,i)=>c=>{const u=Qb(a,t)||{},f=u.delay||a.delay||0;let{elapsed:h=0}=a;h=h-Hr(f);const p={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:i?void 0:n};Iz(u)||Object.assign(p,Bz(t,p)),p.duration&&(p.duration=Hr(p.duration)),p.repeatDelay&&(p.repeatDelay=Hr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(g=!0)),(An.instantAnimations||An.skipAnimations)&&(g=!0,p.duration=0,p.delay=0),p.allowFlatten=!u.type&&!u.ease,g&&!i&&e.get()!==void 0){const x=Pz(p.keyframes,u);if(x!==void 0){Zt.update(()=>{p.onUpdate(x),p.onComplete()});return}}return u.isSync?new Kb(p):new b9(p)};function Vz({protectedKeys:t,needsAnimating:e},s){const a=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,a}function Jk(t,e,{delay:s=0,transitionOverride:a,type:n}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:c,...u}=e;a&&(i=a);const f=[],h=n&&t.animationState&&t.animationState.getState()[n];for(const p in u){const g=t.getValue(p,t.latestValues[p]??null),x=u[p];if(x===void 0||h&&Vz(h,p))continue;const y={delay:s,...Qb(i||{},p)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(x)&&x===_&&!y.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const S=Qk(t);if(S){const C=window.MotionHandoffAnimation(S,p,Zt);C!==null&&(y.startTime=C,j=!0)}}Pv(t,p),g.start(dy(p,g,x,t.shouldReduceMotion&&Ck.has(p)?{type:!1}:y,t,j));const N=g.animation;N&&f.push(N)}return c&&Promise.all(f).then(()=>{Zt.update(()=>{c&&Tz(t,c)})}),f}function Dv(t,e,s={}){var f;const a=Ed(t,e,s.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:n=t.getDefaultTransition()||{}}=a||{};s.transitionOverride&&(n=s.transitionOverride);const i=a?()=>Promise.all(Jk(t,a,s)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:x}=n;return qz(t,e,p+h,g,x,s)}:()=>Promise.resolve(),{when:u}=n;if(u){const[h,p]=u==="beforeChildren"?[i,c]:[c,i];return h().then(()=>p())}else return Promise.all([i(),c(s.delay)])}function qz(t,e,s=0,a=0,n=1,i){const c=[],u=(t.variantChildren.size-1)*a,f=n===1?(h=0)=>h*a:(h=0)=>u-h*a;return Array.from(t.variantChildren).sort(Uz).forEach((h,p)=>{h.notify("AnimationStart",e),c.push(Dv(h,e,{...i,delay:s+f(p)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(c)}function Uz(t,e){return t.sortNodePosition(e)}function zz(t,e,s={}){t.notify("AnimationStart",e);let a;if(Array.isArray(e)){const n=e.map(i=>Dv(t,i,s));a=Promise.all(n)}else if(typeof e=="string")a=Dv(t,e,s);else{const n=typeof e=="function"?Ed(t,e,s.custom):e;a=Promise.all(Jk(t,n,s))}return a.then(()=>{t.notify("AnimationComplete",e)})}function eT(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let a=0;a<s;a++)if(e[a]!==t[a])return!1;return!0}const Fz=ry.length;function tT(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?tT(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<Fz;s++){const a=ry[s],n=t.props[a];(Nd(n)||n===!1)&&(e[a]=n)}return e}const Hz=[...ay].reverse(),Gz=ay.length;function Xz(t){return e=>Promise.all(e.map(({animation:s,options:a})=>zz(t,s,a)))}function Yz(t){let e=Xz(t),s=e2(),a=!0;const n=f=>(h,p)=>{var x;const g=Ed(t,p,f==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(g){const{transition:y,transitionEnd:_,...j}=g;h={...h,...j,..._}}return h};function i(f){e=f(t)}function c(f){const{props:h}=t,p=tT(t.parent)||{},g=[],x=new Set;let y={},_=1/0;for(let N=0;N<Gz;N++){const S=Hz[N],C=s[S],E=h[S]!==void 0?h[S]:p[S],M=Nd(E),R=S===f?C.isActive:null;R===!1&&(_=N);let P=E===p[S]&&E!==h[S]&&M;if(P&&a&&t.manuallyAnimateOnMount&&(P=!1),C.protectedKeys={...y},!C.isActive&&R===null||!E&&!C.prevProp||sp(E)||typeof E=="boolean")continue;const $=Kz(C.prevProp,E);let k=$||S===f&&C.isActive&&!P&&M||N>_&&M,O=!1;const H=Array.isArray(E)?E:[E];let Y=H.reduce(n(S),{});R===!1&&(Y={});const{prevResolvedValues:I={}}=C,z={...I,...Y},ee=B=>{k=!0,x.has(B)&&(O=!0,x.delete(B)),C.needsAnimating[B]=!0;const V=t.getValue(B);V&&(V.liveStyle=!1)};for(const B in z){const V=Y[B],W=I[B];if(y.hasOwnProperty(B))continue;let L=!1;Mv(V)&&Mv(W)?L=!eT(V,W):L=V!==W,L?V!=null?ee(B):x.add(B):V!==void 0&&x.has(B)?ee(B):C.protectedKeys[B]=!0}C.prevProp=E,C.prevResolvedValues=Y,C.isActive&&(y={...y,...Y}),a&&t.blockInitialAnimation&&(k=!1),k&&(!(P&&$)||O)&&g.push(...H.map(B=>({animation:B,options:{type:S}})))}if(x.size){const N={};if(typeof h.initial!="boolean"){const S=Ed(t,Array.isArray(h.initial)?h.initial[0]:h.initial);S&&S.transition&&(N.transition=S.transition)}x.forEach(S=>{const C=t.getBaseTarget(S),E=t.getValue(S);E&&(E.liveStyle=!0),N[S]=C??null}),g.push({animation:N})}let j=!!g.length;return a&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(j=!1),a=!1,j?e(g):Promise.resolve()}function u(f,h){var g;if(s[f].isActive===h)return Promise.resolve();(g=t.variantChildren)==null||g.forEach(x=>{var y;return(y=x.animationState)==null?void 0:y.setActive(f,h)}),s[f].isActive=h;const p=c(f);for(const x in s)s[x].protectedKeys={};return p}return{animateChanges:c,setActive:u,setAnimateFunction:i,getState:()=>s,reset:()=>{s=e2(),a=!0}}}function Kz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!eT(e,t):!1}function li(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function e2(){return{animate:li(!0),whileInView:li(),whileHover:li(),whileTap:li(),whileDrag:li(),whileFocus:li(),exit:li()}}class Lo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Wz extends Lo{constructor(e){super(e),e.animationState||(e.animationState=Yz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sp(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Zz=0;class Qz extends Lo{constructor(){super(...arguments),this.id=Zz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const n=this.node.animationState.setActive("exit",!e);s&&!e&&n.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Jz={animation:{Feature:Wz},exit:{Feature:Qz}};function Cd(t,e,s,a={passive:!0}){return t.addEventListener(e,s,a),()=>t.removeEventListener(e,s)}function Id(t){return{point:{x:t.pageX,y:t.pageY}}}const eF=t=>e=>ty(e)&&t(e,Id(e));function ud(t,e,s,a){return Cd(t,e,eF(s),a)}function sT({top:t,left:e,right:s,bottom:a}){return{x:{min:e,max:s},y:{min:t,max:a}}}function tF({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sF(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),a=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}const aT=1e-4,aF=1-aT,rF=1+aT,rT=.01,nF=0-rT,oF=0+rT;function ua(t){return t.max-t.min}function iF(t,e,s){return Math.abs(t-e)<=s}function t2(t,e,s,a=.5){t.origin=a,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=ua(s)/ua(e),t.translate=Wt(s.min,s.max,t.origin)-t.originPoint,(t.scale>=aF&&t.scale<=rF||isNaN(t.scale))&&(t.scale=1),(t.translate>=nF&&t.translate<=oF||isNaN(t.translate))&&(t.translate=0)}function dd(t,e,s,a){t2(t.x,e.x,s.x,a?a.originX:void 0),t2(t.y,e.y,s.y,a?a.originY:void 0)}function s2(t,e,s){t.min=s.min+e.min,t.max=t.min+ua(e)}function lF(t,e,s){s2(t.x,e.x,s.x),s2(t.y,e.y,s.y)}function a2(t,e,s){t.min=e.min-s.min,t.max=t.min+ua(e)}function fd(t,e,s){a2(t.x,e.x,s.x),a2(t.y,e.y,s.y)}const r2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Yl=()=>({x:r2(),y:r2()}),n2=()=>({min:0,max:0}),os=()=>({x:n2(),y:n2()});function Qa(t){return[t("x"),t("y")]}function jx(t){return t===void 0||t===1}function Ov({scale:t,scaleX:e,scaleY:s}){return!jx(t)||!jx(e)||!jx(s)}function di(t){return Ov(t)||nT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nT(t){return o2(t.x)||o2(t.y)}function o2(t){return t&&t!=="0%"}function vm(t,e,s){const a=t-s,n=e*a;return s+n}function i2(t,e,s,a,n){return n!==void 0&&(t=vm(t,n,a)),vm(t,s,a)+e}function $v(t,e=0,s=1,a,n){t.min=i2(t.min,e,s,a,n),t.max=i2(t.max,e,s,a,n)}function oT(t,{x:e,y:s}){$v(t.x,e.translate,e.scale,e.originPoint),$v(t.y,s.translate,s.scale,s.originPoint)}const l2=.999999999999,c2=1.0000000000001;function cF(t,e,s,a=!1){const n=s.length;if(!n)return;e.x=e.y=1;let i,c;for(let u=0;u<n;u++){i=s[u],c=i.projectionDelta;const{visualElement:f}=i.options;f&&f.props.style&&f.props.style.display==="contents"||(a&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Wl(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,oT(t,c)),a&&di(i.latestValues)&&Wl(t,i.latestValues))}e.x<c2&&e.x>l2&&(e.x=1),e.y<c2&&e.y>l2&&(e.y=1)}function Kl(t,e){t.min=t.min+e,t.max=t.max+e}function u2(t,e,s,a,n=.5){const i=Wt(t.min,t.max,n);$v(t,e,s,i,a)}function Wl(t,e){u2(t.x,e.x,e.scaleX,e.scale,e.originX),u2(t.y,e.y,e.scaleY,e.scale,e.originY)}function iT(t,e){return sT(sF(t.getBoundingClientRect(),e))}function uF(t,e,s){const a=iT(t,s),{scroll:n}=e;return n&&(Kl(a.x,n.offset.x),Kl(a.y,n.offset.y)),a}const lT=({current:t})=>t?t.ownerDocument.defaultView:null,d2=(t,e)=>Math.abs(t-e);function dF(t,e){const s=d2(t.x,e.x),a=d2(t.y,e.y);return Math.sqrt(s**2+a**2)}class cT{constructor(e,s,{transformPagePoint:a,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Sx(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,y=dF(g.offset,{x:0,y:0})>=3;if(!x&&!y)return;const{point:_}=g,{timestamp:j}=qs;this.history.push({..._,timestamp:j});const{onStart:N,onMove:S}=this.handlers;x||(N&&N(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Nx(x,this.transformPagePoint),Zt.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Sx(g.type==="pointercancel"?this.lastMoveEventInfo:Nx(x,this.transformPagePoint),this.history);this.startEvent&&y&&y(g,N),_&&_(g,N)},!ty(e))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=a,this.contextWindow=n||window;const c=Id(e),u=Nx(c,this.transformPagePoint),{point:f}=u,{timestamp:h}=qs;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=s;p&&p(e,Sx(u,this.history)),this.removeListeners=$d(ud(this.contextWindow,"pointermove",this.handlePointerMove),ud(this.contextWindow,"pointerup",this.handlePointerUp),ud(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ro(this.updatePoint)}}function Nx(t,e){return e?{point:e(t.point)}:t}function f2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sx({point:t},e){return{point:t,delta:f2(t,uT(e)),offset:f2(t,fF(e)),velocity:hF(e,.1)}}function fF(t){return t[0]}function uT(t){return t[t.length-1]}function hF(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,a=null;const n=uT(t);for(;s>=0&&(a=t[s],!(n.timestamp-a.timestamp>Hr(e)));)s--;if(!a)return{x:0,y:0};const i=Gr(n.timestamp-a.timestamp);if(i===0)return{x:0,y:0};const c={x:(n.x-a.x)/i,y:(n.y-a.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function mF(t,{min:e,max:s},a){return e!==void 0&&t<e?t=a?Wt(e,t,a.min):Math.max(t,e):s!==void 0&&t>s&&(t=a?Wt(s,t,a.max):Math.min(t,s)),t}function h2(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function pF(t,{top:e,left:s,bottom:a,right:n}){return{x:h2(t.x,s,n),y:h2(t.y,e,a)}}function m2(t,e){let s=e.min-t.min,a=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,a]=[a,s]),{min:s,max:a}}function gF(t,e){return{x:m2(t.x,e.x),y:m2(t.y,e.y)}}function xF(t,e){let s=.5;const a=ua(t),n=ua(e);return n>a?s=wd(e.min,e.max-a,t.min):a>n&&(s=wd(t.min,t.max-n,e.min)),Cn(0,1,s)}function vF(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const Lv=.35;function bF(t=Lv){return t===!1?t=0:t===!0&&(t=Lv),{x:p2(t,"left","right"),y:p2(t,"top","bottom")}}function p2(t,e,s){return{min:g2(t,e),max:g2(t,s)}}function g2(t,e){return typeof t=="number"?t:t[e]||0}const yF=new WeakMap;class wF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=os(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const n=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Id(p).point)},i=(p,g)=>{const{drag:x,dragPropagation:y,onDragStart:_}=this.getProps();if(x&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=O9(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qa(N=>{let S=this.getAxisMotionValue(N).get()||0;if(Xr.test(S)){const{projection:C}=this.visualElement;if(C&&C.layout){const E=C.layout.layoutBox[N];E&&(S=ua(E)*(parseFloat(S)/100))}}this.originPoint[N]=S}),_&&Zt.postRender(()=>_(p,g)),Pv(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(p,g)=>{const{dragPropagation:x,dragDirectionLock:y,onDirectionLock:_,onDrag:j}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=g;if(y&&this.currentDirection===null){this.currentDirection=_F(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),j&&j(p,g)},u=(p,g)=>this.stop(p,g),f=()=>Qa(p=>{var g;return this.getAnimationState(p)==="paused"&&((g=this.getAxisMotionValue(p).animation)==null?void 0:g.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new cT(e,{onSessionStart:n,onStart:i,onMove:c,onSessionEnd:u,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:lT(this.visualElement)})}stop(e,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:n}=s;this.startAnimation(n);const{onDragEnd:i}=this.getProps();i&&Zt.postRender(()=>i(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,a){const{drag:n}=this.getProps();if(!a||!jh(e,n,this.currentDirection))return;const i=this.getAxisMotionValue(e);let c=this.originPoint[e]+a[e];this.constraints&&this.constraints[e]&&(c=mF(c,this.constraints[e],this.elastic[e])),i.set(c)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,n=this.constraints;e&&Xl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=pF(a.layoutBox,e):this.constraints=!1,this.elastic=bF(s),n!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Qa(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=vF(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!Xl(e))return!1;const a=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const i=uF(a,n.root,this.visualElement.getTransformPagePoint());let c=gF(n.layout.layoutBox,i);if(s){const u=s(tF(c));this.hasMutatedConstraints=!!u,u&&(c=sT(u))}return c}startAnimation(e){const{drag:s,dragMomentum:a,dragElastic:n,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},h=Qa(p=>{if(!jh(p,s,this.currentDirection))return;let g=f&&f[p]||{};c&&(g={min:0,max:0});const x=n?200:1e6,y=n?40:1e7,_={type:"inertia",velocity:a?e[p]:0,bounceStiffness:x,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...g};return this.startAxisValueAnimation(p,_)});return Promise.all(h).then(u)}startAxisValueAnimation(e,s){const a=this.getAxisMotionValue(e);return Pv(this.visualElement,e),a.start(dy(e,a,0,s,this.visualElement,!1))}stopAnimation(){Qa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qa(e=>{var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)==null?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,a=this.visualElement.getProps(),n=a[s];return n||this.visualElement.getValue(e,(a.initial?a.initial[e]:void 0)||0)}snapToCursor(e){Qa(s=>{const{drag:a}=this.getProps();if(!jh(s,a,this.currentDirection))return;const{projection:n}=this.visualElement,i=this.getAxisMotionValue(s);if(n&&n.layout){const{min:c,max:u}=n.layout.layoutBox[s];i.set(e[s]-Wt(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!Xl(s)||!a||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Qa(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();n[c]=xF({min:f,max:f},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),Qa(c=>{if(!jh(c,e,null))return;const u=this.getAxisMotionValue(c),{min:f,max:h}=this.constraints[c];u.set(Wt(f,h,n[c]))})}addListeners(){if(!this.visualElement.current)return;yF.set(this.visualElement,this);const e=this.visualElement.current,s=ud(e,"pointerdown",f=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(f)}),a=()=>{const{dragConstraints:f}=this.getProps();Xl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",a);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Zt.read(a);const c=Cd(window,"resize",()=>this.scalePositionWithinConstraints()),u=n.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h})=>{this.isDragging&&h&&(Qa(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=f[p].translate,g.set(g.get()+f[p].translate))}),this.visualElement.render())});return()=>{c(),s(),i(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:c=Lv,dragMomentum:u=!0}=e;return{...e,drag:s,dragDirectionLock:a,dragPropagation:n,dragConstraints:i,dragElastic:c,dragMomentum:u}}}function jh(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function _F(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class jF extends Lo{constructor(e){super(e),this.removeGroupControls=ar,this.removeListeners=ar,this.controls=new wF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const x2=t=>(e,s)=>{t&&Zt.postRender(()=>t(e,s))};class NF extends Lo{constructor(){super(...arguments),this.removePointerDownListener=ar}onPointerDown(e){this.session=new cT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:a,onPanEnd:n}=this.node.getProps();return{onSessionStart:x2(e),onStart:x2(s),onMove:a,onEnd:(i,c)=>{delete this.session,n&&Zt.postRender(()=>n(i,c))}}}mount(){this.removePointerDownListener=ud(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ih={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $u={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Je.test(t))t=parseFloat(t);else return t;const s=v2(t,e.target.x),a=v2(t,e.target.y);return`${s}% ${a}%`}},SF={correct:(t,{treeScale:e,projectionDelta:s})=>{const a=t,n=Mo.parse(t);if(n.length>5)return a;const i=Mo.createTransformer(t),c=typeof n[0]!="number"?1:0,u=s.x.scale*e.x,f=s.y.scale*e.y;n[0+c]/=u,n[1+c]/=f;const h=Wt(u,f,.5);return typeof n[2+c]=="number"&&(n[2+c]/=h),typeof n[3+c]=="number"&&(n[3+c]/=h),i(n)}};class EF extends b.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:a,layoutId:n}=this.props,{projection:i}=e;uz(CF),i&&(s.group&&s.group.add(i),a&&a.register&&n&&a.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ih.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:a,drag:n,isPresent:i}=this.props,{projection:c}=a;return c&&(c.isPresent=i,n||e.layoutDependency!==s||s===void 0||e.isPresent!==i?c.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?c.promote():c.relegate()||Zt.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ey.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(n),a&&a.deregister&&a.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dT(t){const[e,s]=Lk(),a=b.useContext(Rb);return r.jsx(EF,{...t,layoutGroup:a,switchLayoutGroup:b.useContext(zk),isPresent:e,safeToRemove:s})}const CF={borderRadius:{...$u,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$u,borderTopRightRadius:$u,borderBottomLeftRadius:$u,borderBottomRightRadius:$u,boxShadow:SF};function AF(t,e,s){const a=ta(t)?t:mc(t);return a.start(dy("",a,e,s)),a.animation}const kF=(t,e)=>t.depth-e.depth;class TF{constructor(){this.children=[],this.isDirty=!1}add(e){Db(this.children,e),this.isDirty=!0}remove(e){Ob(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kF),this.isDirty=!1,this.children.forEach(e)}}function RF(t,e){const s=_a.now(),a=({timestamp:n})=>{const i=n-s;i>=e&&(Ro(a),t(i-e))};return Zt.setup(a,!0),()=>Ro(a)}const fT=["TopLeft","TopRight","BottomLeft","BottomRight"],MF=fT.length,b2=t=>typeof t=="string"?parseFloat(t):t,y2=t=>typeof t=="number"||Je.test(t);function PF(t,e,s,a,n,i){n?(t.opacity=Wt(0,s.opacity??1,DF(a)),t.opacityExit=Wt(e.opacity??1,0,OF(a))):i&&(t.opacity=Wt(e.opacity??1,s.opacity??1,a));for(let c=0;c<MF;c++){const u=`border${fT[c]}Radius`;let f=w2(e,u),h=w2(s,u);if(f===void 0&&h===void 0)continue;f||(f=0),h||(h=0),f===0||h===0||y2(f)===y2(h)?(t[u]=Math.max(Wt(b2(f),b2(h),a),0),(Xr.test(h)||Xr.test(f))&&(t[u]+="%")):t[u]=h}(e.rotate||s.rotate)&&(t.rotate=Wt(e.rotate||0,s.rotate||0,a))}function w2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DF=hT(0,.5,rk),OF=hT(.5,.95,ar);function hT(t,e,s){return a=>a<t?0:a>e?1:s(wd(t,e,a))}function _2(t,e){t.min=e.min,t.max=e.max}function Wa(t,e){_2(t.x,e.x),_2(t.y,e.y)}function j2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function N2(t,e,s,a,n){return t-=e,t=vm(t,1/s,a),n!==void 0&&(t=vm(t,1/n,a)),t}function $F(t,e=0,s=1,a=.5,n,i=t,c=t){if(Xr.test(e)&&(e=parseFloat(e),e=Wt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=Wt(i.min,i.max,a);t===i&&(u-=e),t.min=N2(t.min,e,s,u,n),t.max=N2(t.max,e,s,u,n)}function S2(t,e,[s,a,n],i,c){$F(t,e[s],e[a],e[n],e.scale,i,c)}const LF=["x","scaleX","originX"],BF=["y","scaleY","originY"];function E2(t,e,s,a){S2(t.x,e,LF,s?s.x:void 0,a?a.x:void 0),S2(t.y,e,BF,s?s.y:void 0,a?a.y:void 0)}function C2(t){return t.translate===0&&t.scale===1}function mT(t){return C2(t.x)&&C2(t.y)}function A2(t,e){return t.min===e.min&&t.max===e.max}function IF(t,e){return A2(t.x,e.x)&&A2(t.y,e.y)}function k2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pT(t,e){return k2(t.x,e.x)&&k2(t.y,e.y)}function T2(t){return ua(t.x)/ua(t.y)}function R2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class VF{constructor(){this.members=[]}add(e){Db(this.members,e),e.scheduleRender()}remove(e){if(Ob(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(n=>e===n);if(s===0)return!1;let a;for(let n=s;n>=0;n--){const i=this.members[n];if(i.isPresent!==!1){a=i;break}}return a?(this.promote(a),!0):!1}promote(e,s){const a=this.lead;if(e!==a&&(this.prevLead=a,this.lead=e,e.show(),a)){a.instance&&a.scheduleRender(),e.scheduleRender(),e.resumeFrom=a,s&&(e.resumeFrom.preserveOpacity=!0),a.snapshot&&(e.snapshot=a.snapshot,e.snapshot.latestValues=a.animationValues||a.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;n===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:a}=e;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qF(t,e,s){let a="";const n=t.x.translate/e.x,i=t.y.translate/e.y,c=(s==null?void 0:s.z)||0;if((n||i||c)&&(a=`translate3d(${n}px, ${i}px, ${c}px) `),(e.x!==1||e.y!==1)&&(a+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:h,rotate:p,rotateX:g,rotateY:x,skewX:y,skewY:_}=s;h&&(a=`perspective(${h}px) ${a}`),p&&(a+=`rotate(${p}deg) `),g&&(a+=`rotateX(${g}deg) `),x&&(a+=`rotateY(${x}deg) `),y&&(a+=`skewX(${y}deg) `),_&&(a+=`skewY(${_}deg) `)}const u=t.x.scale*e.x,f=t.y.scale*e.y;return(u!==1||f!==1)&&(a+=`scale(${u}, ${f})`),a||"none"}const Ex=["","X","Y","Z"],UF={visibility:"hidden"},zF=1e3;let FF=0;function Cx(t,e,s,a){const{latestValues:n}=e;n[t]&&(s[t]=n[t],e.setStaticValue(t,0),a&&(a[t]=0))}function gT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=Qk(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:n,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",Zt,!(n||i))}const{parent:a}=t;a&&!a.hasCheckedOptimisedAppear&&gT(a)}function xT({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:a,resetTransform:n}){return class{constructor(c={},u=e==null?void 0:e()){this.id=FF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XF),this.nodes.forEach(QF),this.nodes.forEach(JF),this.nodes.forEach(YF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new TF)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Bb),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=$k(c)&&!q9(c),this.instance=c;const{layoutId:u,layout:f,visualElement:h}=this.options;if(h&&!h.current&&h.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let p;const g=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=RF(g,250),Ih.hasAnimatedSinceResize&&(Ih.hasAnimatedSinceResize=!1,this.nodes.forEach(P2))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g,hasRelativeLayoutChanged:x,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||r7,{onLayoutAnimationStart:j,onLayoutAnimationComplete:N}=h.getProps(),S=!this.targetLayout||!pT(this.targetLayout,y),C=!g&&x;if(this.options.layoutRoot||this.resumeFrom||C||g&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...Qb(_,"layout"),onPlay:j,onComplete:N};(h.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(p,C)}else g||P2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const g=this.path[p];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M2);return}this.isUpdating||this.nodes.forEach(WF),this.isUpdating=!1,this.nodes.forEach(ZF),this.nodes.forEach(HF),this.nodes.forEach(GF),this.clearAllSnapshots();const u=_a.now();qs.delta=Cn(0,1e3/60,u-qs.timestamp),qs.timestamp=u,qs.isProcessing=!0,xx.update.process(qs),xx.preRender.process(qs),xx.render.process(qs),qs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ey.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KF),this.sharedNodes.forEach(t7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ua(this.snapshot.measuredBox.x)&&!ua(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=os(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=a(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!n)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!mT(this.projectionDelta),f=this.getTransformTemplate(),h=f?f(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;c&&this.instance&&(u||di(this.latestValues)||p)&&(n(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),n7(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:c}=this.options;if(!c)return os();const u=c.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(o7))){const{scroll:p}=this.root;p&&(Kl(u.x,p.offset.x),Kl(u.y,p.offset.y))}return u}removeElementScroll(c){var f;const u=os();if(Wa(u,c),(f=this.scroll)!=null&&f.wasRoot)return u;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:g,options:x}=p;p!==this.root&&g&&x.layoutScroll&&(g.wasRoot&&Wa(u,c),Kl(u.x,g.offset.x),Kl(u.y,g.offset.y))}return u}applyTransform(c,u=!1){const f=os();Wa(f,c);for(let h=0;h<this.path.length;h++){const p=this.path[h];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Wl(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),di(p.latestValues)&&Wl(f,p.latestValues)}return di(this.latestValues)&&Wl(f,this.latestValues),f}removeTransform(c){const u=os();Wa(u,c);for(let f=0;f<this.path.length;f++){const h=this.path[f];if(!h.instance||!di(h.latestValues))continue;Ov(h.latestValues)&&h.updateSnapshot();const p=os(),g=h.measurePageBox();Wa(p,g),E2(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return di(this.latestValues)&&E2(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:g}=this.options;if(!(!this.layout||!(p||g))){if(this.resolvedRelativeTargetAt=qs.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),fd(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Wa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=os(),this.targetWithTransforms=os()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wa(this.target,this.layout.layoutBox),oT(this.target,this.targetDelta)):Wa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=os(),this.relativeTargetOrigin=os(),fd(this.relativeTargetOrigin,this.target,y.target),Wa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ov(this.parent.latestValues)||nT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var _;const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===qs.timestamp&&(f=!1),f)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Wa(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,x=this.treeScale.y;cF(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=os());const{target:y}=c;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(j2(this.prevProjectionDelta.x,this.projectionDelta.x),j2(this.prevProjectionDelta.y,this.projectionDelta.y)),dd(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==x||!R2(this.projectionDelta.x,this.prevProjectionDelta.x)||!R2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Yl(),this.projectionDelta=Yl(),this.projectionDeltaWithTransform=Yl()}setAnimationOrigin(c,u=!1){const f=this.snapshot,h=f?f.latestValues:{},p={...this.latestValues},g=Yl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=os(),y=f?f.source:void 0,_=this.layout?this.layout.source:void 0,j=y!==_,N=this.getStack(),S=!N||N.members.length<=1,C=!!(j&&!S&&this.options.crossfade===!0&&!this.path.some(a7));this.animationProgress=0;let E;this.mixTargetDelta=M=>{const R=M/1e3;D2(g.x,c.x,R),D2(g.y,c.y,R),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fd(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),s7(this.relativeTarget,this.relativeTargetOrigin,x,R),E&&IF(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=os()),Wa(E,this.relativeTarget)),j&&(this.animationValues=p,PF(p,h,this.latestValues,R,C,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var u,f,h;this.notifyListeners("animationStart"),(u=this.currentAnimation)==null||u.stop(),(h=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zt.update(()=>{Ih.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mc(0)),this.currentAnimation=AF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:h,latestValues:p}=c;if(!(!u||!f||!h)){if(this!==c&&this.layout&&h&&vT(this.options.animationType,this.layout.layoutBox,h.layoutBox)){f=this.target||os();const g=ua(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+g;const x=ua(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+x}Wa(u,f),Wl(u,p),dd(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new VF),this.sharedNodes.get(c).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const h=this.getStack();h&&h.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const h={};f.z&&Cx("z",c,h,this.animationValues);for(let p=0;p<Ex.length;p++)Cx(`rotate${Ex[p]}`,c,h,this.animationValues),Cx(`skew${Ex[p]}`,c,h,this.animationValues);c.render();for(const p in h)c.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return UF;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Bh(c==null?void 0:c.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Bh(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!di(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=qF(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in Sd){if(p[y]===void 0)continue;const{correct:_,applyTo:j,isCSSVariable:N}=Sd[y],S=u.transform==="none"?p[y]:_(p[y],h);if(j){const C=j.length;for(let E=0;E<C;E++)u[j[E]]=S}else N?this.options.visualElement.renderState.vars[y]=S:u[y]=S}return this.options.layoutId&&(u.pointerEvents=h===this?Bh(c==null?void 0:c.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(M2),this.root.sharedNodes.clear()}}}function HF(t){t.updateLayout()}function GF(t){var s;const e=((s=t.resumeFrom)==null?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:n}=t.layout,{animationType:i}=t.options,c=e.source!==t.layout.source;i==="size"?Qa(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],y=ua(x);x.min=a[g].min,x.max=x.min+y}):vT(i,e.layoutBox,a)&&Qa(g=>{const x=c?e.measuredBox[g]:e.layoutBox[g],y=ua(a[g]);x.max=x.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+y)});const u=Yl();dd(u,a,e.layoutBox);const f=Yl();c?dd(f,t.applyTransform(n,!0),e.measuredBox):dd(f,a,e.layoutBox);const h=!mT(u);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:x,layout:y}=g;if(x&&y){const _=os();fd(_,e.layoutBox,x.layoutBox);const j=os();fd(j,a,y.layoutBox),pT(_,j)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=_,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:a,snapshot:e,delta:f,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:a}=t.options;a&&a()}t.options.transition=void 0}function XF(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KF(t){t.clearSnapshot()}function M2(t){t.clearMeasurements()}function WF(t){t.isLayoutDirty=!1}function ZF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function P2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function QF(t){t.resolveTargetDelta()}function JF(t){t.calcProjection()}function e7(t){t.resetSkewAndRotation()}function t7(t){t.removeLeadSnapshot()}function D2(t,e,s){t.translate=Wt(e.translate,0,s),t.scale=Wt(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function O2(t,e,s,a){t.min=Wt(e.min,s.min,a),t.max=Wt(e.max,s.max,a)}function s7(t,e,s,a){O2(t.x,e.x,s.x,a),O2(t.y,e.y,s.y,a)}function a7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const r7={duration:.45,ease:[.4,0,.1,1]},$2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),L2=$2("applewebkit/")&&!$2("chrome/")?Math.round:ar;function B2(t){t.min=L2(t.min),t.max=L2(t.max)}function n7(t){B2(t.x),B2(t.y)}function vT(t,e,s){return t==="position"||t==="preserve-aspect"&&!iF(T2(e),T2(s),.2)}function o7(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const i7=xT({attachResizeListener:(t,e)=>Cd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ax={current:void 0},bT=xT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ax.current){const t=new i7({});t.mount(window),t.setOptions({layoutScroll:!0}),Ax.current=t}return Ax.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),l7={pan:{Feature:NF},drag:{Feature:jF,ProjectionNode:bT,MeasureLayout:dT}};function I2(t,e,s){const{props:a}=t;t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",s==="Start");const n="onHover"+s,i=a[n];i&&Zt.postRender(()=>i(e,Id(e)))}class c7 extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=$9(e,(s,a)=>(I2(this.node,a,"Start"),n=>I2(this.node,n,"End"))))}unmount(){}}class u7 extends Lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$d(Cd(this.node.current,"focus",()=>this.onFocus()),Cd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function V2(t,e,s){const{props:a}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&a.whileTap&&t.animationState.setActive("whileTap",s==="Start");const n="onTap"+(s==="End"?"":s),i=a[n];i&&Zt.postRender(()=>i(e,Id(e)))}class d7 extends Lo{mount(){const{current:e}=this.node;e&&(this.unmount=V9(e,(s,a)=>(V2(this.node,a,"Start"),(n,{success:i})=>V2(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Bv=new WeakMap,kx=new WeakMap,f7=t=>{const e=Bv.get(t.target);e&&e(t)},h7=t=>{t.forEach(f7)};function m7({root:t,...e}){const s=t||document;kx.has(s)||kx.set(s,{});const a=kx.get(s),n=JSON.stringify(e);return a[n]||(a[n]=new IntersectionObserver(h7,{root:t,...e})),a[n]}function p7(t,e,s){const a=m7(e);return Bv.set(t,s),a.observe(t),()=>{Bv.delete(t),a.unobserve(t)}}const g7={some:0,all:1};class x7 extends Lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:a,amount:n="some",once:i}=e,c={root:s?s.current:void 0,rootMargin:a,threshold:typeof n=="number"?n:g7[n]},u=f=>{const{isIntersecting:h}=f;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),x=h?p:g;x&&x(f)};return p7(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(v7(e,s))&&this.startObserver()}unmount(){}}function v7({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const b7={inView:{Feature:x7},tap:{Feature:d7},focus:{Feature:u7},hover:{Feature:c7}},y7={layout:{ProjectionNode:bT,MeasureLayout:dT}},Iv={current:null},yT={current:!1};function w7(){if(yT.current=!0,!!Pb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Iv.current=t.matches;t.addListener(e),e()}else Iv.current=!1}const _7=new WeakMap;function j7(t,e,s){for(const a in e){const n=e[a],i=s[a];if(ta(n))t.addValue(a,n);else if(ta(i))t.addValue(a,mc(n,{owner:t}));else if(i!==n)if(t.hasValue(a)){const c=t.getValue(a);c.liveStyle===!0?c.jump(n):c.hasAnimated||c.set(n)}else{const c=t.getStaticValue(a);t.addValue(a,mc(c!==void 0?c:n,{owner:t}))}}for(const a in s)e[a]===void 0&&t.removeValue(a);return e}const q2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class N7{scrapeMotionValuesFromProps(e,s,a){return{}}constructor({parent:e,props:s,presenceContext:a,reducedMotionConfig:n,blockInitialAnimation:i,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=_a.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Zt.render(this.render,!1,!0))};const{latestValues:f,renderState:h}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=s.initial?{...f}:{},this.renderState=h,this.parent=e,this.props=s,this.presenceContext=a,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=u,this.blockInitialAnimation=!!i,this.isControllingVariants=ap(s),this.isVariantNode=qk(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(s,{},this);for(const x in g){const y=g[x];f[x]!==void 0&&ta(y)&&y.set(f[x],!1)}}mount(e){this.current=e,_7.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),yT.current||w7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ro(this.notifyUpdate),Ro(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const a=Cc.has(e);a&&this.onBindTransform&&this.onBindTransform();const n=s.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Zt.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{n(),i(),c&&c(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pc){const s=pc[e];if(!s)continue;const{isEnabled:a,Feature:n}=s;if(!this.features[e]&&n&&a(this.props)&&(this.features[e]=new n(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):os()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<q2.length;a++){const n=q2[a];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const i="on"+n,c=e[i];c&&(this.propEventSubscriptions[n]=this.on(n,c))}this.prevMotionValues=j7(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const a=this.values.get(e);s!==a&&(a&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let a=this.values.get(e);return a===void 0&&s!==void 0&&(a=mc(s===null?void 0:s,{owner:this}),this.addValue(e,a)),a}readValue(e,s){let a=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return a!=null&&(typeof a=="string"&&(YA(a)||WA(a))?a=parseFloat(a):!z9(a)&&Mo.test(s)&&(a=Rk(e,s)),this.setBaseTarget(e,ta(a)?a.get():a)),ta(a)?a.get():a}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var i;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const c=cy(this.props,s,(i=this.presenceContext)==null?void 0:i.custom);c&&(a=c[e])}if(s&&a!==void 0)return a;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!ta(n)?n:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Bb),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class wT extends N7{constructor(){super(...arguments),this.KeyframeResolver=R9}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:a}){delete s[e],delete a[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ta(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function _T(t,{style:e,vars:s},a,n){Object.assign(t.style,e,n&&n.getProjectionStyles(a));for(const i in s)t.style.setProperty(i,s[i])}function S7(t){return window.getComputedStyle(t)}class E7 extends wT{constructor(){super(...arguments),this.type="html",this.renderInstance=_T}readValueFromInstance(e,s){var a;if(Cc.has(s))return(a=this.projection)!=null&&a.isProjecting?Ev(s):WU(e,s);{const n=S7(e),i=(qb(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return iT(e,s)}build(e,s,a){oy(e,s,a.transformTemplate)}scrapeMotionValuesFromProps(e,s,a){return uy(e,s,a)}}const jT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function C7(t,e,s,a){_T(t,e,void 0,a);for(const n in e.attrs)t.setAttribute(jT.has(n)?n:ny(n),e.attrs[n])}class A7 extends wT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=os}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Cc.has(s)){const a=Tk(s);return a&&a.default||0}return s=jT.has(s)?s:ny(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,a){return Zk(e,s,a)}build(e,s,a){Xk(e,s,this.isSVGTag,a.transformTemplate,a.style)}renderInstance(e,s,a,n){C7(e,s,a,n)}mount(e){this.isSVGTag=Kk(e.tagName),super.mount(e)}}const k7=(t,e)=>ly(t)?new A7(e):new E7(e,{allowProjection:t!==b.Fragment}),T7=Cz({...Jz,...b7,...l7,...y7},k7),Ts=Q9(T7);function R7({children:t,className:e,...s}){return r.jsx(Ts.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:Ie("relative overflow-hidden rounded-2xl border bg-card p-8 shadow-xl",'before:absolute before:-left-80 before:-top-80 before:h-[500px] before:w-[500px] before:rounded-full before:bg-primary/20 before:blur-3xl before:content-[""]','after:absolute after:-right-80 after:-top-80 after:h-[500px] after:w-[500px] after:rounded-full after:bg-secondary/20 after:blur-3xl after:content-[""]',e),...s,children:t})}const NT=Yt("/_public/auth")({component:M7,validateSearch:t=>({auth:t.auth||""})});function M7(){const[t,e]=b.useState(!0),{signInWithEmail:s,signUpWithEmail:a,loading:n,isAuthenticated:i}=zs(),c=Rt(),{auth:u}=NT.useSearch();b.useEffect(()=>{i&&c({to:u||"/game"})},[i,u,c]);const f=async p=>{try{const g=await s(p);g.success||me.error("Erro ao fazer login",{description:g.error||"Ocorreu um erro inesperado"})}catch(g){me.error("Erro ao fazer login",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}},h=async p=>{try{const g={email:p.email,password:p.password,username:p.email.split("@")[0]},x=await a(g);x.success?(me.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):x.error&&x.error.includes("Email rate limit")?(me.success("Conta criada com sucesso",{description:"Por favor, verifique seu e-mail para confirmar sua conta."}),c({to:"/auth/verify-email",search:{auth:"true"}})):me.error("Erro ao criar conta",{description:x.error||"Ocorreu um erro inesperado"})}catch(g){me.error("Erro ao criar conta",{description:g instanceof Error?g.message:"Ocorreu um erro inesperado"})}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-background via-background/95 to-background/90 transition-colors duration-300",children:r.jsx(R7,{className:"w-full max-w-md",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:t?"Login":"Criar Conta"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:t?"Entre com suas credenciais para acessar o sistema":"Preencha os dados abaixo para criar sua conta"})]}),t?r.jsx(Gq,{onSubmit:f,isLoading:n.signIn}):r.jsx(Xq,{onSubmit:h,isLoading:n.signUp}),r.jsx(fe,{type:"button",variant:"ghost",className:"w-full",onClick:()=>e(!t),disabled:n.signIn||n.signUp,children:t?"No tem uma conta? Criar conta":"J tem uma conta? Fazer login"})]})})})}class P7{async getUserProfile(){try{const{data:{user:e},error:s}=await we.auth.getUser();if(s)throw s;if(!e)return{data:null,error:"Usurio no autenticado"};const{data:a,error:n}=await we.from("users").select("*").eq("uid",e.id).maybeSingle();if(n)throw n;return{data:a,error:null}}catch(e){return console.error("Erro ao buscar perfil:",e),{data:null,error:e instanceof Error?e.message:"Erro ao buscar perfil"}}}async searchUsers(e){try{let s=we.from("users").select("id",{count:"exact"});e.nome&&(s=s.ilike("nome",`%${e.nome}%`)),e.email&&(s=s.ilike("email",`%${e.email}%`)),e.role&&(s=s.eq("role",e.role)),e.ativo!==void 0&&(s=s.eq("ativo",e.ativo));const{count:a,error:n}=await s;if(n)throw n;let i=we.from("users").select("*").order("created_at",{ascending:!1});e.nome&&(i=i.ilike("nome",`%${e.nome}%`)),e.email&&(i=i.ilike("email",`%${e.email}%`)),e.role&&(i=i.eq("role",e.role)),e.ativo!==void 0&&(i=i.eq("ativo",e.ativo));const{data:c,error:u}=await i.range((e.page-1)*e.limit,e.page*e.limit-1);if(u)throw u;return{data:c,count:a||0,error:null}}catch(s){return console.error("Erro ao buscar usurios:",s),{data:null,count:0,error:s instanceof Error?s.message:"Erro ao buscar usurios"}}}async updateUser(e,s){try{let a;if(s.imagemPerfil){const i=s.imagemPerfil.name.split(".").pop(),c=`${e}-${Date.now()}.${i}`,{error:u}=await we.storage.from("profile-images").upload(c,s.imagemPerfil,{cacheControl:"3600",upsert:!0});if(u)throw u;const{data:{publicUrl:f}}=we.storage.from("profile-images").getPublicUrl(c);a=f,delete s.imagemPerfil}const{error:n}=await we.from("users").update({...s,...a&&{imagem_perfil_url:a},updated_at:new Date().toISOString()}).eq("uid",e);if(n)throw n;return{error:null}}catch(a){return console.error("Erro ao atualizar usurio:",a),{error:a instanceof Error?a.message:"Erro ao atualizar usurio"}}}}const rc=new P7;function D7(){const[t,e]=b.useState(!1),[s,a]=b.useState(null),[n,i]=b.useState(null),[c,u]=b.useState([]),f=b.useCallback(async()=>{try{e(!0),a(null);const{data:p,error:g}=await rc.getUserProfile();if(g)throw new Error(g);return p&&i(p),p}catch(p){const g=p instanceof Error?p.message:"Erro ao buscar perfil";return a(g),null}finally{e(!1)}},[]),h=b.useCallback(async p=>{try{e(!0),a(null);const{data:g,error:x}=await rc.searchUsers(p);if(x)throw new Error(x);g&&u(g)}catch(g){const x=g instanceof Error?g.message:"Erro ao buscar usurios";a(x)}finally{e(!1)}},[]);return{user:n,users:c,loading:t,error:s,getUserProfile:f,searchUsers:h}}const rp=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:Ie("w-full caption-bottom text-sm",t),...e})}));rp.displayName="Table";const np=b.forwardRef(({className:t,...e},s)=>r.jsx("thead",{ref:s,className:Ie("[&_tr]:border-b",t),...e}));np.displayName="TableHeader";const op=b.forwardRef(({className:t,...e},s)=>r.jsx("tbody",{ref:s,className:Ie("[&_tr:last-child]:border-0",t),...e}));op.displayName="TableBody";const O7=b.forwardRef(({className:t,...e},s)=>r.jsx("tfoot",{ref:s,className:Ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));O7.displayName="TableFooter";const Vr=b.forwardRef(({className:t,...e},s)=>r.jsx("tr",{ref:s,className:Ie("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Vr.displayName="TableRow";const la=b.forwardRef(({className:t,...e},s)=>r.jsx("th",{ref:s,className:Ie("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));la.displayName="TableHead";const Rs=b.forwardRef(({className:t,...e},s)=>r.jsx("td",{ref:s,className:Ie("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));Rs.displayName="TableCell";const $7=b.forwardRef(({className:t,...e},s)=>r.jsx("caption",{ref:s,className:Ie("mt-4 text-sm text-muted-foreground",t),...e}));$7.displayName="TableCaption";function Vv(t,[e,s]){return Math.min(s,Math.max(e,t))}function ST(t){const e=t+"CollectionProvider",[s,a]=nr(e),[n,i]=s(e,{collectionRef:{current:null},itemMap:new Map}),c=j=>{const{scope:N,children:S}=j,C=he.useRef(null),E=he.useRef(new Map).current;return r.jsx(n,{scope:N,itemMap:E,collectionRef:C,children:S})};c.displayName=e;const u=t+"CollectionSlot",f=Ci(u),h=he.forwardRef((j,N)=>{const{scope:S,children:C}=j,E=i(u,S),M=wt(N,E.collectionRef);return r.jsx(f,{ref:M,children:C})});h.displayName=u;const p=t+"CollectionItemSlot",g="data-radix-collection-item",x=Ci(p),y=he.forwardRef((j,N)=>{const{scope:S,children:C,...E}=j,M=he.useRef(null),R=wt(N,M),P=i(p,S);return he.useEffect(()=>(P.itemMap.set(M,{ref:M,...E}),()=>void P.itemMap.delete(M))),r.jsx(x,{[g]:"",ref:R,children:C})});y.displayName=p;function _(j){const N=i(t+"CollectionConsumer",j);return he.useCallback(()=>{const C=N.collectionRef.current;if(!C)return[];const E=Array.from(C.querySelectorAll(`[${g}]`));return Array.from(N.itemMap.values()).sort((P,$)=>E.indexOf(P.ref.current)-E.indexOf($.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:h,ItemSlot:y},_,a]}var L7=b.createContext(void 0);function ip(t){const e=b.useContext(L7);return t||e||"ltr"}const B7=["top","right","bottom","left"],Po=Math.min,Pa=Math.max,bm=Math.round,Nh=Math.floor,Yr=t=>({x:t,y:t}),I7={left:"right",right:"left",bottom:"top",top:"bottom"},V7={start:"end",end:"start"};function qv(t,e,s){return Pa(t,Po(e,s))}function kn(t,e){return typeof t=="function"?t(e):t}function Tn(t){return t.split("-")[0]}function Ac(t){return t.split("-")[1]}function fy(t){return t==="x"?"y":"x"}function hy(t){return t==="y"?"height":"width"}function qr(t){return["top","bottom"].includes(Tn(t))?"y":"x"}function my(t){return fy(qr(t))}function q7(t,e,s){s===void 0&&(s=!1);const a=Ac(t),n=my(t),i=hy(n);let c=n==="x"?a===(s?"end":"start")?"right":"left":a==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(c=ym(c)),[c,ym(c)]}function U7(t){const e=ym(t);return[Uv(t),e,Uv(e)]}function Uv(t){return t.replace(/start|end/g,e=>V7[e])}function z7(t,e,s){const a=["left","right"],n=["right","left"],i=["top","bottom"],c=["bottom","top"];switch(t){case"top":case"bottom":return s?e?n:a:e?a:n;case"left":case"right":return e?i:c;default:return[]}}function F7(t,e,s,a){const n=Ac(t);let i=z7(Tn(t),s==="start",a);return n&&(i=i.map(c=>c+"-"+n),e&&(i=i.concat(i.map(Uv)))),i}function ym(t){return t.replace(/left|right|bottom|top/g,e=>I7[e])}function H7(t){return{top:0,right:0,bottom:0,left:0,...t}}function ET(t){return typeof t!="number"?H7(t):{top:t,right:t,bottom:t,left:t}}function wm(t){const{x:e,y:s,width:a,height:n}=t;return{width:a,height:n,top:s,left:e,right:e+a,bottom:s+n,x:e,y:s}}function U2(t,e,s){let{reference:a,floating:n}=t;const i=qr(e),c=my(e),u=hy(c),f=Tn(e),h=i==="y",p=a.x+a.width/2-n.width/2,g=a.y+a.height/2-n.height/2,x=a[u]/2-n[u]/2;let y;switch(f){case"top":y={x:p,y:a.y-n.height};break;case"bottom":y={x:p,y:a.y+a.height};break;case"right":y={x:a.x+a.width,y:g};break;case"left":y={x:a.x-n.width,y:g};break;default:y={x:a.x,y:a.y}}switch(Ac(e)){case"start":y[c]-=x*(s&&h?-1:1);break;case"end":y[c]+=x*(s&&h?-1:1);break}return y}const G7=async(t,e,s)=>{const{placement:a="bottom",strategy:n="absolute",middleware:i=[],platform:c}=s,u=i.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(e));let h=await c.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:g}=U2(h,a,f),x=a,y={},_=0;for(let j=0;j<u.length;j++){const{name:N,fn:S}=u[j],{x:C,y:E,data:M,reset:R}=await S({x:p,y:g,initialPlacement:a,placement:x,strategy:n,middlewareData:y,rects:h,platform:c,elements:{reference:t,floating:e}});p=C??p,g=E??g,y={...y,[N]:{...y[N],...M}},R&&_<=50&&(_++,typeof R=="object"&&(R.placement&&(x=R.placement),R.rects&&(h=R.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:n}):R.rects),{x:p,y:g}=U2(h,x,f)),j=-1)}return{x:p,y:g,placement:x,strategy:n,middlewareData:y}};async function Ad(t,e){var s;e===void 0&&(e={});const{x:a,y:n,platform:i,rects:c,elements:u,strategy:f}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:g="floating",altBoundary:x=!1,padding:y=0}=kn(e,t),_=ET(y),N=u[x?g==="floating"?"reference":"floating":g],S=wm(await i.getClippingRect({element:(s=await(i.isElement==null?void 0:i.isElement(N)))==null||s?N:N.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:h,rootBoundary:p,strategy:f})),C=g==="floating"?{x:a,y:n,width:c.floating.width,height:c.floating.height}:c.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),M=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},R=wm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:E,strategy:f}):C);return{top:(S.top-R.top+_.top)/M.y,bottom:(R.bottom-S.bottom+_.bottom)/M.y,left:(S.left-R.left+_.left)/M.x,right:(R.right-S.right+_.right)/M.x}}const X7=t=>({name:"arrow",options:t,async fn(e){const{x:s,y:a,placement:n,rects:i,platform:c,elements:u,middlewareData:f}=e,{element:h,padding:p=0}=kn(t,e)||{};if(h==null)return{};const g=ET(p),x={x:s,y:a},y=my(n),_=hy(y),j=await c.getDimensions(h),N=y==="y",S=N?"top":"left",C=N?"bottom":"right",E=N?"clientHeight":"clientWidth",M=i.reference[_]+i.reference[y]-x[y]-i.floating[_],R=x[y]-i.reference[y],P=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let $=P?P[E]:0;(!$||!await(c.isElement==null?void 0:c.isElement(P)))&&($=u.floating[E]||i.floating[_]);const k=M/2-R/2,O=$/2-j[_]/2-1,H=Po(g[S],O),Y=Po(g[C],O),I=H,z=$-j[_]-Y,ee=$/2-j[_]/2+k,G=qv(I,ee,z),A=!f.arrow&&Ac(n)!=null&&ee!==G&&i.reference[_]/2-(ee<I?H:Y)-j[_]/2<0,B=A?ee<I?ee-I:ee-z:0;return{[y]:x[y]+B,data:{[y]:G,centerOffset:ee-G-B,...A&&{alignmentOffset:B}},reset:A}}}),Y7=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var s,a;const{placement:n,middlewareData:i,rects:c,initialPlacement:u,platform:f,elements:h}=e,{mainAxis:p=!0,crossAxis:g=!0,fallbackPlacements:x,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:j=!0,...N}=kn(t,e);if((s=i.arrow)!=null&&s.alignmentOffset)return{};const S=Tn(n),C=qr(u),E=Tn(u)===u,M=await(f.isRTL==null?void 0:f.isRTL(h.floating)),R=x||(E||!j?[ym(u)]:U7(u)),P=_!=="none";!x&&P&&R.push(...F7(u,j,_,M));const $=[u,...R],k=await Ad(e,N),O=[];let H=((a=i.flip)==null?void 0:a.overflows)||[];if(p&&O.push(k[S]),g){const ee=q7(n,c,M);O.push(k[ee[0]],k[ee[1]])}if(H=[...H,{placement:n,overflows:O}],!O.every(ee=>ee<=0)){var Y,I;const ee=(((Y=i.flip)==null?void 0:Y.index)||0)+1,G=$[ee];if(G&&(!(g==="alignment"?C!==qr(G):!1)||H.every(V=>V.overflows[0]>0&&qr(V.placement)===C)))return{data:{index:ee,overflows:H},reset:{placement:G}};let A=(I=H.filter(B=>B.overflows[0]<=0).sort((B,V)=>B.overflows[1]-V.overflows[1])[0])==null?void 0:I.placement;if(!A)switch(y){case"bestFit":{var z;const B=(z=H.filter(V=>{if(P){const W=qr(V.placement);return W===C||W==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(W=>W>0).reduce((W,L)=>W+L,0)]).sort((V,W)=>V[1]-W[1])[0])==null?void 0:z[0];B&&(A=B);break}case"initialPlacement":A=u;break}if(n!==A)return{reset:{placement:A}}}return{}}}};function z2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function F2(t){return B7.some(e=>t[e]>=0)}const K7=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:s}=e,{strategy:a="referenceHidden",...n}=kn(t,e);switch(a){case"referenceHidden":{const i=await Ad(e,{...n,elementContext:"reference"}),c=z2(i,s.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:F2(c)}}}case"escaped":{const i=await Ad(e,{...n,altBoundary:!0}),c=z2(i,s.floating);return{data:{escapedOffsets:c,escaped:F2(c)}}}default:return{}}}}};async function W7(t,e){const{placement:s,platform:a,elements:n}=t,i=await(a.isRTL==null?void 0:a.isRTL(n.floating)),c=Tn(s),u=Ac(s),f=qr(s)==="y",h=["left","top"].includes(c)?-1:1,p=i&&f?-1:1,g=kn(e,t);let{mainAxis:x,crossAxis:y,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof _=="number"&&(y=u==="end"?_*-1:_),f?{x:y*p,y:x*h}:{x:x*h,y:y*p}}const Z7=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var s,a;const{x:n,y:i,placement:c,middlewareData:u}=e,f=await W7(e,t);return c===((s=u.offset)==null?void 0:s.placement)&&(a=u.arrow)!=null&&a.alignmentOffset?{}:{x:n+f.x,y:i+f.y,data:{...f,placement:c}}}}},Q7=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:s,y:a,placement:n}=e,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:N=>{let{x:S,y:C}=N;return{x:S,y:C}}},...f}=kn(t,e),h={x:s,y:a},p=await Ad(e,f),g=qr(Tn(n)),x=fy(g);let y=h[x],_=h[g];if(i){const N=x==="y"?"top":"left",S=x==="y"?"bottom":"right",C=y+p[N],E=y-p[S];y=qv(C,y,E)}if(c){const N=g==="y"?"top":"left",S=g==="y"?"bottom":"right",C=_+p[N],E=_-p[S];_=qv(C,_,E)}const j=u.fn({...e,[x]:y,[g]:_});return{...j,data:{x:j.x-s,y:j.y-a,enabled:{[x]:i,[g]:c}}}}}},J7=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:s,y:a,placement:n,rects:i,middlewareData:c}=e,{offset:u=0,mainAxis:f=!0,crossAxis:h=!0}=kn(t,e),p={x:s,y:a},g=qr(n),x=fy(g);let y=p[x],_=p[g];const j=kn(u,e),N=typeof j=="number"?{mainAxis:j,crossAxis:0}:{mainAxis:0,crossAxis:0,...j};if(f){const E=x==="y"?"height":"width",M=i.reference[x]-i.floating[E]+N.mainAxis,R=i.reference[x]+i.reference[E]-N.mainAxis;y<M?y=M:y>R&&(y=R)}if(h){var S,C;const E=x==="y"?"width":"height",M=["top","left"].includes(Tn(n)),R=i.reference[g]-i.floating[E]+(M&&((S=c.offset)==null?void 0:S[g])||0)+(M?0:N.crossAxis),P=i.reference[g]+i.reference[E]+(M?0:((C=c.offset)==null?void 0:C[g])||0)-(M?N.crossAxis:0);_<R?_=R:_>P&&(_=P)}return{[x]:y,[g]:_}}}},eH=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var s,a;const{placement:n,rects:i,platform:c,elements:u}=e,{apply:f=()=>{},...h}=kn(t,e),p=await Ad(e,h),g=Tn(n),x=Ac(n),y=qr(n)==="y",{width:_,height:j}=i.floating;let N,S;g==="top"||g==="bottom"?(N=g,S=x===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(S=g,N=x==="end"?"top":"bottom");const C=j-p.top-p.bottom,E=_-p.left-p.right,M=Po(j-p[N],C),R=Po(_-p[S],E),P=!e.middlewareData.shift;let $=M,k=R;if((s=e.middlewareData.shift)!=null&&s.enabled.x&&(k=E),(a=e.middlewareData.shift)!=null&&a.enabled.y&&($=C),P&&!x){const H=Pa(p.left,0),Y=Pa(p.right,0),I=Pa(p.top,0),z=Pa(p.bottom,0);y?k=_-2*(H!==0||Y!==0?H+Y:Pa(p.left,p.right)):$=j-2*(I!==0||z!==0?I+z:Pa(p.top,p.bottom))}await f({...e,availableWidth:k,availableHeight:$});const O=await c.getDimensions(u.floating);return _!==O.width||j!==O.height?{reset:{rects:!0}}:{}}}};function lp(){return typeof window<"u"}function kc(t){return CT(t)?(t.nodeName||"").toLowerCase():"#document"}function Da(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(t){var e;return(e=(CT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function CT(t){return lp()?t instanceof Node||t instanceof Da(t).Node:!1}function Er(t){return lp()?t instanceof Element||t instanceof Da(t).Element:!1}function Wr(t){return lp()?t instanceof HTMLElement||t instanceof Da(t).HTMLElement:!1}function H2(t){return!lp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Da(t).ShadowRoot}function Vd(t){const{overflow:e,overflowX:s,overflowY:a,display:n}=Cr(t);return/auto|scroll|overlay|hidden|clip/.test(e+a+s)&&!["inline","contents"].includes(n)}function tH(t){return["table","td","th"].includes(kc(t))}function cp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function py(t){const e=gy(),s=Er(t)?Cr(t):t;return["transform","translate","scale","rotate","perspective"].some(a=>s[a]?s[a]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!e&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!e&&(s.filter?s.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(a=>(s.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(s.contain||"").includes(a))}function sH(t){let e=Do(t);for(;Wr(e)&&!gc(e);){if(py(e))return e;if(cp(e))return null;e=Do(e)}return null}function gy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gc(t){return["html","body","#document"].includes(kc(t))}function Cr(t){return Da(t).getComputedStyle(t)}function up(t){return Er(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Do(t){if(kc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||H2(t)&&t.host||Jr(t);return H2(e)?e.host:e}function AT(t){const e=Do(t);return gc(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wr(e)&&Vd(e)?e:AT(e)}function kd(t,e,s){var a;e===void 0&&(e=[]),s===void 0&&(s=!0);const n=AT(t),i=n===((a=t.ownerDocument)==null?void 0:a.body),c=Da(n);if(i){const u=zv(c);return e.concat(c,c.visualViewport||[],Vd(n)?n:[],u&&s?kd(u):[])}return e.concat(n,kd(n,[],s))}function zv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kT(t){const e=Cr(t);let s=parseFloat(e.width)||0,a=parseFloat(e.height)||0;const n=Wr(t),i=n?t.offsetWidth:s,c=n?t.offsetHeight:a,u=bm(s)!==i||bm(a)!==c;return u&&(s=i,a=c),{width:s,height:a,$:u}}function xy(t){return Er(t)?t:t.contextElement}function nc(t){const e=xy(t);if(!Wr(e))return Yr(1);const s=e.getBoundingClientRect(),{width:a,height:n,$:i}=kT(e);let c=(i?bm(s.width):s.width)/a,u=(i?bm(s.height):s.height)/n;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const aH=Yr(0);function TT(t){const e=Da(t);return!gy()||!e.visualViewport?aH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function rH(t,e,s){return e===void 0&&(e=!1),!s||e&&s!==Da(t)?!1:e}function ki(t,e,s,a){e===void 0&&(e=!1),s===void 0&&(s=!1);const n=t.getBoundingClientRect(),i=xy(t);let c=Yr(1);e&&(a?Er(a)&&(c=nc(a)):c=nc(t));const u=rH(i,s,a)?TT(i):Yr(0);let f=(n.left+u.x)/c.x,h=(n.top+u.y)/c.y,p=n.width/c.x,g=n.height/c.y;if(i){const x=Da(i),y=a&&Er(a)?Da(a):a;let _=x,j=zv(_);for(;j&&a&&y!==_;){const N=nc(j),S=j.getBoundingClientRect(),C=Cr(j),E=S.left+(j.clientLeft+parseFloat(C.paddingLeft))*N.x,M=S.top+(j.clientTop+parseFloat(C.paddingTop))*N.y;f*=N.x,h*=N.y,p*=N.x,g*=N.y,f+=E,h+=M,_=Da(j),j=zv(_)}}return wm({width:p,height:g,x:f,y:h})}function vy(t,e){const s=up(t).scrollLeft;return e?e.left+s:ki(Jr(t)).left+s}function RT(t,e,s){s===void 0&&(s=!1);const a=t.getBoundingClientRect(),n=a.left+e.scrollLeft-(s?0:vy(t,a)),i=a.top+e.scrollTop;return{x:n,y:i}}function nH(t){let{elements:e,rect:s,offsetParent:a,strategy:n}=t;const i=n==="fixed",c=Jr(a),u=e?cp(e.floating):!1;if(a===c||u&&i)return s;let f={scrollLeft:0,scrollTop:0},h=Yr(1);const p=Yr(0),g=Wr(a);if((g||!g&&!i)&&((kc(a)!=="body"||Vd(c))&&(f=up(a)),Wr(a))){const y=ki(a);h=nc(a),p.x=y.x+a.clientLeft,p.y=y.y+a.clientTop}const x=c&&!g&&!i?RT(c,f,!0):Yr(0);return{width:s.width*h.x,height:s.height*h.y,x:s.x*h.x-f.scrollLeft*h.x+p.x+x.x,y:s.y*h.y-f.scrollTop*h.y+p.y+x.y}}function oH(t){return Array.from(t.getClientRects())}function iH(t){const e=Jr(t),s=up(t),a=t.ownerDocument.body,n=Pa(e.scrollWidth,e.clientWidth,a.scrollWidth,a.clientWidth),i=Pa(e.scrollHeight,e.clientHeight,a.scrollHeight,a.clientHeight);let c=-s.scrollLeft+vy(t);const u=-s.scrollTop;return Cr(a).direction==="rtl"&&(c+=Pa(e.clientWidth,a.clientWidth)-n),{width:n,height:i,x:c,y:u}}function lH(t,e){const s=Da(t),a=Jr(t),n=s.visualViewport;let i=a.clientWidth,c=a.clientHeight,u=0,f=0;if(n){i=n.width,c=n.height;const h=gy();(!h||h&&e==="fixed")&&(u=n.offsetLeft,f=n.offsetTop)}return{width:i,height:c,x:u,y:f}}function cH(t,e){const s=ki(t,!0,e==="fixed"),a=s.top+t.clientTop,n=s.left+t.clientLeft,i=Wr(t)?nc(t):Yr(1),c=t.clientWidth*i.x,u=t.clientHeight*i.y,f=n*i.x,h=a*i.y;return{width:c,height:u,x:f,y:h}}function G2(t,e,s){let a;if(e==="viewport")a=lH(t,s);else if(e==="document")a=iH(Jr(t));else if(Er(e))a=cH(e,s);else{const n=TT(t);a={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return wm(a)}function MT(t,e){const s=Do(t);return s===e||!Er(s)||gc(s)?!1:Cr(s).position==="fixed"||MT(s,e)}function uH(t,e){const s=e.get(t);if(s)return s;let a=kd(t,[],!1).filter(u=>Er(u)&&kc(u)!=="body"),n=null;const i=Cr(t).position==="fixed";let c=i?Do(t):t;for(;Er(c)&&!gc(c);){const u=Cr(c),f=py(c);!f&&u.position==="fixed"&&(n=null),(i?!f&&!n:!f&&u.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||Vd(c)&&!f&&MT(t,c))?a=a.filter(p=>p!==c):n=u,c=Do(c)}return e.set(t,a),a}function dH(t){let{element:e,boundary:s,rootBoundary:a,strategy:n}=t;const c=[...s==="clippingAncestors"?cp(e)?[]:uH(e,this._c):[].concat(s),a],u=c[0],f=c.reduce((h,p)=>{const g=G2(e,p,n);return h.top=Pa(g.top,h.top),h.right=Po(g.right,h.right),h.bottom=Po(g.bottom,h.bottom),h.left=Pa(g.left,h.left),h},G2(e,u,n));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}}function fH(t){const{width:e,height:s}=kT(t);return{width:e,height:s}}function hH(t,e,s){const a=Wr(e),n=Jr(e),i=s==="fixed",c=ki(t,!0,i,e);let u={scrollLeft:0,scrollTop:0};const f=Yr(0);function h(){f.x=vy(n)}if(a||!a&&!i)if((kc(e)!=="body"||Vd(n))&&(u=up(e)),a){const y=ki(e,!0,i,e);f.x=y.x+e.clientLeft,f.y=y.y+e.clientTop}else n&&h();i&&!a&&n&&h();const p=n&&!a&&!i?RT(n,u):Yr(0),g=c.left+u.scrollLeft-f.x-p.x,x=c.top+u.scrollTop-f.y-p.y;return{x:g,y:x,width:c.width,height:c.height}}function Tx(t){return Cr(t).position==="static"}function X2(t,e){if(!Wr(t)||Cr(t).position==="fixed")return null;if(e)return e(t);let s=t.offsetParent;return Jr(t)===s&&(s=s.ownerDocument.body),s}function PT(t,e){const s=Da(t);if(cp(t))return s;if(!Wr(t)){let n=Do(t);for(;n&&!gc(n);){if(Er(n)&&!Tx(n))return n;n=Do(n)}return s}let a=X2(t,e);for(;a&&tH(a)&&Tx(a);)a=X2(a,e);return a&&gc(a)&&Tx(a)&&!py(a)?s:a||sH(t)||s}const mH=async function(t){const e=this.getOffsetParent||PT,s=this.getDimensions,a=await s(t.floating);return{reference:hH(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function pH(t){return Cr(t).direction==="rtl"}const gH={convertOffsetParentRelativeRectToViewportRelativeRect:nH,getDocumentElement:Jr,getClippingRect:dH,getOffsetParent:PT,getElementRects:mH,getClientRects:oH,getDimensions:fH,getScale:nc,isElement:Er,isRTL:pH};function DT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function xH(t,e){let s=null,a;const n=Jr(t);function i(){var u;clearTimeout(a),(u=s)==null||u.disconnect(),s=null}function c(u,f){u===void 0&&(u=!1),f===void 0&&(f=1),i();const h=t.getBoundingClientRect(),{left:p,top:g,width:x,height:y}=h;if(u||e(),!x||!y)return;const _=Nh(g),j=Nh(n.clientWidth-(p+x)),N=Nh(n.clientHeight-(g+y)),S=Nh(p),E={rootMargin:-_+"px "+-j+"px "+-N+"px "+-S+"px",threshold:Pa(0,Po(1,f))||1};let M=!0;function R(P){const $=P[0].intersectionRatio;if($!==f){if(!M)return c();$?c(!1,$):a=setTimeout(()=>{c(!1,1e-7)},1e3)}$===1&&!DT(h,t.getBoundingClientRect())&&c(),M=!1}try{s=new IntersectionObserver(R,{...E,root:n.ownerDocument})}catch{s=new IntersectionObserver(R,E)}s.observe(t)}return c(!0),i}function vH(t,e,s,a){a===void 0&&(a={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:f=!1}=a,h=xy(t),p=n||i?[...h?kd(h):[],...kd(e)]:[];p.forEach(S=>{n&&S.addEventListener("scroll",s,{passive:!0}),i&&S.addEventListener("resize",s)});const g=h&&u?xH(h,s):null;let x=-1,y=null;c&&(y=new ResizeObserver(S=>{let[C]=S;C&&C.target===h&&y&&(y.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(e)})),s()}),h&&!f&&y.observe(h),y.observe(e));let _,j=f?ki(t):null;f&&N();function N(){const S=ki(t);j&&!DT(j,S)&&s(),j=S,_=requestAnimationFrame(N)}return s(),()=>{var S;p.forEach(C=>{n&&C.removeEventListener("scroll",s),i&&C.removeEventListener("resize",s)}),g==null||g(),(S=y)==null||S.disconnect(),y=null,f&&cancelAnimationFrame(_)}}const bH=Z7,yH=Q7,wH=Y7,_H=eH,jH=K7,Y2=X7,NH=J7,SH=(t,e,s)=>{const a=new Map,n={platform:gH,...s},i={...n.platform,_c:a};return G7(t,e,{...n,platform:i})};var EH=typeof document<"u",CH=function(){},Vh=EH?b.useLayoutEffect:CH;function _m(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let s,a,n;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==e.length)return!1;for(a=s;a--!==0;)if(!_m(t[a],e[a]))return!1;return!0}if(n=Object.keys(t),s=n.length,s!==Object.keys(e).length)return!1;for(a=s;a--!==0;)if(!{}.hasOwnProperty.call(e,n[a]))return!1;for(a=s;a--!==0;){const i=n[a];if(!(i==="_owner"&&t.$$typeof)&&!_m(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function OT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function K2(t,e){const s=OT(t);return Math.round(e*s)/s}function Rx(t){const e=b.useRef(t);return Vh(()=>{e.current=t}),e}function AH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:s="absolute",middleware:a=[],platform:n,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:f,open:h}=t,[p,g]=b.useState({x:0,y:0,strategy:s,placement:e,middlewareData:{},isPositioned:!1}),[x,y]=b.useState(a);_m(x,a)||y(a);const[_,j]=b.useState(null),[N,S]=b.useState(null),C=b.useCallback(V=>{V!==P.current&&(P.current=V,j(V))},[]),E=b.useCallback(V=>{V!==$.current&&($.current=V,S(V))},[]),M=i||_,R=c||N,P=b.useRef(null),$=b.useRef(null),k=b.useRef(p),O=f!=null,H=Rx(f),Y=Rx(n),I=Rx(h),z=b.useCallback(()=>{if(!P.current||!$.current)return;const V={placement:e,strategy:s,middleware:x};Y.current&&(V.platform=Y.current),SH(P.current,$.current,V).then(W=>{const L={...W,isPositioned:I.current!==!1};ee.current&&!_m(k.current,L)&&(k.current=L,Mi.flushSync(()=>{g(L)}))})},[x,e,s,Y,I]);Vh(()=>{h===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,g(V=>({...V,isPositioned:!1})))},[h]);const ee=b.useRef(!1);Vh(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Vh(()=>{if(M&&(P.current=M),R&&($.current=R),M&&R){if(H.current)return H.current(M,R,z);z()}},[M,R,z,H,O]);const G=b.useMemo(()=>({reference:P,floating:$,setReference:C,setFloating:E}),[C,E]),A=b.useMemo(()=>({reference:M,floating:R}),[M,R]),B=b.useMemo(()=>{const V={position:s,left:0,top:0};if(!A.floating)return V;const W=K2(A.floating,p.x),L=K2(A.floating,p.y);return u?{...V,transform:"translate("+W+"px, "+L+"px)",...OT(A.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:W,top:L}},[s,u,A.floating,p.x,p.y]);return b.useMemo(()=>({...p,update:z,refs:G,elements:A,floatingStyles:B}),[p,z,G,A,B])}const kH=t=>{function e(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:a,padding:n}=typeof t=="function"?t(s):t;return a&&e(a)?a.current!=null?Y2({element:a.current,padding:n}).fn(s):{}:a?Y2({element:a,padding:n}).fn(s):{}}}},TH=(t,e)=>({...bH(t),options:[t,e]}),RH=(t,e)=>({...yH(t),options:[t,e]}),MH=(t,e)=>({...NH(t),options:[t,e]}),PH=(t,e)=>({...wH(t),options:[t,e]}),DH=(t,e)=>({..._H(t),options:[t,e]}),OH=(t,e)=>({...jH(t),options:[t,e]}),$H=(t,e)=>({...kH(t),options:[t,e]});var LH="Arrow",$T=b.forwardRef((t,e)=>{const{children:s,width:a=10,height:n=5,...i}=t;return r.jsx(Ke.svg,{...i,ref:e,width:a,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});$T.displayName=LH;var BH=$T;function LT(t){const[e,s]=b.useState(void 0);return gs(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const a=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let c,u;if("borderBoxSize"in i){const f=i.borderBoxSize,h=Array.isArray(f)?f[0]:f;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;s({width:c,height:u})});return a.observe(t,{box:"border-box"}),()=>a.unobserve(t)}else s(void 0)},[t]),e}var by="Popper",[BT,Tc]=nr(by),[IH,IT]=BT(by),VT=t=>{const{__scopePopper:e,children:s}=t,[a,n]=b.useState(null);return r.jsx(IH,{scope:e,anchor:a,onAnchorChange:n,children:s})};VT.displayName=by;var qT="PopperAnchor",UT=b.forwardRef((t,e)=>{const{__scopePopper:s,virtualRef:a,...n}=t,i=IT(qT,s),c=b.useRef(null),u=wt(e,c);return b.useEffect(()=>{i.onAnchorChange((a==null?void 0:a.current)||c.current)}),a?null:r.jsx(Ke.div,{...n,ref:u})});UT.displayName=qT;var yy="PopperContent",[VH,qH]=BT(yy),zT=b.forwardRef((t,e)=>{var de,ce,be,Ne,J,ge;const{__scopePopper:s,side:a="bottom",sideOffset:n=0,align:i="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:f=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:g="partial",hideWhenDetached:x=!1,updatePositionStrategy:y="optimized",onPlaced:_,...j}=t,N=IT(yy,s),[S,C]=b.useState(null),E=wt(e,_e=>C(_e)),[M,R]=b.useState(null),P=LT(M),$=(P==null?void 0:P.width)??0,k=(P==null?void 0:P.height)??0,O=a+(i!=="center"?"-"+i:""),H=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},Y=Array.isArray(h)?h:[h],I=Y.length>0,z={padding:H,boundary:Y.filter(zH),altBoundary:I},{refs:ee,floatingStyles:G,placement:A,isPositioned:B,middlewareData:V}=AH({strategy:"fixed",placement:O,whileElementsMounted:(..._e)=>vH(..._e,{animationFrame:y==="always"}),elements:{reference:N.anchor},middleware:[TH({mainAxis:n+k,alignmentAxis:c}),f&&RH({mainAxis:!0,crossAxis:!1,limiter:g==="partial"?MH():void 0,...z}),f&&PH({...z}),DH({...z,apply:({elements:_e,rects:De,availableWidth:Ve,availableHeight:We})=>{const{width:ye,height:Pe}=De.reference,Ae=_e.floating.style;Ae.setProperty("--radix-popper-available-width",`${Ve}px`),Ae.setProperty("--radix-popper-available-height",`${We}px`),Ae.setProperty("--radix-popper-anchor-width",`${ye}px`),Ae.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),M&&$H({element:M,padding:u}),FH({arrowWidth:$,arrowHeight:k}),x&&OH({strategy:"referenceHidden",...z})]}),[W,L]=GT(A),F=Js(_);gs(()=>{B&&(F==null||F())},[B,F]);const ie=(de=V.arrow)==null?void 0:de.x,se=(ce=V.arrow)==null?void 0:ce.y,ue=((be=V.arrow)==null?void 0:be.centerOffset)!==0,[le,re]=b.useState();return gs(()=>{S&&re(window.getComputedStyle(S).zIndex)},[S]),r.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:B?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(Ne=V.transformOrigin)==null?void 0:Ne.x,(J=V.transformOrigin)==null?void 0:J.y].join(" "),...((ge=V.hide)==null?void 0:ge.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:r.jsx(VH,{scope:s,placedSide:W,onArrowChange:R,arrowX:ie,arrowY:se,shouldHideArrow:ue,children:r.jsx(Ke.div,{"data-side":W,"data-align":L,...j,ref:E,style:{...j.style,animation:B?void 0:"none"}})})})});zT.displayName=yy;var FT="PopperArrow",UH={top:"bottom",right:"left",bottom:"top",left:"right"},HT=b.forwardRef(function(e,s){const{__scopePopper:a,...n}=e,i=qH(FT,a),c=UH[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(BH,{...n,ref:s,style:{...n.style,display:"block"}})})});HT.displayName=FT;function zH(t){return t!==null}var FH=t=>({name:"transformOrigin",options:t,fn(e){var N,S,C;const{placement:s,rects:a,middlewareData:n}=e,c=((N=n.arrow)==null?void 0:N.centerOffset)!==0,u=c?0:t.arrowWidth,f=c?0:t.arrowHeight,[h,p]=GT(s),g={start:"0%",center:"50%",end:"100%"}[p],x=(((S=n.arrow)==null?void 0:S.x)??0)+u/2,y=(((C=n.arrow)==null?void 0:C.y)??0)+f/2;let _="",j="";return h==="bottom"?(_=c?g:`${x}px`,j=`${-f}px`):h==="top"?(_=c?g:`${x}px`,j=`${a.floating.height+f}px`):h==="right"?(_=`${-f}px`,j=c?g:`${y}px`):h==="left"&&(_=`${a.floating.width+f}px`,j=c?g:`${y}px`),{data:{x:_,y:j}}}});function GT(t){const[e,s="center"]=t.split("-");return[e,s]}var wy=VT,dp=UT,_y=zT,jy=HT;function XT(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var YT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),HH="VisuallyHidden",Ny=b.forwardRef((t,e)=>r.jsx(Ke.span,{...t,ref:e,style:{...YT,...t.style}}));Ny.displayName=HH;var GH=Ny,XH=[" ","Enter","ArrowUp","ArrowDown"],YH=[" ","Enter"],Ti="Select",[fp,hp,KH]=ST(Ti),[Rc,MW]=nr(Ti,[KH,Tc]),mp=Tc(),[WH,Bo]=Rc(Ti),[ZH,QH]=Rc(Ti),KT=t=>{const{__scopeSelect:e,children:s,open:a,defaultOpen:n,onOpenChange:i,value:c,defaultValue:u,onValueChange:f,dir:h,name:p,autoComplete:g,disabled:x,required:y,form:_}=t,j=mp(e),[N,S]=b.useState(null),[C,E]=b.useState(null),[M,R]=b.useState(!1),P=ip(h),[$,k]=To({prop:a,defaultProp:n??!1,onChange:i,caller:Ti}),[O,H]=To({prop:c,defaultProp:u,onChange:f,caller:Ti}),Y=b.useRef(null),I=N?_||!!N.closest("form"):!0,[z,ee]=b.useState(new Set),G=Array.from(z).map(A=>A.props.value).join(";");return r.jsx(wy,{...j,children:r.jsxs(WH,{required:y,scope:e,trigger:N,onTriggerChange:S,valueNode:C,onValueNodeChange:E,valueNodeHasChildren:M,onValueNodeHasChildrenChange:R,contentId:Fr(),value:O,onValueChange:H,open:$,onOpenChange:k,dir:P,triggerPointerDownPosRef:Y,disabled:x,children:[r.jsx(fp.Provider,{scope:e,children:r.jsx(ZH,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(A=>{ee(B=>new Set(B).add(A))},[]),onNativeOptionRemove:b.useCallback(A=>{ee(B=>{const V=new Set(B);return V.delete(A),V})},[]),children:s})}),I?r.jsxs(b4,{"aria-hidden":!0,required:y,tabIndex:-1,name:p,autoComplete:g,value:O,onChange:A=>H(A.target.value),disabled:x,form:_,children:[O===void 0?r.jsx("option",{value:""}):null,Array.from(z)]},G):null]})})};KT.displayName=Ti;var WT="SelectTrigger",ZT=b.forwardRef((t,e)=>{const{__scopeSelect:s,disabled:a=!1,...n}=t,i=mp(s),c=Bo(WT,s),u=c.disabled||a,f=wt(e,c.onTriggerChange),h=hp(s),p=b.useRef("touch"),[g,x,y]=w4(j=>{const N=h().filter(E=>!E.disabled),S=N.find(E=>E.value===c.value),C=_4(N,j,S);C!==void 0&&c.onValueChange(C.value)}),_=j=>{u||(c.onOpenChange(!0),y()),j&&(c.triggerPointerDownPosRef.current={x:Math.round(j.pageX),y:Math.round(j.pageY)})};return r.jsx(dp,{asChild:!0,...i,children:r.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":y4(c.value)?"":void 0,...n,ref:f,onClick:Ge(n.onClick,j=>{j.currentTarget.focus(),p.current!=="mouse"&&_(j)}),onPointerDown:Ge(n.onPointerDown,j=>{p.current=j.pointerType;const N=j.target;N.hasPointerCapture(j.pointerId)&&N.releasePointerCapture(j.pointerId),j.button===0&&j.ctrlKey===!1&&j.pointerType==="mouse"&&(_(j),j.preventDefault())}),onKeyDown:Ge(n.onKeyDown,j=>{const N=g.current!=="";!(j.ctrlKey||j.altKey||j.metaKey)&&j.key.length===1&&x(j.key),!(N&&j.key===" ")&&XH.includes(j.key)&&(_(),j.preventDefault())})})})});ZT.displayName=WT;var QT="SelectValue",JT=b.forwardRef((t,e)=>{const{__scopeSelect:s,className:a,style:n,children:i,placeholder:c="",...u}=t,f=Bo(QT,s),{onValueNodeHasChildrenChange:h}=f,p=i!==void 0,g=wt(e,f.onValueNodeChange);return gs(()=>{h(p)},[h,p]),r.jsx(Ke.span,{...u,ref:g,style:{pointerEvents:"none"},children:y4(f.value)?r.jsx(r.Fragment,{children:c}):i})});JT.displayName=QT;var JH="SelectIcon",e4=b.forwardRef((t,e)=>{const{__scopeSelect:s,children:a,...n}=t;return r.jsx(Ke.span,{"aria-hidden":!0,...n,ref:e,children:a||""})});e4.displayName=JH;var eG="SelectPortal",t4=t=>r.jsx(Fm,{asChild:!0,...t});t4.displayName=eG;var Ri="SelectContent",s4=b.forwardRef((t,e)=>{const s=Bo(Ri,t.__scopeSelect),[a,n]=b.useState();if(gs(()=>{n(new DocumentFragment)},[]),!s.open){const i=a;return i?Mi.createPortal(r.jsx(a4,{scope:t.__scopeSelect,children:r.jsx(fp.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),i):null}return r.jsx(r4,{...t,ref:e})});s4.displayName=Ri;var mr=10,[a4,Io]=Rc(Ri),tG="SelectContentImpl",sG=Ci("SelectContent.RemoveScroll"),r4=b.forwardRef((t,e)=>{const{__scopeSelect:s,position:a="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:c,side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:y,sticky:_,hideWhenDetached:j,avoidCollisions:N,...S}=t,C=Bo(Ri,s),[E,M]=b.useState(null),[R,P]=b.useState(null),$=wt(e,de=>M(de)),[k,O]=b.useState(null),[H,Y]=b.useState(null),I=hp(s),[z,ee]=b.useState(!1),G=b.useRef(!1);b.useEffect(()=>{if(E)return vb(E)},[E]),xb();const A=b.useCallback(de=>{const[ce,...be]=I().map(ge=>ge.ref.current),[Ne]=be.slice(-1),J=document.activeElement;for(const ge of de)if(ge===J||(ge==null||ge.scrollIntoView({block:"nearest"}),ge===ce&&R&&(R.scrollTop=0),ge===Ne&&R&&(R.scrollTop=R.scrollHeight),ge==null||ge.focus(),document.activeElement!==J))return},[I,R]),B=b.useCallback(()=>A([k,E]),[A,k,E]);b.useEffect(()=>{z&&B()},[z,B]);const{onOpenChange:V,triggerPointerDownPosRef:W}=C;b.useEffect(()=>{if(E){let de={x:0,y:0};const ce=Ne=>{var J,ge;de={x:Math.abs(Math.round(Ne.pageX)-(((J=W.current)==null?void 0:J.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((ge=W.current)==null?void 0:ge.y)??0))}},be=Ne=>{de.x<=10&&de.y<=10?Ne.preventDefault():E.contains(Ne.target)||V(!1),document.removeEventListener("pointermove",ce),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",be,{capture:!0})}}},[E,V,W]),b.useEffect(()=>{const de=()=>V(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[V]);const[L,F]=w4(de=>{const ce=I().filter(J=>!J.disabled),be=ce.find(J=>J.ref.current===document.activeElement),Ne=_4(ce,de,be);Ne&&setTimeout(()=>Ne.ref.current.focus())}),ie=b.useCallback((de,ce,be)=>{const Ne=!G.current&&!be;(C.value!==void 0&&C.value===ce||Ne)&&(O(de),Ne&&(G.current=!0))},[C.value]),se=b.useCallback(()=>E==null?void 0:E.focus(),[E]),ue=b.useCallback((de,ce,be)=>{const Ne=!G.current&&!be;(C.value!==void 0&&C.value===ce||Ne)&&Y(de)},[C.value]),le=a==="popper"?Fv:n4,re=le===Fv?{side:u,sideOffset:f,align:h,alignOffset:p,arrowPadding:g,collisionBoundary:x,collisionPadding:y,sticky:_,hideWhenDetached:j,avoidCollisions:N}:{};return r.jsx(a4,{scope:s,content:E,viewport:R,onViewportChange:P,itemRefCallback:ie,selectedItem:k,onItemLeave:se,itemTextRefCallback:ue,focusSelectedItem:B,selectedItemText:H,position:a,isPositioned:z,searchRef:L,children:r.jsx(Gm,{as:sG,allowPinchZoom:!0,children:r.jsx(zm,{asChild:!0,trapped:C.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:Ge(n,de=>{var ce;(ce=C.trigger)==null||ce.focus({preventScroll:!0}),de.preventDefault()}),children:r.jsx(Dd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:r.jsx(le,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:de=>de.preventDefault(),...S,...re,onPlaced:()=>ee(!0),ref:$,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:Ge(S.onKeyDown,de=>{const ce=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ce&&de.key.length===1&&F(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let Ne=I().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(de.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const J=de.target,ge=Ne.indexOf(J);Ne=Ne.slice(ge+1)}setTimeout(()=>A(Ne)),de.preventDefault()}})})})})})})});r4.displayName=tG;var aG="SelectItemAlignedPosition",n4=b.forwardRef((t,e)=>{const{__scopeSelect:s,onPlaced:a,...n}=t,i=Bo(Ri,s),c=Io(Ri,s),[u,f]=b.useState(null),[h,p]=b.useState(null),g=wt(e,$=>p($)),x=hp(s),y=b.useRef(!1),_=b.useRef(!0),{viewport:j,selectedItem:N,selectedItemText:S,focusSelectedItem:C}=c,E=b.useCallback(()=>{if(i.trigger&&i.valueNode&&u&&h&&j&&N&&S){const $=i.trigger.getBoundingClientRect(),k=h.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),H=S.getBoundingClientRect();if(i.dir!=="rtl"){const J=H.left-k.left,ge=O.left-J,_e=$.left-ge,De=$.width+_e,Ve=Math.max(De,k.width),We=window.innerWidth-mr,ye=Vv(ge,[mr,Math.max(mr,We-Ve)]);u.style.minWidth=De+"px",u.style.left=ye+"px"}else{const J=k.right-H.right,ge=window.innerWidth-O.right-J,_e=window.innerWidth-$.right-ge,De=$.width+_e,Ve=Math.max(De,k.width),We=window.innerWidth-mr,ye=Vv(ge,[mr,Math.max(mr,We-Ve)]);u.style.minWidth=De+"px",u.style.right=ye+"px"}const Y=x(),I=window.innerHeight-mr*2,z=j.scrollHeight,ee=window.getComputedStyle(h),G=parseInt(ee.borderTopWidth,10),A=parseInt(ee.paddingTop,10),B=parseInt(ee.borderBottomWidth,10),V=parseInt(ee.paddingBottom,10),W=G+A+z+V+B,L=Math.min(N.offsetHeight*5,W),F=window.getComputedStyle(j),ie=parseInt(F.paddingTop,10),se=parseInt(F.paddingBottom,10),ue=$.top+$.height/2-mr,le=I-ue,re=N.offsetHeight/2,de=N.offsetTop+re,ce=G+A+de,be=W-ce;if(ce<=ue){const J=Y.length>0&&N===Y[Y.length-1].ref.current;u.style.bottom="0px";const ge=h.clientHeight-j.offsetTop-j.offsetHeight,_e=Math.max(le,re+(J?se:0)+ge+B),De=ce+_e;u.style.height=De+"px"}else{const J=Y.length>0&&N===Y[0].ref.current;u.style.top="0px";const _e=Math.max(ue,G+j.offsetTop+(J?ie:0)+re)+be;u.style.height=_e+"px",j.scrollTop=ce-ue+j.offsetTop}u.style.margin=`${mr}px 0`,u.style.minHeight=L+"px",u.style.maxHeight=I+"px",a==null||a(),requestAnimationFrame(()=>y.current=!0)}},[x,i.trigger,i.valueNode,u,h,j,N,S,i.dir,a]);gs(()=>E(),[E]);const[M,R]=b.useState();gs(()=>{h&&R(window.getComputedStyle(h).zIndex)},[h]);const P=b.useCallback($=>{$&&_.current===!0&&(E(),C==null||C(),_.current=!1)},[E,C]);return r.jsx(nG,{scope:s,contentWrapper:u,shouldExpandOnScrollRef:y,onScrollButtonChange:P,children:r.jsx("div",{ref:f,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:r.jsx(Ke.div,{...n,ref:g,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});n4.displayName=aG;var rG="SelectPopperPosition",Fv=b.forwardRef((t,e)=>{const{__scopeSelect:s,align:a="start",collisionPadding:n=mr,...i}=t,c=mp(s);return r.jsx(_y,{...c,...i,ref:e,align:a,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fv.displayName=rG;var[nG,Sy]=Rc(Ri,{}),Hv="SelectViewport",o4=b.forwardRef((t,e)=>{const{__scopeSelect:s,nonce:a,...n}=t,i=Io(Hv,s),c=Sy(Hv,s),u=wt(e,i.onViewportChange),f=b.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),r.jsx(fp.Slot,{scope:s,children:r.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Ge(n.onScroll,h=>{const p=h.currentTarget,{contentWrapper:g,shouldExpandOnScrollRef:x}=c;if(x!=null&&x.current&&g){const y=Math.abs(f.current-p.scrollTop);if(y>0){const _=window.innerHeight-mr*2,j=parseFloat(g.style.minHeight),N=parseFloat(g.style.height),S=Math.max(j,N);if(S<_){const C=S+y,E=Math.min(_,C),M=C-E;g.style.height=E+"px",g.style.bottom==="0px"&&(p.scrollTop=M>0?M:0,g.style.justifyContent="flex-end")}}}f.current=p.scrollTop})})})]})});o4.displayName=Hv;var i4="SelectGroup",[oG,iG]=Rc(i4),lG=b.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=Fr();return r.jsx(oG,{scope:s,id:n,children:r.jsx(Ke.div,{role:"group","aria-labelledby":n,...a,ref:e})})});lG.displayName=i4;var l4="SelectLabel",c4=b.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=iG(l4,s);return r.jsx(Ke.div,{id:n.id,...a,ref:e})});c4.displayName=l4;var jm="SelectItem",[cG,u4]=Rc(jm),d4=b.forwardRef((t,e)=>{const{__scopeSelect:s,value:a,disabled:n=!1,textValue:i,...c}=t,u=Bo(jm,s),f=Io(jm,s),h=u.value===a,[p,g]=b.useState(i??""),[x,y]=b.useState(!1),_=wt(e,C=>{var E;return(E=f.itemRefCallback)==null?void 0:E.call(f,C,a,n)}),j=Fr(),N=b.useRef("touch"),S=()=>{n||(u.onValueChange(a),u.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(cG,{scope:s,value:a,disabled:n,textId:j,isSelected:h,onItemTextChange:b.useCallback(C=>{g(E=>E||((C==null?void 0:C.textContent)??"").trim())},[]),children:r.jsx(fp.ItemSlot,{scope:s,value:a,disabled:n,textValue:p,children:r.jsx(Ke.div,{role:"option","aria-labelledby":j,"data-highlighted":x?"":void 0,"aria-selected":h&&x,"data-state":h?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...c,ref:_,onFocus:Ge(c.onFocus,()=>y(!0)),onBlur:Ge(c.onBlur,()=>y(!1)),onClick:Ge(c.onClick,()=>{N.current!=="mouse"&&S()}),onPointerUp:Ge(c.onPointerUp,()=>{N.current==="mouse"&&S()}),onPointerDown:Ge(c.onPointerDown,C=>{N.current=C.pointerType}),onPointerMove:Ge(c.onPointerMove,C=>{var E;N.current=C.pointerType,n?(E=f.onItemLeave)==null||E.call(f):N.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ge(c.onPointerLeave,C=>{var E;C.currentTarget===document.activeElement&&((E=f.onItemLeave)==null||E.call(f))}),onKeyDown:Ge(c.onKeyDown,C=>{var M;((M=f.searchRef)==null?void 0:M.current)!==""&&C.key===" "||(YH.includes(C.key)&&S(),C.key===" "&&C.preventDefault())})})})})});d4.displayName=jm;var Wu="SelectItemText",f4=b.forwardRef((t,e)=>{const{__scopeSelect:s,className:a,style:n,...i}=t,c=Bo(Wu,s),u=Io(Wu,s),f=u4(Wu,s),h=QH(Wu,s),[p,g]=b.useState(null),x=wt(e,S=>g(S),f.onItemTextChange,S=>{var C;return(C=u.itemTextRefCallback)==null?void 0:C.call(u,S,f.value,f.disabled)}),y=p==null?void 0:p.textContent,_=b.useMemo(()=>r.jsx("option",{value:f.value,disabled:f.disabled,children:y},f.value),[f.disabled,f.value,y]),{onNativeOptionAdd:j,onNativeOptionRemove:N}=h;return gs(()=>(j(_),()=>N(_)),[j,N,_]),r.jsxs(r.Fragment,{children:[r.jsx(Ke.span,{id:f.textId,...i,ref:x}),f.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Mi.createPortal(i.children,c.valueNode):null]})});f4.displayName=Wu;var h4="SelectItemIndicator",m4=b.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t;return u4(h4,s).isSelected?r.jsx(Ke.span,{"aria-hidden":!0,...a,ref:e}):null});m4.displayName=h4;var Gv="SelectScrollUpButton",p4=b.forwardRef((t,e)=>{const s=Io(Gv,t.__scopeSelect),a=Sy(Gv,t.__scopeSelect),[n,i]=b.useState(!1),c=wt(e,a.onScrollButtonChange);return gs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollTop>0;i(h)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?r.jsx(x4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop-f.offsetHeight)}}):null});p4.displayName=Gv;var Xv="SelectScrollDownButton",g4=b.forwardRef((t,e)=>{const s=Io(Xv,t.__scopeSelect),a=Sy(Xv,t.__scopeSelect),[n,i]=b.useState(!1),c=wt(e,a.onScrollButtonChange);return gs(()=>{if(s.viewport&&s.isPositioned){let u=function(){const h=f.scrollHeight-f.clientHeight,p=Math.ceil(f.scrollTop)<h;i(p)};const f=s.viewport;return u(),f.addEventListener("scroll",u),()=>f.removeEventListener("scroll",u)}},[s.viewport,s.isPositioned]),n?r.jsx(x4,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:f}=s;u&&f&&(u.scrollTop=u.scrollTop+f.offsetHeight)}}):null});g4.displayName=Xv;var x4=b.forwardRef((t,e)=>{const{__scopeSelect:s,onAutoScroll:a,...n}=t,i=Io("SelectScrollButton",s),c=b.useRef(null),u=hp(s),f=b.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return b.useEffect(()=>()=>f(),[f]),gs(()=>{var p;const h=u().find(g=>g.ref.current===document.activeElement);(p=h==null?void 0:h.ref.current)==null||p.scrollIntoView({block:"nearest"})},[u]),r.jsx(Ke.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:Ge(n.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:Ge(n.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:Ge(n.onPointerLeave,()=>{f()})})}),uG="SelectSeparator",v4=b.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t;return r.jsx(Ke.div,{"aria-hidden":!0,...a,ref:e})});v4.displayName=uG;var Yv="SelectArrow",dG=b.forwardRef((t,e)=>{const{__scopeSelect:s,...a}=t,n=mp(s),i=Bo(Yv,s),c=Io(Yv,s);return i.open&&c.position==="popper"?r.jsx(jy,{...n,...a,ref:e}):null});dG.displayName=Yv;var fG="SelectBubbleInput",b4=b.forwardRef(({__scopeSelect:t,value:e,...s},a)=>{const n=b.useRef(null),i=wt(a,n),c=XT(e);return b.useEffect(()=>{const u=n.current;if(!u)return;const f=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(f,"value").set;if(c!==e&&p){const g=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(g)}},[c,e]),r.jsx(Ke.select,{...s,style:{...YT,...s.style},ref:i,defaultValue:e})});b4.displayName=fG;function y4(t){return t===""||t===void 0}function w4(t){const e=Js(t),s=b.useRef(""),a=b.useRef(0),n=b.useCallback(c=>{const u=s.current+c;e(u),function f(h){s.current=h,window.clearTimeout(a.current),h!==""&&(a.current=window.setTimeout(()=>f(""),1e3))}(u)},[e]),i=b.useCallback(()=>{s.current="",window.clearTimeout(a.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(a.current),[]),[s,n,i]}function _4(t,e,s){const n=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=s?t.indexOf(s):-1;let c=hG(t,Math.max(i,0));n.length===1&&(c=c.filter(h=>h!==s));const f=c.find(h=>h.textValue.toLowerCase().startsWith(n.toLowerCase()));return f!==s?f:void 0}function hG(t,e){return t.map((s,a)=>t[(e+a)%t.length])}var mG=KT,j4=ZT,pG=JT,gG=e4,xG=t4,N4=s4,vG=o4,S4=c4,E4=d4,bG=f4,yG=m4,C4=p4,A4=g4,k4=v4;const hi=mG,mi=pG,ho=b.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(j4,{ref:a,className:Ie("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[e,r.jsx(gG,{asChild:!0,children:r.jsx(ko,{className:"h-4 w-4 opacity-50"})})]}));ho.displayName=j4.displayName;const T4=b.forwardRef(({className:t,...e},s)=>r.jsx(C4,{ref:s,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(fc,{className:"h-4 w-4"})}));T4.displayName=C4.displayName;const R4=b.forwardRef(({className:t,...e},s)=>r.jsx(A4,{ref:s,className:Ie("flex cursor-default items-center justify-center py-1",t),...e,children:r.jsx(ko,{className:"h-4 w-4"})}));R4.displayName=A4.displayName;const mo=b.forwardRef(({className:t,children:e,position:s="popper",...a},n)=>r.jsx(xG,{children:r.jsxs(N4,{ref:n,className:Ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[r.jsx(T4,{}),r.jsx(vG,{className:Ie("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),r.jsx(R4,{})]})}));mo.displayName=N4.displayName;const wG=b.forwardRef(({className:t,...e},s)=>r.jsx(S4,{ref:s,className:Ie("px-2 py-1.5 text-sm font-semibold",t),...e}));wG.displayName=S4.displayName;const Bt=b.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(E4,{ref:a,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[r.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(yG,{children:r.jsx(fb,{className:"h-4 w-4"})})}),r.jsx(bG,{children:e})]}));Bt.displayName=E4.displayName;const _G=b.forwardRef(({className:t,...e},s)=>r.jsx(k4,{ref:s,className:Ie("-mx-1 my-1 h-px bg-muted",t),...e}));_G.displayName=k4.displayName;const Oe=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("w-full max-w-full overflow-hidden rounded-xl border bg-card text-card-foreground shadow",t),...e}));Oe.displayName="Card";const ht=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("flex flex-col space-y-1.5 p-4 sm:p-6",t),...e}));ht.displayName="CardHeader";const xt=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("break-words font-semibold leading-none tracking-tight",t),...e}));xt.displayName="CardTitle";const Nm=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("break-words text-sm text-muted-foreground",t),...e}));Nm.displayName="CardDescription";const He=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("w-full p-4 sm:p-6",t),...e}));He.displayName="CardContent";const Ey=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("flex flex-wrap items-center gap-2 p-4 pt-0 sm:p-6 sm:pt-0",t),...e}));Ey.displayName="CardFooter";function M4({children:t}){const e=Rt(),{user:s,loading:a}=zs();return b.useEffect(()=>{!a.onAuthUserChanged&&s&&s.role!=="ADMIN"&&(me.error("Voc no tem permisso para acessar esta pgina"),e({to:"/403"}))},[s,a.onAuthUserChanged,e]),a.onAuthUserChanged||!s?r.jsx(hc,{}):s.role!=="ADMIN"?r.jsx(r.Fragment,{}):t}const jG=Pd("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ze({className:t,variant:e,...s}){return r.jsx("div",{className:Ie(jG({variant:e}),t),...s})}const NG={ADMIN:"Administrador",PLAYER:"Jogador"},SG=Yt("/_authenticated/users")({component:EG});function EG(){const t=Rt(),{users:e,loading:s,searchUsers:a}=D7(),[n,i]=b.useState({page:1,limit:10});b.useEffect(()=>{a(n)},[n,a]);const c=u=>{switch(u){case"ADMIN":return"bg-red-500";case"PLAYER":return"bg-blue-500";default:return"bg-gray-500"}};return r.jsx(M4,{children:r.jsx("div",{className:"container mx-auto py-8",children:r.jsxs(Oe,{children:[r.jsx(ht,{children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsx(xt,{children:"Usurios"})})}),r.jsxs(He,{children:[r.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[r.jsx(Ms,{placeholder:"Nome",value:n.nome||"",onChange:u=>i({...n,nome:u.target.value})}),r.jsx(Ms,{placeholder:"Email",value:n.email||"",onChange:u=>i({...n,email:u.target.value})}),r.jsxs(hi,{value:n.role,onValueChange:u=>i({...n,role:u}),children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Tipo de Usurio"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"ADMIN",children:"Administrador"}),r.jsx(Bt,{value:"PLAYER",children:"Jogador"})]})]})]}),r.jsx("div",{className:"rounded-md border",children:r.jsxs(rp,{children:[r.jsx(np,{children:r.jsxs(Vr,{children:[r.jsx(la,{children:"Nome"}),r.jsx(la,{children:"Email"}),r.jsx(la,{children:"Tipo"}),r.jsx(la,{children:"Maior Andar"}),r.jsx(la,{children:"Total de Jogos"}),r.jsx(la,{children:"Vitrias"}),r.jsx(la,{children:"Aes"})]})}),r.jsx(op,{children:s?r.jsx(Vr,{children:r.jsx(Rs,{colSpan:7,className:"text-center",children:"Carregando..."})}):e.length===0?r.jsx(Vr,{children:r.jsx(Rs,{colSpan:7,className:"text-center",children:"Nenhum usurio encontrado"})}):e.map(u=>r.jsxs(Vr,{children:[r.jsx(Rs,{children:u.nome}),r.jsx(Rs,{children:u.email}),r.jsx(Rs,{children:r.jsx(ze,{className:c(u.role),children:NG[u.role]})}),r.jsx(Rs,{children:u.highest_floor}),r.jsx(Rs,{children:u.total_games}),r.jsx(Rs,{children:u.total_victories}),r.jsx(Rs,{children:r.jsx(fe,{variant:"ghost",onClick:()=>t({to:`/users/${u.id}`}),children:"Visualizar"})})]},u.id))})]})})]})]})})})}var CG=vE();function AG(){return CG.useSyncExternalStore(kG,()=>!0,()=>!1)}function kG(){return()=>{}}var Cy="Avatar",[TG,PW]=nr(Cy),[RG,P4]=TG(Cy),D4=b.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[n,i]=b.useState("idle");return r.jsx(RG,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:r.jsx(Ke.span,{...a,ref:e})})});D4.displayName=Cy;var O4="AvatarImage",$4=b.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:n=()=>{},...i}=t,c=P4(O4,s),u=MG(a,i),f=Js(h=>{n(h),c.onImageLoadingStatusChange(h)});return gs(()=>{u!=="idle"&&f(u)},[u,f]),u==="loaded"?r.jsx(Ke.img,{...i,ref:e,src:a}):null});$4.displayName=O4;var L4="AvatarFallback",B4=b.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...n}=t,i=P4(L4,s),[c,u]=b.useState(a===void 0);return b.useEffect(()=>{if(a!==void 0){const f=window.setTimeout(()=>u(!0),a);return()=>window.clearTimeout(f)}},[a]),c&&i.imageLoadingStatus!=="loaded"?r.jsx(Ke.span,{...n,ref:e}):null});B4.displayName=L4;function W2(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function MG(t,{referrerPolicy:e,crossOrigin:s}){const a=AG(),n=b.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[c,u]=b.useState(()=>W2(i,t));return gs(()=>{u(W2(i,t))},[i,t]),gs(()=>{const f=g=>()=>{u(g)};if(!i)return;const h=f("loaded"),p=f("error");return i.addEventListener("load",h),i.addEventListener("error",p),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",h),i.removeEventListener("error",p)}},[i,s,e]),c}var I4=D4,V4=$4,q4=B4;const U4=b.forwardRef(({className:t,...e},s)=>r.jsx(I4,{ref:s,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));U4.displayName=I4.displayName;const z4=b.forwardRef(({className:t,...e},s)=>r.jsx(V4,{ref:s,className:Ie("aspect-square h-full w-full",t),...e}));z4.displayName=V4.displayName;const F4=b.forwardRef(({className:t,...e},s)=>r.jsx(q4,{ref:s,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));F4.displayName=q4.displayName;const PG=Lm({nome:Ws().min(3,"Nome deve ter no mnimo 3 caracteres"),tipo_pessoa:EO(["PF","PJ"]),documento:Ws().optional(),telefone:Ws().optional(),data_nascimento:Ws().optional()}),DG=Yt("/_authenticated/profile")({component:OG});function OG(){var x;const{user:t}=zs(),e=Rt(),[s,a]=b.useState(null),[n,i]=b.useState(!0),c=b.useRef(null),[u,f]=b.useState(null),h=Ab({resolver:kb(PG),defaultValues:{nome:"",tipo_pessoa:"PF"}});b.useEffect(()=>{(async()=>{try{i(!0);const{data:_,error:j}=await rc.getUserProfile();if(j){me.error("Erro",{description:j});return}_&&(a(_),h.reset({nome:_.nome,tipo_pessoa:_.tipo_pessoa,documento:_.documento,telefone:_.telefone,data_nascimento:_.data_nascimento}))}catch(_){me.error("Erro",{description:_ instanceof Error?_.message:"No foi possvel carregar seu perfil"})}finally{i(!1)}})()},[h]);const p=async y=>{if(!(!(t!=null&&t.id)||!s))try{const{error:_}=await rc.updateUser(t.id,{...y,data_nascimento:y.data_nascimento?new Date(y.data_nascimento):void 0,imagemPerfil:u||void 0});if(_)throw new Error(_);const{data:j,error:N}=await rc.getUserProfile();if(N)throw new Error(N);j&&a(j),me.success("Sucesso",{description:"Perfil atualizado com sucesso!"}),f(null)}catch(_){me.error("Erro",{description:_ instanceof Error?_.message:"Erro ao atualizar perfil"})}},g=y=>{var j;const _=(j=y.target.files)==null?void 0:j[0];_&&f(_)};return n?r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsx(Oe,{children:r.jsx(ht,{children:r.jsx(xt,{children:"Carregando..."})})})}):r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>e({to:"/game"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Perfil"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Gerencie suas informaes pessoais"})]})]})}),r.jsxs("div",{className:"grid gap-6",children:[r.jsxs(Oe,{children:[r.jsxs(ht,{children:[r.jsx(xt,{children:"Foto de Perfil"}),r.jsx(Nm,{children:"Atualize sua foto de perfil"})]}),r.jsx(He,{children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(U4,{className:"h-24 w-24",children:[r.jsx(z4,{src:s==null?void 0:s.imagem_perfil_url}),r.jsx(F4,{children:(x=s==null?void 0:s.nome)==null?void 0:x.charAt(0)})]}),r.jsx(Ms,{type:"file",ref:c,accept:"image/*",onChange:g,className:"max-w-xs"})]})})]}),r.jsxs(Oe,{children:[r.jsxs(ht,{children:[r.jsx(xt,{children:"Informaes Pessoais"}),r.jsx(Nm,{children:"Atualize suas informaes pessoais"})]}),r.jsx(He,{children:r.jsx(Tb,{...h,children:r.jsxs("form",{onSubmit:h.handleSubmit(p),className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(Br,{control:h.control,name:"nome",render:({field:y})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Nome *"}),r.jsx(wr,{children:r.jsx(Ms,{...y})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:h.control,name:"tipo_pessoa",render:({field:y})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Tipo de Pessoa *"}),r.jsxs(hi,{onValueChange:y.onChange,defaultValue:y.value,children:[r.jsx(wr,{children:r.jsx(ho,{children:r.jsx(mi,{placeholder:"Selecione o tipo de pessoa"})})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"PF",children:"Pessoa Fsica"}),r.jsx(Bt,{value:"PJ",children:"Pessoa Jurdica"})]})]}),r.jsx(_r,{})]})}),r.jsx(Br,{control:h.control,name:"documento",render:({field:y})=>r.jsxs(br,{children:[r.jsx(yr,{children:h.watch("tipo_pessoa")==="PF"?"CPF":"CNPJ"}),r.jsx(wr,{children:r.jsx(Ms,{...y,value:y.value||""})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:h.control,name:"telefone",render:({field:y})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Telefone"}),r.jsx(wr,{children:r.jsx(Ms,{...y,value:y.value||""})}),r.jsx(_r,{})]})}),r.jsx(Br,{control:h.control,name:"data_nascimento",render:({field:y})=>r.jsxs(br,{children:[r.jsx(yr,{children:"Data de Nascimento"}),r.jsx(wr,{children:r.jsx(Ms,{type:"date",...y,value:y.value||""})}),r.jsx(_r,{})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{type:"submit",children:"Salvar"})})]})})})]})]})]})}function $G(){return r.jsxs(Oe,{className:"w-full max-w-md",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(aB,{className:"h-5 w-5 text-primary"}),"Sobre Tower Trials"]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Um jogo de aventura em que voc sobe uma torre mgica, enfrentando inimigos cada vez mais fortes em cada andar. Quanto mais alto voc chegar, melhor ser sua posio no ranking."}),r.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(z6,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Progresso na Torre"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Cada andar apresenta um inimigo mais forte. A dificuldade aumenta conforme voc sobe, mas voc recupera um pouco de HP a cada inimigo derrotado."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(kt,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Ataque"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ataque direto ao inimigo, causando dano baseado no seu valor de ataque menos a defesa do inimigo."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(vt,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Defesa"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aumenta temporariamente sua defesa, reduzindo o dano recebido no prximo ataque do inimigo."})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/50 rounded-md",children:[r.jsx("div",{className:"mt-1",children:r.jsx(Ct,{className:"h-5 w-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium mb-1",children:"Habilidade Especial"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Causa o dobro do seu dano de ataque, mas tem um cooldown de 3 turnos antes de poder ser usada novamente."})]})]})]})]})]})}const LG=Yt("/_authenticated/game")({component:BG});function BG(){const t=Rt(),{user:e}=zs(),[s,a]=b.useState(!1),n=()=>{if(!e){t({to:"/auth",search:{auth:"true"}});return}t({to:"/game/play"})};return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:[r.jsxs("div",{className:"w-full max-w-md text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"Tower Trials"}),r.jsx("p",{className:"text-foreground/80",children:"Suba a torre mgica, derrote inimigos e alcance o andar mais alto possvel!"})]}),s?r.jsxs("div",{className:"w-full max-w-md mb-4",children:[r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx(fe,{variant:"ghost",size:"sm",className:"p-1 h-8 w-8",onClick:()=>a(!1),children:r.jsx(Oi,{className:"h-5 w-5"})})}),r.jsx($G,{})]}):r.jsxs(Oe,{className:"w-full max-w-md mb-4",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-center",children:"Menu Principal"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx(fe,{onClick:n,className:"w-full py-6 text-lg",size:"lg",children:e?"Jogar":"Entrar para Jogar"}),r.jsx(fe,{onClick:()=>t({to:"/game/ranking"}),className:"w-full py-6 text-lg",variant:"outline",size:"lg",children:"Ranking"}),e&&r.jsxs(fe,{onClick:()=>t({to:"/game/cemetery"}),className:"w-full py-4 text-base border border-red-500/20 bg-red-500/5 hover:bg-red-500/10 text-red-400 hover:text-red-300",variant:"ghost",size:"lg",children:[r.jsx(Qs,{className:"h-5 w-5 mr-2"}),"Cemitrio"]})]}),r.jsxs(Ey,{className:"flex justify-between",children:[r.jsxs(fe,{variant:"ghost",size:"sm",className:"flex items-center gap-1",onClick:()=>a(!0),children:[r.jsx(VB,{className:"h-4 w-4"}),r.jsx("span",{children:"Como Jogar"})]}),e?r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:e.username||e.email})," |",r.jsx(yo,{to:"/logout",className:"text-primary ml-1 hover:underline",children:"Sair"})]}):r.jsx(yo,{to:"/auth",search:{auth:"true"},children:r.jsx(fe,{variant:"ghost",size:"sm",children:"Entrar / Criar Conta"})})]})]})]})}const IG=Yt("/_authenticated/403")({component:VG});function VG(){return r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("h1",{children:"A pgina que voc tentou acessar no existe ou voc no possui a permisso necessria."})})}const qG=Yt("/_public/auth/verify-email")({component:UG});function UG(){const{user:t}=zs();return r.jsx("div",{className:"container mx-auto flex min-h-screen items-center justify-center px-4",children:r.jsxs(Oe,{className:"w-full max-w-md",children:[r.jsx(ht,{children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(KB,{className:"h-8 w-8 text-primary"}),r.jsxs("div",{children:[r.jsx(xt,{children:"Verifique seu Email"}),r.jsx(Nm,{children:"Enviamos um link de confirmao para seu email"})]})]})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"rounded-lg bg-muted p-4 text-sm",children:[r.jsxs("p",{className:"mb-2",children:["Ol ",r.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email}),","]}),r.jsx("p",{className:"mb-2",children:"Para sua segurana, enviamos um email de confirmao para o endereo fornecido."}),r.jsx("p",{children:"Por favor, siga estas etapas:"}),r.jsxs("ol",{className:"ml-4 mt-2 list-decimal space-y-1",children:[r.jsx("li",{children:"Verifique sua caixa de entrada"}),r.jsx("li",{children:"Clique no link de confirmao no email"}),r.jsx("li",{children:"Retorne aqui para fazer login"})]})]}),r.jsx("div",{className:"space-y-4 text-sm text-muted-foreground",children:r.jsx("p",{children:"No recebeu o email? Verifique sua pasta de spam ou aguarde alguns minutos."})}),r.jsx("div",{className:"flex flex-col space-y-2",children:r.jsx(yo,{to:"/auth",search:{auth:"true"},children:r.jsxs(fe,{variant:"outline",className:"w-full",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),"Voltar para o Login"]})})})]})]})})}class Zl{static async saveScore(e){try{const{data:s,error:a}=await we.rpc("save_ranking_entry",{p_user_id:e.user_id,p_player_name:e.player_name,p_floor:e.floor,p_character_level:e.character_level||1,p_character_gold:e.character_gold||0,p_character_alive:e.character_alive??!0});if(a)throw a;return{data:s,error:null}}catch(s){return console.error("Erro ao salvar no ranking:",s),{data:"",error:s instanceof Error?s.message:"Erro ao salvar no ranking"}}}static async getGlobalRanking(e="floor",s=10,a="all",n="",i=1){try{const c=(i-1)*s;console.log(`[RankingService] Buscando ranking global - modo: ${e}, filtro: ${a}, nome: ${n}, pgina: ${i}, limite: ${s}`);let u;switch(e){case"floor":u="get_dynamic_ranking_by_highest_floor";break;case"level":u="get_dynamic_ranking_by_level";break;case"gold":u="get_dynamic_ranking_by_gold";break;default:u="get_dynamic_ranking_by_floor"}console.log(`[RankingService] Chamando funo: ${u}`);const{data:f,error:h}=await we.rpc(u,{p_limit:s,p_status_filter:a,p_name_filter:n,p_offset:c});if(h)throw console.error(`[RankingService] Erro na funo ${u}:`,h),h;return console.log("[RankingService] Dados recebidos:",(f==null?void 0:f.length)||0,"entradas"),console.log("[RankingService] Primeiras 3 entradas:",f==null?void 0:f.slice(0,3)),{data:f||[],error:null}}catch(c){return console.error("Erro ao buscar ranking global:",c),{data:[],error:c instanceof Error?c.message:"Erro ao buscar ranking"}}}static async countRankingEntries(e="all",s=""){try{console.log(`[RankingService] Contando entradas - filtro: ${e}, nome: ${s}`);const{data:a,error:n}=await we.rpc("count_ranking_entries",{p_status_filter:e,p_name_filter:s});if(n)throw console.error("[RankingService] Erro ao contar entradas:",n),n;return console.log(`[RankingService] Total de entradas: ${a}`),{data:a||0,error:null}}catch(a){return console.error("Erro ao contar entradas do ranking:",a),{data:0,error:a instanceof Error?a.message:"Erro ao contar entradas"}}}static async getUserRanking(e,s=10){try{console.log(`[RankingService] Buscando histrico do usurio: ${e}, limite: ${s}`);const{data:a,error:n}=await we.rpc("get_dynamic_user_ranking_history",{p_user_id:e,p_limit:s});if(n)throw console.error("[RankingService] Erro no histrico do usurio:",n),n;return console.log("[RankingService] Histrico do usurio recebido:",(a==null?void 0:a.length)||0,"entradas"),{data:a||[],error:null}}catch(a){return console.error("Erro ao buscar ranking do usurio:",a),{data:[],error:a instanceof Error?a.message:"Erro ao buscar ranking do usurio"}}}static async getUserStats(e){try{console.log(`[RankingService] Buscando estatsticas do usurio: ${e}`);const{data:s,error:a}=await we.rpc("get_dynamic_user_stats",{p_user_id:e}).single();if(a)throw console.error("[RankingService] Erro nas estatsticas do usurio:",a),a;const n=s,i={bestFloor:(n==null?void 0:n.best_floor)||0,bestLevel:(n==null?void 0:n.best_level)||1,bestGold:(n==null?void 0:n.best_gold)||0,totalRuns:(n==null?void 0:n.total_runs)||0,aliveCharacters:(n==null?void 0:n.alive_characters)||0};return console.log("[RankingService] Estatsticas do usurio recebidas:",i),{data:i,error:null}}catch(s){return console.error("Erro ao buscar estatsticas do usurio:",s),{data:{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0},error:s instanceof Error?s.message:"Erro ao buscar estatsticas"}}}static async testRankingSystem(e){try{const{data:s,error:a}=await we.rpc("test_ranking_system",{p_user_id:e||null});if(a)throw a;return{data:s||[],error:null}}catch(s){return console.error("Erro ao testar sistema de ranking:",s),{data:[],error:s instanceof Error?s.message:"Erro ao testar ranking"}}}static async syncAllRankings(){try{const{data:e,error:s}=await we.rpc("refresh_all_rankings");if(s)throw s;return{data:e||"Sincronizao concluda",error:null}}catch(e){return console.error("Erro ao sincronizar rankings:",e),{data:"",error:e instanceof Error?e.message:"Erro ao sincronizar rankings"}}}}const zG={ADMIN:"Administrador",PLAYER:"Jogador"},H4=Yt("/_authenticated/users/$id")({component:FG});function FG(){const{id:t}=H4.useParams(),[e,s]=b.useState(null),[a,n]=b.useState([]),[i,c]=b.useState(!0),[u,f]=b.useState(null);return b.useEffect(()=>{(async()=>{try{c(!0),f(null);const{data:p,error:g}=await rc.searchUsers({page:1,limit:1,email:t});if(g){f(`Erro ao buscar usurio: ${g}`);return}if(!p||p.length===0){f("Usurio no encontrado");return}const x=p[0];s(x);const{data:y}=await Zl.getUserRanking(x.uid);n(y||[])}catch(p){console.error("Erro ao carregar dados:",p),f("Erro ao carregar dados do usurio")}finally{c(!1)}})()},[t]),i?r.jsx("div",{children:"Carregando..."}):u?r.jsx("div",{className:"text-red-500",children:u}):e?r.jsx(M4,{children:r.jsxs("div",{className:"container mx-auto py-8",children:[r.jsxs(Oe,{className:"mb-8",children:[r.jsx(ht,{children:r.jsx(xt,{children:"Detalhes do Usurio"})}),r.jsx(He,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Nome"}),r.jsx("p",{className:"text-lg",children:e.nome})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Email"}),r.jsx("p",{className:"text-lg",children:e.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Tipo"}),r.jsx(ze,{className:e.role==="ADMIN"?"bg-red-500":"bg-blue-500",children:zG[e.role]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Status"}),r.jsx(ze,{variant:e.ativo?"default":"destructive",children:e.ativo?"Ativo":"Inativo"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Maior Andar Alcanado"}),r.jsx("p",{className:"text-lg",children:e.highest_floor})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Total de Jogos"}),r.jsx("p",{className:"text-lg",children:e.total_games})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Vitrias"}),r.jsx("p",{className:"text-lg",children:e.total_victories})]})]})})]}),r.jsxs(Oe,{children:[r.jsx(ht,{children:r.jsx(xt,{children:"Histrico de Rankings"})}),r.jsx(He,{children:r.jsx("div",{className:"rounded-md border",children:r.jsxs(rp,{children:[r.jsx(np,{children:r.jsxs(Vr,{children:[r.jsx(la,{children:"Andar Alcanado"}),r.jsx(la,{children:"Data"})]})}),r.jsx(op,{children:a.length===0?r.jsx(Vr,{children:r.jsx(Rs,{colSpan:2,className:"text-center",children:"Nenhum ranking encontrado"})}):a.map(h=>r.jsxs(Vr,{children:[r.jsx(Rs,{children:h.floor}),r.jsx(Rs,{children:h.created_at?new Date(h.created_at).toLocaleDateString("pt-BR"):"-"})]},h.id))})]})})})]})]})}):r.jsx("div",{children:"Usurio no encontrado"})}function HG(t,e){return b.useReducer((s,a)=>e[s][a]??s,t)}var Ay="ScrollArea",[G4,DW]=nr(Ay),[GG,or]=G4(Ay),X4=b.forwardRef((t,e)=>{const{__scopeScrollArea:s,type:a="hover",dir:n,scrollHideDelay:i=600,...c}=t,[u,f]=b.useState(null),[h,p]=b.useState(null),[g,x]=b.useState(null),[y,_]=b.useState(null),[j,N]=b.useState(null),[S,C]=b.useState(0),[E,M]=b.useState(0),[R,P]=b.useState(!1),[$,k]=b.useState(!1),O=wt(e,Y=>f(Y)),H=ip(n);return r.jsx(GG,{scope:s,type:a,dir:H,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:p,content:g,onContentChange:x,scrollbarX:y,onScrollbarXChange:_,scrollbarXEnabled:R,onScrollbarXEnabledChange:P,scrollbarY:j,onScrollbarYChange:N,scrollbarYEnabled:$,onScrollbarYEnabledChange:k,onCornerWidthChange:C,onCornerHeightChange:M,children:r.jsx(Ke.div,{dir:H,...c,ref:O,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});X4.displayName=Ay;var Y4="ScrollAreaViewport",K4=b.forwardRef((t,e)=>{const{__scopeScrollArea:s,children:a,nonce:n,...i}=t,c=or(Y4,s),u=b.useRef(null),f=wt(e,u,c.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),r.jsx(Ke.div,{"data-radix-scroll-area-viewport":"",...i,ref:f,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:r.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});K4.displayName=Y4;var en="ScrollAreaScrollbar",W4=b.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=or(en,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=n,u=t.orientation==="horizontal";return b.useEffect(()=>(u?i(!0):c(!0),()=>{u?i(!1):c(!1)}),[u,i,c]),n.type==="hover"?r.jsx(XG,{...a,ref:e,forceMount:s}):n.type==="scroll"?r.jsx(YG,{...a,ref:e,forceMount:s}):n.type==="auto"?r.jsx(Z4,{...a,ref:e,forceMount:s}):n.type==="always"?r.jsx(ky,{...a,ref:e}):null});W4.displayName=en;var XG=b.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=or(en,t.__scopeScrollArea),[i,c]=b.useState(!1);return b.useEffect(()=>{const u=n.scrollArea;let f=0;if(u){const h=()=>{window.clearTimeout(f),c(!0)},p=()=>{f=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",p),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",p)}}},[n.scrollArea,n.scrollHideDelay]),r.jsx(Ba,{present:s||i,children:r.jsx(Z4,{"data-state":i?"visible":"hidden",...a,ref:e})})}),YG=b.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=or(en,t.__scopeScrollArea),i=t.orientation==="horizontal",c=gp(()=>f("SCROLL_END"),100),[u,f]=HG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>f("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,n.scrollHideDelay,f]),b.useEffect(()=>{const h=n.viewport,p=i?"scrollLeft":"scrollTop";if(h){let g=h[p];const x=()=>{const y=h[p];g!==y&&(f("SCROLL"),c()),g=y};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[n.viewport,i,f,c]),r.jsx(Ba,{present:s||u!=="hidden",children:r.jsx(ky,{"data-state":u==="hidden"?"hidden":"visible",...a,ref:e,onPointerEnter:Ge(t.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:Ge(t.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),Z4=b.forwardRef((t,e)=>{const s=or(en,t.__scopeScrollArea),{forceMount:a,...n}=t,[i,c]=b.useState(!1),u=t.orientation==="horizontal",f=gp(()=>{if(s.viewport){const h=s.viewport.offsetWidth<s.viewport.scrollWidth,p=s.viewport.offsetHeight<s.viewport.scrollHeight;c(u?h:p)}},10);return xc(s.viewport,f),xc(s.content,f),r.jsx(Ba,{present:a||i,children:r.jsx(ky,{"data-state":i?"visible":"hidden",...n,ref:e})})}),ky=b.forwardRef((t,e)=>{const{orientation:s="vertical",...a}=t,n=or(en,t.__scopeScrollArea),i=b.useRef(null),c=b.useRef(0),[u,f]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=sR(u.viewport,u.content),p={...a,sizes:u,onSizesChange:f,hasThumb:h>0&&h<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:x=>c.current=x};function g(x,y){return eX(x,c.current,u,y)}return s==="horizontal"?r.jsx(KG,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollLeft,y=Z2(x,u,n.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=g(x,n.dir))}}):s==="vertical"?r.jsx(WG,{...p,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollTop,y=Z2(x,u);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=g(x))}}):null}),KG=b.forwardRef((t,e)=>{const{sizes:s,onSizesChange:a,...n}=t,i=or(en,t.__scopeScrollArea),[c,u]=b.useState(),f=b.useRef(null),h=wt(e,f,i.onScrollbarXChange);return b.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),r.jsx(J4,{"data-orientation":"horizontal",...n,ref:h,sizes:s,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":pp(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.x),onDragScroll:p=>t.onDragScroll(p.x),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollLeft+p.deltaX;t.onWheelScroll(x),rR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:Em(c.paddingLeft),paddingEnd:Em(c.paddingRight)}})}})}),WG=b.forwardRef((t,e)=>{const{sizes:s,onSizesChange:a,...n}=t,i=or(en,t.__scopeScrollArea),[c,u]=b.useState(),f=b.useRef(null),h=wt(e,f,i.onScrollbarYChange);return b.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),r.jsx(J4,{"data-orientation":"vertical",...n,ref:h,sizes:s,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":pp(s)+"px",...t.style},onThumbPointerDown:p=>t.onThumbPointerDown(p.y),onDragScroll:p=>t.onDragScroll(p.y),onWheelScroll:(p,g)=>{if(i.viewport){const x=i.viewport.scrollTop+p.deltaY;t.onWheelScroll(x),rR(x,g)&&p.preventDefault()}},onResize:()=>{f.current&&i.viewport&&c&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:Em(c.paddingTop),paddingEnd:Em(c.paddingBottom)}})}})}),[ZG,Q4]=G4(en),J4=b.forwardRef((t,e)=>{const{__scopeScrollArea:s,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:h,onWheelScroll:p,onResize:g,...x}=t,y=or(en,s),[_,j]=b.useState(null),N=wt(e,O=>j(O)),S=b.useRef(null),C=b.useRef(""),E=y.viewport,M=a.content-a.viewport,R=Js(p),P=Js(f),$=gp(g,10);function k(O){if(S.current){const H=O.clientX-S.current.left,Y=O.clientY-S.current.top;h({x:H,y:Y})}}return b.useEffect(()=>{const O=H=>{const Y=H.target;(_==null?void 0:_.contains(Y))&&R(H,M)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[E,_,M,R]),b.useEffect(P,[a,P]),xc(_,$),xc(y.content,$),r.jsx(ZG,{scope:s,scrollbar:_,hasThumb:n,onThumbChange:Js(i),onThumbPointerUp:Js(c),onThumbPositionChange:P,onThumbPointerDown:Js(u),children:r.jsx(Ke.div,{...x,ref:N,style:{position:"absolute",...x.style},onPointerDown:Ge(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),S.current=_.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),k(O))}),onPointerMove:Ge(t.onPointerMove,k),onPointerUp:Ge(t.onPointerUp,O=>{const H=O.target;H.hasPointerCapture(O.pointerId)&&H.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=C.current,y.viewport&&(y.viewport.style.scrollBehavior=""),S.current=null})})})}),Sm="ScrollAreaThumb",eR=b.forwardRef((t,e)=>{const{forceMount:s,...a}=t,n=Q4(Sm,t.__scopeScrollArea);return r.jsx(Ba,{present:s||n.hasThumb,children:r.jsx(QG,{ref:e,...a})})}),QG=b.forwardRef((t,e)=>{const{__scopeScrollArea:s,style:a,...n}=t,i=or(Sm,s),c=Q4(Sm,s),{onThumbPositionChange:u}=c,f=wt(e,g=>c.onThumbChange(g)),h=b.useRef(void 0),p=gp(()=>{h.current&&(h.current(),h.current=void 0)},100);return b.useEffect(()=>{const g=i.viewport;if(g){const x=()=>{if(p(),!h.current){const y=tX(g,u);h.current=y,u()}};return u(),g.addEventListener("scroll",x),()=>g.removeEventListener("scroll",x)}},[i.viewport,p,u]),r.jsx(Ke.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:Ge(t.onPointerDownCapture,g=>{const y=g.target.getBoundingClientRect(),_=g.clientX-y.left,j=g.clientY-y.top;c.onThumbPointerDown({x:_,y:j})}),onPointerUp:Ge(t.onPointerUp,c.onThumbPointerUp)})});eR.displayName=Sm;var Ty="ScrollAreaCorner",tR=b.forwardRef((t,e)=>{const s=or(Ty,t.__scopeScrollArea),a=!!(s.scrollbarX&&s.scrollbarY);return s.type!=="scroll"&&a?r.jsx(JG,{...t,ref:e}):null});tR.displayName=Ty;var JG=b.forwardRef((t,e)=>{const{__scopeScrollArea:s,...a}=t,n=or(Ty,s),[i,c]=b.useState(0),[u,f]=b.useState(0),h=!!(i&&u);return xc(n.scrollbarX,()=>{var g;const p=((g=n.scrollbarX)==null?void 0:g.offsetHeight)||0;n.onCornerHeightChange(p),f(p)}),xc(n.scrollbarY,()=>{var g;const p=((g=n.scrollbarY)==null?void 0:g.offsetWidth)||0;n.onCornerWidthChange(p),c(p)}),h?r.jsx(Ke.div,{...a,ref:e,style:{width:i,height:u,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Em(t){return t?parseInt(t,10):0}function sR(t,e){const s=t/e;return isNaN(s)?0:s}function pp(t){const e=sR(t.viewport,t.content),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-s)*e;return Math.max(a,18)}function eX(t,e,s,a="ltr"){const n=pp(s),i=n/2,c=e||i,u=n-c,f=s.scrollbar.paddingStart+c,h=s.scrollbar.size-s.scrollbar.paddingEnd-u,p=s.content-s.viewport,g=a==="ltr"?[0,p]:[p*-1,0];return aR([f,h],g)(t)}function Z2(t,e,s="ltr"){const a=pp(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-n,c=e.content-e.viewport,u=i-a,f=s==="ltr"?[0,c]:[c*-1,0],h=Vv(t,f);return aR([0,c],[0,u])(h)}function aR(t,e){return s=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const a=(e[1]-e[0])/(t[1]-t[0]);return e[0]+a*(s-t[0])}}function rR(t,e){return t>0&&t<e}var tX=(t,e=()=>{})=>{let s={left:t.scrollLeft,top:t.scrollTop},a=0;return function n(){const i={left:t.scrollLeft,top:t.scrollTop},c=s.left!==i.left,u=s.top!==i.top;(c||u)&&e(),s=i,a=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(a)};function gp(t,e){const s=Js(t),a=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(a.current),[]),b.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(s,e)},[s,e])}function xc(t,e){const s=Js(e);gs(()=>{let a=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(s)});return n.observe(t),()=>{window.cancelAnimationFrame(a),n.unobserve(t)}}},[t,s])}var sX=X4,aX=K4,rX=tR;function Ql({className:t,children:e,...s}){return r.jsxs(sX,{"data-slot":"scroll-area",className:Ie("relative",t),...s,children:[r.jsx(aX,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:e}),r.jsx(nX,{}),r.jsx(rX,{})]})}function nX({className:t,orientation:e="vertical",...s}){return r.jsx(W4,{"data-slot":"scroll-area-scrollbar",orientation:e,className:Ie("flex touch-none p-px transition-colors select-none",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...s,children:r.jsx(eR,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const nR=Yt("/_authenticated/game/spells")({component:oX,validateSearch:t=>({character:t.character||""})});function oX(){const t=Rt(),{character:e}=nR.useSearch(),[s,a]=b.useState(null),[n,i]=b.useState([]),[c,u]=b.useState(null),[f,h]=b.useState({slot1:null,slot2:null,slot3:null}),[p,g]=b.useState({slot1:null,slot2:null,slot3:null}),[x,y]=b.useState(!0),[_,j]=b.useState(!1),[N,S]=b.useState(""),[C,E]=b.useState("all"),[M,R]=b.useState("all");b.useEffect(()=>{if(!e){me.error("Personagem no especificado"),t({to:"/game/play"});return}P()},[e]);const P=async()=>{if(e){y(!0);try{const A=await at.getCharacter(e);if(!A.success||!A.data)throw new Error("Erro ao carregar personagem");a(A.data);const B=await Zs.getCharacterAvailableSpells(e);if(!B.success||!B.data)throw new Error("Erro ao carregar magias");i(B.data);const V=await Zs.getCharacterSpellStats(e);V.success&&V.data&&u(V.data);const W=B.data.filter(F=>F.is_equipped),L={slot1:W.find(F=>F.slot_position===1)||null,slot2:W.find(F=>F.slot_position===2)||null,slot3:W.find(F=>F.slot_position===3)||null};h(L),g(L)}catch(A){console.error("Erro ao carregar dados:",A),me.error("Erro ao carregar dados das magias")}finally{y(!1)}}},$=(A,B)=>{h(V=>{const W={...V};return Object.keys(W).forEach(L=>{var ie;const F=L;((ie=W[F])==null?void 0:ie.id)===A.id&&(W[F]=null)}),W[B]=A,W})},k=A=>{h(B=>({...B,[A]:null}))},O=async()=>{var A,B,V;if(e){j(!0);try{const W=[((A=f.slot1)==null?void 0:A.id)||null,((B=f.slot2)==null?void 0:B.id)||null,((V=f.slot3)==null?void 0:V.id)||null],L=await Zs.setCharacterSpells(e,W);if(!L.success)throw new Error(L.error||"Erro ao salvar seleo");g({...f}),me.success("Seleo de magias salva com sucesso!"),await P()}catch(W){console.error("Erro ao salvar seleo:",W),me.error("Erro ao salvar seleo de magias")}finally{j(!1)}}},H=A=>({damage:r.jsx(ea,{className:"h-5 w-5"}),heal:r.jsx(cs,{className:"h-5 w-5"}),buff:r.jsx(vt,{className:"h-5 w-5"}),debuff:r.jsx(Qs,{className:"h-5 w-5"}),dot:r.jsx(qm,{className:"h-5 w-5"}),hot:r.jsx(lt,{className:"h-5 w-5"})})[A]||r.jsx(Ct,{className:"h-5 w-5"}),Y=A=>({damage:"text-red-500 border-red-500/30 bg-red-500/5",heal:"text-green-500 border-green-500/30 bg-green-500/5",buff:"text-blue-500 border-blue-500/30 bg-blue-500/5",debuff:"text-purple-500 border-purple-500/30 bg-purple-500/5",dot:"text-orange-500 border-orange-500/30 bg-orange-500/5",hot:"text-emerald-500 border-emerald-500/30 bg-emerald-500/5"})[A]||"text-gray-500 border-gray-500/30 bg-gray-500/5",I=A=>A<=15?"early":A<=35?"mid":"high",z=A=>{const B=I(A);return{early:"text-green-400",mid:"text-yellow-400",high:"text-red-400"}[B]},ee=n.filter(A=>{const B=A.name.toLowerCase().includes(N.toLowerCase())||A.description.toLowerCase().includes(N.toLowerCase()),V=C==="all"||A.effect_type===C,W=M==="all"||I(A.unlocked_at_level)===M;return B&&V&&W}),G=JSON.stringify(f)!==JSON.stringify(p);return x?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Carregando magias..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(lt,{className:"h-8 w-8 text-purple-500"}),"Grimrio de Magias"]}),r.jsxs("p",{className:"text-muted-foreground",children:["Gerencie as magias de ",r.jsx("span",{className:"font-medium text-primary",children:s.name})]})]})]}),G&&r.jsx(fe,{onClick:O,disabled:_,size:"lg",className:"bg-purple-600 hover:bg-purple-700",children:_?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Salvando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(hb,{className:"h-4 w-4 mr-2"}),"Salvar Seleo"]})})]}),c&&r.jsxs(Oe,{className:"mb-6",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-5 w-5"}),"Estatsticas de Magia"]})}),r.jsx(He,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-500",children:c.total_available}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Disponveis"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-500",children:[c.total_equipped,"/3"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Magias Equipadas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:s.level}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Nvel Atual"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-500",children:c.highest_level_unlocked}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mximo Desbloqueado"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(Oe,{className:"lg:col-span-2",children:[r.jsxs(ht,{children:[r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Ei,{className:"h-5 w-5"}),"Seleo de Magias (Mximo 3)"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ms,{placeholder:"Buscar magias...",value:N,onChange:A=>S(A.target.value),className:"pl-10"})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:C,onChange:A=>E(A.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Tipos"}),r.jsx("option",{value:"damage",children:"Dano"}),r.jsx("option",{value:"heal",children:"Cura"}),r.jsx("option",{value:"buff",children:"Benefcio"}),r.jsx("option",{value:"debuff",children:"Maldio"}),r.jsx("option",{value:"dot",children:"Dano Contnuo"}),r.jsx("option",{value:"hot",children:"Cura Contnua"})]}),r.jsxs("select",{value:M,onChange:A=>R(A.target.value),className:"px-3 py-2 border border-border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:"Todos os Nveis"}),r.jsx("option",{value:"early",children:"Iniciante (1-15)"}),r.jsx("option",{value:"mid",children:"Intermedirio (16-35)"}),r.jsx("option",{value:"high",children:"Avanado (36-50)"})]})]})]})]}),r.jsx(He,{children:r.jsx(Ql,{className:"h-[600px]",children:r.jsxs("div",{className:"grid gap-3",children:[ee.map(A=>{const B=Object.values(f).some(W=>(W==null?void 0:W.id)===A.id),V=A.unlocked_at_level<=s.level;return r.jsx(Oe,{className:`transition-all cursor-pointer ${B?"ring-2 ring-purple-500 bg-purple-500/10":V?"hover:bg-accent/50":"opacity-50 cursor-not-allowed"} ${Y(A.effect_type)}`,onClick:()=>{if(V){if(B){Object.keys(f).forEach(W=>{var F;const L=W;((F=f[L])==null?void 0:F.id)===A.id&&k(L)});return}f.slot1?f.slot2?f.slot3?me.warning("Voc j selecionou 3 magias! Remova uma para adicionar outra."):$(A,"slot3"):$(A,"slot2"):$(A,"slot1")}},children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${Y(A.effect_type)}`,children:H(A.effect_type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold truncate",children:A.name}),B&&r.jsx(ze,{variant:"secondary",className:"bg-purple-500/20 text-purple-400",children:"Selecionada"}),!V&&r.jsxs(ze,{variant:"destructive",className:"text-xs",children:["Nvel ",A.unlocked_at_level]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:A.description}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(iv,{className:"h-3 w-3"}),A.mana_cost," Mana"]}),r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(om,{className:"h-3 w-3"}),A.cooldown,"T CD"]}),r.jsxs(ze,{variant:"outline",className:"flex items-center gap-1",children:[r.jsx(ea,{className:"h-3 w-3"}),A.effect_value]}),r.jsxs(ze,{variant:"outline",className:`flex items-center gap-1 ${z(A.unlocked_at_level)}`,children:[r.jsx(jt,{className:"h-3 w-3"}),"Nvel ",A.unlocked_at_level]})]})]})]})})},A.id)}),ee.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(lt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Nenhuma magia encontrada com os filtros selecionados"})]})]})})})]}),r.jsxs(Oe,{children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-5 w-5"}),"Magias Selecionadas"]})}),r.jsxs(He,{className:"space-y-4",children:[[1,2,3].map(A=>{const B=`slot${A}`,V=f[B];return r.jsxs(Oe,{className:`p-4 border-2 border-dashed transition-all ${V?`border-solid ${Y(V.effect_type)}`:"border-muted-foreground/20 hover:border-muted-foreground/40"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Slot ",A," (Tecla ",A,")"]}),V&&r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>k(B),className:"h-6 w-6 p-0 hover:bg-red-500/10 hover:text-red-500",children:r.jsx(Oi,{className:"h-3 w-3"})})]}),V?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded ${Y(V.effect_type)}`,children:H(V.effect_type)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:V.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:Zs.translateEffectType(V.effect_type)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(iv,{className:"h-3 w-3"}),r.jsx("span",{children:V.mana_cost})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(om,{className:"h-3 w-3"}),r.jsxs("span",{children:[V.cooldown,"T"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ea,{className:"h-3 w-3"}),r.jsx("span",{children:V.effect_value})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3"}),r.jsxs("span",{children:["Nv ",V.unlocked_at_level]})]})]})]}):r.jsxs("div",{className:"text-center text-muted-foreground",children:[r.jsx(lt,{className:"h-8 w-8 mx-auto mb-2 opacity-30"}),r.jsx("p",{className:"text-xs",children:"Clique em uma magia para equipar"})]})]},A)}),G&&r.jsx("div",{className:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-400 flex items-center gap-2",children:[r.jsx("span",{className:"h-2 w-2 bg-yellow-400 rounded-full animate-pulse"}),"Voc tem alteraes no salvas"]})})]})]})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-muted-foreground",children:"Personagem no encontrado"}),r.jsx(fe,{onClick:()=>t({to:"/game/play"}),className:"mt-4",children:"Voltar"})]})})}const iX=({activeMode:t,onModeChange:e,statusFilter:s,onStatusFilterChange:a,nameFilter:n,onNameFilterChange:i,currentPage:c,totalPages:u,onPageChange:f,isLoading:h=!1})=>{const p=[{key:"floor",label:"Andar Mais Alto",icon:Nr,color:"text-yellow-500"},{key:"level",label:"Maior Nvel",icon:La,color:"text-blue-500"},{key:"gold",label:"Mais Rico",icon:wa,color:"text-amber-500"}],g=[{key:"all",label:"Todos",shortLabel:"Todos",icon:jC,color:"text-gray-500"},{key:"alive",label:"Apenas Vivos",shortLabel:"Vivos",icon:cs,color:"text-green-500"},{key:"dead",label:"Apenas Mortos",shortLabel:"Mortos",icon:Qs,color:"text-red-500"}];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Modalidade"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(x=>{const y=x.icon,_=t===x.key;return r.jsxs(fe,{variant:_?"default":"outline",size:"sm",onClick:()=>e(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${_?"":"hover:bg-muted"}`,children:[r.jsx(y,{className:`h-3 w-3 ${_?"text-white":"text-muted-foreground"}`}),r.jsx("span",{className:"hidden sm:inline",children:x.label}),r.jsx("span",{className:"sm:hidden",children:x.key==="floor"?"Andar":x.key==="level"?"Nvel":"Ouro"})]},x.key)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Status"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(x=>{const y=x.icon,_=s===x.key;return r.jsxs(fe,{variant:_?"default":"outline",size:"sm",onClick:()=>a(x.key),disabled:h,className:`flex items-center gap-2 text-xs ${_?"":"hover:bg-muted"}`,children:[r.jsx(y,{className:`h-3 w-3 ${_?"text-white":"text-muted-foreground"}`}),r.jsx("span",{className:"hidden sm:inline",children:x.label}),r.jsx("span",{className:"sm:hidden",children:x.shortLabel})]},x.key)})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Buscar Jogador"}),r.jsxs("div",{className:"relative",children:[r.jsx(Um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ms,{type:"text",placeholder:"Digite o nome do jogador...",value:n,onChange:x=>i(x.target.value),disabled:h,className:"pl-10 text-sm"})]})]}),u>1&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:"Pginas"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>f(c-1),disabled:c<=1||h,className:"flex items-center gap-2",children:[r.jsx(nv,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Anterior"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Pgina ",c," de ",u]})}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>f(c+1),disabled:c>=u||h,className:"flex items-center gap-2",children:[r.jsx("span",{className:"hidden sm:inline",children:"Prxima"}),r.jsx(gC,{className:"h-4 w-4"})]})]})]})]})},Oa=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString(),lX=({entries:t,mode:e,currentUserId:s})=>{const a=f=>{switch(f){case 0:return"text-yellow-500";case 1:return"text-gray-400";case 2:return"text-amber-700";default:return"text-gray-300"}},n=(f,h)=>{switch(h){case"floor":return`Andar ${f.floor}`;case"level":return`Nvel ${f.character_level}`;case"gold":return`${Oa(f.character_gold)} Gold`;default:return`Andar ${f.floor}`}},i=(f,h)=>{switch(h){case"floor":return`Nvel ${f.character_level}  ${Oa(f.character_gold)} Gold`;case"level":return`Andar ${f.floor}  ${Oa(f.character_gold)} Gold`;case"gold":return`Andar ${f.floor}  Nvel ${f.character_level}`;default:return`Nvel ${f.character_level}`}},u=(f=>{switch(f){case"floor":return Nr;case"level":return La;case"gold":return wa;default:return Nr}})(e);return t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Nenhum registro encontrado para esta modalidade."})]}):r.jsxs(rp,{children:[r.jsx(np,{children:r.jsxs(Vr,{children:[r.jsx(la,{className:"w-12 text-center",children:"Pos."}),r.jsx(la,{children:"Jogador"}),r.jsx(la,{className:"text-right",children:"Valor Principal"}),r.jsx(la,{className:"text-right hidden sm:table-cell",children:"Detalhes"}),r.jsx(la,{className:"text-right",children:"Data"})]})}),r.jsx(op,{children:t.map((f,h)=>r.jsxs(Vr,{className:f.user_id===s?"bg-primary/5":"",children:[r.jsx(Rs,{className:"text-center font-medium",children:h<3?r.jsx(Nr,{className:`inline h-4 w-4 ${a(h)}`}):r.jsx("span",{className:"text-muted-foreground",children:h+1})}),r.jsx(Rs,{children:r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:f.player_name}),f.character_alive?r.jsx(cs,{className:"h-3 w-3 text-green-500"}):r.jsx(Qs,{className:"h-3 w-3 text-red-500"}),f.user_id===s&&r.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Voc"})]}),r.jsx("div",{className:"text-xs text-muted-foreground sm:hidden",children:i(f,e)})]})})}),r.jsx(Rs,{className:"text-right font-medium",children:n(f,e)}),r.jsx(Rs,{className:"text-right text-muted-foreground hidden sm:table-cell",children:i(f,e)}),r.jsx(Rs,{className:"text-right text-muted-foreground",children:f.created_at?new Date(f.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"})]},f.id))})]})},cX=({stats:t,userRanking:e})=>{const[s,a]=b.useState(!0),[n,i]=b.useState(!1),c=e[0];return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Oe,{children:[r.jsx(ht,{className:"pb-3",children:r.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>a(!s),children:[r.jsx(xt,{className:"text-lg font-medium",children:"Suas Conquistas"}),s?r.jsx(fc,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]})}),s&&r.jsx(He,{className:"pt-0",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(Nr,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestFloor}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Melhor Andar"})]}),r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(La,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-2xl font-bold mb-1",children:t.bestLevel}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Maior Nvel"})]}),r.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg border",children:[r.jsx(wa,{className:"h-5 w-5 text-muted-foreground mx-auto mb-2"}),r.jsx("div",{className:"text-xl font-bold mb-1",title:`${t.bestGold.toLocaleString("pt-BR")} Gold`,children:Oa(t.bestGold)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Mais Rico"})]})]})})]}),c&&r.jsxs(Oe,{children:[r.jsx(ht,{className:"pb-3",children:r.jsxs(fe,{variant:"ghost",className:"w-full justify-between p-0 h-auto hover:bg-transparent",onClick:()=>i(!n),children:[r.jsxs(xt,{className:"text-lg font-medium flex items-center gap-2",children:[r.jsx(pC,{className:"h-4 w-4"}),"ltima Tentativa"]}),n?r.jsx(fc,{className:"h-4 w-4 text-muted-foreground"}):r.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]})}),n&&r.jsx(He,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[c.character_alive?r.jsx("span",{className:"text-sm",children:""}):r.jsx("span",{className:"text-sm",children:""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:c.character_alive?"Vivo":"Morto"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(c.created_at).toLocaleDateString("pt-BR")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold",children:["Andar ",c.highest_floor]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Nvel ",c.character_level]})]})]})})]}),r.jsx(Oe,{children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total de Tentativas:"}),r.jsx("span",{className:"font-medium",children:t.totalRuns})]})})})]})},Q2=20,uX=Yt("/_authenticated/game/ranking")({component:dX});function dX(){const t=Rt(),{user:e}=zs(),[s,a]=b.useState([]),[n,i]=b.useState([]),[c,u]=b.useState({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),[f,h]=b.useState(!0),[p,g]=b.useState("floor"),[x,y]=b.useState("all"),[_,j]=b.useState(""),[N,S]=b.useState(1),[C,E]=b.useState(1),[M,R]=b.useState("");b.useEffect(()=>{const I=setTimeout(()=>{R(_)},500);return()=>clearTimeout(I)},[_]),b.useEffect(()=>{S(1)},[p,x,M]),b.useEffect(()=>{k()},[e,p,x,M,N]);const P=b.useCallback(async()=>{try{const I=await Zl.countRankingEntries(x,M);if(I.data!==null){const z=I.data,ee=Math.max(1,Math.ceil(z/Q2));E(ee),console.log(`[RankingPage] Total de entradas: ${z}, pginas: ${ee}`)}}catch(I){console.error("Erro ao contar entradas:",I),E(1)}},[x,M]),$=async()=>{console.log("[RankingPage] Forando atualizao do ranking..."),await k()},k=async()=>{var I,z,ee;try{h(!0),console.log(`[RankingPage] Iniciando busca de dados - modo: ${p}, filtro: ${x}, nome: ${M}, pgina: ${N}`),await P();const G=await Zl.getGlobalRanking(p,Q2,x,M,N);if(console.log("[RankingPage] Resposta do ranking global:",{success:!G.error,error:G.error,dataLength:((I=G.data)==null?void 0:I.length)||0,data:G.data}),G.error?(console.error("Erro ao buscar ranking global:",G.error),a([])):(a(G.data||[]),console.log(`[RankingPage] Ranking global carregado: ${((z=G.data)==null?void 0:z.length)||0} entradas`),G.data&&G.data.length>0&&console.log("[RankingPage] Primeiros 5 personagens do ranking:",G.data.slice(0,5).map(A=>({name:A.player_name,floor:A.floor,level:A.character_level,alive:A.character_alive,user_id:A.user_id})))),e!=null&&e.id){const[A,B]=await Promise.all([Zl.getUserRanking(e.id,15),Zl.getUserStats(e.id)]);A.error?(console.error("Erro ao buscar ranking do usurio:",A.error),i([])):(i(A.data||[]),console.log(`[RankingPage] Ranking do usurio carregado: ${((ee=A.data)==null?void 0:ee.length)||0} entradas`)),B.error?(console.error("Erro ao buscar estatsticas do usurio:",B.error),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})):(u(B.data||{bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0}),console.log("[RankingPage] Estatsticas do usurio carregadas:",B.data))}}catch(G){console.error("Erro ao buscar dados do ranking:",G),a([]),i([]),u({bestFloor:0,bestLevel:1,bestGold:0,totalRuns:0,aliveCharacters:0})}finally{h(!1)}},O=I=>{switch(I){case"floor":return"Ranking por Andar Mais Alto";case"level":return"Ranking por Nvel Mais Alto";case"gold":return"Ranking por Mais Ouro";default:return"Ranking"}},H=I=>{S(I)},Y=()=>{const I=[];return x!=="all"&&I.push(x==="alive"?"vivos":"mortos"),M&&I.push(`nome: "${M}"`),I.length>0?` (${I.join(", ")})`:""};return r.jsxs("div",{className:"container mx-auto p-4 max-w-7xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:O(p)}),r.jsxs("p",{className:"text-muted-foreground",children:["Veja os melhores jogadores",Y()]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:$,disabled:f,children:"Atualizar"}),!1]})]}),r.jsx(Oe,{className:"mb-6",children:r.jsx(ht,{children:r.jsx(iX,{activeMode:p,onModeChange:g,statusFilter:x,onStatusFilterChange:y,nameFilter:_,onNameFilterChange:j,currentPage:N,totalPages:C,onPageChange:H,isLoading:f})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e&&r.jsx("div",{className:"lg:col-span-1",children:r.jsx(cX,{stats:c,userRanking:n.map(I=>({highest_floor:I.floor,character_level:I.character_level,character_gold:I.character_gold,character_alive:I.character_alive,created_at:I.created_at}))})}),r.jsx("div",{className:e?"lg:col-span-3":"lg:col-span-4",children:r.jsxs(Oe,{children:[r.jsx(He,{className:"p-0",children:r.jsx(lX,{entries:s,mode:p,currentUserId:e==null?void 0:e.id})}),C>1&&r.jsxs(Ey,{className:"flex justify-center gap-2",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>H(N-1),disabled:N<=1||f,children:"Anterior"}),r.jsxs("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Pgina ",N," de ",C]}),r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>H(N+1),disabled:N>=C||f,children:"Prxima"})]})]})})]})]})}const Rn=gA,fX=xA,oR=b.forwardRef(({className:t,...e},s)=>r.jsx(Ym,{ref:s,className:Ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));oR.displayName=Ym.displayName;const Zr=b.forwardRef(({className:t,children:e,...s},a)=>r.jsxs(fX,{children:[r.jsx(oR,{}),r.jsxs(Km,{ref:a,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[e,r.jsxs(bA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(Oi,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zr.displayName=Km.displayName;const Mn=({className:t,...e})=>r.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Mn.displayName="DialogHeader";const iR=({className:t,...e})=>r.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});iR.displayName="DialogFooter";const Qr=b.forwardRef(({className:t,...e},s)=>r.jsx(Wm,{ref:s,className:Ie("text-lg font-semibold leading-none tracking-tight",t),...e}));Qr.displayName=Wm.displayName;const vc=b.forwardRef(({className:t,...e},s)=>r.jsx(vA,{ref:s,className:Ie("text-sm text-muted-foreground",t),...e}));vc.displayName=vA.displayName;var Ry="Progress",My=100,[hX,OW]=nr(Ry),[mX,pX]=hX(Ry),lR=b.forwardRef((t,e)=>{const{__scopeProgress:s,value:a=null,max:n,getValueLabel:i=gX,...c}=t;(n||n===0)&&!J2(n)&&console.error(xX(`${n}`,"Progress"));const u=J2(n)?n:My;a!==null&&!eE(a,u)&&console.error(vX(`${a}`,"Progress"));const f=eE(a,u)?a:null,h=Cm(f)?i(f,u):void 0;return r.jsx(mX,{scope:s,value:f,max:u,children:r.jsx(Ke.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":Cm(f)?f:void 0,"aria-valuetext":h,role:"progressbar","data-state":dR(f,u),"data-value":f??void 0,"data-max":u,...c,ref:e})})});lR.displayName=Ry;var cR="ProgressIndicator",uR=b.forwardRef((t,e)=>{const{__scopeProgress:s,...a}=t,n=pX(cR,s);return r.jsx(Ke.div,{"data-state":dR(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...a,ref:e})});uR.displayName=cR;function gX(t,e){return`${Math.round(t/e*100)}%`}function dR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Cm(t){return typeof t=="number"}function J2(t){return Cm(t)&&!isNaN(t)&&t>0}function eE(t,e){return Cm(t)&&!isNaN(t)&&t<=e&&t>=0}function xX(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${My}\`.`}function vX(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${My} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var fR=lR,bX=uR;const Ur=b.forwardRef(({className:t,value:e,...s},a)=>r.jsx(fR,{ref:a,className:Ie("relative h-2 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:r.jsx(bX,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ur.displayName=fR.displayName;const yX=Pd("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Zu=b.forwardRef(({className:t,variant:e,...s},a)=>r.jsx("div",{ref:a,role:"alert",className:Ie(yX({variant:e}),t),...s}));Zu.displayName="Alert";const wX=b.forwardRef(({className:t,...e},s)=>r.jsx("h5",{ref:s,className:Ie("mb-1 font-medium leading-none tracking-tight",t),...e}));wX.displayName="AlertTitle";const Qu=b.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:Ie("text-sm [&_p]:leading-relaxed",t),...e}));Qu.displayName="AlertDescription";const tE=20,_X=Yt("/_authenticated/game/play")({component:jX});function jX(){const t=Rt(),{user:e}=zs(),[s,a]=b.useState([]),[n,i]=b.useState(null),[c,u]=b.useState([]),[f,h]=b.useState(!0),[p,g]=b.useState(!1),[x,y]=b.useState(""),[_,j]=b.useState({isValid:!0}),[N,S]=b.useState(!1),[C,E]=b.useState(!1),[M,R]=b.useState(null);b.useEffect(()=>{e!=null&&e.id&&P()},[e]),b.useEffect(()=>{if(x.trim()){const A=tr.validateCharacterName(x);if(A.isValid&&s.length>0){const B=s.map(W=>W.name),V=tr.formatCharacterName(x);if(tr.isTooSimilar(V,B)){const W=tr.generateNameSuggestions(V);j({isValid:!1,error:"Nome muito similar a um personagem existente",suggestions:W})}else j(A)}else j(A)}else j({isValid:!0})},[x,s]);const P=async()=>{try{h(!0);const A=await at.getUserCharacters(e.id);A.success&&A.data&&a(A.data);const B=await at.getUserCharacterProgression(e.id);B.success&&B.data&&i(B.data)}catch(A){console.error("Erro ao carregar dados:",A),me.error("Erro ao carregar dados dos personagens")}finally{h(!1)}};b.useEffect(()=>{if(n&&s!==void 0){const A=[];for(let B=1;B<=tE;B++){const V=s.find(F=>s.indexOf(F)+1===B)||null,W=B<=n.max_character_slots,L=$(B);A.push({slotNumber:B,character:V,isUnlocked:W,requiredTotalLevel:L})}u(A)}},[n,s]);const $=A=>A<=3?0:(A-3)*15,k=async()=>{if(!(!(e!=null&&e.id)||!x.trim()||!_.isValid)){S(!0);try{const A=await at.createCharacter({user_id:e.id,name:x.trim()});A.success&&A.data?(me.success("Personagem criado com sucesso!",{description:`${tr.formatCharacterName(x)} foi criado!`}),await P(),I()):me.error("Erro ao criar personagem",{description:A.error})}catch(A){console.error("Erro ao criar personagem:",A),me.error("Erro ao criar personagem")}finally{S(!1)}}},O=A=>{R(A),E(!0)},H=async()=>{if(M)try{const A=await at.getCharacter(M.id);A.success&&A.data?t({to:"/game/play/hub",search:{character:M.id}}):me.error("Erro ao selecionar personagem",{description:A.error})}catch(A){console.error("Erro ao selecionar personagem:",A),me.error("Erro ao selecionar personagem")}},Y=()=>{g(!0)},I=()=>{g(!1),y(""),j({isValid:!0})},z=A=>{y(A)},ee=A=>{const V=(L=>Math.floor(100*Math.pow(1.1,L-1)))(A.level),W=A.xp/V*100;return r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Nvel:"}),r.jsx("span",{className:"font-medium",children:A.level})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"XP:"}),r.jsxs("span",{className:"font-medium",children:[A.xp,"/",V]})]}),r.jsx(Ur,{value:W,className:"h-2"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Andar Mximo:"}),r.jsx("span",{className:"font-medium",children:A.floor})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ouro:"}),r.jsx("span",{className:"font-medium text-yellow-600",children:A.gold})]})]})},G=A=>{if(!A.isUnlocked)return r.jsx(Oe,{className:"opacity-50",children:r.jsxs(He,{className:"p-4 text-center",children:[r.jsx(HB,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Slot ",A.slotNumber]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Requer nvel total ",A.requiredTotalLevel]})]})},A.slotNumber);if(!A.character)return r.jsx(Oe,{className:"cursor-pointer hover:bg-accent/50 border-dashed",children:r.jsxs(He,{className:"p-4 text-center",onClick:()=>Y(),children:[r.jsx($o,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Criar Personagem"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Slot ",A.slotNumber]})]})},A.slotNumber);const B=A.character,V=B.hp>0;return r.jsxs(Oe,{className:`cursor-pointer hover:bg-accent/50 ${V?"":"border-red-500/50 bg-red-500/5"}`,onClick:()=>V&&O(B),children:[r.jsx(ht,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(xt,{className:"text-base flex items-center gap-2",children:[B.name,!V&&r.jsx(Qs,{className:"h-4 w-4 text-red-500"}),B.floor>=100&&r.jsx(Ei,{className:"h-4 w-4 text-yellow-500"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Slot ",A.slotNumber]})]})}),r.jsxs(He,{className:"pt-0",children:[ee(B),!V&&r.jsxs(Zu,{className:"mt-3 border-red-500/50 bg-red-500/10",children:[r.jsx(Qs,{className:"h-4 w-4 text-red-500"}),r.jsx(Qu,{className:"text-red-700",children:"Este personagem morreu permanentemente"})]})]})]},A.slotNumber)};return f?r.jsx("div",{className:"container mx-auto p-4",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{children:"Carregando personagens..."})]})})}):r.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>t({to:"/game"}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Selecionar Personagem"}),r.jsx("p",{className:"text-muted-foreground",children:"Escolha um personagem para jogar"})]})]}),n&&r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Progresso Total"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jC,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:n.total_character_level}),r.jsx("span",{className:"text-muted-foreground",children:"nvel"})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[n.max_character_slots,"/",tE," slots"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:c.map(G)}),r.jsx(Rn,{open:p,onOpenChange:g,children:r.jsxs(Zr,{children:[r.jsxs(Mn,{children:[r.jsx(Qr,{children:"Criar Novo Personagem"}),r.jsx(vc,{children:"Escolha um nome para seu novo personagem. Lembre-se: a morte  permanente!"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(Ms,{placeholder:"Nome do personagem",value:x,onChange:A=>y(A.target.value),className:_.isValid?"":"border-red-500"}),!_.isValid&&_.error&&r.jsxs(Zu,{className:"mt-2 border-red-500/50 bg-red-500/10",children:[r.jsx(xC,{className:"h-4 w-4 text-red-500"}),r.jsx(Qu,{className:"text-red-700",children:_.error})]}),_.suggestions&&_.suggestions.length>0&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Sugestes:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:_.suggestions.map((A,B)=>r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>z(A),children:A},B))})]})]}),r.jsxs(Zu,{children:[r.jsx(Qs,{className:"h-4 w-4"}),r.jsxs(Qu,{children:[r.jsx("strong",{children:"Aviso:"})," Este jogo possui morte permanente (permadeath). Se seu personagem morrer, ele ser perdido para sempre!"]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(fe,{variant:"outline",onClick:I,children:"Cancelar"}),r.jsx(fe,{onClick:k,disabled:!x.trim()||!_.isValid||N,children:N?"Criando...":"Criar Personagem"})]})]})]})}),r.jsx(Rn,{open:C,onOpenChange:E,children:r.jsxs(Zr,{children:[r.jsxs(Mn,{children:[r.jsx(Qr,{children:"Confirmar Seleo"}),r.jsxs(vc,{children:["Voc est prestes a jogar com ",M==null?void 0:M.name]})]}),r.jsxs(Zu,{children:[r.jsx(mb,{className:"h-4 w-4"}),r.jsxs(Qu,{children:[r.jsx("strong",{children:"Lembrete:"})," Este jogo possui morte permanente. Se seu personagem morrer durante a aventura, ele ser perdido para sempre!"]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(fe,{variant:"outline",onClick:()=>E(!1),children:"Cancelar"}),r.jsxs(fe,{onClick:H,children:[r.jsx(dB,{className:"h-4 w-4 mr-2"}),"Confirmar e Jogar"]})]})]})})]})}var Mx="rovingFocusGroup.onEntryFocus",NX={bubbles:!1,cancelable:!0},qd="RovingFocusGroup",[Kv,hR,SX]=ST(qd),[EX,mR]=nr(qd,[SX]),[CX,AX]=EX(qd),pR=b.forwardRef((t,e)=>r.jsx(Kv.Provider,{scope:t.__scopeRovingFocusGroup,children:r.jsx(Kv.Slot,{scope:t.__scopeRovingFocusGroup,children:r.jsx(kX,{...t,ref:e})})}));pR.displayName=qd;var kX=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,orientation:a,loop:n=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:f,onEntryFocus:h,preventScrollOnEntryFocus:p=!1,...g}=t,x=b.useRef(null),y=wt(e,x),_=ip(i),[j,N]=To({prop:c,defaultProp:u??null,onChange:f,caller:qd}),[S,C]=b.useState(!1),E=Js(h),M=hR(s),R=b.useRef(!1),[P,$]=b.useState(0);return b.useEffect(()=>{const k=x.current;if(k)return k.addEventListener(Mx,E),()=>k.removeEventListener(Mx,E)},[E]),r.jsx(CX,{scope:s,orientation:a,dir:_,loop:n,currentTabStopId:j,onItemFocus:b.useCallback(k=>N(k),[N]),onItemShiftTab:b.useCallback(()=>C(!0),[]),onFocusableItemAdd:b.useCallback(()=>$(k=>k+1),[]),onFocusableItemRemove:b.useCallback(()=>$(k=>k-1),[]),children:r.jsx(Ke.div,{tabIndex:S||P===0?-1:0,"data-orientation":a,...g,ref:y,style:{outline:"none",...t.style},onMouseDown:Ge(t.onMouseDown,()=>{R.current=!0}),onFocus:Ge(t.onFocus,k=>{const O=!R.current;if(k.target===k.currentTarget&&O&&!S){const H=new CustomEvent(Mx,NX);if(k.currentTarget.dispatchEvent(H),!H.defaultPrevented){const Y=M().filter(A=>A.focusable),I=Y.find(A=>A.active),z=Y.find(A=>A.id===j),G=[I,z,...Y].filter(Boolean).map(A=>A.ref.current);vR(G,p)}}R.current=!1}),onBlur:Ge(t.onBlur,()=>C(!1))})})}),gR="RovingFocusGroupItem",xR=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:s,focusable:a=!0,active:n=!1,tabStopId:i,children:c,...u}=t,f=Fr(),h=i||f,p=AX(gR,s),g=p.currentTabStopId===h,x=hR(s),{onFocusableItemAdd:y,onFocusableItemRemove:_,currentTabStopId:j}=p;return b.useEffect(()=>{if(a)return y(),()=>_()},[a,y,_]),r.jsx(Kv.ItemSlot,{scope:s,id:h,focusable:a,active:n,children:r.jsx(Ke.span,{tabIndex:g?0:-1,"data-orientation":p.orientation,...u,ref:e,onMouseDown:Ge(t.onMouseDown,N=>{a?p.onItemFocus(h):N.preventDefault()}),onFocus:Ge(t.onFocus,()=>p.onItemFocus(h)),onKeyDown:Ge(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){p.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const S=MX(N,p.orientation,p.dir);if(S!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let E=x().filter(M=>M.focusable).map(M=>M.ref.current);if(S==="last")E.reverse();else if(S==="prev"||S==="next"){S==="prev"&&E.reverse();const M=E.indexOf(N.currentTarget);E=p.loop?PX(E,M+1):E.slice(M+1)}setTimeout(()=>vR(E))}}),children:typeof c=="function"?c({isCurrentTabStop:g,hasTabStop:j!=null}):c})})});xR.displayName=gR;var TX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function RX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function MX(t,e,s){const a=RX(t.key,s);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return TX[a]}function vR(t,e=!1){const s=document.activeElement;for(const a of t)if(a===s||(a.focus({preventScroll:e}),document.activeElement!==s))return}function PX(t,e){return t.map((s,a)=>t[(e+a)%t.length])}var DX=pR,OX=xR,xp="Tabs",[$X,$W]=nr(xp,[mR]),bR=mR(),[LX,Py]=$X(xp),yR=b.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:c="horizontal",dir:u,activationMode:f="automatic",...h}=t,p=ip(u),[g,x]=To({prop:a,onChange:n,defaultProp:i??"",caller:xp});return r.jsx(LX,{scope:s,baseId:Fr(),value:g,onValueChange:x,orientation:c,dir:p,activationMode:f,children:r.jsx(Ke.div,{dir:p,"data-orientation":c,...h,ref:e})})});yR.displayName=xp;var wR="TabsList",_R=b.forwardRef((t,e)=>{const{__scopeTabs:s,loop:a=!0,...n}=t,i=Py(wR,s),c=bR(s);return r.jsx(DX,{asChild:!0,...c,orientation:i.orientation,dir:i.dir,loop:a,children:r.jsx(Ke.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:e})})});_R.displayName=wR;var jR="TabsTrigger",NR=b.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,disabled:n=!1,...i}=t,c=Py(jR,s),u=bR(s),f=CR(c.baseId,a),h=AR(c.baseId,a),p=a===c.value;return r.jsx(OX,{asChild:!0,...u,focusable:!n,active:p,children:r.jsx(Ke.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:f,...i,ref:e,onMouseDown:Ge(t.onMouseDown,g=>{!n&&g.button===0&&g.ctrlKey===!1?c.onValueChange(a):g.preventDefault()}),onKeyDown:Ge(t.onKeyDown,g=>{[" ","Enter"].includes(g.key)&&c.onValueChange(a)}),onFocus:Ge(t.onFocus,()=>{const g=c.activationMode!=="manual";!p&&!n&&g&&c.onValueChange(a)})})})});NR.displayName=jR;var SR="TabsContent",ER=b.forwardRef((t,e)=>{const{__scopeTabs:s,value:a,forceMount:n,children:i,...c}=t,u=Py(SR,s),f=CR(u.baseId,a),h=AR(u.baseId,a),p=a===u.value,g=b.useRef(p);return b.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),r.jsx(Ba,{present:n||p,children:({present:x})=>r.jsx(Ke.div,{"data-state":p?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":f,hidden:!x,id:h,tabIndex:0,...c,ref:e,style:{...t.style,animationDuration:g.current?"0s":void 0},children:x&&i})})});ER.displayName=SR;function CR(t,e){return`${t}-trigger-${e}`}function AR(t,e){return`${t}-content-${e}`}var BX=yR,kR=_R,TR=NR,RR=ER;const MR=BX,Dy=b.forwardRef(({className:t,...e},s)=>r.jsx(kR,{ref:s,className:Ie("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Dy.displayName=kR.displayName;const xo=b.forwardRef(({className:t,...e},s)=>r.jsx(TR,{ref:s,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));xo.displayName=TR.displayName;const vo=b.forwardRef(({className:t,...e},s)=>r.jsx(RR,{ref:s,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));vo.displayName=RR.displayName;const IX=Yt("/_authenticated/game/guide")({component:VX});function VX(){const t=Rt();return r.jsxs("div",{className:"container mx-auto p-4 space-y-4",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Menu"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Guia do Tower Trials"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Aprenda tudo sobre o jogo"})]})]})}),r.jsxs(MR,{defaultValue:"basics",className:"w-full",children:[r.jsxs(Dy,{className:"grid w-full grid-cols-2 lg:grid-cols-4",children:[r.jsx(xo,{value:"basics",children:"Bsico"}),r.jsx(xo,{value:"combat",children:"Combate"}),r.jsx(xo,{value:"progression",children:"Progresso"}),r.jsx(xo,{value:"items",children:"Itens"})]}),r.jsx(vo,{value:"basics",children:r.jsx(Oe,{className:"p-6",children:r.jsx(Ql,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Conceitos Bsicos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Sobre o Jogo"}),r.jsx("p",{children:"Tower Trials  um jogo de RPG roguelike onde voc sobe uma torre misteriosa, enfrentando monstros cada vez mais fortes a cada andar. Sua misso  subir o mximo possvel, fortalecendo seu personagem e coletando equipamentos poderosos."}),r.jsx("h3",{className:"text-xl font-semibold",children:"Personagens"}),r.jsx("p",{children:"Cada jogador pode ter at 3 personagens ativos. Quando um personagem morre, ele  permanentemente deletado (sistema Permadeath). Os personagens possuem os seguintes atributos base:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"HP (Pontos de Vida):"})," Determina quanto dano voc pode receber"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Mana:"})," Recurso usado para lanar magias"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"ATK (Ataque):"})," Determina o dano base dos seus ataques"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"DEF (Defesa):"})," Reduz o dano recebido"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Speed (Velocidade):"})," Afeta suas chances de fuga e ordem de aes"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"A Torre"}),r.jsx("p",{children:"A torre  dividida em andares com diferentes caractersticas:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Andares Comuns:"})," Encontros normais com monstros"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Elite (a cada 5 andares):"})," Monstros mais fortes com melhores recompensas"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Evento (a cada 7 andares):"})," Eventos especiais e encontros nicos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Andares de Chefe (a cada 10 andares):"})," Batalhas desafiadoras contra chefes poderosos"]})]})]})]})})})}),r.jsx(vo,{value:"combat",children:r.jsx(Oe,{className:"p-6",children:r.jsx(Ql,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Sistema de Combate"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Aes de Combate"}),r.jsx("p",{children:"Durante o combate, voc pode realizar as seguintes aes:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Ataque:"})," Causa dano baseado no seu ATK menos a DEF do inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Defesa:"})," Aumenta temporariamente sua DEF por um turno"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Magias:"})," Efeitos variados que consomem Mana"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Itens:"})," Usar poes e outros consumveis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Fuga:"})," Tenta escapar do combate (chance baseada na velocidade)"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Magias"}),r.jsx("p",{children:"As magias so divididas em diferentes tipos de efeito:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Dano (Damage):"})," Causa dano direto ao inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Cura (Heal):"})," Recupera HP"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Buff:"})," Aumenta temporariamente seus atributos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Debuff:"})," Reduz temporariamente os atributos do inimigo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"DoT (Damage over Time):"})," Causa dano ao longo do tempo"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"HoT (Heal over Time):"})," Cura ao longo do tempo"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Comportamento dos Monstros"}),r.jsx("p",{children:"Os monstros possuem diferentes padres de comportamento:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Agressivo:"})," Foca em causar dano"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Defensivo:"})," Alterna entre ataques e defesa"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Balanceado:"})," Mistura diferentes estratgias"]})]})]})]})})})}),r.jsx(vo,{value:"progression",children:r.jsx(Oe,{className:"p-6",children:r.jsx(Ql,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Progresso"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Nveis"}),r.jsx("p",{children:"Ao derrotar monstros, voc ganha XP. A quantidade de XP necessria para subir de nvel aumenta em 50% a cada nvel. Ao subir de nvel:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Seus atributos base aumentam"}),r.jsx("li",{children:"HP e Mana so completamente restaurados"}),r.jsx("li",{children:"Voc pode desbloquear novas magias"})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Recompensas"}),r.jsx("p",{children:"Ao derrotar monstros, voc pode receber:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Gold:"})," Usado para comprar equipamentos e consumveis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Drops:"})," Itens que podem ser usados para crafting"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"XP:"})," Para subir de nvel"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Checkpoints"}),r.jsx("p",{children:"A cada 10 andares existe um checkpoint. Estes so pontos seguros onde voc pode:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsx("li",{children:"Salvar seu progresso"}),r.jsx("li",{children:"Retornar ao hub para comprar itens"}),r.jsx("li",{children:"Reorganizar seu equipamento"})]})]})]})})})}),r.jsx(vo,{value:"items",children:r.jsx(Oe,{className:"p-6",children:r.jsx(Ql,{className:"h-[600px] pr-4",children:r.jsxs("section",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Itens e Equipamentos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-semibold",children:"Equipamentos"}),r.jsx("p",{children:"Os equipamentos so divididos em trs categorias:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Armas (Weapons):"})," Aumentam principalmente ATK"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Armaduras (Armor):"})," Aumentam principalmente DEF"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Acessrios (Accessory):"})," Efeitos variados"]})]}),r.jsx("p",{children:"E em cinco raridades:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Comum (Common):"})," Equipamentos bsicos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Incomum (Uncommon):"})," Melhorias moderadas"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Raro (Rare):"})," Requer pergaminho especial para desbloquear"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"pico (Epic):"})," Requer pergaminho pico para desbloquear"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Lendrio (Legendary):"})," Os mais poderosos do jogo"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Consumveis"}),r.jsx("p",{children:"Existem diferentes tipos de consumveis:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Poes:"})," Recuperam HP ou Mana"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Antdotos:"})," Removem efeitos negativos"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Elixires:"})," Proporcionam buffs temporrios"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pergaminhos:"})," Desbloqueiam equipamentos especiais"]})]}),r.jsx("h3",{className:"text-xl font-semibold",children:"Sistema de Crafting"}),r.jsx("p",{children:"Voc pode criar itens usando materiais obtidos como drops dos monstros. Alguns consumveis e equipamentos s podem ser obtidos atravs de crafting."})]})]})})})})]})]})}function Mc(){const t=b.useContext(lC);if(!t)throw new Error("useGame deve ser usado dentro de um GameProvider");return t}var PR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sE=he.createContext&&he.createContext(PR),qX=["attr","size","title"];function UX(t,e){if(t==null)return{};var s=zX(t,e),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(e.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function zX(t,e){if(t==null)return{};var s={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(e.indexOf(a)>=0)continue;s[a]=t[a]}return s}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},Am.apply(this,arguments)}function aE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,a)}return s}function km(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?aE(Object(s),!0).forEach(function(a){FX(t,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):aE(Object(s)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(s,a))})}return t}function FX(t,e,s){return e=HX(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function HX(t){var e=GX(t,"string");return typeof e=="symbol"?e:e+""}function GX(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var a=s.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DR(t){return t&&t.map((e,s)=>he.createElement(e.tag,km({key:s},e.attr),DR(e.child)))}function vp(t){return e=>he.createElement(XX,Am({attr:km({},t.attr)},e),DR(t.child))}function XX(t){var e=s=>{var{attr:a,size:n,title:i}=t,c=UX(t,qX),u=n||s.size||"1em",f;return s.className&&(f=s.className),t.className&&(f=(f?f+" ":"")+t.className),he.createElement("svg",Am({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,c,{className:f,style:km(km({color:t.color||s.color},s.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&he.createElement("title",null,i),t.children)};return sE!==void 0?he.createElement(sE.Consumer,null,s=>e(s)):e(PR)}function rE(t){return vp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"},child:[]}]})(t)}function nE(t){return vp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(t)}function oE(t){return vp({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function YX(t){return vp({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const Oy=({characterId:t,newEquipment:e,slotType:s,currentEquipment:a,showTitle:n=!0,compact:i=!1})=>{const[c,u]=b.useState([]),[f,h]=b.useState(!0),[p,g]=b.useState(null);b.useEffect(()=>{(async()=>{h(!0),g(null);try{if(a!==void 0){const N=qL(a,e);u(N)}else{const N=await Ft.compareEquipmentStats(t,e.id,s);if(N.success&&N.data){const S=N.data.map(C=>({stat_name:C.stat_name,current_value:C.current_value,new_value:C.new_value,difference:C.difference,is_improvement:C.is_improvement}));u(S)}else g(N.error||"Erro ao comparar equipamentos")}}catch(N){console.error("Erro ao carregar comparao:",N),g("Erro ao carregar comparao")}finally{h(!1)}})()},[t,e.id,s,a]);const x=(j,N)=>N===0?r.jsx(oE,{className:"text-gray-400"}):j?r.jsx(nE,{className:"text-green-500"}):r.jsx(rE,{className:"text-red-500"}),y=(j,N)=>j===0?"":`${N?"+":""}${j.toFixed(j%1===0?0:2)}`,_=(j,N)=>N===0?"text-gray-400":j?"text-green-500":"text-red-500";return f?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(YX,{className:"animate-spin text-blue-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Carregando comparao..."})]})}):p?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-red-50 border-red-200`,children:r.jsx("p",{className:"text-sm text-red-600",children:p})}):c.length===0?r.jsx("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-gray-50`,children:r.jsx("p",{className:"text-sm text-gray-600",children:a===null?"Nenhum equipamento equipado atualmente":"Nenhuma mudana nos atributos"})}):r.jsxs("div",{className:`${i?"p-2":"p-4"} border rounded-lg bg-white`,children:[n&&r.jsx("h4",{className:`${i?"text-sm":"text-base"} font-semibold text-gray-800 mb-2`,children:"Comparao de Atributos"}),r.jsx("div",{className:"space-y-1",children:c.map((j,N)=>r.jsxs("div",{className:`flex items-center justify-between ${i?"text-xs":"text-sm"} py-1`,children:[r.jsxs("span",{className:"text-gray-700 font-medium",children:[j.stat_name,":"]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-gray-600",children:j.current_value.toFixed(j.current_value%1===0?0:2)}),r.jsxs("div",{className:"flex items-center space-x-1",children:[x(j.is_improvement,j.difference),r.jsx("span",{className:_(j.is_improvement,j.difference),children:y(j.difference,j.is_improvement)})]}),r.jsx("span",{className:"text-gray-800 font-semibold",children:j.new_value.toFixed(j.new_value%1===0?0:2)})]})]},N))}),!i&&r.jsx("div",{className:"mt-3 pt-2 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(nE,{className:"text-green-500"}),r.jsx("span",{children:"Melhoria"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(rE,{className:"text-red-500"}),r.jsx("span",{children:"Reduo"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(oE,{className:"text-gray-400"}),r.jsx("span",{children:"Sem mudana"})]})]})})]})},KX=({recipe:t,onCraft:e,isCrafting:s,selectedCharacter:a})=>{if(!t)return r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-6 bg-muted/10 rounded-lg border-2 border-dashed border-muted",children:[r.jsx(ca,{className:"h-16 w-16 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Selecione uma Receita"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Escolha uma receita da lista para ver os detalhes e ingredientes necessrios."})]});const n=()=>{if(t.craftType==="equipment")switch(t.result.type){case"weapon":return r.jsx(kt,{className:"h-6 w-6"});case"armor":return r.jsx(vt,{className:"h-6 w-6"});case"accessory":return r.jsx(sr,{className:"h-6 w-6"});default:return r.jsx(_i,{className:"h-6 w-6"})}return r.jsx(lt,{className:"h-6 w-6"})},i=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"text-orange-400 bg-orange-500/10 border-orange-500/20";case"epic":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"rare":return"text-blue-400 bg-blue-500/10 border-blue-500/20";case"uncommon":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-gray-400 bg-gray-500/10 border-gray-500/20"}else switch(t.result.type){case"elixir":return"text-purple-400 bg-purple-500/10 border-purple-500/20";case"potion":return"text-red-400 bg-red-500/10 border-red-500/20";case"antidote":return"text-green-400 bg-green-500/10 border-green-500/20";default:return"text-blue-400 bg-blue-500/10 border-blue-500/20"}},c=async()=>{if(!t.canCraft||s)return;const u=t.craftType==="equipment"?t.result_equipment_id:t.result_id;await e(u,t.craftType)};return r.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex items-start gap-4 p-6 border-b shrink-0",children:[r.jsx("div",{className:Ie("p-3 rounded-lg border",i()),children:n()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[r.jsx("h2",{className:"text-xl font-bold truncate",children:t.result.name}),r.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[r.jsx(ze,{className:Ie("",i()),children:t.craftType==="equipment"?t.result.rarity:t.result.type}),t.craftType==="equipment"&&t.result.level_requirement&&r.jsxs(ze,{variant:"outline",children:["Nvel ",t.result.level_requirement]})]})]}),r.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed mb-3",children:t.result.description}),t.craftType==="equipment"&&r.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:r.jsx(ze,{variant:"secondary",className:"text-xs",children:(()=>{const u=t,f=u.result.type,h=u.result.weapon_subtype;if(f==="weapon"&&h)switch(h){case"sword":return"Espada";case"axe":return"Machado";case"blunt":return"Maa";case"staff":return"Cajado";case"dagger":return"Adaga";default:return"Arma"}else{if(f==="armor")return"Armadura";if(f==="accessory")return"Acessrio"}return f})()})})]})]}),t.craftType==="equipment"&&(()=>{const u=t;return(u.result.atk_bonus||0)>0||(u.result.def_bonus||0)>0||(u.result.mana_bonus||0)>0||(u.result.speed_bonus||0)>0||(u.result.hp_bonus||0)>0?r.jsxs("div",{className:"p-6 border-b bg-muted/20 shrink-0",children:[r.jsxs("h3",{className:"text-base font-semibold mb-3 flex items-center gap-2",children:[r.jsx(La,{className:"h-4 w-4"}),"Atributos do Equipamento"]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[(u.result.atk_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/10 border border-red-500/20 rounded-lg",children:[r.jsx(kt,{className:"w-4 h-4 text-red-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.atk_bonus," ATK"]})]}),(u.result.def_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[r.jsx(vt,{className:"w-4 h-4 text-blue-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.def_bonus," DEF"]})]}),(u.result.mana_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[r.jsx(lt,{className:"w-4 h-4 text-purple-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.mana_bonus," MANA"]})]}),(u.result.speed_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-500/10 border border-green-500/20 rounded-lg",children:[r.jsx(Ct,{className:"w-4 h-4 text-green-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.speed_bonus," VEL"]})]}),(u.result.hp_bonus||0)>0&&r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-pink-500/10 border border-pink-500/20 rounded-lg",children:[r.jsx(cs,{className:"w-4 h-4 text-pink-400"}),r.jsxs("span",{className:"text-sm font-medium",children:["+",u.result.hp_bonus," HP"]})]})]})]}):null})(),t.craftType==="equipment"&&(()=>{const u=t,f={id:u.result_equipment_id,name:u.result.name,description:u.result.description,type:u.result.type,rarity:u.result.rarity,weapon_subtype:u.result.weapon_subtype,atk_bonus:u.result.atk_bonus||0,def_bonus:u.result.def_bonus||0,mana_bonus:u.result.mana_bonus||0,speed_bonus:u.result.speed_bonus||0,hp_bonus:u.result.hp_bonus||0,level_requirement:u.result.level_requirement||1,price:0,is_unlocked:!0};return r.jsxs("div",{className:"p-6 border-b bg-muted/10 shrink-0",children:[r.jsx("h3",{className:"text-base font-semibold mb-3",children:"Comparao com Equipamento Atual"}),r.jsx(Oy,{characterId:(a==null?void 0:a.id)||"",newEquipment:f,slotType:u.result.type,showTitle:!1,compact:!0})]})})(),r.jsxs("div",{className:"flex-1 p-6 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:t.craftType==="equipment"?"Materiais Necessrios":"Ingredientes Necessrios"}),r.jsxs(ze,{variant:"outline",className:"ml-auto",children:[t.ingredients.length," itens"]})]}),r.jsx("div",{className:"space-y-3 overflow-y-auto max-h-96 pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:t.ingredients.map((u,f)=>{const h=u.have>=u.quantity;return r.jsxs("div",{className:Ie("flex items-center justify-between p-3 rounded-lg border transition-colors",h?"bg-green-500/5 border-green-500/20":"bg-red-500/5 border-red-500/20"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="equipment"&&r.jsx(_i,{className:"h-4 w-4 text-blue-400"}),u.type==="drop"&&r.jsx(sr,{className:"h-4 w-4 text-orange-400"}),u.type==="consumable"&&r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"font-medium",children:u.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:Ie("text-sm font-mono",h?"text-green-400":"text-red-400"),children:[u.have,"/",u.quantity]}),h?r.jsx(vC,{className:"h-4 w-4 text-green-400"}):r.jsx(ov,{className:"h-4 w-4 text-red-400"})]})]},f)})})]}),r.jsx("div",{className:"p-6 border-t bg-card/50 shrink-0",children:r.jsx(fe,{onClick:c,disabled:!t.canCraft||s,className:Ie("w-full h-12 text-base font-semibold transition-all",t.canCraft&&!s?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-muted text-muted-foreground cursor-not-allowed"),children:s?r.jsxs(r.Fragment,{children:[r.jsx(om,{className:"h-4 w-4 mr-2 animate-spin"}),t.craftType==="equipment"?"Forjando...":"Criando..."]}):t.canCraft?r.jsxs(r.Fragment,{children:[r.jsx(_i,{className:"h-4 w-4 mr-2"}),t.craftType==="equipment"?"Forjar Item":"Criar Item"]}):r.jsxs(r.Fragment,{children:[r.jsx(ov,{className:"h-4 w-4 mr-2"}),"Materiais Insuficientes"]})})})]})},WX=({recipe:t,isSelected:e,onClick:s})=>{const a=()=>t.craftType==="equipment"?r.jsx(_i,{className:"h-4 w-4 text-blue-400"}):r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),n=()=>{if(t.craftType==="equipment")switch(t.result.rarity){case"legendary":return"border-l-orange-500 bg-orange-500/5";case"epic":return"border-l-purple-500 bg-purple-500/5";case"rare":return"border-l-blue-500 bg-blue-500/5";case"uncommon":return"border-l-green-500 bg-green-500/5";default:return"border-l-gray-500 bg-gray-500/5"}else switch(t.result.type){case"elixir":return"border-l-purple-500 bg-purple-500/5";case"potion":return"border-l-red-500 bg-red-500/5";case"antidote":return"border-l-green-500 bg-green-500/5";default:return"border-l-blue-500 bg-blue-500/5"}};return r.jsx("div",{onClick:s,className:Ie("p-4 border rounded-lg cursor-pointer transition-all border-l-4",n(),e?"ring-2 ring-primary border-primary bg-primary/5":"hover:bg-accent/50 hover:border-accent"),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"shrink-0 mt-1",children:a()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold truncate",children:t.result.name}),t.canCraft?r.jsx(vC,{className:"h-4 w-4 text-green-400 shrink-0"}):r.jsx(ov,{className:"h-4 w-4 text-red-400 shrink-0"})]}),r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:t.result.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ze,{variant:"outline",className:"text-xs",children:t.craftType==="equipment"?t.result.rarity:t.result.type}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.ingredients.length," ingredientes"]})]})]})]})})};function ZX(){const t=Rt(),{character:e}=OR.useSearch(),{characters:s,selectedCharacter:a,selectCharacter:n}=Mc(),[i,c]=b.useState(!1),[u,f]=b.useState(!1),[h,p]=b.useState([]),[g,x]=b.useState([]),[y,_]=b.useState({consumables:[],drops:[],equipment:[]}),[j,N]=b.useState([]),[S,C]=b.useState([]),[E,M]=b.useState([]),[R,P]=b.useState([]),[$,k]=b.useState(null),[O,H]=b.useState(!1),[Y,I]=b.useState(""),[z,ee]=b.useState("all"),[G,A]=b.useState("all"),[B,V]=b.useState("all"),[W,L]=b.useState("all"),[F,ie]=b.useState("all");b.useEffect(()=>{H(!0)},[]),b.useEffect(()=>{if(O)if(e&&s.length>0){const le=s.find(re=>re.id===e);le&&(!a||a.id!==e)&&n(le)}else!e&&s.length>0&&t({to:"/game/crafting",search:{character:s[0].id}})},[O,s,a,e]),b.useEffect(()=>{if(!O||!a)return;(async()=>{c(!0);try{const[re,de,ce,be,Ne,J,ge,_e]=await Promise.all([zt.getCraftingRecipes(),Ft.getEquipmentCraftingRecipes(),zt.getCharacterConsumables(a.id),zt.getCharacterDrops(a.id),Ft.getCharacterEquipment(a.id),zt.getAvailableConsumables(),zt.getMonsterDrops(),Ft.getAllEquipments()]);re.success&&re.data&&p(re.data),de.success&&de.data&&x(de.data),_({consumables:ce.success?ce.data||[]:[],drops:be.success?be.data||[]:[],equipment:Ne||[]}),J.success&&J.data&&N(J.data),ge.success&&ge.data&&C(ge.data),_e&&Array.isArray(_e)&&M(_e)}catch(re){console.error("Erro ao carregar dados:",re),me.error("Erro ao carregar receitas e inventrio")}finally{c(!1)}})()},[O,a]),b.useEffect(()=>{if(!O||!h.length&&!g.length||!a)return;(()=>{var de;const re=[];for(const ce of h)try{const be=(de=y.consumables.find(_e=>_e.consumable_id===ce.result_id))==null?void 0:de.consumable,Ne={name:ce.name,description:ce.description,type:"potion"};be&&(Ne.name=be.name,Ne.description=be.description,Ne.type=be.type);const J=ce.ingredients.map(_e=>{var ye,Pe,Ae,q;let De="",Ve=0,We="drop";if(_e.item_type==="monster_drop"){const X=y.drops.find(Z=>Z.drop_id===_e.item_id);if(Ve=(X==null?void 0:X.quantity)||0,We="drop",(ye=X==null?void 0:X.drop)!=null&&ye.name)De=X.drop.name;else{const Z=S.find(je=>je.id===_e.item_id);De=(Z==null?void 0:Z.name)||`Drop ID: ${_e.item_id}`}}else if(_e.item_type==="consumable"){const X=y.consumables.find(Z=>Z.consumable_id===_e.item_id);if(Ve=(X==null?void 0:X.quantity)||0,We="consumable",(Pe=X==null?void 0:X.consumable)!=null&&Pe.name)De=X.consumable.name;else{const Z=j.find(je=>je.id===_e.item_id);De=(Z==null?void 0:Z.name)||`Consumvel ID: ${_e.item_id}`}}else if(_e.item_type==="equipment"){const X=y.equipment.filter(Z=>Z.equipment_id===_e.item_id&&!Z.is_equipped);if(Ve=X.length,We="equipment",(q=(Ae=X[0])==null?void 0:Ae.equipment)!=null&&q.name)De=X[0].equipment.name;else{const Z=E.find(je=>je.id===_e.item_id);De=(Z==null?void 0:Z.name)||`Equipamento ID: ${_e.item_id}`}}return{name:De,quantity:_e.quantity,have:Ve,type:We}}),ge=J.every(_e=>_e.have>=_e.quantity);re.push({id:ce.id,result_id:ce.result_id,result:Ne,ingredients:J,canCraft:ge,craftType:"consumable"})}catch(be){console.error("Erro ao processar receita de consumvel:",be)}for(const ce of g)try{if(ce.equipment){const be=ce.ingredients.map(J=>{var Ve,We,ye,Pe;let ge="",_e=0,De="drop";if(J.item_type==="monster_drop"){const Ae=y.drops.find(q=>q.drop_id===J.item_id);if(_e=(Ae==null?void 0:Ae.quantity)||0,De="drop",(Ve=Ae==null?void 0:Ae.drop)!=null&&Ve.name)ge=Ae.drop.name;else{const q=S.find(X=>X.id===J.item_id);ge=(q==null?void 0:q.name)||`Drop ID: ${J.item_id}`}}else if(J.item_type==="consumable"){const Ae=y.consumables.find(q=>q.consumable_id===J.item_id);if(_e=(Ae==null?void 0:Ae.quantity)||0,De="consumable",(We=Ae==null?void 0:Ae.consumable)!=null&&We.name)ge=Ae.consumable.name;else{const q=j.find(X=>X.id===J.item_id);ge=(q==null?void 0:q.name)||`Consumvel ID: ${J.item_id}`}}else if(J.item_type==="equipment"){const Ae=y.equipment.filter(q=>q.equipment_id===J.item_id&&!q.is_equipped);if(_e=Ae.length,De="equipment",(Pe=(ye=Ae[0])==null?void 0:ye.equipment)!=null&&Pe.name)ge=Ae[0].equipment.name;else{const q=E.find(X=>X.id===J.item_id);ge=(q==null?void 0:q.name)||`Equipamento ID: ${J.item_id}`}}return{name:ge,quantity:J.quantity,have:_e,type:De}}),Ne=be.every(J=>J.have>=J.quantity);re.push({id:ce.id,result_equipment_id:ce.result_equipment_id,result:{name:ce.equipment.name,description:ce.equipment.description,type:ce.equipment.type,rarity:ce.equipment.rarity,weapon_subtype:ce.equipment.weapon_subtype||void 0,atk_bonus:ce.equipment.atk_bonus||0,def_bonus:ce.equipment.def_bonus||0,mana_bonus:ce.equipment.mana_bonus||0,speed_bonus:ce.equipment.speed_bonus||0,hp_bonus:0,level_requirement:ce.equipment.level_requirement||1},ingredients:be,canCraft:Ne,craftType:"equipment"})}}catch(be){console.error("Erro ao processar receita de equipamento:",be)}if(P(re),$){const ce=re.find(be=>be.id===$.id);ce&&k(ce)}})()},[O,h,g,y,a,$==null?void 0:$.id,j,S,E,$]);const se=b.useMemo(()=>{let le=R;return Y&&(le=le.filter(re=>re.result.name.toLowerCase().includes(Y.toLowerCase())||re.result.description.toLowerCase().includes(Y.toLowerCase()))),z!=="all"&&(le=le.filter(re=>re.craftType===z)),B!=="all"&&(le=le.filter(re=>re.craftType==="equipment"?re.result.type===B:!0)),W!=="all"&&(le=le.filter(re=>re.craftType==="equipment"?re.result.weapon_subtype===W:!0)),F!=="all"&&(le=le.filter(re=>re.craftType==="equipment"?re.result.rarity===F:re.result.type===F)),G==="craftable"?le=le.filter(re=>re.canCraft):G==="missing"&&(le=le.filter(re=>!re.canCraft)),le},[R,Y,z,G,B,W,F]),ue=async(le,re)=>{var de;if(!(!a||u)){f(!0);try{let ce;if(re==="consumable"?ce=await zt.craftItem(a.id,le):ce=await Ft.craftEquipment(a.id,le),ce.success){me.success("Item criado com sucesso!",{description:(de=ce.data)==null?void 0:de.message});const[be,Ne,J]=await Promise.all([zt.getCharacterConsumables(a.id),zt.getCharacterDrops(a.id),Ft.getCharacterEquipment(a.id)]);_({consumables:be.success?be.data||[]:y.consumables,drops:Ne.success?Ne.data||[]:y.drops,equipment:J||y.equipment})}else me.error("Erro ao criar item",{description:ce.error})}catch(ce){console.error("Erro ao criar item:",ce),me.error("Erro ao criar item")}finally{f(!1)}}};return O?a?r.jsxs("div",{className:"container mx-auto py-6 px-4 max-w-7xl",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:a.id}}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Forja de Artefatos"}),r.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Crie poes, elixires e forje equipamentos nicos com materiais raros"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-5",children:r.jsxs(Oe,{className:"h-full max-h-[calc(100vh-280px)]",children:[r.jsxs(ht,{className:"pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(_i,{className:"h-5 w-5"}),"Receitas Disponveis"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ze,{variant:"outline",children:[se.length," de ",R.length]}),(Y||z!=="all"||G!=="all"||B!=="all"||W!=="all"||F!=="all")&&r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{I(""),ee("all"),A("all"),V("all"),L("all"),ie("all")},className:"h-6 px-2 text-xs",children:"Limpar Filtros"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(Ms,{placeholder:"Buscar receita...",value:Y,onChange:le=>I(le.target.value),className:"pl-9"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(hi,{value:z,onValueChange:le=>{ee(le),le!=="equipment"&&(V("all"),L("all"),ie("all"))},children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Tipo"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"all",children:"Todos os Tipos"}),r.jsx(Bt,{value:"equipment",children:"Equipamentos"}),r.jsx(Bt,{value:"consumable",children:"Consumveis"})]})]}),r.jsxs(hi,{value:G,onValueChange:le=>A(le),children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Status"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"all",children:"Todos"}),r.jsx(Bt,{value:"craftable",children:"Criveis"}),r.jsx(Bt,{value:"missing",children:"Faltam Materiais"})]})]})]}),z==="equipment"&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs(hi,{value:B,onValueChange:le=>{V(le),le!=="weapon"&&L("all")},children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Tipo de Equipamento"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"all",children:"Todos Equipamentos"}),r.jsx(Bt,{value:"weapon",children:"Armas"}),r.jsx(Bt,{value:"armor",children:"Armaduras"}),r.jsx(Bt,{value:"accessory",children:"Acessrios"})]})]}),r.jsxs(hi,{value:F,onValueChange:le=>ie(le),children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Raridade"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"all",children:"Todas Raridades"}),r.jsx(Bt,{value:"common",children:"Comum"}),r.jsx(Bt,{value:"uncommon",children:"Incomum"}),r.jsx(Bt,{value:"rare",children:"Raro"}),r.jsx(Bt,{value:"epic",children:"pico"}),r.jsx(Bt,{value:"legendary",children:"Lendrio"})]})]})]}),B==="weapon"&&r.jsxs(hi,{value:W,onValueChange:le=>L(le),children:[r.jsx(ho,{children:r.jsx(mi,{placeholder:"Tipo de Arma"})}),r.jsxs(mo,{children:[r.jsx(Bt,{value:"all",children:"Todas as Armas"}),r.jsx(Bt,{value:"sword",children:"Espadas"}),r.jsx(Bt,{value:"axe",children:"Machados"}),r.jsx(Bt,{value:"blunt",children:"Maas"}),r.jsx(Bt,{value:"staff",children:"Cajados"}),r.jsx(Bt,{value:"dagger",children:"Adagas"})]})]})]})]})]}),r.jsx(He,{className:"flex-1 overflow-hidden",children:i?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent"}),r.jsx("span",{className:"ml-2 text-muted-foreground",children:"Carregando receitas..."})]}):se.length>0?r.jsx("div",{className:"space-y-2 h-full max-h-96 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-border scrollbar-track-transparent",children:se.map(le=>r.jsx(WX,{recipe:le,isSelected:($==null?void 0:$.id)===le.id,onClick:()=>k(le)},le.id))}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[r.jsx(yd,{className:"h-12 w-12 text-muted-foreground mb-3"}),r.jsx("p",{className:"text-muted-foreground text-lg",children:"Nenhuma receita encontrada"}),r.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:"Tente ajustar os filtros ou explore a torre para encontrar novas receitas"})]})})]})}),r.jsx("div",{className:"lg:col-span-7",children:r.jsx(Oe,{className:"h-full max-h-[calc(100vh-280px)]",children:r.jsx(KX,{recipe:$,onCraft:ue,isCrafting:u,selectedCharacter:a})})})]})]}):r.jsx("div",{className:"container mx-auto py-6 text-center",children:r.jsx("p",{children:"Selecione um personagem para acessar o crafting."})}):r.jsx("div",{className:"container mx-auto py-6 text-center",children:r.jsx("p",{children:"Carregando..."})})}const OR=Yt("/_authenticated/game/crafting")({component:ZX,validateSearch:t=>({character:t.character||""})});function QX({className:t="",showHeader:e=!0,collapsible:s=!1}){const{user:a}=zs(),[n,i]=b.useState([]),[c,u]=b.useState(null),[f,h]=b.useState(!0),[p,g]=b.useState(1),[x,y]=b.useState(!1),[_,j]=b.useState(0),[N,S]=b.useState(!1),[C,E]=b.useState(null),M=6;b.useEffect(()=>{a!=null&&a.id&&R()},[a==null?void 0:a.id,p]);const R=async()=>{if(a!=null&&a.id){h(!0);try{const O=await Mh.getUserCemetery(a.id,{page:p,limit:M});O.success&&O.data?(i(O.data.characters),u(O.data.stats),j(O.data.total),y(O.data.hasMore)):me.error("Erro ao carregar cemitrio",{description:O.error||"Erro desconhecido"})}catch(O){console.error("Erro ao carregar cemitrio:",O),me.error("Erro ao carregar cemitrio")}finally{h(!1)}}},P=O=>Mh.formatSurvivalTime(O),$=(O,H)=>Mh.formatDeathCause(O,H),k=O=>new Date(O).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return f&&n.length===0?r.jsxs(Oe,{className:t,children:[e&&r.jsx(ht,{className:"pb-4",children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitrio"]})}),r.jsx(He,{children:r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"})})})]}):!c||c.total_deaths===0?r.jsxs(Oe,{className:t,children:[e&&r.jsx(ht,{className:"pb-4",children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitrio"]})}),r.jsx(He,{children:r.jsxs("div",{className:"text-center py-8 space-y-4",children:[r.jsx("div",{className:"text-6xl opacity-50",children:""}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-medium text-muted-foreground",children:"Cemitrio Vazio"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum personagem foi perdido ainda. Que a sorte continue com voc!"})]})]})})]}):r.jsxs(Oe,{className:t,children:[e&&r.jsx(ht,{className:"pb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Qs,{className:"h-5 w-5 text-red-500"}),"Cemitrio",r.jsxs(ze,{variant:"destructive",className:"ml-2",children:[c.total_deaths," mort",c.total_deaths===1?"e":"es"]})]}),s&&r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>S(!N),children:N?r.jsx(_o,{className:"h-4 w-4"}):r.jsx(nv,{className:"h-4 w-4"})})]})}),(!s||!N)&&r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-center",children:[r.jsx(Nr,{className:"h-6 w-6 mx-auto mb-2 text-red-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Nvel"}),r.jsx("div",{className:"text-xl font-bold text-red-400",children:c.highest_level_reached})]}),r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-3 text-center",children:[r.jsx(ea,{className:"h-6 w-6 mx-auto mb-2 text-orange-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Andar"}),r.jsx("div",{className:"text-xl font-bold text-orange-400",children:c.highest_floor_reached})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 text-center",children:[r.jsx(E8,{className:"h-6 w-6 mx-auto mb-2 text-blue-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Tempo Total"}),r.jsxs("div",{className:"text-xl font-bold text-blue-400",children:[c.total_survival_time_hours,"h"]})]}),r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3 text-center",children:[r.jsx(_C,{className:"h-6 w-6 mx-auto mb-2 text-purple-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Maior Ameaa"}),r.jsx("div",{className:"text-xs font-bold text-purple-400 truncate",title:c.deadliest_monster,children:c.deadliest_monster})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Personagens Perdidos"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.length," de ",_]})]}),f?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(O=>r.jsxs("div",{className:"bg-muted/20 rounded-lg p-4 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mb-3"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-muted/30 rounded w-full"}),r.jsx("div",{className:"h-4 bg-muted/30 rounded w-3/4"})]})]},O))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(O=>r.jsx(Oe,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 bg-red-500/5 border-red-500/20",onClick:()=>E(O),children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-semibold text-lg truncate",children:O.name}),r.jsxs(ze,{variant:"outline",className:"bg-background/50",children:["Nv ",O.level]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(kt,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-red-400 font-medium",children:O.atk})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(vt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-blue-400 font-medium",children:O.def})]}),r.jsxs("div",{className:"text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-yellow-400 font-medium",children:O.speed})]})]}),r.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Andar alcanado:"}),r.jsx("span",{className:"font-medium text-orange-400",children:O.floor_reached})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Tempo de vida:"}),r.jsx("span",{className:"font-medium text-blue-400",children:P(O.survival_time_minutes)})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"Gold acumulado:"}),r.jsx("span",{className:"font-medium text-yellow-400",children:Oa(O.gold)})]})]}),r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2",children:[r.jsx("div",{className:"text-xs text-red-400 font-medium",children:$(O.death_cause,O.killed_by_monster)}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:k(O.died_at)})]})]})})},O.id))})]}),_>M&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>g(O=>Math.max(1,O-1)),disabled:p===1||f,children:[r.jsx(nv,{className:"h-4 w-4 mr-1"}),"Anterior"]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:["Pgina ",p," de ",Math.ceil(_/M)]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>g(O=>O+1),disabled:!x||f,children:["Prxima",r.jsx(gC,{className:"h-4 w-4 ml-1"})]})]})]}),C&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs(Oe,{className:"w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(Qs,{className:"h-5 w-5 text-red-500"}),C.name,r.jsxs(ze,{variant:"outline",className:"ml-2",children:["Nvel ",C.level]})]})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-3 text-center",children:[r.jsx(kt,{className:"h-5 w-5 mx-auto mb-2 text-red-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Ataque"}),r.jsx("div",{className:"text-xl font-bold text-red-400",children:C.atk})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-3 text-center",children:[r.jsx(vt,{className:"h-5 w-5 mx-auto mb-2 text-blue-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Defesa"}),r.jsx("div",{className:"text-xl font-bold text-blue-400",children:C.def})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-3 text-center",children:[r.jsx(Ct,{className:"h-5 w-5 mx-auto mb-2 text-yellow-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Velocidade"}),r.jsx("div",{className:"text-xl font-bold text-yellow-400",children:C.speed})]}),r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded p-3 text-center",children:[r.jsx(jt,{className:"h-5 w-5 mx-auto mb-2 text-green-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"HP Mximo"}),r.jsx("div",{className:"text-xl font-bold text-green-400",children:C.max_hp})]}),r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-3 text-center",children:[r.jsx(jt,{className:"h-5 w-5 mx-auto mb-2 text-purple-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Mana Mxima"}),r.jsx("div",{className:"text-xl font-bold text-purple-400",children:C.max_mana})]}),r.jsxs("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded p-3 text-center",children:[r.jsx(ea,{className:"h-5 w-5 mx-auto mb-2 text-orange-400"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Andar Alcanado"}),r.jsx("div",{className:"text-xl font-bold text-orange-400",children:C.floor_reached})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Atributos Primrios"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Fora"}),r.jsx("div",{className:"text-lg font-bold",children:C.strength})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Destreza"}),r.jsx("div",{className:"text-lg font-bold",children:C.dexterity})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Inteligncia"}),r.jsx("div",{className:"text-lg font-bold",children:C.intelligence})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Sabedoria"}),r.jsx("div",{className:"text-lg font-bold",children:C.wisdom})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Vitalidade"}),r.jsx("div",{className:"text-lg font-bold",children:C.vitality})]}),r.jsxs("div",{className:"bg-background/50 rounded p-2 text-center",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:"Sorte"}),r.jsx("div",{className:"text-lg font-bold",children:C.luck})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Resumo da Jornada"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(om,{className:"h-4 w-4 text-blue-400"}),"Tempo de sobrevivncia"]}),r.jsx("span",{className:"font-medium text-blue-400",children:P(C.survival_time_minutes)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-yellow-400"}),"XP acumulado"]}),r.jsx("span",{className:"font-medium text-yellow-400",children:Oa(C.xp)})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(wa,{className:"h-4 w-4 text-yellow-400"}),"Gold acumulado"]}),r.jsx("span",{className:"font-medium text-yellow-400",children:Oa(C.gold)})]})]})]}),r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-2 text-red-400",children:"Fim da Jornada"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qs,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"font-medium",children:$(C.death_cause,C.killed_by_monster)})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(pC,{className:"h-4 w-4"}),r.jsx("span",{children:k(C.died_at)})]})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fe,{onClick:()=>E(null),children:"Fechar"})})]})]})})]})}const JX=Yt("/_authenticated/game/cemetery")({component:eY});function eY(){const t=Rt();return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary",children:r.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs(fe,{variant:"ghost",onClick:()=>t({to:"/game/play"}),className:"mb-4",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar  Seleo de Personagens"]}),r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent",children:"Cemitrio do Tower Trials"}),r.jsx("p",{className:"text-muted-foreground",children:"Honre a memria dos bravos aventureiros que caram nas trevas da torre"})]})]}),r.jsx(QX,{className:"w-full",showHeader:!1,collapsible:!1})]})})}var tY="Separator",iE="horizontal",sY=["horizontal","vertical"],$R=b.forwardRef((t,e)=>{const{decorative:s,orientation:a=iE,...n}=t,i=aY(a)?a:iE,u=s?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(Ke.div,{"data-orientation":i,...u,...n,ref:e})});$R.displayName=tY;function aY(t){return sY.includes(t)}var LR=$R;const Wv=b.forwardRef(({className:t,orientation:e="horizontal",decorative:s=!0,...a},n)=>r.jsx(LR,{ref:n,decorative:s,orientation:e,className:Ie("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));Wv.displayName=LR.displayName;const rY=({character:t,availableEquipment:e,availableConsumables:s,onEquipmentPurchase:a,onConsumablePurchase:n,onOpenInventory:i})=>{const[c,u]=b.useState("equipment"),[f,h]=b.useState(null),[p,g]=b.useState("all"),[x,y]=b.useState("all"),_=e.filter(P=>p==="all"?!0:P.type===p),j=s.filter(P=>x==="all"?!0:P.type===x),N=P=>{const $={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return $[P]||$.common},S=P=>{switch(P){case"weapon":return r.jsx(kt,{className:"h-4 w-4 text-red-400"});case"armor":return r.jsx(vt,{className:"h-4 w-4 text-blue-400"});case"accessory":return r.jsx(sr,{className:"h-4 w-4 text-purple-400"});default:return r.jsx(ca,{className:"h-4 w-4 text-slate-400"})}},C=P=>{switch(P){case"potion":return r.jsx(lt,{className:"h-4 w-4 text-blue-500"});case"antidote":return r.jsx(vt,{className:"h-4 w-4 text-green-500"});case"buff":return r.jsx(Ct,{className:"h-4 w-4 text-purple-500"});default:return r.jsx(ca,{className:"h-4 w-4"})}},E=P=>{const $=t.gold>=P.price,k=t.level>=P.level_requirement,O=$&&k&&P.is_unlocked,H=(f==null?void 0:f.id)===P.id;return r.jsx(Oe,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${H?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${O?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(P),children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:S(P.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:P.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ze,{variant:"outline",className:`text-xs border ${N(P.rarity)}`,children:P.rarity}),P.rarity==="legendary"&&r.jsx(jt,{className:"h-3 w-3 text-amber-400 animate-pulse"}),P.rarity==="epic"&&r.jsx(lt,{className:"h-3 w-3 text-purple-400"})]}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:"text-xs font-medium text-amber-300",children:P.price})]})]})]})})},P.id)},M=P=>{const $=t.gold>=P.price,k=t.level>=(P.level_requirement||1),O=$&&k,H=(f==null?void 0:f.id)===P.id;return r.jsx(Oe,{className:`cursor-pointer transition-all duration-200 hover:shadow-lg hover:shadow-primary/20 border-slate-700/50 bg-slate-800/50 backdrop-blur-sm ${H?"ring-2 ring-primary/60 shadow-lg shadow-primary/30":""} ${O?"hover:bg-slate-800/70":"opacity-60 grayscale"}`,onClick:()=>h(P),children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-slate-700/50",children:C(P.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-sm truncate text-slate-100",children:P.name}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:P.type==="potion"?`+${P.effect_value}`:P.type==="antidote"?"Remove debuffs":`+${P.effect_value} por 3 turnos`}),r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:"text-xs font-medium text-amber-300",children:P.price})]})]})]})})},P.id)},R=()=>{if(!f)return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ca,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um item para ver os detalhes"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em qualquer item da lista para visualizar suas informaes completas"})]})});const P="atk_bonus"in f,$=f;if(P){const k=$,O=t.gold>=k.price,H=t.level>=k.level_requirement,Y=O&&H&&k.is_unlocked;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:S(k.type)}),r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:k.name})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ze,{className:`border ${N(k.rarity)}`,children:k.rarity}),r.jsx("span",{className:"text-sm text-slate-400",children:k.type==="weapon"?"Arma":k.type==="armor"?"Armadura":"Acessrio"})]})]}),r.jsx(Wv,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrio"}),r.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:k.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3 text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[k.atk_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-900/30 border border-red-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(kt,{className:"h-4 w-4 text-red-400"}),r.jsxs("span",{className:"text-sm text-red-300 font-medium",children:["+",k.atk_bonus]})]}),k.def_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-900/30 border border-blue-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(vt,{className:"h-4 w-4 text-blue-400"}),r.jsxs("span",{className:"text-sm text-blue-300 font-medium",children:["+",k.def_bonus]})]}),k.mana_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-900/30 border border-purple-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(sr,{className:"h-4 w-4 text-purple-400"}),r.jsxs("span",{className:"text-sm text-purple-300 font-medium",children:["+",k.mana_bonus]})]}),k.speed_bonus>0&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-900/30 border border-amber-800/50 rounded-lg backdrop-blur-sm",children:[r.jsx(Ct,{className:"h-4 w-4 text-amber-400"}),r.jsxs("span",{className:"text-sm text-amber-300 font-medium",children:["+",k.speed_bonus]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Comparao com Equipamento Atual"}),r.jsx(Oy,{characterId:t.id,newEquipment:k,slotType:k.type,showTitle:!1,compact:!0})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Requisitos"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Nvel:"}),r.jsx("span",{className:`text-sm font-medium ${H?"text-emerald-400":"text-red-400"}`,children:k.level_requirement})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 bg-slate-700/30 rounded border border-slate-600/30",children:[r.jsx("span",{className:"text-sm text-slate-300",children:"Preo:"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(wa,{className:"h-3 w-3 text-amber-400"}),r.jsx("span",{className:`text-sm font-medium ${O?"text-emerald-400":"text-red-400"}`,children:k.price})]})]})]})]}),r.jsx(fe,{onClick:()=>a(k),disabled:!Y,className:`w-full font-semibold ${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-lg shadow-primary/25":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:k.is_unlocked?H?O?"Comprar":"Gold Insuficiente":`Requer Nvel ${k.level_requirement}`:"Item Bloqueado"})]})}else{const k=$,O=t.gold>=k.price,H=t.level>=(k.level_requirement||1),Y=O&&H;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50 border border-slate-600/50",children:C(k.type)}),r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:k.name})]}),r.jsx("span",{className:"text-sm text-slate-400",children:k.type==="potion"?"Poo":k.type==="antidote"?"Antdoto":"Fortalecimento"})]}),r.jsx(Wv,{}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Descrio"}),r.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:k.description})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Efeito"}),r.jsx("div",{className:"p-3 bg-emerald-900/30 border border-emerald-800/50 rounded-lg backdrop-blur-sm",children:r.jsx("span",{className:"text-sm text-emerald-300",children:k.type==="potion"?`Restaura ${k.effect_value} pontos`:k.type==="antidote"?"Remove todos os efeitos negativos":`Aumenta atributo em ${k.effect_value} por 3 turnos`})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-2 text-slate-200",children:"Preo"}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-700/30 rounded-lg border border-slate-600/30",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsxs("span",{className:`font-medium ${O?"text-emerald-400":"text-red-400"}`,children:[k.price," gold cada"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"font-semibold text-slate-200",children:"Comprar"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx(fe,{onClick:()=>n(k,1),disabled:!Y,size:"sm",className:`${Y?"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70 shadow-md shadow-primary/20":"bg-slate-700/50 text-slate-400 cursor-not-allowed"}`,children:"1x"}),r.jsx(fe,{onClick:()=>n(k,5),disabled:!Y||t.gold<k.price*5,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<k.price*5?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"5x"}),r.jsx(fe,{onClick:()=>n(k,10),disabled:!Y||t.gold<k.price*10,size:"sm",variant:"outline",className:`border-slate-600 ${!Y||t.gold<k.price*10?"bg-slate-700/50 text-slate-400 cursor-not-allowed border-slate-700":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 hover:text-slate-100"}`,children:"10x"})]})]})]})}};return r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-amber-900/50 to-amber-800/50 border border-amber-700/50 px-4 py-2 rounded-lg backdrop-blur-sm",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"font-semibold text-amber-300",children:t.gold})]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:i,className:"border-slate-600 bg-slate-800/50 hover:bg-slate-700/50 text-slate-300 hover:text-slate-100",children:[r.jsx(ca,{className:"h-4 w-4 mr-2"}),"Inventrio"]})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-800/50 rounded-lg border border-slate-700/50",children:[r.jsx(fe,{variant:c==="equipment"?"default":"ghost",size:"sm",onClick:()=>{u("equipment"),h(null)},className:`flex-1 ${c==="equipment"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:r.jsx(g8,{className:"h-4 w-4"})}),r.jsx(fe,{variant:c==="consumables"?"default":"ghost",size:"sm",onClick:()=>{u("consumables"),h(null)},className:`flex-1 ${c==="consumables"?"bg-primary/20 text-primary border-primary/50":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:r.jsx(im,{className:"h-4 w-4"})})]}),c==="equipment"&&r.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g("all"),className:`${p==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:r.jsx(yd,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g("weapon"),className:`${p==="weapon"?"bg-red-900/30 text-red-400 border border-red-800/50":"text-slate-500 hover:text-red-400 hover:bg-red-900/20"}`,children:r.jsx(kt,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g("armor"),className:`${p==="armor"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:r.jsx(vt,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>g("accessory"),className:`${p==="accessory"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:r.jsx(sr,{className:"h-3 w-3"})})]}),c==="consumables"&&r.jsxs("div",{className:"flex gap-1 flex-wrap p-1 bg-slate-800/30 rounded-lg border border-slate-700/30",children:[r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>y("all"),className:`${x==="all"?"bg-slate-600/50 text-slate-200":"text-slate-500 hover:text-slate-300 hover:bg-slate-700/30"}`,children:r.jsx(yd,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>y("potion"),className:`${x==="potion"?"bg-blue-900/30 text-blue-400 border border-blue-800/50":"text-slate-500 hover:text-blue-400 hover:bg-blue-900/20"}`,children:r.jsx(lt,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>y("antidote"),className:`${x==="antidote"?"bg-emerald-900/30 text-emerald-400 border border-emerald-800/50":"text-slate-500 hover:text-emerald-400 hover:bg-emerald-900/20"}`,children:r.jsx(vt,{className:"h-3 w-3"})}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>y("buff"),className:`${x==="buff"?"bg-purple-900/30 text-purple-400 border border-purple-800/50":"text-slate-500 hover:text-purple-400 hover:bg-purple-900/20"}`,children:r.jsx(Ct,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto scrollbar-thin scrollbar-track-slate-800 scrollbar-thumb-slate-600",children:c==="equipment"?_.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(ca,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum equipamento encontrado"})]}):_.map(E):j.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(im,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum consumvel encontrado"})]}):j.map(M)})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Oe,{className:"h-full border-slate-700/50 bg-slate-800/30 backdrop-blur-sm",children:r.jsx(He,{className:"p-6 h-full",children:R()})})})]})},nY=({character:t,isOpen:e,onClose:s,onItemSold:a})=>{const[n,i]=b.useState([]),[c,u]=b.useState([]),[f,h]=b.useState([]),[p,g]=b.useState(!1),[x,y]=b.useState(null);b.useEffect(()=>{e&&t.id&&_()},[e,t.id]);const _=async()=>{g(!0);try{const[k,O,H]=await Promise.all([Ft.getCharacterEquipment(t.id),zt.getCharacterConsumables(t.id),zt.getCharacterDrops(t.id)]);i(k||[]),u(O.success?O.data||[]:[]),h(H.success?H.data||[]:[])}catch(k){console.error("Erro ao carregar inventrio:",k),me.error("Erro ao carregar inventrio")}finally{g(!1)}},j=async(k,O)=>{var H;if(k.equipment){try{if(O==="toggle")(await Ft.toggleEquipment(t.id,k.equipment.id,!k.is_equipped)).success&&(me.success(k.is_equipped?"Item desequipado!":"Item equipado!"),_());else if(O==="sell"){const Y=await Ft.sellEquipment(t.id,k.equipment.id);Y.success&&((H=Y.data)==null?void 0:H.newGold)!==void 0?(me.success(`${k.equipment.name} vendido!`),a(Y.data.newGold),_()):me.error(Y.error||"Erro ao vender equipamento")}}catch(Y){console.error("Erro na ao:",Y),me.error("Erro ao executar ao")}y(null)}},N=async k=>{if(k.consumable){try{const O=await zt.consumeItem(t.id,k.consumable_id,t);O.success?(me.success("Item usado com sucesso!"),_(),a(t.gold)):me.error(O.error||"Erro ao usar item")}catch(O){console.error("Erro ao usar item:",O),me.error("Erro ao usar item")}y(null)}},S=k=>{const O={common:"text-slate-400",uncommon:"text-emerald-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-amber-400"};return O[k]||O.common},C=k=>k==="weapon"?r.jsx(kt,{className:"h-4 w-4"}):k==="armor"?r.jsx(vt,{className:"h-4 w-4"}):k==="accessory"?r.jsx(sr,{className:"h-4 w-4"}):k==="potion"?r.jsx(cs,{className:"h-4 w-4"}):r.jsx(ca,{className:"h-4 w-4"}),E=k=>{const O={common:.3,uncommon:.35,rare:.4,epic:.45,legendary:.5};return Math.floor(k.price*O[k.rarity])},M=k=>!(!k.consumable||k.consumable.type==="potion"&&(k.consumable.description.includes("HP")&&t.hp>=t.max_hp||k.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),R=k=>{if(!k.equipment)return null;const O=x===k.id;return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${k.is_equipped?"bg-primary/10 border-primary/30":"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30"} ${O?"ring-2 ring-primary/50":""}`,onClick:()=>y(O?null:k.id),children:[r.jsx("div",{className:"flex-shrink-0",children:C(k.equipment.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.equipment.name}),k.is_equipped&&r.jsx("span",{className:"text-xs bg-primary/20 text-primary px-1.5 py-0.5 rounded",children:"Equipado"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[r.jsx("span",{className:S(k.equipment.rarity),children:k.equipment.rarity}),k.equipment.atk_bonus>0&&r.jsxs("span",{className:"text-red-400",children:["+",k.equipment.atk_bonus," ATK"]}),k.equipment.def_bonus>0&&r.jsxs("span",{className:"text-blue-400",children:["+",k.equipment.def_bonus," DEF"]})]})]}),r.jsxs("div",{className:"text-xs text-amber-400",children:[r.jsx(wa,{className:"h-3 w-3 inline mr-1"}),E(k.equipment)]})]}),O&&r.jsxs("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-3 shadow-lg space-y-3",children:[!k.is_equipped&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-semibold text-slate-200 mb-2",children:"Comparao se Equipado"}),r.jsx(Oy,{characterId:t.id,newEquipment:k.equipment,slotType:k.equipment.type,showTitle:!1,compact:!0})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(fe,{size:"sm",variant:k.is_equipped?"secondary":"default",onClick:()=>j(k,"toggle"),className:"flex-1 text-xs",children:k.is_equipped?"Desequipar":"Equipar"}),r.jsx(fe,{size:"sm",variant:"destructive",onClick:()=>j(k,"sell"),className:"flex-1 text-xs",children:"Vender"})]})]})]},k.id)},P=k=>{if(!k.consumable)return null;const O=x===k.id,H=M(k);return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ${H?"bg-slate-800/30 border-slate-700/30 hover:bg-slate-700/30":"bg-slate-800/20 border-slate-700/20 opacity-60"} ${O?"ring-2 ring-primary/50":""}`,onClick:()=>H&&y(O?null:k.id),children:[r.jsx("div",{className:"flex-shrink-0",children:k.consumable.type==="potion"&&k.consumable.description.includes("HP")?r.jsx(cs,{className:"h-4 w-4 text-red-400"}):k.consumable.type==="potion"&&k.consumable.description.includes("Mana")?r.jsx(Ct,{className:"h-4 w-4 text-blue-400"}):r.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.consumable.name}),r.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",k.quantity]})]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["+",k.consumable.effect_value," ",k.consumable.type]})]})]}),O&&H&&r.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 bg-slate-800 border border-slate-600 rounded-lg p-2 shadow-lg",children:r.jsx(fe,{size:"sm",onClick:()=>N(k),className:"w-full text-xs",children:"Usar Agora"})})]},k.id)},$=k=>k.drop?r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-slate-800/30 border border-slate-700/30",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(jt,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium text-slate-200 truncate",children:k.drop.name}),r.jsxs("span",{className:"text-xs bg-slate-700/50 text-slate-300 px-1.5 py-0.5 rounded",children:["x",k.quantity]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx("span",{className:S(k.drop.rarity),children:k.drop.rarity}),r.jsxs("span",{className:"text-amber-400",children:[k.drop.value," gold cada"]})]})]})]},k.id):null;return p?r.jsx(Rn,{open:e,onOpenChange:s,children:r.jsxs(Zr,{className:"max-w-md",children:[r.jsx(Ny,{children:r.jsx(Qr,{children:"Carregando Inventrio"})}),r.jsxs("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"}),r.jsx("span",{className:"ml-2 text-slate-300",children:"Carregando..."})]})]})}):r.jsx(Rn,{open:e,onOpenChange:s,children:r.jsxs(Zr,{className:"max-w-md max-h-[80vh] bg-slate-900/95 border-slate-700/50",onClick:k=>{k.target===k.currentTarget&&y(null)},children:[r.jsx(Mn,{className:"pb-2",children:r.jsxs(Qr,{className:"flex items-center justify-between text-slate-100",children:[r.jsx("span",{children:"Inventrio"}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-amber-300",children:t.gold})]})]})}),r.jsxs(MR,{defaultValue:"equipment",className:"w-full",children:[r.jsxs(Dy,{className:"grid w-full grid-cols-3 bg-slate-800/50",children:[r.jsxs(xo,{value:"equipment",className:"text-xs",children:["Equipamentos (",n.length,")"]}),r.jsxs(xo,{value:"consumables",className:"text-xs",children:["Consumveis (",c.length,")"]}),r.jsxs(xo,{value:"drops",className:"text-xs",children:["Materiais (",f.length,")"]})]}),r.jsx(vo,{value:"equipment",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:n.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(ca,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum equipamento"})]}):n.map(R)})}),r.jsx(vo,{value:"consumables",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(lt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum consumvel"})]}):c.filter(k=>k.quantity>0).map(P)})}),r.jsx(vo,{value:"drops",className:"mt-4",children:r.jsx("div",{className:"space-y-2 max-h-[50vh] overflow-y-auto",children:f.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(jt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"Nenhum material"})]}):f.filter(k=>k.quantity>0).map($)})})]})]})})},oY=({character:t,onPurchase:e})=>{const[s,a]=b.useState([]),[n,i]=b.useState([]),[c,u]=b.useState(!0),[f,h]=b.useState(!1);b.useEffect(()=>{p()},[t.level]);const p=async(_=!1)=>{try{let j=0;_?j=window.scrollY||document.documentElement.scrollTop:u(!0);const N=await Ft.getAvailableEquipment(t.level);a(N);const S=await zt.getAvailableConsumables();if(S.success&&S.data){const C=S.data.filter(E=>E.price>0&&!E.name.includes("Elixir"));i(C)}_&&requestAnimationFrame(()=>{window.scrollTo(0,j)})}catch(j){console.error("Erro ao carregar itens da loja:",j),me.error("Erro ao carregar itens da loja")}finally{_||u(!1)}},g=async _=>{var j;if(t.gold<_.price){me.error("Gold insuficiente para comprar este item!");return}try{const N=await Ft.buyEquipment(t.id,_.id);N.success&&((j=N.data)==null?void 0:j.newGold)!==void 0?(me.success(`${_.name} comprado com sucesso!`),e(N.data.newGold)):me.error(N.error||"Erro ao comprar equipamento!")}catch(N){console.error("Erro ao comprar equipamento:",N),me.error("Erro ao comprar equipamento!")}},x=async(_,j=1)=>{const N=_.price*j;if(t.gold<N){me.error("Gold insuficiente para comprar este item!");return}try{const S=await zt.buyConsumable(t.id,_.id,j);S.success&&S.data?(me.success(`${j}x ${_.name} comprado com sucesso!`),e(S.data.newGold)):me.error(S.error||"Erro ao comprar consumvel!")}catch(S){console.error("Erro ao comprar consumvel:",S),me.error("Erro ao comprar consumvel!")}},y=_=>{e(_)};return c?r.jsxs("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary mr-4"}),r.jsx("span",{children:"Carregando loja..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(rY,{character:t,availableEquipment:s,availableConsumables:n,onEquipmentPurchase:g,onConsumablePurchase:x,onOpenInventory:()=>h(!0)}),r.jsx(nY,{character:t,isOpen:f,onClose:()=>h(!1),onItemSold:y})]})};function iY(){const t=Rt(),{character:e}=BR.useSearch(),[s,a]=b.useState(null),[n,i]=b.useState(!0),[c,u]=b.useState(null);b.useEffect(()=>{f()},[e]);const f=async()=>{if(!e){t({to:"/game/play"});return}try{i(!0),u(null);const g=await at.getCharacter(e);if(g.success&&g.data)a(g.data);else{const x=g.error||"Erro desconhecido ao carregar personagem";u(x),me.error("Erro ao carregar personagem",{description:x})}}catch(g){const x=g instanceof Error?g.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",g),u(x),me.error("Erro ao carregar personagem",{description:x})}finally{i(!1)}},h=async g=>{s&&a(x=>({...x,gold:g}))},p=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return n?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Carregando Loja"}),r.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto carregamos os itens..."})]})}):c||!s?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsx("div",{className:"w-full max-w-md text-center",children:r.jsxs(Oe,{className:"p-6",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-red-500",children:"Erro ao Carregar Loja"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-muted-foreground",children:c||"No foi possvel carregar o personagem selecionado."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{onClick:f,className:"flex-1",children:[r.jsx(uv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),r.jsxs(fe,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-7xl",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4 mb-6",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:p,className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Voltar ao Hub"}),r.jsx("span",{className:"sm:hidden",children:"Voltar"})]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Loja"}),r.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground",children:[s.name,"  Nvel ",s.level,"  Andar ",s.floor]})]})]})}),r.jsx(oY,{character:s,onPurchase:h})]})})}const BR=Yt("/_authenticated/game/play/shop")({component:iY,validateSearch:t=>({character:t.character||""})});class jo{static async getCharacterPotionSlots(e){try{const{data:s,error:a}=await we.rpc("get_character_potion_slots",{p_character_id:e});if(a)throw a;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,consumable_id:null,consumable_name:null,consumable_description:null,effect_value:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de poo:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de poo",success:!1}}}static async getCharacterSpellSlots(e){try{const{data:s,error:a}=await we.rpc("get_character_spell_slots",{p_character_id:e});if(a)throw a;const n=[];for(let i=1;i<=3;i++){const c=s==null?void 0:s.find(u=>u.slot_position===i);n.push(c||{slot_position:i,spell_id:null,spell_name:null,spell_description:null,mana_cost:null,damage:null,spell_type:null})}return{data:n,error:null,success:!0}}catch(s){return console.error("Erro ao buscar slots de spell:",s instanceof Error?s.message:s),{data:null,error:"Erro ao buscar slots de spell",success:!1}}}static async setPotionSlot(e,s,a){try{console.log(`[SlotService] Configurando slot ${s} com consumvel ${a}`);const{data:n,error:i}=await we.rpc("set_potion_slot",{p_character_id:e,p_slot_position:s,p_consumable_id:a}).single();if(i)throw console.error("[SlotService] Erro no RPC set_potion_slot:",i.message),i;const c=n;return c.success?(console.log(`[SlotService] Slot ${s} configurado com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Operao falhou: ${c.error}`),{data:null,error:c.error||"Erro ao configurar slot de poo",success:!1})}catch(n){return console.error("Erro ao configurar slot de poo:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de poo",success:!1}}}static async clearPotionSlot(e,s){try{console.log(`[SlotService] Limpando slot ${s}`);const{data:a,error:n}=await we.rpc("clear_potion_slot",{p_character_id:e,p_slot_position:s}).single();if(n)throw console.error("[SlotService] Erro no RPC clear_potion_slot:",n.message),n;const i=a;return i.success?(console.log(`[SlotService] Slot ${s} limpo com sucesso`),{data:null,error:null,success:!0}):(console.warn(`[SlotService] Falha ao limpar slot: ${i.error}`),{data:null,error:i.error||"Erro ao limpar slot de poo",success:!1})}catch(a){return console.error("Erro ao limpar slot de poo:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao limpar slot de poo",success:!1}}}static async setSpellSlot(e,s,a){try{const{error:n}=await we.rpc("set_spell_slot",{p_character_id:e,p_slot_position:s,p_spell_id:a});if(n)throw n;return{data:null,error:null,success:!0}}catch(n){return console.error("Erro ao configurar slot de spell:",n instanceof Error?n.message:n),{data:null,error:n instanceof Error?n.message:"Erro ao configurar slot de spell",success:!1}}}static async consumePotionFromSlot(e,s){try{if(!e)return{success:!1,error:"ID do personagem  obrigatrio",data:null};if(s<1||s>3)return{success:!1,error:"Posio do slot invlida (1-3)",data:null};const{supabaseAdmin:a}=await Us(async()=>{const{supabaseAdmin:u}=await Promise.resolve().then(()=>rd);return{supabaseAdmin:u}},void 0),{data:n,error:i}=await a.rpc("consume_potion_from_slot",{p_character_id:e,p_slot_position:s});return i?(console.error("Erro ao consumir poo do slot:",i),{success:!1,error:i.message||"Erro ao usar poo",data:null}):n?{success:!0,error:null,data:{success:n.success,message:n.message,new_hp:Math.floor(Number(n.new_hp)),new_mana:Math.floor(Number(n.new_mana))}}:{success:!1,error:"Nenhum resultado retornado",data:null}}catch(a){return console.error("Erro ao consumir poo do slot:",a),{success:!1,error:a instanceof Error?a.message:"Erro desconhecido",data:null}}}static async clearSpellSlot(e,s){return this.setSpellSlot(e,s,null)}}const lY=({character:t,onInventoryChange:e})=>{const[s,a]=b.useState([]),[n,i]=b.useState([]),[c,u]=b.useState([]),[f,h]=b.useState(!0),[p,g]=b.useState(null),[x,y]=b.useState(null),[_,j]=b.useState(null),[N,S]=b.useState(null),C=b.useCallback(async()=>{try{h(!0);const[G,A,B]=await Promise.all([zt.getCharacterConsumables(t.id),zt.getCharacterDrops(t.id),jo.getCharacterPotionSlots(t.id)]);a(G.success?G.data||[]:[]),i(A.success?A.data||[]:[]),u(B.success?B.data||[]:[])}catch(G){console.error("Erro ao carregar inventrio:",G),me.error("Erro ao carregar inventrio"),a([]),i([]),u([])}finally{h(!1)}},[t.id]);b.useEffect(()=>{C()},[C]);const E=async G=>{if(!G.consumable||G.quantity<=0){me.error("Consumvel no disponvel");return}j(G.consumable_id);try{const A=await zt.consumeItem(t.id,G.consumable_id,t);A.success&&A.data?(await C(),e(),me.success(A.data.message)):me.error(A.error||"Erro ao usar consumvel")}catch(A){console.error("Erro ao usar consumvel:",A),me.error("Erro ao usar consumvel")}finally{j(null)}},M=async(G,A)=>{S(A);try{const B=await jo.setPotionSlot(t.id,A,G);B.success?(await C(),me.success(`Poo atribuda ao slot ${P(A)}!`)):me.error(B.error||"Erro ao atribuir poo")}catch(B){console.error("Erro ao atribuir poo:",B),me.error("Erro ao atribuir poo")}finally{S(null)}},R=async G=>{try{const A=await jo.clearPotionSlot(t.id,G);A.success?(await C(),me.success("Slot limpo!")):me.error(A.error||"Erro ao limpar slot")}catch(A){console.error("Erro ao limpar slot:",A),me.error("Erro ao limpar slot")}},P=G=>{switch(G){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},$=G=>!(!G.consumable||G.consumable.type==="potion"&&(G.consumable.description.includes("HP")&&t.hp>=t.max_hp||G.consumable.description.includes("Mana")&&t.mana>=t.max_mana)),k=G=>{if(!G.consumable)return r.jsx(ca,{className:"h-6 w-6 text-slate-400"});if(G.consumable.type==="potion"){if(G.consumable.description.includes("HP"))return r.jsx(cs,{className:"h-6 w-6 text-red-400"});if(G.consumable.description.includes("Mana"))return r.jsx(Ct,{className:"h-6 w-6 text-blue-400"})}return r.jsx(lt,{className:"h-6 w-6 text-purple-400"})},O=()=>r.jsx(jt,{className:"h-6 w-6 text-amber-400"}),H=G=>{const A={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return A[G]||A.common},Y=()=>r.jsxs("div",{className:"flex gap-2 mb-4",children:[c.map(G=>{const A=P(G.slot_position),B=!G.consumable_id;return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`w-12 h-12 border-2 rounded-lg flex items-center justify-center cursor-pointer transition-all duration-200 ${B?"border-dashed border-slate-600 bg-slate-800/30 hover:border-slate-500":"border-solid border-blue-600 bg-blue-900/30 hover:brightness-110"}`,title:B?`Slot ${A} vazio`:G.consumable_name||"Poo",children:B?r.jsx($o,{className:"h-4 w-4 text-slate-500"}):r.jsx("span",{className:"text-lg",children:""})}),r.jsx(ze,{className:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center bg-blue-600 text-white text-xs",children:A}),!B&&r.jsx(fe,{variant:"destructive",size:"sm",className:"absolute -top-1 -left-1 h-4 w-4 p-0 rounded-full",onClick:()=>R(G.slot_position),children:r.jsx(Oi,{className:"h-2 w-2"})})]},G.slot_position)}),r.jsx("div",{className:"flex items-center ml-2",children:r.jsx("span",{className:"text-xs text-slate-500",children:"Slots de Poes (Q, W, E)"})})]}),I=()=>{const G=s.filter(A=>A.consumable&&A.quantity>0);return G.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ca,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum consumvel disponvel"})]}):r.jsx("div",{className:"grid grid-cols-8 gap-2",children:G.map(A=>{const B=(p==null?void 0:p.id)===A.id,V=$(A);return r.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${B?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":"border-slate-600 bg-slate-800/30 hover:border-slate-400"} ${V?"":"opacity-50"}`,onClick:()=>{g(A),y(null)},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:k(A)}),A.quantity>1&&r.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:A.quantity}),!V&&r.jsx("div",{className:"absolute top-1 left-1 w-2 h-2 bg-red-500 rounded-full"})]},`consumable-${A.id}`)})})},z=()=>{const G=n.filter(A=>A.drop&&A.quantity>0);return G.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ca,{className:"h-16 w-16 mx-auto mb-4 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum material disponvel"})]}):r.jsx("div",{className:"grid grid-cols-8 gap-2",children:G.map(A=>{var W;const B=(x==null?void 0:x.id)===A.id,V=((W=A.drop)==null?void 0:W.rarity)||"common";return r.jsxs("div",{className:`relative aspect-square border-2 rounded-lg cursor-pointer transition-all duration-200 hover:scale-105 ${B?"border-amber-400 bg-amber-900/30 shadow-lg shadow-amber-400/20":`${H(V)} hover:border-slate-400`}`,onClick:()=>{y(A),g(null)},children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:O()}),A.quantity>1&&r.jsx("div",{className:"absolute bottom-1 right-1 bg-slate-900/80 text-slate-200 text-xs px-1 rounded",children:A.quantity})]},`drop-${A.id}`)})})},ee=()=>{if(p!=null&&p.consumable){const G=p,A=G.consumable,B=$(G),V=A.type==="potion";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"p-4 rounded-lg border-2 border-slate-600 bg-slate-800/30",children:k(G)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:A.name}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{className:"bg-slate-700/50 text-slate-200 border-0",children:A.type}),r.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",G.quantity]})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:A.description})}),A.effect_value>0&&r.jsxs("div",{className:"bg-emerald-900/30 border border-emerald-700/50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(lt,{className:"h-4 w-4 text-emerald-400"}),r.jsx("span",{className:"text-emerald-300 font-medium",children:"Efeito"})]}),r.jsxs("p",{className:"text-emerald-200",children:["+",A.effect_value," ",A.type]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(fe,{onClick:()=>E(G),disabled:!B||_===G.consumable_id,className:`w-full ${B?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:_===G.consumable_id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Usando..."]}):B?"Usar Item":A.type==="potion"&&A.description.includes("HP")&&t.hp>=t.max_hp?"HP j est no mximo":A.type==="potion"&&A.description.includes("Mana")&&t.mana>=t.max_mana?"Mana j est no mximo":"No pode ser usado agora"}),V&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-medium text-slate-300",children:"Atribuir ao slot:"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:c.map(W=>{const L=P(W.slot_position),F=N===W.slot_position,ie=!!W.consumable_id;return r.jsx(fe,{variant:"outline",size:"sm",disabled:F,onClick:()=>M(G.consumable_id,W.slot_position),className:`${ie?"border-blue-600 bg-blue-900/20":"border-slate-600"}`,children:F?r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-t border-b border-current"}):r.jsxs(r.Fragment,{children:["Slot ",L,ie&&r.jsx("span",{className:"ml-1 text-xs",children:"(ocupado)"})]})},W.slot_position)})}),r.jsx("p",{className:"text-xs text-slate-500",children:"Poes atribudas aos slots podem ser usadas rapidamente durante batalhas"})]})]})]})}if(x!=null&&x.drop){const G=x,A=G.drop;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${H(A.rarity)}`,children:O()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:A.name}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{className:`${H(A.rarity)} border-0 text-slate-200`,children:A.rarity}),r.jsxs("span",{className:"text-slate-400",children:["Quantidade: ",G.quantity]})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:A.description})}),r.jsxs("div",{className:"bg-amber-900/30 border border-amber-700/50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(wa,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-amber-300 font-medium",children:"Valor"})]}),r.jsxs("p",{className:"text-amber-200",children:[A.value," gold por unidade"]})]})]})}return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ca,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um item"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})})};return f?r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[70vh]",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsx(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsx(He,{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-slate-700 rounded w-32"}),r.jsx("div",{className:"grid grid-cols-8 gap-2",children:Array.from({length:16}).map((G,A)=>r.jsx("div",{className:"aspect-square bg-slate-700 rounded"},A))})]})})})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(Oe,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:r.jsx(He,{className:"p-6",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-slate-700 rounded w-24"}),r.jsx("div",{className:"h-32 bg-slate-700 rounded"})]})})})})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Inventrio"}),r.jsxs("div",{className:"flex items-center gap-2 text-amber-400 bg-slate-800/30 px-3 py-1 rounded-lg border border-slate-700/50",children:[r.jsx(wa,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:t.gold.toLocaleString()})]})]}),r.jsx(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsxs(He,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5 text-purple-400"}),"Consumveis (",s.filter(G=>G.quantity>0).length,")"]}),Y(),I()]})}),r.jsx(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:r.jsxs(He,{className:"p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-100 mb-4 flex items-center gap-2",children:[r.jsx(jt,{className:"h-5 w-5 text-amber-400"}),"Materiais (",n.filter(G=>G.quantity>0).length,")"]}),z()]})})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsx(Oe,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:r.jsx(He,{className:"p-6 h-full",children:ee()})})})]})},IR=Yt("/_authenticated/game/play/inventory")({component:cY,validateSearch:t=>({character:t.character||""})});function cY(){const t=Rt(),{character:e}=IR.useSearch(),{loadCharacterForHub:s}=Mc(),[a,n]=b.useState(null),[i,c]=b.useState(!0),[u,f]=b.useState(null),[h,p]=b.useState(!1),[g,x]=b.useState(!1),y=async(S=!0,C=!1)=>{if(!e){t({to:"/game/play"});return}if(!(!C&&g&&(a==null?void 0:a.id)===e&&!S)){S?c(!0):p(!0),f(null);try{const E=await at.getCharacter(e);if(E.success&&E.data)n(E.data),await s(E.data),x(!0);else{const M=E.error||"Erro desconhecido ao carregar personagem";f(M),me.error("Erro ao carregar personagem",{description:M})}}catch(E){const M=E instanceof Error?E.message:"Erro desconhecido";console.error("Erro ao carregar personagem:",E),f(M),me.error("Erro ao carregar personagem",{description:M})}finally{c(!1),p(!1)}}};b.useEffect(()=>{y(!0)},[e]);const _=()=>{y(!1,!0)},j=()=>{y(!1,!0)},N=()=>{t(e?{to:"/game/play/hub",search:{character:e}}:{to:"/game/play"})};return i?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-amber-400 mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2 text-slate-100",children:"Carregando Inventrio"}),r.jsx("p",{className:"text-slate-400",children:"Aguarde enquanto carregamos seus itens..."})]})}):u||!a?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-slate-900 to-black p-4",children:r.jsx("div",{className:"w-full max-w-md text-center",children:r.jsxs(Oe,{className:"p-6 bg-slate-800/50 border-slate-700/50",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-red-400",children:"Erro ao Carregar Inventrio"})}),r.jsxs(He,{className:"space-y-4",children:[r.jsx("p",{className:"text-slate-400",children:u||"No foi possvel carregar o personagem selecionado."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{onClick:()=>y(),className:"flex-1 bg-amber-600 hover:bg-amber-700",children:[r.jsx(uv,{className:"h-4 w-4 mr-2"}),"Tentar Novamente"]}),r.jsxs(fe,{variant:"outline",onClick:()=>t({to:"/game/play"}),className:"flex-1 border-slate-600 text-slate-300",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]})]})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 to-black",children:r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:N,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Inventrio"}),r.jsxs("p",{className:"text-slate-400",children:[a.name,"  Nvel ",a.level]})]})]}),r.jsxs(fe,{variant:"outline",size:"sm",onClick:j,disabled:h,className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[r.jsx(uv,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),h?"Atualizando...":"Atualizar"]})]}),r.jsx(lY,{character:a,onInventoryChange:_})]})})}const uY=({isOpen:t,onClose:e,character:s,onStartFromCheckpoint:a})=>{const[n,i]=b.useState([]),[c,u]=b.useState(!1),[f,h]=b.useState(null);b.useEffect(()=>{t&&p()},[t,s.id]);const p=async()=>{u(!0);try{console.log(`[MapModal] Carregando checkpoints para personagem ${s.name} (ID: ${s.id})`),console.log(`[MapModal] Andar atual do personagem: ${s.floor}`);const j=await at.getUnlockedCheckpoints(s.id);if(console.log("[MapModal] Resposta do CharacterService:",j),j.success&&j.data){if(console.log("[MapModal] Checkpoints carregados:",j.data),i(j.data),j.data.length>0){const N=j.data.find(C=>C.floor===s.floor),S=N?N.floor:j.data[j.data.length-1].floor;h(S),console.log(`[MapModal] Checkpoint selecionado por padro: ${S}`)}}else console.error("[MapModal] Erro ao carregar checkpoints:",j.error),me.error("Erro ao carregar checkpoints",{description:j.error})}catch(j){console.error("[MapModal] Erro ao carregar checkpoints:",j),me.error("Erro ao carregar checkpoints")}finally{u(!1)}},g=async()=>{if(f===null){me.error("Selecione um checkpoint");return}try{u(!0),a(f),e()}catch(j){console.error("Erro ao iniciar aventura:",j),me.error("Erro ao iniciar aventura")}finally{u(!1)}},x=j=>j===1?r.jsx(cv,{className:"h-5 w-5"}):j>1&&(j-1)%10===0?r.jsx(Ei,{className:"h-5 w-5"}):r.jsx(lv,{className:"h-5 w-5"}),y=j=>j===1?"bg-green-500":j>1&&(j-1)%10===0?"bg-yellow-500":"bg-blue-500",_=j=>j===1?"Incio da aventura":j>1&&(j-1)%10===0?"Santurio Ps-Boss":"Checkpoint";return r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Zr,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(Mn,{children:[r.jsxs(Qr,{className:"flex items-center gap-2",children:[r.jsx(lv,{className:"h-6 w-6"}),"Mapa da Torre - Checkpoints Desbloqueados"]}),r.jsx(vc,{children:"Escolha de qual andar voc deseja iniciar sua aventura. Voc s pode acessar checkpoints que j alcanou antes."})]}),r.jsx("div",{className:"space-y-4",children:c?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:n.map(j=>r.jsxs(Oe,{className:`cursor-pointer transition-all hover:shadow-md ${f===j.floor?"ring-2 ring-primary bg-primary/5":"hover:bg-accent/50"}`,onClick:()=>h(j.floor),children:[r.jsx(ht,{className:"pb-2",children:r.jsxs(xt,{className:"text-sm flex items-center gap-2",children:[r.jsx("div",{className:`p-1 rounded-full text-white ${y(j.floor)}`,children:x(j.floor)}),j.description,f===j.floor&&r.jsx(fb,{className:"h-4 w-4 text-primary ml-auto"})]})}),r.jsxs(He,{className:"pt-0",children:[r.jsx("div",{className:"text-xs text-muted-foreground",children:_(j.floor)}),s.floor===j.floor&&r.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:"Posio Atual"})]})]},j.floor))}),r.jsx(Oe,{className:"bg-muted/30",children:r.jsxs(He,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{children:"Andar Atual:"}),r.jsx("span",{className:"font-bold",children:s.floor})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm mt-1",children:[r.jsx("span",{children:"Checkpoints Desbloqueados:"}),r.jsx("span",{className:"font-bold",children:n.length})]})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(fe,{variant:"outline",onClick:e,className:"flex-1",disabled:c,children:"Cancelar"}),r.jsxs(fe,{onClick:g,className:"flex-1",disabled:c||f===null,children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}):r.jsx(cv,{className:"h-4 w-4 mr-2"}),"Iniciar Aventura"]})]})]})})]})})};var[bp,LW]=nr("Tooltip",[Tc]),yp=Tc(),VR="TooltipProvider",dY=700,Zv="tooltip.open",[fY,$y]=bp(VR),qR=t=>{const{__scopeTooltip:e,delayDuration:s=dY,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=t,c=b.useRef(!0),u=b.useRef(!1),f=b.useRef(0);return b.useEffect(()=>{const h=f.current;return()=>window.clearTimeout(h)},[]),r.jsx(fY,{scope:e,isOpenDelayedRef:c,delayDuration:s,onOpen:b.useCallback(()=>{window.clearTimeout(f.current),c.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:u,onPointerInTransitChange:b.useCallback(h=>{u.current=h},[]),disableHoverableContent:n,children:i})};qR.displayName=VR;var Td="Tooltip",[hY,wp]=bp(Td),UR=t=>{const{__scopeTooltip:e,children:s,open:a,defaultOpen:n,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=t,f=$y(Td,t.__scopeTooltip),h=yp(e),[p,g]=b.useState(null),x=Fr(),y=b.useRef(0),_=c??f.disableHoverableContent,j=u??f.delayDuration,N=b.useRef(!1),[S,C]=To({prop:a,defaultProp:n??!1,onChange:$=>{$?(f.onOpen(),document.dispatchEvent(new CustomEvent(Zv))):f.onClose(),i==null||i($)},caller:Td}),E=b.useMemo(()=>S?N.current?"delayed-open":"instant-open":"closed",[S]),M=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,N.current=!1,C(!0)},[C]),R=b.useCallback(()=>{window.clearTimeout(y.current),y.current=0,C(!1)},[C]),P=b.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{N.current=!0,C(!0),y.current=0},j)},[j,C]);return b.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),r.jsx(wy,{...h,children:r.jsx(hY,{scope:e,contentId:x,open:S,stateAttribute:E,trigger:p,onTriggerChange:g,onTriggerEnter:b.useCallback(()=>{f.isOpenDelayedRef.current?P():M()},[f.isOpenDelayedRef,P,M]),onTriggerLeave:b.useCallback(()=>{_?R():(window.clearTimeout(y.current),y.current=0)},[R,_]),onOpen:M,onClose:R,disableHoverableContent:_,children:s})})};UR.displayName=Td;var Qv="TooltipTrigger",zR=b.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,n=wp(Qv,s),i=$y(Qv,s),c=yp(s),u=b.useRef(null),f=wt(e,u,n.onTriggerChange),h=b.useRef(!1),p=b.useRef(!1),g=b.useCallback(()=>h.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",g),[g]),r.jsx(dp,{asChild:!0,...c,children:r.jsx(Ke.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:f,onPointerMove:Ge(t.onPointerMove,x=>{x.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),p.current=!0)}),onPointerLeave:Ge(t.onPointerLeave,()=>{n.onTriggerLeave(),p.current=!1}),onPointerDown:Ge(t.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})}),onFocus:Ge(t.onFocus,()=>{h.current||n.onOpen()}),onBlur:Ge(t.onBlur,n.onClose),onClick:Ge(t.onClick,n.onClose)})})});zR.displayName=Qv;var mY="TooltipPortal",[BW,pY]=bp(mY,{forceMount:void 0}),bc="TooltipContent",FR=b.forwardRef((t,e)=>{const s=pY(bc,t.__scopeTooltip),{forceMount:a=s.forceMount,side:n="top",...i}=t,c=wp(bc,t.__scopeTooltip);return r.jsx(Ba,{present:a||c.open,children:c.disableHoverableContent?r.jsx(HR,{side:n,...i,ref:e}):r.jsx(gY,{side:n,...i,ref:e})})}),gY=b.forwardRef((t,e)=>{const s=wp(bc,t.__scopeTooltip),a=$y(bc,t.__scopeTooltip),n=b.useRef(null),i=wt(e,n),[c,u]=b.useState(null),{trigger:f,onClose:h}=s,p=n.current,{onPointerInTransitChange:g}=a,x=b.useCallback(()=>{u(null),g(!1)},[g]),y=b.useCallback((_,j)=>{const N=_.currentTarget,S={x:_.clientX,y:_.clientY},C=wY(S,N.getBoundingClientRect()),E=_Y(S,C),M=jY(j.getBoundingClientRect()),R=SY([...E,...M]);u(R),g(!0)},[g]);return b.useEffect(()=>()=>x(),[x]),b.useEffect(()=>{if(f&&p){const _=N=>y(N,p),j=N=>y(N,f);return f.addEventListener("pointerleave",_),p.addEventListener("pointerleave",j),()=>{f.removeEventListener("pointerleave",_),p.removeEventListener("pointerleave",j)}}},[f,p,y,x]),b.useEffect(()=>{if(c){const _=j=>{const N=j.target,S={x:j.clientX,y:j.clientY},C=(f==null?void 0:f.contains(N))||(p==null?void 0:p.contains(N)),E=!NY(S,c);C?x():E&&(x(),h())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[f,p,c,h,x]),r.jsx(HR,{...t,ref:i})}),[xY,vY]=bp(Td,{isInside:!1}),bY=V8("TooltipContent"),HR=b.forwardRef((t,e)=>{const{__scopeTooltip:s,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=t,f=wp(bc,s),h=yp(s),{onClose:p}=f;return b.useEffect(()=>(document.addEventListener(Zv,p),()=>document.removeEventListener(Zv,p)),[p]),b.useEffect(()=>{if(f.trigger){const g=x=>{const y=x.target;y!=null&&y.contains(f.trigger)&&p()};return window.addEventListener("scroll",g,{capture:!0}),()=>window.removeEventListener("scroll",g,{capture:!0})}},[f.trigger,p]),r.jsx(Dd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:p,children:r.jsxs(_y,{"data-state":f.stateAttribute,...h,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(bY,{children:a}),r.jsx(xY,{scope:s,isInside:!0,children:r.jsx(GH,{id:f.contentId,role:"tooltip",children:n||a})})]})})});FR.displayName=bc;var GR="TooltipArrow",yY=b.forwardRef((t,e)=>{const{__scopeTooltip:s,...a}=t,n=yp(s);return vY(GR,s).isInside?null:r.jsx(jy,{...n,...a,ref:e})});yY.displayName=GR;function wY(t,e){const s=Math.abs(e.top-t.y),a=Math.abs(e.bottom-t.y),n=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(s,a,n,i)){case i:return"left";case n:return"right";case s:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function _Y(t,e,s=5){const a=[];switch(e){case"top":a.push({x:t.x-s,y:t.y+s},{x:t.x+s,y:t.y+s});break;case"bottom":a.push({x:t.x-s,y:t.y-s},{x:t.x+s,y:t.y-s});break;case"left":a.push({x:t.x+s,y:t.y-s},{x:t.x+s,y:t.y+s});break;case"right":a.push({x:t.x-s,y:t.y-s},{x:t.x-s,y:t.y+s});break}return a}function jY(t){const{top:e,right:s,bottom:a,left:n}=t;return[{x:n,y:e},{x:s,y:e},{x:s,y:a},{x:n,y:a}]}function NY(t,e){const{x:s,y:a}=t;let n=!1;for(let i=0,c=e.length-1;i<e.length;c=i++){const u=e[i],f=e[c],h=u.x,p=u.y,g=f.x,x=f.y;p>a!=x>a&&s<(g-h)*(a-p)/(x-p)+h&&(n=!n)}return n}function SY(t){const e=t.slice();return e.sort((s,a)=>s.x<a.x?-1:s.x>a.x?1:s.y<a.y?-1:s.y>a.y?1:0),EY(e)}function EY(t){if(t.length<=1)return t.slice();const e=[];for(let a=0;a<t.length;a++){const n=t[a];for(;e.length>=2;){const i=e[e.length-1],c=e[e.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))e.pop();else break}e.push(n)}e.pop();const s=[];for(let a=t.length-1;a>=0;a--){const n=t[a];for(;s.length>=2;){const i=s[s.length-1],c=s[s.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}return s.pop(),e.length===1&&s.length===1&&e[0].x===s[0].x&&e[0].y===s[0].y?e:e.concat(s)}var CY=qR,AY=UR,kY=zR,XR=FR;const TY=CY,RY=AY,MY=kY,YR=b.forwardRef(({className:t,sideOffset:e=4,...s},a)=>r.jsx(XR,{ref:a,sideOffset:e,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));YR.displayName=XR.displayName;function _n({value:t,baseValue:e,equipmentBonus:s=0,modifications:a=[],size:n="md",showTooltip:i=!1,label:c,icon:u,className:f=""}){const h=isNaN(t)||t===void 0||t===null?0:t,p=isNaN(e||0)||e===void 0||e===null?0:e||0,g=isNaN(s)||s===void 0?0:s,x=a.reduce((N,S)=>S.type==="flat"?N+(isNaN(S.value)?0:S.value):N+(p||h)*((isNaN(S.value)?0:S.value)/100),0),y=a.length>0,_={sm:"text-xs",md:"text-sm",lg:"text-base"},j=r.jsxs("div",{className:`inline-flex items-center gap-1 ${_[n]} ${f}`,children:[u&&r.jsx("span",{className:"inline-flex",children:u}),r.jsx("span",{className:`font-bold transition-all duration-300 ${y?"text-purple-400 animate-pulse drop-shadow-[0_0_6px_rgba(168,85,247,0.4)]":g>0?"text-green-400":""}`,children:Math.round(h)}),y&&r.jsxs("div",{className:"inline-flex items-center",children:[r.jsx("div",{className:"w-1 h-1 bg-purple-400 rounded-full animate-pulse"}),r.jsxs("div",{className:"ml-1 text-purple-300 text-xs animate-bounce",children:[x>0?"+":"",Math.round(x)]})]}),c&&r.jsx("span",{className:"text-muted-foreground ml-1",children:c})]});return i?r.jsx(TY,{children:r.jsxs(RY,{children:[r.jsx(MY,{asChild:!0,children:j}),r.jsx(YR,{className:"max-w-xs p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"font-semibold text-sm",children:"Detalhes da Estatstica"}),e!==void 0&&!isNaN(p)&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Base:"}),r.jsx("span",{children:Math.round(p)})]}),g>0&&r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("span",{className:"text-muted-foreground",children:"Equipamentos:"}),r.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:[r.jsx($o,{className:"h-3 w-3"}),Math.round(g)]})]}),a.length>0&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-xs font-medium text-purple-400 border-t border-border pt-2",children:"Efeitos Mgicos:"}),a.map((N,S)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-purple-300 flex items-center gap-1",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),N.source_spell]}),r.jsxs("span",{className:"text-purple-400 flex items-center gap-1",children:[N.value>0?r.jsx(La,{className:"h-3 w-3"}):r.jsx(fv,{className:"h-3 w-3"}),N.value>0?"+":"",N.value,N.type==="percentage"?"%":""]})]},S)),r.jsxs("div",{className:"flex justify-between text-xs pt-1 border-t border-purple-500/20",children:[r.jsx("span",{className:"text-purple-300",children:"Total Mgico:"}),r.jsxs("span",{className:"text-purple-400 font-medium",children:[x>0?"+":"",Math.round(x)]})]})]}),r.jsxs("div",{className:"flex justify-between text-xs font-medium pt-2 border-t border-border",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{className:`${y?"text-purple-400":"text-foreground"}`,children:Math.round(h)})]})]})})]})}):j}function PY({player:t}){const e=Rt(),[s,a]=b.useState(!1),[n,i]=b.useState(!1),c=async()=>{try{i(!0);const R=await at.getUnlockedCheckpoints(t.id);if(!R.success||!R.data||R.data.length===0){console.error("Nenhum checkpoint encontrado");return}const $=R.data.sort((O,H)=>H.floor-O.floor)[0];console.log(`[QuickPlay] Iniciando do checkpoint: Andar ${$.floor} - ${$.description}`);const k=await at.startFromCheckpoint(t.id,$.floor);if(!k.success){console.error("Erro ao iniciar do checkpoint:",k.error);return}console.log("[QuickPlay] Checkpoint configurado com sucesso. Redirecionando para batalha..."),e({to:"/game/play/battle/$character",params:{character:t.id}})}catch(R){console.error("Erro no incio rpido:",R)}finally{i(!1)}},f=(R=>R<=1?0:Math.floor(100*Math.pow(1.5,R-2)))(t.level),h=t.xp_next_level,p=t.xp-f,g=h-f,x=Math.max(0,Math.min(100,p/g*100)),y=t.hp/t.max_hp*100,_=t.mana/t.max_mana*100,j=[{name:"FOR",fullName:"Fora",value:t.strength||10,icon:kt,color:"text-red-400"},{name:"AGI",fullName:"Agilidade",value:t.dexterity||10,icon:Ct,color:"text-green-400"},{name:"INT",fullName:"Inteligncia",value:t.intelligence||10,icon:lt,color:"text-blue-400"},{name:"SAB",fullName:"Sabedoria",value:t.wisdom||10,icon:jt,color:"text-purple-400"},{name:"VIT",fullName:"Vitalidade",value:t.vitality||10,icon:cs,color:"text-pink-400"},{name:"SOR",fullName:"Sorte",value:t.luck||10,icon:Ei,color:"text-yellow-400"}],N=()=>y>=70?"bg-green-500":y>=40?"bg-yellow-500":y>=20?"bg-orange-500":"bg-red-500",S=()=>_>=70?"bg-blue-500":_>=40?"bg-cyan-500":_>=20?"bg-indigo-500":"bg-purple-500",C=R=>{switch(R){case"sword_mastery":return r.jsx(kt,{className:"h-4 w-4 text-red-400"});case"axe_mastery":return r.jsx(X6,{className:"h-4 w-4 text-orange-400"});case"blunt_mastery":return r.jsx(_i,{className:"h-4 w-4 text-yellow-400"});case"defense_mastery":return r.jsx(vt,{className:"h-4 w-4 text-blue-400"});case"magic_mastery":return r.jsx(lt,{className:"h-4 w-4 text-purple-400"});default:return r.jsx(ea,{className:"h-4 w-4 text-gray-400"})}},E=R=>{switch(R){case"sword_mastery":return"Maestria com Espadas";case"axe_mastery":return"Maestria com Machados";case"blunt_mastery":return"Maestria com Armas Pesadas";case"defense_mastery":return"Maestria em Defesa";case"magic_mastery":return"Maestria Mgica";default:return R}},M=[{key:"sword_mastery",level:t.sword_mastery||1,xp:t.sword_mastery_xp||0},{key:"axe_mastery",level:t.axe_mastery||1,xp:t.axe_mastery_xp||0},{key:"blunt_mastery",level:t.blunt_mastery||1,xp:t.blunt_mastery_xp||0},{key:"defense_mastery",level:t.defense_mastery||1,xp:t.defense_mastery_xp||0},{key:"magic_mastery",level:t.magic_mastery||1,xp:t.magic_mastery_xp||0}].filter(R=>R.level>1||R.xp>0);return r.jsxs(Oe,{className:"w-full bg-slate-900/80 border-slate-700 shadow-xl",children:[r.jsx(ht,{className:"pb-3",children:r.jsxs(xt,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-slate-700 rounded-lg",children:r.jsx(lm,{className:"h-5 w-5 text-slate-300"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-100",children:t.name}),r.jsx("p",{className:"text-sm text-slate-400",children:"Aventureiro"})]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[r.jsxs(fe,{onClick:c,disabled:n,size:"sm",className:"quick-play-button relative overflow-hidden bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 hover:from-violet-500 hover:via-purple-500 hover:to-indigo-500 text-white border border-violet-500/20 shadow-lg transition-all duration-300 hover:shadow-violet-500/25 hover:shadow-xl hover:-translate-y-0.5 flex-shrink-0 group disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:transform-none",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-600/50 via-purple-600/50 to-indigo-600/50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),!n&&r.jsx("div",{className:"quick-start-indicator absolute -top-1 -right-1 w-2 h-2 bg-amber-400 rounded-full shadow-sm shadow-amber-400/50"}),r.jsx(cv,{className:`h-3 w-3 mr-1.5 relative z-10 transition-transform duration-300 ${n?"animate-spin":"group-hover:scale-110 group-hover:drop-shadow-lg"}`}),r.jsx("span",{className:"relative z-10 font-medium tracking-wide",children:n?"Iniciando...":"Jogar"}),!n&&r.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-30 transition-opacity duration-500",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -skew-x-12 group-hover:animate-pulse"})})]}),r.jsxs(ze,{variant:"outline",className:"border-amber-500 text-amber-400 bg-amber-500/10 flex-shrink-0",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Nvel ",t.level]}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"text-slate-400 hover:text-slate-200 flex-shrink-0",children:s?r.jsx(fc,{className:"h-4 w-4"}):r.jsx(ko,{className:"h-4 w-4"})})]})]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Status"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(cs,{className:"h-4 w-4 text-red-400"}),"HP",t.hp<t.max_hp&&r.jsx("div",{className:"h-2 w-2 bg-green-400 rounded-full animate-pulse"})]}),r.jsxs("span",{className:"text-slate-400",children:[t.hp,"/",t.max_hp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:y,className:"h-2"}),r.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${N()}`,style:{width:`${y}%`}})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(lt,{className:"h-4 w-4 text-blue-400"}),"Mana"]}),r.jsxs("span",{className:"text-slate-400",children:[t.mana,"/",t.max_mana]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:_,className:"h-2"}),r.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full transition-all duration-300 ${S()}`,style:{width:`${_}%`}})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsxs("span",{className:"flex items-center gap-2 font-medium text-slate-300",children:[r.jsx(jt,{className:"h-4 w-4 text-yellow-400"}),"XP"]}),r.jsxs("span",{className:"text-slate-400",children:[p.toLocaleString(),"/",g.toLocaleString()]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:x,className:"h-2"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${x}%`}})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Combat Stats"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(kt,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-muted-foreground",children:"ATK"})]}),r.jsx("span",{className:"font-bold text-red-400",children:r.jsx(_n,{value:t.atk,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,className:"text-red-400",size:"sm",showTooltip:!0})})]}),t.magic_attack&&t.magic_attack>0&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-muted-foreground",children:"M.ATK"})]}),r.jsx("span",{className:"font-bold text-purple-400",children:t.magic_attack})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(vt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-muted-foreground",children:"DEF"})]}),r.jsx("span",{className:"font-bold text-blue-400",children:r.jsx(_n,{value:t.def,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,className:"text-blue-400",size:"sm",showTooltip:!0})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-muted-foreground",children:"SPD"})]}),r.jsx("span",{className:"font-bold text-yellow-400",children:r.jsx(_n,{value:t.speed,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,className:"text-yellow-400",size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-4 w-4 text-amber-400"}),r.jsx("span",{className:"text-muted-foreground",children:"CRIT"})]}),r.jsxs("span",{className:"font-bold text-amber-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})]})]}),r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sr,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Gold"})]}),r.jsx("p",{className:"text-lg font-bold text-yellow-400",children:t.gold.toLocaleString("pt-BR")})]})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Atributos"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:j.map(R=>{const P=R.icon;return r.jsx("div",{className:"bg-slate-800/50 p-2 rounded-lg border border-slate-700 hover:bg-slate-700/50 transition-colors",title:R.fullName,children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx(P,{className:`h-3 w-3 ${R.color}`}),r.jsx("span",{className:"text-xs font-medium text-slate-400",children:R.name}),r.jsx("span",{className:`text-sm font-bold ${R.color}`,children:R.value})]})},R.name)})}),!!(t.critical_chance||t.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[!!t.critical_chance&&r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:"h-4 w-4 text-orange-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Chance Crtica"})]}),r.jsxs("p",{className:"text-sm font-bold text-orange-400",children:[(t.critical_chance||0).toFixed(1),"%"]})]})}),t.critical_damage&&r.jsx("div",{className:"bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ea,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Dano Crtico"})]}),r.jsxs("p",{className:"text-sm font-bold text-red-400",children:[(t.critical_damage||0).toFixed(0),"%"]})]})})]})]})]}),s&&r.jsxs("div",{className:"border-t border-slate-700 pt-4 space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-300 uppercase tracking-wide",children:"Habilidades de Combate"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:M.map(R=>{const P=R.level*100,$=(R.level-1)*100,k=R.xp-$,O=P-$,H=Math.max(0,Math.min(100,k/O*100));return r.jsx("div",{className:"bg-slate-700/50 p-3 rounded-lg border border-slate-600 hover:border-slate-500 transition-colors",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"flex items-center justify-center",children:C(R.key)}),r.jsx("span",{className:"text-xs font-medium text-slate-400 text-center",children:E(R.key)}),r.jsxs(ze,{variant:"outline",className:"border-current bg-transparent text-xs",children:["Nv. ",R.level]}),R.xp>0&&r.jsxs("div",{className:"w-full",children:[r.jsx("div",{className:"w-full h-1 bg-slate-600 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${H}%`}})}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1 text-center",children:[k,"/",O," XP"]})]})]})},R.key)})})]})]})]})}function DY({title:t,description:e,icon:s,onClick:a,badge:n,badgeColor:i="secondary",accent:c,isPrimary:u=!1}){return r.jsx(Oe,{className:`group relative overflow-hidden border-slate-700 bg-slate-900/80 hover:bg-slate-800/80 transition-all duration-300 hover:border-slate-600 ${u?"ring-2 ring-red-600/30":""}`,children:r.jsxs(fe,{variant:"ghost",className:"w-full h-full p-3 flex flex-col items-center justify-center space-y-2 hover:bg-transparent min-h-[120px]",onClick:a,children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`p-3 rounded-lg bg-slate-800 group-hover:bg-slate-700 transition-colors duration-300 ${c}`,children:r.jsx(s,{className:"h-5 w-5 text-slate-300 group-hover:text-white transition-colors duration-300"})}),n&&r.jsx(ze,{variant:i,className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs font-bold bg-red-600 text-white border-red-500",children:n})]}),r.jsxs("div",{className:"text-center space-y-1 max-w-full",children:[r.jsx("h3",{className:"font-semibold text-sm text-slate-200 group-hover:text-white transition-colors duration-300 leading-tight",children:t}),r.jsx("p",{className:"text-xs text-slate-400 group-hover:text-slate-300 transition-colors duration-300 leading-tight px-1 break-words",children:e})]})]})})}function OY({player:t,onStartAdventure:e,onOpenMap:s,onOpenCharacterStats:a,onOpenShop:n,onOpenInventory:i,onOpenEquipment:c,onOpenSpells:u,onOpenCrafting:f,onOpenCemetery:h,onReturnToSelection:p}){const g=[{title:"Entrar na Torre",description:"Nova aventura",icon:mb,onClick:e,accent:"border-red-600/30",isPrimary:!0},{title:"Mapa da Torre",description:"Usar checkpoint",icon:lv,onClick:s,accent:"border-blue-600/30"},{title:"Atributos",description:"Evoluir personagem",icon:La,onClick:a,badge:t.attribute_points&&t.attribute_points>0?t.attribute_points:void 0,badgeColor:"destructive",accent:"border-purple-600/30"},{title:"Grimrio",description:"Gerenciar magias",icon:lt,onClick:u,accent:"border-violet-600/30"},{title:"Loja",description:"Comprar itens",icon:im,onClick:n,accent:"border-green-600/30"},{title:"Inventrio",description:"Consumveis",icon:K6,onClick:i,accent:"border-orange-600/30"},{title:"Equipamentos",description:"Armas e armaduras",icon:vt,onClick:c,accent:"border-amber-600/30"},{title:"Forja",description:"Crafting de itens",icon:_i,onClick:f,accent:"border-cyan-600/30"},{title:"Cemitrio",description:"Personagens mortos",icon:Qs,onClick:h,accent:"border-red-600/30"},{title:"Trocar",description:"Outro personagem",icon:ds,onClick:p,accent:"border-slate-600/30"}];return r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-10 gap-3",children:g.map((x,y)=>r.jsx(DY,{title:x.title,description:x.description,icon:x.icon,onClick:x.onClick,badge:x.badge,badgeColor:x.badgeColor,accent:x.accent,isPrimary:x.isPrimary},y))})}function $Y({player:t,showHealNotification:e,healInfo:s,onDismissHealNotification:a}){const n=t.attribute_points&&t.attribute_points>0;return!e&&!n?null:r.jsxs("div",{className:"space-y-3",children:[n&&r.jsx(Oe,{className:"bg-amber-950/50 border-amber-700/50 shadow-lg backdrop-blur-sm",children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-600/20 rounded-lg",children:r.jsx(jt,{className:"h-4 w-4 text-amber-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-amber-200 text-sm",children:"Pontos de Atributo Disponveis"}),r.jsxs("div",{className:"text-xs text-amber-300/80",children:["Voc tem ",r.jsx(ze,{variant:"outline",className:"mx-1 text-amber-200 bg-amber-600/20 border-amber-500/50 text-xs px-1.5 py-0.5",children:t.attribute_points}),'ponto(s) para distribuir em "Atributos".']})]}),r.jsx(xC,{className:"h-4 w-4 text-amber-500 animate-pulse"})]})})}),e&&s&&r.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm animate-in slide-in-from-top-2 duration-500",children:r.jsx(Oe,{className:"bg-emerald-950/80 border-emerald-700/50 shadow-xl backdrop-blur-md",children:r.jsx(He,{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-600/20 rounded-lg",children:r.jsx(cs,{className:"h-4 w-4 text-emerald-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"font-semibold text-emerald-200 text-sm",children:[s.character," foi curado!"]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-emerald-300",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"font-mono bg-emerald-900/50 px-2 py-0.5 rounded text-xs",children:[s.oldHp,"  ",s.newHp]}),r.jsxs(ze,{variant:"outline",className:"text-emerald-300 border-emerald-500/50 bg-emerald-600/20 text-xs px-1.5 py-0.5",children:["+",s.newHp-s.oldHp]})]})]}),r.jsx(fe,{variant:"ghost",size:"sm",onClick:a,className:"h-6 w-6 p-0 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-800/50",children:r.jsx(Oi,{className:"h-3 w-3"})})]})})})})]})}const KR=Yt("/_authenticated/game/play/hub")({component:LY,validateSearch:t=>({character:t.character||""})});function LY(){const t=Rt(),{character:e}=KR.useSearch(),{gameState:s,loadCharacterForHub:a}=Mc(),{player:n}=s,[i,c]=b.useState(!0),[u,f]=b.useState(!1),[h,p]=b.useState(!1),[g,x]=b.useState(!1),[y,_]=b.useState(null);if(b.useEffect(()=>{(async()=>{if(!e){t({to:"/game/play"});return}if(u&&n.id===e){c(!1);return}try{c(!0);const C=await at.getCharacter(e);if(C.success&&C.data){const E=sessionStorage.getItem(`player_${e}`);if(E){const M=JSON.parse(E),R=C.data.hp-M.hp,P=R/C.data.max_hp*100;R>0&&P>=5&&(_({oldHp:M.hp,newHp:C.data.hp,character:C.data.name}),x(!0),setTimeout(()=>{x(!1)},5e3))}sessionStorage.setItem(`player_${e}`,JSON.stringify(C.data)),await a(C.data),f(!0)}else me.error("Erro ao carregar personagem",{description:C.error}),t({to:"/game/play"})}catch(C){console.error("Erro ao carregar personagem:",C),me.error("Erro ao carregar personagem"),t({to:"/game/play"})}finally{c(!1)}})()},[e]),i||!n.id)return r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-950",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-slate-500"})});const j=async()=>{try{await at.updateCharacterFloor(n.id,1),t({to:"/game/play/battle/$character",params:{character:n.id}})}catch(S){console.error("Erro ao iniciar do comeo:",S),me.error("Erro ao iniciar aventura")}},N=async S=>{try{const C=await at.startFromCheckpoint(n.id,S);C.success?t({to:"/game/play/battle/$character",params:{character:n.id}}):me.error("Erro ao iniciar do checkpoint",{description:C.error})}catch(C){console.error("Erro ao iniciar do checkpoint:",C),me.error("Erro ao iniciar do checkpoint")}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 to-slate-900 p-4",children:r.jsxs("div",{className:"w-full max-w-7xl mx-auto space-y-4",children:[r.jsx("div",{className:"space-y-3 sm:space-y-4",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play"}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"Trocar Personagem"}),r.jsx("span",{className:"sm:hidden",children:"Trocar"})]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:["Hub de ",n.name]}),r.jsxs("p",{className:"text-sm sm:text-base text-slate-300",children:["Andar ",n.floor,"  Nvel ",n.level,"  ",n.gold," Gold"]})]})]})}),r.jsx($Y,{player:n,showHealNotification:g,healInfo:y,onDismissHealNotification:()=>x(!1)}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(PY,{player:n}),r.jsx(OY,{player:n,onStartAdventure:j,onOpenMap:()=>p(!0),onOpenCharacterStats:()=>t({to:"/game/play/character-stats",search:{character:n.id}}),onOpenShop:()=>t({to:"/game/play/shop",search:{character:n.id}}),onOpenInventory:()=>t({to:"/game/play/inventory",search:{character:n.id}}),onOpenEquipment:()=>t({to:"/game/play/equipment",search:{character:n.id}}),onOpenSpells:()=>t({to:"/game/spells",search:{character:n.id}}),onOpenCrafting:()=>t({to:"/game/crafting",search:{character:n.id}}),onOpenCemetery:()=>t({to:"/game/cemetery"}),onReturnToSelection:()=>t({to:"/game/play"})})]}),r.jsx(uY,{isOpen:h,onClose:()=>p(!1),character:{id:n.id,floor:n.floor},onStartFromCheckpoint:N})]})})}function BY({characterId:t,consumables:e,onSlotsUpdate:s}){const[a,n]=b.useState([]),[i,c]=b.useState(!0),[u,f]=b.useState(null),[h,p]=b.useState(null),g=b.useRef(null),x=b.useRef({}),y=async()=>{try{const R=await jo.getCharacterPotionSlots(t);R.success&&R.data&&n(R.data)}catch(R){console.error("Erro ao carregar slots de poo:",R)}finally{c(!1)}};b.useEffect(()=>{t&&y()},[t]),b.useEffect(()=>{const R=$=>{g.current&&!g.current.contains($.target)&&(f(null),p(null))},P=()=>{f(null),p(null)};return document.addEventListener("mousedown",R),window.addEventListener("scroll",P,!0),()=>{document.removeEventListener("mousedown",R),window.removeEventListener("scroll",P,!0)}},[]),b.useEffect(()=>{if(u!==null&&x.current[u]){const R=x.current[u];if(R){const P=R.getBoundingClientRect(),$=window.innerHeight,k=250;let O=P.bottom+8,H=P.left;O+k>$&&(O=P.top-k-8),H+256>window.innerWidth&&(H=window.innerWidth-256-16),H<16&&(H=16),p({top:O,left:H})}}},[u]);const _=async(R,P)=>{try{const $=await jo.setPotionSlot(t,R,P);$.success?(await y(),s==null||s(),me.success("Poo atribuda ao slot!"),f(null),p(null)):me.error($.error||"Erro ao atribuir poo")}catch($){console.error("Erro ao configurar slot:",$),me.error("Erro ao configurar slot")}},j=async R=>{try{const P=await jo.clearPotionSlot(t,R);P.success?(await y(),s==null||s(),me.success("Slot limpo!")):me.error(P.error||"Erro ao limpar slot")}catch(P){console.error("Erro ao limpar slot:",P),me.error("Erro ao limpar slot")}},N=R=>{u===R?(f(null),p(null)):f(R)},S=R=>{switch(R){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},C=R=>R.consumable_description?R.consumable_description.includes("HP")||R.consumable_description.includes("Vida")?r.jsx(cs,{className:"h-8 w-8 text-red-400"}):R.consumable_description.includes("Mana")?r.jsx(Ct,{className:"h-8 w-8 text-blue-400"}):r.jsx(ox,{className:"h-8 w-8 text-purple-400"}):r.jsx(ox,{className:"h-8 w-8 text-slate-500"}),E=R=>{const P=a.filter(k=>k.consumable_id&&k.slot_position!==R).map(k=>k.consumable_id);console.log("[PotionSlotManager] Slots ocupados (excluindo atual):",P);const $=e.filter(k=>{var Y;const O=k.consumable&&k.consumable.type==="potion"&&k.quantity>0,H=!P.includes(k.consumable_id);return O&&!H&&console.log(`[PotionSlotManager] Poo ${(Y=k.consumable)==null?void 0:Y.name} filtrada (j est em outro slot)`),O&&H});return console.log(`[PotionSlotManager] Poes disponveis para slot ${R}:`,$.length),$};if(i)return r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(HN,{className:"h-4 w-4"}),r.jsx("span",{children:"Atalhos: Q, W, E"})]})}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(R=>r.jsx("div",{className:"w-full h-20 bg-slate-700/30 rounded-lg animate-pulse"},`loading-slot-${R}`))})]});const M=({slot:R})=>{const P=E(R.slot_position);return r.jsx("div",{ref:g,className:"fixed w-64 bg-slate-800 border border-slate-700 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:(h==null?void 0:h.top)||0,left:(h==null?void 0:h.left)||0,zIndex:9999},children:P.length>0?r.jsxs("div",{className:"p-2 space-y-1",children:[r.jsx("div",{className:"text-xs text-slate-400 px-2 py-1",children:"Selecione uma poo:"}),P.map($=>r.jsxs("button",{className:"w-full text-left px-3 py-2 rounded-md hover:bg-slate-700 transition-colors flex items-center gap-3",onClick:()=>_(R.slot_position,$.consumable_id),children:[r.jsx("div",{className:"flex-shrink-0",children:$.consumable.description.includes("HP")||$.consumable.description.includes("Vida")?r.jsx(cs,{className:"h-4 w-4 text-red-400"}):$.consumable.description.includes("Mana")?r.jsx(Ct,{className:"h-4 w-4 text-blue-400"}):r.jsx(ox,{className:"h-4 w-4 text-purple-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 truncate",children:$.consumable.name}),r.jsxs("div",{className:"text-xs text-slate-400",children:["+",$.consumable.effect_value,"  x",$.quantity]})]})]},`dropdown-${$.id}`))]}):r.jsxs("div",{className:"p-4 text-center",children:[r.jsx("div",{className:"text-slate-400 text-sm",children:"Nenhuma poo disponvel"}),r.jsx("div",{className:"text-slate-500 text-xs mt-1",children:e.filter($=>$.consumable&&$.consumable.type==="potion"&&$.quantity>0).length>0?"Todas as poes j esto equipadas":"Compre poes na loja"})]})})};return r.jsxs("div",{className:"space-y-4 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[r.jsx(HN,{className:"h-4 w-4"}),r.jsx("span",{children:"Atalhos: Q, W, E"})]}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Clique para configurar  ",e.length," consumveis"]})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:a.map(R=>{const P=S(R.slot_position),$=!R.consumable_id,k=u===R.slot_position;return r.jsx("div",{className:"relative",ref:O=>{x.current[R.slot_position]=O},children:r.jsxs("div",{className:"relative group",children:[r.jsx(fe,{variant:"outline",className:`w-full h-20 p-3 border-2 transition-all duration-300 ${$?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":"border-solid border-blue-600 bg-gradient-to-br from-blue-900/30 to-blue-800/40 hover:brightness-110 shadow-lg shadow-blue-400/20"} hover:scale-[1.02] active:scale-[0.98] ${k?"ring-2 ring-blue-500":""}`,onClick:()=>{$&&N(R.slot_position)},children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[r.jsx("div",{className:`p-2 rounded-lg ${$?"bg-slate-700/30":"bg-black/20"}`,children:$?r.jsxs("div",{className:"flex items-center",children:[r.jsx($o,{className:"h-6 w-6 text-slate-500"}),r.jsx(ko,{className:`h-4 w-4 text-slate-500 transition-transform ${k?"rotate-180":""}`})]}):C(R)}),!$&&R.effect_value&&r.jsxs("div",{className:"text-xs font-bold text-slate-200 bg-slate-800/50 px-2 py-1 rounded",children:["+",R.effect_value]}),$&&r.jsx("div",{className:"text-xs text-slate-500 font-medium",children:"Vazio"})]})}),r.jsx(ze,{className:"absolute -top-2 -right-2 h-6 w-6 p-0 flex items-center justify-center bg-blue-600 text-white text-xs font-bold border-2 border-slate-800 shadow-lg",children:P}),!$&&r.jsx(fe,{variant:"destructive",size:"sm",className:"absolute -top-2 -left-2 h-6 w-6 p-0 rounded-full shadow-lg",onClick:O=>{O.stopPropagation(),j(R.slot_position)},children:r.jsx(Oi,{className:"h-3 w-3"})}),r.jsx("div",{className:"absolute -bottom-10 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/95 text-slate-300 text-xs px-3 py-2 rounded border border-slate-700/50 whitespace-nowrap shadow-lg",children:$?`Slot ${P} vazio`:R.consumable_name||"Poo"})})]})},`potion-slot-${R.slot_position}`)})}),r.jsx("div",{className:"text-xs text-slate-500 bg-slate-800/30 p-3 rounded-lg border border-slate-700/30",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-medium text-slate-400",children:"Como usar:"}),r.jsx("p",{children:" Clique em slots vazios para adicionar poes"}),r.jsx("p",{children:" Use Q, W, E durante batalhas para consumir rapidamente"}),r.jsx("p",{children:" Cada tipo de poo pode estar em apenas um slot"})]})}),u!==null&&h&&typeof document<"u"&&Mi.createPortal(r.jsx(M,{slot:a.find(R=>R.slot_position===u)}),document.body)]})}const IY=({selectedItem:t,selectedSlot:e,character:s,onEquipmentChange:a})=>{const n=f=>{switch(f.type){case"weapon":return r.jsx(kt,{className:"h-12 w-12 text-red-400"});case"armor":return r.jsx(nd,{className:"h-12 w-12 text-blue-400"});case"accessory":return r.jsx(sr,{className:"h-12 w-12 text-purple-400"});default:return r.jsx(vt,{className:"h-12 w-12 text-slate-400"})}},i=f=>{const h={common:"bg-slate-800/80 text-slate-300 border-slate-600",uncommon:"bg-emerald-900/80 text-emerald-300 border-emerald-600",rare:"bg-blue-900/80 text-blue-300 border-blue-600",epic:"bg-purple-900/80 text-purple-300 border-purple-600",legendary:"bg-amber-900/80 text-amber-300 border-amber-600"};return h[f]||h.common},c=f=>{switch(f){case"main_hand":return"Mo Principal";case"off_hand":return"Mo Secundria";case"armor":return"Armadura";case"accessory":return"Acessrio";default:return f}},u=async()=>{if(!(!t||!e))try{const f=await Ft.toggleEquipment(s.id,t.id,!1);f.success?(me.success("Item desequipado com sucesso!"),a()):me.error(f.error||"Erro ao desequipar item")}catch(f){console.error("Erro ao desequipar item:",f),me.error("Erro ao desequipar item")}};return t?r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-slate-100",children:"Detalhes do Item"})}),r.jsxs(He,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${i(t.rarity)}`,children:n(t)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:t.name}),r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ze,{className:`border ${i(t.rarity)}`,children:t.rarity}),r.jsx(ze,{variant:"outline",className:"text-slate-300",children:t.type}),t.rarity==="legendary"&&r.jsx(jt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]}),e&&r.jsxs("p",{className:"text-sm text-slate-400",children:["Equipado em: ",c(e)]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:t.description})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.atk_bonus>0&&r.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),r.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",t.atk_bonus]})]}),t.def_bonus>0&&r.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),r.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",t.def_bonus]})]}),t.mana_bonus>0&&r.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),r.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",t.mana_bonus]})]}),t.speed_bonus&&t.speed_bonus>0&&r.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),r.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",t.speed_bonus]})]})]})]}),t.level_requirement&&t.level_requirement>1&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-400",children:"Nvel mnimo:"}),r.jsx("span",{className:`font-bold ${s.level>=t.level_requirement?"text-green-400":"text-red-400"}`,children:t.level_requirement})]})]}),t.weapon_subtype&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),r.jsx("p",{className:"text-slate-400 capitalize",children:t.weapon_subtype})]}),e&&r.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:r.jsx(fe,{onClick:u,variant:"outline",className:"w-full border-red-600 text-red-400 hover:bg-red-900/30",children:"Desequipar Item"})})]})]}):r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50 h-full",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-slate-100",children:"Detalhes do Item"})}),r.jsx(He,{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center text-slate-500",children:[r.jsx(ca,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Nenhum item selecionado"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um slot para ver os detalhes do equipamento"})]})})]})},VY=({equippedSlots:t,onSlotClick:e,onSlotLongPress:s,characterId:a})=>{const n=Rt(),[i,c]=b.useState(null),[u,f]=b.useState(!1),h=b.useCallback(S=>{f(!1);const C=setTimeout(()=>{f(!0),n({to:"/game/play/equipment/select",search:{character:a,slot:S}}),s(S)},600);c(C)},[a]),p=b.useCallback((S,C)=>{i&&(clearTimeout(i),c(null)),u||e(S,C),setTimeout(()=>f(!1),100)},[i,u,e]),g=b.useCallback(()=>{i&&(clearTimeout(i),c(null)),f(!1)},[i]),x=(S,C)=>{if(C)switch(C.type){case"weapon":return r.jsx(kt,{className:"h-8 w-8 text-red-400"});case"armor":return r.jsx(nd,{className:"h-8 w-8 text-blue-400"});case"accessory":return r.jsx(sr,{className:"h-8 w-8 text-purple-400"});default:return r.jsx(vt,{className:"h-8 w-8 text-slate-400"})}switch(S){case"main_hand":case"off_hand":return r.jsx(kt,{className:"h-8 w-8 text-slate-500"});case"armor":return r.jsx(nd,{className:"h-8 w-8 text-slate-500"});case"accessory":return r.jsx(sr,{className:"h-8 w-8 text-slate-500"});default:return r.jsx($o,{className:"h-8 w-8 text-slate-500"})}},y=S=>{if(!S)return"border-slate-600 bg-slate-800/30";const C={common:"border-slate-600 bg-slate-800/30",uncommon:"border-emerald-600 bg-emerald-900/30",rare:"border-blue-600 bg-blue-900/30",epic:"border-purple-600 bg-purple-900/30",legendary:"border-amber-600 bg-amber-900/30"};return C[S]||C.common},_=(S,C)=>{const E=t[S],M=!E;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:C}),r.jsxs("div",{className:"relative group",children:[r.jsx(fe,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${M?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70":`${y(E.rarity)} hover:brightness-110 shadow-lg`} hover:scale-[1.02] active:scale-[0.98] select-none`,onMouseDown:()=>h(S),onMouseUp:()=>p(S,E??null),onMouseLeave:g,onTouchStart:()=>h(S),onTouchEnd:()=>p(S,E??null),onTouchCancel:g,onContextMenu:R=>R.preventDefault(),children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:`p-3 rounded-lg ${M?"bg-slate-700/30":"bg-black/20"}`,children:x(S,E??null)}),E?r.jsxs("div",{className:"text-center space-y-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:E.name.length>12?`${E.name.substring(0,12)}...`:E.name}),r.jsx(ze,{variant:"outline",className:"text-xs px-2 py-0.5",children:E.rarity})]}):r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Vazio"})]})}),r.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),r.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:M?"Toque e segure para equipar":"Toque para detalhes"})})]})]})},j=S=>{const C=S===0,E=S===0?"Peitoral":S===1?"Capacete":S===2?"Pernas":"Botas";return C?_("armor",E):r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:E}),r.jsx("div",{className:"relative group",children:r.jsx(fe,{variant:"outline",className:"w-full h-32 p-4 border-2 border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 transition-all duration-300 opacity-60",disabled:!0,children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:"p-3 rounded-lg bg-slate-700/20",children:r.jsx(nd,{className:"h-8 w-8 text-slate-500"})}),r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Em breve"})]})})})]})},N=S=>{const C=S===0&&t.accessory,E=S>0;return r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300 block text-center",children:S===0?"Anel 1":S===1?"Anel 2":S===2?"Colar":"Amuleto"}),r.jsxs("div",{className:"relative group",children:[r.jsx(fe,{variant:"outline",className:`w-full h-32 p-4 border-2 transition-all duration-300 ${C?`${y(t.accessory.rarity)} hover:brightness-110 shadow-lg hover:scale-[1.02]`:E?"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/20 to-slate-900/40 opacity-60":"border-dashed border-slate-600 bg-gradient-to-br from-slate-800/40 to-slate-900/60 hover:border-slate-500 hover:from-slate-700/50 hover:to-slate-800/70 hover:scale-[1.02]"} active:scale-[0.98] select-none`,onMouseDown:()=>S===0&&h("accessory"),onMouseUp:()=>S===0&&p("accessory",t.accessory??null),onMouseLeave:g,onTouchStart:()=>S===0&&h("accessory"),onTouchEnd:()=>S===0&&p("accessory",t.accessory??null),onTouchCancel:g,onContextMenu:M=>M.preventDefault(),disabled:E,children:r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 h-full",children:[r.jsx("div",{className:`p-3 rounded-lg ${C?"bg-black/20":"bg-slate-700/30"}`,children:r.jsx(sr,{className:"h-8 w-8 text-slate-500"})}),C?r.jsxs("div",{className:"text-center space-y-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 leading-tight max-w-full",children:t.accessory.name.length>12?`${t.accessory.name.substring(0,12)}...`:t.accessory.name}),r.jsx(ze,{variant:"outline",className:"text-xs px-2 py-0.5",children:t.accessory.rarity})]}):r.jsx("div",{className:"text-sm text-slate-500 font-medium",children:S===0?"Vazio":"Em breve"})]})}),!E&&r.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-transparent group-active:border-amber-400/50 transition-colors duration-200 pointer-events-none"}),!E&&r.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10",children:r.jsx("div",{className:"bg-slate-900/90 text-slate-300 text-xs px-2 py-1 rounded border border-slate-700/50 shadow-lg whitespace-nowrap",children:C?"Toque para detalhes":"Toque e segure para equipar"})})]})]})};return r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"text-slate-100 flex items-center gap-2",children:[r.jsx(vt,{className:"h-5 w-5 text-amber-400"}),"Equipamentos"]})}),r.jsxs(He,{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armas"}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[_("main_hand","Mo Principal"),_("off_hand","Mo Secundria")]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Armaduras"}),r.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(S=>r.jsx("div",{children:j(S)},`armor-slot-${S}`))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-6",children:"Acessrios"}),r.jsx("div",{className:"grid grid-cols-2 gap-6",children:[0,1,2,3].map(S=>r.jsx("div",{children:N(S)},`accessory-slot-${S}`))})]}),r.jsx("div",{className:"bg-slate-700/30 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Toque para ver detalhes  Toque e segure para equipar/trocar"})})]})]})},WR=Yt("/_authenticated/game/play/equipment")({component:qY,validateSearch:t=>({character:t.character||""})});function qY(){const t=Rt(),{character:e}=WR.useSearch(),[s,a]=b.useState(null),[n,i]=b.useState({}),[,c]=b.useState([]),[u,f]=b.useState([]),[h,p]=b.useState(null),[g,x]=b.useState(null),[y,_]=b.useState(!0);b.useEffect(()=>{(async()=>{if(e)try{_(!0);const M=await at.getCharacter(e);M.success&&M.data&&a(M.data);const R=await Ft.getEquippedItems(e);i(R);const P=await Ft.getCharacterEquipment(e);c(P),console.log("[EquipmentPage] Carregando consumveis para personagem:",e);const $=await zt.getCharacterConsumables(e);console.log("[EquipmentPage] Resposta dos consumveis:",$),$.success&&$.data?(console.log("[EquipmentPage] Consumveis carregados com sucesso:",$.data),console.log("[EquipmentPage] Total de consumveis:",$.data.length),$.data.forEach((k,O)=>{var H,Y;console.log(`[EquipmentPage] Consumvel ${O+1}:`,{id:k.id,consumable_id:k.consumable_id,quantity:k.quantity,consumable_name:(H=k.consumable)==null?void 0:H.name,consumable_type:(Y=k.consumable)==null?void 0:Y.type,hasConsumableData:!!k.consumable})}),f($.data)):(console.error("[EquipmentPage] Erro ao carregar consumveis:",$.error),f([]))}catch(M){console.error("Erro ao carregar dados do equipamento:",M),me.error("Erro ao carregar equipamentos")}finally{_(!1)}})()},[e]);const j=(E,M)=>{p(E),x(M)},N=E=>{console.log("Long press on slot:",E)},S=async()=>{if(e)try{const E=await Ft.getEquippedItems(e);i(E);const M=await Ft.getCharacterEquipment(e);c(M)}catch(E){console.error("Erro ao atualizar equipamentos:",E)}},C=async()=>{if(e)try{console.log("[EquipmentPage] Recarregando consumveis...");const E=await zt.getCharacterConsumables(e);E.success&&E.data?(console.log("[EquipmentPage] Consumveis recarregados:",E.data.length),f(E.data)):console.error("[EquipmentPage] Erro ao recarregar consumveis:",E.error)}catch(E){console.error("Erro ao recarregar consumveis:",E)}};return y?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx("div",{className:"h-96 bg-slate-700 rounded"}),r.jsx("div",{className:"h-96 bg-slate-700 rounded"})]})]})})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-100 flex items-center gap-2",children:[r.jsx(vt,{className:"h-8 w-8 text-amber-400"}),"Equipamentos"]}),r.jsxs("p",{className:"text-slate-400",children:[s.name," - Nvel ",s.level]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsx(VY,{equippedSlots:n,onSlotClick:j,onSlotLongPress:N,characterId:e}),r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"text-slate-100 flex items-center gap-2",children:[r.jsx(kt,{className:"h-5 w-5 text-blue-400"}),"Slots de Poes"]})}),r.jsx(He,{children:r.jsx(BY,{characterId:e,consumables:u,onSlotsUpdate:C})})]})]}),r.jsx("div",{children:r.jsx(IY,{selectedItem:g,selectedSlot:h,character:s,onEquipmentChange:S})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem no encontrado"}),r.jsxs(fe,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}function UY(t){const[e,s]=b.useState(!1);return b.useEffect(()=>{if(typeof window>"u")return;const a=window.matchMedia(t);s(a.matches);const n=i=>{s(i.matches)};return a.addEventListener?a.addEventListener("change",n):a.addListener(n),()=>{a.removeEventListener?a.removeEventListener("change",n):a.removeListener(n)}},[t]),e}function Ly(){const[t,e]=b.useState(!1);return b.useEffect(()=>{if(typeof window>"u")return;const s=()=>{const a=window.innerWidth,n=window.innerHeight,i=a>n,c=n<=500,u=a<=1024;e(i&&c&&u)};return s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",()=>{setTimeout(s,100)}),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}},[]),t}function zY(){const t=b.useRef(null),[e,s]=b.useState("right"),a=b.useCallback(()=>{if(!t.current)return;const n=t.current,i=n.getBoundingClientRect();let c=n.parentElement;for(;c&&!c.classList.contains("grid");)c=c.parentElement;if(!c){s("right");return}const u=c.getBoundingClientRect(),f=u.width,h=i.left+i.width/2,p=u.left,g=h-p,x=f/3,y=f*2/3;g<x?s("right"):g>y?s("left"):s("bottom")},[]);return b.useEffect(()=>{a();const n=()=>a();return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[a]),{elementRef:t,tooltipPosition:e,updatePosition:a}}function FY({icon:t,label:e,value:s,color:a,bgColor:n,borderColor:i,tooltipData:c}){const[u,f]=b.useState(!1),h=UY("(max-width: 768px)"),{elementRef:p,tooltipPosition:g,updatePosition:x}=zY(),y=()=>{h&&f(!0)},_=()=>{h||x()},j=()=>r.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg p-3 shadow-xl",children:[r.jsx("div",{className:"text-sm font-medium text-slate-200 mb-2",children:c.title}),r.jsxs("div",{className:"text-xs text-slate-300 font-mono space-y-1",children:[c.calculations.map((N,S)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:N.label}),r.jsx("span",{className:N.color,children:N.value})]},S)),r.jsxs("div",{className:"border-t border-slate-600 pt-1 mt-1 flex justify-between font-bold",children:[r.jsx("span",{children:c.total.label}),r.jsx("span",{className:c.total.color,children:c.total.value})]})]})]});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{ref:p,className:`p-3 rounded-lg border ${n} ${i} ${h?"cursor-pointer":"cursor-help group"} relative`,onClick:y,onMouseEnter:_,title:h?`Toque para ver a frmula de ${e}`:"Clique para ver a frmula",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(t,{className:`h-4 w-4 ${a}`}),r.jsx("span",{className:`text-sm font-medium ${a}`,children:e})]}),r.jsx("div",{className:`text-2xl font-bold ${a}`,children:typeof s=="number"?s.toLocaleString():s}),!h&&r.jsx("div",{className:`absolute z-50 invisible group-hover:visible min-w-[280px] ${g==="left"?"right-full mr-2 -top-2":g==="right"?"left-full ml-2 -top-2":"top-full mt-2 left-1/2 transform -translate-x-1/2"}`,children:r.jsx(j,{})})]}),h&&r.jsx(Rn,{open:u,onOpenChange:f,children:r.jsxs(Zr,{className:"max-w-sm",children:[r.jsx(Mn,{children:r.jsxs(Qr,{className:"flex items-center gap-2",children:[r.jsx(t,{className:`h-5 w-5 ${a}`}),"Frmula de ",e]})}),r.jsxs("div",{className:"space-y-2",children:[c.calculations.map((N,S)=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:N.label}),r.jsx("span",{className:`font-mono ${N.color}`,children:N.value})]},S)),r.jsxs("div",{className:"border-t pt-2 flex justify-between font-bold",children:[r.jsx("span",{children:c.total.label}),r.jsx("span",{className:`${c.total.color}`,children:c.total.value})]})]})]})})]})}function HY({characterStats:t}){const e=t.strength||10,s=t.dexterity||10,a=t.intelligence||10,n=t.wisdom||10,i=t.vitality||10,c=t.luck||10,u=t.level,f=e+s+a+n+i+c,h=1-(Math.abs(e/f-1/6)+Math.abs(s/f-1/6)+Math.abs(a/f-1/6)+Math.abs(n/f-1/6)+Math.abs(i/f-1/6)+Math.abs(c/f-1/6))/2,p=1+h*.2;let g=1;const x=Math.max(e/f,s/f,a/f,n/f,i/f,c/f);x>.8&&(g=.7);const y=Math.pow(e,1.2)*p*g,_=Math.pow(s,1.15)*p*g,j=Math.pow(a,1.25)*p*g,N=Math.pow(n,1.1)*p*g,S=Math.pow(i,1.3)*p*g,C=c*p*g,E=t.sword_mastery||1,M=t.axe_mastery||1,R=t.blunt_mastery||1,P=t.defense_mastery||1,$=t.magic_mastery||1,k=Math.pow(Math.max(E,M,R),1.1)*p,O=Math.pow(P,1.2)*p,H=Math.pow($,1.15)*p,Y=50+u*2,I=20+u*1,z=2+u,ee=1+u,G=3+u,A=Y,B=Math.floor(S*2.5),V=Math.floor(y*.3),W=A+B+V,L=I,F=Math.floor(j*1.5),ie=Math.floor(N*1),se=Math.floor(H*.8),ue=L+F+ie+se,le=z,re=Math.floor(y*1.2),de=Math.floor(k*.6),ce=Math.floor(_*.2),be=le+re+de+ce,Ne=z,J=Math.floor(j*1.4),ge=Math.floor(N*.8),_e=Math.floor(H*1),De=Ne+J+ge+_e,Ve=ee,We=Math.floor(S*.6),ye=Math.floor(N*.5),Pe=Math.floor(O*1),Ae=Ve+We+ye+Pe,q=G,X=Math.floor(_*1),Z=Math.floor(C*.2),je=q+X+Z,Ce=_*.25,Se=C*.35,Re=y*.1,et=Math.min(75,Ce+Se+Re),ot=130,_t=y*.4,Fs=C*.6,Hs=k*.3,Ia=Math.min(250,ot+_t+Fs+Hs),ja=j*1.2,Na=N*.8,aa=H*1.5;let ra=ja+Na+aa;ra>100&&(ra=100+(ra-100)*.7);const ir=Math.min(200,ra),da=(Ds,fa)=>{const lr=fa||0,Ze=Ds+lr;return lr>0?r.jsxs("span",{children:[Ze.toLocaleString(),r.jsxs("span",{className:"text-orange-400 text-sm ml-1 font-medium",children:["(+",lr,")"]})]}):r.jsx("span",{children:Ze.toLocaleString()})},ts=(Ds,fa,lr,Ze)=>{const It=[...fa];return It.push({label:`Diversidade da Build: ${(h*100).toFixed(1)}%`,value:`Bnus: ${((p-1)*100).toFixed(1)}%`,color:h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}),g<1&&It.push({label:"Penalidade Mono-Build:",value:`-${((1-g)*100).toFixed(0)}%`,color:"text-red-400"}),lr>0&&It.push({label:"Bnus Equipamentos:",value:`+${lr}`,color:"text-orange-400"}),{title:Ds,calculations:It,total:{label:"Total Final (Sistema):",value:Ze.toLocaleString(),color:"text-green-400"}}},Bi=[{icon:cs,label:"HP Mximo",value:da(t.max_hp-(t.equipment_hp_bonus||0),t.equipment_hp_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:ts("Clculo Exato do HP:",[{label:`Base (50 + 2${u}):`,value:A,color:"text-blue-400"},{label:"Vitalidade^1.3  2.5:",value:`+${B} (${i}^1.3)`,color:"text-pink-400"},{label:"Fora^1.2  0.3:",value:`+${V} (${e}^1.2)`,color:"text-red-400"},{label:"Subtotal Calculado:",value:W,color:"text-gray-300"}],t.equipment_hp_bonus||0,t.max_hp)},{icon:Q6,label:"Mana Mxima",value:da(t.max_mana-(t.equipment_mana_bonus||0),t.equipment_mana_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:ts("Clculo Exato da Mana:",[{label:`Base (20 + 1${u}):`,value:L,color:"text-blue-400"},{label:"Inteligncia^1.25  1.5:",value:`+${F} (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1  1.0:",value:`+${ie} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mgica^1.15  0.8:",value:`+${se} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:ue,color:"text-gray-300"}],t.equipment_mana_bonus||0,t.max_mana)},{icon:kt,label:"ATK Fsico",value:da(t.atk-(t.equipment_atk_bonus||0),t.equipment_atk_bonus),color:"text-red-400",bgColor:"bg-red-500/5",borderColor:"border-red-500/20",tooltipData:ts("Clculo Exato do ATK Fsico:",[{label:`Base (2 + ${u}):`,value:le,color:"text-blue-400"},{label:"Fora^1.2  1.2:",value:`+${re} (${e}^1.2)`,color:"text-red-400"},{label:"Maior Maestria^1.1  0.6:",value:`+${de} (${Math.max(E,M,R)}^1.1)`,color:"text-orange-400"},{label:"Destreza^1.15  0.2:",value:`+${ce} (${s}^1.15)`,color:"text-green-400"},{label:"Subtotal Calculado:",value:be,color:"text-gray-300"}],t.equipment_atk_bonus||0,t.atk)},...t.magic_attack&&t.magic_attack>0?[{icon:lt,label:"ATK Mgico",value:r.jsx("span",{children:t.magic_attack.toLocaleString()}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:ts("Clculo Exato do ATK Mgico:",[{label:`Base (2 + ${u}):`,value:Ne,color:"text-blue-400"},{label:"Inteligncia^1.25  1.4:",value:`+${J} (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1  0.8:",value:`+${ge} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mgica^1.15  1.0:",value:`+${_e} (${$}^1.15)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:De,color:"text-gray-300"}],0,t.magic_attack)}]:[],{icon:vt,label:"Defesa",value:da(t.def-(t.equipment_def_bonus||0),t.equipment_def_bonus),color:"text-blue-400",bgColor:"bg-blue-500/5",borderColor:"border-blue-500/20",tooltipData:ts("Clculo Exato da Defesa:",[{label:`Base (1 + ${u}):`,value:Ve,color:"text-blue-400"},{label:"Vitalidade^1.3  0.6:",value:`+${We} (${i}^1.3)`,color:"text-pink-400"},{label:"Sabedoria^1.1  0.5:",value:`+${ye} (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Defesa^1.2  1.0:",value:`+${Pe} (${P}^1.2)`,color:"text-cyan-400"},{label:"Subtotal Calculado:",value:Ae,color:"text-gray-300"}],t.equipment_def_bonus||0,t.def)},{icon:Ct,label:"Velocidade",value:da(t.speed-(t.equipment_speed_bonus||0),t.equipment_speed_bonus),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:ts("Clculo Exato da Velocidade:",[{label:`Base (3 + ${u}):`,value:q,color:"text-blue-400"},{label:"Destreza^1.15  1.0:",value:`+${X} (${s}^1.15)`,color:"text-green-400"},{label:"Sorte  0.2:",value:`+${Z} (${c})`,color:"text-yellow-300"},{label:"Subtotal Calculado:",value:je,color:"text-gray-300"}],t.equipment_speed_bonus||0,t.speed)},{icon:jt,label:"Chance Crtica",value:r.jsxs("span",{children:[t.critical_chance.toFixed(1),"%"]}),color:"text-yellow-400",bgColor:"bg-yellow-500/5",borderColor:"border-yellow-500/20",tooltipData:ts("Clculo Exato da Chance Crtica:",[{label:"Destreza^1.15  0.25:",value:`${Ce.toFixed(1)}% (${s}^1.15)`,color:"text-green-400"},{label:"Sorte  0.35:",value:`+${Se.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Fora^1.2  0.1:",value:`+${Re.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Cap Mximo: 75%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${et.toFixed(1)}%`,color:"text-gray-300"}],0,t.critical_chance)},{icon:ea,label:"Dano Crtico",value:r.jsxs("span",{children:[t.critical_damage.toFixed(0),"%"]}),color:"text-orange-400",bgColor:"bg-orange-500/5",borderColor:"border-orange-500/20",tooltipData:ts("Clculo Exato do Dano Crtico:",[{label:"Base:",value:`${ot}%`,color:"text-blue-400"},{label:"Fora^1.2  0.4:",value:`+${_t.toFixed(1)}% (${e}^1.2)`,color:"text-red-400"},{label:"Sorte  0.6:",value:`+${Fs.toFixed(1)}% (${c})`,color:"text-yellow-300"},{label:"Maior Maestria^1.1  0.3:",value:`+${Hs.toFixed(1)}% (${Math.max(E,M,R)}^1.1)`,color:"text-orange-400"},{label:"Cap Mximo: 250%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${Ia.toFixed(0)}%`,color:"text-gray-300"}],0,t.critical_damage)},{icon:lt,label:"Bnus Mgico",value:r.jsxs("span",{children:["+",Math.round(t.magic_damage_bonus),"%"]}),color:"text-purple-400",bgColor:"bg-purple-500/5",borderColor:"border-purple-500/20",tooltipData:ts("Clculo Exato do Bnus Mgico:",[{label:"Inteligncia^1.25  1.2:",value:`${ja.toFixed(1)}% (${a}^1.25)`,color:"text-purple-400"},{label:"Sabedoria^1.1  0.8:",value:`+${Na.toFixed(1)}% (${n}^1.1)`,color:"text-blue-300"},{label:"Maestria Mgica^1.15  1.5:",value:`+${aa.toFixed(1)}% (${$}^1.15)`,color:"text-cyan-400"},{label:"Diminishing Returns aps 100%",value:"",color:"text-orange-400"},{label:"Cap Mximo: 200%",value:"",color:"text-orange-400"},{label:"Valor Calculado:",value:`${ir.toFixed(1)}%`,color:"text-gray-300"}],0,t.magic_damage_bonus)}];return r.jsxs(Oe,{children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(H6,{className:"h-5 w-5"}),"Stats Derivados"]})}),r.jsxs(He,{className:"space-y-4 overflow-visible",children:[r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 overflow-visible",children:Bi.map((Ds,fa)=>r.jsx(FY,{icon:Ds.icon,label:Ds.label,value:Ds.value,color:Ds.color,bgColor:Ds.bgColor,borderColor:Ds.borderColor,tooltipData:Ds.tooltipData},fa))}),r.jsxs("div",{className:"mt-6 p-4 bg-slate-800/50 border border-slate-700 rounded-lg",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-2",children:"Anlise da Build:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Diversidade:"}),r.jsxs("span",{className:`ml-2 ${h>.7?"text-green-400":h>.4?"text-yellow-400":"text-orange-400"}`,children:[(h*100).toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Bnus:"}),r.jsxs("span",{className:"ml-2 text-green-400",children:["+",((p-1)*100).toFixed(1),"%"]})]}),g<1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Mono-Build:"}),r.jsxs("span",{className:"ml-2 text-red-400",children:["-",((1-g)*100).toFixed(0),"%"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-slate-400",children:"Dominante:"}),r.jsxs("span",{className:"ml-2 text-yellow-400",children:[(x*100).toFixed(0),"%"]})]})]})]})]})]})]})}const ZR=Yt("/_authenticated/game/play/character-stats")({component:GY,validateSearch:t=>({character:t.character||""})});function GY(){const t=Rt(),{character:e}=ZR.useSearch(),[s,a]=b.useState(null),[n,i]=b.useState(!0),[c,u]=b.useState(!1),[f,h]=b.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0});b.useEffect(()=>{p()},[e]);const p=async()=>{if(!e){t({to:"/game/play"});return}try{i(!0);const E=await at.getCharacterStats(e);E.success&&E.data?(console.log("[CharacterStatsPage] Stats recebidos:",{hp:{value:E.data.max_hp,base:E.data.base_max_hp,bonus:E.data.equipment_hp_bonus},atk:{value:E.data.atk,base:E.data.base_atk,bonus:E.data.equipment_atk_bonus}}),a(E.data)):(me.error("Erro ao carregar stats do personagem",{description:E.error}),t({to:"/game/play/hub",search:{character:e}}))}catch(E){console.error("Erro ao carregar stats:",E),me.error("Erro ao carregar stats do personagem"),t({to:"/game/play/hub",search:{character:e}})}finally{i(!1)}},g=Object.values(f).reduce((E,M)=>E+M,0),x=((s==null?void 0:s.attribute_points)||0)-g,y=E=>{x>0&&h(M=>({...M,[E]:M[E]+1}))},_=E=>{f[E]>0&&h(M=>({...M,[E]:M[E]-1}))},j=()=>{h({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},N=async()=>{if(!(g===0||!e)){u(!0);try{const E=await at.distributeAttributePoints(e,f);E.success?(me.success("Pontos distribudos com sucesso!"),j(),await p()):me.error("Erro ao distribuir pontos",{description:E.error})}catch(E){console.error("Erro ao distribuir pontos:",E),me.error("Erro ao distribuir pontos")}finally{u(!1)}}},S={strength:{label:"Fora",icon:La,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",description:"Aumenta dano fsico e capacidade de carga"},dexterity:{label:"Destreza",icon:Ct,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",description:"Aumenta velocidade e chance de crtico"},intelligence:{label:"Inteligncia",icon:lt,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",description:"Aumenta dano mgico e pontos de mana"},wisdom:{label:"Sabedoria",icon:_o,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",description:"Aumenta regenerao de mana e resistncia"},vitality:{label:"Vitalidade",icon:cs,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",description:"Aumenta pontos de vida e regenerao"},luck:{label:"Sorte",icon:jt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",description:"Aumenta chance de drops raros e crticos"}},C=E=>{switch(E){case is.SWORD_MASTERY:return kt;case is.AXE_MASTERY:return Ct;case is.BLUNT_MASTERY:return ea;case is.DEFENSE_MASTERY:return vt;case is.MAGIC_MASTERY:return lt}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):s?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-secondary p-4 overflow-visible",children:r.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col items-start gap-4",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-2 w-2 mr-2"}),"Voltar ao Hub"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Atributos & Habilidades"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Gerencie os stats do seu personagem"})]})]}),s.attribute_points>0&&r.jsxs(ze,{variant:"outline",className:"bg-yellow-500/10 border-yellow-500/30 text-yellow-400 px-3 py-1",children:[r.jsx(jt,{className:"h-4 w-4 mr-2"}),x," pontos disponveis"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 overflow-visible",children:[r.jsxs(Oe,{children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-5 w-5"}),"Atributos Primrios"]})}),r.jsxs(He,{className:"space-y-4",children:[Object.entries(S).map(([E,M])=>{const R=E,P=s[R]||0,$=M.icon;return r.jsxs(Ts.div,{className:`flex items-center gap-4 p-4 rounded-lg border ${M.bgColor} ${M.borderColor}`,whileHover:{scale:1.01},children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx($,{className:`h-5 w-5 ${M.color}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold text-sm",children:M.label}),r.jsx("div",{className:"text-xs text-muted-foreground",children:M.description})]})]}),r.jsxs("div",{className:"text-center min-w-[80px]",children:[r.jsxs("div",{className:"text-lg font-bold",children:[P,f[R]>0&&r.jsxs("span",{className:"text-green-400 ml-1 text-sm",children:["+",f[R]]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[P+f[R],"/50"]})]}),s.attribute_points>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fe,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>_(R),disabled:f[R]===0,children:r.jsx(bC,{className:"h-4 w-4"})}),r.jsx("div",{className:"w-8 text-center text-sm font-mono",children:f[R]}),r.jsx(fe,{size:"icon",variant:"ghost",className:"h-8 w-8 rounded-full",onClick:()=>y(R),disabled:x===0,children:r.jsx($o,{className:"h-4 w-4"})})]})]},R)}),s.attribute_points>0&&g>0&&r.jsx(Bk,{children:r.jsxs(Ts.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t pt-4 mt-4",children:[r.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-3 mb-4",children:[r.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-primary"}),"Preview dos Melhoramentos"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.vitality>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"text-green-400",children:["+",f.vitality*8]})]}),f.intelligence>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mana:"}),r.jsxs("span",{className:"text-blue-400",children:["+",f.intelligence*5]})]}),f.strength>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ataque:"}),r.jsxs("span",{className:"text-red-400",children:["+",f.strength*2]})]}),f.dexterity>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Velocidade:"}),r.jsxs("span",{className:"text-green-400",children:["+",Math.floor(f.dexterity*1.5)]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(fe,{variant:"outline",onClick:j,className:"flex-1",children:[r.jsx(yC,{className:"h-4 w-4 mr-2"}),"Resetar"]}),r.jsxs(fe,{onClick:N,disabled:c,className:"flex-1 bg-emerald-500 hover:bg-emerald-600",children:[c?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}):r.jsx(hb,{className:"h-4 w-4 mr-2"}),"Confirmar"]})]})]})})]})]}),r.jsx(HY,{characterStats:s}),r.jsxs(Oe,{className:"lg:col-span-2",children:[r.jsx(ht,{children:r.jsxs(xt,{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5"}),"Habilidades de Combate"]})}),r.jsx(He,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.values(is).map(E=>{const M=C(E),R=s[`${E}_mastery`],P=s[`${E}_mastery_xp`],$=zL(R),k=P/$*100;return r.jsxs("div",{className:"bg-card p-4 rounded-lg border",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(M,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold capitalize",children:E.replace("_"," ")}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nvel ",R]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:["XP: ",P,"/",$]}),r.jsxs("span",{children:[Math.round(k),"%"]})]}),r.jsx(Ur,{value:k,className:"h-2"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:FL(E)})]},E)})})})]})]})]})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro ao carregar"}),r.jsx("p",{className:"text-muted-foreground mb-4",children:"No foi possvel carregar os stats do personagem"}),r.jsx(fe,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:"Voltar ao Hub"})]})})}const QR=Yt("/_authenticated/game/play/equipment/select")({component:XY,validateSearch:t=>({character:t.character||"",slot:t.slot||"main_hand"})});function XY(){const t=Rt(),{character:e,slot:s}=QR.useSearch(),[a,n]=b.useState(null),[i,c]=b.useState([]),[u,f]=b.useState([]),[h,p]=b.useState(null),[g,x]=b.useState(!0),[y,_]=b.useState(""),[j,N]=b.useState("all"),[S,C]=b.useState("name"),[E,M]=b.useState(!1);b.useEffect(()=>{(async()=>{if(!e||!s){t({to:"/game/play/hub",search:{character:e}});return}try{x(!0);const z=await at.getCharacter(e);z.success&&z.data&&n(z.data);const ee=await Ft.getCharacterEquipment(e);c(ee)}catch(z){console.error("Erro ao carregar dados:",z),me.error("Erro ao carregar equipamentos")}finally{x(!1)}})()},[e,s,t]),b.useEffect(()=>{const I=i.filter(z=>{if(!z.equipment)return!1;const ee=z.equipment;return!(!R(ee,s)||j!=="all"&&ee.type!==j||y&&!ee.name.toLowerCase().includes(y.toLowerCase()))});I.sort((z,ee)=>{const G=z.equipment,A=ee.equipment;switch(S){case"name":return G.name.localeCompare(A.name);case"level":return(A.level_requirement||0)-(G.level_requirement||0);case"rarity":{const B={common:1,uncommon:2,rare:3,epic:4,legendary:5};return(B[A.rarity]||0)-(B[G.rarity]||0)}case"attack":return A.atk_bonus-G.atk_bonus;case"defense":return A.def_bonus-G.def_bonus;default:return 0}}),f(I)},[i,y,j,S,s]);const R=(I,z)=>{switch(z){case"main_hand":case"off_hand":return I.type==="weapon";case"armor":return I.type==="armor";case"accessory":return I.type==="accessory";default:return!1}},P=I=>{switch(I){case"main_hand":return"Mo Principal";case"off_hand":return"Mo Secundria";case"armor":return"Armadura";case"accessory":return"Acessrio";default:return I}},$=I=>{switch(I.type){case"weapon":return r.jsx(kt,{className:"h-6 w-6 text-red-400"});case"armor":return r.jsx(nd,{className:"h-6 w-6 text-blue-400"});case"accessory":return r.jsx(sr,{className:"h-6 w-6 text-purple-400"});default:return r.jsx(vt,{className:"h-6 w-6 text-slate-400"})}},k=I=>{const z={common:"border-slate-600 bg-slate-800/30 text-slate-300",uncommon:"border-emerald-600 bg-emerald-900/30 text-emerald-300",rare:"border-blue-600 bg-blue-900/30 text-blue-300",epic:"border-purple-600 bg-purple-900/30 text-purple-300",legendary:"border-amber-600 bg-amber-900/30 text-amber-300"};return z[I]||z.common},O=async I=>{if(!(!e||E))try{M(!0);const z=await Ft.toggleEquipment(e,I.id,!0,s);z.success?(me.success(`${I.name} equipado com sucesso!`),t({to:"/game/play/equipment",search:{character:e}})):me.error(z.error||"Erro ao equipar item")}catch(z){console.error("Erro ao equipar item:",z),me.error("Erro ao equipar item")}finally{M(!1)}},H=I=>{if(!I.equipment)return null;const z=I.equipment,ee=(h==null?void 0:h.id)===z.id;return r.jsx("div",{className:`relative cursor-pointer transition-all duration-200 ${ee?"transform scale-[1.02]":"hover:transform hover:scale-[1.01]"}`,onClick:()=>p(z),children:r.jsx(Oe,{className:`border-2 transition-all duration-200 ${ee?"border-amber-400 bg-amber-900/20 shadow-lg shadow-amber-400/20":`${k(z.rarity)} hover:brightness-110`}`,children:r.jsx(He,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${k(z.rarity)}`,children:$(z)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-medium text-slate-200 truncate",children:z.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(ze,{variant:"outline",className:"text-xs",children:z.rarity}),z.level_requirement&&z.level_requirement>1&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Nv. ",z.level_requirement]})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-400",children:[z.atk_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(kt,{className:"h-3 w-3 text-red-400"}),"+",z.atk_bonus]}),z.def_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(vt,{className:"h-3 w-3 text-blue-400"}),"+",z.def_bonus]}),z.mana_bonus>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ct,{className:"h-3 w-3 text-purple-400"}),"+",z.mana_bonus]})]})]})]})})})},z.id)},Y=()=>{if(!h)return r.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ca,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-lg",children:"Selecione um equipamento"}),r.jsx("p",{className:"text-sm mt-2 opacity-75",children:"Clique em um item para ver os detalhes"})]})});const I=a?a.level>=(h.level_requirement||1):!1;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-4 rounded-lg border-2 ${k(h.rarity)}`,children:$(h)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-2",children:h.name}),r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ze,{className:`border ${k(h.rarity)}`,children:h.rarity}),r.jsx(ze,{variant:"outline",className:"text-slate-300",children:h.type}),h.rarity==="legendary"&&r.jsx(jt,{className:"h-4 w-4 text-amber-400 animate-pulse"})]})]})]}),r.jsx("div",{className:"bg-slate-800/30 border border-slate-700/50 rounded-lg p-4",children:r.jsx("p",{className:"text-slate-300 leading-relaxed",children:h.description})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Atributos"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.atk_bonus>0&&r.jsxs("div",{className:"bg-red-900/30 border border-red-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"h-4 w-4 text-red-400"}),r.jsx("span",{className:"text-red-300 font-medium",children:"Ataque"})]}),r.jsxs("p",{className:"text-red-200 text-lg font-bold",children:["+",h.atk_bonus]})]}),h.def_bonus>0&&r.jsxs("div",{className:"bg-blue-900/30 border border-blue-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vt,{className:"h-4 w-4 text-blue-400"}),r.jsx("span",{className:"text-blue-300 font-medium",children:"Defesa"})]}),r.jsxs("p",{className:"text-blue-200 text-lg font-bold",children:["+",h.def_bonus]})]}),h.mana_bonus>0&&r.jsxs("div",{className:"bg-purple-900/30 border border-purple-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-purple-400"}),r.jsx("span",{className:"text-purple-300 font-medium",children:"Mana"})]}),r.jsxs("p",{className:"text-purple-200 text-lg font-bold",children:["+",h.mana_bonus]})]}),h.speed_bonus&&h.speed_bonus>0&&r.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700/50 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-4 w-4 text-yellow-400"}),r.jsx("span",{className:"text-yellow-300 font-medium",children:"Velocidade"})]}),r.jsxs("p",{className:"text-yellow-200 text-lg font-bold",children:["+",h.speed_bonus]})]})]})]}),h.level_requirement&&h.level_requirement>1&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Requisitos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-400",children:"Nvel mnimo:"}),r.jsx("span",{className:`font-bold ${I?"text-green-400":"text-red-400"}`,children:h.level_requirement})]})]}),h.weapon_subtype&&r.jsxs("div",{className:"bg-slate-700/30 border border-slate-600/50 rounded-lg p-3",children:[r.jsx("h4",{className:"text-sm font-medium text-slate-300 mb-2",children:"Tipo de Arma"}),r.jsx("p",{className:"text-slate-400 capitalize",children:h.weapon_subtype})]}),r.jsx("div",{className:"pt-4 border-t border-slate-700/50",children:r.jsx(fe,{onClick:()=>O(h),disabled:!I||E,className:`w-full ${I?"bg-amber-600 hover:bg-amber-700 text-white":"bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:E?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t border-b border-current"}),"Equipando..."]}):I?`Equipar em ${P(s)}`:`Nvel ${h.level_requirement} necessrio`})})]})};return g?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-slate-700 rounded w-64"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"h-96 bg-slate-700 rounded"}),r.jsx("div",{className:"lg:col-span-2 h-96 bg-slate-700 rounded"})]})]})})}):a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t({to:"/game/play/equipment",search:{character:e}}),className:"self-start",children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar"]}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-100 flex items-center gap-2",children:[r.jsx(kt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-400"}),r.jsx("span",{className:"hidden sm:inline",children:"Selecionar Equipamento"}),r.jsx("span",{className:"sm:hidden",children:"Equipamentos"})]}),r.jsxs("p",{className:"text-slate-400 text-sm sm:text-base",children:[a.name," - ",P(s)]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ht,{className:"pb-3",children:r.jsxs(xt,{className:"text-slate-100 flex items-center gap-2 text-lg",children:[r.jsx(yd,{className:"h-5 w-5 text-amber-400"}),"Filtros"]})}),r.jsxs(He,{className:"space-y-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Um,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-500"}),r.jsx(Ms,{placeholder:"Buscar equipamento...",value:y,onChange:I=>_(I.target.value),className:"pl-10 bg-slate-700/50 border-slate-600 text-slate-200"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Tipo"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-2 gap-2",children:[{value:"all",label:"Todos"},{value:"weapon",label:"Armas"},{value:"armor",label:"Armaduras"},{value:"accessory",label:"Acessrios"}].map(I=>r.jsx(fe,{variant:j===I.value?"default":"outline",size:"sm",onClick:()=>N(I.value),className:"text-xs",children:I.label},I.value))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Ordenar por"}),r.jsxs("select",{value:S,onChange:I=>C(I.target.value),className:"w-full p-2 rounded-md bg-slate-700/50 border border-slate-600 text-slate-200 text-sm",children:[r.jsx("option",{value:"name",children:"Nome"}),r.jsx("option",{value:"level",children:"Nvel"}),r.jsx("option",{value:"rarity",children:"Raridade"}),r.jsx("option",{value:"attack",children:"Ataque"}),r.jsx("option",{value:"defense",children:"Defesa"})]})]})]})]}),r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50",children:[r.jsx(ht,{className:"pb-3",children:r.jsxs(xt,{className:"text-slate-100 text-lg",children:["Equipamentos (",u.length,")"]})}),r.jsx(He,{className:"space-y-3 max-h-[400px] sm:max-h-[500px] lg:max-h-[600px] overflow-y-auto",children:u.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ca,{className:"h-12 w-12 mx-auto mb-3 text-slate-600 opacity-50"}),r.jsx("p",{className:"text-slate-500",children:"Nenhum equipamento encontrado"})]}):u.map(H)})]})]}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs(Oe,{className:"bg-slate-800/50 border-slate-700/50 h-full min-h-[400px]",children:[r.jsx(ht,{children:r.jsx(xt,{className:"text-slate-100",children:"Detalhes do Equipamento"})}),r.jsx(He,{className:"h-full",children:Y()})]})})]})]})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-100 mb-4",children:"Personagem no encontrado"}),r.jsxs(fe,{onClick:()=>t({to:"/game/play/hub",search:{character:e}}),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Voltar ao Hub"]})]})})})}const YY="/assets/thief-idle-01-Cg6afdQr.png",KY="/assets/thief-idle-02-Des9M6g7.png",WY="/assets/thief-idle-03-zEN7iEdx.png";function ZY({className:t="",size:e=64}){const[s,a]=b.useState(1),n=[YY,KY,WY];return b.useEffect(()=>{const i=setInterval(()=>{a(c=>c%3+1)},600);return()=>clearInterval(i)},[]),r.jsx("div",{className:`relative ${t}`,style:{width:e,height:e},children:r.jsx("img",{src:n[s-1],alt:"Thief Idle Animation",className:"object-contain"})})}function QY({player:t,currentEnemy:e,playerHpPercentage:s,playerManaPercentage:a,enemyHpPercentage:n,isPlayerTurn:i}){var $,k,O,H,Y,I,z,ee,G,A,B,V;b.useEffect(()=>{console.log("[BattleArena] Props recebidas:"),console.log("- player:",t==null?void 0:t.name,`(andar: ${t==null?void 0:t.floor})`),console.log("- currentEnemy:",e==null?void 0:e.name,`(HP: ${e==null?void 0:e.hp}/${e==null?void 0:e.maxHp})`),console.log("- playerHpPercentage:",s),console.log("- enemyHpPercentage:",n),console.log("- isPlayerTurn:",i)},[t,e,s,n,i]);const[c,u]=b.useState(!1),[f,h]=b.useState(!1),[p,g]=b.useState([]),[x,y]=b.useState(!1),_=b.useRef(null);b.useEffect(()=>{const W=L=>{_.current&&!_.current.contains(L.target)&&y(!1)};return x&&(document.addEventListener("mousedown",W),document.addEventListener("touchstart",W)),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchstart",W)}},[x]);const j=()=>{y(!x)},[N,S]=b.useState({playerHp:t.hp,enemyHp:e.hp,battleId:`${t.floor}-${e.name}-${Date.now()}`});b.useEffect(()=>{const W=`${t.floor}-${e.name}`;if(!N.battleId.includes(W)){S({playerHp:t.hp,enemyHp:e.hp,battleId:W});return}let L=!1;if(t.hp<N.playerHp&&N.playerHp-t.hp>=1){const F=N.playerHp-t.hp;console.log(`[BattleArena] Jogador recebeu ${F} de dano`),C(F,!0,!1,"physical"),L=!0}if(e.hp<N.enemyHp&&N.enemyHp-e.hp>=1){const F=N.enemyHp-e.hp,ie=F>t.atk*1.5;console.log(`[BattleArena] Inimigo recebeu ${F} de dano ${ie?"(CRTICO)":""}`),C(F,!1,ie,"physical"),L=!0}L&&S({playerHp:t.hp,enemyHp:e.hp,battleId:W})},[t.hp,e.hp,t.atk,t.floor,e.name]);const C=(W,L,F,ie)=>{const se=`${Date.now()}-${Math.random()}`,ue={id:se,damage:W,isPlayer:L,isCritical:F,damageType:ie,timestamp:Date.now()};g(le=>[...le,ue]),setTimeout(()=>{g(le=>le.filter(re=>re.id!==se))},2e3)},E=W=>({aggressive:"Agressivo",defensive:"Defensivo",balanced:"Equilibrado"})[W]||W,M=W=>{switch(W){case"aggressive":return"bg-red-500/20 text-red-400 border-red-500/30";case"defensive":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"balanced":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},R=W=>({armored:"Blindado",swift:"Veloz",magical:"Mgico",brutish:"Brutal",resilient:"Resistente",berserker:"Berserker",ethereal:"Etreo",venomous:"Venenoso"})[W]||W,P=W=>{switch(W){case"armored":return r.jsx(vt,{className:"h-3 w-3"});case"swift":return r.jsx(Ct,{className:"h-3 w-3"});case"magical":return r.jsx(lt,{className:"h-3 w-3"});case"brutish":return r.jsx(kt,{className:"h-3 w-3"});case"resilient":return r.jsx(dv,{className:"h-3 w-3"});case"berserker":return r.jsx(ea,{className:"h-3 w-3"});case"ethereal":return r.jsx(_o,{className:"h-3 w-3"});case"venomous":return r.jsx(qm,{className:"h-3 w-3"});default:return r.jsx($B,{className:"h-3 w-3"})}};return r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900/30 via-transparent to-slate-900/30 rounded-xl"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-transparent to-red-500/5 rounded-xl"}),r.jsx(Oe,{className:`relative border-2 backdrop-blur-sm overflow-hidden transition-all duration-500 ${s>=70?"battle-card-healthy":s>=30?"battle-card-wounded":"battle-card-critical"}`,children:r.jsxs(He,{className:"p-3 md:p-6",children:[r.jsx("div",{className:"text-center mb-3 md:mb-6",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 md:gap-3 mb-2",children:[r.jsxs(ze,{variant:"outline",className:"px-2 py-1 text-xs bg-background/50",children:[r.jsx(kt,{className:"h-3 w-3 mr-1"}),"Andar ",t.floor]}),r.jsx("div",{className:"h-1.5 w-1.5 md:h-2 md:w-2 rounded-full bg-primary animate-pulse"}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ze,{variant:i?"default":"secondary",className:`px-2 py-1 text-xs ${i?"bg-primary text-primary-foreground border-primary":"bg-secondary text-secondary-foreground border-secondary"}`,children:i?"Seu Turno":"Turno do Inimigo"}),i&&r.jsxs("div",{className:"relative",ref:_,children:[r.jsx("button",{className:"ml-1 text-muted-foreground hover:text-foreground transition-colors touch-manipulation",onClick:j,onTouchStart:j,"aria-label":"Mostrar atalhos de teclado",children:r.jsx(mB,{className:"h-3 w-3 md:h-4 md:w-4"})}),x&&r.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 z-50 bg-background border border-border rounded-lg shadow-xl p-4 w-72 md:w-80 max-w-[90vw]",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-semibold mb-3 text-center text-foreground",children:"Atalhos de Teclado"}),r.jsxs("div",{className:"space-y-2.5",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"A"}),r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"S"}),r.jsx("span",{className:"font-mono bg-primary/20 text-primary px-2 py-1 rounded text-xs border",children:"D"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Atacar, Defender, Fugir"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"1"}),r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"2"}),r.jsx("span",{className:"font-mono bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs border border-blue-500/30",children:"3"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Magias 1, 2, 3"})]}),r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex gap-1",children:[r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"Q"}),r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"W"}),r.jsx("span",{className:"font-mono bg-green-500/20 text-green-400 px-2 py-1 rounded text-xs border border-green-500/30",children:"E"})]}),r.jsx("span",{className:"text-xs text-muted-foreground flex-1 text-right",children:"Poes 1, 2, 3"})]})]})]}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-border"}),r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 translate-y-px w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-background"})]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-8 items-start",children:[r.jsxs("div",{className:"space-y-2 md:space-y-4",children:[r.jsxs("div",{className:"text-center relative",children:[r.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[r.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 border-2 md:border-3 flex items-center justify-center transition-all duration-500 overflow-hidden ${i?"border-blue-500 shadow-xl md:shadow-2xl shadow-blue-500/40 scale-105 md:scale-110":"border-blue-500/30 scale-100"}`,children:r.jsx(ZY,{size:64,className:"scale-75 md:scale-100 lg:scale-110"})}),i&&r.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[r.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-blue-500 rounded-full"})]}),t.isDefending&&r.jsx("div",{className:"absolute -bottom-1 -left-1 md:-bottom-2 md:-left-2",children:r.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-blue-600/90 rounded-full flex items-center justify-center border-2 border-background",children:r.jsx(vt,{className:"h-3 w-3 md:h-4 md:w-4 text-white"})})})]}),r.jsxs("div",{className:"space-y-1 md:space-y-2",children:[r.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[r.jsx(Ei,{className:"h-3 w-3 md:h-5 md:w-5 text-yellow-500"}),r.jsx("span",{className:"truncate",children:t.name})]}),r.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[r.jsx(jt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",t.level]}),r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-yellow-400 text-xs px-1 md:px-2",children:[t.gold.toLocaleString("pt-BR"),"G"]})]})]}),p.filter(W=>W.isPlayer).map(W=>r.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${W.isCritical?"text-red-400 text-2xl animate-damage-critical":"text-red-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",W.damage,W.isCritical&&r.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRTICO!"})]},W.id))]}),r.jsxs("div",{className:"space-y-2 md:space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.hp,"/",t.max_hp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:s,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${s>=70?"bg-green-500":s>=40?"bg-yellow-500":s>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${s}%`}})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 text-blue-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[t.mana,"/",t.max_mana]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:a,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${a>=70?"bg-blue-500":a>=40?"bg-cyan-500":a>=20?"bg-indigo-500":"bg-purple-500"}`,style:{width:`${a}%`}})]})]})]}),r.jsxs("div",{className:`grid gap-1 md:gap-2 ${t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0?"grid-cols-4":"grid-cols-3"}`,children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(kt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-xs text-red-300 mb-1",children:"ATK"}),r.jsx("div",{className:"text-xs font-bold text-red-400",children:r.jsx(_n,{value:t.atk||0,baseValue:t.base_atk,equipmentBonus:t.equipment_atk_bonus,modifications:((k=($=t.active_effects)==null?void 0:$.attribute_modifications)==null?void 0:k.filter(W=>W.attribute==="atk"))||[],size:"sm",showTooltip:!0})})]}),t.magic_attack&&!isNaN(t.magic_attack)&&t.magic_attack>0&&r.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-xs text-purple-300 mb-1",children:"MAG"}),r.jsx("div",{className:"text-xs font-bold text-purple-400",children:r.jsx(_n,{value:t.magic_attack,modifications:((H=(O=t.active_effects)==null?void 0:O.attribute_modifications)==null?void 0:H.filter(W=>W.attribute==="magic_attack"))||[],size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(vt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-xs text-blue-300 mb-1",children:"DEF"}),r.jsx("div",{className:"text-xs font-bold text-blue-400",children:r.jsx(_n,{value:t.def||0,baseValue:t.base_def,equipmentBonus:t.equipment_def_bonus,modifications:((I=(Y=t.active_effects)==null?void 0:Y.attribute_modifications)==null?void 0:I.filter(W=>W.attribute==="def"))||[],size:"sm",showTooltip:!0})})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-xs text-yellow-300 mb-1",children:"SPD"}),r.jsx("div",{className:"text-xs font-bold text-yellow-400",children:r.jsx(_n,{value:t.speed||0,baseValue:t.base_speed,equipmentBonus:t.equipment_speed_bonus,modifications:((ee=(z=t.active_effects)==null?void 0:z.attribute_modifications)==null?void 0:ee.filter(W=>W.attribute==="speed"))||[],size:"sm",showTooltip:!0})})]})]}),r.jsxs("div",{className:"hidden md:block",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[c?r.jsx(fc,{className:"h-3 w-3 mr-1"}):r.jsx(ko,{className:"h-3 w-3 mr-1"}),c?"Menos":"Mais"," Detalhes"]}),c&&r.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[r.jsx("div",{className:"space-y-2",children:(()=>{const L=(le=>le<=1?0:Math.floor(100*Math.pow(1.5,le-2)))(t.level),F=t.xp_next_level,ie=t.xp-L,se=F-L,ue=Math.max(0,Math.min(100,ie/se*100));return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-3 w-3 text-yellow-500"}),r.jsx("span",{className:"font-medium text-xs text-muted-foreground",children:"Experincia"})]}),r.jsxs("div",{className:"text-xs font-bold",children:[r.jsx("span",{className:"text-yellow-400",children:Oa(ie)}),r.jsx("span",{className:"text-muted-foreground mx-1",children:"/"}),r.jsx("span",{className:"text-muted-foreground",children:Oa(se)})]})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:ue,className:"h-2",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:"absolute top-0 left-0 h-2 bg-gradient-to-r from-amber-400 via-yellow-500 to-orange-400 rounded-full transition-all duration-300",style:{width:`${ue}%`}})]}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/10 via-yellow-500/5 to-yellow-500/10 rounded-full pointer-events-none"})]}),r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Nvel ",t.level]}),r.jsxs("span",{className:"text-yellow-400 font-medium",children:[Oa(se-ie)," para nv ",t.level+1]})]})]})})()}),(t.strength||t.dexterity||t.intelligence||t.wisdom||t.vitality||t.luck)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primrios:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[t.strength&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(La,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"FOR"}),r.jsx("div",{className:"font-medium",children:t.strength})]}),t.dexterity&&r.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),r.jsx("div",{className:"text-muted-foreground",children:"DES"}),r.jsx("div",{className:"font-medium",children:t.dexterity})]}),t.intelligence&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"INT"}),r.jsx("div",{className:"font-medium",children:t.intelligence})]}),t.wisdom&&r.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[r.jsx(_o,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-muted-foreground",children:"SAB"}),r.jsx("div",{className:"font-medium",children:t.wisdom})]}),t.vitality&&r.jsxs("div",{className:"bg-pink-500/10 rounded p-1 text-center",children:[r.jsx(cs,{className:"h-3 w-3 mx-auto mb-1 text-pink-400"}),r.jsx("div",{className:"text-muted-foreground",children:"VIT"}),r.jsx("div",{className:"font-medium",children:t.vitality})]}),t.luck&&r.jsxs("div",{className:"bg-yellow-500/10 rounded p-1 text-center",children:[r.jsx(jt,{className:"h-3 w-3 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-muted-foreground",children:"SOR"}),r.jsx("div",{className:"font-medium",children:t.luck})]})]})]}),(t.critical_chance||t.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avanado:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.critical_chance&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(FN,{className:"h-3 w-3"}),r.jsx("span",{children:"Crtico"})]}),r.jsx("div",{className:"font-medium text-yellow-400",children:r.jsx(_n,{value:t.critical_chance,modifications:((A=(G=t.active_effects)==null?void 0:G.attribute_modifications)==null?void 0:A.filter(W=>W.attribute==="critical_chance"))||[],size:"sm",showTooltip:!0,label:"%"})})]}),t.critical_damage&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(ea,{className:"h-3 w-3"}),r.jsx("span",{children:"Dano Crit"})]}),r.jsx("div",{className:"font-medium text-orange-400",children:r.jsx(_n,{value:t.critical_damage,modifications:((V=(B=t.active_effects)==null?void 0:B.attribute_modifications)==null?void 0:V.filter(W=>W.attribute==="critical_damage"))||[],size:"sm",showTooltip:!0,label:"%"})})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Habilidades:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(t.sword_mastery||0)>1&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(kt,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Espada"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.sword_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.sword_mastery_xp||0," XP"]})]}),(t.axe_mastery||0)>1&&r.jsxs("div",{className:"bg-orange-500/10 rounded p-1 text-center",children:[r.jsx(ea,{className:"h-3 w-3 mx-auto mb-1 text-orange-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Machado"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.axe_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.axe_mastery_xp||0," XP"]})]}),(t.blunt_mastery||0)>1&&r.jsxs("div",{className:"bg-brown-500/10 rounded p-1 text-center",children:[r.jsx(rv,{className:"h-3 w-3 mx-auto mb-1 text-brown-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Concusso"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.blunt_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.blunt_mastery_xp||0," XP"]})]}),(t.defense_mastery||0)>1&&r.jsxs("div",{className:"bg-blue-500/10 rounded p-1 text-center",children:[r.jsx(vt,{className:"h-3 w-3 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Defesa"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.defense_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.defense_mastery_xp||0," XP"]})]}),(t.magic_mastery||0)>1&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"Magia"}),r.jsxs("div",{className:"font-medium",children:["Lv ",t.magic_mastery]}),r.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.magic_mastery_xp||0," XP"]})]})]})]}),!!(t.attribute_points&&t.attribute_points>0)&&r.jsxs("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openAttributeModal"))},className:"w-full bg-yellow-500/10 border border-yellow-500/20 rounded p-2 hover:bg-yellow-500/20 hover:border-yellow-500/40 transition-all duration-200 cursor-pointer relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/5 via-yellow-500/10 to-yellow-500/5 animate-pulse"}),r.jsxs("div",{className:"relative flex items-center gap-2 text-yellow-400",children:[r.jsx(jt,{className:"h-4 w-4 animate-pulse"}),r.jsxs("span",{className:"text-sm font-medium",children:[t.attribute_points," pontos de atributo disponveis"]})]})]}),!!t.isDefending&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-400 bg-blue-500/10 rounded p-2",children:[r.jsx(vt,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Postura Defensiva Ativa"})]}),t.defenseCooldown>0&&r.jsxs("div",{className:"flex items-center gap-2 text-orange-400 bg-orange-500/10 rounded p-2",children:[r.jsx(rv,{className:"h-4 w-4"}),r.jsxs("span",{className:"text-sm",children:["Defesa em Cooldown: ",t.defenseCooldown," turnos"]})]})]})]})]}),r.jsxs("div",{className:"space-y-2 md:space-y-4",children:[r.jsxs("div",{className:"text-center relative",children:[r.jsxs("div",{className:"relative inline-block mb-2 md:mb-4",children:[r.jsx("div",{className:`w-16 h-16 md:w-24 md:h-24 lg:w-28 lg:h-28 rounded-full bg-gradient-to-br from-red-500/20 to-orange-500/20 border-2 md:border-3 flex items-center justify-center text-2xl md:text-4xl lg:text-5xl transition-all duration-500 ${i?"border-red-500/30 scale-100":"border-red-500 shadow-xl md:shadow-2xl shadow-red-500/40 scale-105 md:scale-110"}`,children:e.image||""}),!i&&r.jsxs("div",{className:"absolute -top-1 -right-1 md:-top-2 md:-right-2",children:[r.jsx("div",{className:"w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full animate-ping"}),r.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 md:w-5 md:h-5 bg-red-500 rounded-full"})]})]}),r.jsxs("div",{className:"space-y-1 md:space-y-2",children:[r.jsxs("h3",{className:"font-bold text-sm md:text-lg lg:text-xl flex items-center justify-center gap-1 md:gap-2",children:[r.jsx(Qs,{className:"h-3 w-3 md:h-5 md:w-5 text-red-500"}),r.jsx("span",{className:"truncate",children:e.name})]}),r.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2 flex-wrap",children:[r.jsxs(ze,{variant:"outline",className:"bg-background/50 text-xs px-1 md:px-2",children:[r.jsx(_o,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Nv ",e.level]}),e.tier&&e.tier>1&&r.jsxs(ze,{variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30 text-xs px-1 md:px-2",children:[r.jsx(jt,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"Tier ",e.tier]}),e.is_boss&&r.jsxs(ze,{className:"bg-red-500/20 text-red-400 border-red-500/30 text-xs px-1 md:px-2",children:[r.jsx(Ei,{className:"h-2 w-2 md:h-3 md:w-3 mr-1"}),"BOSS"]}),r.jsx(ze,{className:`text-xs border px-1 md:px-2 ${M(e.behavior)}`,children:E(e.behavior)})]})]}),p.filter(W=>!W.isPlayer).map(W=>r.jsxs("div",{className:`absolute pointer-events-none z-20 font-bold text-lg animate-damage-float ${W.isCritical?"text-orange-400 text-2xl animate-damage-critical":"text-orange-300"}`,style:{left:"50%",top:"20%",transform:"translateX(-50%)",textShadow:"2px 2px 4px rgba(0,0,0,0.8)"},children:["-",W.damage,W.isCritical&&r.jsx("span",{className:"ml-1 text-yellow-400 text-sm",children:"CRTICO!"})]},W.id))]}),r.jsxs("div",{className:"space-y-2 md:space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(cs,{className:"h-3 w-3 md:h-4 md:w-4 text-red-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"HP"})]}),r.jsxs("span",{className:"text-xs md:text-sm font-bold",children:[e.hp,"/",e.maxHp]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Ur,{value:n,className:"h-2 md:h-3",style:{background:"rgba(0,0,0,0.2)"}}),r.jsx("div",{className:`absolute top-0 left-0 h-2 md:h-3 rounded-full transition-all duration-300 ${n>=70?"bg-green-500":n>=40?"bg-yellow-500":n>=20?"bg-orange-500":"bg-red-500"}`,style:{width:`${n}%`}})]})]}),e.mana>0&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 md:h-4 md:w-4 text-purple-500"}),r.jsx("span",{className:"font-medium text-xs md:text-sm",children:"MP"})]}),r.jsx("span",{className:"text-xs md:text-sm font-bold",children:e.mana})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"h-2 md:h-3 bg-black/20 rounded-full"}),r.jsx("div",{className:"absolute top-0 left-0 h-2 md:h-3 bg-gradient-to-r from-blue-500 via-cyan-500 to-purple-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,e.mana/Math.max(e.mana,100)*100)}%`}})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-1 md:gap-2",children:[r.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(kt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-xs font-bold text-red-400",children:e.attack})]}),r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(vt,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-blue-400"}),r.jsx("div",{className:"text-xs font-bold text-blue-400",children:e.defense})]}),r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded p-1 md:p-2 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 md:h-4 md:w-4 mx-auto mb-1 text-yellow-400"}),r.jsx("div",{className:"text-xs font-bold text-yellow-400",children:e.speed})]})]}),r.jsxs("div",{className:"hidden md:block",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(!f),className:"w-full h-8 text-xs bg-background/30 hover:bg-background/50",children:[f?r.jsx(fc,{className:"h-3 w-3 mr-1"}):r.jsx(ko,{className:"h-3 w-3 mr-1"}),f?"Menos":"Mais"," Detalhes"]}),f&&r.jsxs("div",{className:"space-y-3 pt-2 border-t border-border/50 animate-in slide-in-from-top-2 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsx("div",{className:"text-muted-foreground",children:"Recompensa XP"}),r.jsx("div",{className:"font-medium text-blue-400",children:e.reward_xp})]}),r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsx("div",{className:"text-muted-foreground",children:"Recompensa Gold"}),r.jsx("div",{className:"font-medium text-yellow-400",children:e.reward_gold})]})]}),!!(e.strength||e.dexterity||e.intelligence)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Atributos Primrios:"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[!!e.strength&&r.jsxs("div",{className:"bg-red-500/10 rounded p-1 text-center",children:[r.jsx(La,{className:"h-3 w-3 mx-auto mb-1 text-red-400"}),r.jsx("div",{className:"text-muted-foreground",children:"FOR"}),r.jsx("div",{className:"font-medium",children:e.strength})]}),!!e.dexterity&&r.jsxs("div",{className:"bg-green-500/10 rounded p-1 text-center",children:[r.jsx(Ct,{className:"h-3 w-3 mx-auto mb-1 text-green-400"}),r.jsx("div",{className:"text-muted-foreground",children:"DES"}),r.jsx("div",{className:"font-medium",children:e.dexterity})]}),!!e.intelligence&&r.jsxs("div",{className:"bg-purple-500/10 rounded p-1 text-center",children:[r.jsx(lt,{className:"h-3 w-3 mx-auto mb-1 text-purple-400"}),r.jsx("div",{className:"text-muted-foreground",children:"INT"}),r.jsx("div",{className:"font-medium",children:e.intelligence})]})]})]}),!!(e.critical_chance||e.critical_damage)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Combate Avanado:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[!!e.critical_chance&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(FN,{className:"h-3 w-3"}),r.jsx("span",{children:"Crtico"})]}),r.jsxs("div",{className:"font-medium text-yellow-400",children:[(e.critical_chance||0).toFixed(1),"%"]})]}),!!e.critical_damage&&r.jsxs("div",{className:"bg-background/20 rounded p-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsx(ea,{className:"h-3 w-3"}),r.jsx("span",{children:"Dano Crit"})]}),r.jsxs("div",{className:"font-medium text-orange-400",children:[(e.critical_damage||0).toFixed(0),"%"]})]})]})]}),!!(e.physical_resistance||e.magical_resistance||e.debuff_resistance)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Resistncias:"}),r.jsxs("div",{className:"space-y-1",children:[!!(e.physical_resistance&&e.physical_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(vt,{className:"h-3 w-3 text-red-400"}),r.jsx("span",{children:"Fsica"})]}),r.jsxs("span",{className:"text-red-400",children:[((e.physical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.magical_resistance&&e.magical_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3 text-blue-400"}),r.jsx("span",{children:"Mgica"})]}),r.jsxs("span",{className:"text-blue-400",children:[((e.magical_resistance||0)*100).toFixed(0),"%"]})]}),!!(e.debuff_resistance&&e.debuff_resistance>0)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(dv,{className:"h-3 w-3 text-green-400"}),r.jsx("span",{children:"Debuffs"})]}),r.jsxs("span",{className:"text-green-400",children:[((e.debuff_resistance||0)*100).toFixed(0),"%"]})]})]})]}),!!(e.physical_vulnerability&&e.physical_vulnerability>1||e.magical_vulnerability&&e.magical_vulnerability>1)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Vulnerabilidades:"}),r.jsxs("div",{className:"space-y-1",children:[!!(e.physical_vulnerability&&e.physical_vulnerability>1)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fv,{className:"h-3 w-3 text-red-400"}),r.jsx("span",{children:"Fsica"})]}),r.jsxs("span",{className:"text-red-400",children:["+",(((e.physical_vulnerability||1)-1)*100).toFixed(0),"%"]})]}),!!(e.magical_vulnerability&&e.magical_vulnerability>1)&&r.jsxs("div",{className:"flex justify-between items-center text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fv,{className:"h-3 w-3 text-blue-400"}),r.jsx("span",{children:"Mgica"})]}),r.jsxs("span",{className:"text-blue-400",children:["+",(((e.magical_vulnerability||1)-1)*100).toFixed(0),"%"]})]})]})]}),!!(e.primary_trait||e.secondary_trait)&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Caractersticas:"}),r.jsxs("div",{className:"space-y-1",children:[!!e.primary_trait&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[P(e.primary_trait),r.jsx("span",{className:"text-purple-400",children:R(e.primary_trait)})]}),!!e.secondary_trait&&r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[P(e.secondary_trait),r.jsx("span",{className:"text-blue-400",children:R(e.secondary_trait)})]})]})]})]})]})]})]})]})})]})}const JY=t=>{const e=t.name.toLowerCase(),s=t.description.toLowerCase();return e.includes("bola de fogo")||e.includes("fireball")||s.includes("fogo")?r.jsx(qm,{className:"h-4 w-4"}):e.includes("raio de gelo")||e.includes("ice")||s.includes("gelo")?r.jsx(wC,{className:"h-4 w-4"}):e.includes("cura")||e.includes("heal")||s.includes("restaura")?r.jsx(cs,{className:"h-4 w-4"}):e.includes("raio")||e.includes("bolt")||s.includes("raio")?r.jsx(Ct,{className:"h-4 w-4"}):e.includes("escudo")||e.includes("shield")||s.includes("defesa")?r.jsx(dv,{className:"h-4 w-4"}):e.includes("dano")||s.includes("damage")||s.includes("dano")?r.jsx(ea,{className:"h-4 w-4"}):s.includes("overtime")||s.includes("tempo")?r.jsx(rv,{className:"h-4 w-4"}):r.jsx(lt,{className:"h-4 w-4"})};function eK({handleAction:t,isPlayerTurn:e,loading:s,player:a,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i,currentEnemy:c,battleRewards:u}){const{performAction:f}=b.useContext(lC),[h,p]=b.useState([]),[g,x]=b.useState(!0),[y,_]=b.useState(null),[j,N]=b.useState(null),[S,C]=b.useState(null),[E,M]=b.useState(null),[R,P]=b.useState(!1),$=b.useRef(!1),k=b.useRef(0),O=300,H=b.useRef(null),Y=b.useCallback(async()=>{if(!(R||!u)){console.log("[CombinedBattleInterface] === BOTO FALLBACK ACIONADO ==="),console.log("[CombinedBattleInterface] Avanando para prximo andar via fallback..."),P(!0);try{f("continue"),me.success("Avanando para o prximo andar!",{description:"Preparando nova batalha...",duration:2e3})}catch(J){console.error("[CombinedBattleInterface] Erro ao avanar:",J),me.error("Erro ao avanar para o prximo andar"),P(!1)}}},[R,u,f]),I=!e||s.performAction,z=a.potionUsedThisTurn||!1,ee=a.hp<=0;b.useEffect(()=>{console.log("[CombinedBattleInterface] === ESTADO DETALHADO DO TURNO ==="),console.log(`[CombinedBattleInterface] isPlayerTurn: ${e}`),console.log(`[CombinedBattleInterface] loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] isDisabled: ${I}`),console.log("[CombinedBattleInterface] currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isAlive:c.hp>0}:"null"),console.log("[CombinedBattleInterface] battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp}:"null"),console.log("[CombinedBattleInterface] === FIM DO LOG DETALHADO ==="),c&&c.hp>0&&!e&&!s.performAction&&!u&&(console.warn("[CombinedBattleInterface]   POSSVEL PROBLEMA: Turno travado no inimigo"),console.warn(`[CombinedBattleInterface] - Inimigo vivo: ${c.name} (${c.hp}/${c.maxHp})`),console.warn("[CombinedBattleInterface] - No  turno do jogador"),console.warn("[CombinedBattleInterface] - No est carregando"),console.warn("[CombinedBattleInterface] - Sem recompensas de batalha"))},[e,s.performAction,I,c==null?void 0:c.name,c==null?void 0:c.hp,u]);const G=!!(u&&!s.performAction&&!ee&&!R&&(!c||c.hp<=0)),A=s.performAction||ee;b.useEffect(()=>{var J;console.log("[CombinedBattleInterface] === CONDIES DO BOTO FALLBACK ==="),console.log(`[CombinedBattleInterface] shouldShowNextFloorButton: ${G}`),console.log("[CombinedBattleInterface] - battleRewards:",u?{xp:u.xp,gold:u.gold,leveledUp:u.leveledUp,dropsCount:((J=u.drops)==null?void 0:J.length)||0}:"null/undefined"),console.log(`[CombinedBattleInterface] - loading.performAction: ${s.performAction}`),console.log(`[CombinedBattleInterface] - isPlayerDead: ${ee}`),console.log(`[CombinedBattleInterface] - continuingAdventure: ${R}`),console.log("[CombinedBattleInterface] - currentEnemy:",c?{name:c.name,hp:c.hp,maxHp:c.maxHp,isDead:c.hp<=0}:"null/undefined"),console.log("[CombinedBattleInterface] === FIM DAS CONDIES ===")},[G,u,s.performAction,ee,R,c==null?void 0:c.hp]);const B=async()=>{try{const J=await jo.getCharacterPotionSlots(a.id);J.success&&J.data&&p(J.data)}catch(J){console.error("Erro ao carregar slots de poo:",J)}finally{x(!1)}};b.useEffect(()=>{a.id&&B()},[a.id]),b.useEffect(()=>{a.id&&a.consumables&&(console.log("[CombinedBattleInterface] Consumveis mudaram, recarregando slots"),B())},[a.consumables]);const V=async J=>{var De;if(ee||I||y!==null)return;const ge=h.find(Ve=>Ve.slot_position===J);if(!(ge!=null&&ge.consumable_id)){me.warning(`Slot ${W(J)} est vazio`);return}if(z){me.error("Voc j usou uma poo neste turno!",{description:"Voc s pode usar uma poo por turno",duration:3e3});return}const _e=(De=a.consumables)==null?void 0:De.find(Ve=>Ve.consumable_id===ge.consumable_id);if(!_e||_e.quantity<=0){me.error("Poo no disponvel!",{description:"Voc no possui esta poo no inventrio",duration:3e3});return}_(J);try{console.log(`[CombinedBattleInterface] Usando poo do slot ${J}`);const Ve=await jo.consumePotionFromSlot(a.id,J);if(Ve.success&&Ve.data){const{message:We,new_hp:ye,new_mana:Pe}=Ve.data;if(console.log(`[CombinedBattleInterface] Poo usada com sucesso: HP ${ye}, Mana ${Pe}`),n(ye,Pe),a.potionUsedThisTurn=!0,a.consumables&&_e){const Ae=a.consumables.map(q=>q.consumable_id===ge.consumable_id?{...q,quantity:Math.max(0,q.quantity-1)}:q).filter(q=>q.quantity>0);console.log("[CombinedBattleInterface] Atualizando consumveis via contexto:",Ae.length),i(Ae)}M(J),setTimeout(()=>M(null),2e3),await B(),me.success(We,{description:`HP: ${ye} | Mana: ${Pe}`,duration:4e3})}else console.error("[CombinedBattleInterface] Erro ao usar poo:",Ve.error),me.error(Ve.error||"Erro ao usar poo")}catch(Ve){console.error("Erro ao usar poo:",Ve),me.error("Erro ao usar poo")}finally{_(null)}};b.useEffect(()=>{const J=ge=>{if(ee||y!==null)return;const _e=ge.target;if(_e.tagName==="INPUT"||_e.tagName==="TEXTAREA"||_e.contentEditable==="true")return;const De=ge.key.toLowerCase();switch(De){case"a":if(I)return;ge.preventDefault(),t("attack");return;case"s":if(I||a.defenseCooldown>0)return;ge.preventDefault(),t("defend");return;case"d":if(A)return;ge.preventDefault(),ue("flee");return}if(I)return;let Ve=0;switch(De){case"q":Ve=1;break;case"w":Ve=2;break;case"e":Ve=3;break;default:{const We=parseInt(De)-1;if(We>=0&&We<Math.min(3,a.spells.length)){const ye=a.spells[We];a.mana>=ye.mana_cost&&ye.current_cooldown===0&&(ge.preventDefault(),t("spell",ye.id))}return}}Ve>0&&(ge.preventDefault(),V(Ve))};return window.addEventListener("keydown",J),()=>window.removeEventListener("keydown",J)},[I,A,y,h,a.spells,a.mana,a.defenseCooldown,z,ee]);const W=J=>{switch(J){case 1:return"Q";case 2:return"W";case 3:return"E";default:return""}},L=J=>{var ge;return J.consumable_id?(ge=J.consumable_description)!=null&&ge.toLowerCase().includes("mana")?r.jsx(iv,{className:"h-5 w-5 text-blue-500"}):r.jsx(NB,{className:"h-5 w-5 text-red-500"}):null},F=(J,ge)=>{N({...J,position:ge})},ie=()=>{H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{N(null)},150)},se=b.useCallback(()=>{const ge=Date.now()-k.current;return $.current?(console.warn("[CombinedBattleInterface] Ao bloqueada - j processando"),!1):ge<O?(console.warn(`[CombinedBattleInterface] Ao bloqueada - cooldown (${ge}ms < ${O}ms)`),!1):!0},[]),ue=b.useCallback(async(J,ge)=>{if(se()){$.current=!0,k.current=Date.now();try{await t(J,ge)}finally{setTimeout(()=>{$.current=!1},O)}}},[]),le=(J,ge)=>{const _e=ge.currentTarget.getBoundingClientRect(),De={x:_e.left+_e.width/2,y:_e.top-10},Ve=setTimeout(()=>{F(J,De)},500);C(Ve)},re=()=>{S&&(clearTimeout(S),C(null))},de=()=>{S&&(clearTimeout(S),C(null)),ie()},ce=(J,ge)=>{ge.preventDefault();const _e=ge.currentTarget.getBoundingClientRect(),De={x:_e.left+_e.width/2,y:_e.top-10},Ve=setTimeout(()=>{F(J,De)},500);C(Ve)},be=()=>{S&&(clearTimeout(S),C(null))},Ne=a.spells.slice(0,3);return r.jsxs(r.Fragment,{children:[ee&&r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center rounded-xl",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("div",{className:"text-red-400 text-2xl animate-pulse",children:""}),r.jsx("div",{className:"text-red-400 font-bold text-lg",children:"Personagem Morto"}),r.jsx("div",{className:"text-muted-foreground text-sm",children:"Interface bloqueada"})]})}),r.jsx(Oe,{className:"border-0 bg-card/50 backdrop-blur-sm relative",children:r.jsxs(He,{className:"p-3 md:p-3 space-y-3 md:space-y-2",children:[G&&!ee&&r.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-green-500/10 via-emerald-500/10 to-teal-500/10 border border-green-500/20 rounded-xl animate-in slide-in-from-top-2 duration-500",children:r.jsxs("div",{className:"text-center space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"text-lg",children:""}),r.jsx("div",{className:"text-sm text-green-400 font-medium",children:"Inimigo derrotado - Pronto para avanar"}),r.jsx("div",{className:"text-lg",children:""})]}),r.jsxs("div",{className:"bg-background/30 rounded-lg p-3 border border-green-500/10",children:[r.jsx("div",{className:"text-xs text-green-300 font-medium mb-1",children:"Recompensas Obtidas:"}),r.jsxs("div",{className:"flex justify-center items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(jt,{className:"h-4 w-4 text-blue-400"}),r.jsxs("span",{className:"text-blue-400 font-semibold",children:["+",u==null?void 0:u.xp," XP"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-yellow-400 text-lg",children:""}),r.jsxs("span",{className:"text-yellow-400 font-semibold",children:["+",u==null?void 0:u.gold," Gold"]})]}),(u==null?void 0:u.drops)&&u.drops.length>0&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-purple-400 text-lg",children:""}),r.jsxs("span",{className:"text-purple-400 font-semibold",children:["+",u.drops.length," item",u.drops.length>1?"s":""]})]})]}),(u==null?void 0:u.leveledUp)&&r.jsx("div",{className:"mt-2 text-center",children:r.jsxs(ze,{className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30 animate-pulse",children:[" LEVEL UP! Nvel ",u.newLevel]})})]}),r.jsx(fe,{onClick:Y,disabled:s.performAction||ee||R,size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-semibold px-6 py-3 rounded-xl shadow-lg shadow-green-500/20 transition-all duration-200 transform hover:scale-105 w-full md:w-auto",children:s.performAction||R?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Avanando..."]}):r.jsxs(r.Fragment,{children:[r.jsx(mC,{className:"h-4 w-4 mr-2"}),"Continuar Aventura"]})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Continue para o prximo andar da torre"})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:justify-center md:items-start gap-3 md:gap-4",children:[r.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-left",children:"Aes de Combate"}),r.jsxs("div",{className:"flex justify-center md:justify-start gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx(fe,{onClick:()=>ue("attack"),onMouseDown:J=>le({title:"Atacar",description:"Realiza um ataque fsico contra o inimigo usando sua arma equipada",stats:[{label:"Dano base",value:`${a.atk}`},{label:"Tipo",value:"Fsico"},{label:"Tecla",value:"A"}]},J),onMouseUp:re,onMouseLeave:de,onTouchStart:J=>ce({title:"Atacar",description:"Realiza um ataque fsico contra o inimigo usando sua arma equipada",stats:[{label:"Dano base",value:`${a.atk}`},{label:"Tipo",value:"Fsico"}]},J),onTouchEnd:be,disabled:I||G||ee,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-red-500/30 bg-red-500/5 hover:bg-red-500/10 hover:border-red-500/50 shadow-lg shadow-red-500/10 transition-all duration-200 ${ee?"opacity-30 cursor-not-allowed":""}`,children:r.jsx(kt,{className:"h-4 w-4 md:h-5 md:w-5 text-red-500/80"})}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"A"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{onClick:()=>ue("defend"),onMouseDown:J=>le({title:a.isDefending?"Defendendo":"Defender",description:a.isDefending?"Voc est em posio defensiva, reduzindo o dano recebido":"Adota uma postura defensiva, reduzindo o dano do prximo ataque",stats:[{label:"Reduo de dano",value:"85%"},{label:"Cooldown",value:a.defenseCooldown>0?`${a.defenseCooldown} turnos`:"Disponvel"},{label:"Tecla",value:"S"}]},J),onMouseUp:re,onMouseLeave:de,onTouchStart:J=>ce({title:a.isDefending?"Defendendo":"Defender",description:a.isDefending?"Voc est em posio defensiva, reduzindo o dano recebido":"Adota uma postura defensiva, reduzindo o dano do prximo ataque",stats:[{label:"Reduo de dano",value:"85%"},{label:"Cooldown",value:a.defenseCooldown>0?`${a.defenseCooldown} turnos`:"Disponvel"}]},J),onTouchEnd:be,disabled:I||a.defenseCooldown>0||G||ee,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 relative border-2 transition-all duration-200 ${a.isDefending?"border-blue-500/50 bg-blue-500/10 shadow-lg shadow-blue-500/20":"border-blue-500/30 bg-blue-500/5 hover:bg-blue-500/10 hover:border-blue-500/50 shadow-lg shadow-blue-500/10"} ${ee?"opacity-30 cursor-not-allowed":""}`,children:[r.jsx(vt,{className:"h-4 w-4 md:h-5 md:w-5 text-blue-500/80"}),a.defenseCooldown>0&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500/90 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:a.defenseCooldown})]}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",style:{display:a.defenseCooldown>0?"none":"flex"},children:"S"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(fe,{onClick:()=>ue("flee"),onMouseDown:J=>le({title:"Fugir",description:"Tenta escapar da batalha baseado na sua velocidade vs velocidade do inimigo",stats:[{label:"Chance base",value:"70% + mod. velocidade"},{label:"Falha",value:"Toma dano e perde turno"},{label:"Sucesso",value:"Volta ao hub (andar 1)"},{label:"Tecla",value:"D"}]},J),onMouseUp:re,onMouseLeave:de,onTouchStart:J=>ce({title:"Fugir",description:"Tenta escapar da batalha baseado na sua velocidade vs velocidade do inimigo",stats:[{label:"Chance base",value:"70% + mod. velocidade"},{label:"Falha",value:"Toma dano e perde turno"},{label:"Sucesso",value:"Volta ao hub (andar 1)"}]},J),onTouchEnd:be,disabled:A,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 border-2 border-amber-500/30 bg-amber-500/5 hover:bg-amber-500/10 hover:border-amber-500/50 shadow-lg shadow-amber-500/10 transition-all duration-200 ${ee?"opacity-30 cursor-not-allowed":s.performAction?"opacity-50 animate-pulse":""}`,children:r.jsx(ds,{className:"h-4 w-4 md:h-5 md:w-5 text-amber-500/80"})}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:"D"})]})]})]}),r.jsxs("div",{className:"flex-1 md:max-w-xs md:flex-none",children:[r.jsxs("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center md:text-right",children:["Poes Rpidas",z&&r.jsx("span",{className:"ml-2 text-orange-400 text-xs",children:" Poo usada neste turno"})]}),r.jsx("div",{className:"flex justify-center md:justify-end gap-2",children:g?[1,2,3].map(J=>r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-muted/20 rounded-xl animate-pulse"},J)):h.map(J=>{var Z;const ge=y===J.slot_position,_e=!J.consumable_id,De=W(J.slot_position),Ve=z&&!_e,We=E===J.slot_position,ye=(Z=a.consumables)==null?void 0:Z.find(je=>je.consumable_id===J.consumable_id),Pe=(ye==null?void 0:ye.quantity)||0,Ae=E===J.slot_position&&Pe>0?Math.max(0,Pe-1):Pe,q={title:J.consumable_name||`Slot ${De}`,description:_e?"Slot vazio - Configure no inventrio":Ae===0?"Sem unidades disponveis":z?"Poo j usada neste turno":J.consumable_description||"Poo",stats:_e?[]:[{label:"Efeito",value:`+${J.effect_value}`},{label:"Disponvel",value:`x${Ae}`},{label:"Tecla",value:De},...z?[{label:"Status",value:"Indisponvel neste turno"}]:[]]},X=!_e&&Ae===0;return r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{variant:"ghost",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-2 relative border-2 transition-all duration-200 ${_e?"border-dashed border-muted-foreground/20 bg-transparent hover:bg-muted/10 hover:border-muted-foreground/30":X?"border-red-500/30 bg-red-500/5 opacity-50 cursor-not-allowed":Ve?"border-orange-500/30 bg-orange-500/5 opacity-50 cursor-not-allowed":"border-emerald-500/30 bg-emerald-500/5 hover:bg-emerald-500/10 hover:border-emerald-500/50 shadow-lg shadow-emerald-500/10"} ${ge?"opacity-50":""} ${We?"animate-pulse scale-110":""} ${ee?"opacity-30 cursor-not-allowed":""}`,onClick:()=>V(J.slot_position),onMouseDown:je=>le(q,je),onMouseUp:re,onMouseLeave:de,onTouchStart:je=>ce(q,je),onTouchEnd:be,disabled:I||_e||ge||G||Ve||X||ee,children:[_e?r.jsx($o,{className:"h-4 w-4 md:h-5 md:w-5 text-muted-foreground/40"}):r.jsxs("div",{className:"flex items-center justify-center",children:[L(J),(Ve||X)&&r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx("div",{className:"w-6 h-0.5 bg-red-500 rotate-45 absolute"}),r.jsx("div",{className:"w-6 h-0.5 bg-red-500 -rotate-45 absolute"})]})]}),ge&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/80 rounded-xl",children:r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-2 border-primary border-t-transparent"})}),We&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"text-green-400 font-bold text-xs animate-bounce",children:""})})]}),!_e&&r.jsx("div",{className:`absolute -bottom-1 -left-1 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center border border-background font-semibold ${X?"bg-red-500/90":Ae<5?"bg-orange-500/90":"bg-emerald-500/90"}`,children:Ae}),r.jsx(ze,{variant:"outline",className:`absolute -top-1 -right-1 md:-top-2 md:-right-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center border-muted-foreground/30 ${Ve?"bg-orange-500/20 text-orange-400 border-orange-500/30":X?"bg-red-500/20 text-red-400 border-red-500/30":"bg-background/90"}`,children:De}),Ve&&r.jsx("div",{className:"absolute top-0 left-0 bg-orange-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:""}),X&&r.jsx("div",{className:"absolute top-0 left-0 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:""})]},J.slot_position)})})]})]}),Ne.length>0&&r.jsx(r.Fragment,{children:r.jsxs("div",{className:"border-t border-border/50 pt-2",children:[r.jsx("div",{className:"text-xs font-medium text-muted-foreground/80 mb-2 text-center",children:"Magias"}),r.jsx("div",{className:"flex justify-center gap-2 md:max-w-md md:mx-auto",children:Ne.map((J,ge)=>{const _e=a.mana>=J.mana_cost&&J.current_cooldown===0,De=JY(J),Ve=(ge+1).toString(),We={title:J.name,description:J.description,stats:[{label:"Custo de Mana",value:`${J.mana_cost}`},{label:"Cooldown",value:J.current_cooldown>0?`${J.current_cooldown} turnos`:"Disponvel"},{label:"Dano/Efeito",value:`${J.effect_value}`},{label:"Tecla",value:Ve}]};return r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{onClick:()=>ue("spell",J.id),onMouseDown:ye=>le(We,ye),onMouseUp:re,onMouseLeave:de,onTouchStart:ye=>ce(We,ye),onTouchEnd:be,disabled:I||!_e||G||ee,variant:"ghost",size:"lg",className:`h-12 w-12 md:h-14 md:w-14 rounded-xl p-0 relative border-2 transition-all duration-200 ${_e?"border-violet-500/30 bg-violet-500/5 hover:bg-violet-500/10 hover:border-violet-500/50 shadow-lg shadow-violet-500/10":"border-muted-foreground/10 bg-muted/5 opacity-50 cursor-not-allowed"} ${ee?"opacity-30 cursor-not-allowed":""}`,children:[r.jsx("div",{className:_e?"text-violet-500/80":"text-muted-foreground/50",children:De}),J.current_cooldown>0&&r.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500/90 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background",children:J.current_cooldown}),r.jsx("div",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center border border-background ${_e?"bg-blue-500/90":"bg-muted-foreground/70"}`,children:J.mana_cost})]}),r.jsx(ze,{variant:"outline",className:"absolute -top-1 -left-1 md:-top-2 md:-left-2 h-4 w-4 md:h-5 md:w-5 p-0 text-xs font-medium flex items-center justify-center bg-background/90 border-muted-foreground/30 hidden md:flex",children:Ve})]},J.id)})})]})}),r.jsx("div",{className:"hidden md:block text-center",children:r.jsx("div",{className:"text-xs text-muted-foreground/60",children:ee?"Interface bloqueada - Personagem morto":"Atalhos: A/S/D (Combate)  Q/W/E (Poes)  1/2/3 (Magias)"})})]})}),j&&r.jsx("div",{className:"fixed z-50 pointer-events-none",style:{left:j.position.x,top:j.position.y,transform:"translate(-50%, -100%)"},children:r.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border border-border/50 rounded-lg p-3 shadow-xl max-w-xs",children:[r.jsx("h4",{className:"font-medium text-sm mb-1",children:j.title}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2 leading-relaxed",children:j.description}),j.stats.length>0&&r.jsx("div",{className:"space-y-1",children:j.stats.map((J,ge)=>r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsxs("span",{className:"text-muted-foreground",children:[J.label,":"]}),r.jsx("span",{className:"font-medium",children:J.value})]},ge))})]})})]})}function tK({isOpen:t,onContinue:e,onReturnToHub:s,onOpenAttributeModal:a,rewards:n,leveledUp:i,newLevel:c,hasAttributePoints:u}){const f=Ly();b.useEffect(()=>{if(f){const g=document.createElement("style");return g.textContent=`
        .victory-modal-landscape .scroll-area {
          max-height: calc(90vh - 140px);
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
        }
        .victory-modal-buttons {
          min-height: 24px !important;
          padding: 0.15rem 0.3rem !important;
          font-size: 0.65rem !important;
          font-weight: 600 !important;
          line-height: 1 !important;
        }
        .victory-modal-landscape [data-radix-dialog-content] {
          max-height: 90vh !important;
        }
      `,document.head.appendChild(g),()=>{document.head.removeChild(g)}}},[f]);const h=()=>{console.log("[VictoryModal] Boto Continuar clicado - chamando onContinue"),e()},p=()=>{console.log("[VictoryModal] Boto Voltar ao Hub clicado - chamando onReturnToHub"),s()};return r.jsx(Bk,{children:t&&r.jsx(Rn,{open:t,children:r.jsxs(Zr,{className:`overflow-hidden ${f?"max-w-[98vw] max-h-[98vh] p-2 victory-modal-landscape w-[98vw]":"sm:max-w-[425px]"}`,children:[r.jsxs(Mn,{className:`relative ${f?"pb-2":""}`,children:[!f&&r.jsx(Ts.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"absolute -top-12 left-1/2 -translate-x-1/2 w-24 h-24 bg-yellow-500/20 rounded-full flex items-center justify-center",children:r.jsx(Nr,{className:"h-12 w-12 text-yellow-500"})}),r.jsxs(Ts.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center pt-12"}`,children:[f&&r.jsx(Ts.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(Nr,{className:"h-5 w-5 text-yellow-500"})}),r.jsxs("div",{className:f?"text-left":"text-center",children:[r.jsx(Qr,{className:`font-bold ${f?"text-base":"text-2xl"}`,children:"Vitria!"}),r.jsx(vc,{className:`${f?"text-xs":""}`,children:"Voc derrotou o inimigo e avanou para o prximo andar!"})]})]})]}),r.jsx("div",{className:f?"scroll-area overflow-y-auto max-h-[calc(98vh-100px)]":"",children:r.jsxs(Ts.div,{className:`${f?"py-1 space-y-1":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[r.jsxs("div",{className:`${f?"grid grid-cols-2 gap-1 mb-1":"space-y-4"}`,children:[r.jsxs(Ts.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[r.jsx(jt,{className:`text-yellow-500 ${f?"h-3 w-3":"h-6 w-6"}`}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Experincia"}),r.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",n.xp," XP"]})]})]}),r.jsxs(Ts.div,{className:`flex items-center gap-2 bg-primary/10 rounded-lg ${f?"p-1":"p-3 text-lg"}`,whileHover:{scale:1.02},children:[r.jsx(wa,{className:`text-yellow-400 ${f?"h-3 w-3":"h-6 w-6"}`}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs":""}`,children:"Ouro"}),r.jsxs("div",{className:`font-bold text-primary ${f?"text-xs":"text-2xl"}`,children:["+",Oa(n.gold)," Gold"]})]})]})]}),i&&c&&r.jsxs(Ts.div,{className:`rounded-lg bg-gradient-to-r from-primary/20 to-primary/30 text-center ${f?"p-2 mt-2":"p-4 mt-2"}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,type:"spring"},children:[r.jsxs("div",{className:`flex items-center gap-2 ${f?"justify-start mb-1":"justify-center mb-2"}`,children:[r.jsx(lt,{className:`text-primary ${f?"h-4 w-4":"h-6 w-6"}`}),r.jsxs("div",{className:`font-bold ${f?"text-sm":"text-xl"}`,children:["Nvel ",c,"!"]})]}),r.jsx("div",{className:`opacity-80 ${f?"text-xs mb-1":"text-sm mb-2"}`,children:"Seu personagem evoluiu e ficou mais forte!"}),r.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-sm"}`,children:[r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"HP +10"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Mana +5"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Ataque +2"}),r.jsx("div",{className:`bg-background/50 rounded ${f?"p-1":"p-2"}`,children:"Defesa +1"})]})]}),n.drops.length>0&&r.jsxs(Ts.div,{className:`bg-primary/10 rounded-lg ${f?"mt-2 p-2":"mt-4 p-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:[r.jsxs("h4",{className:`font-semibold flex items-center gap-2 ${f?"mb-1 text-xs":"mb-3"}`,children:[r.jsx(im,{className:f?"h-3 w-3":"h-5 w-5"}),"Itens Obtidos"]}),r.jsx("div",{className:`${f?"grid grid-cols-2 gap-1":"space-y-2"}`,children:n.drops.map((g,x)=>r.jsxs(Ts.div,{className:`flex items-center gap-2 bg-background/50 rounded ${f?"p-1 text-xs":"p-2"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:1+x*.1},children:[r.jsx("span",{className:f?"text-xs":"text-xl",children:""}),r.jsx("span",{className:"flex-1 truncate",children:g.name}),r.jsxs("span",{className:"font-mono flex-shrink-0",children:["x",g.quantity]})]},x))})]})]})}),r.jsx(iR,{className:`flex flex-col gap-1 ${f?"mt-1":"mt-4"}`,children:r.jsxs("div",{className:`w-full ${f?"grid grid-cols-3 gap-1":"flex flex-col gap-2"}`,children:[u&&r.jsxs(fe,{onClick:a,className:`bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white shadow-lg ${f?"victory-modal-buttons text-xs":"w-full"}`,children:[r.jsx(La,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Pts":"Distribuir Pontos de Atributo"]}),r.jsxs(fe,{onClick:p,variant:"outline",className:`items-center justify-center ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[r.jsx(BB,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"":"Voltar ao Hub"]}),r.jsxs(fe,{onClick:h,className:`bg-emerald-500 hover:bg-emerald-600 ${f?"victory-modal-buttons text-xs":"flex-1"}`,children:[r.jsx(mC,{className:`${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),"Continuar"]})]})})]})})})}function sK({isOpen:t,onClose:e,player:s,gameMessage:a=`${s.name} foi derrotado no Andar ${s.floor}...`,highestFloor:n=s.floor,isCharacterDeleted:i=!1,userId:c,onReturnToCharacterSelect:u,onViewCemetery:f}){const h=Rt(),[p,g]=b.useState(!1),[x,y]=b.useState(!1),_=Ly(),j=async()=>{if(!(!c||!s.id))try{g(!0),y(!0);const C=await Zl.saveScore({player_name:s.name,floor:s.floor-1,user_id:c,character_level:s.level,character_gold:s.gold,character_alive:!1});if(C.error)throw new Error(C.error);if(!i){const{error:E}=await at.deleteCharacter(s.id);if(E)throw new Error(E)}me.success("Fim de jogo",{description:"Pontuao salva e personagem deletado permanentemente."}),u()}catch(C){me.error("Erro ao finalizar jogo",{description:C instanceof Error?C.message:"Erro desconhecido"}),console.error("Erro ao finalizar jogo:",C)}finally{g(!1),y(!1)}},N=()=>{f?f():h({to:"/game/cemetery",search:{character:s.id}})},S=()=>{h({to:"/game/ranking"})};return r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Zr,{className:`overflow-hidden ${_?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-md"}`,children:[r.jsx(Mn,{className:`text-center ${_?"pb-2":""}`,children:r.jsxs(Qr,{className:`flex items-center justify-center gap-2 ${_?"text-lg":"text-2xl"}`,children:[r.jsx(Qs,{className:`text-red-500 ${_?"h-5 w-5":"h-8 w-8"}`}),i?"Permadeath - Personagem Perdido":"Fim de Jogo"]})}),r.jsxs("div",{className:`${_?"space-y-2 max-h-[calc(95vh-140px)] overflow-y-auto":"space-y-4"}`,children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`mb-2 ${_?"text-sm":"text-lg"}`,children:a}),r.jsxs("div",{className:`flex items-center justify-center gap-2 mb-2 ${_?"mb-2":"mb-4"}`,children:[r.jsx(Nr,{className:`text-yellow-500 ${_?"h-4 w-4":"h-6 w-6"}`}),r.jsxs("span",{className:`font-bold ${_?"text-lg":"text-2xl"}`,children:["Andar ",s.floor-1]})]}),r.jsxs("p",{className:`text-muted-foreground ${_?"text-xs":"text-sm"}`,children:["Seu recorde atual: Andar ",n]})]}),r.jsxs("div",{className:_?"grid grid-cols-2 gap-2":"space-y-3",children:[r.jsxs("div",{className:`bg-muted rounded-lg ${_?"p-2":"p-4"}`,children:[r.jsx("h3",{className:`font-medium mb-2 ${_?"text-sm":""}`,children:"Estatsticas Finais"}),r.jsxs("div",{className:`grid grid-cols-2 gap-1 ${_?"text-xs":"gap-2 text-sm"}`,children:[r.jsx("div",{children:"Personagem:"}),r.jsx("div",{className:"font-medium truncate",children:s.name}),r.jsx("div",{children:"Andares:"}),r.jsx("div",{className:"font-medium",children:s.floor-1}),r.jsx("div",{children:"HP final:"}),r.jsxs("div",{className:"font-medium",children:[s.hp,"/",s.max_hp]}),r.jsx("div",{children:"Nvel:"}),r.jsx("div",{className:"font-medium",children:s.level}),r.jsx("div",{children:"Gold:"}),r.jsx("div",{className:"font-medium",children:Oa(s.gold)}),r.jsx("div",{children:"XP total:"}),r.jsx("div",{className:"font-medium",children:Oa(s.xp)})]})]}),r.jsxs("div",{className:`bg-red-500/10 border border-red-500/20 rounded-lg ${_?"p-2":"p-4"}`,children:[r.jsxs("div",{className:`flex items-center gap-2 mb-2 ${_?"mb-1":""}`,children:[r.jsx(_C,{className:`text-red-400 ${_?"h-3 w-3":"h-5 w-5"}`}),r.jsx("span",{className:`font-medium text-red-400 ${_?"text-xs":"text-sm"}`,children:"Aviso de Permadeath"})]}),r.jsx("p",{className:`text-red-400 mb-2 ${_?"text-xs mb-1":"text-sm"}`,children:i?"Este personagem foi permanentemente deletado.":"Este personagem ser permanentemente deletado ao continuar."}),r.jsx("p",{className:"text-red-300 text-xs",children:"Suas estatsticas sero salvas no ranking para comparao."})]})]}),i&&r.jsx("div",{className:`bg-blue-500/10 border border-blue-500/20 rounded-lg ${_?"p-2":"p-3"}`,children:r.jsxs("div",{className:"text-blue-400 text-xs",children:[" ",r.jsx("strong",{children:"Estatsticas da Jornada:"}),r.jsx("br",{}),r.jsxs("div",{className:`mt-1 ${_?"grid grid-cols-2 gap-1":""}`,children:[r.jsxs("div",{children:[" Nvel alcanado: ",s.level]}),r.jsxs("div",{children:[" Andar mais alto: ",s.floor]}),r.jsxs("div",{children:[" Gold acumulado: ",s.gold]}),r.jsxs("div",{children:[" XP total: ",s.xp]})]})]})})]}),r.jsxs("div",{className:`flex gap-2 ${_?"flex-row pt-2":"flex-col pt-4"}`,children:[i&&r.jsxs(fe,{variant:"outline",onClick:N,className:`border-blue-500/30 text-blue-400 hover:bg-blue-500/10 ${_?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[r.jsx(_o,{className:`mr-1 ${_?"h-3 w-3":"h-4 w-4 mr-2"}`}),_?"Cemitrio":"Ver Cemitrio"]}),r.jsx(fe,{variant:"destructive",onClick:j,disabled:p||x,className:`${_?"flex-1 text-xs h-8":"w-full"}`,children:p||x?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("div",{className:`animate-spin rounded-full border-t-2 border-b-2 border-white ${_?"h-3 w-3":"h-4 w-4"}`}),"Finalizando..."]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Qs,{className:`${_?"h-3 w-3":"h-4 w-4"}`}),_?"Aceitar Derrota":i?"Criar Novo Personagem":"Aceitar Derrota e Salvar"]})}),r.jsxs(fe,{variant:"outline",onClick:S,className:`${_?"flex-1 text-xs h-8":"w-full"}`,disabled:p||x,children:[r.jsx(Nr,{className:`mr-1 ${_?"h-3 w-3":"h-4 w-4 mr-2"}`}),_?"Ranking":"Ver Ranking"]})]})]})})}class lE{static async getSpecialEventForFloor(e){try{console.log(`[SpecialEventService] Buscando evento especial para o andar ${e}`);const{data:s,error:a}=await we.rpc("get_special_event_for_floor",{p_floor:e}).single();if(a)throw console.error(`[SpecialEventService] Erro ao buscar evento para andar ${e}:`,a.message),a;if(!s)throw console.error(`[SpecialEventService] Nenhum evento retornado para andar ${e}`),new Error("Nenhum evento encontrado para este andar");const n=s;return console.log(`[SpecialEventService] Evento obtido para andar ${e}: ${n.name}`),{data:n,error:null,success:!0}}catch(s){return console.error(`[SpecialEventService] Falha ao buscar evento para andar ${e}:`,s instanceof Error?s.message:s),{data:null,error:s instanceof Error?s.message:"Erro ao buscar evento especial",success:!1}}}static async processSpecialEvent(e,s){try{console.log(`[SpecialEventService] Processando evento ${s} para personagem ${e}`);const{data:a,error:n}=await we.rpc("process_special_event",{p_character_id:e,p_event_id:s}).single();if(n)throw console.error("[SpecialEventService] Erro ao processar evento:",n.message),n;if(!a)throw new Error("Resposta invlida do servidor");const i=a;return console.log("[SpecialEventService] Evento processado com sucesso:",i),{data:i,error:null,success:!0}}catch(a){return console.error("[SpecialEventService] Falha ao processar evento:",a instanceof Error?a.message:a),{data:null,error:a instanceof Error?a.message:"Erro ao processar evento especial",success:!1}}}static shouldGenerateSpecialEvent(e){return e==="event"?Math.random()<.7:!1}static getEventIcon(e){switch(e){case"bonfire":return"";case"treasure_chest":return"";case"magic_fountain":return"";default:return""}}static getEventColor(e){switch(e){case"bonfire":return"text-orange-500";case"treasure_chest":return"text-yellow-500";case"magic_fountain":return"text-blue-500";default:return"text-purple-500"}}}function aK(){const{gameState:t,performAction:e,loading:s}=Mc(),{currentSpecialEvent:a,player:n}=t;if(!a)return null;const i=()=>{e("interact_event")},c=lE.getEventIcon(a.type),u=lE.getEventColor(a.type),f=Math.ceil(n.max_hp*a.hp_restore_percent/100),h=Math.ceil(n.max_mana*a.mana_restore_percent/100),p=a.gold_reward_max>0?`${a.gold_reward_min}-${a.gold_reward_max}`:"0";return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-4xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:`text-8xl mb-4 ${u}`,children:c}),r.jsx("h1",{className:"text-4xl font-bold mb-2",children:a.name}),r.jsxs("p",{className:"text-xl text-muted-foreground",children:["Andar ",n.floor]})]}),r.jsxs(Oe,{className:"overflow-hidden border-2 border-primary/20 shadow-xl",children:[r.jsx(ht,{className:"bg-primary/10 text-center",children:r.jsx(xt,{className:"text-2xl",children:"Evento Especial"})}),r.jsxs(He,{className:"p-8",children:[r.jsx("div",{className:"text-center mb-8",children:r.jsx("p",{className:"text-lg leading-relaxed",children:a.description})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[a.hp_restore_percent>0&&r.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-green-500 mb-2",children:""}),r.jsx("div",{className:"font-semibold text-green-600",children:"Restaurao de HP"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["At ",f," HP (",a.hp_restore_percent,"%)"]})]}),a.mana_restore_percent>0&&r.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-blue-500 mb-2",children:""}),r.jsx("div",{className:"font-semibold text-blue-600",children:"Restaurao de Mana"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["At ",h," Mana (",a.mana_restore_percent,"%)"]})]}),a.gold_reward_max>0&&r.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"text-2xl text-yellow-500 mb-2",children:""}),r.jsx("div",{className:"font-semibold text-yellow-600",children:"Recompensa de Gold"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[p," Gold"]})]})]}),r.jsxs("div",{className:"bg-card border rounded-lg p-4 mb-8",children:[r.jsx("h3",{className:"font-semibold mb-3 text-center",children:"Status Atual"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-red-500",children:""}),r.jsx("div",{className:"text-sm font-medium",children:"HP"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.hp,"/",n.max_hp]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-blue-500",children:""}),r.jsx("div",{className:"text-sm font-medium",children:"Mana"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.mana,"/",n.max_mana]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-yellow-500",children:""}),r.jsx("div",{className:"text-sm font-medium",children:"Gold"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:n.gold})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-2xl text-purple-500",children:""}),r.jsx("div",{className:"text-sm font-medium",children:"Andar"}),r.jsx("div",{className:"text-sm text-muted-foreground",children:n.floor})]})]})]}),r.jsx("div",{className:"text-center",children:r.jsx(fe,{onClick:i,disabled:s.performAction,size:"lg",className:"px-8 py-3 text-lg",children:s.performAction?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-current mr-2"}),"Processando..."]}):r.jsxs(r.Fragment,{children:[c," Interagir"]})})})]})]}),t.gameMessage&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:r.jsx("p",{className:"text-lg",children:t.gameMessage})})})]})})}const rK=({isOpen:t,onClose:e,character:s,onAttributesUpdated:a})=>{const[n,i]=b.useState({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0}),[c,u]=b.useState(!1),f=Ly(),h=Object.values(n).reduce((N,S)=>N+S,0),p=(s.attribute_points||0)-h,g=N=>{p>0&&i(S=>({...S,[N]:S[N]+1}))},x=N=>{n[N]>0&&i(S=>({...S,[N]:S[N]-1}))},y=()=>{i({strength:0,dexterity:0,intelligence:0,wisdom:0,vitality:0,luck:0})},_=async()=>{var N,S;if(h!==0){u(!0);try{const C=await at.distributeAttributePoints(s.id,n);if(C.success&&((N=C.data)!=null&&N.new_stats)){if(me.success("Pontos distribudos com sucesso!"),a){const E={...s,...C.data.new_stats,attribute_points:C.data.new_stats.attribute_points};a(E)}y(),e()}else me.error("Erro ao distribuir pontos",{description:C.error||((S=C.data)==null?void 0:S.message)})}catch(C){console.error("Erro ao distribuir pontos:",C),me.error("Erro ao distribuir pontos")}finally{u(!1)}}},j={strength:{label:"Fora",icon:La,color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/20",benefit:"+2 Ataque + 0.5% Dano Crtico"},dexterity:{label:"Destreza",icon:Ct,color:"text-green-400",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",benefit:"+1.5 Velocidade + 0.3% Crtico"},intelligence:{label:"Inteligncia",icon:lt,color:"text-purple-400",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20",benefit:"+5 Mana + 10% Dano Mgico"},wisdom:{label:"Sabedoria",icon:_o,color:"text-blue-400",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20",benefit:"+1 Def + 5% Magia + 12% Cura"},vitality:{label:"Vitalidade",icon:cs,color:"text-pink-400",bgColor:"bg-pink-500/10",borderColor:"border-pink-500/20",benefit:"+8 HP + 1 Defesa"},luck:{label:"Sorte",icon:jt,color:"text-yellow-400",bgColor:"bg-yellow-500/10",borderColor:"border-yellow-500/20",benefit:"+0.5% Crtico + 1% Dano Crtico"}};return!t||!s.attribute_points||s.attribute_points===0?null:r.jsx(Rn,{open:t,onOpenChange:e,children:r.jsxs(Zr,{className:`overflow-hidden ${f?"max-w-[95vw] max-h-[95vh] w-[95vw] p-3":"sm:max-w-2xl max-h-[90vh] overflow-y-auto"}`,children:[r.jsxs(Mn,{className:`${f?"pb-2":"text-center"}`,children:[!f&&r.jsx(Ts.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"mx-auto w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mb-4",children:r.jsx(jt,{className:"h-8 w-8 text-yellow-500"})}),r.jsxs(Ts.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:`flex items-center gap-3 ${f?"justify-start":"flex-col text-center"}`,children:[f&&r.jsx(Ts.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",duration:.5},className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx(jt,{className:"h-5 w-5 text-yellow-500"})}),r.jsxs("div",{className:f?"text-left flex-1":"text-center",children:[r.jsx(Qr,{className:`font-bold ${f?"text-lg":"text-xl"}`,children:"Distribuir Pontos de Atributo"}),r.jsx(vc,{asChild:!0,children:r.jsxs("div",{className:`${f?"flex items-center justify-between mt-1":"text-center space-y-3"}`,children:[r.jsxs(ze,{variant:"outline",className:`bg-yellow-500/10 border-yellow-500/30 text-yellow-400 ${f?"px-2 py-1 text-xs":"px-3 py-1"}`,children:[r.jsx(jt,{className:`mr-2 ${f?"h-3 w-3":"h-4 w-4"}`}),p," pontos"]}),!f&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"Distribua seus pontos estrategicamente para fortalecer seu personagem na torre."})]})})]})]})]}),r.jsx("div",{className:`${f?"overflow-y-auto max-h-[calc(95vh-120px)]":""}`,children:r.jsxs(Ts.div,{className:`${f?"py-2":"space-y-4 py-4"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[r.jsx("div",{className:`${f?"grid grid-cols-2 gap-2 mb-3":"space-y-3"}`,children:Object.entries(j).map(([N,S])=>{const C=N,E=s[C]||0,M=S.icon;return r.jsxs(Ts.div,{className:`flex items-center gap-2 rounded-lg border ${S.bgColor} ${S.borderColor} ${f?"p-2 text-xs":"gap-3 p-3"}`,whileHover:{scale:1.01},children:[r.jsxs("div",{className:`flex items-center gap-2 flex-1 ${f?"min-w-0":"gap-3"}`,children:[r.jsx(M,{className:`flex-shrink-0 ${S.color} ${f?"h-4 w-4":"h-5 w-5"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:`font-semibold ${f?"text-xs truncate":"text-sm"}`,children:S.label}),!f&&r.jsx("div",{className:"text-xs text-muted-foreground",children:S.benefit})]})]}),r.jsx("div",{className:`text-center ${f?"min-w-[40px]":"min-w-[60px]"}`,children:r.jsxs("div",{className:`font-bold ${f?"text-xs":"text-sm"}`,children:[E,n[C]>0&&r.jsxs("span",{className:"text-green-400 ml-1",children:["+",n[C]]})]})}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fe,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>x(C),disabled:n[C]===0,children:r.jsx(bC,{className:f?"h-3 w-3":"h-4 w-4"})}),r.jsx("div",{className:`text-center font-mono ${f?"w-6 text-xs":"w-8 text-sm"}`,children:n[C]}),r.jsx(fe,{size:"icon",variant:"ghost",className:`rounded-full ${f?"h-6 w-6":"h-8 w-8"}`,onClick:()=>g(C),disabled:p===0,children:r.jsx($o,{className:f?"h-3 w-3":"h-4 w-4"})})]})]},C)})}),h>0&&r.jsxs(Ts.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:`bg-primary/5 border border-primary/20 rounded-lg ${f?"p-2 mt-2":"p-3"}`,children:[r.jsxs("div",{className:`font-medium mb-2 flex items-center gap-2 ${f?"text-xs":"text-sm"}`,children:[r.jsx(ea,{className:`text-primary ${f?"h-3 w-3":"h-4 w-4"}`}),"Preview dos Melhoramentos"]}),r.jsxs("div",{className:`grid gap-1 ${f?"grid-cols-4 text-xs":"grid-cols-2 gap-2 text-xs"}`,children:[n.vitality>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HP:"}),r.jsxs("span",{className:"text-green-400",children:["+",n.vitality*8]})]}),n.intelligence>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Mana:"}),r.jsxs("span",{className:"text-blue-400",children:["+",n.intelligence*5]})]}),n.strength>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ataque:"}),r.jsxs("span",{className:"text-red-400",children:["+",n.strength*2]})]}),n.dexterity>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Velocidade:"}),r.jsxs("span",{className:"text-green-400",children:["+",Math.floor(n.dexterity*1.5)]})]})]})]})]})}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsx(fe,{variant:"outline",onClick:e,className:`flex-1 ${f?"text-xs h-8":""}`,children:"Cancelar"}),h>0&&r.jsxs(fe,{variant:"outline",onClick:y,className:`flex-1 ${f?"text-xs h-8":""}`,children:[r.jsx(yC,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?"Reset":"Resetar"]}),r.jsxs(fe,{onClick:_,disabled:c||h===0,className:`flex-1 bg-emerald-500 hover:bg-emerald-600 ${f?"text-xs h-8":""}`,children:[c?r.jsx("div",{className:`animate-spin rounded-full border-2 border-white border-t-transparent mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}):r.jsx(hb,{className:`mr-1 ${f?"h-3 w-3":"h-4 w-4 mr-2"}`}),f?`OK (${h})`:`Confirmar (${h})`]})]})]})})};function nK({currentFloor:t,playerLevel:e}){he.useEffect(()=>{console.log("[BattleHeader] Props recebidas:"),console.log("- currentFloor:",t==null?void 0:t.description,`(tipo: ${t==null?void 0:t.type})`),console.log("- playerLevel:",e)},[t,e]);const s=f=>{switch(f){case"boss":return"";case"elite":return"";case"event":return"";default:return""}},a=t.floorNumber||1,n=Math.ceil(a/20),i=(a-1)%20+1,c=[5,10,15,20].includes(i),u=n>1;return r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2 flex-wrap",children:[r.jsxs("h2",{className:"text-2xl font-bold text-primary",children:[s(t.type)," ",t.description]}),r.jsxs(ze,{variant:"outline",className:"bg-background/50",children:[r.jsx(eB,{className:"h-3 w-3 mr-1"}),"Andar ",a]}),u&&r.jsxs(ze,{className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:[r.jsx(Ei,{className:"h-3 w-3 mr-1"}),"Tier ",n]}),c&&r.jsxs(ze,{className:"bg-red-500/20 text-red-400 border-red-500/30 animate-pulse",children:[r.jsx(ea,{className:"h-3 w-3 mr-1"}),"BOSS"]}),t.isCheckpoint&&r.jsxs(ze,{className:"bg-primary/20 text-primary",children:[r.jsx(jt,{className:"h-3 w-3 mr-1"}),"Checkpoint"]})]}),u&&r.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:r.jsxs("span",{className:"bg-purple-500/10 px-2 py-1 rounded border border-purple-500/20",children:["Sistema Cclico: Posio ",i,"/20 no Ciclo ",n,c&&"  Monstros Escalados"]})}),e<t.minLevel&&r.jsxs("div",{className:"text-yellow-500 text-sm",children:[" Nvel recomendado: ",t.minLevel]}),u&&r.jsx("div",{className:"text-sm text-purple-400 mt-2",children:"Os monstros foram fortalecidos pelo poder ancestral da torre!"})]})})}var _p="Popover",[JR,IW]=nr(_p,[Tc]),Ud=Tc(),[oK,Vo]=JR(_p),eM=t=>{const{__scopePopover:e,children:s,open:a,defaultOpen:n,onOpenChange:i,modal:c=!1}=t,u=Ud(e),f=b.useRef(null),[h,p]=b.useState(!1),[g,x]=To({prop:a,defaultProp:n??!1,onChange:i,caller:_p});return r.jsx(wy,{...u,children:r.jsx(oK,{scope:e,contentId:Fr(),triggerRef:f,open:g,onOpenChange:x,onOpenToggle:b.useCallback(()=>x(y=>!y),[x]),hasCustomAnchor:h,onCustomAnchorAdd:b.useCallback(()=>p(!0),[]),onCustomAnchorRemove:b.useCallback(()=>p(!1),[]),modal:c,children:s})})};eM.displayName=_p;var tM="PopoverAnchor",iK=b.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Vo(tM,s),i=Ud(s),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=n;return b.useEffect(()=>(c(),()=>u()),[c,u]),r.jsx(dp,{...i,...a,ref:e})});iK.displayName=tM;var sM="PopoverTrigger",aM=b.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Vo(sM,s),i=Ud(s),c=wt(e,n.triggerRef),u=r.jsx(Ke.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":lM(n.open),...a,ref:c,onClick:Ge(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?u:r.jsx(dp,{asChild:!0,...i,children:u})});aM.displayName=sM;var By="PopoverPortal",[lK,cK]=JR(By,{forceMount:void 0}),rM=t=>{const{__scopePopover:e,forceMount:s,children:a,container:n}=t,i=Vo(By,e);return r.jsx(lK,{scope:e,forceMount:s,children:r.jsx(Ba,{present:s||i.open,children:r.jsx(Fm,{asChild:!0,container:n,children:a})})})};rM.displayName=By;var yc="PopoverContent",nM=b.forwardRef((t,e)=>{const s=cK(yc,t.__scopePopover),{forceMount:a=s.forceMount,...n}=t,i=Vo(yc,t.__scopePopover);return r.jsx(Ba,{present:a||i.open,children:i.modal?r.jsx(dK,{...n,ref:e}):r.jsx(fK,{...n,ref:e})})});nM.displayName=yc;var uK=Ci("PopoverContent.RemoveScroll"),dK=b.forwardRef((t,e)=>{const s=Vo(yc,t.__scopePopover),a=b.useRef(null),n=wt(e,a),i=b.useRef(!1);return b.useEffect(()=>{const c=a.current;if(c)return vb(c)},[]),r.jsx(Gm,{as:uK,allowPinchZoom:!0,children:r.jsx(oM,{...t,ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ge(t.onCloseAutoFocus,c=>{var u;c.preventDefault(),i.current||(u=s.triggerRef.current)==null||u.focus()}),onPointerDownOutside:Ge(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;i.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:Ge(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),fK=b.forwardRef((t,e)=>{const s=Vo(yc,t.__scopePopover),a=b.useRef(!1),n=b.useRef(!1);return r.jsx(oM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var c,u;(c=t.onCloseAutoFocus)==null||c.call(t,i),i.defaultPrevented||(a.current||(u=s.triggerRef.current)==null||u.focus(),i.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:i=>{var f,h;(f=t.onInteractOutside)==null||f.call(t,i),i.defaultPrevented||(a.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const c=i.target;((h=s.triggerRef.current)==null?void 0:h.contains(c))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),oM=b.forwardRef((t,e)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,...g}=t,x=Vo(yc,s),y=Ud(s);return xb(),r.jsx(zm,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:i,children:r.jsx(Dd,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:p,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onDismiss:()=>x.onOpenChange(!1),children:r.jsx(_y,{"data-state":lM(x.open),role:"dialog",id:x.contentId,...y,...g,ref:e,style:{...g.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),iM="PopoverClose",hK=b.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Vo(iM,s);return r.jsx(Ke.button,{type:"button",...a,ref:e,onClick:Ge(t.onClick,()=>n.onOpenChange(!1))})});hK.displayName=iM;var mK="PopoverArrow",pK=b.forwardRef((t,e)=>{const{__scopePopover:s,...a}=t,n=Ud(s);return r.jsx(jy,{...n,...a,ref:e})});pK.displayName=mK;function lM(t){return t?"open":"closed"}var gK=eM,xK=aM,vK=rM,cM=nM;const bK=gK,yK=xK,uM=b.forwardRef(({className:t,align:e="center",sideOffset:s=4,...a},n)=>r.jsx(vK,{children:r.jsx(cM,{ref:n,align:e,sideOffset:s,className:Ie("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...a})}));uM.displayName=cM.displayName;var jp="Checkbox",[wK,VW]=nr(jp),[_K,Iy]=wK(jp);function jK(t){const{__scopeCheckbox:e,checked:s,children:a,defaultChecked:n,disabled:i,form:c,name:u,onCheckedChange:f,required:h,value:p="on",internal_do_not_use_render:g}=t,[x,y]=To({prop:s,defaultProp:n??!1,onChange:f,caller:jp}),[_,j]=b.useState(null),[N,S]=b.useState(null),C=b.useRef(!1),E=_?!!c||!!_.closest("form"):!0,M={checked:x,disabled:i,setChecked:y,control:_,setControl:j,name:u,form:c,value:p,hasConsumerStoppedPropagationRef:C,required:h,defaultChecked:No(n)?!1:n,isFormControl:E,bubbleInput:N,setBubbleInput:S};return r.jsx(_K,{scope:e,...M,children:NK(g)?g(M):a})}var dM="CheckboxTrigger",fM=b.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:s,...a},n)=>{const{control:i,value:c,disabled:u,checked:f,required:h,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:x,isFormControl:y,bubbleInput:_}=Iy(dM,t),j=wt(n,p),N=b.useRef(f);return b.useEffect(()=>{const S=i==null?void 0:i.form;if(S){const C=()=>g(N.current);return S.addEventListener("reset",C),()=>S.removeEventListener("reset",C)}},[i,g]),r.jsx(Ke.button,{type:"button",role:"checkbox","aria-checked":No(f)?"mixed":f,"aria-required":h,"data-state":xM(f),"data-disabled":u?"":void 0,disabled:u,value:c,...a,ref:j,onKeyDown:Ge(e,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:Ge(s,S=>{g(C=>No(C)?!0:!C),_&&y&&(x.current=S.isPropagationStopped(),x.current||S.stopPropagation())})})});fM.displayName=dM;var Vy=b.forwardRef((t,e)=>{const{__scopeCheckbox:s,name:a,checked:n,defaultChecked:i,required:c,disabled:u,value:f,onCheckedChange:h,form:p,...g}=t;return r.jsx(jK,{__scopeCheckbox:s,checked:n,defaultChecked:i,disabled:u,required:c,onCheckedChange:h,name:a,form:p,value:f,internal_do_not_use_render:({isFormControl:x})=>r.jsxs(r.Fragment,{children:[r.jsx(fM,{...g,ref:e,__scopeCheckbox:s}),x&&r.jsx(gM,{__scopeCheckbox:s})]})})});Vy.displayName=jp;var hM="CheckboxIndicator",mM=b.forwardRef((t,e)=>{const{__scopeCheckbox:s,forceMount:a,...n}=t,i=Iy(hM,s);return r.jsx(Ba,{present:a||No(i.checked)||i.checked===!0,children:r.jsx(Ke.span,{"data-state":xM(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...t.style}})})});mM.displayName=hM;var pM="CheckboxBubbleInput",gM=b.forwardRef(({__scopeCheckbox:t,...e},s)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:c,required:u,disabled:f,name:h,value:p,form:g,bubbleInput:x,setBubbleInput:y}=Iy(pM,t),_=wt(s,y),j=XT(i),N=LT(a);b.useEffect(()=>{const C=x;if(!C)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set,P=!n.current;if(j!==i&&R){const $=new Event("click",{bubbles:P});C.indeterminate=No(i),R.call(C,No(i)?!1:i),C.dispatchEvent($)}},[x,j,i,n]);const S=b.useRef(No(i)?!1:i);return r.jsx(Ke.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??S.current,required:u,disabled:f,name:h,value:p,form:g,...e,tabIndex:-1,ref:_,style:{...e.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});gM.displayName=pM;function NK(t){return typeof t=="function"}function No(t){return t==="indeterminate"}function xM(t){return No(t)?"indeterminate":t?"checked":"unchecked"}const vM=b.forwardRef(({className:t,...e},s)=>r.jsx(Vy,{ref:s,className:Ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:r.jsx(mM,{className:Ie("flex items-center justify-center text-current"),children:r.jsx(fb,{className:"h-4 w-4"})})}));vM.displayName=Vy.displayName;function SK({gameLog:t}){const e=b.useRef(null),[s,a]=b.useState({system:!0,battle:!0,lore:!0,skill_xp:!0,level_up:!0,equipment:!0,enemy_action:!0,player_action:!0,damage:!0,healing:!0});b.useEffect(()=>{if(e.current){const g=e.current.querySelector("[data-radix-scroll-area-viewport]");g&&(g.scrollTop=g.scrollHeight)}},[t]);const n=(g,x)=>{a(y=>({...y,[g]:x}))},i=g=>{a({system:g,battle:g,lore:g,skill_xp:g,level_up:g,equipment:g,enemy_action:g,player_action:g,damage:g,healing:g})},c=t.filter(g=>s[g.type]),u=g=>{switch(g){case"system":return"text-blue-400";case"battle":return"text-foreground";case"lore":return"text-purple-400 italic";case"skill_xp":return"text-green-400";case"level_up":return"text-yellow-400 font-semibold";case"equipment":return"text-orange-400";case"enemy_action":return"text-red-400";case"player_action":return"text-blue-400";case"damage":return"text-red-300";case"healing":return"text-green-300";default:return"text-foreground"}},f=g=>{switch(g){case"enemy_action":return r.jsx(kt,{className:"h-3 w-3 text-red-400 mr-2"});case"player_action":return r.jsx(vt,{className:"h-3 w-3 text-blue-400 mr-2"});case"damage":return r.jsx(Ct,{className:"h-3 w-3 text-red-300 mr-2"});case"healing":return r.jsx(lt,{className:"h-3 w-3 text-green-300 mr-2"});case"level_up":return r.jsx("span",{className:"mr-2",children:""});case"equipment":return r.jsx("span",{className:"mr-2",children:""});case"skill_xp":return r.jsx("span",{className:"mr-2",children:""});case"lore":return r.jsx("span",{className:"mr-2",children:""});default:return null}},h=g=>{switch(g){case"system":return"Sistema";case"battle":return"Batalha";case"lore":return"Histria";case"skill_xp":return"XP de Habilidade";case"level_up":return"Level Up";case"equipment":return"Equipamentos";case"enemy_action":return"Aes do Inimigo";case"player_action":return"Aes do Jogador";case"damage":return"Dano";case"healing":return"Cura";default:return g}},p=g=>{let x=g.text;if(x.includes("causou")&&x.includes("de dano")){const y=x.match(/(\d+)\s+de dano/);if(y){const _=y[1];x=x.replace(`${_} de dano`,`**${_}** de dano`)}}if(x.includes("recuperou")&&x.includes("HP")){const y=x.match(/(\d+)\s+HP/);if(y){const _=y[1];x=x.replace(`${_} HP`,`**${_}** HP`)}}return x};return r.jsxs(Oe,{className:"mt-6",children:[r.jsxs(ht,{className:"pb-2 flex flex-row items-center justify-between",children:[r.jsxs(xt,{className:"text-lg flex items-center gap-2",children:[r.jsx(GN,{className:"h-5 w-5"}),"Log de Batalha"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.length,"/",t.length]}),r.jsxs(bK,{children:[r.jsx(yK,{asChild:!0,children:r.jsx(fe,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:r.jsx(yd,{className:"h-4 w-4"})})}),r.jsx(uM,{className:"w-80",align:"end",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium",children:"Filtros do Log"}),r.jsxs("div",{className:"flex gap-1",children:[r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>i(!0),className:"h-6 px-2 text-xs",children:[r.jsx(_o,{className:"h-3 w-3 mr-1"}),"Todos"]}),r.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-6 px-2 text-xs",children:[r.jsx(EB,{className:"h-3 w-3 mr-1"}),"Nenhum"]})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(s).map(([g,x])=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(vM,{id:g,checked:x,onCheckedChange:y=>n(g,!!y)}),r.jsx("label",{htmlFor:g,className:`text-xs font-medium cursor-pointer ${u(g)}`,children:h(g)})]},g))})]})})]})]})]}),r.jsx(He,{children:r.jsx(Ql,{ref:e,className:"h-56 rounded border p-3 bg-card/50 backdrop-blur-sm",children:c.length===0?r.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:r.jsxs("div",{className:"text-center",children:[r.jsx(GN,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:t.length===0?"Nenhum evento ainda":"Nenhum evento corresponde aos filtros"})]})}):r.jsx("div",{className:"space-y-2",children:c.map((g,x)=>r.jsxs("div",{className:`flex items-start text-sm leading-relaxed ${u(g.type)} transition-all duration-200 hover:bg-muted/20 rounded p-2 -m-2`,children:[f(g.type),r.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:p(g).replace(/\*\*(.+?)\*\*/g,'<strong class="text-yellow-300">$1</strong>')}}),r.jsx("span",{className:"text-xs text-muted-foreground/60 ml-2 flex-shrink-0",children:new Date().toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]},`${x}-${g.text.substring(0,20)}`))})})})]})}const EK=t=>{switch(t.effect_type){case"damage":return r.jsx(qm,{className:"w-3 h-3"});case"heal":return r.jsx(cs,{className:"w-3 h-3"});case"buff":return r.jsx(lt,{className:"w-3 h-3"});case"debuff":return r.jsx(wC,{className:"w-3 h-3"});default:return r.jsx(Ct,{className:"w-3 h-3"})}},CK=t=>{switch(t.effect_type){case"damage":return"bg-red-500/20 hover:bg-red-500/30 border-red-500/50";case"heal":return"bg-green-500/20 hover:bg-green-500/30 border-green-500/50";case"buff":return"bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50";case"debuff":return"bg-purple-500/20 hover:bg-purple-500/30 border-purple-500/50";default:return"bg-slate-500/20 hover:bg-slate-500/30 border-slate-500/50"}};function cE({handleAction:t,isPlayerTurn:e,loading:s,player:a,onPlayerStatsUpdate:n,onPlayerConsumablesUpdate:i}){var g;const[c,u]=b.useState([]),f=((g=a.spells)==null?void 0:g.slice(0,3))||[];b.useEffect(()=>{(async()=>{if(!a.consumables)return;const y=a.consumables.filter(_=>{var j;return((j=_.consumable)==null?void 0:j.type)==="potion"&&_.quantity>0}).slice(0,3).map(_=>({id:_.id,consumable_id:_.consumable_id,consumable:{id:_.consumable.id,name:_.consumable.name,type:_.consumable.type,effect_value:_.consumable.effect_value},quantity:_.quantity}));u(y)})()},[a.consumables]);const h=async x=>{if(!(!e||s.performAction||a.potionUsedThisTurn))try{if((await zt.consumeItem(a.id,x.consumable_id,a)).success){const _=x.consumable.effect_value,j=Math.min(a.max_hp,a.hp+_),N=Math.min(a.max_mana,a.mana);n(j,N);const S=a.consumables.map(C=>C.consumable_id===x.consumable_id?{...C,quantity:C.quantity-1}:C).filter(C=>C.quantity>0);i(S)}}catch(y){console.error("Erro ao usar poo:",y)}},p=!e||s.performAction;return r.jsxs("div",{className:"quick-action-panel flex flex-col gap-1 p-2 bg-slate-900/40 rounded-lg border border-slate-700/50 w-16 shadow-lg",children:[r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"relative",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>t("attack"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-red-500/20 hover:bg-red-500/30 border-red-500/50 text-red-400 transition-all duration-150",title:"Atacar (A)",children:r.jsx(kt,{className:"w-4 h-4"})}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"A"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t("defend"),disabled:p||a.defenseCooldown>0,className:`quick-action-button w-12 h-12 p-0 bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/50 text-blue-400 transition-all duration-150 relative ${a.defenseCooldown>0?"opacity-50":""}`,title:`Defender (S)${a.defenseCooldown>0?` - Cooldown: ${a.defenseCooldown}`:""}`,children:[r.jsx(vt,{className:"w-4 h-4"}),a.defenseCooldown>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:a.defenseCooldown})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"S"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(fe,{variant:"outline",size:"sm",onClick:()=>t("flee"),disabled:p,className:"quick-action-button w-12 h-12 p-0 bg-yellow-500/20 hover:bg-yellow-500/30 border-yellow-500/50 text-yellow-400 transition-all duration-150",title:"Fugir (D)",children:r.jsx(ds,{className:"w-4 h-4"})}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:"D"})]})]}),r.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),r.jsx("div",{className:"flex flex-col gap-1",children:f.map((x,y)=>{const _=a.mana>=x.mana_cost&&x.current_cooldown===0;return r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>t("spell",x.id),disabled:p||!_,className:`quick-action-button w-12 h-12 p-0 ${CK(x)} relative transition-all duration-150 ${_?"":"opacity-50"}`,title:`${x.name} (${1+y}) - ${x.mana_cost} Mana${x.current_cooldown>0?` - Cooldown: ${x.current_cooldown}`:a.mana<x.mana_cost?" - Mana insuficiente":""}`,children:[EK(x),x.current_cooldown>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.current_cooldown}),r.jsx("span",{className:`absolute -bottom-1 -right-1 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center ${a.mana>=x.mana_cost?"bg-blue-600":"bg-red-600"}`,children:x.mana_cost})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:1+y})]},x.id)})}),c.length>0&&r.jsx("div",{className:"h-px bg-slate-700/50 my-1"}),r.jsx("div",{className:"flex flex-col gap-1",children:c.map((x,y)=>r.jsxs("div",{className:"relative",children:[r.jsxs(fe,{variant:"outline",size:"sm",onClick:()=>h(x),disabled:p||a.potionUsedThisTurn,className:`quick-action-button w-12 h-12 p-0 bg-green-500/20 hover:bg-green-500/30 border-green-500/50 text-green-400 relative transition-all duration-150 ${a.potionUsedThisTurn?"opacity-50":""}`,title:`${x.consumable.name} (${["Q","W","E"][y]}) - Cura ${x.consumable.effect_value} HP${a.potionUsedThisTurn?" - J usou poo neste turno":""}`,children:[r.jsx(cs,{className:"w-4 h-4"}),r.jsx("span",{className:"absolute -bottom-1 -right-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:x.quantity}),a.potionUsedThisTurn&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-orange-500/30 rounded-lg",children:r.jsx("span",{className:"text-orange-400 text-xs font-bold",children:""})})]}),r.jsx("span",{className:"absolute -top-1 -left-1 bg-slate-800 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center border border-slate-600",children:["Q","W","E"][y]})]},x.id))})]})}const AK=({isVisible:t,isSuccess:e,playerName:s,enemyName:a,onComplete:n})=>{const[i,c]=b.useState(!1),[u,f]=b.useState(0);if(b.useEffect(()=>(c(!0),()=>c(!1)),[]),b.useEffect(()=>{if(!t)return;console.log(`[FleeOverlay]  Overlay ativado - Sucesso: ${e}, Jogador: ${s}, Inimigo: ${a}`);const g=setInterval(()=>{f(y=>Math.min(y+(e?2.5:3.3),100))},50),x=setTimeout(()=>{console.log("[FleeOverlay]  Tempo esgotado - Chamando onComplete"),n()},e?3e3:2500);return()=>{clearInterval(g),clearTimeout(x)}},[t,e,s,a,n]),!i||!t)return null;const p=e?{emoji:"",title:"Fuga Bem-Sucedida!",subtitle:"Redirecionando para o hub...",description:a?`${s} conseguiu fugir de ${a}!`:`${s} conseguiu escapar!`,bgColor:"bg-gradient-to-r from-green-500/20 via-emerald-500/20 to-teal-500/20",borderColor:"border-green-500/30",textColor:"text-green-400",accentColor:"border-green-400"}:{emoji:"",title:"Fuga Falhou!",subtitle:"Prepare-se para o contra-ataque...",description:a?`${a} impediu a fuga de ${s}!`:`O inimigo impediu a fuga de ${s}!`,bgColor:"bg-gradient-to-r from-red-500/20 via-orange-500/20 to-yellow-500/20",borderColor:"border-red-500/30",textColor:"text-red-400",accentColor:"border-red-400"};return r.jsxs("div",{className:"fixed inset-0 backdrop-blur-md z-50 flex items-center justify-center",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40"}),r.jsxs("div",{className:`relative ${p.bgColor} border ${p.borderColor} rounded-2xl p-8 shadow-2xl max-w-md mx-4 transform transition-all duration-500 animate-in zoom-in-95 fade-in-0`,children:[r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx("div",{className:`text-6xl ${e?"animate-bounce":"animate-pulse"} transition-all duration-300`,children:p.emoji}),r.jsx("div",{className:`font-bold text-2xl ${p.textColor}`,children:p.title}),r.jsx("div",{className:"text-muted-foreground text-base",children:p.subtitle}),r.jsx("div",{className:"w-full bg-background/30 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-150 ease-out ${e?"bg-green-400":"bg-red-400"}`,style:{width:`${u}%`}})}),r.jsx("div",{className:"text-sm text-muted-foreground/90 leading-relaxed px-2",children:p.description}),r.jsxs("div",{className:"flex items-center justify-center gap-3 pt-2",children:[r.jsx("div",{className:`animate-spin rounded-full h-5 w-5 border-2 border-t-transparent ${p.accentColor}`}),r.jsx("span",{className:`text-sm font-medium ${p.textColor}`,children:e?"Redirecionando...":"Retornando..."})]})]}),r.jsx("div",{className:`absolute inset-0 rounded-2xl border-2 ${p.borderColor} animate-pulse pointer-events-none`})]})]})};function kK(){const t=Rt(),{user:e}=zs(),{gameState:s,performAction:a,loading:n,selectCharacter:i,addGameLogMessage:c,updatePlayerStats:u,updatePlayerConsumables:f,gameLog:h}=Mc(),{player:p,currentEnemy:g,currentFloor:x,isPlayerTurn:y}=s,[_,j]=b.useState(!1),[N,S]=b.useState(!1),[C,E]=b.useState(!1),[M,R]=b.useState(!1),[P,$]=b.useState(!1),[k,O]=b.useState(!1),[H,Y]=b.useState(!0),[I,z]=b.useState(!1),ee=b.useRef(!1),G=b.useRef(0),A=b.useRef(null),B=b.useRef(null),V=b.useRef(new Set),W=b.useRef(!1),L=b.useRef({floor:0,enemyName:"",rewardsProcessed:!1}),[F,ie]=b.useState({xp:0,gold:0,drops:[],leveledUp:!1,newLevel:0});b.useEffect(()=>{console.log(`[GameBattle] Andar atual: ${p.floor}`)},[p.floor]),b.useEffect(()=>{const Pe=s.mode==="battle"&&g&&g.hp>0&&!y&&!n.performAction&&!s.battleRewards;return Pe&&!B.current&&(console.log("[GameBattle] Iniciando deteco de turno travado"),B.current=setTimeout(()=>{console.warn("[GameBattle] Possvel travamento detectado"),O(!0),me.warning("Sistema de Recuperao",{description:"Possvel travamento detectado. Use o boto de emergncia se necessrio.",duration:4e3}),B.current=null},5e3)),!Pe&&B.current&&(clearTimeout(B.current),B.current=null),()=>{B.current&&(clearTimeout(B.current),B.current=null)}},[y,g==null?void 0:g.hp,n.performAction,s.mode,s.battleRewards]),b.useEffect(()=>{if(!s.battleRewards)return;const ye=`${p.floor}-${(g==null?void 0:g.name)||"unknown"}-${s.battleRewards.xp}`;if(V.current.has(ye)){console.log(`[GameBattle] Recompensa j processada: ${ye}`);return}L.current.floor!==p.floor&&(console.log(`[GameBattle] Novo andar detectado (${L.current.floor} -> ${p.floor}), limpando cache`),V.current.clear()),V.current.add(ye),L.current={floor:p.floor,enemyName:(g==null?void 0:g.name)||"unknown",rewardsProcessed:!0},console.log(`[GameBattle] Processando recompensa de vitria: XP ${s.battleRewards.xp}, Gold ${s.battleRewards.gold}`);const Pe=s.battleRewards;ie({xp:Pe.xp,gold:Pe.gold,drops:Pe.drops||[],leveledUp:Pe.leveledUp,newLevel:Pe.newLevel}),_||j(!0);const Ae=`Vitria! Voc derrotou o inimigo e recebeu ${Pe.xp} XP e ${Pe.gold} Gold.`;c(Ae,"system"),Pe.leveledUp&&Pe.newLevel&&c(`Voc subiu para o nvel ${Pe.newLevel}!`,"system")},[s.battleRewards,s.mode,p.floor,g==null?void 0:g.name,_,c]),b.useEffect(()=>{s.mode==="gameover"&&p.hp<=0&&(console.log("[GameBattle] Personagem morreu - exibindo modal de morte"),S(!0),s.characterDeleted&&(console.log("[GameBattle] Personagem foi deletado permanentemente"),c(`${p.name} foi perdido permanentemente. O sistema de Permadeath est ativo.`,"system")))},[s.mode,p.hp,s.characterDeleted,p.name,c]),b.useEffect(()=>{if(console.log("[GameBattle]  Verificando estado de fuga:",{mode:s.mode,fleeSuccessful:s.fleeSuccessful,showFleeOverlay:M,hasEnemy:!!g,enemyName:g==null?void 0:g.name,playerName:p.name}),(s.mode==="fled"||s.fleeSuccessful===!0)&&!M){console.log("[GameBattle]  FUGA DETECTADA - Ativando overlay IMEDIATAMENTE");const Pe=s.mode==="fled"||s.fleeSuccessful===!0;console.log(`[GameBattle] ${Pe?" FUGA BEM-SUCEDIDA":" FUGA FALHOU"} - Preparando overlay`),$(Pe),R(!0),ee.current=!0,console.log("[GameBattle]  Overlay de fuga ativado com sucesso:",{isSuccess:Pe,overlayVisible:!0})}},[s.mode,s.fleeSuccessful,g,M,p.name]),b.useEffect(()=>{const ye=()=>{const Pe=window.innerWidth<=768,Ae=window.innerHeight>window.innerWidth;z(Pe&&Ae)};return ye(),window.addEventListener("resize",ye),window.addEventListener("orientationchange",ye),()=>{window.removeEventListener("resize",ye),window.removeEventListener("orientationchange",ye)}},[]),b.useEffect(()=>{const ye=()=>{E(!0)};return window.addEventListener("openAttributeModal",ye),()=>{window.removeEventListener("openAttributeModal",ye)}},[]),b.useEffect(()=>((async()=>{if(W.current){console.log("[GameBattle] Personagem j carregado, ignorando carregamento duplo");return}Y(!0);const Pe=window.location.pathname.split("/").pop();if(!Pe){console.warn("[GameBattle] ID do personagem no encontrado na URL"),t({to:"/game/play"});return}try{console.log(`[GameBattle] Iniciando carregamento do personagem: ${Pe}`);const Ae=await at.getCharacter(Pe);Ae.success&&Ae.data?(console.log(`[GameBattle] Personagem carregado com sucesso: ${Ae.data.name} (andar: ${Ae.data.floor})`),W.current=!0,await i(Ae.data),console.log(`[GameBattle] selectCharacter concludo para ${Ae.data.name}`)):(console.error("[GameBattle] Erro ao carregar personagem:",Ae.error),me.error("Erro ao carregar personagem",{description:Ae.error||"Erro desconhecido"}),t({to:"/game/play"}))}catch(Ae){console.error("[GameBattle] Exceo ao carregar personagem:",Ae),me.error("Erro ao carregar personagem"),t({to:"/game/play"})}finally{Y(!1)}})(),()=>{V.current.clear()}),[i]);const se=ye=>{console.log("[game-battle] Atualizando consumveis do jogador:",ye.length),f(ye)},ue=(ye,Pe)=>{console.log(`[game-battle] Atualizando stats do jogador: HP ${ye}, Mana ${Pe}`),u(ye,Pe),s.player.id&&at.updateCharacterHpMana(s.player.id,ye,Pe).then(Ae=>{Ae.success?console.log("[game-battle] Stats do personagem atualizados no banco com sucesso"):(console.error("[game-battle] Erro ao atualizar stats no banco:",Ae.error),me.error("Erro ao atualizar status do personagem"))}).catch(Ae=>{console.error("[game-battle] Erro ao atualizar stats:",Ae),me.error("Erro ao atualizar status do personagem")})},le=()=>{t({to:"/game/play"})},re=()=>{E(!0),j(!1)};if(!(s.mode==="fled"||s.fleeSuccessful===!0||M)&&(H||n.performAction))return r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Carregando..."}),r.jsx("p",{className:"text-muted-foreground",children:"Preparando sua aventura"})]})});if(s.mode==="special_event"||s.currentSpecialEvent)return r.jsx(aK,{});const ce=s.mode==="fled"||s.fleeSuccessful===!0,be=!ce&&!s.battleRewards&&!M&&(!x||!p.id||!g&&s.mode==="battle");if(be)return console.log("[GameBattle] Aguardando dados:",{hasCurrentEnemy:!!g,hasCurrentFloor:!!x,hasPlayerId:!!p.id,hasBattleRewards:!!s.battleRewards,gameMode:s.mode,isFugaActive:ce,showFleeOverlay:M,shouldShowLoadingScreen:be}),r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Preparando Batalha..."}),r.jsxs("p",{className:"text-muted-foreground",children:[!x&&"Carregando dados do andar...",!g&&x&&!s.battleRewards&&"Gerando inimigo...",!p.id&&"Carregando personagem..."]}),r.jsxs("div",{className:"mt-4 text-sm text-muted-foreground",children:[r.jsxs("div",{children:["Andar: ",x?"":""]}),r.jsxs("div",{children:["Inimigo: ",g?"":s.battleRewards?"":""]}),r.jsxs("div",{children:["Personagem: ",p.id?"":""]})]})]})});const Ne=g&&g.maxHp>0?Math.max(0,Math.min(100,g.hp/g.maxHp*100)):0,J=p.max_hp>0?Math.max(0,Math.min(100,p.hp/p.max_hp*100)):0,ge=p.max_mana>0?Math.max(0,Math.min(100,p.mana/p.max_mana*100)):0,_e=async(ye,Pe)=>{const Ae=Date.now();if(console.log(`[GameBattle] === EXECUTANDO AO: ${ye} ===`),console.log("[GameBattle] Estado atual:",{mode:s.mode,isPlayerTurn:y,actionProcessing:ee.current,loadingPerformAction:n.performAction}),s.mode==="gameover"||p.hp<=0){console.warn("[GameBattle]  Ao bloqueada - personagem est morto");return}if(ye==="flee"){if(s.mode==="fled"||s.fleeSuccessful){console.warn("[GameBattle]  FUGA BLOQUEADA - j h fuga bem-sucedida");return}console.log("[GameBattle]  FUGA APROVADA - Delegando para provider")}if(ye!=="flee"&&ye!=="continue"&&!y){console.warn(`[GameBattle]  Ao '${ye}' bloqueada - no  turno do jogador`);return}if(Ae-G.current<300){console.warn(`[GameBattle]  Debounce - aguardando ${300-(Ae-G.current)}ms`);return}G.current=Ae,console.log(`[GameBattle]  Delegando ao '${ye}' para provider`);try{await a(ye,Pe)}catch(q){console.error(`[GameBattle]  Erro ao executar ao '${ye}':`,q),me.error(`Erro ao executar ao: ${ye}`)}},De=async()=>{var ye;if(ee.current||n.performAction){console.warn("[GameBattle] Continuar aventura bloqueado - j processando ao");return}console.log("[GameBattle] === CONTINUAR AVENTURA ==="),console.log("[GameBattle] Estado atual:",{floor:s.player.floor,hasRewards:!!s.battleRewards,hasEnemy:!!s.currentEnemy,enemyHp:(ye=s.currentEnemy)==null?void 0:ye.hp}),j(!1),await new Promise(Pe=>setTimeout(Pe,100));try{console.log("[GameBattle] Chamando performAction('continue')..."),await _e("continue"),console.log("[GameBattle] performAction('continue') concludo com sucesso")}catch(Pe){console.error("[GameBattle] Erro ao avanar:",Pe),me.error("Erro ao avanar para o prximo andar"),j(!0)}},Ve=()=>{t({to:"/game/play/hub",search:{character:s.player.id}})},We=async()=>{if(console.log("[GameBattle]  Overlay de fuga concludo, sucesso:",P),R(!1),ee.current=!1,P){console.log("[GameBattle]  Fuga bem-sucedida - iniciando redirecionamento");try{const ye=s.player.id;me.success("Fuga bem-sucedida!",{description:"Retornando ao hub...",duration:2e3}),console.log("[GameBattle]  Resetando andar para 1 antes do redirecionamento");try{await at.updateCharacterFloor(ye,1),console.log("[GameBattle]  Andar resetado para 1 com sucesso")}catch(Pe){console.error("[GameBattle]  Erro ao resetar andar (continuando mesmo assim):",Pe)}console.log("[GameBattle]  Redirecionando para hub"),t({to:"/game/play/hub",search:{character:ye}})}catch(ye){console.error("[GameBattle]  Erro no redirecionamento:",ye),me.error("Erro no redirecionamento",{description:"Tentando novamente...",duration:3e3}),setTimeout(()=>{t({to:"/game/play/hub",search:{character:s.player.id}})},1e3)}}else console.log("[GameBattle]  Fuga falhou - retornando  batalha"),me.warning("Fuga falhou!",{description:"Prepare-se para o contra-ataque...",duration:3e3}),s.mode==="fled"&&console.warn("[GameBattle]  Modo corrigido automaticamente - o sistema deve retornar ao battle mode")};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"w-full max-w-6xl",children:[r.jsx(nK,{currentFloor:{floorNumber:p.floor,type:(x==null?void 0:x.type)||"common",description:(x==null?void 0:x.description)||`Andar ${p.floor}`,isCheckpoint:(x==null?void 0:x.isCheckpoint)||!1,minLevel:(x==null?void 0:x.minLevel)||1},playerLevel:p.level}),r.jsxs("div",{className:"mb-6 relative",children:[!I&&r.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-20 z-10 hidden lg:block",children:r.jsx(cE,{handleAction:_e,isPlayerTurn:y,loading:n,player:p,onPlayerStatsUpdate:ue,onPlayerConsumablesUpdate:se})}),!I&&r.jsx("div",{className:"fixed bottom-4 left-4 z-20 block lg:hidden",children:r.jsx(cE,{handleAction:_e,isPlayerTurn:y,loading:n,player:p,onPlayerStatsUpdate:ue,onPlayerConsumablesUpdate:se})}),r.jsx(QY,{player:p,currentEnemy:g||{id:"placeholder",name:s.battleRewards?"Inimigo derrotado!":"Preparando prximo inimigo...",level:1,hp:0,maxHp:1,attack:0,defense:0,speed:1,image:s.battleRewards?"":"",behavior:"balanced",mana:0,reward_xp:0,reward_gold:0,possible_drops:[],active_effects:{buffs:[],debuffs:[],dots:[],hots:[],attribute_modifications:[]}},playerHpPercentage:J,playerManaPercentage:ge,enemyHpPercentage:g?Ne:0,isPlayerTurn:y})]}),r.jsx("div",{className:"mb-6",children:r.jsx(eK,{handleAction:_e,isPlayerTurn:y,loading:n,player:p,onPlayerStatsUpdate:ue,onPlayerConsumablesUpdate:se,currentEnemy:g,battleRewards:s.battleRewards})}),r.jsx(SK,{gameLog:h}),k&&r.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:r.jsx("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-4 backdrop-blur-sm animate-in slide-in-from-bottom-2 duration-300",children:r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("div",{className:"text-orange-400 font-medium text-sm",children:"Sistema Travado"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Clique para desbloquear se as aes no funcionam"}),r.jsx("button",{onClick:()=>{console.log("[GameBattle] Boto de emergncia acionado"),ee.current=!1,A.current&&(clearTimeout(A.current),A.current=null),O(!1),me.success("Sistema Desbloqueado",{description:"Estados de processamento limpos. Tente sua ao novamente.",duration:3e3})},className:"w-full bg-orange-600 hover:bg-orange-700 text-white text-sm font-medium px-3 py-2 rounded transition-colors",children:" Desbloquear Sistema"}),r.jsx("button",{onClick:()=>O(!1),className:"w-full text-xs text-orange-300/70 hover:text-orange-300 transition-colors",children:"Fechar"})]})})})]}),r.jsx(tK,{isOpen:_,onContinue:De,onReturnToHub:Ve,onOpenAttributeModal:re,rewards:F,leveledUp:F.leveledUp,newLevel:F.newLevel,hasAttributePoints:(p.attribute_points||0)>0}),r.jsx(sK,{isOpen:N,onClose:()=>S(!1),player:{id:p.id,name:p.name,level:p.level,floor:p.floor,hp:p.hp,max_hp:p.max_hp,xp:p.xp,gold:p.gold},gameMessage:`${p.name} foi derrotado no Andar ${p.floor}...`,highestFloor:p.floor,isCharacterDeleted:s.characterDeleted,userId:e==null?void 0:e.id,onReturnToCharacterSelect:le,onViewCemetery:()=>{t({to:"/game/cemetery",search:{character:p.id}})}}),r.jsx(rK,{isOpen:C,onClose:()=>{E(!1),s.battleRewards&&!_&&(console.log("[GameBattle] Reexibindo VictoryModal aps fechar modal de atributos"),j(!0))},character:p}),M&&r.jsx("div",{className:"fixed inset-0 z-50",children:r.jsx(AK,{isVisible:M,isSuccess:P,playerName:p.name,enemyName:g==null?void 0:g.name,onComplete:We})})]})}function TK(){const t=Rt(),{character:e}=bM.useParams(),{loading:s}=Mc(),[a,n]=b.useState(!0);return b.useEffect(()=>{if(!s.loadProgress&&!s.performAction){const i=setTimeout(()=>{n(!1)},100);return()=>clearTimeout(i)}else n(!0)},[s.loadProgress,s.performAction]),b.useEffect(()=>{e||(me.error("Personagem no especificado",{description:"Redirecionando para a seleo de personagens"}),t({to:"/game/play"}))},[e]),a?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsxs("div",{className:"w-full max-w-6xl",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"h-8 w-64 bg-muted/50 animate-pulse rounded mx-auto mb-4"}),r.jsx("div",{className:"h-4 w-48 bg-muted/30 animate-pulse rounded mx-auto"})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[1,2,3].map(i=>r.jsxs("div",{className:"bg-card rounded-lg overflow-hidden shadow animate-pulse",children:[r.jsx("div",{className:"p-4 bg-muted/20",children:r.jsx("div",{className:"h-6 bg-muted/40 rounded w-24 mx-auto"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"aspect-square bg-muted/30 rounded-md mb-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-4 bg-muted/40 rounded w-full"}),r.jsx("div",{className:"h-2 bg-muted/30 rounded w-full"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("div",{className:"h-8 bg-muted/20 rounded"}),r.jsx("div",{className:"h-8 bg-muted/20 rounded"})]})]})]})]},i))}),r.jsxs("div",{className:"bg-card rounded-lg p-4 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-muted/40 rounded w-32 mx-auto mb-4"}),r.jsxs("div",{className:"flex gap-2 justify-center",children:[r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"}),r.jsx("div",{className:"h-10 bg-muted/30 rounded w-24"})]})]})]})}):r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-background to-secondary p-4",children:r.jsx(kK,{})})}const bM=Yt("/_authenticated/game/play/battle/$character")({component:TK}),qy=SI.update({id:"/_public",getParentRoute:()=>Vm}),zd=lq.update({id:"/_authenticated",getParentRoute:()=>Vm}),RK=dq.update({id:"/",path:"/",getParentRoute:()=>Vm}),MK=fq.update({id:"/logout",path:"/logout",getParentRoute:()=>qy}),yM=NT.update({id:"/auth",path:"/auth",getParentRoute:()=>qy}),wM=SG.update({id:"/users",path:"/users",getParentRoute:()=>zd}),PK=DG.update({id:"/profile",path:"/profile",getParentRoute:()=>zd}),$i=LG.update({id:"/game",path:"/game",getParentRoute:()=>zd}),DK=IG.update({id:"/403",path:"/403",getParentRoute:()=>zd}),OK=qG.update({id:"/verify-email",path:"/verify-email",getParentRoute:()=>yM}),$K=H4.update({id:"/$id",path:"/$id",getParentRoute:()=>wM}),LK=nR.update({id:"/spells",path:"/spells",getParentRoute:()=>$i}),BK=uX.update({id:"/ranking",path:"/ranking",getParentRoute:()=>$i}),Li=_X.update({id:"/play",path:"/play",getParentRoute:()=>$i}),IK=IX.update({id:"/guide",path:"/guide",getParentRoute:()=>$i}),VK=OR.update({id:"/crafting",path:"/crafting",getParentRoute:()=>$i}),qK=JX.update({id:"/cemetery",path:"/cemetery",getParentRoute:()=>$i}),UK=BR.update({id:"/shop",path:"/shop",getParentRoute:()=>Li}),zK=IR.update({id:"/inventory",path:"/inventory",getParentRoute:()=>Li}),FK=KR.update({id:"/hub",path:"/hub",getParentRoute:()=>Li}),_M=WR.update({id:"/equipment",path:"/equipment",getParentRoute:()=>Li}),HK=ZR.update({id:"/character-stats",path:"/character-stats",getParentRoute:()=>Li}),GK=QR.update({id:"/select",path:"/select",getParentRoute:()=>_M}),XK=bM.update({id:"/battle/$character",path:"/battle/$character",getParentRoute:()=>Li}),YK={AuthenticatedGamePlayEquipmentSelectRoute:GK},KK=_M._addFileChildren(YK),WK={AuthenticatedGamePlayCharacterStatsRoute:HK,AuthenticatedGamePlayEquipmentRoute:KK,AuthenticatedGamePlayHubRoute:FK,AuthenticatedGamePlayInventoryRoute:zK,AuthenticatedGamePlayShopRoute:UK,AuthenticatedGamePlayBattleCharacterRoute:XK},ZK=Li._addFileChildren(WK),QK={AuthenticatedGameCemeteryRoute:qK,AuthenticatedGameCraftingRoute:VK,AuthenticatedGameGuideRoute:IK,AuthenticatedGamePlayRoute:ZK,AuthenticatedGameRankingRoute:BK,AuthenticatedGameSpellsRoute:LK},JK=$i._addFileChildren(QK),eW={AuthenticatedUsersIdRoute:$K},tW=wM._addFileChildren(eW),sW={Authenticated403Route:DK,AuthenticatedGameRoute:JK,AuthenticatedProfileRoute:PK,AuthenticatedUsersRoute:tW},aW=zd._addFileChildren(sW),rW={PublicAuthVerifyEmailRoute:OK},nW=yM._addFileChildren(rW),oW={PublicAuthRoute:nW,PublicLogoutRoute:MK},iW=qy._addFileChildren(oW),lW={IndexRoute:RK,AuthenticatedRoute:aW,PublicRoute:iW},cW=Vm._addFileChildren(lW)._addFileTypes(),uW=KP({routeTree:cW});F3.createRoot(document.getElementById("root")).render(r.jsx(b.StrictMode,{children:r.jsx(QP,{router:uW})}));export{at as C,WD as D,er as F,KD as S,hW as a,wi as b,po as c,jr as d,Zj as e,DD as f,pb as g,RD as h,VD as i,gW as j,_W as k,jn as l,bW as m,BD as n,OD as o,vW as p,xW as q,wW as r,Vx as s,yW as t,lD as u,zt as v};
